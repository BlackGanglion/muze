(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("muze", [], factory);
	else if(typeof exports === 'object')
		exports["muze"] = factory();
	else
		root["muze"] = factory();
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./packages/muze/src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/webpack/buildin/module.js":
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function (module) {
  if (!module.webpackPolyfill) {
    module.deprecate = function () {};

    module.paths = []; // module.parent = undefined by default

    if (!module.children) module.children = [];
    Object.defineProperty(module, "loaded", {
      enumerable: true,
      get: function get() {
        return module.l;
      }
    });
    Object.defineProperty(module, "id", {
      enumerable: true,
      get: function get() {
        return module.i;
      }
    });
    module.webpackPolyfill = 1;
  }

  return module;
};

/***/ }),

/***/ "./packages/layout/src/enums/constants.js":
/*!************************************************!*\
  !*** ./packages/layout/src/enums/constants.js ***!
  \************************************************/
/*! exports provided: VIEW_INDEX, ROW_MATRIX_INDEX, COLUMN_MATRIX_INDEX, GRID_WIDTH, GRID_HEIGHT, BORDER, ROW_POINTER, COLUMN_POINTER, ROW_SIZE_IS_EQUAL, COLUMN_SIZE_IS_EQUAL, COLUMN_WIDTHS, ROW_HEIGHTS, LEFT_MATRIX_WIDTH, RIGHT_MATRIX_WIDTH, TOP_MATRIX_HEIGHT, BOTTOM_MATRIX_HEIGHT, MOUNT_POINT, LEFT_TABLE_ID, RIGHT_TABLE_ID, TOP_TABLE_ID, BOTTOM_TABLE_ID, CENTER_TABLE_ID, TOP_DIV_ID, BOTTOM_DIV_ID, CENTER_DIV_ID, HAVE_ROWS_CHANGED, HAVE_COLUMNS_CHANGED, HAVE_VALUES_CHANGED, ROW_MATRIX_WIDTH, COLUMN_MATRIX_HEIGHT, UNIT_WIDTH, UNIT_HEIGHT, STYLE, COLOR, WIDTH, COLLAPSE, SPACING, DISTRIBUTION, GUTTERSPACE, BREAK_PAGE, SHOW_ROW_BORDERS, SHOW_COL_BORDERS, SHOW_VALUE_BORDERS, HEIGHT, COLUMN, ROW, TOP, LEFT, RIGHT, BOTTOM, CENTER, CLICK, ROW_LEFT, ROW_RIGHT, COLUMN_BOTTOM, COLUMN_TOP, AUTO, ROW_SPAN, COL_SPAN, ROW_ROOT, COLUMN_ROOT, PRIMARY, SECONDARY, VERTICAL, HORIZONTAL, BLANK_BORDERS, PAGINATION, BUFFER, HOLISTIC, SCROLL, MIDDLE, NO_BORDERS, MAX_WIDTH_AVAIL_FOR_COL_MATRIX, COLUMN_MATRIX, MAX_HEIGHT_AVAIL_FOR_ROW_MATRIX, ROW_MATRIX */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VIEW_INDEX", function() { return VIEW_INDEX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROW_MATRIX_INDEX", function() { return ROW_MATRIX_INDEX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLUMN_MATRIX_INDEX", function() { return COLUMN_MATRIX_INDEX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GRID_WIDTH", function() { return GRID_WIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GRID_HEIGHT", function() { return GRID_HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BORDER", function() { return BORDER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROW_POINTER", function() { return ROW_POINTER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLUMN_POINTER", function() { return COLUMN_POINTER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROW_SIZE_IS_EQUAL", function() { return ROW_SIZE_IS_EQUAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLUMN_SIZE_IS_EQUAL", function() { return COLUMN_SIZE_IS_EQUAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLUMN_WIDTHS", function() { return COLUMN_WIDTHS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROW_HEIGHTS", function() { return ROW_HEIGHTS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LEFT_MATRIX_WIDTH", function() { return LEFT_MATRIX_WIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RIGHT_MATRIX_WIDTH", function() { return RIGHT_MATRIX_WIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOP_MATRIX_HEIGHT", function() { return TOP_MATRIX_HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BOTTOM_MATRIX_HEIGHT", function() { return BOTTOM_MATRIX_HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MOUNT_POINT", function() { return MOUNT_POINT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LEFT_TABLE_ID", function() { return LEFT_TABLE_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RIGHT_TABLE_ID", function() { return RIGHT_TABLE_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOP_TABLE_ID", function() { return TOP_TABLE_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BOTTOM_TABLE_ID", function() { return BOTTOM_TABLE_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CENTER_TABLE_ID", function() { return CENTER_TABLE_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOP_DIV_ID", function() { return TOP_DIV_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BOTTOM_DIV_ID", function() { return BOTTOM_DIV_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CENTER_DIV_ID", function() { return CENTER_DIV_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HAVE_ROWS_CHANGED", function() { return HAVE_ROWS_CHANGED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HAVE_COLUMNS_CHANGED", function() { return HAVE_COLUMNS_CHANGED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HAVE_VALUES_CHANGED", function() { return HAVE_VALUES_CHANGED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROW_MATRIX_WIDTH", function() { return ROW_MATRIX_WIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLUMN_MATRIX_HEIGHT", function() { return COLUMN_MATRIX_HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UNIT_WIDTH", function() { return UNIT_WIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UNIT_HEIGHT", function() { return UNIT_HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "STYLE", function() { return STYLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLOR", function() { return COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WIDTH", function() { return WIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLLAPSE", function() { return COLLAPSE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SPACING", function() { return SPACING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DISTRIBUTION", function() { return DISTRIBUTION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GUTTERSPACE", function() { return GUTTERSPACE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BREAK_PAGE", function() { return BREAK_PAGE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SHOW_ROW_BORDERS", function() { return SHOW_ROW_BORDERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SHOW_COL_BORDERS", function() { return SHOW_COL_BORDERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SHOW_VALUE_BORDERS", function() { return SHOW_VALUE_BORDERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HEIGHT", function() { return HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLUMN", function() { return COLUMN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROW", function() { return ROW; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOP", function() { return TOP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LEFT", function() { return LEFT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RIGHT", function() { return RIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BOTTOM", function() { return BOTTOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CENTER", function() { return CENTER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLICK", function() { return CLICK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROW_LEFT", function() { return ROW_LEFT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROW_RIGHT", function() { return ROW_RIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLUMN_BOTTOM", function() { return COLUMN_BOTTOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLUMN_TOP", function() { return COLUMN_TOP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AUTO", function() { return AUTO; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROW_SPAN", function() { return ROW_SPAN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COL_SPAN", function() { return COL_SPAN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROW_ROOT", function() { return ROW_ROOT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLUMN_ROOT", function() { return COLUMN_ROOT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRIMARY", function() { return PRIMARY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SECONDARY", function() { return SECONDARY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VERTICAL", function() { return VERTICAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HORIZONTAL", function() { return HORIZONTAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BLANK_BORDERS", function() { return BLANK_BORDERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PAGINATION", function() { return PAGINATION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BUFFER", function() { return BUFFER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HOLISTIC", function() { return HOLISTIC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SCROLL", function() { return SCROLL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MIDDLE", function() { return MIDDLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NO_BORDERS", function() { return NO_BORDERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MAX_WIDTH_AVAIL_FOR_COL_MATRIX", function() { return MAX_WIDTH_AVAIL_FOR_COL_MATRIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLUMN_MATRIX", function() { return COLUMN_MATRIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MAX_HEIGHT_AVAIL_FOR_ROW_MATRIX", function() { return MAX_HEIGHT_AVAIL_FOR_ROW_MATRIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROW_MATRIX", function() { return ROW_MATRIX; });
/**
 * This file exports constants that will be used to
 * create the state store of the table layout.
 */

/**
 * The index of top, bottom and center in the matrix
 */
var VIEW_INDEX = {
  top: 0,
  center: 1,
  bottom: 2
};
var ROW_MATRIX_INDEX = {
  0: 'top',
  1: 'center',
  2: 'bottom'
};
var COLUMN_MATRIX_INDEX = {
  0: 'left',
  1: 'middle',
  2: 'right'
};
/**
 * The width of the grid suppied by the user.
 */

var GRID_WIDTH = 'width';
/**
 * The height of the grid supplied by the user.
 */

var GRID_HEIGHT = 'height';
/**
  * The border for the grid
  */

var BORDER = 'border';
/**
 *  The index of the first visible row in view matrix.
 */

var ROW_POINTER = 'rowPointer';
/**
 * The index of the first visible column in the view matrix.
 */

var COLUMN_POINTER = 'columnPointer';
/**
 * Flag to specify whether row sizes should be equal.
 */

var ROW_SIZE_IS_EQUAL = 'isRowSizeEqual';
/**
 * Flag to specify whether column sizes are equal.
 */

var COLUMN_SIZE_IS_EQUAL = 'isColumnSizeEqual';
/**
 * Field to store an array an of the widths of visible columns.
 * @computed
 */

var COLUMN_WIDTHS = 'visibleColumnWidths';
/**
 * Field to store an array of heights of visible rows.
 * @computed
 */

var ROW_HEIGHTS = 'visibleRowHeights';
/**
 * Field to store the width of the left matrix.
 * @computed
 */

var LEFT_MATRIX_WIDTH = 'leftMatrixWidth';
/**
 * Field to store the width of the right matrix.
 * @computed
 */

var RIGHT_MATRIX_WIDTH = 'rightMatrixWidth';
/**
 * Field to store the height of the top matrix.
 * @computed
 */

var TOP_MATRIX_HEIGHT = 'topMatrixHeight';
/**
 * Field to store the height of the bottom matrix.
 * @computed
 */

var BOTTOM_MATRIX_HEIGHT = 'bottomMatrixHeight';
/**
 * The dom element to render the layout inside.
 */

var MOUNT_POINT = 'mount';
/**
 * The id attribute of the left table element.
 */

var LEFT_TABLE_ID = 'grid-left';
/**
 * The id attribute of the right table element.
 */

var RIGHT_TABLE_ID = 'grid-right';
/**
 * The id attribute of the top table.
 */

var TOP_TABLE_ID = 'grid-top';
/**
 * The id attribute of the bottom table.
 */

var BOTTOM_TABLE_ID = 'grid-bottom';
/**
 * The id attribute of the center table.
 */

var CENTER_TABLE_ID = 'grid-center';
/**
 * The id attribute of the top div.
 */

var TOP_DIV_ID = 'muze-div-top';
/**
 * The id attribute of the bottom div.
 */

var BOTTOM_DIV_ID = 'muze-div-bottom';
/**
 * The id attribute of the center div.
 */

var CENTER_DIV_ID = 'muze-div-center';
/**
 * Field that indicates if the row configuration has changed
 */

var HAVE_ROWS_CHANGED = 'haveRowsChanged';
/**
 * Field that indicates if the column configuration has changed
 */

var HAVE_COLUMNS_CHANGED = 'haveColumnsChanged';
/**
 * Field that indicates if the values configuration for the center matrix has changed
 */

var HAVE_VALUES_CHANGED = 'haveValuesChanged';
/**
 * Field that indicates the width of row matrix
 */

var ROW_MATRIX_WIDTH = 'rowMatrixWidth';
/**
 * Field that indicates the height of row matrix
 */

var COLUMN_MATRIX_HEIGHT = 'columnMatrixHeight';
/**
 * Field that indicates the unit width of layout
 */

var UNIT_WIDTH = 'unitWidth';
/**
 * Field that indicates the unit height of layout
 */

var UNIT_HEIGHT = 'unitHeight';
/**
 * Field that indicates the style object
 */

var STYLE = 'style';
/**
 * Field that indicates the color configuration
 */

var COLOR = 'color';
/**
 * Field that indicates width
 */

var WIDTH = 'width';
/**
 * Field that indicates collpase property for border
 */

var COLLAPSE = 'collapse';
/**
 * Field that indicates spacing property for border
 */

var SPACING = 'spacing';
/**
 * Field that indicates spacing property for border
 */

var DISTRIBUTION = 'distribution';
/**
 * Field that indicates spacing property for border
 */

var GUTTERSPACE = 'gutterSpace';
/**
 * Field that indicates spacing property for border
 */

var BREAK_PAGE = 'breakPage';
/**
 * Field that indicates spacing property for border
 */

var SHOW_ROW_BORDERS = 'showRowBorders';
/**
 * Field that indicates spacing property for border
 */

var SHOW_COL_BORDERS = 'showColBorders';
/**
 * Field that indicates spacing property for border
 */

var SHOW_VALUE_BORDERS = 'showValueBorders';
var HEIGHT = 'height';
var COLUMN = 'column';
var ROW = 'row';
var TOP = 'top';
var LEFT = 'left';
var RIGHT = 'right';
var BOTTOM = 'bottom';
var CENTER = 'center';
var CLICK = 'click';
var ROW_LEFT = 'rowLeft';
var ROW_RIGHT = 'rowRight';
var COLUMN_BOTTOM = 'colBottom';
var COLUMN_TOP = 'colTop';
var AUTO = 'auto';
var ROW_SPAN = 'rowSpan';
var COL_SPAN = 'colSpan';
var ROW_ROOT = 'rowRoot';
var COLUMN_ROOT = 'columnRoot';
var PRIMARY = 'primary';
var SECONDARY = 'secondary';
var VERTICAL = 'vertical';
var HORIZONTAL = 'horizontal';
var BLANK_BORDERS = 'rgba(0,0,0,0)';
var PAGINATION = 'pagination';
var BUFFER = 'buffer';
var HOLISTIC = 'holistic';
var SCROLL = 'scroll';
var MIDDLE = 'middle';
var NO_BORDERS = null;
var MAX_WIDTH_AVAIL_FOR_COL_MATRIX = 'maxWidthAvailableForColumnMatrix';
var COLUMN_MATRIX = 'columnMatrix';
var MAX_HEIGHT_AVAIL_FOR_ROW_MATRIX = 'maxHeightAvailableForRowMatrix';
var ROW_MATRIX = 'rowMatrix';

/***/ }),

/***/ "./packages/layout/src/generic-layout/index.js":
/*!*****************************************************!*\
  !*** ./packages/layout/src/generic-layout/index.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return GenericLayout; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/constants */ "./packages/layout/src/enums/constants.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }



/*
 * This is the abstract implementation of the root layout. This takes care of common work which all the layouts
 * has to handle. The common work includes sanitizaion of inputs, update, rerender, dispose etc. This class can't be
 * used directly (as ofcourse this is an abstract implementaiton), the class which is implementing it has to implement
 * the necessary methods and gives its on visual.
 */

/**
 * This class is used to create a generic layout. It can be extended to create layouts
 * of different types
 * @class GenericLayout
 */

var GenericLayout =
/*#__PURE__*/
function () {
  /**
   * Creates an instance of TableLayout.
   * @param {HTMLElement} mountPoint DOM element/d3 selection where the layout is to be mounted
   * @param {Object} measurement The dimensions of the layout
   * @param {Object} config configuration to be given for the layout
   * @param {Object} dependencies external dependencies.
   *
   * @memberof GenericLayout
   *
   */
  function GenericLayout(mountPoint, measurement, config, dependencies) {
    _classCallCheck(this, GenericLayout);

    this._config = {};
    this._measurement = {};
    this._matrices = []; // External dependencies to be included for the layout. This includes the ext global dependencies like
    // smartlabel which has one single implementation of throughout the page or per isntance

    this._dependencies = dependencies;
    this.measurement(measurement);
    this.mountPoint(mountPoint);
    this.config(config);
  }
  /**
   * Returns an object which is used to recreate the layout.
   * @return {Object} the serialized components
   */


  _createClass(GenericLayout, [{
    key: "serialize",
    value: function serialize() {
      return {
        measurement: this.measurement(),
        config: this.config(),
        matrices: this.matrices()
      };
    }
    /**
    * Sets/Gets the config for the layout
    * @param {Object} config configuration for the layout
    * @return {Layout|Object} Gets the Config/ Returns this instance when set
    */

  }, {
    key: "config",
    value: function config(_config) {
      if (_config) {
        this._config = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(this._config || {}, _config);
        this._config.border.width = Math.max(0, this._config.border.width);
        return this;
      }

      return this._config;
    }
    /**
     * Sets/Gets the measurement for the layout
     * @param {Object} measurement measurement for the layout
     * @return {Layout|Object} Gets the measurement/ Returns this instance when set
     */

  }, {
    key: "measurement",
    value: function measurement(_measurement) {
      if (_measurement) {
        this._measurement = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(this._measurement || {}, _measurement);
        return this;
      }

      return this._measurement;
    }
    /**
     * Sets/Gets the matrices for the layout
     * @param {Object} matrices matrices for the layout
     * @return {Layout|Object} Gets the matrices/ Returns this instance when set
     */

  }, {
    key: "matrices",
    value: function matrices(_matrices) {
      if (_matrices) {
        this._matrices = muze_utils__WEBPACK_IMPORTED_MODULE_0__["sanitizeIP"].typeObj([_enums_constants__WEBPACK_IMPORTED_MODULE_1__["TOP"], _enums_constants__WEBPACK_IMPORTED_MODULE_1__["CENTER"], _enums_constants__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"]], _matrices);
        return this;
      }

      return this._matrices;
    }
    /**
     * Sets/Gets the matrix for row
     * @param {Object} matrix matrices for the layout
     * @return {Layout|Object} Gets the matrix/ Returns this instance when set
     */

  }, {
    key: "rowMatrix",
    value: function rowMatrix(matrix) {
      if (matrix) {
        this._rowMatrix = matrix;
        return this;
      }

      return this._rowMatrix;
    }
    /**
     * Sets/Gets the matrix for columns
     * @param {Object} matrix matrices for the layout
     * @return {Layout|Object} Gets the matrix/ Returns this instance when set
     */

  }, {
    key: "columnMatrix",
    value: function columnMatrix(matrix) {
      if (matrix) {
        this._columnMatrix = matrix;
        return this;
      }

      return this._columnMatrix;
    }
    /**
      * Sets/Gets the matrix for value
      * @param {Object} matrix matrices for the layout
      * @return {Layout|Object} Gets the matrix/ Returns this instance when set
      */

  }, {
    key: "centerMatrix",
    value: function centerMatrix(matrix) {
      if (matrix) {
        this._centerMatrix = matrix;
        return this;
      }

      return this._centerMatrix;
    }
    /**
     * Sets/Gets the mountPoint for the layout
     * @param {Object} mountPoint mountPoint for the layout
     * @return {Layout|Object} Gets the mountPoint/ Returns this instance when set
     */

  }, {
    key: "mountPoint",
    value: function mountPoint(_mountPoint) {
      if (_mountPoint) {
        this._mountPoint = _mountPoint;
        return this;
      }

      return this._mountPoint;
    }
  }]);

  return GenericLayout;
}();



/***/ }),

/***/ "./packages/layout/src/grid-layout/border-helper.js":
/*!**********************************************************!*\
  !*** ./packages/layout/src/grid-layout/border-helper.js ***!
  \**********************************************************/
/*! exports provided: applyBorders */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyBorders", function() { return applyBorders; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums/constants */ "./packages/layout/src/enums/constants.js");
var _borderMap;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


var borderMap = (_borderMap = {}, _defineProperty(_borderMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["TOP"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["LEFT"]), _enums_constants__WEBPACK_IMPORTED_MODULE_0__["NO_BORDERS"]), _defineProperty(_borderMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["TOP"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["MIDDLE"]), _enums_constants__WEBPACK_IMPORTED_MODULE_0__["COLUMN"]), _defineProperty(_borderMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["TOP"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["RIGHT"]), _enums_constants__WEBPACK_IMPORTED_MODULE_0__["NO_BORDERS"]), _defineProperty(_borderMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CENTER"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["LEFT"]), _enums_constants__WEBPACK_IMPORTED_MODULE_0__["ROW"]), _defineProperty(_borderMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CENTER"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["MIDDLE"]), _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CENTER"]), _defineProperty(_borderMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CENTER"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["RIGHT"]), _enums_constants__WEBPACK_IMPORTED_MODULE_0__["ROW"]), _defineProperty(_borderMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["LEFT"]), _enums_constants__WEBPACK_IMPORTED_MODULE_0__["NO_BORDERS"]), _defineProperty(_borderMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["MIDDLE"]), _enums_constants__WEBPACK_IMPORTED_MODULE_0__["COLUMN"]), _defineProperty(_borderMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["RIGHT"]), _enums_constants__WEBPACK_IMPORTED_MODULE_0__["NO_BORDERS"]), _borderMap);

var applySpecificBorder = function applySpecificBorder(cells, color, type, style) {
  cells.style("border-".concat(type), "".concat(style, " ").concat(color));
};

var specificBorderApplier = function specificBorderApplier(borderTypes, showBorders, cells, borderInfo) {
  var color = borderInfo.color,
      width = borderInfo.width,
      style = borderInfo.style;
  var borderStyle = "".concat(width, "px ").concat(style);
  borderTypes.forEach(function (borderType) {
    applySpecificBorder(cells, showBorders[borderType] ? color : _enums_constants__WEBPACK_IMPORTED_MODULE_0__["BLANK_BORDERS"], borderType, borderStyle);
  });
};

var borderApplier = function borderApplier(cells, borderInfo) {
  var showRowBorders = borderInfo.showRowBorders,
      showColBorders = borderInfo.showColBorders,
      showValueBorders = borderInfo.showValueBorders;
  return {
    row: function row() {
      return specificBorderApplier([_enums_constants__WEBPACK_IMPORTED_MODULE_0__["TOP"], _enums_constants__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"]], showRowBorders, cells, borderInfo);
    },
    column: function column() {
      return specificBorderApplier([_enums_constants__WEBPACK_IMPORTED_MODULE_0__["LEFT"], _enums_constants__WEBPACK_IMPORTED_MODULE_0__["RIGHT"]], showColBorders, cells, borderInfo);
    },
    center: function center() {
      return specificBorderApplier([_enums_constants__WEBPACK_IMPORTED_MODULE_0__["LEFT"], _enums_constants__WEBPACK_IMPORTED_MODULE_0__["RIGHT"], _enums_constants__WEBPACK_IMPORTED_MODULE_0__["TOP"], _enums_constants__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"]], showValueBorders, cells, borderInfo);
    }
  };
};

var applyBorders = function applyBorders(cells, border, row, column) {
  var borderApplierFn = borderApplier(cells, border);
  var borderMapVal = borderMap["".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["ROW_MATRIX_INDEX"][_enums_constants__WEBPACK_IMPORTED_MODULE_0__["VIEW_INDEX"][row]], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["COLUMN_MATRIX_INDEX"][column])];

  if (borderMapVal) {
    borderApplierFn[borderMapVal]();
  }
};

/***/ }),

/***/ "./packages/layout/src/grid-layout/computations.js":
/*!*********************************************************!*\
  !*** ./packages/layout/src/grid-layout/computations.js ***!
  \*********************************************************/
/*! exports provided: getMatrixMeasurement, setMatrixMeasurement, computeLayoutMeasurements */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMatrixMeasurement", function() { return getMatrixMeasurement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setMatrixMeasurement", function() { return setMatrixMeasurement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeLayoutMeasurements", function() { return computeLayoutMeasurements; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums/constants */ "./packages/layout/src/enums/constants.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


/**
 * Gets measurement for an instance of visual matrix
 *
 * @param {Array} matrix instance of visual matrix
 * @param {string} type height/width
 * @return {Object} Logical height/width of the matrix
 */

function getMatrixMeasurement(matrix, type) {
  if (matrix) {
    return matrix.getLogicalSpace()[type];
  }

  return 0;
}
/**
 * Sets available space for an instance of visual matrix
 *
 * @param {Array} matrix instance of visual matrix
 * @param {string} type height/width
 * @param {number} value Value of measurement
 */

function setMatrixMeasurement(matrix, type, value) {
  if (matrix) {
    var spaces = matrix.getLogicalSpace();

    if (value && spaces[type] !== value) {
      type === _enums_constants__WEBPACK_IMPORTED_MODULE_0__["HEIGHT"] ? matrix.setAvailableSpace(spaces.width, value) : matrix.setAvailableSpace(value, spaces.height);
    }
  }
}

var setAvailableSpace = function setAvailableSpace(matrix, widths, heights) {
  matrix.forEach(function (row, rIdx) {
    row.forEach(function (placeholder, cIdx) {
      placeholder.setAvailableSpace(widths[cIdx], heights[rIdx]);
    });
  });
};

var setViewSpaces = function setViewSpaces(layout, pointerType, viewSpaces) {
  var pointer = layout.config()["".concat(pointerType, "Pointer")];

  if (viewSpaces.length - 1 < pointer) {
    pointer = 0;
    layout.config(_defineProperty({}, "".concat(pointerType, "Pointer"), pointer));
  }

  return pointer;
};

var paginationDetailsMap = {
  column: {
    maxMeasure: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["MAX_WIDTH_AVAIL_FOR_COL_MATRIX"],
    matrix: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["COLUMN_MATRIX"],
    measureType: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["WIDTH"],
    scrollType: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["HORIZONTAL"]
  },
  row: {
    maxMeasure: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["MAX_HEIGHT_AVAIL_FOR_ROW_MATRIX"],
    matrix: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["ROW_MATRIX"],
    measureType: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["HEIGHT"],
    scrollType: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["VERTICAL"]
  }
};
/**
 * This method provides the required width/height in the different pagination stages.
 * If the pagination is holistic, then only the max width/height will be provided for layouting
 * If scroll is enabled, then the entire width/height shall be provided for layouting
 * Note: width is required for scrolling the columns while height is required for scrolling rows
 *
 *
 * @param {Layout} layout Layout instance required for configuration details
 * @param {Object} measureDetails different measure details for row/column
 * @param {number} maxMeasure maximum width/height present for column/row respectively
 * @return {number} Provides the width/height based on which further calculation can occur
 */

var getMatrixMeasureForPagination = function getMatrixMeasureForPagination(layout, measureDetails, maxMeasure, buffer) {
  var _layout$config2 = layout.config(),
      pagination = _layout$config2.pagination;

  var matrix = measureDetails.matrix,
      measureType = measureDetails.measureType,
      scrollType = measureDetails.scrollType;

  switch (pagination) {
    case _enums_constants__WEBPACK_IMPORTED_MODULE_0__["HOLISTIC"]:
      return maxMeasure;

    default:
      {
        var actualMeasure = getMatrixMeasurement(layout[matrix](), measureType) + buffer;

        if (actualMeasure > maxMeasure) {
          layout.scrollInfo(_defineProperty({}, scrollType, true));
        }

        return Math.max(maxMeasure, actualMeasure);
      }
  }
};
/**
 * This method uses the getMatrixMeasureForPagination function to calculate maximum measure
 * depending on the layouting algorithm used
 *
 *
 * @param {Layout} layout Layout instance required for configuration details
 * @param {string} matrixType row/column
 * @param {number} relatedMaxMeasure maximum width/height present for column/row respectively
 * @return {number} Provides the width/height based on which further calculation can occur
 */


var paginationMeasureGetter = function paginationMeasureGetter(layout, matrixType, relatedMaxMeasure, buffer) {
  return getMatrixMeasureForPagination(layout, paginationDetailsMap[matrixType], relatedMaxMeasure, buffer);
};

var getMatrixWidthDetails = function getMatrixWidthDetails(layout) {
  var rowMatrix = layout.rowMatrix();

  var _layout$measurement = layout.measurement(),
      width = _layout$measurement.width;

  var _layout$config3 = layout.config(),
      border = _layout$config3.border,
      buffer = _layout$config3.buffer; // Border adjustment for each cell in the central matrix


  var borderWidth = border.width; // Get width of row matrix

  var rowMatrixWidth = getMatrixMeasurement(rowMatrix, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["WIDTH"]); // Get maximum width allowed for the row matrix

  var maxRowMatrixWidth = Math.min(rowMatrixWidth + buffer, width / 2); // Get maximum width available for the column matrix

  var maxWidthAvailableForColumnMatrix = width - maxRowMatrixWidth - borderWidth; // Set width for column matrix

  var columnMatrixWidth = paginationMeasureGetter(layout, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["COLUMN"], maxWidthAvailableForColumnMatrix, 0);
  return {
    rowMatrixWidth: rowMatrixWidth,
    maxRowMatrixWidth: maxRowMatrixWidth,
    columnMatrixWidth: columnMatrixWidth,
    maxWidthAvailableForColumnMatrix: maxWidthAvailableForColumnMatrix
  };
};

var getHeightRequiredByColMatrix = function getHeightRequiredByColMatrix(layout, columnMatrixWidth) {
  var _layout$measurement2 = layout.measurement(),
      height = _layout$measurement2.height;

  var columnMatrix = layout.columnMatrix(); // Get maximum allowed height for colum matrix

  var maxColumnMatrixHeight = Math.min(columnMatrix.getLogicalSpace().height, height / 2); // Set the computed width and max height to column matrix to determine the actual height
  // that will be taken by the column matrix

  columnMatrix.setAvailableSpace(columnMatrixWidth, maxColumnMatrixHeight); // Get the set of pages column view

  var columnViewPages = columnMatrix.getViewableSpaces(); // Figuring out total space needed by current view space

  var columnViewSpace = columnViewPages[layout.config().columnPointer]; // Getting height of column matrix

  var columnMatrixHeight = columnViewSpace.height.primary + columnViewSpace.height.secondary;
  return {
    columnMatrixHeight: columnMatrixHeight,
    maxColumnMatrixHeight: maxColumnMatrixHeight
  };
};

var getMatrixHeightDetails = function getMatrixHeightDetails(layout, columnMatrixWidth) {
  var _layout$measurement3 = layout.measurement(),
      height = _layout$measurement3.height;

  var _layout$config4 = layout.config(),
      buffer = _layout$config4.buffer; // Get actual height required by column matrix


  var _getHeightRequiredByC = getHeightRequiredByColMatrix(layout, columnMatrixWidth),
      columnMatrixHeight = _getHeightRequiredByC.columnMatrixHeight,
      maxColumnMatrixHeight = _getHeightRequiredByC.maxColumnMatrixHeight; // Based on column height, compute max height available for row matrix


  var maxHeightAvailableForRowMatrix = height - Math.min(maxColumnMatrixHeight, columnMatrixHeight); // Get height for row matrix

  var rowMatrixHeight = paginationMeasureGetter(layout, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["ROW"], maxHeightAvailableForRowMatrix, buffer);
  return {
    columnMatrixHeight: columnMatrixHeight,
    maxColumnMatrixHeight: maxColumnMatrixHeight,
    rowMatrixHeight: rowMatrixHeight,
    maxHeightAvailableForRowMatrix: maxHeightAvailableForRowMatrix
  };
};

var setValueMatrixMeasurements = function setValueMatrixMeasurements(layout, rowViewableSpaces, columnViewableSpaces) {
  var _ref, _ref2, _ref3, _ref4, _ref5;

  var centerMatrix = layout.centerMatrix();

  var _layout$config5 = layout.config(),
      border = _layout$config5.border;

  var matrices = layout.matrices();
  var top = matrices.top,
      bottom = matrices.bottom; // Border adjustment for each cell in the central matrix

  var borderWidth = border.width; // Get the heights for each cell in the row matrix

  var rowHeights = (_ref = []).concat.apply(_ref, _toConsumableArray(rowViewableSpaces.map(function (e) {
    return e.rowHeights.primary;
  }))); // Get the widths for each of the row matrix cells(primary and secondary)


  var rowWidthsPrimary = (_ref2 = []).concat.apply(_ref2, _toConsumableArray(rowViewableSpaces.map(function (e) {
    return e.columnWidths.primary;
  })));

  var rowWidthsSecondary = (_ref3 = []).concat.apply(_ref3, _toConsumableArray(rowViewableSpaces.map(function (e) {
    return e.columnWidths.secondary;
  }))); // Get the widths for each cell in the column matrix


  var columnWidths = (_ref4 = []).concat.apply(_ref4, _toConsumableArray(columnViewableSpaces.map(function (e) {
    return e.columnWidths.primary;
  }))); // Get the widths for each of the column matrix cells(primary and secondary)


  var columnHeightsPrimary = columnViewableSpaces[0].rowHeights.primary;

  var columnHeightsSecondary = (_ref5 = []).concat.apply(_ref5, _toConsumableArray(columnViewableSpaces.map(function (e) {
    return e.rowHeights.secondary;
  }))); // Setting the available space for each cell in the centre matrix computed throught the row and
  // column matrices


  centerMatrix.forEach(function (matrix, rIdx) {
    matrix.forEach(function (placeholder, cIdx) {
      placeholder.setAvailableSpace(columnWidths[cIdx] - borderWidth, rowHeights[rIdx] - borderWidth);
    });
  }); // Set the heights and widths for the corner matrices namely:
  // TOP_LEFT

  setAvailableSpace(top[0], rowWidthsPrimary, columnHeightsPrimary); // TOP_RIGHT

  setAvailableSpace(top[2], rowWidthsSecondary, columnHeightsPrimary); // BOTTOM_LEFT

  setAvailableSpace(bottom[0], rowWidthsPrimary, columnHeightsSecondary); // BOTTOM_RIGHT

  setAvailableSpace(bottom[2], rowWidthsSecondary, columnHeightsSecondary);
};

var bufferCondition = {
  isScroll: true,
  pagination: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["SCROLL"]
};

var getBufferFromCondition = function getBufferFromCondition(layout, type) {
  var scrollInfo = layout.scrollInfo();

  var _layout$config6 = layout.config(),
      pagination = _layout$config6.pagination;

  var currentBufferType = {
    pagination: pagination,
    isScroll: scrollInfo[type]
  };
  return Object.keys(bufferCondition).every(function (e) {
    return bufferCondition[e] === currentBufferType[e];
  });
};

var getActualBufferFromConfig = function getActualBufferFromConfig(layout) {
  var _layout$config7 = layout.config(),
      buffer = _layout$config7.buffer;

  var _map = [_enums_constants__WEBPACK_IMPORTED_MODULE_0__["HORIZONTAL"], _enums_constants__WEBPACK_IMPORTED_MODULE_0__["VERTICAL"]].map(function (type) {
    if (getBufferFromCondition(layout, type)) {
      return buffer;
    }

    return 0;
  }),
      _map2 = _slicedToArray(_map, 2),
      horizontalBuffer = _map2[0],
      verticalBuffer = _map2[1];

  return {
    horizontalBuffer: horizontalBuffer,
    verticalBuffer: verticalBuffer
  };
};
/**
 * Computes the measurements of space for all matrices in the
 * layout
 *
 * @param {Object} layout Instance of grid layout
 * @return {Object} set of measurements for the layout
 */


var computeLayoutMeasurements = function computeLayoutMeasurements(layout) {
  var rowMatrix = layout.rowMatrix();
  var columnMatrix = layout.columnMatrix(); // Compute the widths of the row and column matrices

  var _getMatrixWidthDetail = getMatrixWidthDetails(layout),
      rowMatrixWidth = _getMatrixWidthDetail.rowMatrixWidth,
      maxRowMatrixWidth = _getMatrixWidthDetail.maxRowMatrixWidth,
      maxWidthAvailableForColumnMatrix = _getMatrixWidthDetail.maxWidthAvailableForColumnMatrix,
      columnMatrixWidth = _getMatrixWidthDetail.columnMatrixWidth; // Compute the heights of the row and column matrices


  var _getMatrixHeightDetai = getMatrixHeightDetails(layout, columnMatrixWidth),
      columnMatrixHeight = _getMatrixHeightDetai.columnMatrixHeight,
      rowMatrixHeight = _getMatrixHeightDetai.rowMatrixHeight,
      maxHeightAvailableForRowMatrix = _getMatrixHeightDetai.maxHeightAvailableForRowMatrix;

  var _getActualBufferFromC = getActualBufferFromConfig(layout),
      horizontalBuffer = _getActualBufferFromC.horizontalBuffer,
      verticalBuffer = _getActualBufferFromC.verticalBuffer;

  rowMatrix.setAvailableSpace(maxRowMatrixWidth - verticalBuffer, rowMatrixHeight - horizontalBuffer); // Get row and columns viewable spaces

  var rowViewableSpaces = rowMatrix.getViewableSpaces();
  var columnViewableSpaces = columnMatrix.getViewableSpaces(); // Set view spaces for row and columns

  setViewSpaces(layout, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["ROW"], rowViewableSpaces);
  setViewSpaces(layout, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["COLUMN"], columnViewableSpaces); // Set measures for each cell of the value matrix

  setValueMatrixMeasurements(layout, rowViewableSpaces, columnViewableSpaces);
  return {
    rowMatrixHeight: rowMatrixHeight - horizontalBuffer,
    rowMatrixWidth: rowMatrixWidth - verticalBuffer,
    maxHeightAvailableForRowMatrix: maxHeightAvailableForRowMatrix - horizontalBuffer,
    columnMatrixHeight: columnMatrixHeight,
    columnMatrixWidth: columnMatrixWidth,
    maxWidthAvailableForColumnMatrix: maxWidthAvailableForColumnMatrix
  };
};

/***/ }),

/***/ "./packages/layout/src/grid-layout/defaults.js":
/*!*****************************************************!*\
  !*** ./packages/layout/src/grid-layout/defaults.js ***!
  \*****************************************************/
/*! exports provided: DEFAULT_CONFIGURATION, DEFAULT_MEASUREMENTS, BLANK_BORDERS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_CONFIGURATION", function() { return DEFAULT_CONFIGURATION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_MEASUREMENTS", function() { return DEFAULT_MEASUREMENTS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BLANK_BORDERS", function() { return BLANK_BORDERS; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums/constants */ "./packages/layout/src/enums/constants.js");
var _FieldNames$BORDER, _DEFAULT_CONFIGURATIO, _DEFAULT_MEASUREMENTS;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


/**
 * Default configuration of the layout
 * @return {Object} returns the default configuration
 */

var DEFAULT_CONFIGURATION = (_DEFAULT_CONFIGURATIO = {}, _defineProperty(_DEFAULT_CONFIGURATIO, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["BORDER"], (_FieldNames$BORDER = {}, _defineProperty(_FieldNames$BORDER, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["STYLE"], 'solid'), _defineProperty(_FieldNames$BORDER, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["COLOR"], '#d6d6d6'), _defineProperty(_FieldNames$BORDER, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["WIDTH"], 2), _defineProperty(_FieldNames$BORDER, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["COLLAPSE"], true), _defineProperty(_FieldNames$BORDER, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["SPACING"], 0), _FieldNames$BORDER)), _defineProperty(_DEFAULT_CONFIGURATIO, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["PAGINATION"], 'scroll'), _defineProperty(_DEFAULT_CONFIGURATIO, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["BUFFER"], 20), _defineProperty(_DEFAULT_CONFIGURATIO, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["GUTTERSPACE"], {
  rows: [],
  columns: []
}), _defineProperty(_DEFAULT_CONFIGURATIO, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["DISTRIBUTION"], {
  rows: [],
  columns: []
}), _defineProperty(_DEFAULT_CONFIGURATIO, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["BREAK_PAGE"], {
  rows: [],
  columns: []
}), _defineProperty(_DEFAULT_CONFIGURATIO, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["ROW_SIZE_IS_EQUAL"], false), _defineProperty(_DEFAULT_CONFIGURATIO, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["COLUMN_SIZE_IS_EQUAL"], false), _defineProperty(_DEFAULT_CONFIGURATIO, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["COLUMN_POINTER"], 0), _defineProperty(_DEFAULT_CONFIGURATIO, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["ROW_POINTER"], 0), _DEFAULT_CONFIGURATIO);
/**
 * Default measurements for the layout
 * @return {Object} returns the default measurements
 */

var DEFAULT_MEASUREMENTS = (_DEFAULT_MEASUREMENTS = {}, _defineProperty(_DEFAULT_MEASUREMENTS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["GRID_WIDTH"], 100), _defineProperty(_DEFAULT_MEASUREMENTS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["GRID_HEIGHT"], 100), _defineProperty(_DEFAULT_MEASUREMENTS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["UNIT_WIDTH"], 100), _defineProperty(_DEFAULT_MEASUREMENTS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["UNIT_HEIGHT"], 100), _DEFAULT_MEASUREMENTS);
var BLANK_BORDERS = 'rgba(0,0,0,0)';

/***/ }),

/***/ "./packages/layout/src/grid-layout/index.js":
/*!**************************************************!*\
  !*** ./packages/layout/src/grid-layout/index.js ***!
  \**************************************************/
/*! exports provided: GridLayout, applyBorders, cellSpanMaker, applySpans */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layout */ "./packages/layout/src/grid-layout/layout.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GridLayout", function() { return _layout__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _border_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./border-helper */ "./packages/layout/src/grid-layout/border-helper.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "applyBorders", function() { return _border_helper__WEBPACK_IMPORTED_MODULE_1__["applyBorders"]; });

/* harmony import */ var _span_maker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./span-maker */ "./packages/layout/src/grid-layout/span-maker.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "cellSpanMaker", function() { return _span_maker__WEBPACK_IMPORTED_MODULE_2__["cellSpanMaker"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "applySpans", function() { return _span_maker__WEBPACK_IMPORTED_MODULE_2__["applySpans"]; });





/***/ }),

/***/ "./packages/layout/src/grid-layout/layout-helper.js":
/*!**********************************************************!*\
  !*** ./packages/layout/src/grid-layout/layout-helper.js ***!
  \**********************************************************/
/*! exports provided: generateVisualMatrices */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateVisualMatrices", function() { return generateVisualMatrices; });
/* harmony import */ var _visual_matrix_row_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../visual-matrix/row-matrix */ "./packages/layout/src/visual-matrix/row-matrix.js");
/* harmony import */ var _visual_matrix_column_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../visual-matrix/column-matrix */ "./packages/layout/src/visual-matrix/column-matrix.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }



var generateVisualMatrices = function generateVisualMatrices(context, matrices) {
  // Set of matrices for layout is generated starting with the left matrix
  var leftMatrix = [];
  var rightMatrix = [];
  var topMatrix = [];
  var bottomMatrix = [];
  var begColCells;
  var endColCells;

  var _context$config = context.config(),
      isRowSizeEqual = _context$config.isRowSizeEqual,
      isColumnSizeEqual = _context$config.isColumnSizeEqual,
      gutterSpace = _context$config.gutterSpace,
      distribution = _context$config.distribution,
      border = _context$config.border,
      breakPage = _context$config.breakPage,
      priority = _context$config.priority;

  var _context$measurement = context.measurement(),
      minUnitHeight = _context$measurement.minUnitHeight,
      minUnitWidth = _context$measurement.minUnitWidth;

  var top = matrices.top,
      center = matrices.center,
      bottom = matrices.bottom;

  var _top = _slicedToArray(top, 3),
      topLeft = _top[0],
      topColumns = _top[1],
      topRight = _top[2];

  var _center = _slicedToArray(center, 3),
      leftRows = _center[0],
      valueMatrix = _center[1],
      rightRows = _center[2];

  var _bottom = _slicedToArray(bottom, 3),
      bottomLeft = _bottom[0],
      bottomColumns = _bottom[1],
      bottomRight = _bottom[2];

  if (leftRows.length > 0) {
    // If no left matrix is present, context will be empty
    leftMatrix = [].concat(_toConsumableArray(topLeft), _toConsumableArray(leftRows), _toConsumableArray(bottomLeft));
  }

  if (rightRows.length > 0) {
    // If no right matrix is present, context will be empty
    rightMatrix = [].concat(_toConsumableArray(topRight), _toConsumableArray(rightRows), _toConsumableArray(bottomRight));
  }

  if (topColumns.length > 0 && topColumns[0].length > 0) {
    // If no top matrix is present, context will be empty
    topMatrix = topColumns.map(function (d, i) {
      return [].concat(_toConsumableArray(topLeft[i]), _toConsumableArray(d), _toConsumableArray(topRight[i]));
    });
  }

  if (bottomColumns.length > 0 && bottomColumns[0].length > 0) {
    // If no bottom matrix is present, context will be empty
    bottomMatrix = bottomColumns.map(function (d, i) {
      return [].concat(_toConsumableArray(bottomLeft[i]), _toConsumableArray(d), _toConsumableArray(bottomRight[i]));
    });
  }

  context.rowMatrix(new _visual_matrix_row_matrix__WEBPACK_IMPORTED_MODULE_0__["default"]([leftMatrix, rightMatrix], {
    isDistributionEqual: isRowSizeEqual,
    distribution: distribution.rows,
    gutter: gutterSpace.rows,
    unitMeasures: {
      width: minUnitWidth,
      height: minUnitHeight,
      border: border.width
    },
    priority: priority.row,
    breakPage: breakPage.rows.map(function (e) {
      return e + Math.max(topLeft.length, topRight.length);
    }),
    extraCellLengths: [topLeft.length, bottomLeft.length]
  }));

  if (topLeft.length > 0) {
    begColCells = topLeft[0].length;
  } else {
    begColCells = bottomLeft.length > 0 ? bottomLeft[0].length : 0;
  }

  if (topRight.length > 0) {
    endColCells = topRight[0].length;
  } else {
    endColCells = bottomRight.length > 0 ? bottomRight[0].length : 0;
  }

  context.columnMatrix(new _visual_matrix_column_matrix__WEBPACK_IMPORTED_MODULE_1__["default"]([topMatrix, bottomMatrix], {
    isDistributionEqual: isColumnSizeEqual,
    distribution: distribution.columns,
    gutter: gutterSpace.columns,
    isTransposed: true,
    unitMeasures: {
      width: minUnitWidth,
      height: minUnitHeight,
      border: border.width
    },
    priority: priority.col,
    breakPage: breakPage.columns,
    extraCellLengths: [begColCells, endColCells]
  }));
  context.centerMatrix(valueMatrix);
  return matrices;
};

/***/ }),

/***/ "./packages/layout/src/grid-layout/layout.js":
/*!***************************************************!*\
  !*** ./packages/layout/src/grid-layout/layout.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return GridLayout; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _generic_layout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../generic-layout */ "./packages/layout/src/generic-layout/index.js");
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./defaults */ "./packages/layout/src/grid-layout/defaults.js");
/* harmony import */ var _layout_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./layout-helper */ "./packages/layout/src/grid-layout/layout-helper.js");
/* harmony import */ var _computations__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./computations */ "./packages/layout/src/grid-layout/computations.js");
/* harmony import */ var _view_info_getter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./view-info-getter */ "./packages/layout/src/grid-layout/view-info-getter.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

/**
 * This file declares a table that can be extended to create a Datagrid, crosstab
 * and man other visualzations that require a tabular structure.
 */






/**
 * This class is used to create a tabular structure that
 * can house charts and values.
 *
 * @class GridLayout
 */

var GridLayout =
/*#__PURE__*/
function (_GenericLayout) {
  _inherits(GridLayout, _GenericLayout);

  /**
   * Creates an instance of TableLayout.
   * @param {HTMLElement} matrices Set of upto 9 matrices containing the cells to be rendered
   * @param {HTMLElement} mountPoint DOM element/d3 selection where the layout is to be mounted
   * @param {Object} measurement The dimensions of the layout
   * @param {Object} config external configurations.
   * @memberof GenericLayout
   */
  function GridLayout(matrices, mountPoint, measurement, config) {
    var _this;

    _classCallCheck(this, GridLayout);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(GridLayout).call(this, mountPoint, measurement, config));

    _this.matrices(matrices);

    _this.config(_this.constructor.defaultConfig());

    _this._layoutId = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getUniqueId"])();
    _this._viewInfo = _this.constructor.defaultViewInfo();
    _this._scrollInfo = {
      horizontal: false,
      vertical: false
    };
    return _this;
  }

  _createClass(GridLayout, [{
    key: "matrices",

    /**
     * Sets/Gets the matrices for the layout
     *
     * @param {Array} matrices Set of matrices
     * @return {Object} Getter/Setter
     * @memberof GridLayout
     */
    value: function matrices(_matrices) {
      if (_matrices) {
        this._matrices = Object(_layout_helper__WEBPACK_IMPORTED_MODULE_3__["generateVisualMatrices"])(this, _matrices);
        return this;
      }

      return _get(_getPrototypeOf(GridLayout.prototype), "matrices", this).call(this, _matrices);
    }
    /**
     * Triggers the computations for the layout based on the matrices available
     * This causes a reflow in the entire layout system.
     *
     * @return {Object} Layout instance
     * @memberof GridLayout
     */

  }, {
    key: "triggerReflow",
    value: function triggerReflow() {
      this.scrollInfo({
        horizontal: false,
        vertical: false
      });

      var _computeLayoutMeasure = Object(_computations__WEBPACK_IMPORTED_MODULE_4__["computeLayoutMeasurements"])(this),
          maxHeightAvailableForRowMatrix = _computeLayoutMeasure.maxHeightAvailableForRowMatrix,
          maxWidthAvailableForColumnMatrix = _computeLayoutMeasure.maxWidthAvailableForColumnMatrix;

      this.setViewInformation(maxHeightAvailableForRowMatrix, maxWidthAvailableForColumnMatrix);
      return this;
    }
  }, {
    key: "gotoPage",
    value: function gotoPage(type, pageNumber) {
      var pageType = type.toLowerCase();

      var _this$viewInfo = this.viewInfo(),
          viewMatricesInfo = _this$viewInfo.viewMatricesInfo;

      var totalPages = viewMatricesInfo["".concat(pageType, "Pages")];
      var pointer = Math.min(Math.max(1, pageNumber), totalPages);
      this.config(_defineProperty({}, "".concat(pageType, "Pointer"), pointer - 1));
      this.setViewInformation();
      this.renderGrid();
      return this;
    }
  }, {
    key: "pages",
    value: function pages(type) {
      var _this$viewInfo2 = this.viewInfo(),
          viewMatricesInfo = _this$viewInfo2.viewMatricesInfo;

      var pageType = type.toLowerCase();
      return {
        totalPages: viewMatricesInfo["".concat(pageType, "Pages")],
        currentPage: this.config()["".concat(pageType, "Pointer")] + 1
      };
    }
  }, {
    key: "viewInfo",
    value: function viewInfo() {
      if (arguments.length) {
        this._viewInfo = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._viewInfo;
    }
  }, {
    key: "scrollInfo",
    value: function scrollInfo() {
      if (arguments.length) {
        this._scrollInfo = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(this._scrollInfo, arguments.length <= 0 ? undefined : arguments[0]);
        return this;
      }

      return this._scrollInfo;
    }
    /**
     *
     *
     * @returns
     * @memberof GridLayout
     */

  }, {
    key: "setViewInformation",
    value: function setViewInformation(maxRowHeight, maxColWidth) {
      var _this$config2 = this.config(),
          rowPointer = _this$config2.rowPointer,
          columnPointer = _this$config2.columnPointer,
          border = _this$config2.border;

      var viewMatricesInfo = Object(_view_info_getter__WEBPACK_IMPORTED_MODULE_5__["getViewMatrices"])(this, rowPointer, columnPointer);
      var layoutDimensions = Object(_view_info_getter__WEBPACK_IMPORTED_MODULE_5__["getViewMeasurements"])(this, maxRowHeight, maxColWidth);
      layoutDimensions.border = border;
      this.viewInfo({
        viewMatricesInfo: viewMatricesInfo,
        layoutDimensions: layoutDimensions
      });
      return this;
    }
  }], [{
    key: "defaultViewInfo",
    value: function defaultViewInfo() {
      return Object.assign({}, {
        layoutDimensions: {
          border: this.defaultConfig().border,
          viewHeight: [0, 0, 0],
          viewWidth: [0, 0, 0]
        },
        viewMatricesInfo: {
          columnPages: 0,
          rowPages: 0,
          matrices: {
            top: [],
            center: [],
            bottom: []
          }
        }
      });
    }
    /**
     * Returns initial set of measurements for the grid layout
     *
     * @static
     * @return {Object} Returns initial set of measurements
     * @memberof GridLayout
     */

  }, {
    key: "defaultMeasurement",
    value: function defaultMeasurement() {
      return _defaults__WEBPACK_IMPORTED_MODULE_2__["DEFAULT_MEASUREMENTS"];
    }
    /**
     * Returns initialconfiguration for grid layout
     *
     * @static
     * @return {Object} Returns initial configuration for grid layout
     * @memberof GridLayout
     */

  }, {
    key: "defaultConfig",
    value: function defaultConfig() {
      return _defaults__WEBPACK_IMPORTED_MODULE_2__["DEFAULT_CONFIGURATION"];
    }
    /**
     * This function is used to return an instance of GridLayout
     *
     * @return {GridLayout} Instance of grid layout.
     * @static
     * @memberof GridLayout
     */

  }, {
    key: "create",
    value: function create() {
      return new GridLayout(null, null, this.defaultMeasurement(), this.defaultConfig());
    }
  }]);

  return GridLayout;
}(_generic_layout__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./packages/layout/src/grid-layout/span-maker.js":
/*!*******************************************************!*\
  !*** ./packages/layout/src/grid-layout/span-maker.js ***!
  \*******************************************************/
/*! exports provided: cellSpanMaker, applySpans */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cellSpanMaker", function() { return cellSpanMaker; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applySpans", function() { return applySpans; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/constants */ "./packages/layout/src/enums/constants.js");
var _matrixSpanGeneratorM, _spanApplierMap;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




var orderMaker = function orderMaker(arr) {
  return Array.from(Array(arr.length).keys());
};

var nestByStack = function nestByStack(stack, updateArr) {
  var optionalParams = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  var order = optionalParams.order,
      keyFn = optionalParams.keyFn;
  var arr = updateArr.slice();
  var currStack = stack.slice();
  var prevStack = currStack.slice(); // Order in which element are to be checked for nesting, default normal looping
  // Order is always in the order of nest, i.e., left to right

  order = order || Array.from(Array(arr.length).keys()); // Key function, if array of objects

  keyFn = keyFn || function (v) {
    return v;
  }; // Return same array if stack is empty


  if (currStack.length === 0) {
    var _newArr = [];
    order.forEach(function (e) {
      _newArr.push(arr[e]);
    });
    return {
      prevStack: prevStack,
      currStack: arr,
      arr: _newArr
    };
  }

  var arrVal = '';
  var stackVal = '';
  var newArr = []; // Loop in order

  for (var i = order.length - 1; i >= 0; i--) {
    // Get current element index from the order given
    var currElemIndex = order[i]; // Crete a hashmap for the hierarchy by joining strings of the array for both stack and input array

    arrVal += keyFn(arr[currElemIndex]);
    stackVal += keyFn(currStack[currElemIndex]); // If the current value and value in stack is same, convert it to null

    if (arrVal === stackVal) {
      newArr[currElemIndex] = null;
    } else {
      stackVal = ''; // Loop from the current index in order to the last element in order to change the
      // whole hierarchy

      for (var j = i; j < order.length; j++) {
        var newElem = order[j];
        var arrElem = arr[newElem];
        newArr[newElem] = arrElem; // Reset stack to new stack

        currStack[newElem] = arrElem;
        stackVal = arrVal;
      }
    }
  }

  var returnArr = [];
  order.forEach(function (e) {
    returnArr.push(newArr[e]);
  });
  return {
    prevStack: prevStack,
    currStack: currStack,
    arr: returnArr
  };
};

var spanCalculator = function spanCalculator(colData, colIdx, matrix, rIdx) {
  // if data is not header cell then rowspan
  // has to be 1
  if (!colData) {
    return function () {
      return 1;
    };
  }

  var conditions = {
    row: function row(count) {
      return matrix[rIdx + count] && matrix[rIdx + count][colIdx];
    },
    column: function column(count) {
      return matrix[rIdx][colIdx + count];
    }
  };
  return function (type) {
    var count = 1;
    var isNull = false;

    while (!isNull) {
      if (conditions[type](count) === null) {
        count += 1;
      } else {
        isNull = true;
      }
    }

    return count;
  };
};

var maskCreator = function maskCreator(matrix, order) {
  return {
    row: function row() {
      var stack = [];
      return matrix.map(function (e) {
        var _nestByStack = nestByStack(stack, e, {
          keyFn: function keyFn(val) {
            return val.valueOf();
          },
          order: order
        }),
            currStack = _nestByStack.currStack,
            arr = _nestByStack.arr;

        stack = currStack;
        return arr;
      });
    },
    column: function column() {
      var stack = [];
      var viewMatrix = [];
      matrix.length && matrix[0].forEach(function (cell, colIndex) {
        var hierarchy = [];
        matrix.forEach(function (row) {
          hierarchy.push(row[colIndex]);
        });

        var _nestByStack2 = nestByStack(stack, hierarchy, {
          keyFn: function keyFn(val) {
            return val.valueOf();
          },
          order: order
        }),
            currStack = _nestByStack2.currStack,
            arr = _nestByStack2.arr;

        stack = currStack;
        matrix.forEach(function (row, rowIndex) {
          viewMatrix[rowIndex] = viewMatrix[rowIndex] || [];
          viewMatrix[rowIndex][colIndex] = arr[rowIndex];
        });
      });
      return viewMatrix;
    }
  };
};

var spanGenerator = function spanGenerator(viewMatrix) {
  return {
    row: function row() {
      var spans = [];
      viewMatrix.forEach(function (row, ridx) {
        spans[ridx] = spans[ridx] || [];
        row.forEach(function (col, i) {
          if (viewMatrix[ridx][i]) {
            var currSpan = spanCalculator(col, i, viewMatrix, ridx)('row');
            currSpan && spans[ridx].push(currSpan);
          }
        });
      });
      return spans;
    },
    column: function column() {
      return viewMatrix.map(function (row, ridx) {
        return row.map(function (col, i) {
          return spanCalculator(col, i, viewMatrix, ridx)('column');
        }).filter(function (col) {
          return col !== 1;
        });
      });
    }
  };
};

var getOrder = function getOrder(isReverse) {
  return {
    row: function row(matrix) {
      if (isReverse) {
        return orderMaker(matrix[0]).reverse();
      }

      return orderMaker(matrix[0]);
    },
    column: function column(matrix) {
      if (isReverse) {
        return orderMaker(matrix).reverse();
      }

      return orderMaker(matrix);
    }
  };
};

var matrixSpanGeneratorMap = (_matrixSpanGeneratorM = {}, _defineProperty(_matrixSpanGeneratorM, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["TOP"], "-1"), {
  orderGetter: getOrder(false)[_enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLUMN"]],
  viewMatrixMaker: function viewMatrixMaker() {
    return maskCreator.apply(void 0, arguments)[_enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLUMN"]];
  },
  spanMaker: function spanMaker() {
    return spanGenerator.apply(void 0, arguments)[_enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLUMN"]];
  }
}), _defineProperty(_matrixSpanGeneratorM, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"], "-1"), {
  orderGetter: getOrder(true)[_enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLUMN"]],
  viewMatrixMaker: function viewMatrixMaker() {
    return maskCreator.apply(void 0, arguments)[_enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLUMN"]];
  },
  spanMaker: function spanMaker() {
    return spanGenerator.apply(void 0, arguments)[_enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLUMN"]];
  }
}), _defineProperty(_matrixSpanGeneratorM, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CENTER"], "-0"), {
  orderGetter: getOrder(false)[_enums_constants__WEBPACK_IMPORTED_MODULE_1__["ROW"]],
  viewMatrixMaker: function viewMatrixMaker() {
    return maskCreator.apply(void 0, arguments)[_enums_constants__WEBPACK_IMPORTED_MODULE_1__["ROW"]];
  },
  spanMaker: function spanMaker() {
    return spanGenerator.apply(void 0, arguments)[_enums_constants__WEBPACK_IMPORTED_MODULE_1__["ROW"]];
  }
}), _defineProperty(_matrixSpanGeneratorM, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CENTER"], "-2"), {
  orderGetter: getOrder(true)[_enums_constants__WEBPACK_IMPORTED_MODULE_1__["ROW"]],
  viewMatrixMaker: function viewMatrixMaker() {
    return maskCreator.apply(void 0, arguments)[_enums_constants__WEBPACK_IMPORTED_MODULE_1__["ROW"]];
  },
  spanMaker: function spanMaker() {
    return spanGenerator.apply(void 0, arguments)[_enums_constants__WEBPACK_IMPORTED_MODULE_1__["ROW"]];
  }
}), _matrixSpanGeneratorM);

var matrixSpanGenerator = function matrixSpanGenerator(type) {
  var generator = matrixSpanGeneratorMap[type];

  if (generator) {
    return generator;
  }

  return {
    orderGetter: function orderGetter() {
      return null;
    },
    viewMatrixMaker: function viewMatrixMaker(matrix) {
      return function () {
        return matrix;
      };
    },
    spanMaker: function spanMaker() {
      return function () {
        return null;
      };
    }
  };
};
/**
 * This function is used to set the col and row spans
 * for the matrices based on repeated/hierarchichal data
 *
 * @export
 * @param {Array} matrix The 2d array for which filtering is to be done
 * @param {string} type Type of array (center, top, bottom)
 * @param {number} index Index of array in the row
 * @return {Object} containing the view matrix and their spans
 */


function cellSpanMaker(matrix, type, index) {
  var spans = null;
  var viewMatrix = matrix;

  var _matrixSpanGenerator = matrixSpanGenerator("".concat(type, "-").concat(index)),
      orderGetter = _matrixSpanGenerator.orderGetter,
      viewMatrixMaker = _matrixSpanGenerator.viewMatrixMaker,
      spanMaker = _matrixSpanGenerator.spanMaker;

  if (matrix.length) {
    var order = orderGetter(matrix);
    viewMatrix = viewMatrixMaker(matrix, order)();
    spans = spanMaker(viewMatrix)();
  }

  return {
    viewMatrix: viewMatrix,
    spans: spans
  };
}

var spaceAllocationDueToSpan = function spaceAllocationDueToSpan(span, placeholder, borderWidth) {
  var _ref;

  var height = placeholder.availHeight();
  var width = placeholder.availWidth();
  return _ref = {}, _defineProperty(_ref, _enums_constants__WEBPACK_IMPORTED_MODULE_1__["ROW_SPAN"], function () {
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this).style('height', "".concat(height + borderWidth, "px"));

    if (span > 1) {
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this).style('height', "".concat(height * span + borderWidth * span, "px"));
      placeholder.setAvailableSpace(width, height * span);
    }
  }), _defineProperty(_ref, _enums_constants__WEBPACK_IMPORTED_MODULE_1__["COL_SPAN"], function () {
    if (span > 1) {
      placeholder.setAvailableSpace(width * span + borderWidth * (span - 1), height);
    }

    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this).style('height', "".concat(height, "px"));
  }), _ref;
};

var spanApplier = function spanApplier(cells, spans, config, type) {
  var borderWidth = config.border.width;
  cells.attr(type, function (cell, colIndex) {
    var span = spans[cell.rowIndex][colIndex];
    var placeholder = cell.placeholder;
    spaceAllocationDueToSpan(span, placeholder, borderWidth)[type].bind(this)();
    return span;
  });
};

var spanApplierMap = (_spanApplierMap = {}, _defineProperty(_spanApplierMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["TOP"], "-0"), null), _defineProperty(_spanApplierMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["TOP"], "-1"), function _() {
  for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
    params[_key] = arguments[_key];
  }

  return spanApplier.apply(void 0, params.concat([_enums_constants__WEBPACK_IMPORTED_MODULE_1__["COL_SPAN"]]));
}), _defineProperty(_spanApplierMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["TOP"], "-2"), null), _defineProperty(_spanApplierMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CENTER"], "-0"), function _() {
  for (var _len2 = arguments.length, params = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    params[_key2] = arguments[_key2];
  }

  return spanApplier.apply(void 0, params.concat([_enums_constants__WEBPACK_IMPORTED_MODULE_1__["ROW_SPAN"]]));
}), _defineProperty(_spanApplierMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CENTER"], "-1"), null), _defineProperty(_spanApplierMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CENTER"], "-2"), function _() {
  for (var _len3 = arguments.length, params = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
    params[_key3] = arguments[_key3];
  }

  return spanApplier.apply(void 0, params.concat([_enums_constants__WEBPACK_IMPORTED_MODULE_1__["ROW_SPAN"]]));
}), _defineProperty(_spanApplierMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"], "-0"), null), _defineProperty(_spanApplierMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"], "-1"), function _() {
  for (var _len4 = arguments.length, params = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
    params[_key4] = arguments[_key4];
  }

  return spanApplier.apply(void 0, params.concat([_enums_constants__WEBPACK_IMPORTED_MODULE_1__["COL_SPAN"]]));
}), _defineProperty(_spanApplierMap, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"], "-2"), null), _spanApplierMap);
var applySpans = function applySpans(cells, spans, config, type) {
  var applier = spanApplierMap[type];

  if (applier) {
    applier(cells, spans, config);
  }
};

/***/ }),

/***/ "./packages/layout/src/grid-layout/view-info-getter.js":
/*!*************************************************************!*\
  !*** ./packages/layout/src/grid-layout/view-info-getter.js ***!
  \*************************************************************/
/*! exports provided: getViewMatrices, getViewMeasurements */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getViewMatrices", function() { return getViewMatrices; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getViewMeasurements", function() { return getViewMeasurements; });
/**
 * Gets view matrices based on current pointers for row and column
 *
 * @param {Object} layout instance of layout
 * @param {number} rowPointer current row pointer
 * @param {number} columnPointer current column pointer
 * @return {Object} returns the view matrix and its relevant information
 */
var getViewMatrices = function getViewMatrices(layout, rowPointer, columnPointer) {
  var rowMatrix = layout.rowMatrix();
  var columnMatrix = layout.columnMatrix();
  var centerMatrix = layout.centerMatrix();
  var matrices = layout.matrices();
  var rowMatrices = rowMatrix.getViewableMatrices();
  var columnMatrices = columnMatrix.getViewableMatrices();
  var centralMatrixPointer = {
    row: 0,
    column: 0
  };

  for (var i = rowPointer - 1; i >= 0; i--) {
    var length = Math.max(rowMatrices[i].primaryMatrix.length, rowMatrices[i].secondaryMatrix.length);
    centralMatrixPointer.row += length;
  }
  /* istanbul ignore next */


  for (var _i = columnPointer - 1; _i >= 0; _i--) {
    var matrix = columnMatrices[_i];
    var primaryMatrix = matrix.primaryMatrix,
        secondaryMatrix = matrix.secondaryMatrix;

    var _length = Math.max(primaryMatrix[0] ? primaryMatrix[0].length : 0, secondaryMatrix[0] ? secondaryMatrix[0].length : 0);

    centralMatrixPointer.column += _length;
  }

  matrices.top[1] = columnMatrices[columnPointer].primaryMatrix;
  matrices.bottom[1] = columnMatrices[columnPointer].secondaryMatrix;
  matrices.center[0] = rowMatrices[rowPointer].primaryMatrix;
  matrices.center[2] = rowMatrices[rowPointer].secondaryMatrix;
  var rowMatrixLen = Math.max(matrices.center[0].length, matrices.center[2].length);
  /* istanbul ignore next */

  var columnMatrixLen = Math.max(matrices.top[1][0] ? matrices.top[1][0].length : 0, matrices.bottom[1][0] ? matrices.bottom[1][0].length : 0);
  matrices.center[1] = centerMatrix.slice(centralMatrixPointer.row, centralMatrixPointer.row + rowMatrixLen).map(function (matrix) {
    return matrix.slice(centralMatrixPointer.column, centralMatrixPointer.column + columnMatrixLen);
  });
  return {
    matrices: matrices,
    rowPages: rowMatrices.length,
    columnPages: columnMatrices.length
  };
};

var measureSum = function measureSum(measureArr) {
  return measureArr.reduce(function (total, measure) {
    return total + measure;
  }, 0);
};
/**
 * Returns measurements of the cells of the current matrix
 *
 * @param {Object} layout instance of layout
 * @return {Object} returns the measurements for current view matrix
 */


var getViewMeasurements = function getViewMeasurements(layout, maxRowHeight, maxColWidth) {
  var rowMatrix = layout.rowMatrix();
  var columnMatrix = layout.columnMatrix();

  var _layout$config = layout.config(),
      columnPointer = _layout$config.columnPointer,
      rowPointer = _layout$config.rowPointer;

  var rowSpaces = rowMatrix.getViewableSpaces()[rowPointer];
  var colSpaces = columnMatrix.getViewableSpaces()[columnPointer];
  var rowHeights = rowSpaces.rowHeights,
      rowMatrixWidth = rowSpaces.width;
  var columnWidths = colSpaces.columnWidths,
      columnMatrixHeight = colSpaces.height;
  var leftWidth = rowMatrixWidth.primary,
      rightWidth = rowMatrixWidth.secondary;
  var topHeight = columnMatrixHeight.primary,
      bottomHeight = columnMatrixHeight.secondary;
  var centerHeight = measureSum(rowHeights.primary);
  var centerWidth = measureSum(columnWidths.primary);
  var viewWidth = [leftWidth, Math.min(centerWidth, maxColWidth), rightWidth];
  var viewHeight = [topHeight, Math.min(centerHeight, maxRowHeight), bottomHeight];
  return {
    viewWidth: viewWidth,
    viewHeight: viewHeight,
    actualCenterMeasures: {
      height: centerHeight,
      width: centerWidth
    },
    totalMeasures: {
      width: measureSum(viewWidth),
      height: measureSum(viewHeight)
    },
    unitHeights: rowHeights,
    unitWidths: columnWidths
  };
};

/***/ }),

/***/ "./packages/layout/src/index.js":
/*!**************************************!*\
  !*** ./packages/layout/src/index.js ***!
  \**************************************/
/*! exports provided: GridLayout, cellSpanMaker, applySpans, applyBorders */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _grid_layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./grid-layout */ "./packages/layout/src/grid-layout/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GridLayout", function() { return _grid_layout__WEBPACK_IMPORTED_MODULE_0__["GridLayout"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "cellSpanMaker", function() { return _grid_layout__WEBPACK_IMPORTED_MODULE_0__["cellSpanMaker"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "applySpans", function() { return _grid_layout__WEBPACK_IMPORTED_MODULE_0__["applySpans"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "applyBorders", function() { return _grid_layout__WEBPACK_IMPORTED_MODULE_0__["applyBorders"]; });

/**
 * This file is used to export all the public classes in this module.
 * @module Layout
 */


/***/ }),

/***/ "./packages/layout/src/tree-layout/constants/defaults.js":
/*!***************************************************************!*\
  !*** ./packages/layout/src/tree-layout/constants/defaults.js ***!
  \***************************************************************/
/*! exports provided: DEFAULT_WIDTH, DEFAULT_HEIGHT, DEFAULT_CLASS_NAME, NODE_PREFIX */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_WIDTH", function() { return DEFAULT_WIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_HEIGHT", function() { return DEFAULT_HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_CLASS_NAME", function() { return DEFAULT_CLASS_NAME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NODE_PREFIX", function() { return NODE_PREFIX; });
/* harmony import */ var _muze_src_defaults__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../muze/src/defaults */ "./packages/muze/src/defaults.js");

var DEFAULT_WIDTH = 600;
var DEFAULT_HEIGHT = 400;
var DEFAULT_CLASS_NAME = "".concat(_muze_src_defaults__WEBPACK_IMPORTED_MODULE_0__["DEFAULT_CONFIG"].classPrefix, "-layout-container-component");
var NODE_PREFIX = "".concat(_muze_src_defaults__WEBPACK_IMPORTED_MODULE_0__["DEFAULT_CONFIG"].classPrefix, "-layout-container");


/***/ }),

/***/ "./packages/layout/src/tree-layout/data-adapters/data-parser.js":
/*!**********************************************************************!*\
  !*** ./packages/layout/src/tree-layout/data-adapters/data-parser.js ***!
  \**********************************************************************/
/*! exports provided: DataParser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataParser", function() { return DataParser; });
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helper */ "./packages/layout/src/tree-layout/data-adapters/helper.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }


var DataParser =
/*#__PURE__*/
function () {
  function DataParser(data) {
    _classCallCheck(this, DataParser);

    this._data = data;
  }

  _createClass(DataParser, [{
    key: "defaultDataPointLogic",
    value: function defaultDataPointLogic() {
      var nodepoints = [];
      Object(_helper__WEBPACK_IMPORTED_MODULE_0__["getnodePoints"])(this._data, nodepoints);
      return nodepoints;
    }
  }]);

  return DataParser;
}();

/***/ }),

/***/ "./packages/layout/src/tree-layout/data-adapters/data-point.js":
/*!*********************************************************************!*\
  !*** ./packages/layout/src/tree-layout/data-adapters/data-point.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DataPoint; });
/* harmony import */ var _constants_defaults__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants/defaults */ "./packages/layout/src/tree-layout/constants/defaults.js");
/* harmony import */ var _layout_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layout-component */ "./packages/layout/src/tree-layout/layout-component/index.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }




var DataPoint =
/*#__PURE__*/
function () {
  function DataPoint(node) {
    _classCallCheck(this, DataPoint);

    this._node = node;
    this._className = node.model().host() instanceof _layout_component__WEBPACK_IMPORTED_MODULE_1__["LayoutComponent"] ? node.model().host().className() : _constants_defaults__WEBPACK_IMPORTED_MODULE_0__["DEFAULT_CLASS_NAME"];
  }

  _createClass(DataPoint, [{
    key: "node",
    value: function node() {
      return this._node;
    }
  }, {
    key: "hasHost",
    value: function hasHost() {
      return this._node.model().host() instanceof _layout_component__WEBPACK_IMPORTED_MODULE_1__["LayoutComponent"];
    }
  }, {
    key: "className",
    value: function className() {
      return this._className || _constants_defaults__WEBPACK_IMPORTED_MODULE_0__["DEFAULT_CLASS_NAME"];
    }
  }]);

  return DataPoint;
}();



/***/ }),

/***/ "./packages/layout/src/tree-layout/data-adapters/helper.js":
/*!*****************************************************************!*\
  !*** ./packages/layout/src/tree-layout/data-adapters/helper.js ***!
  \*****************************************************************/
/*! exports provided: getnodePoints */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getnodePoints", function() { return getnodePoints; });
/* harmony import */ var _data_point__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./data-point */ "./packages/layout/src/tree-layout/data-adapters/data-point.js");

var getnodePoints = function getnodePoints(node, nodepoints) {
  var datapoint = new _data_point__WEBPACK_IMPORTED_MODULE_0__["default"](node);
  nodepoints.push(datapoint);
  node.children().forEach(function (child) {
    getnodePoints(child, nodepoints);
  });
};

/***/ }),

/***/ "./packages/layout/src/tree-layout/data-adapters/html-data.js":
/*!********************************************************************!*\
  !*** ./packages/layout/src/tree-layout/data-adapters/html-data.js ***!
  \********************************************************************/
/*! exports provided: HTMLDataAdapter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HTMLDataAdapter", function() { return HTMLDataAdapter; });
/* harmony import */ var _data_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./data-parser */ "./packages/layout/src/tree-layout/data-adapters/data-parser.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }


var HTMLDataAdapter =
/*#__PURE__*/
function (_DataParser) {
  _inherits(HTMLDataAdapter, _DataParser);

  function HTMLDataAdapter() {
    _classCallCheck(this, HTMLDataAdapter);

    return _possibleConstructorReturn(this, _getPrototypeOf(HTMLDataAdapter).apply(this, arguments));
  }

  _createClass(HTMLDataAdapter, [{
    key: "getCoordinates",
    value: function getCoordinates() {
      return _get(_getPrototypeOf(HTMLDataAdapter.prototype), "defaultDataPointLogic", this).call(this);
    }
  }]);

  return HTMLDataAdapter;
}(_data_parser__WEBPACK_IMPORTED_MODULE_0__["DataParser"]);

/***/ }),

/***/ "./packages/layout/src/tree-layout/drawing-manager/helper.js":
/*!*******************************************************************!*\
  !*** ./packages/layout/src/tree-layout/drawing-manager/helper.js ***!
  \*******************************************************************/
/*! exports provided: getChildNode, findNode, renderHTML, drawLayout, drawComponent, removeElement, resolveAligment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getChildNode", function() { return getChildNode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findNode", function() { return findNode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "renderHTML", function() { return renderHTML; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "drawLayout", function() { return drawLayout; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "drawComponent", function() { return drawComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeElement", function() { return removeElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resolveAligment", function() { return resolveAligment; });
/* harmony import */ var _renderers_html_renderer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../renderers/html-renderer */ "./packages/layout/src/tree-layout/renderers/html-renderer.js");
/* harmony import */ var _layout_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layout-component */ "./packages/layout/src/tree-layout/layout-component/index.js");


var getChildNode = function getChildNode(context, config) {
  return context.renderer().createAndPositionDiv(config);
};
var findNode = function findNode(context, nodeID) {
  return context.renderer().coordinates().find(function (point) {
    return point.node().id() === nodeID;
  });
};
var renderHTML = function renderHTML(context) {
  context.renderer(new _renderers_html_renderer__WEBPACK_IMPORTED_MODULE_0__["HTMLRenderer"](context.data()));
  context.renderer().createhtml(context.mount(), context.className());
};
var drawLayout = function drawLayout(context) {
  switch (context.renderer()) {
    case 'html':
      renderHTML(context);
      break;

    default:
      renderHTML(context);
  }
};
var drawComponent = function drawComponent(componentData) {
  componentData.children().forEach(function (node) {
    var host = node.model().host();

    if (host instanceof _layout_component__WEBPACK_IMPORTED_MODULE_1__["LayoutComponent"]) {
      host.draw();
    }

    drawComponent(node);
  });
};
var removeElement = function removeElement(elemID) {
  document.removeElement(document.getElementById(elemID));
};
var resolveAligment = function resolveAligment(context, componentData) {
  componentData.children().forEach(function (component) {
    var host = component.model().host();

    if (host instanceof _layout_component__WEBPACK_IMPORTED_MODULE_1__["LayoutComponent"] && host.alignWith()) {
      var newNodeConfig = {};
      var point = findNode(context, component.id()).node();
      var node = point.boundBox();
      var refNode = findNode(context, context.componentMap().get(host.alignWith()).renderAt()).node().boundBox();

      switch (host.alignment()) {
        case 'left':
          newNodeConfig = {
            top: node.top,
            left: refNode.left,
            height: node.height,
            width: Math.abs(node.width - Math.abs(refNode.left - node.left))
          };
          break;

        case 'right':
          newNodeConfig = {
            top: node.top,
            left: node.left,
            height: node.height,
            width: Math.abs(node.width - Math.abs(node.left + node.width - (refNode.left + refNode.width)))
          };
          break;

        case 'top':
          newNodeConfig = {
            top: refNode.top,
            left: node.left,
            height: Math.abs(node.height - Math.abs(refNode.top - node.top)),
            width: node.width
          };
          break;

        case 'bottom':
          newNodeConfig = {
            top: node.top,
            left: node.left,
            height: Math.abs(node.top - refNode.top + refNode.height),
            width: node.width
          };
          break;

        case 'h-center':
          newNodeConfig = {
            top: node.top,
            left: refNode.left,
            height: node.height,
            width: refNode.width
          };
          break;

        case 'v-center':
          newNodeConfig = {
            top: refNode.top,
            left: node.left,
            height: refNode.top,
            width: node.width
          };
          break;

        default:
          break;
      } // check if model in parent component


      Object.assign(newNodeConfig, {
        id: point.id(),
        className: host.className()
      });
      context.renderer().createAndPositionDiv(newNodeConfig);
      context.componentMap().get(host.name()).setSpatialConfig({
        x: newNodeConfig.left,
        y: newNodeConfig.top,
        height: newNodeConfig.height,
        width: newNodeConfig.width
      });
    }

    resolveAligment(context, component);
  });
};

/***/ }),

/***/ "./packages/layout/src/tree-layout/drawing-manager/index.js":
/*!******************************************************************!*\
  !*** ./packages/layout/src/tree-layout/drawing-manager/index.js ***!
  \******************************************************************/
/*! exports provided: DrawingManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DrawingManager", function() { return DrawingManager; });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./packages/layout/src/tree-layout/utils/index.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./packages/layout/src/tree-layout/drawing-manager/helper.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }



var DrawingManager =
/*#__PURE__*/
function () {
  function DrawingManager(data, renderer, container) {
    _classCallCheck(this, DrawingManager);

    this._data = data.tree;
    this._componentMap = data.componentMap;
    this._layoutClassName = data.layoutClassName;
    this._renderer = renderer;
    this._mount = _utils__WEBPACK_IMPORTED_MODULE_0__["Utils"].isDOMElement(container) ? container : _utils__WEBPACK_IMPORTED_MODULE_0__["Utils"].getElement(container);
  }

  _createClass(DrawingManager, [{
    key: "draw",
    value: function draw() {
      Object(_helper__WEBPACK_IMPORTED_MODULE_1__["drawLayout"])(this);
      Object(_helper__WEBPACK_IMPORTED_MODULE_1__["resolveAligment"])(this, this._data);
      Object(_helper__WEBPACK_IMPORTED_MODULE_1__["drawComponent"])(this._data);
      return this;
    }
  }, {
    key: "data",
    value: function data(_data) {
      if (_data) {
        this._data = _data;
      }

      return this._data;
    }
  }, {
    key: "componentMap",
    value: function componentMap(param) {
      if (param) {
        this._componentMap = param;
      }

      return this._componentMap;
    }
  }, {
    key: "className",
    value: function className(param) {
      if (param) {
        this._layoutClassName = param;
      }

      return this._layoutClassName;
    }
  }, {
    key: "renderer",
    value: function renderer(param) {
      if (param) {
        this._renderer = param;
      }

      return this._renderer;
    }
  }, {
    key: "mount",
    value: function mount(param) {
      if (param) {
        this._mount = param;
      }

      return this._mount;
    }
  }]);

  return DrawingManager;
}();

/***/ }),

/***/ "./packages/layout/src/tree-layout/index.js":
/*!**************************************************!*\
  !*** ./packages/layout/src/tree-layout/index.js ***!
  \**************************************************/
/*! exports provided: LayoutManager, DummyComponent, LayoutComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _layout_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layout-component */ "./packages/layout/src/tree-layout/layout-component/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DummyComponent", function() { return _layout_component__WEBPACK_IMPORTED_MODULE_0__["DummyComponent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LayoutComponent", function() { return _layout_component__WEBPACK_IMPORTED_MODULE_0__["LayoutComponent"]; });

/* harmony import */ var _layout_manager___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./layout-manager/ */ "./packages/layout/src/tree-layout/layout-manager/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LayoutManager", function() { return _layout_manager___WEBPACK_IMPORTED_MODULE_1__["default"]; });





/***/ }),

/***/ "./packages/layout/src/tree-layout/layout-component/dummy-component.js":
/*!*****************************************************************************!*\
  !*** ./packages/layout/src/tree-layout/layout-component/dummy-component.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _layoutComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layoutComponent */ "./packages/layout/src/tree-layout/layout-component/layoutComponent.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



var DummyComponent =
/*#__PURE__*/
function (_LayoutComponent) {
  _inherits(DummyComponent, _LayoutComponent);

  function DummyComponent() {
    _classCallCheck(this, DummyComponent);

    return _possibleConstructorReturn(this, _getPrototypeOf(DummyComponent).apply(this, arguments));
  }

  _createClass(DummyComponent, [{
    key: "getLogicalSpace",
    value: function getLogicalSpace() {
      return {
        width: this.boundBox().width,
        height: this.boundBox().height
      };
    }
  }, {
    key: "setSpatialConfig",
    value: function setSpatialConfig(conf) {
      this.boundBox({
        top: conf.y,
        left: conf.x
      });
      this.newDimensions = {
        width: conf.width,
        height: conf.height
      };
      this.renderAt(conf.renderAt);
      return this;
    }
  }, {
    key: "draw",
    value: function draw() {
      if (!this.component) {
        throw new Error("Component not set for ".concat(this.componentName));
      }

      this.component.mount(document.getElementById(this.renderAt)); // Change the draw method to component draw

      return this;
    }
  }]);

  return DummyComponent;
}(_layoutComponent__WEBPACK_IMPORTED_MODULE_0__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (DummyComponent);

/***/ }),

/***/ "./packages/layout/src/tree-layout/layout-component/index.js":
/*!*******************************************************************!*\
  !*** ./packages/layout/src/tree-layout/layout-component/index.js ***!
  \*******************************************************************/
/*! exports provided: DummyComponent, LayoutComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _dummy_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dummy-component */ "./packages/layout/src/tree-layout/layout-component/dummy-component.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DummyComponent", function() { return _dummy_component__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _layoutComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./layoutComponent */ "./packages/layout/src/tree-layout/layout-component/layoutComponent.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LayoutComponent", function() { return _layoutComponent__WEBPACK_IMPORTED_MODULE_1__["default"]; });





/***/ }),

/***/ "./packages/layout/src/tree-layout/layout-component/layoutComponent.js":
/*!*****************************************************************************!*\
  !*** ./packages/layout/src/tree-layout/layout-component/layoutComponent.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LayoutComponent; });
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var LayoutComponent =
/*#__PURE__*/
function () {
  function LayoutComponent(name, dimensions, seed) {
    _classCallCheck(this, LayoutComponent);

    this._seed = seed;
    this._boundBox = {
      height: dimensions.height,
      width: dimensions.width,
      top: null,
      left: null
    };
    this._renderAt = null;
    this._alignWith = null;
    this._alignment = null;
    this._target = null;
    this._position = null;
    this._componentName = name;
    this._className = null;
  }

  _createClass(LayoutComponent, [{
    key: "getLogicalSpace",
    value: function getLogicalSpace() {
      throw new Error('getLogicalSpace is not defined');
    }
  }, {
    key: "setSpatialConfig",
    value: function setSpatialConfig() {
      throw new Error('setSpatialSpace is not defined');
    }
  }, {
    key: "name",
    value: function name(param) {
      if (param) {
        this._componentName = param;
      }

      return this._componentName;
    }
  }, {
    key: "target",
    value: function target(param) {
      if (param) {
        this._target = param;
      }

      return this._target;
    }
  }, {
    key: "position",
    value: function position(param) {
      if (param) {
        this._position = param;
      }

      return this._position;
    }
  }, {
    key: "alignment",
    value: function alignment(param) {
      if (param) {
        this._alignment = param;
      }

      return this._alignment;
    }
  }, {
    key: "alignWith",
    value: function alignWith(param) {
      if (param) {
        this._alignWith = param;
      }

      return this._alignWith;
    }
  }, {
    key: "renderAt",
    value: function renderAt(param) {
      if (param) {
        this._renderAt = param;
      }

      return this._renderAt;
    }
  }, {
    key: "boundBox",
    value: function boundBox(param) {
      if (param) {
        Object.assign(this._boundBox, param);
      }

      return this._boundBox;
    }
  }, {
    key: "className",
    value: function className(param) {
      if (param) {
        this._className = param;
      }

      return this._className;
    }
  }, {
    key: "draw",
    value: function draw() {
      throw new Error('draw is not defined');
    }
  }]);

  return LayoutComponent;
}();



/***/ }),

/***/ "./packages/layout/src/tree-layout/layout-definition/definition-manager/definitionModel.js":
/*!*************************************************************************************************!*\
  !*** ./packages/layout/src/tree-layout/layout-definition/definition-manager/definitionModel.js ***!
  \*************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DefinitionModel; });
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var DefinitionModel =
/*#__PURE__*/
function () {
  function DefinitionModel(config) {
    _classCallCheck(this, DefinitionModel);

    this._host = config.host || null;
    this._cut = config.cut || null;
    this._ratioWeight = config.ratioWeight === 0 ? 0 : config.ratioWeight || 1;
    this._preferred = config.preferred || false;
    this._lanes = config.lanes || [];
    this._remainingHeight = 0;
    this._remainingWidth = 0;
  }

  _createClass(DefinitionModel, [{
    key: "host",
    value: function host(_host) {
      if (_host) {
        this._host = _host;
      }

      return this._host;
    }
  }, {
    key: "preferred",
    value: function preferred(_preferred) {
      if (_preferred) {
        this._preferred = _preferred;
      }

      return this._preferred;
    }
  }, {
    key: "cut",
    value: function cut(_cut) {
      if (_cut) {
        this._cut = _cut;
      }

      return this._cut;
    }
  }, {
    key: "ratioWeight",
    value: function ratioWeight(_ratioWeight) {
      if (_ratioWeight) {
        this._ratioWeight = _ratioWeight;
      }

      return this._ratioWeight;
    }
  }, {
    key: "lanes",
    value: function lanes(_lanes) {
      if (_lanes) {
        this._lanes = _lanes;
      }

      return this._lanes;
    }
  }, {
    key: "remainingHeight",
    value: function remainingHeight(_remainingHeight) {
      if (_remainingHeight) {
        this._remainingHeight = _remainingHeight;
      }

      return this._remainingHeight;
    }
  }, {
    key: "remainingWidth",
    value: function remainingWidth(_remainingWidth) {
      if (_remainingWidth) {
        this._remainingWidth = _remainingWidth;
      }

      return this._remainingWidth;
    }
  }]);

  return DefinitionModel;
}();



/***/ }),

/***/ "./packages/layout/src/tree-layout/layout-definition/definition-manager/index.js":
/*!***************************************************************************************!*\
  !*** ./packages/layout/src/tree-layout/layout-definition/definition-manager/index.js ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DefinitionManager; });
/* harmony import */ var _definitionModel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./definitionModel */ "./packages/layout/src/tree-layout/layout-definition/definition-manager/definitionModel.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helper */ "./packages/layout/src/tree-layout/layout-definition/helper/index.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }




var DefinitionManager =
/*#__PURE__*/
function () {
  function DefinitionManager(componentMap, sequence, totalHeight, totalWidth) {
    _classCallCheck(this, DefinitionManager);

    this._componentMap = componentMap;
    this._prioritySequence = sequence;
    this._totalHeight = totalHeight;
    this._totalWidth = totalWidth;
    this._targetComponentMap = null;
  } // create the config model


  _createClass(DefinitionManager, [{
    key: "generateConfigModel",
    value: function generateConfigModel() {
      Object(_helper__WEBPACK_IMPORTED_MODULE_1__["prepareTargetComponentMap"])(this);

      var canvasComponent = this._targetComponentMap.get('canvas');

      var definitionModel = new _definitionModel__WEBPACK_IMPORTED_MODULE_0__["default"]({});
      var tempDefModel = definitionModel;
      definitionModel.remainingHeight(this._totalHeight);
      definitionModel.remainingWidth(this._totalWidth);
      var componentRef = null;

      this._prioritySequence.forEach(function (name) {
        componentRef = Object(_helper__WEBPACK_IMPORTED_MODULE_1__["getComponent"])(canvasComponent, name);

        if (name !== 'grid') {
          tempDefModel = Object(_helper__WEBPACK_IMPORTED_MODULE_1__["placeComponent"])(tempDefModel, componentRef).second;
        } else {
          tempDefModel = Object(_helper__WEBPACK_IMPORTED_MODULE_1__["placeGridComponent"])(tempDefModel, componentRef.component);
        }
      });

      return definitionModel;
    }
  }, {
    key: "componentMap",
    value: function componentMap(param) {
      if (param) {
        this._componentMap = param;
      }

      return this._componentMap;
    }
  }, {
    key: "targetComponentMap",
    value: function targetComponentMap(param) {
      if (param) {
        this._targetComponentMap = param;
      }

      return this._targetComponentMap;
    }
  }]);

  return DefinitionManager;
}();



/***/ }),

/***/ "./packages/layout/src/tree-layout/layout-definition/helper/index.js":
/*!***************************************************************************!*\
  !*** ./packages/layout/src/tree-layout/layout-definition/helper/index.js ***!
  \***************************************************************************/
/*! exports provided: isEqual, getNodeId, yExtraSpace, smallestExtraHeightHorizontally, xExtraSpace, smallestExtraWidthVertically, determineBoundBox, prepareTargetComponentMap, getComponent, createPlaceHolderComponent, placeComponent, placeGridComponent, negotiateDimension, computePosition, allocateBoundingBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isEqual", function() { return isEqual; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNodeId", function() { return getNodeId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "yExtraSpace", function() { return yExtraSpace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "smallestExtraHeightHorizontally", function() { return smallestExtraHeightHorizontally; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "xExtraSpace", function() { return xExtraSpace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "smallestExtraWidthVertically", function() { return smallestExtraWidthVertically; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "determineBoundBox", function() { return determineBoundBox; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prepareTargetComponentMap", function() { return prepareTargetComponentMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getComponent", function() { return getComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createPlaceHolderComponent", function() { return createPlaceHolderComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "placeComponent", function() { return placeComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "placeGridComponent", function() { return placeGridComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "negotiateDimension", function() { return negotiateDimension; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computePosition", function() { return computePosition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "allocateBoundingBox", function() { return allocateBoundingBox; });
/* harmony import */ var _constants_defaults__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../constants/defaults */ "./packages/layout/src/tree-layout/constants/defaults.js");
/* harmony import */ var _definition_manager_definitionModel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definition-manager/definitionModel */ "./packages/layout/src/tree-layout/layout-definition/definition-manager/definitionModel.js");
/* harmony import */ var _layout_component_dummy_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../layout-component/dummy-component */ "./packages/layout/src/tree-layout/layout-component/dummy-component.js");



/**
 * Compares two strings in lowercase
 *
 * @export
 * @param {string} value the value to be compared
 * @param {string} compareTo whom the value would be compared
 * @return {boolean} true if values are equal
 */

function isEqual(value, compareTo) {
  if (typeof value !== 'string' || typeof compareTo !== 'string') {
    throw new TypeError('value and compareTo must be string');
  }

  return value.toLowerCase() === compareTo.toLowerCase();
}
var getNodeId = function () {
  var _uid = 0;
  return function () {
    return "".concat(_constants_defaults__WEBPACK_IMPORTED_MODULE_0__["NODE_PREFIX"], "-").concat(++_uid);
  };
}();
function yExtraSpace(node) {
  var smallestHeight = 0;

  if (node.getCutType() === 'v') {
    smallestHeight = smallestExtraHeightHorizontally(node); // eslint-disable-line no-use-before-define
  } else if (node.getCutType() === 'h') {
    node.children().forEach(function (child) {
      smallestHeight += yExtraSpace(child);
    });
  } else if (node.model().host() && node.model().host().getLogicalSpace) {
    var containerHeight = node.boundBox().height;
    var hostHeight = node.model().host().getLogicalSpace().height;
    smallestHeight = containerHeight - hostHeight;

    if (smallestHeight < 0) {
      smallestHeight = 0;
    }
  } else {
    smallestHeight = 0;
  }

  return smallestHeight;
}
function smallestExtraHeightHorizontally(node) {
  var smallestHeight = Number.MAX_SAFE_INTEGER;
  node.children().forEach(function (child) {
    var h = yExtraSpace(child);

    if (h < smallestHeight) {
      smallestHeight = h;
    }
  });
  return smallestHeight;
}
function xExtraSpace(node) {
  var smallestWidth = 0;

  if (node.getCutType() === 'h') {
    smallestWidth = smallestExtraWidthVertically(node); // eslint-disable-line no-use-before-define
  } else if (node.getCutType() === 'v') {
    node.children().forEach(function (child) {
      smallestWidth += xExtraSpace(child);
    });
  } else if (node.model().host() && node.model().host().getLogicalSpace) {
    var containerWidth = node.boundBox().width;
    var hostWidth = node.model().host().getLogicalSpace().width;
    smallestWidth = containerWidth - hostWidth;

    if (smallestWidth < 0) {
      smallestWidth = 0;
    }
  } else {
    smallestWidth = 0;
  }

  return smallestWidth;
}
function smallestExtraWidthVertically(node) {
  var smallestWidth = Number.MAX_SAFE_INTEGER;
  node.children().forEach(function (child) {
    var w = xExtraSpace(child);

    if (w < smallestWidth) {
      smallestWidth = w;
    }
  });
  return smallestWidth;
}
function determineBoundBox(bb, i, arr, instance) {
  if (i) {
    // if not first sibling, take boundbox from previous sibling
    var lastSibling = arr[i - 1];

    var _lastSibling$boundBox = lastSibling.boundBox(),
        _top2 = _lastSibling$boundBox.top,
        _left2 = _lastSibling$boundBox.left,
        _height = _lastSibling$boundBox.height,
        _width = _lastSibling$boundBox.width;

    return {
      width: bb.width,
      height: bb.height,
      top: instance.parentCut() === 'h' ? _top2 + _height : _top2,
      left: instance.parentCut() === 'h' ? _left2 : _left2 + _width
    };
  } // if first sibling, take boundbox from parent


  var _instance$parent$boun = instance.parent().boundBox(),
      _top = _instance$parent$boun.top,
      _left = _instance$parent$boun.left;

  return {
    width: bb.width,
    height: bb.height,
    top: _top,
    left: _left
  };
} // prepares the targetComponent Map for target Mapping ie. where a component should lie

function prepareTargetComponentMap(context) {
  context.targetComponentMap(new Map());
  context.componentMap().forEach(function (value) {
    if (context.targetComponentMap().has(value.target())) {
      context.targetComponentMap().get(value.target()).push(value);
    } else {
      var temp = [];
      temp.push(value);
      context.targetComponentMap().set(value.target(), temp);
    }
  });
}
function getComponent(canvasComponent, componentName) {
  var comp = canvasComponent.find(function (component) {
    return component.name() === componentName;
  });
  return comp && comp !== -1 ? comp : null;
}
function createPlaceHolderComponent(height, width, position) {
  var comp = new _layout_component_dummy_component__WEBPACK_IMPORTED_MODULE_2__["default"](0, {
    height: height,
    width: width
  });
  comp.name('placeHolder');
  comp.position(position);
  return comp;
}
function placeComponent(definitionModel, component) {
  var isPreferred = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  var isGridComponent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
  var cut = '';
  var componentRatioWidth = 1;
  var leftOvercomponentRationWidth = 1;
  var leftHeight = 0;
  var leftWidth = 0;

  if (!component) {
    return {
      first: definitionModel,
      second: definitionModel
    };
  }

  var _component$getLogical = component.getLogicalSpace(),
      componentHeight = _component$getLogical.height,
      componentWidth = _component$getLogical.width;

  var position = component.position();

  if (position === 'top' || position === 'bottom') {
    cut = 'h';
    componentRatioWidth = componentHeight / definitionModel.remainingHeight();
    leftHeight = definitionModel.remainingHeight() - componentHeight;
    leftWidth = definitionModel.remainingWidth();
  } else {
    cut = 'v';
    componentRatioWidth = componentWidth / definitionModel.remainingWidth();
    leftWidth = definitionModel.remainingWidth() - componentWidth;
    leftHeight = definitionModel.remainingHeight();
  }

  leftOvercomponentRationWidth = 1 - componentRatioWidth; // update parentModel

  definitionModel.cut(cut);
  var firstLaneConfig = {
    host: component.name(),
    cut: null,
    ratioWeight: componentRatioWidth,
    preferred: isGridComponent ? false : isPreferred,
    lanes: []
  };
  var firstLane = new _definition_manager_definitionModel__WEBPACK_IMPORTED_MODULE_1__["default"](firstLaneConfig);
  firstLane.remainingHeight(componentHeight);
  firstLane.remainingWidth(componentWidth);
  var secondLaneConfig = {
    host: null,
    cut: null,
    ratioWeight: leftOvercomponentRationWidth,
    preferred: isGridComponent ? false : !isPreferred,
    lanes: []
  };
  var secondLane = new _definition_manager_definitionModel__WEBPACK_IMPORTED_MODULE_1__["default"](secondLaneConfig);
  secondLane.remainingHeight(leftHeight);
  secondLane.remainingWidth(leftWidth);

  if (isPreferred) {
    definitionModel.lanes([firstLane]);
  } else if (position === 'top' || position === 'left') {
    definitionModel.lanes([firstLane, secondLane]);
  } else {
    definitionModel.lanes([secondLane, firstLane]);
  }

  return {
    first: firstLane,
    second: secondLane
  };
}
function placeGridComponent(definitionModel, gridComponents) {
  var tempDefModel = definitionModel;
  var rows = gridComponents.length;
  var column = rows ? gridComponents[0].length : 0;
  var height = gridComponents.reduce(function (acc, val) {
    return acc + val[0].getLogicalSpace().height;
  }, 0);

  for (var i = 0; i < column; i++) {
    var iscolumnPreffered = i === column - 1;
    var columnPlaceHolderComponent = createPlaceHolderComponent(height, gridComponents[0][i].getLogicalSpace().width, 'left');

    var _placeComponent = placeComponent(tempDefModel, columnPlaceHolderComponent, iscolumnPreffered),
        first = _placeComponent.first,
        second = _placeComponent.second;

    tempDefModel = first;

    for (var j = 0; j < rows; j++) {
      var rowpreffred = j === rows - 1;
      tempDefModel = placeComponent(tempDefModel, gridComponents[j][i], rowpreffred, true).second;
    }

    tempDefModel = second;
  }

  return tempDefModel;
}
function negotiateDimension(node) {
  var preferred;
  var cumultiveExtraSpaceAmt = 0;
  var alteredDim;
  var nonAlteredDim;
  var childrenLength = node.children().length;

  for (var index = 0; index < childrenLength; index++) {
    var fn = void 0;
    var extraSpaceAmt = void 0;
    var child = node.children()[index];

    if (child.parentCut() === 'h') {
      fn = yExtraSpace;
      alteredDim = 'height';
      nonAlteredDim = 'width';
    } else {
      fn = xExtraSpace;
      alteredDim = 'width';
      nonAlteredDim = 'height';
    } // if vertical then get extra height from other node and push it to the preferred node.
    // for horizontal cut the same thing is to be done with width


    if (child.isPreferred()) {
      // push extra space in sink. Execute it when all non preferred space are computed.
      preferred = child;
      continue; // eslint-disable-line no-continue
    } // reduce own height and save it in a var


    cumultiveExtraSpaceAmt += extraSpaceAmt = fn(child);
    child.boundBox()[alteredDim] -= extraSpaceAmt; // update nonaltered dim from parent for any change which happened during negotiation

    child.boundBox()[nonAlteredDim] = child.parent().boundBox()[nonAlteredDim];
    negotiateDimension(child);
  }

  if (preferred) {
    preferred.boundBox()[alteredDim] += cumultiveExtraSpaceAmt;
    preferred.boundBox()[nonAlteredDim] = preferred.parent().boundBox()[nonAlteredDim];
    negotiateDimension(preferred);
  }
}
function computePosition(node) {
  node.children().forEach(function (child, i, children) {
    var boundBox = determineBoundBox(child.boundBox(), i, children, child);
    child.boundBox(boundBox);
    computePosition(child);
  });
}
function allocateBoundingBox(node) {
  var totalWeight = node.children().map(function (child) {
    return child.model().ratioWeight();
  }).reduce(function (carry, val) {
    return carry + val;
  }, 0);
  node.children().forEach(function (child, i, children) {
    var lastSibling = children[i - 1];
    var ratio = child.model().ratioWeight() / totalWeight;

    if (child.parentCut() === 'h') {
      child.boundBox({
        top: i ? lastSibling.boundBox().top + lastSibling.boundBox().height : 0,
        left: child.parent().boundBox().left,
        height: child.parent().boundBox().height * ratio,
        width: child.parent().boundBox().width
      });
    } else {
      child.boundBox({
        top: child.parent().boundBox().top,
        left: i ? lastSibling.boundBox().left + lastSibling.boundBox().width : 0,
        height: child.parent().boundBox().height,
        width: child.parent().boundBox().width * ratio
      });
    }

    allocateBoundingBox(child);
  });
}

/***/ }),

/***/ "./packages/layout/src/tree-layout/layout-definition/index.js":
/*!********************************************************************!*\
  !*** ./packages/layout/src/tree-layout/layout-definition/index.js ***!
  \********************************************************************/
/*! exports provided: LayoutModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _layout_model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layout-model */ "./packages/layout/src/tree-layout/layout-definition/layout-model/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LayoutModel", function() { return _layout_model__WEBPACK_IMPORTED_MODULE_0__["default"]; });




/***/ }),

/***/ "./packages/layout/src/tree-layout/layout-definition/layout-model/index.js":
/*!*********************************************************************************!*\
  !*** ./packages/layout/src/tree-layout/layout-definition/layout-model/index.js ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LayoutModel; });
/* harmony import */ var _tree__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../tree */ "./packages/layout/src/tree-layout/layout-definition/tree/index.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helper */ "./packages/layout/src/tree-layout/layout-definition/helper/index.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }




var LayoutModel =
/*#__PURE__*/
function () {
  function LayoutModel(measurements, config) {
    _classCallCheck(this, LayoutModel);

    this._measurements = measurements;
    this._config = config;
    this._root = this.createTree(this._config, null);
    this.setBoundBox();
  }

  _createClass(LayoutModel, [{
    key: "createTree",
    value: function createTree(config, parent) {
      var node = new _tree__WEBPACK_IMPORTED_MODULE_0__["default"](config);

      if (parent) {
        node.parentCut(parent.getCutType());
        parent.addChildren([node]);
      } else {
        this._root = node;
      }

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = config.lanes()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var lane = _step.value;
          this.createTree(lane, node);
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return != null) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      return this._root;
    }
  }, {
    key: "setBoundBox",
    value: function setBoundBox() {
      this._root.boundBox({
        top: 0,
        left: 0,
        width: this._measurements.width,
        height: this._measurements.height
      });

      Object(_helper__WEBPACK_IMPORTED_MODULE_1__["allocateBoundingBox"])(this._root);
    }
  }, {
    key: "setHostPosition",
    value: function setHostPosition(node) {
      var _this = this;

      node.children().forEach(function (child) {
        LayoutModel.setHostSpatialConfig(child);

        _this.setHostPosition(child);
      });
    }
  }, {
    key: "negotiate",
    value: function negotiate() {
      Object(_helper__WEBPACK_IMPORTED_MODULE_1__["negotiateDimension"])(this._root);
      Object(_helper__WEBPACK_IMPORTED_MODULE_1__["computePosition"])(this._root);
      return this;
    }
  }, {
    key: "broadcast",
    value: function broadcast() {
      this.setHostPosition(this._root);
      return this;
    }
  }, {
    key: "tree",
    value: function tree() {
      return this._root;
    }
  }], [{
    key: "setHostSpatialConfig",
    value: function setHostSpatialConfig(node) {
      var bb = node.boundBox();
      var host = node.model().host();

      if (host && host.setSpatialConfig) {
        var conf = {
          x: bb.left,
          y: bb.top,
          width: bb.width,
          height: bb.height,
          renderAt: node.id()
        };
        host.setSpatialConfig(conf);
      }
    }
  }]);

  return LayoutModel;
}();



/***/ }),

/***/ "./packages/layout/src/tree-layout/layout-definition/tree/index.js":
/*!*************************************************************************!*\
  !*** ./packages/layout/src/tree-layout/layout-definition/tree/index.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helper */ "./packages/layout/src/tree-layout/layout-definition/helper/index.js");
/* harmony import */ var _layout_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../layout-component */ "./packages/layout/src/tree-layout/layout-component/index.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }




var Node =
/*#__PURE__*/
function () {
  function Node(data) {
    _classCallCheck(this, Node);

    this._model = data;
    this._parent = null;
    this._children = [];
    this._parentCut = null;
    this._boundBox = {
      top: null,
      left: null,
      height: null,
      width: null
    };
    this._id = this._model.host() instanceof _layout_component__WEBPACK_IMPORTED_MODULE_1__["LayoutComponent"] && this._model.host().renderAt() ? this._model.host().renderAt() : Object(_helper__WEBPACK_IMPORTED_MODULE_0__["getNodeId"])();
  }

  _createClass(Node, [{
    key: "addChildren",
    value: function addChildren(entries) {
      var _this$_children,
          _this = this;

      (_this$_children = this._children).push.apply(_this$_children, _toConsumableArray(entries));

      entries.forEach(function (e) {
        e.parent(_this);
      });
    }
  }, {
    key: "isRoot",
    value: function isRoot() {
      return this._parent === null;
    }
  }, {
    key: "isLeaf",
    value: function isLeaf() {
      return !this._children.length;
    }
  }, {
    key: "getCutType",
    value: function getCutType() {
      return this._model.cut();
    }
  }, {
    key: "isPreferred",
    value: function isPreferred() {
      return !!this._model.preferred();
    }
  }, {
    key: "children",
    value: function children(_children) {
      if (_children) {
        this._children = _children;
      }

      return this._children;
    }
  }, {
    key: "parent",
    value: function parent(_parent) {
      if (_parent) {
        this._parent = _parent;
      }

      return this._parent;
    }
  }, {
    key: "parentCut",
    value: function parentCut(_parentCut) {
      if (_parentCut) {
        this._parentCut = _parentCut;
      }

      return this._parentCut;
    }
  }, {
    key: "id",
    value: function id(_id) {
      if (_id) {
        this._id = _id;
      }

      return this._id;
    }
  }, {
    key: "model",
    value: function model(_model) {
      if (_model) {
        this._model = _model;
      }

      return this._model;
    }
  }, {
    key: "boundBox",
    value: function boundBox(bound) {
      if (bound) {
        this._boundBox = {
          top: bound.top,
          left: bound.left,
          height: bound.height,
          width: bound.width
        };
      }

      return this._boundBox;
    }
    /**
       * function to search a node and update it with the config provided.
       * @param  {Object} nodeconfig
       */

  }, {
    key: "updateNode",
    value: function updateNode(nodeconfig) {
      var _this2 = this;

      if (this._id === nodeconfig._id) {
        this._model.cut(nodeconfig.cut);

        this._model.ratioWeight(nodeconfig.ratioWeight);
      } else {
        this._children.forEach(function (node) {
          if (node._id === nodeconfig._id) {
            node.model.cut(nodeconfig.cut);
            node.model.ratioWeight(nodeconfig.ratioWeight);
            return;
          }

          _this2.searchNode(node, nodeconfig);
        });
      }
    } // Recursive function to search a node

  }, {
    key: "searchNode",
    value: function searchNode(node, nodeconfig) {
      var _this3 = this;

      node.children().forEach(function (childNode) {
        if (childNode.id() === nodeconfig._id) {
          childNode.model().cut(nodeconfig.cut);
          childNode.model().ratioWeight(nodeconfig.ratioWeight);
        } else {
          _this3.searchNode(childNode, nodeconfig);
        }
      });
    }
    /**
       * function to delete a node from tree Structure.
       * @param  {String} nodeId - node Id of the Node
       */

  }, {
    key: "delete",
    value: function _delete(nodeId) {
      var _this4 = this;

      this._children.forEach(function (node) {
        if (node.id() === nodeId) {
          var index = _this4._children.indexOf(node);

          _this4._model.lanes().splice(index, 1);
        }

        _this4.deleteSearchNode(node, nodeId);
      });
    } // Recursive function to search a node

  }, {
    key: "deleteSearchNode",
    value: function deleteSearchNode(node, nodeId) {
      var _this5 = this;

      node.children().forEach(function (childNode) {
        if (childNode.id() === nodeId) {
          var index = node.children().indexOf(childNode);
          node.model().lanes().splice(index, 1);
        } else {
          _this5.deleteSearchNode(childNode, nodeId);
        }
      });
    }
  }]);

  return Node;
}();

/* harmony default export */ __webpack_exports__["default"] = (Node);

/***/ }),

/***/ "./packages/layout/src/tree-layout/layout-manager/helper.js":
/*!******************************************************************!*\
  !*** ./packages/layout/src/tree-layout/layout-manager/helper.js ***!
  \******************************************************************/
/*! exports provided: sanitizeConfig, calLayOutDef */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sanitizeConfig", function() { return sanitizeConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calLayOutDef", function() { return calLayOutDef; });
/* harmony import */ var _layout_definition_definition_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../layout-definition/definition-manager */ "./packages/layout/src/tree-layout/layout-definition/definition-manager/index.js");

function sanitizeConfig(context, hostObj) {
  var hostID = hostObj.host();

  if (hostObj.lanes() && hostObj.lanes().length) {
    hostObj.lanes().forEach(function (childHost) {
      return sanitizeConfig(context, childHost);
    });
  }

  if (hostID != null && typeof hostID === 'string') {
    if (context.componentMap().get(hostID) !== undefined) {
      hostObj.host(context.componentMap().get(hostID));
    }
  }
}
function calLayOutDef(context) {
  var _context$dimension = context.dimension(),
      height = _context$dimension.height,
      width = _context$dimension.width;

  var defManager = new _layout_definition_definition_manager__WEBPACK_IMPORTED_MODULE_0__["default"](context.layoutDef().componentMap(), context.prioritySequence(), height, width);
  var genLayoutdef = defManager.generateConfigModel();
  return genLayoutdef;
}

/***/ }),

/***/ "./packages/layout/src/tree-layout/layout-manager/index.js":
/*!*****************************************************************!*\
  !*** ./packages/layout/src/tree-layout/layout-manager/index.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LayoutManager; });
/* harmony import */ var _layout_definition__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../layout-definition */ "./packages/layout/src/tree-layout/layout-definition/index.js");
/* harmony import */ var _constants_defaults__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants/defaults */ "./packages/layout/src/tree-layout/constants/defaults.js");
/* harmony import */ var _drawing_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../drawing-manager */ "./packages/layout/src/tree-layout/drawing-manager/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./packages/layout/src/tree-layout/utils/index.js");
/* harmony import */ var _layout_def__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./layout-def */ "./packages/layout/src/tree-layout/layout-manager/layout-def.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helper */ "./packages/layout/src/tree-layout/layout-manager/helper.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }








var LayoutManager =
/*#__PURE__*/
function () {
  function LayoutManager(conf) {
    _classCallCheck(this, LayoutManager);

    this._renderAt = conf.renderAt;
    this._layoutClassName = conf.className;
    this._dimension = {
      width: conf.width || _constants_defaults__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_WIDTH"],
      height: conf.height || _constants_defaults__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_HEIGHT"]
    };
    this._skeletonType = conf.skeletonType || 'html';
    this._layoutDefinition = null;
    this._layoutDef = new _layout_def__WEBPACK_IMPORTED_MODULE_4__["LayoutDef"]();
    this._drawingManager = null;
    this._prioritySequence = [];
    this.tree = null;
    this._rootNodeID = null;
  }

  _createClass(LayoutManager, [{
    key: "layoutDef",
    value: function layoutDef(param) {
      if (param) {
        this._layoutDef = param;
      }

      return this._layoutDef;
    }
  }, {
    key: "prioritySequence",
    value: function prioritySequence(param) {
      if (param) {
        this._prioritySequence = param;
      }

      return this._prioritySequence;
    }
  }, {
    key: "dimension",
    value: function dimension(param) {
      if (param) {
        Object.assign(this._dimension, param);
      }

      return this._dimension;
    }
  }, {
    key: "addComponent",
    value: function addComponent(component) {
      this._layoutDef.addComponent(component);
    }
  }, {
    key: "addMultipleComponent",
    value: function addMultipleComponent(componentArray) {
      this._layoutDef.addMultipleComponent(componentArray);
    }
  }, {
    key: "resetNode",
    value: function resetNode(node) {
      if (this.con) {
        this.con.resetNode(node);
      }
    }
    /**
     * function to update the node and rerender the layout.
     * @param  {} config - node configuration to change.
     */

  }, {
    key: "updateNode",
    value: function updateNode(config) {
      this.tree.updateNode(config);
      this._layoutDefinition = this.tree.model;
      this.compute();
    }
  }, {
    key: "compute",
    value: function compute() {
      //----
      if (_utils__WEBPACK_IMPORTED_MODULE_3__["Utils"].isDOMElement(this._renderAt)) {
        this._renderAt._layout = this;
      } else {
        document.getElementById(this._renderAt)._layout = this;
      } //-----


      this._layoutDefinition = Object(_helper__WEBPACK_IMPORTED_MODULE_5__["calLayOutDef"])(this);

      this._layoutDef.layoutDefinition(this._layoutDefinition);

      this._layoutDefinition = this._layoutDef.sanitizedDefinition();
      this._layout = new _layout_definition__WEBPACK_IMPORTED_MODULE_0__["LayoutModel"]({
        width: this._dimension.width,
        height: this._dimension.height
      }, this._layoutDefinition);
      this.tree = this._layout.negotiate().tree();

      this._layout.broadcast();

      this._drawingManager = new _drawing_manager__WEBPACK_IMPORTED_MODULE_2__["DrawingManager"]({
        tree: this.tree,
        componentMap: this._layoutDef.componentMap(),
        layoutClassName: this._layoutClassName
      }, this._skeletonType, this._renderAt);

      if (this._rootNodeID) {
        this.tree.id(this._rootNodeID);
      } else {
        this._rootNodeID = this.tree.id();
      } // this will draw all the components by calling their draw method


      this._drawingManager.draw();
    }
  }, {
    key: "getRootNodeId",
    value: function getRootNodeId() {
      return this._rootNodeID;
    }
    /**
    * This function takes the LayoutComponents and Register them in component store
    * @param {Array<LayoutComponent>} layoutComponents
    */

  }, {
    key: "registerComponents",
    value: function registerComponents(layoutComponents) {
      var _this = this;

      this._prioritySequence.length = 0;

      this._layoutDef.resetComponentMap();

      layoutComponents.forEach(function (container) {
        if (container) {
          _this._prioritySequence.push(container.name());

          _this.addComponent(container);

          if (container.name() === 'grid') {
            container.component.forEach(function (componentArr) {
              componentArr.forEach(function (compo) {
                _this.addComponent(compo);
              });
            });
          }
        }
      });
      return this;
    }
  }, {
    key: "getComponent",
    value: function getComponent(componentName) {
      return this._layoutDef.componentMap().get(componentName);
    }
  }, {
    key: "renderAt",
    value: function renderAt(mount) {
      if (mount) {
        this._renderAt = mount;
      }

      return this._renderAt;
    }
  }]);

  return LayoutManager;
}();



/***/ }),

/***/ "./packages/layout/src/tree-layout/layout-manager/layout-def.js":
/*!**********************************************************************!*\
  !*** ./packages/layout/src/tree-layout/layout-manager/layout-def.js ***!
  \**********************************************************************/
/*! exports provided: LayoutDef */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayoutDef", function() { return LayoutDef; });
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helper */ "./packages/layout/src/tree-layout/layout-manager/helper.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }


var LayoutDef =
/*#__PURE__*/
function () {
  function LayoutDef() {
    _classCallCheck(this, LayoutDef);

    this._componentMap = new Map();
    this._layoutDefinition = null;
  }

  _createClass(LayoutDef, [{
    key: "addComponent",
    value: function addComponent(component) {
      this._componentMap.set(component.name(), component);
    }
  }, {
    key: "layoutDefinition",
    value: function layoutDefinition(def) {
      if (def) {
        this._layoutDefinition = def;
      }

      return this._layoutDefinition;
    }
  }, {
    key: "addMultipleComponent",
    value: function addMultipleComponent(componentArray) {
      var _this = this;

      componentArray.forEach(function (comp) {
        _this.addComponent(comp);
      });
    }
  }, {
    key: "sanitizedDefinition",
    value: function sanitizedDefinition() {
      Object(_helper__WEBPACK_IMPORTED_MODULE_0__["sanitizeConfig"])(this, this._layoutDefinition);
      return this.layoutDefinition();
    }
  }, {
    key: "componentMap",
    value: function componentMap() {
      return this._componentMap;
    }
  }, {
    key: "resetComponentMap",
    value: function resetComponentMap() {
      this._componentMap.clear();
    }
  }]);

  return LayoutDef;
}();

/***/ }),

/***/ "./packages/layout/src/tree-layout/renderers/html-renderer.js":
/*!********************************************************************!*\
  !*** ./packages/layout/src/tree-layout/renderers/html-renderer.js ***!
  \********************************************************************/
/*! exports provided: HTMLRenderer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HTMLRenderer", function() { return HTMLRenderer; });
/* harmony import */ var _data_adapters_html_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data-adapters/html-data */ "./packages/layout/src/tree-layout/data-adapters/html-data.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "./packages/layout/src/tree-layout/utils/index.js");
/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./renderer */ "./packages/layout/src/tree-layout/renderers/renderer.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var HTMLRenderer =
/*#__PURE__*/
function (_Renderer) {
  _inherits(HTMLRenderer, _Renderer);

  function HTMLRenderer(data) {
    var _this;

    _classCallCheck(this, HTMLRenderer);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(HTMLRenderer).call(this));
    _this._data = data;
    _this._coordinates = new _data_adapters_html_data__WEBPACK_IMPORTED_MODULE_0__["HTMLDataAdapter"](_this._data).getCoordinates();
    return _this;
  }

  _createClass(HTMLRenderer, [{
    key: "createhtml",
    value: function createhtml(mount, className) {
      var _this2 = this;

      var mainDiv = mount;

      _get(_getPrototypeOf(HTMLRenderer.prototype), "initRenderer", this).call(this, mainDiv, this._data); // Initialise node with layout id


      this.parentDiv = this.createAndCustomiseParent(className);

      this._coordinates.forEach(function (node) {
        if (node.hasHost()) {
          var host = node.node();

          _this2.parentDiv.appendChild(_this2.createAndPositionDiv(_objectSpread({}, host.boundBox(), {
            id: host.id(),
            className: node.className()
          })));
        }
      });

      mainDiv.appendChild(this.parentDiv);
    }
  }, {
    key: "createAndPositionDiv",
    value: function createAndPositionDiv(config) {
      var top = config.top,
          left = config.left,
          height = config.height,
          width = config.width,
          className = config.className,
          id = config.id;
      var existingDiv = document.getElementById(id);
      var div = existingDiv || document.createElement('div');
      div.style.position = 'absolute';
      div.style.left = "".concat(left, "px");
      div.style.top = "".concat(top, "px");
      div.style.height = "".concat(height, "px");
      div.style.width = "".concat(width, "px");
      div.id = id;
      div.className = className;
      return div;
    }
  }, {
    key: "createAndCustomiseParent",
    value: function createAndCustomiseParent(className) {
      var container = _utils__WEBPACK_IMPORTED_MODULE_1__["Utils"].findContainer(this._coordinates);
      var host = container.node();
      var parentDiv = this.createAndPositionDiv(_objectSpread({}, host.boundBox(), {
        id: host.id(),
        className: container.className()
      }));
      parentDiv.className = className;
      parentDiv.style.position = 'relative';
      return parentDiv;
    }
  }, {
    key: "coordinates",
    value: function coordinates() {
      return this._coordinates;
    }
  }]);

  return HTMLRenderer;
}(_renderer__WEBPACK_IMPORTED_MODULE_2__["Renderer"]);

/***/ }),

/***/ "./packages/layout/src/tree-layout/renderers/renderer.js":
/*!***************************************************************!*\
  !*** ./packages/layout/src/tree-layout/renderers/renderer.js ***!
  \***************************************************************/
/*! exports provided: Renderer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Renderer", function() { return Renderer; });
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var Renderer =
/*#__PURE__*/
function () {
  function Renderer() {
    _classCallCheck(this, Renderer);
  }

  _createClass(Renderer, [{
    key: "initRenderer",
    value: function initRenderer(node, tree) {
      node.__logicalTree = tree;
    }
  }]);

  return Renderer;
}();

/***/ }),

/***/ "./packages/layout/src/tree-layout/utils/index.js":
/*!********************************************************!*\
  !*** ./packages/layout/src/tree-layout/utils/index.js ***!
  \********************************************************/
/*! exports provided: Utils */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Utils", function() { return Utils; });
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

/* eslint no-undef: "off" */

/* eslint default-case: "off" */
var Utils =
/*#__PURE__*/
function () {
  function Utils() {
    _classCallCheck(this, Utils);
  }

  _createClass(Utils, null, [{
    key: "isDOMElement",
    value: function isDOMElement(element) {
      return element instanceof Element;
    }
  }, {
    key: "getID",
    value: function getID(element) {
      return element.id;
    }
  }, {
    key: "getElement",
    value: function getElement(id) {
      return document.getElementById(id);
    }
  }, {
    key: "findContainer",
    value: function findContainer(data) {
      return data.filter(function (coordinate) {
        return coordinate.parent == null;
      })[0];
    }
    /**
     * static method to remove the div
     * @param  {} divId - div ID to be removed.
     */

  }, {
    key: "removeDiv",
    value: function removeDiv(divId) {
      if (document.getElementById(divId) !== null) {
        document.getElementById(divId).remove();
      }
    }
  }]);

  return Utils;
}();

/***/ }),

/***/ "./packages/layout/src/utils/index.js":
/*!********************************************!*\
  !*** ./packages/layout/src/utils/index.js ***!
  \********************************************/
/*! exports provided: combineMatrices, createTree, getMinMeasures, getLogicalSpace, computeLogicalSpace, spaceTakenByRow, spaceTakenByColumn, createMatrixEachLevel, breakMatrix, getDistributedWidth, getDistributedHeight, extraCellsRemover, createMatrixInstances */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "combineMatrices", function() { return combineMatrices; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createTree", function() { return createTree; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMinMeasures", function() { return getMinMeasures; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLogicalSpace", function() { return getLogicalSpace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeLogicalSpace", function() { return computeLogicalSpace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "spaceTakenByRow", function() { return spaceTakenByRow; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "spaceTakenByColumn", function() { return spaceTakenByColumn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createMatrixEachLevel", function() { return createMatrixEachLevel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "breakMatrix", function() { return breakMatrix; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDistributedWidth", function() { return getDistributedWidth; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDistributedHeight", function() { return getDistributedHeight; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extraCellsRemover", function() { return extraCellsRemover; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createMatrixInstances", function() { return createMatrixInstances; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/constants */ "./packages/layout/src/enums/constants.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

/**
 * This file exports utility functions that are used across the layout module
 */


var nest = muze_utils__WEBPACK_IMPORTED_MODULE_0__["Symbols"].nest;
/**
 *
 *
 * @param {*} isTransposed
 *
 */

var getMeasureInfo = function getMeasureInfo(isTransposed) {
  if (isTransposed) {
    return {
      firstMeasure: _enums_constants__WEBPACK_IMPORTED_MODULE_1__["HEIGHT"],
      secondMeasure: _enums_constants__WEBPACK_IMPORTED_MODULE_1__["WIDTH"]
    };
  }

  return {
    firstMeasure: _enums_constants__WEBPACK_IMPORTED_MODULE_1__["WIDTH"],
    secondMeasure: _enums_constants__WEBPACK_IMPORTED_MODULE_1__["HEIGHT"]
  };
};
/**
 *
 *
 * @param {*} i
 * @param {*} page
 *
 */


var findInPage = function findInPage(i, page) {
  var count = 0;

  for (var x in page) {
    if (i < page[x]) {
      count = x;
      break;
    }
  }

  return count;
};
/**
 * Creates a single matrix from two matrices
 *
 * @param {Array<Array>} matrix Input matrix
 * @return {Array<Array>} Joined matrix
 * @memberof VisualMatrix
 */


var combineMatrices = function combineMatrices(matrix, config) {
  var isTransposed = config.isTransposed;
  var joinedMatrix = matrix[0].length > 0 ? matrix[0] : matrix[1];

  if (isTransposed) {
    joinedMatrix = matrix[0].length > 0 ? _toConsumableArray(matrix[0]) : [];
    joinedMatrix = matrix[1].length > 0 ? [].concat(_toConsumableArray(joinedMatrix), _toConsumableArray(matrix[1])) : joinedMatrix;
  } else {
    joinedMatrix = joinedMatrix.map(function (row, rowIndex) {
      var rowData = [];

      if (matrix[0].length > 0) {
        rowData = _toConsumableArray(matrix[0][rowIndex]);
      }

      if (matrix[1].length > 0) {
        rowData = [].concat(_toConsumableArray(rowData), _toConsumableArray(matrix[1][rowIndex]));
      }

      return rowData;
    });
  }

  return joinedMatrix;
};
/**
 * Creates a hirachical tree from the context
 *
 * @param {Object} context context for creating tree
 * @return {Object} nested tree
 */

var createTree = function createTree(context) {
  var matrixTree = {};
  var lastLevelKey = 0;
  var facet = _enums_constants__WEBPACK_IMPORTED_MODULE_1__["PRIMARY"];
  var nestFn = nest();
  var keys = [];
  var layoutMatrix = context._layoutMatrix;
  var primaryMatrix = context.primaryMatrix();
  var secondaryMatrix = context.secondaryMatrix();

  var _context$config = context.config(),
      isTransposed = _context$config.isTransposed,
      breakPage = _context$config.breakPage;

  if (!isTransposed) {
    if (primaryMatrix.length === 0) {
      facet = _enums_constants__WEBPACK_IMPORTED_MODULE_1__["PRIMARY"];
    } else if (secondaryMatrix.length === 0) {
      facet = _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SECONDARY"];
    } else {
      facet = primaryMatrix.length >= secondaryMatrix.length ? _enums_constants__WEBPACK_IMPORTED_MODULE_1__["PRIMARY"] : _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SECONDARY"];
    }

    if (primaryMatrix.length > 0) {
      for (var i = 0; i < primaryMatrix[0].length - 1; i++) {
        keys.push(i);
      }

      keys.push(primaryMatrix[0].length - 1);

      if (facet === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SECONDARY"] || secondaryMatrix.length === 0) {
        lastLevelKey = primaryMatrix[0].length - 1;
      }
    }

    if (secondaryMatrix.length > 0) {
      var keyLength = primaryMatrix.length > 0 ? primaryMatrix[0].length : 0;

      for (var _i = secondaryMatrix[0].length - 1; _i > 0; _i--) {
        keys.push(_i + keyLength);
      }

      keys.push(keyLength);

      if (facet === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["PRIMARY"]) {
        lastLevelKey = keyLength;
      }
    } else {
      lastLevelKey = primaryMatrix.length > 0 ? primaryMatrix[0].length - 1 : 0;
    }

    keys.forEach(function (key) {
      var counter = -1;
      return nestFn.key(function (d) {
        counter++;
        return "".concat(d[key].valueOf(), "-").concat(findInPage(counter, breakPage));
      });
    });
    matrixTree = nestFn.entries(layoutMatrix);
  } else {
    if (primaryMatrix.length === 0) {
      facet = _enums_constants__WEBPACK_IMPORTED_MODULE_1__["PRIMARY"];
    } else if (secondaryMatrix.length === 0) {
      facet = _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SECONDARY"];
    } else {
      facet = primaryMatrix.length >= secondaryMatrix.length ? _enums_constants__WEBPACK_IMPORTED_MODULE_1__["PRIMARY"] : _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SECONDARY"];
    }

    if (primaryMatrix.length > 0) {
      for (var _i2 = 0; _i2 < primaryMatrix.length - 1; _i2++) {
        keys.push(_i2);
      } // if (facet === PRIMARY) {


      keys.push(primaryMatrix.length - 1); // } else {

      if (facet === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SECONDARY"]) {
        lastLevelKey = primaryMatrix.length - 1;
      }
    }

    if (secondaryMatrix.length > 0) {
      var primaryMatrixLength = primaryMatrix.length;

      for (var _i3 = secondaryMatrix.length - 1; _i3 > 0; _i3--) {
        keys.push(_i3 + primaryMatrixLength);
      } // if (facet === SECONDARY) {


      keys.push(primaryMatrixLength); // }

      if (facet === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["PRIMARY"]) {
        lastLevelKey = primaryMatrixLength;
      }
    }

    keys.forEach(function (key) {
      var counter = -1;
      return nestFn.key(function (d) {
        counter++;
        return "".concat(d[key].valueOf(), "-").concat(findInPage(counter, breakPage));
      });
    });
    var newMatrix = [];
    newMatrix = layoutMatrix[0].map(function (col, colIndex) {
      return layoutMatrix.map(function (row) {
        return row[colIndex];
      });
    });
    matrixTree = nestFn.entries(newMatrix);
  }

  return {
    tree: matrixTree,
    lastLevelKey: lastLevelKey
  };
};
/**
 * Gives the min measues
 *
 * @param {boolean} isTransposed is column matrix
 * @param {Object} unitMeasures min measures to be given to cells
 * @return {Object} dimension min cell
 */

var getMinMeasures = function getMinMeasures(isTransposed, unitMeasures) {
  if (!isTransposed) {
    return {
      height: unitMeasures.height,
      width: 0
    };
  }

  return {
    height: 0,
    width: unitMeasures.width
  };
};
/**
 * Get the logical space from the tree
 *
 * @param {Node} item tree to be calculated
 * @param {number} measures width and height
 * @param {Array} minMeasures min measures for a cell
 * @param {Array} maxMeasure max measures for a col/row
 * @return {Object} dimension
 */

var getLogicalSpace = function getLogicalSpace(item, measures, minMeasures) {
  var _ref;

  var maxMeasure = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];
  var firstMeasure = measures.firstMeasure,
      secondMeasure = measures.secondMeasure;
  var firstMeasureValue = 0;
  var secondMeasureValue = 0;
  item.values.forEach(function (valueArray) {
    var _item$space;

    var fMeasure = 0;
    var sMeasure = 0;
    valueArray.forEach(function (placeholder, colIndex) {
      placeholder.setAvailableSpace();
      var space = placeholder.getLogicalSpace();
      sMeasure = Math.max(sMeasure, +space[secondMeasure], minMeasures[secondMeasure]);
      maxMeasure[colIndex] = Math.max(maxMeasure[colIndex] || 0, space[firstMeasure]);
      fMeasure += +maxMeasure[colIndex];
    });
    secondMeasureValue += sMeasure;
    firstMeasureValue = Math.max(firstMeasureValue, fMeasure);
    item.space = (_item$space = {}, _defineProperty(_item$space, secondMeasure, Math.ceil(secondMeasureValue)), _defineProperty(_item$space, firstMeasure, Math.ceil(firstMeasureValue)), _item$space);
  });
  return _ref = {}, _defineProperty(_ref, secondMeasure, secondMeasureValue), _defineProperty(_ref, firstMeasure, firstMeasureValue), _ref;
};
/**
 * Computes the logical spcae taken by the matrix tree
 *
 * @param {*} [item={}] tree to be viewed
 * @param {boolean} [isTransposed=false] is column matrix
 * @param {*} unitMeasures min measues for a cell
 * @param {Array} maxMeasure max measures for a col/row
 * @return {Object} logical space taken
 */

var computeLogicalSpace = function computeLogicalSpace() {
  var item = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var config = arguments.length > 1 ? arguments[1] : undefined;
  var maxMeasures = arguments.length > 2 ? arguments[2] : undefined;
  var _config$isTransposed = config.isTransposed,
      isTransposed = _config$isTransposed === void 0 ? false : _config$isTransposed,
      unitMeasures = config.unitMeasures;

  var _getMeasureInfo = getMeasureInfo(isTransposed),
      firstMeasure = _getMeasureInfo.firstMeasure,
      secondMeasure = _getMeasureInfo.secondMeasure;

  var values = item.values;
  var minMeasures = getMinMeasures(isTransposed, unitMeasures);

  if (values[0].key) {
    var _logicalSpace;

    var logicalSpace = (_logicalSpace = {}, _defineProperty(_logicalSpace, firstMeasure, 0), _defineProperty(_logicalSpace, secondMeasure, 0), _logicalSpace);
    values.forEach(function (valueItem) {
      // Compute logical space for lowest level
      var space = computeLogicalSpace(valueItem, config, maxMeasures); // Set logical space for first measure

      logicalSpace[firstMeasure] = Math.max(logicalSpace[firstMeasure], space[firstMeasure], minMeasures[firstMeasure]); // Set logical space for second measure

      logicalSpace[secondMeasure] += +space[secondMeasure];
    });
    item.space = logicalSpace;
    return logicalSpace;
  }

  return getLogicalSpace(item, {
    firstMeasure: firstMeasure,
    secondMeasure: secondMeasure
  }, minMeasures, maxMeasures);
};
/**
 * Gives the space taken by a row
 *
 * @param {Array} row matrix array of rows
 * @return {Object} dimension of the row
 */

var spaceTakenByRow = function spaceTakenByRow(row) {
  var height = 0;
  var width = 0;
  row.forEach(function (col) {
    var spaces = col.getLogicalSpace();
    height = Math.max(height, spaces.height);
    width += spaces.width;
  });
  return {
    width: width,
    height: height
  };
};
/**
 * Gives the space taken by a column
 *
 * @param {Array<Array>} matrix column matrix
 * @param {number} colIndex column index
 * @return {Object} dimension of the column
 */

var spaceTakenByColumn = function spaceTakenByColumn(matrix, colIndex) {
  var height = 0;
  var width = 0;
  matrix.forEach(function (row) {
    var col = row[colIndex];
    var spaces = col.getLogicalSpace();
    width = Math.max(width, spaces.width);
    height += spaces.height;
  });
  return {
    width: width,
    height: height
  };
};
/**
 * Creates different level matrices
 *
 * @param {Object} item matrix tree
 * @param {boolean} isTransposed is column matrix
 * @return {Object} matrix of each level
 */

var createMatrixEachLevel = function createMatrixEachLevel(item, isTransposed) {
  if (item.values[0].key) {
    var arr = [];
    item.values.forEach(function (child) {
      if (!isTransposed) {
        arr.push.apply(arr, _toConsumableArray(createMatrixEachLevel(child, isTransposed)));
      } else {
        var eachLevel = createMatrixEachLevel(child, isTransposed);
        eachLevel.forEach(function (e, i) {
          var _arr$i;

          arr[i] = arr[i] || [];

          (_arr$i = arr[i]).push.apply(_arr$i, _toConsumableArray(e));
        });
      }
    });
    item.matrix = arr;
    return arr;
  }

  if (!isTransposed) {
    item.matrix = item.values;
  } else {
    item.matrix = item.values[0].map(function (col, colIndex) {
      return item.values.map(function (row) {
        return row[colIndex];
      });
    });
  }

  return item.matrix;
};
/**
 * Breaks the matrix into two part
 *
 * @param {Array<Array>} matrix input matrix
 * @param {boolean} isTransposed is column matrix
 * @param {number} breakPointer point in matrix where it is to be broken
 * @return {Array} two broken matrix
 */

var breakMatrix = function breakMatrix(matrix, isTransposed, breakPointer) {
  var primaryMatrix = [];
  var secondaryMatrix = [];

  if (isTransposed) {
    matrix.forEach(function (row, rowIndex) {
      if (rowIndex >= breakPointer) {
        secondaryMatrix.push(row);
      } else {
        primaryMatrix.push(row);
      }
    });
  } else {
    matrix.forEach(function (row, rowIndex) {
      row.forEach(function (column, columnIndex) {
        if (columnIndex >= breakPointer) {
          secondaryMatrix[rowIndex] = secondaryMatrix[rowIndex] || [];
          secondaryMatrix[rowIndex].push(column);
        } else {
          primaryMatrix[rowIndex] = primaryMatrix[rowIndex] || [];
          primaryMatrix[rowIndex].push(column);
        }
      });
    });
  }

  return [primaryMatrix, secondaryMatrix];
};
/**
 * Distributed width returned
 *
 * @param {Object} context context for the width distibution
 * @return {number} distributed widths
 */

var getDistributedWidth = function getDistributedWidth(context, layoutConfig) {
  var availableWidth = context.availableWidth,
      width = context.width,
      row = context.row;
  var isDistributionEqual = layoutConfig.isDistributionEqual,
      isTransposed = layoutConfig.isTransposed,
      distribution = layoutConfig.distribution;
  var distSum = 0;

  if (distribution && distribution[0]) {
    distSum = distribution.reduce(function (t, n) {
      t += n;
      return t;
    });
  }

  return row.map(function (col, colIndex) {
    var space = col.getLogicalSpace().width;
    var distWidth = space + (availableWidth - width) * (space / width);

    if (isTransposed) {
      if (distribution.length > 0) {
        distWidth = availableWidth * distribution[colIndex] / distSum;
      } else if (isDistributionEqual || width === 0) {
        var rowLen = row.length;
        distWidth = availableWidth / rowLen;
      }
    }

    return Math.floor(distWidth);
  });
};
/**
 * Distributeed heights returned
 *
 * @param {Object} context input for the height distribution
 * @return {Object} distribured heights
 */

var getDistributedHeight = function getDistributedHeight(context) {
  var distSum = 0;
  var gutterSum = 0;
  var heightWithoutGutter = 0;
  var isTransposed = context.isTransposed,
      distribution = context.distribution,
      availableHeight = context.availableHeight,
      height = context.height,
      isDistributionEqual = context.isDistributionEqual,
      gutter = context.gutter,
      matrix = context.matrix,
      cIdx = context.cIdx;

  if (distribution && distribution[0] !== undefined) {
    distSum = distribution.reduce(function (t, n) {
      t += n;
      return t;
    });
  }

  if (gutter && gutter[0] !== undefined) {
    gutterSum = gutter.reduce(function (t, n) {
      t += n;
      return t;
    });
  }

  heightWithoutGutter = availableHeight - Math.floor(availableHeight * gutterSum);
  var colLen = matrix.length;
  return matrix.map(function (row, rIdx) {
    var col = row[cIdx];
    var space = col.getLogicalSpace().height;
    var distHeight = space + (heightWithoutGutter - height) * (space / height);

    if (!isTransposed) {
      if (distribution.length > 0 && colLen === distribution.length) {
        distHeight = heightWithoutGutter * distribution[rIdx] / distSum;
      } else if (isDistributionEqual || context.height === 0) {
        distHeight = heightWithoutGutter / colLen;
      }
    }

    return Math.floor(distHeight);
  });
};
/**
 *
 *
 * @param {*} arr
 * @param {*} beg
 * @param {*} end
 */

var extraCellsRemover = function extraCellsRemover(arr, beg, end) {
  return arr.slice(beg, -end);
};
/**
 * Creates matrix instancess
 *
 * @param {Array} [arr=[]] mutated arry
 * @param {number} depth depth of the tree
 * @param {Array} matrixInfo Details about the matrix(tree, etc) to be inserted
 * @param {boolean} layout Instance of layout
 */

var createMatrixInstances = function createMatrixInstances() {
  var arr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var depth = arguments.length > 1 ? arguments[1] : undefined;
  var matrixInfo = arguments.length > 2 ? arguments[2] : undefined;
  var layout = arguments.length > 3 ? arguments[3] : undefined;
  var breakPointer = layout._breakPointer;
  var config = layout.config();
  var isTransposed = config.isTransposed;
  var tree = matrixInfo.tree,
      layoutMatrix = matrixInfo.layoutMatrix;

  if (depth === 0) {
    var brokenMatrix = breakMatrix(tree.matrix, isTransposed, breakPointer);
    arr.push({
      matrix: tree.matrix,
      primaryMatrix: brokenMatrix[0],
      secondaryMatrix: brokenMatrix[1],
      space: tree.space
    });
    return arr;
  }

  var nextLevel = depth - 1;
  tree.values.forEach(function (e) {
    createMatrixInstances(arr, nextLevel, {
      tree: e,
      layoutMatrix: layoutMatrix
    }, layout);
  });
  return arr;
};

/***/ }),

/***/ "./packages/layout/src/visual-matrix/column-matrix.js":
/*!************************************************************!*\
  !*** ./packages/layout/src/visual-matrix/column-matrix.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ColumnVisualMatrix; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "./packages/layout/src/utils/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/constants */ "./packages/layout/src/enums/constants.js");
/* harmony import */ var _visual_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./visual-matrix */ "./packages/layout/src/visual-matrix/visual-matrix.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





/**
 * This class used to create column / row matrix for GridLayout
 *
 * @class VisualMatrix
 */

var ColumnVisualMatrix =
/*#__PURE__*/
function (_VisualMatrix) {
  _inherits(ColumnVisualMatrix, _VisualMatrix);

  /**
   *Creates an instance of VisualMatrix.
   * @param {any} matrix Two set of matrices
   * @param {any} [config={}] Configuration for VisualMatrix
   * @memberof VisualMatrix
   */
  function ColumnVisualMatrix(matrix) {
    var _this;

    var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _classCallCheck(this, ColumnVisualMatrix);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(ColumnVisualMatrix).call(this, matrix, config));
    _this._breakPointer = matrix[0].length; // Create Tree

    _this._tree = {
      key: _enums_constants__WEBPACK_IMPORTED_MODULE_2__["COLUMN_ROOT"],
      values: _this.createTree()
    };
    _this._logicalSpace = _this.computeLogicalSpace();
    return _this;
  }
  /**
   * Computes the logical space taken by the entire matrixTree
   *
   * @return {Object} Logical space taken
   * @memberof VisualMatrix
   */


  _createClass(ColumnVisualMatrix, [{
    key: "computeLogicalSpace",
    value: function computeLogicalSpace() {
      var matrixTree = this.tree();
      Object(_utils__WEBPACK_IMPORTED_MODULE_1__["createMatrixEachLevel"])(matrixTree, true);
      return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["computeLogicalSpace"])(matrixTree, this.config(), this.maxMeasures());
    }
  }, {
    key: "computeViewableSpaces",
    value: function computeViewableSpaces(measures) {
      var _this2 = this;

      var maxHeights = measures.maxHeights,
          maxWidths = measures.maxWidths,
          height = measures.height,
          width = measures.width;
      return this.viewableMatrix.map(function (matrixInst, i) {
        var cellDimOptions = {
          matrixInst: matrixInst,
          maxWidths: maxWidths,
          maxHeights: maxHeights,
          matrixIndex: i,
          height: height
        };

        var _this2$getCellDimensi = _this2.getCellDimensions(cellDimOptions),
            heights = _this2$getCellDimensi.heights,
            rowHeights = _this2$getCellDimensi.rowHeights,
            columnWidths = _this2$getCellDimensi.columnWidths;

        var heightMeasures = heights;
        var columnMeasures = [width, width];
        return {
          rowHeights: {
            primary: rowHeights[0],
            secondary: rowHeights[1]
          },
          columnWidths: {
            primary: columnWidths[0],
            secondary: columnWidths[1]
          },
          height: {
            primary: heightMeasures[0],
            secondary: heightMeasures[1]
          },
          width: {
            primary: columnMeasures[0],
            secondary: columnMeasures[1]
          }
        };
      });
    }
    /**
     *
     *
     * @return
     * @memberof VisualMatrix
     */

  }, {
    key: "removeExtraCells",
    value: function removeExtraCells() {
      var _this$config = this.config(),
          isTransposed = _this$config.isTransposed,
          extraCellLengths = _this$config.extraCellLengths;

      var matrix = this._layoutMatrix;
      var tree = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, this.tree());
      var begCellLen = extraCellLengths[0];
      var endCellLen = extraCellLengths[1] || Number.NEGATIVE_INFINITY;
      var layoutMatrix = !isTransposed ? Object(_utils__WEBPACK_IMPORTED_MODULE_1__["extraCellsRemover"])(matrix, begCellLen, endCellLen) : matrix.slice(0).map(function (e) {
        return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["extraCellsRemover"])(e, begCellLen, endCellLen);
      });
      tree.values = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["extraCellsRemover"])(tree.values, begCellLen, endCellLen);
      tree.matrix = tree.matrix.map(function (e) {
        return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["extraCellsRemover"])(e, begCellLen, endCellLen);
      });
      return {
        tree: tree,
        layoutMatrix: layoutMatrix
      };
    }
  }, {
    key: "getPriorityDistribution",
    value: function getPriorityDistribution(measures) {
      var height = measures.height,
          maxHeights = measures.maxHeights;
      var remainaingHeight = height;
      var heightDist = [];
      var conditions = [];
      var divider = 2;
      var priority = this.config().priority;
      var primaryMatrixLength = this.primaryMatrix().length;

      if (priority === 2) {
        conditions = [primaryMatrixLength - 1, primaryMatrixLength];
        divider = 2;
      } else {
        conditions = priority === 0 ? [primaryMatrixLength - 1] : [primaryMatrixLength];
        divider = 1;
      }

      maxHeights.forEach(function (e, i) {
        if (conditions.indexOf(i) === -1) {
          heightDist[i] = e;
          remainaingHeight -= e;
        }
      });

      if (remainaingHeight < 0) {
        heightDist = heightDist.map(function () {
          return 0;
        });
      } else {
        conditions.forEach(function (e) {
          heightDist[e] = Math.min(maxHeights[e], remainaingHeight / divider);
        });
      }

      return heightDist;
    }
    /**
     * Calculates the depth of the tree that can be viewed
     *
     * @param {Array} widthMeasures array of widths
     * @param {Array} heightMeasures array of heights
     * @return {number} depth of the tree
     * @memberof VisualMatrix
     */

  }, {
    key: "calculateDepth",
    value: function calculateDepth(widthMeasures) {
      var j;

      var _this$availableSpace = this.availableSpace(),
          width = _this$availableSpace.width;

      for (j = 0; j < widthMeasures.length; j++) {
        if (widthMeasures[j] <= width) break;
      }

      return Math.min(widthMeasures.length - 1, j);
    }
    /**
    * Redistributes the provied space to all cells
    *
    * @param {*} viewableMatrix current viewport matrix
    * @param {*} width provied width
    * @param {*} height provied height
    * @return {Object} current viewports matrixes with measures
    * @memberof VisualMatrix
    */

  }, {
    key: "redistributeSpaces",
    value: function redistributeSpaces(width, height) {
      var _this3 = this;

      var maxHeights = [];
      var maxWidths = [];
      this.viewableMatrix.forEach(function (matrixInst) {
        var matrix = matrixInst.matrix;
        var mWidth = 0;
        var mHeight = 0;
        var options = {
          mWidth: mWidth,
          mHeight: mHeight,
          matrix: matrix,
          width: width,
          height: height,
          maxHeights: maxHeights,
          maxWidths: maxWidths
        };

        var maxMeasures = _this3.redistributeViewSpaces(options);

        maxWidths = maxMeasures.maxWidths;
        maxHeights = maxMeasures.maxHeights;
      });
      return this.computeViewableSpaces({
        height: height,
        width: width,
        maxHeights: maxHeights,
        maxWidths: maxWidths
      });
    }
    /**
     * Distibutes the given space column wisely
     *
     * @param {Object} measures Redistribution information
     * @memberof VisualMatrix
     */

  }, {
    key: "redistributeViewSpaces",
    value: function redistributeViewSpaces(measures) {
      var rHeights = [];
      var matrix = measures.matrix,
          width = measures.width,
          maxHeights = measures.maxHeights,
          maxWidths = measures.maxWidths;
      var borderWidth = this.config().unitMeasures.border;
      var mWidth = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["spaceTakenByRow"])(matrix[this._lastLevelKey]).width;
      var cWidths = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getDistributedWidth"])({
        row: matrix[this._lastLevelKey],
        width: mWidth,
        availableWidth: width
      }, this.config());
      matrix.forEach(function (row, rIdx) {
        return row.forEach(function (col, cIdx) {
          var oldLogicalSpace = col.getLogicalSpace();
          col.setAvailableSpace(cWidths[cIdx] - borderWidth, oldLogicalSpace.height);
          rHeights[rIdx] = Math.max(rHeights[rIdx] || 0, Math.floor(col.getLogicalSpace().height));
        });
      });

      if (maxHeights.length > 0) {
        rHeights = rHeights.map(function (e, i) {
          return Math.max(e, maxHeights[0][i]);
        });
      }

      maxHeights.push(rHeights);

      for (var x = 0; x < maxHeights.length; x++) {
        maxHeights[x] = rHeights;
      }

      maxWidths.push(cWidths);
      return {
        maxHeights: maxHeights,
        maxWidths: maxWidths
      };
    }
    /**
     * Dispatch the calculated cell dimensions to all the cells
     *
     * @param {Object} measures cell dimension information
     * @return {Object} row and column heights / widths
     * @memberof VisualMatrix
     */

  }, {
    key: "getCellDimensions",
    value: function getCellDimensions(measures) {
      var _this4 = this;

      var _this$config2 = this.config(),
          unitMeasures = _this$config2.unitMeasures;

      var borderWidth = unitMeasures.border;
      var matrixInst = measures.matrixInst,
          height = measures.height,
          maxWidths = measures.maxWidths,
          maxHeights = measures.maxHeights,
          matrixIndex = measures.matrixIndex;
      var matrix = matrixInst.matrix;
      var rowHeights = [[0], [0]];
      var columnWidths = [[0], [0]];
      var heights = [0, 0];
      var widths = [0, 0];
      var breakPointer = this._breakPointer;
      var heightDistribution = this.getPriorityDistribution({
        height: height,
        maxHeights: maxHeights[0] || []
      });
      matrix.forEach(function (row, rIdx) {
        row.forEach(function (cell, cIdx) {
          var colHeight = heightDistribution[rIdx] || 0;
          var colWidth = maxWidths[matrixIndex][cIdx];
          cell.setAvailableSpace(colWidth - borderWidth, colHeight);

          if (cIdx === 0 && rIdx < breakPointer) {
            rowHeights[0][rIdx] = colHeight;
            heights[0] = (heights[0] || 0) + colHeight;
          } else if (cIdx === 0 && rIdx >= breakPointer) {
            rowHeights[1][rIdx - breakPointer] = colHeight;
            heights[1] = (heights[1] || 0) + colHeight;
          }

          if (rIdx === _this4._lastLevelKey) {
            columnWidths[0][cIdx] = colWidth;
            columnWidths[1][cIdx] = colWidth;
          }
        });
      });
      return {
        heights: heights,
        widths: widths,
        rowHeights: rowHeights,
        columnWidths: columnWidths
      };
    }
  }]);

  return ColumnVisualMatrix;
}(_visual_matrix__WEBPACK_IMPORTED_MODULE_3__["default"]);



/***/ }),

/***/ "./packages/layout/src/visual-matrix/default-config.js":
/*!*************************************************************!*\
  !*** ./packages/layout/src/visual-matrix/default-config.js ***!
  \*************************************************************/
/*! exports provided: defaultConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultConfig", function() { return defaultConfig; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums/constants */ "./packages/layout/src/enums/constants.js");

/**
 *
 *
 */

var defaultConfig = {
  distribution: [],
  classPrefix: 'muze',
  isDistributionEqual: true,
  unitMeasures: {
    height: 100,
    width: 100,
    border: 1
  },
  isTransposed: false,
  facet: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["PRIMARY"],
  extraCellLengths: []
};

/***/ }),

/***/ "./packages/layout/src/visual-matrix/props.js":
/*!****************************************************!*\
  !*** ./packages/layout/src/visual-matrix/props.js ***!
  \****************************************************/
/*! exports provided: PROPS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PROPS", function() { return PROPS; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");

var PROPS = {
  config: {
    sanitization: function sanitization(context, value) {
      return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(context._config || {}, value);
    }
  },
  maxMeasures: {},
  availableSpace: {},
  logicalSpace: {}
};

/***/ }),

/***/ "./packages/layout/src/visual-matrix/row-matrix.js":
/*!*********************************************************!*\
  !*** ./packages/layout/src/visual-matrix/row-matrix.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return RowVisualMatrix; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "./packages/layout/src/utils/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/constants */ "./packages/layout/src/enums/constants.js");
/* harmony import */ var _visual_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./visual-matrix */ "./packages/layout/src/visual-matrix/visual-matrix.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





/**
 * This class used to create column / row matrix for GridLayout
 *
 * @class VisualMatrix
 */

var RowVisualMatrix =
/*#__PURE__*/
function (_VisualMatrix) {
  _inherits(RowVisualMatrix, _VisualMatrix);

  /**
   *Creates an instance of VisualMatrix.
   * @param {any} matrix Two set of matrices
   * @param {any} [config={}] Configuration for VisualMatrix
   * @memberof VisualMatrix
   */
  function RowVisualMatrix(matrix) {
    var _this;

    var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _classCallCheck(this, RowVisualMatrix);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(RowVisualMatrix).call(this, matrix, config));
    _this._breakPointer = matrix[0].length > 0 ? matrix[0][0].length : 0;
    _this._layoutMatrix = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["combineMatrices"])([matrix[0] || [], matrix[1] || []], _this.config()); // Create Tree

    _this._tree = {
      key: _enums_constants__WEBPACK_IMPORTED_MODULE_2__["ROW_ROOT"],
      values: _this.createTree()
    };
    _this._logicalSpace = _this.computeLogicalSpace();
    return _this;
  }
  /**
   * Computes the logical space taken by the entire matrixTree
   *
   * @return {Object} Logical space taken
   * @memberof VisualMatrix
   */


  _createClass(RowVisualMatrix, [{
    key: "computeLogicalSpace",
    value: function computeLogicalSpace() {
      var matrixTree = this.tree();
      Object(_utils__WEBPACK_IMPORTED_MODULE_1__["createMatrixEachLevel"])(matrixTree, false);
      return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["computeLogicalSpace"])(matrixTree, this.config(), this.maxMeasures());
    }
  }, {
    key: "computeViewableSpaces",
    value: function computeViewableSpaces(measures) {
      var _this2 = this;

      var maxHeights = measures.maxHeights,
          maxWidths = measures.maxWidths,
          height = measures.height;
      return this.viewableMatrix.map(function (matrixInst, i) {
        var cellDimOptions = {
          matrixInst: matrixInst,
          maxWidths: maxWidths,
          maxHeights: maxHeights,
          matrixIndex: i
        };

        var _this2$getCellDimensi = _this2.getCellDimensions(cellDimOptions),
            widths = _this2$getCellDimensi.widths,
            rowHeights = _this2$getCellDimensi.rowHeights,
            columnWidths = _this2$getCellDimensi.columnWidths;

        var heightMeasures = [height, height];
        var columnMeasures = widths;
        return {
          rowHeights: {
            primary: rowHeights[0],
            secondary: rowHeights[1]
          },
          columnWidths: {
            primary: columnWidths[0],
            secondary: columnWidths[1]
          },
          height: {
            primary: heightMeasures[0],
            secondary: heightMeasures[1]
          },
          width: {
            primary: columnMeasures[0],
            secondary: columnMeasures[1]
          }
        };
      });
    }
    /**
     *
     *
     * @return
     * @memberof VisualMatrix
     */

  }, {
    key: "removeExtraCells",
    value: function removeExtraCells() {
      var _this$config = this.config(),
          isTransposed = _this$config.isTransposed,
          extraCellLengths = _this$config.extraCellLengths;

      var matrix = this._layoutMatrix;
      var tree = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, this.tree());
      var begCellLen = extraCellLengths[0];
      var endCellLen = extraCellLengths[1] || Number.NEGATIVE_INFINITY;
      var layoutMatrix = !isTransposed ? Object(_utils__WEBPACK_IMPORTED_MODULE_1__["extraCellsRemover"])(matrix, begCellLen, endCellLen) : matrix.slice(0).map(function (e) {
        return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["extraCellsRemover"])(e, begCellLen, endCellLen);
      });
      tree.values = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["extraCellsRemover"])(tree.values, begCellLen, endCellLen);
      tree.matrix = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["extraCellsRemover"])(tree.matrix, begCellLen, endCellLen);
      return {
        tree: tree,
        layoutMatrix: layoutMatrix
      };
    }
  }, {
    key: "getPriorityDistribution",
    value: function getPriorityDistribution(measures) {
      var remainaingAvailWidth;
      var remainaingWidth;
      var cWidths = [];
      var conditions = [];
      var maxPrioritySpace = 0;
      var matrix = measures.matrix,
          availableWidth = measures.width,
          maxWidths = measures.maxMeasures,
          currentWidth = measures.maxWidth,
          height = measures.height;
      var priority = this.config().priority;
      var primaryMatrixLength = this.primaryMatrix().length ? this.primaryMatrix()[0].length : 0;
      var dist = [];
      remainaingAvailWidth = availableWidth;
      remainaingWidth = currentWidth;

      if (priority === 2) {
        conditions = [primaryMatrixLength - 1, primaryMatrixLength]; // divider = Math.min(2, matrixLen);
      } else {
        conditions = priority === 0 ? [primaryMatrixLength - 1] : [primaryMatrixLength]; // divider = Math.min(1, matrixLen);
      }

      conditions.forEach(function (i) {
        dist[i] = maxWidths[i];
        maxPrioritySpace += maxWidths[i];
        remainaingAvailWidth -= dist[i];
        remainaingWidth -= dist[i];
      });
      matrix[0].forEach(function (e, i) {
        if (conditions.indexOf(i) === -1) {
          dist[i] = remainaingAvailWidth * (maxWidths[i] / remainaingWidth);
        }
      });
      matrix.forEach(function (row) {
        return row.forEach(function (col, cIdx) {
          if (conditions.indexOf(cIdx) === -1) {
            col.setAvailableSpace(dist[cIdx], height);
            cWidths[cIdx] = Math.max(cWidths[cIdx] || 0, Math.floor(col.getLogicalSpace().width));
          } else {
            cWidths[cIdx] = 0;
          }
        });
      });
      var prioritySpace = availableWidth - cWidths.reduce(function (t, n) {
        return t + n;
      });

      if (prioritySpace < 0) {
        cWidths = cWidths.map(function () {
          return 0;
        });
      } else {
        conditions.forEach(function (i) {
          cWidths[i] = Math.floor(prioritySpace * (dist[i] / maxPrioritySpace || 1));
        });
      }

      return cWidths;
    }
    /**
     * Calculates the depth of the tree that can be viewed
     *
     * @param {Array} widthMeasures array of widths
     * @param {Array} heightMeasures array of heights
     * @return {number} depth of the tree
     * @memberof VisualMatrix
     */

  }, {
    key: "calculateDepth",
    value: function calculateDepth(widthMeasures, heightMeasures) {
      var i;

      var _this$availableSpace = this.availableSpace(),
          height = _this$availableSpace.height;

      for (i = 0; i < heightMeasures.length; i++) {
        if (heightMeasures[i] <= height) break;
      }

      return Math.min(widthMeasures.length - 1, i);
    }
    /**
     * Redistributes the provied space to all cells
     *
     * @param {*} viewableMatrix current viewport matrix
     * @param {*} width provied width
     * @param {*} height provied height
     * @return {Object} current viewports matrixes with measures
     * @memberof VisualMatrix
     */

  }, {
    key: "redistributeSpaces",
    value: function redistributeSpaces(width, height) {
      var _this3 = this;

      var maxHeights = [];
      var maxWidths = [];
      var maxMeasures = this.maxMeasures();
      var maxWidth = maxMeasures.reduce(function (t, n) {
        t += n;
        return t;
      });
      var logicalWidths = this.getPriorityDistribution({
        matrix: this._layoutMatrix,
        maxWidth: maxWidth,
        maxMeasures: maxMeasures,
        width: width,
        height: height
      });
      this.viewableMatrix.forEach(function (matrixInst) {
        var matrix = matrixInst.matrix;
        var mWidth = 0;
        var mHeight = 0;
        var options = {
          mWidth: mWidth,
          mHeight: mHeight,
          matrix: matrix,
          width: width,
          height: height,
          maxHeights: maxHeights,
          maxWidths: maxWidths,
          logicalWidths: logicalWidths
        };

        var measures = _this3.redistributeViewSpaces(options);

        maxWidths = measures.maxWidths;
        maxHeights = measures.maxHeights;
      });
      return this.computeViewableSpaces({
        height: height,
        width: width,
        maxHeights: maxHeights,
        maxWidths: maxWidths
      });
    }
    /**
     * Distibutes the given space row wisely
     *
     * @param {Object} measures Redistribution information
     * @memberof VisualMatrix
     */

  }, {
    key: "redistributeViewSpaces",
    value: function redistributeViewSpaces(measures) {
      var cWidths = [];
      var rHeights = [];
      var mHeight = 0;
      var maxMeasures = this.maxMeasures();

      var _this$config2 = this.config(),
          isDistributionEqual = _this$config2.isDistributionEqual,
          distribution = _this$config2.distribution,
          isTransposed = _this$config2.isTransposed,
          gutter = _this$config2.gutter;

      var matrix = measures.matrix,
          height = measures.height,
          maxHeights = measures.maxHeights,
          maxWidths = measures.maxWidths,
          logicalWidths = measures.logicalWidths;
      mHeight = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["spaceTakenByColumn"])(matrix, this._lastLevelKey).height;
      var maxWidth = maxMeasures.reduce(function (t, n) {
        t += n;
        return t;
      });
      measures.maxMeasures = maxMeasures;
      measures.maxWidth = maxWidth;

      if (maxWidth > 0) {
        cWidths = logicalWidths;
      } else {
        cWidths = maxMeasures.map(function () {
          return 0;
        });
      }

      rHeights = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getDistributedHeight"])({
        matrix: matrix,
        cIdx: this._lastLevelKey,
        height: mHeight,
        availableHeight: height,
        isDistributionEqual: isDistributionEqual,
        distribution: distribution,
        isTransposed: isTransposed,
        gutter: gutter
      });

      if (maxWidths.length > 0) {
        cWidths = cWidths.map(function (e, i) {
          return Math.max(e, maxWidths[0][i] || 0);
        });
      }

      maxWidths.push(cWidths);

      for (var x = 0; x < maxWidths.length; x++) {
        maxWidths[x] = cWidths;
      }

      maxHeights.push(rHeights);
      return {
        maxWidths: maxWidths,
        maxHeights: maxHeights
      };
    }
    /**
     * Dispatch the calculated cell dimensions to all the cells
     *
     * @param {Object} measures cell dimension information
     * @return {Object} row and column heights / widths
     * @memberof VisualMatrix
     */

  }, {
    key: "getCellDimensions",
    value: function getCellDimensions(measures) {
      var _this4 = this;

      var _this$config3 = this.config(),
          unitMeasures = _this$config3.unitMeasures;

      var borderWidth = unitMeasures.border;
      var matrixInst = measures.matrixInst,
          maxWidths = measures.maxWidths,
          maxHeights = measures.maxHeights,
          matrixIndex = measures.matrixIndex;
      var matrix = matrixInst.matrix;
      var rowHeights = [[0], [0]];
      var columnWidths = [[0], [0]];
      var heights = [0, 0];
      var widths = [0, 0];
      var breakPointer = this._breakPointer;
      matrix.forEach(function (row, rIdx) {
        row.forEach(function (cell, cIdx) {
          var colHeight = maxHeights[matrixIndex][rIdx] || 0;
          var colWidth = maxWidths[matrixIndex][cIdx];
          cell.setAvailableSpace(colWidth, colHeight - borderWidth);

          if (rIdx === 0 && cIdx < breakPointer) {
            columnWidths[0][cIdx] = colWidth;
            widths[0] = (widths[0] || 0) + colWidth;
          } else if (rIdx === 0 && cIdx >= breakPointer) {
            columnWidths[1][cIdx - breakPointer] = colWidth;
            widths[1] = (widths[1] || 0) + colWidth;
          }

          if (cIdx === _this4._lastLevelKey) {
            rowHeights[0][rIdx] = colHeight;
            rowHeights[1][rIdx] = colHeight;
          }
        });
      });
      return {
        heights: heights,
        widths: widths,
        rowHeights: rowHeights,
        columnWidths: columnWidths
      };
    }
  }]);

  return RowVisualMatrix;
}(_visual_matrix__WEBPACK_IMPORTED_MODULE_3__["default"]);



/***/ }),

/***/ "./packages/layout/src/visual-matrix/visual-matrix.js":
/*!************************************************************!*\
  !*** ./packages/layout/src/visual-matrix/visual-matrix.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return VisualMatrix; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "./packages/layout/src/utils/index.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./props */ "./packages/layout/src/visual-matrix/props.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/constants */ "./packages/layout/src/enums/constants.js");
/* harmony import */ var _default_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./default-config */ "./packages/layout/src/visual-matrix/default-config.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }






/**
 * This class used to create column / row matrix for GridLayout
 *
 * @class VisualMatrix
 */

var VisualMatrix =
/*#__PURE__*/
function () {
  /**
   *Creates an instance of VisualMatrix.
   * @param {any} matrix Two set of matrices
   * @param {any} [config={}] Configuration for VisualMatrix
   * @memberof VisualMatrix
   */
  function VisualMatrix(matrix) {
    var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _classCallCheck(this, VisualMatrix);

    // Prepare matrices
    this._lastLevelKey = 0;
    this._primaryMatrix = matrix[0] || [];
    this._secondaryMatrix = matrix[1] || [];
    this._maxMeasures = [];
    this._availableSpace = {}; // Store the config

    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(this, _props__WEBPACK_IMPORTED_MODULE_2__["PROPS"]);
    var defCon = Object.assign({}, this.constructor.defaultConfig());
    this.config(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(defCon, config));
    this._layoutMatrix = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["combineMatrices"])([matrix[0] || [], matrix[1] || []], this.config());
  }
  /**
  * Computes the logical space taken by the entire matrixTree
  *
  * @return {Object} Logical space taken
  * @memberof VisualMatrix
  */


  _createClass(VisualMatrix, [{
    key: "computeLogicalSpace",
    value: function computeLogicalSpace() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }, {
    key: "computeViewableSpaces",
    value: function computeViewableSpaces() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     *
     *
     * @return
     * @memberof VisualMatrix
     */

  }, {
    key: "removeExtraCells",
    value: function removeExtraCells() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }, {
    key: "getPriorityDistribution",
    value: function getPriorityDistribution() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Calculates the depth of the tree that can be viewed
     *
     * @param {Array} widthMeasures array of widths
     * @param {Array} heightMeasures array of heights
     * @return {number} depth of the tree
     * @memberof VisualMatrix
     */

  }, {
    key: "calculateDepth",
    value: function calculateDepth() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Redistributes the provied space to all cells
     *
     * @param {*} viewableMatrix current viewport matrix
     * @param {*} width provied width
     * @param {*} height provied height
     * @return {Object} current viewports matrixes with measures
     * @memberof VisualMatrix
     */

  }, {
    key: "redistributeSpaces",
    value: function redistributeSpaces() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Distibutes the given space row wisely
     *
     * @param {Object} measures Redistribution information
     * @memberof VisualMatrix
     */

  }, {
    key: "redistributeViewSpaces",
    value: function redistributeViewSpaces() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Dispatch the calculated cell dimensions to all the cells
     *
     * @param {Object} measures cell dimension information
     * @return {Object} row and column heights / widths
     * @memberof VisualMatrix
     */

  }, {
    key: "getCellDimensions",
    value: function getCellDimensions() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     *
     *
     * @param {*} params
     * @returns
     * @memberof VisualMatrix
     */

  }, {
    key: "primaryMatrix",
    value: function primaryMatrix() {
      if (arguments.length) {
        return this;
      }

      return this._primaryMatrix;
    }
  }, {
    key: "secondaryMatrix",
    value: function secondaryMatrix() {
      if (arguments.length) {
        return this;
      }

      return this._secondaryMatrix;
    }
  }, {
    key: "tree",
    value: function tree() {
      if (arguments.length) {
        return this;
      }

      return this._tree;
    }
  }, {
    key: "createTree",
    value: function createTree() {
      var _createTree2 = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["createTree"])(this),
          tree = _createTree2.tree,
          lastLevelKey = _createTree2.lastLevelKey;

      this._lastLevelKey = lastLevelKey;
      return tree;
    }
    /**
     * Returns the space taken by visual matrix
     *
     * @return {Object} space taken by the matrix
     * @memberof VisualMatrix
     */

  }, {
    key: "getLogicalSpace",
    value: function getLogicalSpace() {
      return this.logicalSpace();
    }
    /**
     * Sets the provied space to the visual matrix
     *
     * @param {number} width width provided
     * @param {number} height height provided
     * @memberof VisualMatrix
     */

  }, {
    key: "setAvailableSpace",
    value: function setAvailableSpace(width, height) {
      this.availableSpace({
        width: width,
        height: height
      });
      var tree = this.tree();
      var heightMeasures = this.populateMaxMeasures(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["HEIGHT"], tree);
      var widthMeasures = this.populateMaxMeasures(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["WIDTH"], tree);
      var depth = this.calculateDepth(widthMeasures, heightMeasures);
      this.viewableMatrix = this.createViewPortMatrix(depth);
      this.viewableMeasures = this.redistributeSpaces(width, height);
      return this;
    }
    /**
     * Populate the max measures in the array
     *
     * @param {Array} measures array to be filled with max measures
     * @param {Object} matrixTree matrix tree of visual matrix
     * @param {number} measure width or height
     * @param {number} [depth=0] depth of the tree that to be calculated
     * @memberof VisualMatrix
     */

  }, {
    key: "populateMaxMeasures",
    value: function populateMaxMeasures(type, matrixTree) {
      var _this = this;

      var depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var measures = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];
      measures[depth] = Math.max(measures[depth] || 0, matrixTree.space[type]);

      if (matrixTree.values) {
        var childDepth = depth + 1;
        matrixTree.values.forEach(function (child) {
          if (child.space) {
            measures = _this.populateMaxMeasures(type, child, childDepth, measures);
          }
        });
      }

      return measures;
    }
    /**
     * Gets the viewable measures for the current viewable matrix
     *
     * @return {Object} Set of viewable measures
     * @memberof VisualMatrix
     */

  }, {
    key: "getViewableSpaces",
    value: function getViewableSpaces() {
      return this.viewableMeasures;
    }
    /**
     * Returns the matrix that can be viewed in the current viewport
     *
     * @return {Array} Set of matrices that can be viewed
     * @memberof VisualMatrix
     */

  }, {
    key: "getViewableMatrices",
    value: function getViewableMatrices() {
      return this.viewableMatrix;
    }
    /**
     * Creates the viewport that can be viewed together
     *
     * @param {number} depth maxDepth that can be viewed in the viewport
     * @return {Array<Object>} Set of matrices that can be viewed
     * @memberof VisualMatrix
     */

  }, {
    key: "createViewPortMatrix",
    value: function createViewPortMatrix(depth) {
      var arr = [];
      Object(_utils__WEBPACK_IMPORTED_MODULE_1__["createMatrixInstances"])(arr, depth, this.removeExtraCells(), this);
      return arr;
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return _default_config__WEBPACK_IMPORTED_MODULE_4__["defaultConfig"];
    }
  }]);

  return VisualMatrix;
}();



/***/ }),

/***/ "./packages/muze-axis/src/axis-renderer.js":
/*!*************************************************!*\
  !*** ./packages/muze-axis/src/axis-renderer.js ***!
  \*************************************************/
/*! exports provided: setFixedBaseline, renderAxis */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setFixedBaseline", function() { return setFixedBaseline; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "renderAxis", function() { return renderAxis; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enums/axis-orientation */ "./packages/muze-axis/src/enums/axis-orientation.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./enums/constants */ "./packages/muze-axis/src/enums/constants.js");
/**
 * This file exports functionality that is used to render axis.
 */



/**
 *
 *
 * @param {*} instance
 * @param {*} container
 * @param {*} labelManager
 * @param {*} config
 */

var rotateAxis = function rotateAxis(instance, tickText, labelManager) {
  var rotation;
  var axis = instance.axis();
  var config = instance.config();
  var renderConfig = instance.renderConfig();
  var smartTicks = instance.smartTicks();
  var scale = axis.scale();
  var labelFunc = scale.ticks || scale.quantile || scale.domain;
  var ticks = labelFunc();
  var orientation = config.orientation,
      fixedBaseline = config.fixedBaseline,
      type = config.type;
  var labels = renderConfig.labels;
  rotation = labels.rotation;
  var tickSize = instance.getTickSize();
  tickText.each(function (d, index) {
    var yShift;
    var xShift;
    var datum = smartTicks[index] ? smartTicks[index].text : d;
    datum = datum.toString();
    var tickLabelDim = labelManager.getOriSize(datum);
    var width = tickLabelDim.width * 0.5;
    var height = tickLabelDim.height * 0.5;

    if (rotation < 0) {
      rotation = 360 + rotation;
    }

    var quadrant = 4 - Math.floor(rotation / 90);
    var rotationNormalizer = (quadrant % 2 === 0 ? rotation : 180 * Math.ceil(rotation / 180) - rotation) % 180;
    yShift = Math.sqrt(Math.pow(height, 2) + Math.pow(width, 2)) * Math.sin(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["angleToRadian"])(rotationNormalizer));

    if ((quadrant === 3 || quadrant === 2) && !(rotationNormalizer > 67.5 && rotationNormalizer <= 90)) {
      yShift += height * 2;
    }

    xShift = width;

    if (rotation === 90) {
      xShift = height;
    } else if (rotation === 270) {
      xShift = -height;
    } else {
      xShift = 0;
    }

    if (orientation === _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__["TOP"]) {
      xShift = fixedBaseline && ticks[0] === d && type === _enums_constants__WEBPACK_IMPORTED_MODULE_2__["LINEAR"] ? xShift + xShift / 2 : xShift;
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this).attr('transform', "translate(".concat(-xShift + tickSize, "\n                                ").concat(-yShift - tickSize, ") rotate(").concat(rotation, ")"));
    } else {
      xShift = fixedBaseline && ticks[0] === d && type === _enums_constants__WEBPACK_IMPORTED_MODULE_2__["LINEAR"] ? xShift - xShift / 2 : xShift;
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this).attr('transform', "translate(".concat(xShift - tickSize, "\n                                ").concat(yShift + tickSize, ") rotate(").concat(rotation, ")"));
    }

    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this).transition().duration(1000).text(datum);
  });
  return tickText;
};
/**
 *
 *
 * @param {*} tickText
 * @param {*} axisInstance
 */


var changeTickOrientation = function changeTickOrientation(selectContainer, axisInstance, tickSize) {
  var _smartTicks = axisInstance._smartTicks;
  var config = axisInstance.config();
  var renderConfig = axisInstance.renderConfig();
  var labelManager = axisInstance.dependencies().labelManager;
  var orientation = config.orientation,
      classPrefix = config.classPrefix;
  var labels = renderConfig.labels;
  var rotation = labels.rotation,
      isSmartTicks = labels.smartTicks;
  var tickText = selectContainer.selectAll('.tick text');
  tickText.selectAll('tspan').remove(); // rotate labels if not enough space is available

  if (rotation && (orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_2__["TOP"] || orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_2__["BOTTOM"])) {
    rotateAxis(axisInstance, tickText, labelManager);
  } else if (!rotation && !isSmartTicks) {
    tickText.attr('transform', '');
  } else {
    tickText.text('');

    if (orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_2__["TOP"] || orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_2__["BOTTOM"]) {
      tickText.attr('y', 0).attr('x', 0).attr('transform', '').text('');
      var tspan = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(tickText, 'tspan', function (d, i) {
        if (_smartTicks[i]) {
          return _smartTicks[i].lines;
        }

        return [];
      }, "".concat(classPrefix, "-smart-text"));
      tspan.attr('dy', '0').style('opacity', '0').transition().duration(1000).on('end', axisInstance.registerAnimationDoneHook()).attr('dy', function (d, i) {
        if (orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_2__["BOTTOM"] || i !== 0) {
          return _smartTicks[0].oriTextHeight;
        }

        return -_smartTicks[0].oriTextHeight * (_smartTicks[0].lines.length - 1) - tickSize;
      }).style('opacity', 1).text(function (e) {
        return e;
      }).attr('x', 0);
    } else {
      var _tspan = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(tickText, 'tspan', function (d, i) {
        return _smartTicks[i].lines;
      }, "".concat(classPrefix, "-smart-text"));

      _tspan.text(function (e) {
        return e;
      });
    }
  }

  return tickText;
};

var setFixedBaseline = function setFixedBaseline(axisInstance) {
  var _axisInstance$config = axisInstance.config(),
      fixedBaseline = _axisInstance$config.fixedBaseline;

  var _axisInstance$renderC = axisInstance.renderConfig(),
      showInnerTicks = _axisInstance$renderC.showInnerTicks;

  var domain = axisInstance.domain();

  if (fixedBaseline && domain.length && showInnerTicks) {
    axisInstance.setFixedBaseline();
  }
};
/**
 *
 *
 * @param {*} textNode
 * @param {*} orientation
 * @param {*} measures
 */

var setAxisNamePos = function setAxisNamePos(textNode, orientation, measures) {
  var axisNameHeight = measures.axisNameHeight,
      yOffset = measures.yOffset,
      labelOffset = measures.labelOffset,
      availableSpace = measures.availableSpace;

  switch (orientation) {
    case _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__["LEFT"]:
      textNode.attr('transform', "translate(".concat(-(availableSpace.width - axisNameHeight), ",").concat(yOffset + labelOffset, ")rotate(-90)"));
      break;

    case _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__["RIGHT"]:
      textNode.attr('transform', "translate(".concat(availableSpace.width - axisNameHeight, ",").concat(yOffset + labelOffset, ")rotate(90)"));
      break;

    case _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__["TOP"]:
      textNode.attr('transform', "translate(".concat(availableSpace.width / 2, ",").concat(-availableSpace.height + axisNameHeight, ")"));
      break;

    case _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"]:
      textNode.attr('transform', "translate(".concat(availableSpace.width / 2, ",").concat(availableSpace.height - axisNameHeight / 2, ")"));
      break;

    default:
  }

  return textNode;
};
/**
 * This method is used to render the axis inside an
 * svg container.
 *
 * @export
 * @param {Object} axisInstance the nput object required to render axis
 * @param {string} axisInstance.orientation the orientation of axis
 * @param {Object} axisInstance.scale instance of d3 scale
 * @param {SVGElement} axisInstance.container the container in which to render
 */


function renderAxis(axisInstance) {
  var config = axisInstance.config();
  var renderConfig = axisInstance.renderConfig();
  var labelManager = axisInstance.dependencies().labelManager;
  var mount = axisInstance.mount();
  var range = axisInstance.range();
  var axis = axisInstance.axis();
  var scale = axisInstance.scale();
  var axisNameStyle = axisInstance._axisNameStyle,
      tickLabelStyle = axisInstance._tickLabelStyle,
      axisTickFormatter = axisInstance._tickFormatter,
      tickValues = axisInstance.tickValues;
  var orientation = config.orientation,
      name = config.name,
      xOffset = config.xOffset,
      yOffset = config.yOffset,
      axisNamePadding = config.axisNamePadding,
      className = config.className,
      id = config.id,
      classPrefix = config.classPrefix;
  var show = renderConfig.show,
      showAxisName = renderConfig.showAxisName,
      labels = renderConfig.labels;

  if (!show) {
    return;
  }

  var tickSize = axisInstance.getTickSize();
  var selectContainer = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(mount), 'g', [axisInstance], "".concat(className), {}, function (key) {
    return key.config().id;
  }); // Set style for tick labels

  labelManager.setStyle(tickLabelStyle);
  var labelFunc = scale.ticks || scale.quantile || scale.domain;
  axis.tickFormat(axisTickFormatter(tickValues || axis.tickValues() || labelFunc())); // Get range(length of range)

  var availableSpace = Math.abs(range[0] - range[1]); // Get width and height taken by axis labels

  var labelProps = axisInstance.axisComponentDimensions().largestTickDimensions; // Draw axis ticks

  selectContainer.attr('transform', "translate(".concat(xOffset, ",").concat(yOffset, ")")); // setFixedBaseline(axisInstance);

  if (labels.smartTicks === false || tickSize === 0) {
    selectContainer.transition().duration(1000).on('end', axisInstance.registerAnimationDoneHook()).call(axis);
  } else {
    selectContainer.call(axis);
  }

  selectContainer.selectAll('.tick').classed("".concat(classPrefix, "-ticks"), true);
  selectContainer.selectAll('.tick line').classed("".concat(classPrefix, "-tick-lines"), true); // Set classes for ticks

  var tickText = selectContainer.selectAll('.tick text');
  tickText.classed("".concat(classPrefix, "-ticks"), true).classed("".concat(classPrefix, "-ticks-").concat(id), true);
  changeTickOrientation(selectContainer, axisInstance, tickSize); // Create axis name

  var textNode = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(selectContainer, 'text', [name], "".concat(classPrefix, "-axis-name")).attr('text-anchor', 'middle').classed("".concat(classPrefix, "-axis-name-").concat(id), true).text(function (d) {
    return d;
  }); // Hide axis name if show is off

  textNode.classed(_enums_constants__WEBPACK_IMPORTED_MODULE_2__["HIDDEN"], !showAxisName); // render labels based on orientation of axis

  var labelOffset = availableSpace / 2; // Set style for axis name

  labelManager.setStyle(axisNameStyle);
  var axisNameSpace = labelManager.getOriSize(name);
  var measures = {
    labelProps: labelProps,
    tickSize: tickSize,
    axisNamePadding: axisNamePadding,
    axisNameHeight: axisNameSpace.height,
    axisNameWidth: axisNameSpace.width,
    yOffset: yOffset,
    xOffset: xOffset,
    labelOffset: labelOffset,
    availableSpace: axisInstance.availableSpace()
  }; // Set position for axis name

  setAxisNamePos(textNode, orientation, measures);
}

/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/common-helper.js":
/*!****************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/common-helper.js ***!
  \****************************************************************/
/*! exports provided: sanitizeDomain, getRotatedSpaces, getAxisComponentDimensions, getTickFormatter, getTickLabelInfo, computeAxisDimensions, setOffset, registerChangeListeners, getHorizontalAxisSpace, getVerticalAxisSpace, calculateBandSpace, getValidDomain, setContinousAxisDomain, hasAxesConfigChanged */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sanitizeDomain", function() { return sanitizeDomain; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRotatedSpaces", function() { return getRotatedSpaces; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAxisComponentDimensions", function() { return getAxisComponentDimensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTickFormatter", function() { return getTickFormatter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTickLabelInfo", function() { return getTickLabelInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeAxisDimensions", function() { return computeAxisDimensions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setOffset", function() { return setOffset; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerChangeListeners", function() { return registerChangeListeners; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getHorizontalAxisSpace", function() { return getHorizontalAxisSpace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getVerticalAxisSpace", function() { return getVerticalAxisSpace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calculateBandSpace", function() { return calculateBandSpace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getValidDomain", function() { return getValidDomain; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setContinousAxisDomain", function() { return setContinousAxisDomain; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAxesConfigChanged", function() { return hasAxesConfigChanged; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/axis-orientation */ "./packages/muze-axis/src/enums/axis-orientation.js");
/* harmony import */ var _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/scale-type */ "./packages/muze-axis/src/enums/scale-type.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }




var sanitizeDomain = function sanitizeDomain(domain, context) {
  var interpolator = context.config().interpolator; // @todo: Get from scale decorator

  if (interpolator === _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["LOG"] && domain[0] >= 0) {
    return [Math.max(1, domain[0]), Math.max(1, domain[1])];
  }

  return domain;
};
var getRotatedSpaces = function getRotatedSpaces() {
  var rotation = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
  var width = arguments.length > 1 ? arguments[1] : undefined;
  var height = arguments.length > 2 ? arguments[2] : undefined;
  var rotatedHeight = height;
  var rotatedWidth = width;

  if (rotation) {
    var angle = (rotation || 0) * Math.PI / 180;
    rotatedWidth = Math.abs(height * Math.sin(angle)) + Math.abs(width * Math.cos(angle));
    rotatedHeight = Math.abs(width * Math.sin(angle)) + Math.abs(height * Math.cos(angle));
  }

  return {
    width: rotatedWidth,
    height: rotatedHeight
  };
};
var getAxisComponentDimensions = function getAxisComponentDimensions(context) {
  var largestTick = '';
  var largestTickDimensions = {
    width: 0,
    height: 0
  };
  var smartTick = {};
  var axisTicks;
  var allTickDimensions = [];
  var scale = context.scale();

  var _context$renderConfig = context.renderConfig(),
      showAxisName = _context$renderConfig.showAxisName;

  var _context$config = context.config(),
      tickValues = _context$config.tickValues,
      name = _context$config.name;

  var _context$dependencies = context.dependencies(),
      labelManager = _context$dependencies.labelManager;

  var labelFunc = scale.ticks || scale.quantile || scale.domain; // set the style on the shared label manager instance

  labelManager.setStyle(context._tickLabelStyle); // get the values along the domain

  axisTicks = tickValues || labelFunc(); // Get the tick labels

  axisTicks = axisTicks.map(function (originalLabel, i) {
    var label = context.getFormattedText(originalLabel, i, axisTicks); // convert to string for quant values

    var tickDimensions = labelManager.getOriSize(label); // Get spaces for all labels

    allTickDimensions.push(tickDimensions); // Getting largest label

    if (tickDimensions.width > largestTickDimensions.width) {
      largestTick = label;
      smartTick = context.smartTicks() ? context.smartTicks()[i] : {};
      largestTickDimensions = tickDimensions;
    }

    return label;
  });
  labelManager.setStyle(context._axisNameStyle);
  var axisNameDimensions = showAxisName ? labelManager.getOriSize(name) : {
    width: 0,
    height: 0
  };
  return {
    axisNameDimensions: axisNameDimensions,
    largestTick: largestTick,
    largestTickDimensions: largestTickDimensions,
    allTickDimensions: allTickDimensions,
    axisTicks: axisTicks,
    smartTick: smartTick,
    tickSize: context.getTickSize()
  };
};
var getTickFormatter = function getTickFormatter(tickFormat, numberFormat) {
  if (tickFormat) {
    return function (ticks) {
      return function (val, i) {
        return tickFormat(numberFormat(val), i, ticks);
      };
    };
  }

  return function () {
    return function (val) {
      return numberFormat(val);
    };
  };
};
/**
 *
 *
 * @returns
 * @memberof SimpleAxis
 */

var getTickLabelInfo = function getTickLabelInfo(context) {
  var largestLabel = '';
  var labelProps;
  var smartTick = {};
  var axisTickLabels;
  var scale = context.scale();
  var allLabelLengths = [];

  var _context$config2 = context.config(),
      tickFormat = _context$config2.tickFormat,
      tickValues = _context$config2.tickValues,
      numberFormat = _context$config2.numberFormat;

  var labelFunc = scale.ticks || scale.quantile || scale.domain; // set the style on the shared label manager instance

  var _context$dependencies2 = context.dependencies(),
      labelManager = _context$dependencies2.labelManager;

  labelManager.setStyle(context._tickLabelStyle); // get the values along the domain

  axisTickLabels = tickValues || labelFunc(); // Get the tick labels

  axisTickLabels = axisTickLabels.map(function (originalLabel, i) {
    var formattedLabel = numberFormat(originalLabel); //  get formats of tick if any

    var label = tickFormat ? tickFormat(formattedLabel, i, axisTickLabels) : scale.tickFormat ? numberFormat(scale.tickFormat()(originalLabel)) : formattedLabel; // convert to string for quant values

    var temp = label.toString(); // Get spaces for all labels

    allLabelLengths.push(labelManager.getOriSize(temp)); // Getting largest label

    if (temp.length > largestLabel.length) {
      largestLabel = temp;
      smartTick = context.smartTicks().length ? context.smartTicks()[i] : allLabelLengths[i];
      labelProps = allLabelLengths[i];
    }

    return label;
  });
  labelProps = labelManager.getOriSize(largestLabel);
  return {
    largestLabel: largestLabel,
    largestLabelDim: labelProps,
    axisTickLabels: axisTickLabels,
    allLabelLengths: allLabelLengths,
    smartTick: smartTick
  };
};
var computeAxisDimensions = function computeAxisDimensions(context) {
  var tickDimensions = {};

  var _context$renderConfig2 = context.renderConfig(),
      labels = _context$renderConfig2.labels;

  var smartTicks = labels.smartTicks,
      rotation = labels.rotation;

  var _getAxisComponentDime = getAxisComponentDimensions(context),
      largestTickDimensions = _getAxisComponentDime.largestTickDimensions,
      axisTicks = _getAxisComponentDime.axisTicks,
      smartTick = _getAxisComponentDime.smartTick,
      axisNameDimensions = _getAxisComponentDime.axisNameDimensions,
      allTickDimensions = _getAxisComponentDime.allTickDimensions,
      tickSize = _getAxisComponentDime.tickSize;

  var labelHeight = largestTickDimensions.height,
      labelWidth = largestTickDimensions.width; // get the domain of axis

  var domain = context.domain(); // const angle = ((rotation || 0) * Math.PI) / 180;

  if (domain.length === 0) {
    return null;
  }

  if (smartTicks) {
    tickDimensions = smartTick;
  } else {
    tickDimensions = {
      width: labelWidth,
      height: labelHeight
    };
  }

  tickDimensions = getRotatedSpaces(rotation, tickDimensions.width, tickDimensions.height);

  if (tickSize === 0) {
    tickDimensions = {
      width: 0,
      height: 0
    };
  }

  return {
    allTickDimensions: allTickDimensions,
    tickSize: tickSize,
    tickDimensions: tickDimensions,
    axisNameDimensions: axisNameDimensions,
    largestTickDimensions: largestTickDimensions,
    axisTicks: axisTicks
  };
};
/**
*
*
* @memberof SimpleAxis
*/

var setOffset = function setOffset(context) {
  var x = 0;
  var y = 0;
  var logicalSpace = context.logicalSpace();
  var config = context.config();
  var orientation = config.orientation,
      xOffset = config.xOffset,
      yOffset = config.yOffset;

  if (orientation === _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__["LEFT"]) {
    x = xOffset === undefined ? logicalSpace.width : xOffset;
  }

  if (orientation === _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__["TOP"]) {
    y = yOffset === undefined ? logicalSpace.height : yOffset;
  }

  context.config({
    xOffset: x,
    yOffset: y
  });
};
/**
* Listener attached to the axis on change of parameters.
*
* @param {Function} callback to be excuted on change of domain range etc
* @memberof SimpleAxis
*/

var registerChangeListeners = function registerChangeListeners(context) {
  var store = context.store();
  store.model.next(['domain', 'range', 'mount', 'config'], function () {
    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
      params[_key] = arguments[_key];
    }

    context.render();
    context._domainLock = false;

    context._eventList.forEach(function (e) {
      e.action instanceof Function && e.action.apply(e, params);
    });
  }, true);
  return context;
};
/**
 *
 *
 * @param {*} axisDimensions
 * @param {*} config
 * @param {*} range
 *
 */

var getHorizontalAxisSpace = function getHorizontalAxisSpace(context, axisDimensions, range) {
  var width;
  var height;
  var domain = context.domain();
  var tickSize = axisDimensions.tickSize,
      tickDimensions = axisDimensions.tickDimensions,
      axisNameDimensions = axisDimensions.axisNameDimensions;

  var _context$config3 = context.config(),
      axisNamePadding = _context$config3.axisNamePadding,
      tickValues = _context$config3.tickValues;

  var _context$renderConfig3 = context.renderConfig(),
      showAxisName = _context$renderConfig3.showAxisName;

  var axisDimHeight = axisNameDimensions.height;
  var tickDimHeight = tickDimensions.height,
      tickDimWidth = tickDimensions.width;
  width = range && range.length ? range[1] - range[0] : 0;
  height = 0;

  if (tickValues) {
    var minTickDiff = context.getMinTickDifference();
    var _ref = [Math.min.apply(Math, _toConsumableArray(tickValues).concat(_toConsumableArray(domain))), Math.max.apply(Math, _toConsumableArray(tickValues).concat(_toConsumableArray(domain)))],
        min = _ref[0],
        max = _ref[1];
    width = (max - min) / Math.abs(minTickDiff) * (tickDimWidth + context._minTickDistance.width);
  }

  if (!width || width === 0) {
    height = Math.max(tickDimWidth, tickDimHeight);
  } else {
    height = tickDimHeight;
  }

  height += (showAxisName ? axisDimHeight + axisNamePadding : 0) + tickSize;
  return {
    width: width,
    height: height
  };
};
/**
 *
 *
 * @param {*} axisDimensions
 * @param {*} config
 * @param {*} range
 *
 */

var getVerticalAxisSpace = function getVerticalAxisSpace(context, axisDimensions) {
  var height;
  var width;
  var domain = context.domain();
  var tickSize = axisDimensions.tickSize,
      tickDimensions = axisDimensions.tickDimensions,
      axisNameDimensions = axisDimensions.axisNameDimensions;

  var _context$config4 = context.config(),
      axisNamePadding = _context$config4.axisNamePadding,
      tickValues = _context$config4.tickValues;

  var _context$renderConfig4 = context.renderConfig(),
      showAxisName = _context$renderConfig4.showAxisName;

  var axisDimHeight = axisNameDimensions.height;
  var tickDimHeight = tickDimensions.height,
      tickDimWidth = tickDimensions.width;
  height = 0;
  width = tickDimWidth;

  if (tickValues) {
    var minTickDiff = context.getMinTickDifference();
    var _ref2 = [Math.min.apply(Math, _toConsumableArray(tickValues).concat(_toConsumableArray(domain))), Math.max.apply(Math, _toConsumableArray(tickValues).concat(_toConsumableArray(domain)))],
        min = _ref2[0],
        max = _ref2[1];
    height = (max - min) / Math.abs(minTickDiff) * tickDimHeight;
  }

  width += (showAxisName ? axisDimHeight : 0) + tickSize + axisNamePadding;
  return {
    height: height,
    width: width
  };
};
/**
    * Calculates the logical space of the axis
    * @return {Object} Width and height occupied by the axis.
    */

var calculateBandSpace = function calculateBandSpace(context) {
  var range = context.range();
  var config = context.config();
  var orientation = config.orientation,
      show = config.show;
  var axisDimensions = context.getAxisDimensions();
  var largestLabelDim = axisDimensions.largestLabelDim,
      axisTickLabels = axisDimensions.axisTickLabels;
  var largestDimHeight = largestLabelDim.height,
      largestDimWidth = largestLabelDim.width;

  if (orientation === _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__["TOP"] || orientation === _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"]) {
    var _getHorizontalAxisSpa = getHorizontalAxisSpace(context, axisDimensions, config, range),
        _width = _getHorizontalAxisSpa.width,
        _height = _getHorizontalAxisSpa.height;

    if (!_width || _width === 0) {
      _width = axisTickLabels.length * Math.min(largestDimWidth + context._minTickDistance.width, largestDimHeight + context._minTickDistance.width);
    }

    if (show === false) {
      _height = 0;
    }

    return {
      width: _width,
      height: _height
    };
  }

  var _getVerticalAxisSpace = getVerticalAxisSpace(context, axisDimensions, config, range),
      width = _getVerticalAxisSpace.width,
      height = _getVerticalAxisSpace.height;

  if (!height || height === 0) {
    height = axisTickLabels.length * (largestDimHeight + largestDimHeight / 2) + largestDimHeight;
  }

  if (show === false) {
    width = 0;
  }

  return {
    width: width,
    height: height
  };
};
/**
 * Overwrites domain with user defined domain (if present)
 * @param {Object} context reference to current axes
 * @param {Array} domain default domain
 *
 * @return {Array} domain
 */

var getValidDomain = function getValidDomain(context, domain) {
  var _context$config5 = context.config(),
      userDom = _context$config5.domain;

  if (userDom) {
    domain = userDom;
  }

  return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["defaultValue"])(domain, []);
};
var setContinousAxisDomain = function setContinousAxisDomain(context, domain) {
  var _context$config6 = context.config(),
      nice = _context$config6.nice;

  var scale = context.scale.bind(context);
  scale().domain(domain);
  nice && scale().nice();
  context._domain = scale().domain();
};
/**
 * Checks if any of the properties have changed between two objects
 * @param {Object} obj first object
 * @param {Object} obj1 second object
 * @param {Array} properties properties to be compared between two objects
 *
 * @return {Boolean} boolean value
 */

var hasAxesConfigChanged = function hasAxesConfigChanged() {
  var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var obj1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var properties = arguments.length > 2 ? arguments[2] : undefined;

  if (!Object.keys(obj).length || !Object.keys(obj1).length) {
    return false;
  }

  return properties.some(function (key) {
    return obj[key] !== obj1[key];
  });
};

/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/continous-axis/continous-axis.js":
/*!********************************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/continous-axis/continous-axis.js ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ContinousAxis; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _simple_axis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../simple-axis */ "./packages/muze-axis/src/cartesian-axis/simple-axis.js");
/* harmony import */ var _common_helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common-helper */ "./packages/muze-axis/src/cartesian-axis/common-helper.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helper */ "./packages/muze-axis/src/cartesian-axis/continous-axis/helper.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }






var ContinousAxis =
/*#__PURE__*/
function (_SimpleAxis) {
  _inherits(ContinousAxis, _SimpleAxis);

  function ContinousAxis() {
    _classCallCheck(this, ContinousAxis);

    return _possibleConstructorReturn(this, _getPrototypeOf(ContinousAxis).apply(this, arguments));
  }

  _createClass(ContinousAxis, [{
    key: "setRotationConfig",

    /**
    *
    *
    * @param {*} axisTickLabels
    * @param {*} labelWidth
    * @returns
    * @memberof SimpleAxis
    */
    value: function setRotationConfig() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }, {
    key: "getTickValues",
    value: function getTickValues() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
    * Gets the space occupied by the axis
    *
    * @return {Object} object with details about size of the axis.
    * @memberof SimpleAxis
    */

  }, {
    key: "getLogicalSpace",
    value: function getLogicalSpace() {
      if (!this.logicalSpace()) {
        this.logicalSpace(Object(_helper__WEBPACK_IMPORTED_MODULE_3__["calculateContinousSpace"])(this));
        Object(_common_helper__WEBPACK_IMPORTED_MODULE_2__["setOffset"])(this);
      }

      return this.logicalSpace();
    }
    /**
    *
    *
    * @returns
    * @memberof SimpleAxis
    */

  }, {
    key: "getTickSize",
    value: function getTickSize() {
      var _this$config = this.config(),
          showInnerTicks = _this$config.showInnerTicks,
          showOuterTicks = _this$config.showOuterTicks;

      var axis = this.axis();
      axis.tickSizeInner(showInnerTicks === false ? 0 : 6);
      axis.tickSizeOuter(showOuterTicks === false ? 0 : 6);
      return axis.tickSize();
    }
  }, {
    key: "getMinTickDifference",
    value: function getMinTickDifference() {
      return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getSmallestDiff"])(this.config().tickValues);
    }
  }, {
    key: "setAvailableSpace",
    value: function setAvailableSpace() {
      var _get2;

      for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
        params[_key] = arguments[_key];
      }

      (_get2 = _get(_getPrototypeOf(ContinousAxis.prototype), "setAvailableSpace", this)).call.apply(_get2, [this].concat(params));

      this.getTickSize();
      return this;
    }
  }]);

  return ContinousAxis;
}(_simple_axis__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/continous-axis/helper.js":
/*!************************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/continous-axis/helper.js ***!
  \************************************************************************/
/*! exports provided: calculateContinousSpace, getNumberOfTicks, setContinousAxisDomain, setFixedBaseline */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calculateContinousSpace", function() { return calculateContinousSpace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNumberOfTicks", function() { return getNumberOfTicks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setContinousAxisDomain", function() { return setContinousAxisDomain; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setFixedBaseline", function() { return setFixedBaseline; });
/* harmony import */ var _common_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common-helper */ "./packages/muze-axis/src/cartesian-axis/common-helper.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-axis/src/enums/constants.js");


/**
 * Calculates the logical space of the axis
 * @return {Object} Width and height occupied by the axis.
 */

var calculateContinousSpace = function calculateContinousSpace(context) {
  var range = context.range();
  var axisDimensions = context.getAxisDimensions();

  var _context$config = context.config(),
      orientation = _context$config.orientation;

  var _context$renderConfig = context.renderConfig(),
      show = _context$renderConfig.show,
      showAxisName = _context$renderConfig.showAxisName;

  var axisNameDimensions = axisDimensions.axisNameDimensions;

  if (show === false) {
    return {
      width: 0,
      height: 0
    };
  }

  var axisNameWidth = axisNameDimensions.width;

  if (orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["TOP"] || orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"]) {
    var _getHorizontalAxisSpa = Object(_common_helper__WEBPACK_IMPORTED_MODULE_0__["getHorizontalAxisSpace"])(context, axisDimensions, range),
        _width = _getHorizontalAxisSpa.width,
        _height = _getHorizontalAxisSpa.height;

    var axisWidth = Math.max(_width, axisNameWidth);
    return {
      width: axisWidth,
      height: _height
    };
  }

  var _getVerticalAxisSpace = Object(_common_helper__WEBPACK_IMPORTED_MODULE_0__["getVerticalAxisSpace"])(context, axisDimensions, range),
      width = _getVerticalAxisSpace.width,
      height = _getVerticalAxisSpace.height;

  var effHeight = Math.max(height, showAxisName ? axisNameWidth : 0);
  return {
    width: width,
    height: effHeight
  };
};
var getNumberOfTicks = function getNumberOfTicks(availableSpace, labelDim, axis, axisInstance) {
  var ticks = axis.scale().ticks();

  var _axisInstance$config = axisInstance.config(),
      numberOfTicks = _axisInstance$config.numberOfTicks;

  var tickLength = ticks.length;
  var numberOfValues = tickLength;

  if (tickLength * (labelDim * 1.5) > availableSpace) {
    numberOfValues = Math.floor(availableSpace / (labelDim * 1.5));
  }

  numberOfValues = Math.min(numberOfTicks, Math.max(2, numberOfValues));
  var tickValues = axis.scale().ticks(numberOfValues);

  if (numberOfValues === 2) {
    tickValues = axis.scale().ticks(10);
    tickValues = [tickValues[0], tickValues[tickValues.length - 1]];
  }

  return tickValues;
};
var setContinousAxisDomain = function setContinousAxisDomain(context, domain) {
  var _context$config2 = context.config(),
      nice = _context$config2.nice;

  var scale = context.scale.bind(context);
  scale().domain(domain);
  nice && scale().nice();
  context._domain = scale().domain();
};
var setFixedBaseline = function setFixedBaseline(axisInstance) {
  var _axisInstance$config2 = axisInstance.config(),
      orientation = _axisInstance$config2.orientation,
      labels = _axisInstance$config2.labels;

  var rotation = labels.rotation;
  var axis = axisInstance.axis();
  var _axisInstance$_axisDi = axisInstance._axisDimensions.allTickDimensions[0],
      width = _axisInstance$_axisDi.width,
      height = _axisInstance$_axisDi.height;
  var ticks = axis.scale().ticks();
  axis.tickTransform(function (d) {
    if (d === ticks[0]) {
      if (orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["LEFT"] || orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["RIGHT"]) {
        return "translate(0, -".concat(height / 3, "px)");
      }

      if ((orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["TOP"] || orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"]) && !rotation) {
        return "translate(".concat(width / 2, "px,  ", 0, "px)");
      }
    }

    return '';
  });
};

/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/continous-axis/index.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/continous-axis/index.js ***!
  \***********************************************************************/
/*! exports provided: ContinousAxis, NumericAxis, TimeAxis */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _continous_axis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./continous-axis */ "./packages/muze-axis/src/cartesian-axis/continous-axis/continous-axis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ContinousAxis", function() { return _continous_axis__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _numeric_axis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./numeric-axis */ "./packages/muze-axis/src/cartesian-axis/continous-axis/numeric-axis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NumericAxis", function() { return _numeric_axis__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _time_axis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./time-axis */ "./packages/muze-axis/src/cartesian-axis/continous-axis/time-axis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TimeAxis", function() { return _time_axis__WEBPACK_IMPORTED_MODULE_2__["default"]; });





/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/continous-axis/interpolators/index.js":
/*!*************************************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/continous-axis/interpolators/index.js ***!
  \*************************************************************************************/
/*! exports provided: LinearInterpolator, LogInterpolator, PowInterpolator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _linear__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./linear */ "./packages/muze-axis/src/cartesian-axis/continous-axis/interpolators/linear.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LinearInterpolator", function() { return _linear__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _log__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./log */ "./packages/muze-axis/src/cartesian-axis/continous-axis/interpolators/log.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LogInterpolator", function() { return _log__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _pow__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pow */ "./packages/muze-axis/src/cartesian-axis/continous-axis/interpolators/pow.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PowInterpolator", function() { return _pow__WEBPACK_IMPORTED_MODULE_2__["default"]; });





/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/continous-axis/interpolators/linear.js":
/*!**************************************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/continous-axis/interpolators/linear.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LinearInterpolator; });
/* harmony import */ var _scale_creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../scale-creator */ "./packages/muze-axis/src/scale-creator.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }



var LinearInterpolator =
/*#__PURE__*/
function () {
  function LinearInterpolator() {
    _classCallCheck(this, LinearInterpolator);
  }

  _createClass(LinearInterpolator, [{
    key: "createScale",
    value: function createScale(config) {
      var range = config.range;
      var scaleFactory = _scale_creator__WEBPACK_IMPORTED_MODULE_0__["scaleMap"].linear;
      this._scale = scaleFactory().range(range);
      return this._scale;
    }
  }, {
    key: "getScaleValue",
    value: function getScaleValue(domainVal) {
      return this._scale(domainVal) + 0.5;
    }
  }, {
    key: "sanitizeDomain",
    value: function sanitizeDomain(domain) {
      return domain;
    }
  }]);

  return LinearInterpolator;
}();



/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/continous-axis/interpolators/log.js":
/*!***********************************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/continous-axis/interpolators/log.js ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LogInterpolator; });
/* harmony import */ var _scale_creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../scale-creator */ "./packages/muze-axis/src/scale-creator.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }



var LogInterpolator =
/*#__PURE__*/
function () {
  function LogInterpolator() {
    _classCallCheck(this, LogInterpolator);
  }

  _createClass(LogInterpolator, [{
    key: "createScale",
    value: function createScale(config) {
      var range = config.range,
          base = config.base;
      var scaleFactory = _scale_creator__WEBPACK_IMPORTED_MODULE_0__["scaleMap"].log;
      this._scale = scaleFactory().range(range).base(base);
      return this._scale;
    }
  }, {
    key: "getScaleValue",
    value: function getScaleValue(domainVal) {
      if (domainVal <= 0) {
        return 1;
      }

      return this._scale(domainVal) + 0.5;
    }
  }, {
    key: "sanitizeDomain",
    value: function sanitizeDomain(domain) {
      if (domain[0] <= 0) {
        return [Math.max(1, domain[0]), Math.max(1, domain[1])];
      }

      return domain;
    }
  }]);

  return LogInterpolator;
}();



/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/continous-axis/interpolators/pow.js":
/*!***********************************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/continous-axis/interpolators/pow.js ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return PowInterpolator; });
/* harmony import */ var _scale_creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../scale-creator */ "./packages/muze-axis/src/scale-creator.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }



var PowInterpolator =
/*#__PURE__*/
function () {
  function PowInterpolator() {
    _classCallCheck(this, PowInterpolator);
  }

  _createClass(PowInterpolator, [{
    key: "createScale",
    value: function createScale(config) {
      var range = config.range,
          exponent = config.exponent;
      var scaleFactory = _scale_creator__WEBPACK_IMPORTED_MODULE_0__["scaleMap"].pow;
      this._scale = scaleFactory().range(range).exponent(exponent);
      return this._scale;
    }
  }, {
    key: "getScaleValue",
    value: function getScaleValue(domainVal) {
      return this._scale(domainVal) + 0.5;
    }
  }, {
    key: "sanitizeDomain",
    value: function sanitizeDomain(domain) {
      return domain;
    }
  }]);

  return PowInterpolator;
}();



/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/continous-axis/numeric-axis.js":
/*!******************************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/continous-axis/numeric-axis.js ***!
  \******************************************************************************/
/*! exports provided: interpolatorMap, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "interpolatorMap", function() { return interpolatorMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return NumericAxis; });
/* harmony import */ var _continous_axis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./continous-axis */ "./packages/muze-axis/src/cartesian-axis/continous-axis/continous-axis.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-axis/src/enums/constants.js");
/* harmony import */ var _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../enums/scale-type */ "./packages/muze-axis/src/enums/scale-type.js");
/* harmony import */ var _interpolators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interpolators */ "./packages/muze-axis/src/cartesian-axis/continous-axis/interpolators/index.js");
/* harmony import */ var _common_helper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common-helper */ "./packages/muze-axis/src/cartesian-axis/common-helper.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helper */ "./packages/muze-axis/src/cartesian-axis/continous-axis/helper.js");
/* harmony import */ var _axis_renderer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../axis-renderer */ "./packages/muze-axis/src/axis-renderer.js");
var _interpolatorMap;

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }








var interpolatorMap = (_interpolatorMap = {}, _defineProperty(_interpolatorMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["LOG"], _interpolators__WEBPACK_IMPORTED_MODULE_3__["LogInterpolator"]), _defineProperty(_interpolatorMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["POW"], _interpolators__WEBPACK_IMPORTED_MODULE_3__["PowInterpolator"]), _defineProperty(_interpolatorMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["LINEAR"], _interpolators__WEBPACK_IMPORTED_MODULE_3__["LinearInterpolator"]), _interpolatorMap);

var NumericAxis =
/*#__PURE__*/
function (_ContinousAxis) {
  _inherits(NumericAxis, _ContinousAxis);

  function NumericAxis(config, dependencies) {
    _classCallCheck(this, NumericAxis);

    config.tickFormat = config.tickFormat || function (val) {
      return val;
    };

    return _possibleConstructorReturn(this, _getPrototypeOf(NumericAxis).call(this, config, dependencies));
  }
  /**
  *
  *
  * @static
  * @returns
  * @memberof ContinousAxis
  */


  _createClass(NumericAxis, [{
    key: "createScale",

    /**
     *
     *
     * @returns
     * @memberof SimpleAxis
     */
    value: function createScale(config) {
      var base = config.base,
          padding = config.padding,
          interpolator = config.interpolator,
          exponent = config.exponent;
      var range = this.range();
      var InterpolatorCls = interpolatorMap[interpolator];
      this._interpolator = new InterpolatorCls();

      var scale = this._interpolator.createScale({
        padding: padding,
        exponent: exponent,
        base: base,
        range: range
      });

      scale = scale.nice();
      return scale;
    }
  }, {
    key: "getScaleValue",
    value: function getScaleValue(domainVal) {
      if (domainVal === null || domainVal === undefined) {
        return undefined;
      }

      return this._interpolator.getScaleValue(domainVal);
    }
    /**
     *
     *
     * @param {*} d
     *
     * @memberof SimpleAxis
     */

  }, {
    key: "domain",
    value: function domain() {
      if (arguments.length) {
        var domainVal = this._interpolator.sanitizeDomain(Object(_common_helper__WEBPACK_IMPORTED_MODULE_4__["getValidDomain"])(this, arguments.length <= 0 ? undefined : arguments[0]));

        Object(_helper__WEBPACK_IMPORTED_MODULE_5__["setContinousAxisDomain"])(this, domainVal);
        this.setAxisComponentDimensions();
        this.logicalSpace(null);
        return this;
      }

      return this._domain;
    }
    /**
     *
     *
     * @param {*} tickValues
     *
     * @memberof SimpleAxis
     */

  }, {
    key: "setTickConfig",
    value: function setTickConfig() {
      var _this$config = this.config(),
          tickValues = _this$config.tickValues,
          tickFormat = _this$config.tickFormat;

      var _this$renderConfig = this.renderConfig(),
          showInnerTicks = _this$renderConfig.showInnerTicks;

      var axis = this.axis();

      if (!showInnerTicks) {
        axis.tickValues([]);
        return this;
      }

      if (tickValues) {
        tickValues instanceof Array && this.axis().tickValues(tickValues);
        return this;
      }

      var newTickValues = this.getTickValues();
      axis.tickValues(newTickValues);
      var smartLabel = this.dependencies().labelManager;
      smartLabel.setStyle(this._tickLabelStyle);
      var smartTicks = newTickValues.map(function (e) {
        var text = tickFormat(e);
        var tickSpace = smartLabel.getOriSize(text);
        tickSpace.text = text;
        return tickSpace;
      });
      this.smartTicks(smartTicks);
      return this;
    }
    /**
        *
        *
        * @param {*} axisTickLabels
        * @param {*} labelWidth
        * @returns
        * @memberof SimpleAxis
        */

  }, {
    key: "setRotationConfig",
    value: function setRotationConfig(axisTickLabels, labelWidth) {
      var _this$config2 = this.config(),
          orientation = _this$config2.orientation;

      if (orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["TOP"] || orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"]) {
        var range = this.range();
        var length = Math.abs(range[0] - range[1]);
        this.config({
          labels: {
            rotation: 0
          }
        });

        if (length > 0 && axisTickLabels.length * (labelWidth + this._minTickDistance.width) > length) {
          this.config({
            labels: {
              rotation: -90
            }
          });
        }
      }

      return this;
    }
    /**
     *
     *
     * @param {*} tickValues
     * @returns
     * @memberof SimpleAxis
     */

  }, {
    key: "setTickValues",
    value: function setTickValues() {
      var _this$config3 = this.config(),
          tickValues = _this$config3.tickValues;

      var axis = this.axis();

      if (tickValues) {
        tickValues instanceof Array && this.axis().tickValues(tickValues);
        return this;
      }

      axis.tickValues(this.getTickValues());
      return this;
    }
    /**
     *
     *
     * @returns
     * @memberof SimpleAxis
     */

  }, {
    key: "getTickValues",
    value: function getTickValues() {
      var labelDim = 0;

      var _this$config4 = this.config(),
          orientation = _this$config4.orientation,
          tickValues = _this$config4.tickValues;

      var range = this.range();
      var axis = this.axis();
      var availableSpace = Math.abs(range[0] - range[1]);
      var labelProps = Object(_common_helper__WEBPACK_IMPORTED_MODULE_4__["getTickLabelInfo"])(this).largestLabelDim;

      if (tickValues) {
        return axis.scale().ticks(tickValues);
      }

      labelDim = labelProps[orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"] || orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["TOP"] ? 'width' : 'height'];
      return Object(_helper__WEBPACK_IMPORTED_MODULE_5__["getNumberOfTicks"])(availableSpace, labelDim, axis, this);
    }
    /**
     * This method is used to render the axis inside
     * the supplied svg container.
     *
     * @param {SVGElement} svg the svg element in which to render the path
     * @memberof SimpleAxis
     */

    /* istanbul ignore next */

  }, {
    key: "render",
    value: function render() {
      if (this.mount()) {
        Object(_helper__WEBPACK_IMPORTED_MODULE_5__["setFixedBaseline"])(this);
        Object(_axis_renderer__WEBPACK_IMPORTED_MODULE_6__["renderAxis"])(this); // set fixed baseline
      }

      return this;
    }
  }], [{
    key: "type",
    value: function type() {
      return _enums_constants__WEBPACK_IMPORTED_MODULE_1__["NUMERIC"];
    }
  }]);

  return NumericAxis;
}(_continous_axis__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/continous-axis/time-axis.js":
/*!***************************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/continous-axis/time-axis.js ***!
  \***************************************************************************/
/*! exports provided: adjustRange, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "adjustRange", function() { return adjustRange; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return TimeAxis; });
/* harmony import */ var _enums_scale_type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../enums/scale-type */ "./packages/muze-axis/src/enums/scale-type.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-axis/src/enums/constants.js");
/* harmony import */ var _continous_axis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./continous-axis */ "./packages/muze-axis/src/cartesian-axis/continous-axis/continous-axis.js");
/* harmony import */ var _common_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common-helper */ "./packages/muze-axis/src/cartesian-axis/common-helper.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helper */ "./packages/muze-axis/src/cartesian-axis/continous-axis/helper.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }






/**
 *
 *
 * @param {*} timeDiff
 * @param {*} range
 * @param {*} domain
 * @returns
 */

var getAxisOffset = function getAxisOffset(timeDiff, range, domain) {
  var pvr = Math.abs(range[1] - range[0]) / (domain[1] - domain[0]);
  var width = pvr * timeDiff;
  var avWidth = range[1] - range[0];
  var bars = avWidth / width;
  var barWidth = avWidth / (bars + 1);
  var diff = avWidth - barWidth * bars;
  return diff / 2;
};

var adjustRange = function adjustRange(minDiff, range, domain, orientation) {
  var diff = getAxisOffset(minDiff, range, domain);

  if (orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["TOP"] || orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"]) {
    range[0] += diff;
    range[1] -= diff;
  } else {
    range[0] -= diff;
    range[1] += diff;
  }

  return range;
};
/**
 *
 *
 * @export
 * @class TimeAxis
 * @extends {SimpleAxis}
 */

var TimeAxis =
/*#__PURE__*/
function (_ContinousAxis) {
  _inherits(TimeAxis, _ContinousAxis);

  function TimeAxis() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, TimeAxis);

    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
      params[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TimeAxis)).call.apply(_getPrototypeOf2, [this].concat(params)));
    _this._minDiff = Infinity;
    return _this;
  }
  /**
   *
   *
   * @static
   * @returns
   * @memberof TimeAxis
   */


  _createClass(TimeAxis, [{
    key: "createScale",

    /**
     *
     *
     * @param {*} range
     * @returns
     * @memberof TimeAxis
     */
    value: function createScale(range) {
      var scale = _get(_getPrototypeOf(TimeAxis.prototype), "createScale", this).call(this, range);

      scale = scale.nice();
      return scale;
    }
    /**
     *
     *
     * @returns
     * @memberof BandAxis
     */

  }, {
    key: "setTickConfig",
    value: function setTickConfig() {
      var smartTicks;
      var smartlabel;

      var _this$config = this.config(),
          tickValues = _this$config.tickValues;

      var _this$renderConfig = this.renderConfig(),
          labels = _this$renderConfig.labels;

      var _this$maxTickSpaces = this.maxTickSpaces(),
          availHeight = _this$maxTickSpaces.height,
          availWidth = _this$maxTickSpaces.width,
          noWrap = _this$maxTickSpaces.noWrap;

      var labelManager = this._dependencies.labelManager;
      var domain = this.getTickValues();
      tickValues && this.axis().tickValues(tickValues);

      var _getRotatedSpaces = Object(_common_helper__WEBPACK_IMPORTED_MODULE_3__["getRotatedSpaces"])(labels.rotation, availWidth, availHeight),
          width = _getRotatedSpaces.width,
          height = _getRotatedSpaces.height;

      smartTicks = tickValues || domain; // set the style on the shared label manager instance

      labelManager.setStyle(this._tickLabelStyle);

      if (domain && domain.length) {
        var values = tickValues || domain;

        var tickFormatter = this._tickFormatter(values);

        smartTicks = values.map(function (d, i) {
          labelManager.useEllipsesOnOverflow(true);
          smartlabel = labelManager.getSmartText(tickFormatter(d, i), width, height, noWrap);
          return labelManager.constructor.textToLines(smartlabel);
        });
      }

      this.smartTicks(smartTicks);
      return this;
    }
    /**
     *
     *
     * @param {*} diff
     *
     * @memberof TimeAxis
     */

  }, {
    key: "minDiff",
    value: function minDiff(diff) {
      this._minDiff = Math.min(this._minDiff, diff);
      return this;
    }
    /**
     *
     *
     * @returns
     * @memberof TimeAxis
     */

  }, {
    key: "getTickValues",
    value: function getTickValues() {
      return this.scale().ticks();
    }
  }, {
    key: "formatTickValue",
    value: function formatTickValue(val) {
      return this.scale().tickFormat()(val);
    }
  }, {
    key: "sanitizeTickFormatter",
    value: function sanitizeTickFormatter(value) {
      var _this2 = this;

      var tickFormat = value.tickFormat;

      if (tickFormat) {
        return function (ticks) {
          var rawTicks = ticks.map(function (t) {
            return t.getTime();
          });
          return function (val, i) {
            return tickFormat(_this2.formatTickValue(val), val.getTime(), i, rawTicks);
          };
        };
      }

      return function () {
        return function (val) {
          return _this2.formatTickValue(val);
        };
      };
    }
    /**
     *
     *
     * @param {*} diff
     * @returns
     * @memberof TimeAxis
     */

  }, {
    key: "setMinDiff",
    value: function setMinDiff(diff) {
      this._minDiff = Math.min(this._minDiff, diff);
      return this;
    }
    /**
     *
     *
     * @param {*} axisTickLabels
     * @param {*} labelWidth
     * @returns
     * @memberof BandAxis
     */

  }, {
    key: "setRotationConfig",
    value: function setRotationConfig(axisTickLabels, labelWidth) {
      var _this$config2 = this.config(),
          orientation = _this$config2.orientation;

      var range = this.range();
      var availSpace = Math.abs(range[0] - range[1]);
      this.config({
        labels: {
          rotation: 0,
          smartTicks: false
        }
      });

      if (orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["TOP"] || orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"]) {
        var smartWidth = this.smartTicks().reduce(function (acc, n) {
          return acc + n.width;
        }, 0); // set multiline config

        if (availSpace > 0 && axisTickLabels.length * labelWidth > availSpace) {
          if (availSpace && smartWidth * 1.25 < availSpace) {
            this.config({
              labels: {
                smartTicks: true
              }
            });
          }

          this.config({
            labels: {
              rotation: -90
            }
          });
        }
      }

      return this;
    }
    /**
    *
    *
    * @param {*} d
    *
    * @memberof SimpleAxis
    */

  }, {
    key: "domain",
    value: function domain() {
      if (arguments.length) {
        var domainValue = Object(_common_helper__WEBPACK_IMPORTED_MODULE_3__["getValidDomain"])(this, arguments.length <= 0 ? undefined : arguments[0]);
        Object(_helper__WEBPACK_IMPORTED_MODULE_4__["setContinousAxisDomain"])(this, domainValue);
        this.setAxisComponentDimensions();
        this.logicalSpace(null);
        return this;
      }

      return this._domain;
    }
  }], [{
    key: "type",
    value: function type() {
      return _enums_scale_type__WEBPACK_IMPORTED_MODULE_0__["TIME"];
    }
  }]);

  return TimeAxis;
}(_continous_axis__WEBPACK_IMPORTED_MODULE_2__["default"]);



/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/default-config.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/default-config.js ***!
  \*****************************************************************/
/*! exports provided: defaultConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultConfig", function() { return defaultConfig; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-axis/src/enums/constants.js");


/**
 *
 *
 */

var defaultConfig = {
  id: Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getUniqueId"])(),
  axisName: {
    defClassName: 'axis-name'
  },
  axisNamePadding: 12,
  base: 10,
  classPrefix: _enums_constants__WEBPACK_IMPORTED_MODULE_1__["CLASSPREFIX"],
  className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CLASSPREFIX"], "-axis"),
  exponent: 1,
  interpolator: 'linear',
  fixedBaseline: true,
  labels: {
    rotation: null,
    smartTicks: null
  },
  orientation: 'left',
  numberFormat: function numberFormat(val) {
    return val;
  },
  padding: 0.3,
  nice: true,
  numberOfTicks: 10,
  rotate: false,
  show: true,
  showAxisName: true,
  showInnerTicks: true,
  showOuterTicks: true,
  style: {},
  type: 'linear',
  tickFormat: null,
  tickValues: null,
  xOffset: 0,
  yOffset: 0
};

/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/index.js":
/*!********************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/index.js ***!
  \********************************************************/
/*! exports provided: ContinousAxis, NumericAxis, TimeAxis, BandAxis, SimpleAxis */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _continous_axis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./continous-axis */ "./packages/muze-axis/src/cartesian-axis/continous-axis/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ContinousAxis", function() { return _continous_axis__WEBPACK_IMPORTED_MODULE_0__["ContinousAxis"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NumericAxis", function() { return _continous_axis__WEBPACK_IMPORTED_MODULE_0__["NumericAxis"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TimeAxis", function() { return _continous_axis__WEBPACK_IMPORTED_MODULE_0__["TimeAxis"]; });

/* harmony import */ var _ordinal_axis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ordinal-axis */ "./packages/muze-axis/src/cartesian-axis/ordinal-axis/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BandAxis", function() { return _ordinal_axis__WEBPACK_IMPORTED_MODULE_1__["BandAxis"]; });

/* harmony import */ var _simple_axis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./simple-axis */ "./packages/muze-axis/src/cartesian-axis/simple-axis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleAxis", function() { return _simple_axis__WEBPACK_IMPORTED_MODULE_2__["default"]; });





/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/ordinal-axis/band-axis.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/ordinal-axis/band-axis.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return BandAxis; });
/* harmony import */ var _simple_axis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../simple-axis */ "./packages/muze-axis/src/cartesian-axis/simple-axis.js");
/* harmony import */ var _enums_scale_type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/scale-type */ "./packages/muze-axis/src/enums/scale-type.js");
/* harmony import */ var _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../enums/axis-orientation */ "./packages/muze-axis/src/enums/axis-orientation.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helper */ "./packages/muze-axis/src/cartesian-axis/ordinal-axis/helper.js");
/* harmony import */ var _common_helper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common-helper */ "./packages/muze-axis/src/cartesian-axis/common-helper.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }







var BandAxis =
/*#__PURE__*/
function (_SimpleAxis) {
  _inherits(BandAxis, _SimpleAxis);

  function BandAxis() {
    _classCallCheck(this, BandAxis);

    return _possibleConstructorReturn(this, _getPrototypeOf(BandAxis).apply(this, arguments));
  }

  _createClass(BandAxis, [{
    key: "createScale",

    /**
     *
     *
     * @param {*} range
     * @returns
     * @memberof BandAxis
     */
    value: function createScale(range) {
      var scale = _get(_getPrototypeOf(BandAxis.prototype), "createScale", this).call(this, range);

      var _this$config = this.config(),
          padding = _this$config.padding;

      if (typeof padding === 'number') {
        scale.padding(padding);
      }

      return scale;
    }
  }, {
    key: "getMinTickDifference",
    value: function getMinTickDifference() {
      return this.domain();
    }
    /**
     *
     *
     * @returns
     * @memberof BandAxis
     */

  }, {
    key: "getUnitWidth",
    value: function getUnitWidth() {
      return this.scale().bandwidth();
    }
    /**
     *
     *
     *
     * @memberof BandAxis
     */

  }, {
    key: "setTickConfig",
    value: function setTickConfig() {
      var smartTicks = '';
      var smartlabel;
      var domain = this.domain();
      var labelManager = this._dependencies.labelManager;

      var _this$config2 = this.config(),
          tickValues = _this$config2.tickValues,
          padding = _this$config2.padding;

      var _this$renderConfig = this.renderConfig(),
          labels = _this$renderConfig.labels;

      var _this$maxTickSpaces = this.maxTickSpaces(),
          availHeight = _this$maxTickSpaces.height,
          availWidth = _this$maxTickSpaces.width,
          noWrap = _this$maxTickSpaces.noWrap;

      var _getRotatedSpaces = Object(_common_helper__WEBPACK_IMPORTED_MODULE_4__["getRotatedSpaces"])(labels.rotation, availWidth, availHeight),
          width = _getRotatedSpaces.width,
          height = _getRotatedSpaces.height;

      tickValues && this.axis().tickValues(tickValues);
      smartTicks = tickValues || domain; // set the style on the shared label manager instance

      labelManager.setStyle(this._tickLabelStyle); // Update padding between plots

      if (typeof padding === 'number') {
        this.scale().padding(padding);
      }

      if (domain && domain.length) {
        var values = tickValues || domain;

        var tickFormatter = this._tickFormatter(values);

        smartTicks = values.map(function (d, i) {
          labelManager.useEllipsesOnOverflow(true);
          smartlabel = labelManager.getSmartText(tickFormatter(d, i), width, height, noWrap);
          return labelManager.constructor.textToLines(smartlabel);
        });
      }

      this.smartTicks(smartTicks);
      return this;
    }
    /**
         * Gets the space occupied by the axis
         *
         * @return {Object} object with details about size of the axis.
         * @memberof SimpleAxis
         */

  }, {
    key: "getLogicalSpace",
    value: function getLogicalSpace() {
      if (!this.logicalSpace()) {
        this.logicalSpace(Object(_helper__WEBPACK_IMPORTED_MODULE_3__["calculateBandSpace"])(this));
        Object(_common_helper__WEBPACK_IMPORTED_MODULE_4__["setOffset"])(this);
        this.logicalSpace();
      }

      return this.logicalSpace();
    }
    /**
     *
     *
     * @param {*} axisTickLabels
     * @param {*} labelWidth
     * @returns
     * @memberof BandAxis
     */

  }, {
    key: "setRotationConfig",
    value: function setRotationConfig(axisTickLabels, labelWidth) {
      var _this = this;

      var _this$config3 = this.config(),
          orientation = _this$config3.orientation;

      var range = this.range();
      var availSpace = Math.abs(range[0] - range[1]);
      this.config({
        labels: {
          rotation: 0,
          smartTicks: false
        }
      });

      if (orientation === _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_2__["TOP"] || orientation === _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_2__["BOTTOM"]) {
        var smartWidth = this.smartTicks().reduce(function (acc, n) {
          return acc + n.width + _this._minTickDistance.width;
        }, 0); // set multiline config

        if (availSpace > 0 && axisTickLabels.length * (labelWidth + this._minTickDistance.width) > availSpace) {
          if (availSpace && smartWidth < availSpace) {
            this.config({
              labels: {
                smartTicks: true
              }
            });
          } else {
            this.config({
              labels: {
                rotation: -90
              }
            });
          }
        }
      }

      return this;
    }
  }, {
    key: "formatTickValue",
    value: function formatTickValue(val) {
      return this.valueParser()(val);
    }
  }, {
    key: "sanitizeTickFormatter",
    value: function sanitizeTickFormatter(value) {
      var _this2 = this;

      var tickFormat = value.tickFormat;

      if (tickFormat) {
        return function (ticks) {
          return function (val, i) {
            return tickFormat(_this2.formatTickValue(val), val, i, ticks);
          };
        };
      }

      return function () {
        return function (val) {
          return _this2.formatTickValue(val);
        };
      };
    }
    /**
     *
     *
     * @returns
     * @memberof BandAxis
     */

  }, {
    key: "getTickValues",
    value: function getTickValues() {
      return this.axis().scale().domain();
    }
    /**
     *
     *
     * @returns
     * @memberof SimpleAxis
     */

  }, {
    key: "getTickSize",
    value: function getTickSize() {
      var _this$config4 = this.config(),
          showInnerTicks = _this$config4.showInnerTicks,
          showOuterTicks = _this$config4.showOuterTicks;

      var axis = this.axis();
      axis.tickSizeInner(showInnerTicks ? 6 : 0);
      axis.tickSizeOuter(showOuterTicks ? 6 : 0);
      return axis.tickSize();
    }
  }, {
    key: "invertExtent",
    value: function invertExtent(v1, v2) {
      return this.scale().invertExtent(v1, v2);
    }
    /**
     * Gets the nearest range value from the given range values.
     * @param {number} v1 Start range value
     * @param {number} v2 End range value
     * @return {Array} range values
     */

  }, {
    key: "getNearestRange",
    value: function getNearestRange(v1, v2) {
      var scale = this.scale();
      var range = scale.range();
      var reverse = range[0] > range[1];
      var extent = this.invertExtent(v1, v2);
      var p1 = scale(reverse ? extent[extent.length - 1] : extent[0]);
      var p2 = scale(reverse ? extent[0] : extent[extent.length - 1]) + scale.bandwidth();
      return [p1, p2];
    }
  }], [{
    key: "type",

    /**
    *
    *
    * @static
    * @returns
    * @memberof BandAxis
    */
    value: function type() {
      return _enums_scale_type__WEBPACK_IMPORTED_MODULE_1__["BAND"];
    }
  }]);

  return BandAxis;
}(_simple_axis__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/ordinal-axis/helper.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/ordinal-axis/helper.js ***!
  \**********************************************************************/
/*! exports provided: calculateBandSpace */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calculateBandSpace", function() { return calculateBandSpace; });
/* harmony import */ var _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../enums/axis-orientation */ "./packages/muze-axis/src/enums/axis-orientation.js");
/* harmony import */ var _common_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common-helper */ "./packages/muze-axis/src/cartesian-axis/common-helper.js");


/**
 * Calculates the logical space of the axis
 * @return {Object} Width and height occupied by the axis.
 */

var calculateBandSpace = function calculateBandSpace(context) {
  var range = context.range();
  var axisDimensions = context.getAxisDimensions();

  var _context$config = context.config(),
      orientation = _context$config.orientation;

  var _context$renderConfig = context.renderConfig(),
      show = _context$renderConfig.show;

  var largestTickDimensions = axisDimensions.largestTickDimensions,
      axisTicks = axisDimensions.axisTicks,
      allTickDimensions = axisDimensions.allTickDimensions;
  var largestDimHeight = largestTickDimensions.height;
  var minTickWidth = context._minTickDistance.width;

  if (orientation === _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_0__["TOP"] || orientation === _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"]) {
    var _getHorizontalAxisSpa = Object(_common_helper__WEBPACK_IMPORTED_MODULE_1__["getHorizontalAxisSpace"])(context, axisDimensions, range),
        _width = _getHorizontalAxisSpa.width,
        _height = _getHorizontalAxisSpa.height;

    if (!_width || _width === 0) {
      _width = allTickDimensions.reduce(function (t, n) {
        return t + Math.min(n.width, n.height) + minTickWidth;
      }, 0);
    }

    if (show === false) {
      _height = 0;
      _width = 0;
    }

    return {
      width: _width,
      height: _height
    };
  }

  var _getVerticalAxisSpace = Object(_common_helper__WEBPACK_IMPORTED_MODULE_1__["getVerticalAxisSpace"])(context, axisDimensions, range),
      width = _getVerticalAxisSpace.width,
      height = _getVerticalAxisSpace.height;

  if (!height || height === 0) {
    height = axisTicks.length * (largestDimHeight + context._minTickDistance.height) + largestDimHeight;
  }

  if (show === false) {
    width = 0;
  }

  return {
    width: width,
    height: height
  };
};

/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/ordinal-axis/index.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/ordinal-axis/index.js ***!
  \*********************************************************************/
/*! exports provided: BandAxis */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _band_axis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./band-axis */ "./packages/muze-axis/src/cartesian-axis/ordinal-axis/band-axis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BandAxis", function() { return _band_axis__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/props.js":
/*!********************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/props.js ***!
  \********************************************************/
/*! exports provided: PROPS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PROPS", function() { return PROPS; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _common_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common-helper */ "./packages/muze-axis/src/cartesian-axis/common-helper.js");


var PROPS = {
  axis: {},
  availableSpace: {},
  axisDimensions: {},
  axisComponentDimensions: {},
  config: {
    sanitization: function sanitization(context, value) {
      var oldConfig = Object.assign({}, context._config || {});
      var mockedOldConfig = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, oldConfig);
      value = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(mockedOldConfig, value);
      value.axisNamePadding = Math.max(value.axisNamePadding, 0);
      var shouldAxesScaleUpdate = Object(_common_helper__WEBPACK_IMPORTED_MODULE_1__["hasAxesConfigChanged"])(value, oldConfig, ['interpolator', 'exponent', 'base', 'orientation']);
      var tickFormatter = context.sanitizeTickFormatter(value);

      if (shouldAxesScaleUpdate) {
        context._scale = context.createScale(value);
        context._axis = context.createAxis(value);
      }

      context._tickFormatter = function (ticks) {
        return tickFormatter(ticks);
      };

      var _value = value,
          labels = _value.labels,
          show = _value.show,
          showInnerTicks = _value.showInnerTicks,
          showOuterTicks = _value.showOuterTicks,
          showAxisName = _value.showAxisName;
      context.renderConfig({
        labels: labels,
        show: show,
        showInnerTicks: showInnerTicks,
        showOuterTicks: showOuterTicks,
        showAxisName: showAxisName
      });
      return value;
    }
  },
  renderConfig: {
    sanitization: function sanitization(context, value) {
      var oldConfig = Object.assign({}, context._renderConfig || {});
      value = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(oldConfig, value);
      return value;
    }
  },
  logicalSpace: {},
  mount: {},
  range: {
    sanitization: function sanitization(context, value) {
      context.scale().range(value);
      context.logicalSpace(null);
      return value;
    }
  },
  scale: {},
  smartTicks: {},
  tickSize: {},
  maxTickSpaces: {},
  valueParser: {
    defaultValue: function defaultValue(val) {
      return val;
    }
  }
};

/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/simple-axis.js":
/*!**************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/simple-axis.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SimpleAxis; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _scale_creator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../scale-creator */ "./packages/muze-axis/src/scale-creator.js");
/* harmony import */ var _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/axis-orientation */ "./packages/muze-axis/src/enums/axis-orientation.js");
/* harmony import */ var _cartesian_axis_default_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../cartesian-axis/default-config */ "./packages/muze-axis/src/cartesian-axis/default-config.js");
/* harmony import */ var _axis_renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../axis-renderer */ "./packages/muze-axis/src/axis-renderer.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-axis/src/enums/constants.js");
/* harmony import */ var _space_setter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./space-setter */ "./packages/muze-axis/src/cartesian-axis/space-setter.js");
/* harmony import */ var _common_helper__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./common-helper */ "./packages/muze-axis/src/cartesian-axis/common-helper.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./props */ "./packages/muze-axis/src/cartesian-axis/props.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }











var SimpleAxis =
/*#__PURE__*/
function () {
  /**
   * Creates an instance of SimpleAxis.
   * @memberof SimpleAxis
   */
  function SimpleAxis(config, dependencies) {
    _classCallCheck(this, SimpleAxis);

    this._id = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getUniqueId"])();
    this._dependencies = dependencies;
    this._mount = null;
    this._range = [];
    this._domain = [];
    this._domainLock = false;
    this._axisDimensions = {};
    this._smartTicks = [];
    var defCon = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, this.constructor.defaultConfig());
    var simpleConfig = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(defCon, config);
    var bodyElem = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])('body');
    var classPrefix = simpleConfig.classPrefix;
    this._tickLabelStyle = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getSmartComputedStyle"])(bodyElem, "".concat(classPrefix, "-ticks"));
    this._axisNameStyle = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getSmartComputedStyle"])(bodyElem, "".concat(classPrefix, "-axis-name"));
    dependencies.labelManager.setStyle(this._tickLabelStyle);
    var dist = dependencies.labelManager.getOriSize('w');
    this._minTickDistance = {
      width: dist.width * 3 / 4,
      height: dist.height / 2
    };
    this._minTickSpace = dependencies.labelManager.getOriSize('www');
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(this, _props__WEBPACK_IMPORTED_MODULE_8__["PROPS"]);
    this.config(simpleConfig);
    this._scale = this.createScale(this._config);
    this._axis = this.createAxis(this._config);
    this._animationDonePromises = [];
  }
  /**
   * Returns the default configuration of simple axis
   *  @return {Object} default configurations
   */


  _createClass(SimpleAxis, [{
    key: "createScale",

    /**
     *
     *
     *
     * @memberof SimpleAxis
     */
    value: function createScale(config) {
      var base = config.base,
          padding = config.padding,
          interpolator = config.interpolator,
          exponent = config.exponent;
      var range = this.range();

      var scale = Object(_scale_creator__WEBPACK_IMPORTED_MODULE_1__["createScale"])({
        padding: padding,
        interpolator: interpolator,
        exponent: exponent,
        base: base,
        range: range,
        type: this.constructor.type()
      });

      return scale;
    }
  }, {
    key: "setRotationConfig",
    value: function setRotationConfig() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }, {
    key: "getTickValues",
    value: function getTickValues() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
    * This method is used to set the space availiable to render
    * the SimpleCell.
    *
    * @param {number} width The width of SimpleCell.
    * @param {number} height The height of SimpleCell.
    * @memberof AxisCell
    */

  }, {
    key: "setAvailableSpace",
    value: function setAvailableSpace() {
      var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      var height = arguments.length > 1 ? arguments[1] : undefined;
      var padding = arguments.length > 2 ? arguments[2] : undefined;
      var isOffset = arguments.length > 3 ? arguments[3] : undefined;
      var labelConfig = {};

      var _this$config = this.config(),
          orientation = _this$config.orientation;

      var axisType = this.constructor.type();
      this.availableSpace({
        width: width,
        height: height,
        padding: padding
      });

      if (orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["TOP"] || orientation === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["BOTTOM"]) {
        labelConfig = Object(_space_setter__WEBPACK_IMPORTED_MODULE_6__["spaceSetter"])(this, {
          isOffset: isOffset
        })[axisType].x();
      } else {
        labelConfig = Object(_space_setter__WEBPACK_IMPORTED_MODULE_6__["spaceSetter"])(this, {
          isOffset: isOffset
        })[axisType].y();
      } // Set config


      this.renderConfig({
        labels: labelConfig
      });
      this.setTickConfig();
      return this;
    }
  }, {
    key: "getLogicalSpace",
    value: function getLogicalSpace() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }, {
    key: "setTickConfig",
    value: function setTickConfig() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }, {
    key: "getTickSize",
    value: function getTickSize() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }, {
    key: "getMinTickDifference",
    value: function getMinTickDifference() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     *
     *
     *
     * @memberof SimpleAxis
     */

  }, {
    key: "dependencies",
    value: function dependencies() {
      return this._dependencies;
    }
  }, {
    key: "domain",
    value: function domain() {
      if (arguments.length) {
        var domainValue = Object(_common_helper__WEBPACK_IMPORTED_MODULE_7__["getValidDomain"])(this, arguments.length <= 0 ? undefined : arguments[0]);
        this.scale().domain(domainValue);
        this._domain = this.scale().domain();
        this.setAxisComponentDimensions();
        this.logicalSpace(null);
        return this;
      }

      return this._domain;
    }
  }, {
    key: "resetDomain",
    value: function resetDomain() {
      this._domain = [];
      return this;
    }
  }, {
    key: "setAxisComponentDimensions",
    value: function setAxisComponentDimensions() {
      this.axisComponentDimensions(Object(_common_helper__WEBPACK_IMPORTED_MODULE_7__["getAxisComponentDimensions"])(this));
    }
  }, {
    key: "sanitizeTickFormatter",
    value: function sanitizeTickFormatter(value) {
      var tickFormat = value.tickFormat,
          numberFormat = value.numberFormat;

      if (tickFormat) {
        return function (ticks) {
          return function (val, i) {
            return tickFormat(numberFormat(val), val, i, ticks);
          };
        };
      }

      return function () {
        return function (val) {
          return numberFormat(val);
        };
      };
    }
  }, {
    key: "resetLogicalSpace",
    value: function resetLogicalSpace() {
      this.logicalSpace(null);
      this.range([]);

      var _this$config2 = this.config(),
          labels = _this$config2.labels,
          show = _this$config2.show,
          showInnerTicks = _this$config2.showInnerTicks,
          showOuterTicks = _this$config2.showOuterTicks,
          showAxisName = _this$config2.showAxisName;

      this.renderConfig({
        labels: labels,
        show: show,
        showInnerTicks: showInnerTicks,
        showOuterTicks: showOuterTicks,
        showAxisName: showAxisName
      });
    }
  }, {
    key: "getFormattedText",
    value: function getFormattedText(text, index, axisTicks) {
      var formatter = this._tickFormatter;
      return formatter(axisTicks)(text, index);
    }
    /**
     *
     *
     *
     * @memberof SimpleAxis
     */

  }, {
    key: "createAxis",
    value: function createAxis(config) {
      var orientation = config.orientation;
      var axisClass = _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_2__["axisOrientationMap"][orientation];

      if (axisClass) {
        var axis = axisClass(this.scale());
        return axis;
      }

      return null;
    }
  }, {
    key: "getScaleValue",
    value: function getScaleValue(domainVal) {
      if (domainVal === null || domainVal === undefined) {
        return undefined;
      }

      return this.scale()(domainVal);
    }
    /**
     * Gets the space occupied by the parts of an axis
     *
     * @return {Object} object with details about sizes of the axis.
     * @memberof SimpleAxis
     */

  }, {
    key: "getAxisDimensions",
    value: function getAxisDimensions() {
      for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
        params[_key] = arguments[_key];
      }

      this.axisDimensions(_common_helper__WEBPACK_IMPORTED_MODULE_7__["computeAxisDimensions"].apply(void 0, [this].concat(params)));
      return this.axisDimensions();
    }
    /**
     * Returns the value from the domain when given a value from the range.
     * @param {number} value Value from the range.
     * @return {number} Value
     */

  }, {
    key: "invert",
    value: function invert(value) {
      return this.scale().invert(value);
    }
    /**
     * Gets the nearest range value from the given range values.
     * @param {number} v1 Start range value
     * @param {number} v2 End range value
     *
     * @return {Array} range values
     */

  }, {
    key: "getNearestRange",
    value: function getNearestRange(v1, v2) {
      return [v1, v2];
    }
  }, {
    key: "invertExtent",
    value: function invertExtent(v1, v2) {
      return [this.invert(v1), this.invert(v2)];
    }
  }, {
    key: "getFormattedTickValues",
    value: function getFormattedTickValues(tickValues) {
      return tickValues;
    }
    /**
     * This method returns the width in pixels for one
     * unit along the axis. It is only applicable to band scale
     * and returns undefined for other scale type.
     *
     * @return {number} the width of one band along band scale axis
     * @memberof SimpleAxis
     */

  }, {
    key: "getUnitWidth",
    value: function getUnitWidth() {
      return 0;
    }
    /**
     * Returns the id of the axis.
     * @return {string} Unique identifier of the axis.
     */

  }, {
    key: "render",

    /**
     * This method is used to render the axis inside
     * the supplied svg container.
     *
     * @param {SVGElement} svg the svg element in which to render the path
     * @memberof SimpleAxis
     */
    value: function render() {
      if (this.mount()) {
        this.setTickConfig();
        Object(_axis_renderer__WEBPACK_IMPORTED_MODULE_4__["renderAxis"])(this);
      }

      return this;
    }
    /**
     *
     *
     *
     * @memberof SimpleAxis
     */

  }, {
    key: "remove",
    value: function remove() {
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this.mount()).remove();
      return this;
    }
    /**
     *
     *
     *
     * @memberof SimpleAxis
     */

  }, {
    key: "isReverse",
    value: function isReverse() {
      var range = this.range();
      return range[0] > range[1];
    }
    /**
     *
     *
     *
     * @memberof SimpleAxis
     */

  }, {
    key: "getPixelToValueRatio",
    value: function getPixelToValueRatio() {
      var scale = this.scale();
      var range = scale.range();
      var domain = scale.domain();
      return Math.abs(range[1] - range[0]) / (domain[1] - domain[0]);
    }
    /**
    * Notifies when all animations/transitions of the axis are completed.
    *
    * @public
    * @return {Promise} Returns a promise to notify the animation completion.
    */

  }, {
    key: "animationDone",
    value: function animationDone() {
      return Promise.all(this._animationDonePromises);
    }
  }, {
    key: "registerAnimationDoneHook",
    value: function registerAnimationDoneHook() {
      var resolveFn;
      var promise = new Promise(function (resolve) {
        resolveFn = resolve;
      });

      this._animationDonePromises.push(promise);

      return function () {
        resolveFn();
      };
    }
  }, {
    key: "id",
    get: function get() {
      return this._id;
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return _cartesian_axis_default_config__WEBPACK_IMPORTED_MODULE_3__["defaultConfig"];
    }
  }]);

  return SimpleAxis;
}();



/***/ }),

/***/ "./packages/muze-axis/src/cartesian-axis/space-setter.js":
/*!***************************************************************!*\
  !*** ./packages/muze-axis/src/cartesian-axis/space-setter.js ***!
  \***************************************************************/
/*! exports provided: adjustRange, spaceSetter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "adjustRange", function() { return adjustRange; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "spaceSetter", function() { return spaceSetter; });
/* harmony import */ var _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums/axis-orientation */ "./packages/muze-axis/src/enums/axis-orientation.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



var setAxisRange = function setAxisRange(context, type, rangeBounds, offset) {
  context.range(rangeBounds);
  offset && context.config(_defineProperty({}, "".concat(type, "Offset"), offset));
};

var getAxisOffset = function getAxisOffset(timeDiff, range, domain) {
  var pvr = Math.abs(range[1] - range[0]) / (domain[1] - domain[0]);
  var width = pvr * timeDiff;
  var avWidth = range[1] - range[0];
  var bars = avWidth / width;
  var barWidth = avWidth / (bars + 1);
  var diff = avWidth - barWidth * bars;
  return diff / 2;
};

var adjustRange = function adjustRange(minDiff, range, domain, orientation) {
  var diff = getAxisOffset(minDiff, range, domain);

  if (orientation === _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_0__["TOP"] || orientation === _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"]) {
    range[0] += diff;
    range[1] -= diff;
  } else {
    range[0] -= diff;
    range[1] += diff;
  }

  return range;
};
var spaceSetter = function spaceSetter(context, spaceConfig) {
  var tickInterval;
  var heightForTicks;

  var _context$availableSpa = context.availableSpace(),
      availWidth = _context$availableSpa.width,
      availHeight = _context$availableSpa.height,
      padding = _context$availableSpa.padding;

  var top = padding.top,
      left = padding.left,
      bottom = padding.bottom,
      right = padding.right;
  var isOffset = spaceConfig.isOffset;

  var _context$renderConfig = context.renderConfig(),
      showAxisName = _context$renderConfig.showAxisName,
      labels = _context$renderConfig.labels;

  var rotation = labels.rotation;

  var _context$config2 = context.config(),
      orientation = _context$config2.orientation,
      fixedBaseline = _context$config2.fixedBaseline,
      axisNamePadding = _context$config2.axisNamePadding,
      tickValues = _context$config2.tickValues;

  var _context$getAxisDimen = context.getAxisDimensions(),
      tickDimensions = _context$getAxisDimen.tickDimensions,
      allTickDimensions = _context$getAxisDimen.allTickDimensions,
      axisNameDimensions = _context$getAxisDimen.axisNameDimensions,
      tickSize = _context$getAxisDimen.tickSize;

  var tickDimHeight = tickDimensions.height,
      tickDimWidth = tickDimensions.width;
  var namePadding = showAxisName ? axisNamePadding : 0;
  var labelConfig = {
    smartTicks: true,
    rotation: labels.rotation
  };
  var minTickDistance = context._minTickDistance;
  var minTickSpace = context._minTickSpace;
  var minDiff = context._minDiff;
  var domain = context.domain();
  var axisNameHeight = axisNameDimensions.height;
  var minWidthBetweenTicks = minTickDistance.width;
  var minTickWidth = minTickSpace.width;
  var minTickHeight = minTickSpace.height;
  return {
    time: {
      x: function x() {
        var noOfTicks = context.getTickValues().length; // Get the Tick Interval

        tickInterval = (availWidth - (noOfTicks - 1) * minWidthBetweenTicks) / noOfTicks; // Get height for ticks

        heightForTicks = availHeight - axisNameHeight - tickSize - namePadding;

        if (tickInterval < minTickWidth && rotation !== 0) {
          // set smart ticks and rotation config
          labelConfig.rotation = labels.rotation === null ? -90 : rotation; // Remove ticks if not enough height

          if (tickInterval < minTickHeight) {
            heightForTicks = availHeight;
            tickInterval = minTickHeight;
            context.renderConfig({
              showInnerTicks: false,
              showOuterTicks: false
            });
          }
        }

        if (availHeight < axisNameHeight) {
          context.renderConfig({
            show: false
          });
        } // set range for axis


        setAxisRange(context, 'y', adjustRange(minDiff, [0, availWidth - left - right], domain, orientation), isOffset ? availHeight : null);
        context.maxTickSpaces({
          width: tickInterval,
          height: heightForTicks,
          noWrap: rotation !== null
        });
        return labelConfig;
      },
      y: function y() {
        var widthForTicks = availWidth;
        var tickShifter = tickDimHeight / 2;
        setAxisRange(context, 'x', adjustRange(minDiff, [availHeight - top - bottom - tickShifter, tickShifter], domain, orientation), isOffset ? availWidth : null);

        if (availWidth - axisNameHeight - namePadding <= minWidthBetweenTicks) {
          widthForTicks = 0;
          context.renderConfig({
            showInnerTicks: false,
            showOuterTicks: false
          });
        }

        context.maxTickSpaces({
          width: widthForTicks,
          height: availHeight,
          noWrap: true
        });

        if (availWidth < axisNameHeight) {
          context.renderConfig({
            show: false
          });
        }

        return labelConfig;
      }
    },
    band: {
      x: function x() {
        setAxisRange(context, 'y', [0, availWidth - left - right], isOffset ? availHeight : null);
        var range = context.range(); // Get Tick Interval

        tickInterval = (range[1] - range[0]) / (tickValues || domain).length - minWidthBetweenTicks; // Get height available for ticks

        heightForTicks = availHeight - axisNameHeight - tickSize - namePadding;

        if (tickInterval < minTickWidth && rotation !== 0) {
          // set smart ticks and rotation config
          labelConfig.rotation = rotation === null ? -90 : rotation;
          labelConfig.smartTicks = false; // Ticks with overlapping height

          if (tickInterval < minTickHeight) {
            heightForTicks = 0;
            tickInterval = 0;
            context.renderConfig({
              showInnerTicks: false,
              showOuterTicks: false
            });
            context.range([minTickHeight / 2, availWidth - minTickHeight / 2]);
          }
        } else if (tickValues) {
          var interval = availWidth / domain.length - minWidthBetweenTicks;

          if (interval < minTickWidth) {
            context.range([minTickHeight / 2, availWidth - minTickHeight / 2]);
          }
        }

        if (availHeight < axisNameHeight) {
          context.renderConfig({
            show: false,
            showInnerTicks: false,
            showOuterTicks: false
          });
        }

        context.maxTickSpaces({
          width: tickInterval,
          height: heightForTicks,
          noWrap: rotation !== null
        });
        return labelConfig;
      },
      y: function y() {
        setAxisRange(context, 'x', [availHeight - bottom, top], isOffset ? availWidth : null);
        var widthForTicks = availWidth - axisNameHeight - tickSize - namePadding;

        if (widthForTicks <= minWidthBetweenTicks) {
          widthForTicks = 0;
          context.renderConfig({
            showInnerTicks: false,
            showOuterTicks: false
          });
        }

        context.maxTickSpaces({
          width: widthForTicks,
          height: availHeight,
          noWrap: true
        });

        if (availWidth < axisNameHeight) {
          context.renderConfig({
            show: false
          });
        }

        return labelConfig;
      }
    },
    numeric: {
      x: function x() {
        labelConfig.smartTicks = false;
        var tickShifter = tickDimWidth / 2;
        var baseline = fixedBaseline ? 0 : tickShifter;
        setAxisRange(context, 'y', [baseline + left, availWidth - right - tickShifter], isOffset ? availHeight : null);
        var range = context.range(); // Get Tick widths and available space

        var totalTickWidth = allTickDimensions.length * (tickDimWidth + minWidthBetweenTicks);
        var availableWidth = range[1] - range[0]; // Rotate labels if not enough width

        if (availableWidth < totalTickWidth && labels.rotation !== null) {
          if (availHeight - tickDimWidth - namePadding - tickSize > axisNameHeight) {
            labelConfig.rotation = null;
            context.renderConfig({
              showInnerTicks: true,
              showAxisName: true
            });
          } else {
            labelConfig.rotation = -90;
            context.renderConfig({
              showInnerTicks: true,
              showAxisName: availHeight - tickDimWidth - namePadding - tickSize > axisNameHeight
            });
          }
        }

        if (availHeight < axisNameHeight) {
          context.renderConfig({
            show: false
          });
        }

        return labelConfig;
      },
      y: function y() {
        labelConfig.smartTicks = false;
        var tickShifter = tickDimensions.height / 2;
        var baseline = fixedBaseline ? 1 : tickShifter;
        setAxisRange(context, 'x', [availHeight - bottom - baseline, tickShifter + top], isOffset ? availWidth : null); // Remove display of ticks if no space is left

        if (availWidth < tickDimWidth + axisNameHeight + namePadding) {
          context.renderConfig({
            showInnerTicks: false
          });

          if (availWidth < axisNameHeight) {
            context.renderConfig({
              show: false
            });
          }
        }

        return labelConfig;
      }
    }
  };
};

/***/ }),

/***/ "./packages/muze-axis/src/data-type-scale-map.js":
/*!*******************************************************!*\
  !*** ./packages/muze-axis/src/data-type-scale-map.js ***!
  \*******************************************************/
/*! exports provided: dataTypeScaleMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dataTypeScaleMap", function() { return dataTypeScaleMap; });
/* harmony import */ var _enums_scale_type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./enums/scale-type */ "./packages/muze-axis/src/enums/scale-type.js");
var _dataTypeScaleMap;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


var DATA_TYPES = {
  DIMENSION: 'dimension',
  CATEGORICAL: 'categorical',
  MEASURE: 'measure',
  TEMPORAL: 'temporal'
};
/**
 * Map of DataModel types to associated field types.
 */

var dataTypeScaleMap = (_dataTypeScaleMap = {}, _defineProperty(_dataTypeScaleMap, DATA_TYPES.DIMENSION, _enums_scale_type__WEBPACK_IMPORTED_MODULE_0__["BAND"]), _defineProperty(_dataTypeScaleMap, DATA_TYPES.MEASURE, _enums_scale_type__WEBPACK_IMPORTED_MODULE_0__["LINEAR"]), _defineProperty(_dataTypeScaleMap, DATA_TYPES.TEMPORAL, _enums_scale_type__WEBPACK_IMPORTED_MODULE_0__["TIME"]), _dataTypeScaleMap);

/***/ }),

/***/ "./packages/muze-axis/src/enums/axis-orientation.js":
/*!**********************************************************!*\
  !*** ./packages/muze-axis/src/enums/axis-orientation.js ***!
  \**********************************************************/
/*! exports provided: BOTTOM, TOP, LEFT, RIGHT, axisOrientationMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BOTTOM", function() { return BOTTOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOP", function() { return TOP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LEFT", function() { return LEFT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RIGHT", function() { return RIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "axisOrientationMap", function() { return axisOrientationMap; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/axis-orientation */ "./packages/muze-axis/src/enums/axis-orientation.js");
var _axisOrientationMap;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/**
 * @module Axis
 * This file declares a class that is used to render an axis to add  meaning to
 * plots.
 */


/**
 * @module Axis
 * This file exports constants that are used to reference axis orientations
 * in a consistent manner.
 */

var BOTTOM = 'bottom';
var TOP = 'top';
var LEFT = 'left';
var RIGHT = 'right';
/**
  * This object is used to associate the axis orientation with the d3 class
  * used to represent that axis.
  */

var axisOrientationMap = (_axisOrientationMap = {}, _defineProperty(_axisOrientationMap, _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__["LEFT"], muze_utils__WEBPACK_IMPORTED_MODULE_0__["Symbols"].axisLeft), _defineProperty(_axisOrientationMap, _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"], muze_utils__WEBPACK_IMPORTED_MODULE_0__["Symbols"].axisBottom), _defineProperty(_axisOrientationMap, _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__["RIGHT"], muze_utils__WEBPACK_IMPORTED_MODULE_0__["Symbols"].axisRight), _defineProperty(_axisOrientationMap, _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_1__["TOP"], muze_utils__WEBPACK_IMPORTED_MODULE_0__["Symbols"].axisTop), _axisOrientationMap);

/***/ }),

/***/ "./packages/muze-axis/src/enums/constants.js":
/*!***************************************************!*\
  !*** ./packages/muze-axis/src/enums/constants.js ***!
  \***************************************************/
/*! exports provided: CLASSPREFIX, CONTINOUS, DISCRETE, SEQUENTIAL, ORDINAL, LINEAR, THRESHOLD, QUANTIZE, QUANTILE, RETINAL, COLOR, SHAPE, SIZE, DOMAIN, BAND, TIME, HIDDEN, NUMBER, BOTTOM, TOP, LEFT, RIGHT, RGB, HEX, HSLA, HSL, NUMERIC */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLASSPREFIX", function() { return CLASSPREFIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CONTINOUS", function() { return CONTINOUS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DISCRETE", function() { return DISCRETE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SEQUENTIAL", function() { return SEQUENTIAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ORDINAL", function() { return ORDINAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINEAR", function() { return LINEAR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "THRESHOLD", function() { return THRESHOLD; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QUANTIZE", function() { return QUANTIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QUANTILE", function() { return QUANTILE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RETINAL", function() { return RETINAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLOR", function() { return COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SHAPE", function() { return SHAPE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SIZE", function() { return SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DOMAIN", function() { return DOMAIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BAND", function() { return BAND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TIME", function() { return TIME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HIDDEN", function() { return HIDDEN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NUMBER", function() { return NUMBER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BOTTOM", function() { return BOTTOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOP", function() { return TOP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LEFT", function() { return LEFT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RIGHT", function() { return RIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RGB", function() { return RGB; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HEX", function() { return HEX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HSLA", function() { return HSLA; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HSL", function() { return HSL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NUMERIC", function() { return NUMERIC; });
var CLASSPREFIX = 'muze';
var CONTINOUS = 'continous';
var DISCRETE = 'discrete';
var SEQUENTIAL = 'sequential';
var ORDINAL = 'ordinal';
var LINEAR = 'linear';
var THRESHOLD = 'threshold';
var QUANTIZE = 'quantize';
var QUANTILE = 'quantile';
var RETINAL = 'retinal';
var COLOR = 'color';
var SHAPE = 'shape';
var SIZE = 'size';
var DOMAIN = 'domain';
var BAND = 'band';
var TIME = 'temporal';
var HIDDEN = 'hidden';
var NUMBER = 'number';
var BOTTOM = 'bottom';
var TOP = 'top';
var LEFT = 'left';
var RIGHT = 'right';
var RGB = 'rgb';
var HEX = 'hex';
var HSLA = 'hsla';
var HSL = 'hsl';
var NUMERIC = 'numeric';

/***/ }),

/***/ "./packages/muze-axis/src/enums/scale-type.js":
/*!****************************************************!*\
  !*** ./packages/muze-axis/src/enums/scale-type.js ***!
  \****************************************************/
/*! exports provided: LINEAR, BAND, TIME, COLOR, ORDINAL, QUANTIZE, QUANTILE, LOG, POW, IDENTITY, SEQUENTIAL, THRESHOLD */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINEAR", function() { return LINEAR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BAND", function() { return BAND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TIME", function() { return TIME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLOR", function() { return COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ORDINAL", function() { return ORDINAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QUANTIZE", function() { return QUANTIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QUANTILE", function() { return QUANTILE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LOG", function() { return LOG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POW", function() { return POW; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDENTITY", function() { return IDENTITY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SEQUENTIAL", function() { return SEQUENTIAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "THRESHOLD", function() { return THRESHOLD; });
/**
 * @module axis
 * This file exports constants used to reference scale type
 * consistently throughout the project.
 */
var LINEAR = 'linear';
var BAND = 'band';
var TIME = 'temporal';
var COLOR = 'color';
var ORDINAL = 'ordinal';
var QUANTIZE = 'quantize';
var QUANTILE = 'quantile';
var LOG = 'log';
var POW = 'pow';
var IDENTITY = 'identity';
var SEQUENTIAL = 'sequential';
var THRESHOLD = 'threshold';

/***/ }),

/***/ "./packages/muze-axis/src/helper.js":
/*!******************************************!*\
  !*** ./packages/muze-axis/src/helper.js ***!
  \******************************************/
/*! exports provided: treatNullMeasures */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "treatNullMeasures", function() { return treatNullMeasures; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");

var treatNullMeasures = function treatNullMeasures(domainVal, scaledVal, minDomainScaledVal) {
  if (domainVal instanceof muze_utils__WEBPACK_IMPORTED_MODULE_0__["InvalidAwareTypes"]) {
    return minDomainScaledVal;
  }

  return scaledVal;
};

/***/ }),

/***/ "./packages/muze-axis/src/index.js":
/*!*****************************************!*\
  !*** ./packages/muze-axis/src/index.js ***!
  \*****************************************/
/*! exports provided: SimpleAxis, ContinousAxis, NumericAxis, BandAxis, TimeAxis, RetinalAxis, ColorAxis, SizeAxis, ShapeAxis, dataTypeScaleMap, AxisOrientation, ScaleType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./enums/axis-orientation */ "./packages/muze-axis/src/enums/axis-orientation.js");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "AxisOrientation", function() { return _enums_axis_orientation__WEBPACK_IMPORTED_MODULE_0__; });
/* harmony import */ var _enums_scale_type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enums/scale-type */ "./packages/muze-axis/src/enums/scale-type.js");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "ScaleType", function() { return _enums_scale_type__WEBPACK_IMPORTED_MODULE_1__; });
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./styles.scss */ "./packages/muze-axis/src/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _cartesian_axis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cartesian-axis */ "./packages/muze-axis/src/cartesian-axis/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleAxis", function() { return _cartesian_axis__WEBPACK_IMPORTED_MODULE_3__["SimpleAxis"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ContinousAxis", function() { return _cartesian_axis__WEBPACK_IMPORTED_MODULE_3__["ContinousAxis"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NumericAxis", function() { return _cartesian_axis__WEBPACK_IMPORTED_MODULE_3__["NumericAxis"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BandAxis", function() { return _cartesian_axis__WEBPACK_IMPORTED_MODULE_3__["BandAxis"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TimeAxis", function() { return _cartesian_axis__WEBPACK_IMPORTED_MODULE_3__["TimeAxis"]; });

/* harmony import */ var _retinal_axis__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./retinal-axis */ "./packages/muze-axis/src/retinal-axis/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RetinalAxis", function() { return _retinal_axis__WEBPACK_IMPORTED_MODULE_4__["RetinalAxis"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ColorAxis", function() { return _retinal_axis__WEBPACK_IMPORTED_MODULE_4__["ColorAxis"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SizeAxis", function() { return _retinal_axis__WEBPACK_IMPORTED_MODULE_4__["SizeAxis"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ShapeAxis", function() { return _retinal_axis__WEBPACK_IMPORTED_MODULE_4__["ShapeAxis"]; });

/* harmony import */ var _data_type_scale_map__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./data-type-scale-map */ "./packages/muze-axis/src/data-type-scale-map.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "dataTypeScaleMap", function() { return _data_type_scale_map__WEBPACK_IMPORTED_MODULE_5__["dataTypeScaleMap"]; });

/**
 * @module Axis
 * This file exports all the public methods and classes in the axis module.
 */








/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/color-axis/color-axis.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/color-axis/color-axis.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ColorAxis; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _scale_creator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../scale-creator */ "./packages/muze-axis/src/scale-creator.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-axis/src/enums/constants.js");
/* harmony import */ var _color_strategy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./color-strategy */ "./packages/muze-axis/src/retinal-axis/color-axis/color-strategy.js");
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./defaults */ "./packages/muze-axis/src/retinal-axis/color-axis/defaults.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./props */ "./packages/muze-axis/src/retinal-axis/color-axis/props.js");
/* harmony import */ var _retinal_axis__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../retinal-axis */ "./packages/muze-axis/src/retinal-axis/retinal-axis.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

/**
 * @module Axis
 * This file declares a class that is used to render an axis to add  meaning to
 * plots.
 */







/**
* This class is used to instantiate a SimpleAxis.
* @class SimpleAxis
*/

var ColorAxis =
/*#__PURE__*/
function (_RetinalAxis) {
  _inherits(ColorAxis, _RetinalAxis);

  /**
  * Creates an instance of SimpleAxis.
  * @param {Object} config input parameters.
  * @param {Object | undefined} params.range Type of color range.
  * @param {string} params.name the label to show on axis.
  * @param {string} params.type The type of scale to handle.
  * @memberof ColorAxis
  */
  function ColorAxis(config) {
    var _this;

    _classCallCheck(this, ColorAxis);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(ColorAxis).call(this));
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(_assertThisInitialized(_assertThisInitialized(_this)), _props__WEBPACK_IMPORTED_MODULE_5__["PROPS"]);

    _this.config(config);

    _this._domainType = _this._config.type === 'linear' ? _enums_constants__WEBPACK_IMPORTED_MODULE_2__["CONTINOUS"] : _enums_constants__WEBPACK_IMPORTED_MODULE_2__["DISCRETE"];
    _this._rangeType = _this._config.type === 'linear' && !_this._config.step ? _enums_constants__WEBPACK_IMPORTED_MODULE_2__["CONTINOUS"] : _enums_constants__WEBPACK_IMPORTED_MODULE_2__["DISCRETE"];
    _this._schemeType = Object(_scale_creator__WEBPACK_IMPORTED_MODULE_1__["getSchemeType"])(_this._config.range);

    _this.setStrategy(_this._domainType, _this._rangeType, _this._schemeType);

    _this._scale = _this.createScale();
    _this._id = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getUniqueId"])();

    _this.updateDomain(config.domain);

    return _this;
  }
  /**
   *
   *
   * @static
   *
   * @memberof ColorAxis
   */


  _createClass(ColorAxis, [{
    key: "createScale",

    /**
     *
     *
     * @param {*} colorStrategy
     *
     * @memberof ColorAxis
     */
    value: function createScale() {
      var _this$config = this.config(),
          range = _this$config.range;

      if (range && typeof range === 'string') {
        return Object(_scale_creator__WEBPACK_IMPORTED_MODULE_1__["getScheme"])(range);
      }

      return Object(_scale_creator__WEBPACK_IMPORTED_MODULE_1__["createScale"])({
        type: this.strategy().scale,
        range: range
      });
    }
    /**
     *
     *
     * @param {*} domainType
     * @param {*} rangeType
     * @param {*} schemeType
     *
     * @memberof ColorAxis
     */

  }, {
    key: "setStrategy",
    value: function setStrategy(domainType, rangeType, schemeType) {
      var _this$config2 = this.config(),
          stops = _this$config2.stops;

      this.strategy(Object(_color_strategy__WEBPACK_IMPORTED_MODULE_3__["strategyGetter"])(domainType, rangeType, schemeType, stops));
      return this;
    }
    /**
     *
     *
     * @param {*} domainVal
     *
     * @memberof ColorAxis
     */

  }, {
    key: "getHslString",
    value: function getHslString(hslColorArray) {
      return Object(_props__WEBPACK_IMPORTED_MODULE_5__["getHslString"])(hslColorArray);
    }
    /**
     *
     *
     * @param {*} domainVal
     *
     * @memberof ColorAxis
     */

  }, {
    key: "getColor",
    value: function getColor(domainVal) {
      return this.getHslString(this.getRawColor(domainVal));
    }
    /**
     *
     *
     * @param {*} domainVal
     *
     * @memberof ColorAxis
     */

  }, {
    key: "getRawColor",
    value: function getRawColor(domainVal) {
      if (this.domain() && domainVal !== undefined) {
        var scale = this.scale();
        var range = scale.range ? scale.range() : null;
        var color = this.strategy().value(range)(domainVal, scale, this.domain(), this.uniqueValues());

        if (color) {
          if (typeof color === 'string') {
            var col = color.substring(color.indexOf('(') + 1, color.lastIndexOf(')')).split(/,\s*/);
            return muze_utils__WEBPACK_IMPORTED_MODULE_0__["rgbToHsv"].apply(void 0, _toConsumableArray(col));
          }

          return _toConsumableArray(color);
        }
      }

      return _toConsumableArray(this.config().value);
    }
    /**
     *
     *
     * @param {*} [domain=[]]
     *
     * @memberof ColorAxis
     */

  }, {
    key: "updateDomain",
    value: function updateDomain() {
      var domain = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

      if (domain.length) {
        var scale = this.scale();
        var range = scale.range ? scale.range() : null;
        var domainRangeFn = this.strategy().domainRange();
        var scaleInfo = domainRangeFn(domain, this.config().stops, range);
        this.domain(scaleInfo.domain);
        scaleInfo.range && this.scale().range(scaleInfo.range);
        this.uniqueValues(scaleInfo.uniqueVals);
        this.scale().domain(scaleInfo.scaleDomain || this.domain());
      }

      return this;
    }
    /**
    * This method returns an object that can be used to
    * reconstruct this instance.
    *
    * @return {Object} the serializable props of axis
    * @memberof ShapeAxis
    */

  }, {
    key: "serialize",
    value: function serialize() {
      return {
        type: this.constructor.type(),
        scale: this.scale(),
        domain: this.domain(),
        config: this.config()
      };
    }
  }, {
    key: "transformColor",
    value: function transformColor(colorArray, transformationArray) {
      var h = colorArray[0] * 360;
      var s = colorArray[1] * 100;
      var l = colorArray[2] * 100;
      var a = colorArray[3] || 1;
      var newH = h + transformationArray[0];
      var newS = s + transformationArray[1];
      var newL = l + transformationArray[2];
      var newA = a + transformationArray[3] || 0;
      return {
        color: "hsla(".concat(newH, ",").concat(newS, "%,").concat(newL, "%,").concat(newA, ")"),
        hsla: [newH / 360, newS / 100, newL / 100, newA]
      };
    }
    /**
    * Returns the id of the axis.
    * @return {string} Unique identifier of the axis.
    */

  }, {
    key: "id",
    value: function id() {
      return this._id;
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return _defaults__WEBPACK_IMPORTED_MODULE_4__["DEFAULT_CONFIG"];
    }
    /**
     *
     *
     * @static
     *
     * @memberof ColorAxis
     */

  }, {
    key: "type",
    value: function type() {
      return _enums_constants__WEBPACK_IMPORTED_MODULE_2__["COLOR"];
    }
  }]);

  return ColorAxis;
}(_retinal_axis__WEBPACK_IMPORTED_MODULE_6__["default"]);



/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/color-axis/color-maps.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/color-axis/color-maps.js ***!
  \**********************************************************************/
/*! exports provided: x11Colors */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "x11Colors", function() { return x11Colors; });
var x11Colors = {
  Pink: {
    hex: 'ffc0cb',
    rgb: '255,192,203'
  },
  LightPink: {
    hex: 'ffb6c1',
    rgb: '255,182,193'
  },
  HotPink: {
    hex: 'ff69b4',
    rgb: '255,105,180'
  },
  DeepPink: {
    hex: 'ff1493',
    rgb: '255,20,147'
  },
  PaleVioletRed: {
    hex: 'db7093',
    rgb: '219,112,147'
  },
  MediumVioletRed: {
    hex: 'c71585',
    rgb: '199,21,133'
  },
  LightSalmon: {
    hex: 'ffa07a',
    rgb: '255,160,122'
  },
  Salmon: {
    hex: 'fa8072',
    rgb: '250,128,114'
  },
  DarkSalmon: {
    hex: 'e9967a',
    rgb: '233,150,122'
  },
  LightCoral: {
    hex: 'f08080',
    rgb: '240,128,128'
  },
  IndianRed: {
    hex: 'cd5c5c',
    rgb: '205,92,92'
  },
  Crimson: {
    hex: 'dc143c',
    rgb: '220,20,60'
  },
  FireBrick: {
    hex: 'b22222',
    rgb: '178,34,34'
  },
  DarkRed: {
    hex: '8b0000',
    rgb: '139,0,0'
  },
  Red: {
    hex: 'ff0000',
    rgb: '255,0,0'
  },
  OrangeRed: {
    hex: 'ff4500',
    rgb: '255,69,0'
  },
  Tomato: {
    hex: 'ff6347',
    rgb: '255,99,71'
  },
  Coral: {
    hex: 'ff7f50',
    rgb: '255,127,80'
  },
  DarkOrange: {
    hex: 'ff8c00',
    rgb: '255,140,0'
  },
  Orange: {
    hex: 'ffa500',
    rgb: '255,165,0'
  },
  Gold: {
    hex: 'ffd700',
    rgb: '255,215,0'
  },
  Yellow: {
    hex: 'ffff00',
    rgb: '255,255,0'
  },
  LightYellow: {
    hex: 'ffffe0',
    rgb: '255,255,224'
  },
  LemonChiffon: {
    hex: 'fffacd',
    rgb: '255,250,205'
  },
  LightGoldenrodYellow: {
    hex: 'fafad2',
    rgb: '250,250,210'
  },
  PapayaWhip: {
    hex: 'ffefd5',
    rgb: '255,239,213'
  },
  Moccasin: {
    hex: 'ffe4b5',
    rgb: '255,228,181'
  },
  PeachPuff: {
    hex: 'ffdab9',
    rgb: '255,218,185'
  },
  PaleGoldenrod: {
    hex: 'eee8aa',
    rgb: '238,232,170'
  },
  Khaki: {
    hex: 'f0e68c',
    rgb: '240,230,140'
  },
  DarkKhaki: {
    hex: 'bdb76b',
    rgb: '189,183,107'
  },
  Cornsilk: {
    hex: 'fff8dc',
    rgb: '255,248,220'
  },
  BlanchedAlmond: {
    hex: 'ffebcd',
    rgb: '255,235,205'
  },
  Bisque: {
    hex: 'ffe4c4',
    rgb: '255,228,196'
  },
  NavajoWhite: {
    hex: 'ffdead',
    rgb: '255,222,173'
  },
  Wheat: {
    hex: 'f5deb3',
    rgb: '245,222,179'
  },
  BurlyWood: {
    hex: 'deb887',
    rgb: '222,184,135'
  },
  Tan: {
    hex: 'd2b48c',
    rgb: '210,180,140'
  },
  RosyBrown: {
    hex: 'bc8f8f',
    rgb: '188,143,143'
  },
  SandyBrown: {
    hex: 'f4a460',
    rgb: '244,164,96'
  },
  Goldenrod: {
    hex: 'daa520',
    rgb: '218,165,32'
  },
  DarkGoldenrod: {
    hex: 'b8860b',
    rgb: '184,134,11'
  },
  Peru: {
    hex: 'cd853f',
    rgb: '205,133,63'
  },
  Chocolate: {
    hex: 'd2691e',
    rgb: '210,105,30'
  },
  SaddleBrown: {
    hex: '8b4513',
    rgb: '139,69,19'
  },
  Sienna: {
    hex: 'a0522d',
    rgb: '160,82,45'
  },
  Brown: {
    hex: 'a52a2a',
    rgb: '165,42,42'
  },
  Maroon: {
    hex: '800000',
    rgb: '128,0,0'
  },
  DarkOliveGreen: {
    hex: '556b2f',
    rgb: '85,107,47'
  },
  Olive: {
    hex: '808000',
    rgb: '128,128,0'
  },
  OliveDrab: {
    hex: '6b8e23',
    rgb: '107,142,35'
  },
  YellowGreen: {
    hex: '9acd32',
    rgb: '154,205,50'
  },
  LimeGreen: {
    hex: '32cd32',
    rgb: '50,205,50'
  },
  Lime: {
    hex: '00ff00',
    rgb: '0,255,0'
  },
  LawnGreen: {
    hex: '7cfc00',
    rgb: '124,252,0'
  },
  Chartreuse: {
    hex: '7fff00',
    rgb: '127,255,0'
  },
  GreenYellow: {
    hex: 'adff2f',
    rgb: '173,255,47'
  },
  SpringGreen: {
    hex: '00ff7f',
    rgb: '0,255,127'
  },
  MediumSpringGreen: {
    hex: '00fa9a',
    rgb: '0,250,154'
  },
  LightGreen: {
    hex: '90ee90',
    rgb: '144,238,144'
  },
  PaleGreen: {
    hex: '98fb98',
    rgb: '152,251,152'
  },
  DarkSeaGreen: {
    hex: '8fbc8f',
    rgb: '143,188,143'
  },
  MediumSeaGreen: {
    hex: '3cb371',
    rgb: '60,179,113'
  },
  SeaGreen: {
    hex: '2e8b57',
    rgb: '46,139,87'
  },
  ForestGreen: {
    hex: '228b22',
    rgb: '34,139,34'
  },
  Green: {
    hex: '008000',
    rgb: '0,128,0'
  },
  DarkGreen: {
    hex: '006400',
    rgb: '0,100,0'
  },
  MediumAquamarine: {
    hex: '66cdaa',
    rgb: '102,205,170'
  },
  Aqua: {
    hex: '00ffff',
    rgb: '0,255,255'
  },
  Cyan: {
    hex: '00ffff',
    rgb: '0,255,255'
  },
  LightCyan: {
    hex: 'e0ffff',
    rgb: '224,255,255'
  },
  PaleTurquoise: {
    hex: 'afeeee',
    rgb: '175,238,238'
  },
  Aquamarine: {
    hex: '7fffd4',
    rgb: '127,255,212'
  },
  Turquoise: {
    hex: '40e0d0',
    rgb: '64,224,208'
  },
  MediumTurquoise: {
    hex: '48d1cc',
    rgb: '72,209,204'
  },
  DarkTurquoise: {
    hex: '00ced1',
    rgb: '0,206,209'
  },
  LightSeaGreen: {
    hex: '20b2aa',
    rgb: '32,178,170'
  },
  CadetBlue: {
    hex: '5f9ea0',
    rgb: '95,158,160'
  },
  DarkCyan: {
    hex: '008b8b',
    rgb: '0,139,139'
  },
  Teal: {
    hex: '008080',
    rgb: '0,128,128'
  },
  LightSteelBlue: {
    hex: 'b0c4de',
    rgb: '176,196,222'
  },
  PowderBlue: {
    hex: 'b0e0e6',
    rgb: '176,224,230'
  },
  LightBlue: {
    hex: 'add8e6',
    rgb: '173,216,230'
  },
  SkyBlue: {
    hex: '87ceeb',
    rgb: '135,206,235'
  },
  LightSkyBlue: {
    hex: '87cefa',
    rgb: '135,206,250'
  },
  DeepSkyBlue: {
    hex: '00bfff',
    rgb: '0,191,255'
  },
  DodgerBlue: {
    hex: '1e90ff',
    rgb: '30,144,255'
  },
  CornflowerBlue: {
    hex: '6495ed',
    rgb: '100,149,237'
  },
  SteelBlue: {
    hex: '4682b4',
    rgb: '70,130,180'
  },
  RoyalBlue: {
    hex: '4169e1',
    rgb: '65,105,225'
  },
  Blue: {
    hex: '0000ff',
    rgb: '0,0,255'
  },
  MediumBlue: {
    hex: '0000cd',
    rgb: '0,0,205'
  },
  DarkBlue: {
    hex: '00008b',
    rgb: '0,0,139'
  },
  Navy: {
    hex: '000080',
    rgb: '0,0,128'
  },
  MidnightBlue: {
    hex: '191970',
    rgb: '25,25,112'
  },
  Lavender: {
    hex: 'e6e6fa',
    rgb: '230,230,250'
  },
  Thistle: {
    hex: 'd8bfd8',
    rgb: '216,191,216'
  },
  Plum: {
    hex: 'dda0dd',
    rgb: '221,160,221'
  },
  Violet: {
    hex: 'ee82ee',
    rgb: '238,130,238'
  },
  Orchid: {
    hex: 'da70d6',
    rgb: '218,112,214'
  },
  Fuchsia: {
    hex: 'ff00ff',
    rgb: '255,0,255'
  },
  Magenta: {
    hex: 'ff00ff',
    rgb: '255,0,255'
  },
  MediumOrchid: {
    hex: 'ba55d3',
    rgb: '186,85,211'
  },
  MediumPurple: {
    hex: '9370db',
    rgb: '147,112,219'
  },
  BlueViolet: {
    hex: '8a2be2',
    rgb: '138,43,226'
  },
  DarkViolet: {
    hex: '9400d3',
    rgb: '148,0,211'
  },
  DarkOrchid: {
    hex: '9932cc',
    rgb: '153,50,204'
  },
  DarkMagenta: {
    hex: '8b008b',
    rgb: '139,0,139'
  },
  Purple: {
    hex: '800080',
    rgb: '128,0,128'
  },
  Indigo: {
    hex: '4b0082',
    rgb: '75,0,130'
  },
  DarkSlateBlue: {
    hex: '483d8b',
    rgb: '72,61,139'
  },
  SlateBlue: {
    hex: '6a5acd',
    rgb: '106,90,205'
  },
  MediumSlateBlue: {
    hex: '7b68ee',
    rgb: '123,104,238'
  },
  White: {
    hex: 'ffffff',
    rgb: '255,255,255'
  },
  Snow: {
    hex: 'fffafa',
    rgb: '255,250,250'
  },
  Honeydew: {
    hex: 'f0fff0',
    rgb: '240,255,240'
  },
  MintCream: {
    hex: 'f5fffa',
    rgb: '245,255,250'
  },
  Azure: {
    hex: 'f0ffff',
    rgb: '240,255,255'
  },
  AliceBlue: {
    hex: 'f0f8ff',
    rgb: '240,248,255'
  },
  GhostWhite: {
    hex: 'f8f8ff',
    rgb: '248,248,255'
  },
  WhiteSmoke: {
    hex: 'f5f5f5',
    rgb: '245,245,245'
  },
  Seashell: {
    hex: 'fff5ee',
    rgb: '255,245,238'
  },
  Beige: {
    hex: 'f5f5dc',
    rgb: '245,245,220'
  },
  OldLace: {
    hex: 'fdf5e6',
    rgb: '253,245,230'
  },
  FloralWhite: {
    hex: 'fffaf0',
    rgb: '255,250,240'
  },
  Ivory: {
    hex: 'fffff0',
    rgb: '255,255,240'
  },
  AntiqueWhite: {
    hex: 'faebd7',
    rgb: '250,235,215'
  },
  Linen: {
    hex: 'faf0e6',
    rgb: '250,240,230'
  },
  LavenderBlush: {
    hex: 'fff0f5',
    rgb: '255,240,245'
  },
  MistyRose: {
    hex: 'ffe4e1',
    rgb: '255,228,225'
  },
  Gainsboro: {
    hex: 'dcdcdc',
    rgb: '220,220,220'
  },
  LightGray: {
    hex: 'd3d3d3',
    rgb: '211,211,211'
  },
  Silver: {
    hex: 'c0c0c0',
    rgb: '192,192,192'
  },
  DarkGrey: {
    hex: 'a9a9a9',
    rgb: '169,169,169'
  },
  Grey: {
    hex: '808080',
    rgb: '128,128,128'
  },
  DimGrey: {
    hex: '696969',
    rgb: '105,105,105'
  },
  LightSlateGrey: {
    hex: '778899',
    rgb: '119,136,153'
  },
  SlateGrey: {
    hex: '708090',
    rgb: '112,128,144'
  },
  DarkSlateGrey: {
    hex: '2f4f4f',
    rgb: '47,79,79'
  },
  Black: {
    hex: '000000',
    rgb: '0,0,0'
  }
};

/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/color-axis/color-strategy.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/color-axis/color-strategy.js ***!
  \**************************************************************************/
/*! exports provided: strategyGetter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "strategyGetter", function() { return strategyGetter; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-axis/src/enums/constants.js");
/* harmony import */ var _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../enums/scale-type */ "./packages/muze-axis/src/enums/scale-type.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./props */ "./packages/muze-axis/src/retinal-axis/color-axis/props.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../helper */ "./packages/muze-axis/src/helper.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }







var getStops = function getStops(domain, stops) {
  var newStops = [];

  if (stops instanceof Array) {
    newStops = stops.slice().sort();
    newStops = _toConsumableArray(new Set([domain[0]].concat(_toConsumableArray(stops), [domain[1]]))).sort();
  } else {
    var interpolator = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["numberInterpolator"])().apply(void 0, _toConsumableArray(domain));

    for (var i = 0; i <= stops; i++) {
      newStops[i] = interpolator(i / stops);
    }
  }

  if (newStops[0] < domain[0]) {
    newStops.shift();
  }

  return {
    domain: domain,
    newStops: newStops
  };
};

var rangeStops = function rangeStops(newStopsLength, range) {
  var newRange = [];
  var maxRangeLength = Math.min(range.length, 18);

  if (newStopsLength > maxRangeLength) {
    var interpolator = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["piecewiseInterpolator"])()(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["hslInterpolator"])(), range.map(function (e) {
      return Object(_props__WEBPACK_IMPORTED_MODULE_3__["getHslString"])(e);
    }));

    for (var i = 0; i < newStopsLength; i++) {
      newRange[i] = interpolator(i / (newStopsLength - 1));
    }
  } else {
    newRange = range.slice(0, newStopsLength);
  }

  return {
    newRange: newRange
  };
};
/**
*
*
* @param {*} domain
*
*/


var indexedDomain = function indexedDomain(domain) {
  var uniqueVals = domain;
  var retDomain = domain.map(function (d, i) {
    return i / (domain.length - 1);
  });
  return {
    domain: retDomain,
    uniqueVals: uniqueVals,
    scaleDomain: [0, 1]
  };
};
/**
 *
 *
 * @param {*} domain
 *
 */


var indexedDomainMeasure = function indexedDomainMeasure(domain, stops, range) {
  var uniqueVals = domain;
  return {
    domain: domain,
    uniqueVals: uniqueVals,
    scaleDomain: [0, 1],
    range: range
  };
};
/**
 *
 *
 * @param {*} domain
 *
 */


var normalDomain = function normalDomain(domain, stops, range) {
  var uniqueVals = domain;
  return {
    uniqueVals: uniqueVals,
    domain: domain,
    nice: true,
    range: range
  };
};
/**
 *
 *
 * @param {*} domain
 * @param {*} stops
 *
 */


var steppedDomain = function steppedDomain(domain, stops, range) {
  var _getStops = getStops(domain, stops),
      uniqueVals = _getStops.domain,
      newStops = _getStops.newStops;

  var _rangeStops = rangeStops(newStops.length - 1, range),
      newRange = _rangeStops.newRange;

  return {
    uniqueVals: uniqueVals,
    domain: newStops,
    nice: true,
    range: newRange
  };
};

var continousSteppedDomain = function continousSteppedDomain(domain, stops, range) {
  var _getStops2 = getStops(domain, range.length - 1),
      uniqueVals = _getStops2.domain,
      newStops = _getStops2.newStops;

  var hslRange = range.map(function (e) {
    return Object(_props__WEBPACK_IMPORTED_MODULE_3__["getHslString"])(e);
  });
  return {
    uniqueVals: uniqueVals,
    domain: newStops,
    nice: true,
    range: hslRange
  };
};
/**
 *
 *
 * @param {*} domainValue
 * @param {*} scale
 * @param {*} domain
 * @param {*} uniqueVals
 *
 */


var uniqueRange = function uniqueRange(domainValue, scale, domain, uniqueVals) {
  var index = uniqueVals.indexOf(domainValue);
  var numVal = domain[index];
  return scale(numVal);
};
/**
 *
 *
 * @param {*} domainValue
 * @param {*} scale
 * @param {*} domain
 *
 */


var indexedRange = function indexedRange(domainValue, scale, domain) {
  var numVal = (domainValue - domain[0]) / (domain[domain.length - 1] - domain[0]);
  return Object(_helper__WEBPACK_IMPORTED_MODULE_4__["treatNullMeasures"])(domainValue, scale(numVal), scale(0));
};
/**
 *
 *
 * @param {*} domainValue
 * @param {*} scale
 */


var normalRange = function normalRange(domainValue, scale, domain) {
  return Object(_helper__WEBPACK_IMPORTED_MODULE_4__["treatNullMeasures"])(domainValue, scale(domainValue), scale(domain[0]));
};
/**
 *
 *
 * @param {*} stops
 */


var strategies = function strategies() {
  var _ref;

  return _ref = {}, _defineProperty(_ref, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CONTINOUS"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CONTINOUS"], "-").concat(_enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["SEQUENTIAL"]), {
    scale: _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["SEQUENTIAL"],
    domainRange: function domainRange() {
      return indexedDomainMeasure;
    },
    value: function value() {
      return indexedRange;
    }
  }), _defineProperty(_ref, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CONTINOUS"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["DISCRETE"], "-").concat(_enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["SEQUENTIAL"]), {
    scale: _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["SEQUENTIAL"],
    domainRange: function domainRange() {
      return indexedDomainMeasure;
    },
    value: function value() {
      return indexedRange;
    }
  }), _defineProperty(_ref, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["DISCRETE"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["DISCRETE"], "-").concat(_enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["SEQUENTIAL"]), {
    scale: _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["SEQUENTIAL"],
    domainRange: function domainRange() {
      return indexedDomain;
    },
    value: function value() {
      return uniqueRange;
    }
  }), _defineProperty(_ref, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["DISCRETE"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["DISCRETE"], "-").concat(_enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["ORDINAL"]), {
    scale: _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["ORDINAL"],
    domainRange: function domainRange() {
      return normalDomain;
    },
    value: function value() {
      return normalRange;
    }
  }), _defineProperty(_ref, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CONTINOUS"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CONTINOUS"], "-").concat(_enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["ORDINAL"]), {
    scale: _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["LINEAR"],
    domainRange: function domainRange() {
      return continousSteppedDomain;
    },
    value: function value() {
      return normalRange;
    }
  }), _defineProperty(_ref, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CONTINOUS"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["DISCRETE"], "-").concat(_enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["ORDINAL"]), {
    scale: _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["QUANTILE"],
    domainRange: function domainRange() {
      return steppedDomain;
    },
    value: function value() {
      return normalRange;
    }
  }), _ref;
};
/**
 *
 *
 * @param {*} domainType
 * @param {*} rangeType
 * @param {*} schemeType
 * @param {*} stops
 */


var strategyGetter = function strategyGetter(domainType, rangeType, schemeType, stops) {
  return strategies(stops)["".concat(domainType, "-").concat(rangeType, "-").concat(schemeType || '')];
};

/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/color-axis/defaults.js":
/*!********************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/color-axis/defaults.js ***!
  \********************************************************************/
/*! exports provided: palette, DEFAULT_GRADIENT_COLOR, DEFAULT_CONFIG */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "palette", function() { return palette; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_GRADIENT_COLOR", function() { return DEFAULT_GRADIENT_COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_CONFIG", function() { return DEFAULT_CONFIG; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-axis/src/enums/constants.js");

/**
 * Set of default colors
 */

var palette = ['#086bb6', '#f37d45', '#f5ce02', '#67bda0', '#c54e4e', '#ae70af'];
var DEFAULT_GRADIENT_COLOR = '#eaeaea';
var DEFAULT_CONFIG = {
  range: palette,
  value: palette[0],
  step: false,
  stops: 5,
  type: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["LINEAR"]
};

/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/color-axis/index.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/color-axis/index.js ***!
  \*****************************************************************/
/*! exports provided: ColorAxis */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _color_axis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./color-axis */ "./packages/muze-axis/src/retinal-axis/color-axis/color-axis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ColorAxis", function() { return _color_axis__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/color-axis/props.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/color-axis/props.js ***!
  \*****************************************************************/
/*! exports provided: getHslString, convertToXllString, getActualHslColor, PROPS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getHslString", function() { return getHslString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "convertToXllString", function() { return convertToXllString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getActualHslColor", function() { return getActualHslColor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PROPS", function() { return PROPS; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _color_maps__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color-maps */ "./packages/muze-axis/src/retinal-axis/color-axis/color-maps.js");
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./defaults */ "./packages/muze-axis/src/retinal-axis/color-axis/defaults.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-axis/src/enums/constants.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }





var getHslString = function getHslString(hslArr) {
  return "hsla(".concat(hslArr[0] * 360, ",").concat(hslArr[1] * 100, "%,").concat(hslArr[2] * 100, "%,").concat(hslArr[3] || 1, ")");
};
var convertToXllString = function convertToXllString(baseString) {
  return (baseString.split(' ') || []).reduce(function (x, e) {
    return "".concat(x).concat(e.charAt(0).toUpperCase()).concat(e.slice(1));
  }, '');
};
var getActualHslColor = function getActualHslColor(e, paletteColor) {
  var color = '';

  if (typeof e === 'string') {
    e = e.replace(/ /g, '');
    e = e.toLowerCase();

    if (Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["detectColor"])(e) === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["HSL"] || Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["detectColor"])(e) === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["HSLA"]) {
      color = e.match(/(\d+(\.\d+)?)/g);
      color = [color[0] / 360, color[1] / 100, color[2] / 100, color[3] || 1];
    } else if (Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["detectColor"])(e) === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["HEX"]) {
      color = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["hexToHsv"])(e);
    } else if (Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["detectColor"])(e) === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["RGB"]) {
      var col = e.substring(e.indexOf('(') + 1, e.lastIndexOf(')')).split(/,\s*/);
      color = muze_utils__WEBPACK_IMPORTED_MODULE_0__["rgbToHsv"].apply(void 0, _toConsumableArray(col));
    } else if (_color_maps__WEBPACK_IMPORTED_MODULE_1__["x11Colors"][convertToXllString(e)]) {
      color = muze_utils__WEBPACK_IMPORTED_MODULE_0__["rgbToHsv"].apply(void 0, _toConsumableArray(_color_maps__WEBPACK_IMPORTED_MODULE_1__["x11Colors"][convertToXllString(e)].rgb.split(',')));
    }
  } else if (!(e instanceof Array)) {
    color = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["rgbToHsv"])(paletteColor);
  } else {
    color = e;
  }

  return color;
};
var PROPS = {
  config: {
    sanitization: function sanitization(context, config) {
      var defCon = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, context.constructor.defaultConfig());

      if (config.type === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["LINEAR"]) {
        config.range = config.range || [defCon.range[0]];
        config.range = config.range.length > 1 ? config.range : [_defaults__WEBPACK_IMPORTED_MODULE_2__["DEFAULT_GRADIENT_COLOR"]].concat(_toConsumableArray(config.range));
      }

      var oldConfig = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(defCon, context.config());
      var newConfig = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(oldConfig, config);

      if (newConfig.range instanceof Array) {
        newConfig.range = newConfig.range.map(function (e, i) {
          return getActualHslColor(e, _defaults__WEBPACK_IMPORTED_MODULE_2__["palette"][i]);
        });
        newConfig.stops = config.stops || newConfig.range.length;
      }

      newConfig.value = getActualHslColor(newConfig.value, newConfig.value);
      return newConfig;
    }
  },
  domain: {},
  scale: {},
  strategy: {},
  uniqueValues: {}
};

/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/index.js":
/*!******************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/index.js ***!
  \******************************************************/
/*! exports provided: RetinalAxis, ColorAxis, ShapeAxis, SizeAxis */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _retinal_axis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./retinal-axis */ "./packages/muze-axis/src/retinal-axis/retinal-axis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RetinalAxis", function() { return _retinal_axis__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _color_axis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color-axis */ "./packages/muze-axis/src/retinal-axis/color-axis/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ColorAxis", function() { return _color_axis__WEBPACK_IMPORTED_MODULE_1__["ColorAxis"]; });

/* harmony import */ var _shape_axis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shape-axis */ "./packages/muze-axis/src/retinal-axis/shape-axis/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ShapeAxis", function() { return _shape_axis__WEBPACK_IMPORTED_MODULE_2__["ShapeAxis"]; });

/* harmony import */ var _size_axis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./size-axis */ "./packages/muze-axis/src/retinal-axis/size-axis/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SizeAxis", function() { return _size_axis__WEBPACK_IMPORTED_MODULE_3__["SizeAxis"]; });






/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/retinal-axis.js":
/*!*************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/retinal-axis.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return RetinalAxis; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-axis/src/enums/constants.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }




var RetinalAxis =
/*#__PURE__*/
function () {
  /**
  * Creates an instance of SimpleAxis.
  * @memberof SizeAxis
  */
  function RetinalAxis() {
    _classCallCheck(this, RetinalAxis);

    this._id = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getUniqueId"])();
  }
  /**
   *
   *
   * @static
   * @returns
   * @memberof RetinalAxis
   */


  _createClass(RetinalAxis, [{
    key: "createScale",

    /**
     * This method is used to assign a domain to the axis.
     *
     * @param {Array} domain the domain of the scale
     * @memberof RetinalAxis
     */
    value: function createScale() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * This method is used to assign a domain to the axis.
     *
     * @param {Array} domain the domain of the scale
     * @memberof RetinalAxis
     */

  }, {
    key: "updateDomain",
    value: function updateDomain() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * This method is used to assign a domain to the axis.
     *
     * @param {Array} domain the domain of the scale
     * @memberof RetinalAxis
     */

  }, {
    key: "setStrategy",
    value: function setStrategy() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * This method returns an object that can be used to
     * reconstruct this instance.
     *
     * @return {Object} the serializable props of axis
     * @memberof RetinalAxis
     */

  }, {
    key: "serialize",
    value: function serialize() {
      return {
        type: this.constructor.type(),
        scale: this.scale(),
        domain: this.domain(),
        config: this.config()
      };
    }
    /**
     * Returns the id of the axis.
     * @return {string} Unique identifier of the axis.
     */

  }, {
    key: "id",
    value: function id() {
      return this._id;
    }
  }], [{
    key: "type",
    value: function type() {
      return _enums_constants__WEBPACK_IMPORTED_MODULE_1__["RETINAL"];
    }
  }]);

  return RetinalAxis;
}();



/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/shape-axis/defaults.js":
/*!********************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/shape-axis/defaults.js ***!
  \********************************************************************/
/*! exports provided: DEFAULT_CONFIG */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_CONFIG", function() { return DEFAULT_CONFIG; });
var DEFAULT_CONFIG = {
  generator: null,
  value: 'circle',
  range: ['circle', 'diamond', 'star', 'cross', 'square', 'wye', 'triangle']
};

/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/shape-axis/helper.js":
/*!******************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/shape-axis/helper.js ***!
  \******************************************************************/
/*! exports provided: shapeGenerator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shapeGenerator", function() { return shapeGenerator; });
/**
 *
 *
 * @param {*} domain
 * @param {*} generatorFn
 *
 */
var shapeGenerator = function shapeGenerator(domain, generatorFn) {
  var generatedShapes = {};
  domain.forEach(function (value) {
    generatedShapes[value] = generatorFn(value);
  });
  return generatedShapes;
};

/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/shape-axis/index.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/shape-axis/index.js ***!
  \*****************************************************************/
/*! exports provided: ShapeAxis */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _shape_axis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shape-axis */ "./packages/muze-axis/src/retinal-axis/shape-axis/shape-axis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ShapeAxis", function() { return _shape_axis__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/shape-axis/props.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/shape-axis/props.js ***!
  \*****************************************************************/
/*! exports provided: PROPS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PROPS", function() { return PROPS; });
var PROPS = {
  config: {},
  domain: {},
  scale: {},
  uniqueValues: {},
  generator: {}
};

/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/shape-axis/shape-axis.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/shape-axis/shape-axis.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ShapeAxis; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _scale_creator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../scale-creator */ "./packages/muze-axis/src/scale-creator.js");
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./defaults */ "./packages/muze-axis/src/retinal-axis/shape-axis/defaults.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-axis/src/enums/constants.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helper */ "./packages/muze-axis/src/retinal-axis/shape-axis/helper.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./props */ "./packages/muze-axis/src/retinal-axis/shape-axis/props.js");
/* harmony import */ var _retinal_axis__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../retinal-axis */ "./packages/muze-axis/src/retinal-axis/retinal-axis.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

/**
 * @module Axis
 * This file declares a class that is used to render an axis to add  meaning to
 * plots.
 */







/**
* This class is used to instantiate a SimpleAxis.
* @class SimpleAxis
*/

var ShapeAxis =
/*#__PURE__*/
function (_RetinalAxis) {
  _inherits(ShapeAxis, _RetinalAxis);

  /**
  * Creates an instance of SimpleAxis.
  * @param {Object} params input parameters.
  * @param {Object | undefined} params.range Type of color scheme.
  * @memberof ShapeAxis
  */
  function ShapeAxis(config) {
    var _this;

    _classCallCheck(this, ShapeAxis);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(ShapeAxis).call(this));
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(_assertThisInitialized(_assertThisInitialized(_this)), _props__WEBPACK_IMPORTED_MODULE_5__["PROPS"]);
    _this._config = Object.assign({}, _this.constructor.defaultConfig());
    _this._config = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(_this._config, config);
    _this._scale = _this.createScale();

    _this.updateDomain(config.domain);

    return _this;
  }

  _createClass(ShapeAxis, [{
    key: "createScale",
    value: function createScale() {
      return Object(_scale_creator__WEBPACK_IMPORTED_MODULE_1__["createScale"])({
        type: 'ordinal',
        range: this._config.range
      });
    }
    /**
    *
    *
    * @static
    *
    * @memberof ColorAxis
    */

  }, {
    key: "getShape",

    /**
     *
     *
     * @param {*} value
     *
     * @memberof ShapeAxis
     */
    value: function getShape(value) {
      if (!this.scale() || !this.domain() || !value || value instanceof muze_utils__WEBPACK_IMPORTED_MODULE_0__["InvalidAwareTypes"]) {
        return this.config().value;
      }

      if (this._generatedShapes) {
        return this._generatedShapes[value];
      }

      var shapeType = this.scale()(value);

      if (shapeType === 'string') {
        return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getSymbol"])(shapeType);
      }

      return shapeType;
    }
    /**
     * This method is used to assign a domain to the axis.
     *
     * @param {Array} domain the domain of the scale
     * @memberof ShapeAxis
     */

  }, {
    key: "updateDomain",
    value: function updateDomain() {
      var domain = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

      if (domain.length) {
        this.uniqueValues(domain);
        this.domain(domain);
        this.scale().domain(domain);

        if (this.config().generator) {
          this._generatedShapes = Object(_helper__WEBPACK_IMPORTED_MODULE_4__["shapeGenerator"])(domain, this.config().generator);
        }
      }

      return this;
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return _defaults__WEBPACK_IMPORTED_MODULE_2__["DEFAULT_CONFIG"];
    }
    /**
    *
    *
    * @static
    *
    * @memberof ColorAxis
    */

  }, {
    key: "type",
    value: function type() {
      return _enums_constants__WEBPACK_IMPORTED_MODULE_3__["SHAPE"];
    }
  }]);

  return ShapeAxis;
}(_retinal_axis__WEBPACK_IMPORTED_MODULE_6__["default"]);



/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/size-axis/defaults.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/size-axis/defaults.js ***!
  \*******************************************************************/
/*! exports provided: DEFAULT_CONFIG */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_CONFIG", function() { return DEFAULT_CONFIG; });
var DEFAULT_CONFIG = {
  value: 36,
  range: [36, 1000]
};

/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/size-axis/index.js":
/*!****************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/size-axis/index.js ***!
  \****************************************************************/
/*! exports provided: SizeAxis */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _size_axis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./size-axis */ "./packages/muze-axis/src/retinal-axis/size-axis/size-axis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SizeAxis", function() { return _size_axis__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/size-axis/props.js":
/*!****************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/size-axis/props.js ***!
  \****************************************************************/
/*! exports provided: PROPS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PROPS", function() { return PROPS; });
var PROPS = {
  config: {},
  domain: {
    sanitization: function sanitization(context, value) {
      context.scale().domain(value);
      return value;
    }
  },
  range: {},
  scale: {},
  strategy: {},
  uniqueValues: {}
};

/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/size-axis/size-axis.js":
/*!********************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/size-axis/size-axis.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SizeAxis; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _scale_creator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../scale-creator */ "./packages/muze-axis/src/scale-creator.js");
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./defaults */ "./packages/muze-axis/src/retinal-axis/size-axis/defaults.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-axis/src/enums/constants.js");
/* harmony import */ var _size_strategy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./size-strategy */ "./packages/muze-axis/src/retinal-axis/size-axis/size-strategy.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./props */ "./packages/muze-axis/src/retinal-axis/size-axis/props.js");
/* harmony import */ var _retinal_axis__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../retinal-axis */ "./packages/muze-axis/src/retinal-axis/retinal-axis.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

/**
 * @module Axis
 * This file declares a class that is used to render an axis to add  meaning to
 * plots.
 */







/**
* This class is used to instantiate a SimpleAxis.
* @class SimpleAxis
*/

var SizeAxis =
/*#__PURE__*/
function (_RetinalAxis) {
  _inherits(SizeAxis, _RetinalAxis);

  /**
   * Creates an instance of SimpleAxis.
   * @param {Object} config input parameters.
   * @memberof SizeAxis
   */
  function SizeAxis(config) {
    var _this;

    _classCallCheck(this, SizeAxis);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(SizeAxis).call(this));
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(_assertThisInitialized(_assertThisInitialized(_this)), _props__WEBPACK_IMPORTED_MODULE_5__["PROPS"]);
    _this._config = Object.assign({}, _this.constructor.defaultConfig(), config); // @todo: Will use configuration override using scale decorator

    _this._domainType = _this._config.type === 'linear' ? _enums_constants__WEBPACK_IMPORTED_MODULE_3__["CONTINOUS"] : _enums_constants__WEBPACK_IMPORTED_MODULE_3__["DISCRETE"];
    _this._rangeType = _enums_constants__WEBPACK_IMPORTED_MODULE_3__["CONTINOUS"];

    _this.setStrategy(_this._domainType, _this._rangeType);

    _this._scale = _this.createScale(_this._sizeStrategy);
    _this._range = _this._config.range;

    _this.updateDomain(config.domain);

    return _this;
  }
  /**
  *
  *
  * @param {*} domainType
  * @param {*} rangeType
  * @param {*} schemeType
  *
  * @memberof ColorAxis
  */


  _createClass(SizeAxis, [{
    key: "setStrategy",
    value: function setStrategy(domainType, rangeType) {
      this.strategy(Object(_size_strategy__WEBPACK_IMPORTED_MODULE_4__["strategyGetter"])(domainType, rangeType));
    }
    /**
     *
     *
     *
     * @memberof SizeAxis
     */

  }, {
    key: "createScale",
    value: function createScale() {
      var _this$config = this.config(),
          range = _this$config.range;

      return Object(_scale_creator__WEBPACK_IMPORTED_MODULE_1__["createScale"])({
        type: this.strategy().scale,
        range: range
      });
    }
    /**
     *
     *
     * @static
     *
     * @memberof ColorAxis
     */

  }, {
    key: "getSize",

    /**
     *
     *
     * @param {*} domainVal
     *
     * @memberof SizeAxis
     */
    value: function getSize() {
      var domainVal = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      var sizeVal = 1;

      var _this$config2 = this.config(),
          value = _this$config2.value;

      var scale = this.scale();
      var domain = this.domain() || [1, 1];

      if (!scale || domain[0] === domain[1]) {
        sizeVal = value;
      } else {
        return this._sizeStrategy.range(domainVal, scale, this.domain(), this.uniqueValues());
      }

      return sizeVal;
    }
    /**
     * This method is used to assign a domain to the axis.
     *
     * @param {Array} domain the domain of the scale
     * @memberof SizeAxis
     */

  }, {
    key: "updateDomain",
    value: function updateDomain(domain) {
      if (domain) {
        var domainFn = this._sizeStrategy.domain;
        var domainInfo = domainFn(domain, this.config().intervals);
        this.domain(domainInfo.domain);
        this.uniqueValues(domainInfo.uniqueVals);
        this.scale().domain(domainInfo.scaleDomain || this.domain());
      }

      return this;
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return _defaults__WEBPACK_IMPORTED_MODULE_2__["DEFAULT_CONFIG"];
    }
    /**
    *
    *
    * @static
    *
    * @memberof ColorAxis
    */

  }, {
    key: "type",
    value: function type() {
      return _enums_constants__WEBPACK_IMPORTED_MODULE_3__["SIZE"];
    }
  }]);

  return SizeAxis;
}(_retinal_axis__WEBPACK_IMPORTED_MODULE_6__["default"]);



/***/ }),

/***/ "./packages/muze-axis/src/retinal-axis/size-axis/size-strategy.js":
/*!************************************************************************!*\
  !*** ./packages/muze-axis/src/retinal-axis/size-axis/size-strategy.js ***!
  \************************************************************************/
/*! exports provided: strategyGetter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "strategyGetter", function() { return strategyGetter; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-axis/src/enums/constants.js");
/* harmony import */ var _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../enums/scale-type */ "./packages/muze-axis/src/enums/scale-type.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../helper */ "./packages/muze-axis/src/helper.js");
var _strategies;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }





/**
 *
 *
 * @param {*} domain
 *
 */

var indexedDomain = function indexedDomain(domain) {
  var uniqueVals = domain;
  var retDomain = domain.map(function (d, i) {
    return i / (domain.length - 1);
  });
  return {
    domain: retDomain,
    uniqueVals: uniqueVals,
    scaleDomain: [0, 1]
  };
};
/**
 *
 *
 * @param {*} domain
 *
 */


var normalDomain = function normalDomain(domain) {
  var uniqueVals = domain;
  return {
    uniqueVals: uniqueVals,
    domain: domain
  };
};
/**
 *
 *
 * @param {*} domain
 * @param {*} intervals
 *
 */


var steppedDomain = function steppedDomain(domain, intervals) {
  var newIntervals = [];

  if (intervals instanceof Array) {
    newIntervals = intervals.slice().sort();
  } else {
    var interpolator = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["numberInterpolator"])().apply(void 0, _toConsumableArray(domain));

    for (var i = 0; i < intervals; i++) {
      newIntervals[i] = interpolator(i / (intervals - 1));
    }
  }

  if (newIntervals[0] < domain[0]) {
    newIntervals.shift();
  }

  var retDomain = newIntervals;
  return {
    uniqueVals: newIntervals,
    domain: retDomain,
    nice: true
  };
};
/**
 *
 *
 * @param {*} domainValue
 * @param {*} scale
 * @param {*} domain
 * @param {*} uniqueVals
 *
 */


var discreteRange = function discreteRange(domainValue, scale, domain) {
  var numVal = (domainValue - domain[0]) / (domain[domain.length - 1] - domain[0]);
  var interpolator = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["numberInterpolator"])().apply(void 0, _toConsumableArray(scale.range()));
  return Object(_helper__WEBPACK_IMPORTED_MODULE_3__["treatNullMeasures"])(domainValue, interpolator(numVal), interpolator(domain[0]));
};
/**
 *
 *
 * @param {*} domainValue
 * @param {*} scale
 * @param {*} domain
 *
 */


var pieceWiseRange = function pieceWiseRange(domainValue, scale, domain, uniqueVals) {
  var index = uniqueVals.indexOf(domainValue);
  var numVal = domain[index];
  var fn = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["piecewiseInterpolator"])()(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["numberInterpolator"])(), _toConsumableArray(scale.range()));
  return fn(numVal);
};
/**
 *
 *
 * @param {*} domainValue
 * @param {*} scale
 */


var normalRange = function normalRange(domainValue, scale, domain) {
  return Object(_helper__WEBPACK_IMPORTED_MODULE_3__["treatNullMeasures"])(domainValue, scale(domainValue), scale(domain[0]));
};
/**
 *
 *
 * @param {*} intervals
 */


var strategies = (_strategies = {}, _defineProperty(_strategies, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["DISCRETE"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CONTINOUS"]), {
  scale: _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["LINEAR"],
  domain: indexedDomain,
  range: pieceWiseRange
}), _defineProperty(_strategies, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CONTINOUS"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CONTINOUS"]), {
  scale: _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["LINEAR"],
  domain: normalDomain,
  range: normalRange
}), _defineProperty(_strategies, "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CONTINOUS"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["DISCRETE"]), {
  scale: _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["THRESHOLD"],
  domain: steppedDomain,
  range: discreteRange
}), _strategies);
/**
 *
 *
 * @param {*} domainType
 * @param {*} rangeType
 * @param {*} schemeType
 * @param {*} intervals
 */

var strategyGetter = function strategyGetter(domainType, rangeType) {
  return strategies["".concat(domainType, "-").concat(rangeType)];
};

/***/ }),

/***/ "./packages/muze-axis/src/scale-creator.js":
/*!*************************************************!*\
  !*** ./packages/muze-axis/src/scale-creator.js ***!
  \*************************************************/
/*! exports provided: scaleMap, SCHEMES, getScheme, getSchemeType, createScale, updateScaleRange, getScaleType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scaleMap", function() { return scaleMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SCHEMES", function() { return SCHEMES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getScheme", function() { return getScheme; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSchemeType", function() { return getSchemeType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createScale", function() { return createScale; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateScaleRange", function() { return updateScaleRange; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getScaleType", function() { return getScaleType; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enums/constants */ "./packages/muze-axis/src/enums/constants.js");
/* harmony import */ var _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./enums/scale-type */ "./packages/muze-axis/src/enums/scale-type.js");
var _scaleMap;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




var scaleLinear = muze_utils__WEBPACK_IMPORTED_MODULE_0__["scales"].scaleLinear,
    scaleThreshold = muze_utils__WEBPACK_IMPORTED_MODULE_0__["scales"].scaleThreshold,
    scaleLog = muze_utils__WEBPACK_IMPORTED_MODULE_0__["scales"].scaleLog,
    scalePow = muze_utils__WEBPACK_IMPORTED_MODULE_0__["scales"].scalePow,
    scaleIdentity = muze_utils__WEBPACK_IMPORTED_MODULE_0__["scales"].scaleIdentity,
    scaleOrdinal = muze_utils__WEBPACK_IMPORTED_MODULE_0__["scales"].scaleOrdinal,
    scaleSequential = muze_utils__WEBPACK_IMPORTED_MODULE_0__["scales"].scaleSequential,
    scaleQuantize = muze_utils__WEBPACK_IMPORTED_MODULE_0__["scales"].scaleQuantize,
    scaleQuantile = muze_utils__WEBPACK_IMPORTED_MODULE_0__["scales"].scaleQuantile,
    schemeCategory10 = muze_utils__WEBPACK_IMPORTED_MODULE_0__["scales"].schemeCategory10,
    schemeCategory20 = muze_utils__WEBPACK_IMPORTED_MODULE_0__["scales"].schemeCategory20,
    schemeCategory20b = muze_utils__WEBPACK_IMPORTED_MODULE_0__["scales"].schemeCategory20b,
    scaleBand = muze_utils__WEBPACK_IMPORTED_MODULE_0__["scales"].scaleBand,
    scaleTime = muze_utils__WEBPACK_IMPORTED_MODULE_0__["scales"].scaleTime;
var scaleMap = (_scaleMap = {}, _defineProperty(_scaleMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["LINEAR"], scaleLinear), _defineProperty(_scaleMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["BAND"], scaleBand), _defineProperty(_scaleMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["QUANTIZE"], scaleQuantize), _defineProperty(_scaleMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["QUANTILE"], scaleQuantile), _defineProperty(_scaleMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["THRESHOLD"], scaleThreshold), _defineProperty(_scaleMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["SEQUENTIAL"], scaleSequential), _defineProperty(_scaleMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["LOG"], scaleLog), _defineProperty(_scaleMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["POW"], scalePow), _defineProperty(_scaleMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["IDENTITY"], scaleIdentity), _defineProperty(_scaleMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["TIME"], scaleTime), _defineProperty(_scaleMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["COLOR"], scaleLinear), _defineProperty(_scaleMap, _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["ORDINAL"], scaleOrdinal), _scaleMap);
var SCHEMES = {
  SCHEME1: schemeCategory10,
  SCHEME2: schemeCategory20,
  SCHEME3: schemeCategory20b
};
/**
 * Accepts a scheme in a string format and returns the scale from d3-scale-chromatic
 *
 * @export
 * @param {string} scheme a string representing the kind of scheme for the color axis
 * @return {Object} The corresponding scale from a scheme type from d3 chromatic scale
 */

function getScheme(scheme) {
  if (scheme[0] === 'i') {
    return scaleSequential(muze_utils__WEBPACK_IMPORTED_MODULE_0__["colorSchemes"][scheme]);
  }

  return scaleOrdinal(muze_utils__WEBPACK_IMPORTED_MODULE_0__["colorSchemes"][scheme]);
}
/**
 *
 *
 * @export
 * @param {*} scheme
 *
 */

function getSchemeType(scheme) {
  var schemeType = '';

  if (scheme && typeof scheme === 'string') {
    schemeType = scheme[0] === 'i' ? _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SEQUENTIAL"] : _enums_constants__WEBPACK_IMPORTED_MODULE_1__["ORDINAL"];
  } else {
    schemeType = _enums_constants__WEBPACK_IMPORTED_MODULE_1__["ORDINAL"];
  }

  return schemeType;
}
/**
 * This function is used to create a scale that is assigned to
 * an instance of axis.
 *
 * @export
 * @param {Object} params the input parameters to create a Scale object
 * @param {string} params.type the type of scale
 * @param {Array} params.range the range of scale
 * @return {Object} instance of scale
 */

function createScale(params) {
  if (!params.type || !scaleMap[params.type]) {
    throw new Error("".concat(params.type, " is not a valid scale type"));
  }

  if (!Array.isArray(params.range)) {
    throw new Error('range parameter must be an array');
  }

  var scaleFactory = null;
  var range = params.range; // @todo: do it using scale decorator

  if (params.type === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["LINEAR"] && params.interpolator) {
    scaleFactory = scaleMap[params.interpolator];

    if (params.interpolator === _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["POW"]) {
      return scaleFactory().range(range).exponent(params.exponent);
    } else if (params.interpolator === _enums_scale_type__WEBPACK_IMPORTED_MODULE_2__["LOG"]) {
      return scaleFactory().range(range).base([params.base]);
    }
  } else {
    scaleFactory = scaleMap[params.type];
  }

  if (params.type === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["QUANTIZE"]) {
    scaleFactory().nice();
  }

  return scaleFactory().range(range);
}
/**
 * This method is used to update the range of a scale
 * so that the core module can remain agnostic of the d3
 * scale api.
 *
 * @export
 * @param {Scale} scale Instance of d3 Scale.
 * @param {Array} range new range of the scale.
 * @return {Scale} Updated scale.
 */

function updateScaleRange(scale, range) {
  return scale.range(range);
}
/**
 *
 *
 * @export
 * @param {*} domainType
 * @param {*} rangeType
 * @param {*} steps
 *
 */

function getScaleType(domainType, rangeType, steps) {
  if (rangeType === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["CONTINOUS"]) {
    return _enums_constants__WEBPACK_IMPORTED_MODULE_1__["LINEAR"];
  }

  if (domainType === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["CONTINOUS"]) {
    if (steps instanceof Array) {
      return _enums_constants__WEBPACK_IMPORTED_MODULE_1__["THRESHOLD"];
    }

    return _enums_constants__WEBPACK_IMPORTED_MODULE_1__["QUANTIZE"];
  }

  return _enums_constants__WEBPACK_IMPORTED_MODULE_1__["ORDINAL"];
}

/***/ }),

/***/ "./packages/muze-axis/src/styles.scss":
/*!********************************************!*\
  !*** ./packages/muze-axis/src/styles.scss ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/muze-firebolt/src/actions/behavioural/brush.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/behavioural/brush.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return BrushBehaviour; });
/* harmony import */ var _volatile__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./volatile */ "./packages/muze-firebolt/src/actions/behavioural/volatile.js");
/* harmony import */ var _enums_behaviours__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/behaviours */ "./packages/muze-firebolt/src/enums/behaviours.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



/**
 * This is the behaviour for brushing a region on the chart. It accepts a payload
 * which contains the x and y range of the data and other configuration. It will then
 * create a selection box from the range and select the points which fall within the range.
 */

var BrushBehaviour =
/*#__PURE__*/
function (_VolatileBehaviour) {
  _inherits(BrushBehaviour, _VolatileBehaviour);

  function BrushBehaviour() {
    _classCallCheck(this, BrushBehaviour);

    return _possibleConstructorReturn(this, _getPrototypeOf(BrushBehaviour).apply(this, arguments));
  }

  _createClass(BrushBehaviour, null, [{
    key: "formalName",
    value: function formalName() {
      return _enums_behaviours__WEBPACK_IMPORTED_MODULE_1__["BRUSH"];
    }
  }]);

  return BrushBehaviour;
}(_volatile__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/actions/behavioural/filter.js":
/*!******************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/behavioural/filter.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return FilterBehaviour; });
/* harmony import */ var _volatile__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./volatile */ "./packages/muze-firebolt/src/actions/behavioural/volatile.js");
/* harmony import */ var _enums_behaviours__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/behaviours */ "./packages/muze-firebolt/src/enums/behaviours.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var FilterBehaviour =
/*#__PURE__*/
function (_VolatileBehaviour) {
  _inherits(FilterBehaviour, _VolatileBehaviour);

  function FilterBehaviour() {
    _classCallCheck(this, FilterBehaviour);

    return _possibleConstructorReturn(this, _getPrototypeOf(FilterBehaviour).apply(this, arguments));
  }

  _createClass(FilterBehaviour, null, [{
    key: "formalName",
    value: function formalName() {
      return _enums_behaviours__WEBPACK_IMPORTED_MODULE_1__["FILTER"];
    }
  }, {
    key: "mutates",
    value: function mutates() {
      return true;
    }
  }]);

  return FilterBehaviour;
}(_volatile__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/actions/behavioural/generic.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/behavioural/generic.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return GenericBehaviour; });
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../helper */ "./packages/muze-firebolt/src/helper/index.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }


/**
 * This is the base class has all the common functionalities needed for all behavioural actions. Any other behavioural
 * action needs to extend this class.
 *
 * @public
 * @class GenericBehaviour
 * @module GenericBehaviour
 */

var GenericBehaviour =
/*#__PURE__*/
function () {
  function GenericBehaviour(firebolt) {
    _classCallCheck(this, GenericBehaviour);

    this.firebolt = firebolt;
    this._enabled = true;
  }
  /**
   * Returns entry and exit set information. This method is called by firebolt when ```dispatchBehaviour``` is called
   * dynamically or when any physical action is triggered on the chart.
   *
   * @param {Object} payload Payload information.
   * @param {Object|Array} payload.criteria Identifiers of data interacted with.
   *
   * @return {Array} Entry and exit set information.
   */


  _createClass(GenericBehaviour, [{
    key: "dispatch",
    value: function dispatch(payload) {
      var _this = this;

      var criteria = payload.criteria;
      var firebolt = this.firebolt;
      var formalName = this.constructor.formalName();
      var selectionSets = firebolt.getSelectionSets(formalName);

      var _this$firebolt$getAdd = this.firebolt.getAddSetFromCriteria(criteria, this.firebolt.getPropagationInf()),
          filteredDataModel = _this$firebolt$getAdd.model,
          uids = _this$firebolt$getAdd.uids;

      var entryExitSets = selectionSets.map(function (selectionSet) {
        _this.setSelectionSet(uids, selectionSet);

        return _this.getEntryExitSet(selectionSet, filteredDataModel, payload);
      });
      return entryExitSets;
    }
    /**
     * Updates the selection set by adding uids to the instance of {@link SelectionSet} or removing them.
     * {@link SelectionSet} keeps the information of which rows are in the entry set and exit set.
     *
     * @public
     * @param {Array} addSet Array of row ids which got affected during interaction.
     * @param {SelectionSet} selectionSet Instance of selection set.
     *
     * @return {GenericBehaviour} Instance of behaviour.
     */

  }, {
    key: "setSelectionSet",
    value: function setSelectionSet() {
      return this;
    }
  }, {
    key: "getEntryExitSet",
    value: function getEntryExitSet(selectionSet, filteredDataModel, payload) {
      var _selectionSet$getSets = selectionSet.getSets(),
          entrySet = _selectionSet$getSets.entrySet,
          exitSet = _selectionSet$getSets.exitSet,
          completeSet = _selectionSet$getSets.completeSet;

      var propagationInf = this.firebolt.getPropagationInf();
      var dataModel = this.firebolt.getFullData();
      var setConfig = {
        isSourceFieldPresent: propagationInf.isSourceFieldPresent,
        dataModel: dataModel,
        filteredDataModel: filteredDataModel,
        propagationData: propagationInf.data,
        selectionSet: selectionSet
      };
      return {
        entrySet: [Object(_helper__WEBPACK_IMPORTED_MODULE_0__["getSetInfo"])('oldEntry', entrySet[0], setConfig), Object(_helper__WEBPACK_IMPORTED_MODULE_0__["getSetInfo"])('newEntry', entrySet[1], setConfig)],
        exitSet: [Object(_helper__WEBPACK_IMPORTED_MODULE_0__["getSetInfo"])('oldEntry', exitSet[0], setConfig), Object(_helper__WEBPACK_IMPORTED_MODULE_0__["getSetInfo"])('newExit', exitSet[1], setConfig)],
        mergedEnter: Object(_helper__WEBPACK_IMPORTED_MODULE_0__["getSetInfo"])('mergedEnter', Object(_helper__WEBPACK_IMPORTED_MODULE_0__["getMergedSet"])(entrySet), setConfig),
        mergedExit: Object(_helper__WEBPACK_IMPORTED_MODULE_0__["getSetInfo"])('mergedExit', Object(_helper__WEBPACK_IMPORTED_MODULE_0__["getMergedSet"])(exitSet), setConfig),
        completeSet: Object(_helper__WEBPACK_IMPORTED_MODULE_0__["getSetInfo"])('complete', completeSet, setConfig),
        isSourceFieldPresent: propagationInf.isSourceFieldPresent,
        fields: Object(_helper__WEBPACK_IMPORTED_MODULE_0__["getSourceFields"])(propagationInf, payload.criteria),
        sourceSelectionSet: selectionSet._volatile === true
      };
    }
  }, {
    key: "enable",
    value: function enable() {
      this._enabled = true;
    }
  }, {
    key: "disable",
    value: function disable() {
      this._enabled = false;
    }
  }, {
    key: "isEnabled",
    value: function isEnabled() {
      return this._enabled;
    }
  }], [{
    key: "mutates",
    value: function mutates() {
      return false;
    }
  }]);

  return GenericBehaviour;
}();



/***/ }),

/***/ "./packages/muze-firebolt/src/actions/behavioural/highlight.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/behavioural/highlight.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return HighlightBehaviour; });
/* harmony import */ var _volatile__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./volatile */ "./packages/muze-firebolt/src/actions/behavioural/volatile.js");
/* harmony import */ var _enums_behaviours__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/behaviours */ "./packages/muze-firebolt/src/enums/behaviours.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var HighlightBehaviour =
/*#__PURE__*/
function (_VolatileBehaviour) {
  _inherits(HighlightBehaviour, _VolatileBehaviour);

  function HighlightBehaviour() {
    _classCallCheck(this, HighlightBehaviour);

    return _possibleConstructorReturn(this, _getPrototypeOf(HighlightBehaviour).apply(this, arguments));
  }

  _createClass(HighlightBehaviour, null, [{
    key: "formalName",
    value: function formalName() {
      return _enums_behaviours__WEBPACK_IMPORTED_MODULE_1__["HIGHLIGHT"];
    }
  }]);

  return HighlightBehaviour;
}(_volatile__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/actions/behavioural/index.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/behavioural/index.js ***!
  \*****************************************************************/
/*! exports provided: HighlightBeahviour, BrushBehaviour, FilterBehaviour, SelectBehaviour */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _highlight__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./highlight */ "./packages/muze-firebolt/src/actions/behavioural/highlight.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HighlightBeahviour", function() { return _highlight__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _brush__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./brush */ "./packages/muze-firebolt/src/actions/behavioural/brush.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BrushBehaviour", function() { return _brush__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _filter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./filter */ "./packages/muze-firebolt/src/actions/behavioural/filter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FilterBehaviour", function() { return _filter__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _select__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./select */ "./packages/muze-firebolt/src/actions/behavioural/select.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SelectBehaviour", function() { return _select__WEBPACK_IMPORTED_MODULE_3__["default"]; });






/***/ }),

/***/ "./packages/muze-firebolt/src/actions/behavioural/persistent.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/behavioural/persistent.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return PersistentBehaviour; });
/* harmony import */ var _generic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./generic */ "./packages/muze-firebolt/src/actions/behavioural/generic.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../helper */ "./packages/muze-firebolt/src/helper/index.js");
/* harmony import */ var _enums_selection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../enums/selection */ "./packages/muze-firebolt/src/enums/selection.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





var PersistentBehaviour =
/*#__PURE__*/
function (_GenericBehaviour) {
  _inherits(PersistentBehaviour, _GenericBehaviour);

  function PersistentBehaviour() {
    _classCallCheck(this, PersistentBehaviour);

    return _possibleConstructorReturn(this, _getPrototypeOf(PersistentBehaviour).apply(this, arguments));
  }

  _createClass(PersistentBehaviour, [{
    key: "setSelectionSet",
    value: function setSelectionSet(addSet, selectionSet) {
      if (addSet === null) {
        selectionSet.reset();
      } else if (addSet.length) {
        var propagationInf = this.firebolt.getPropagationInf(); // new add set

        var existingAddSet = addSet.filter(function (d) {
          return selectionSet._set[d] === _enums_selection__WEBPACK_IMPORTED_MODULE_2__["SELECTION_NEW_ENTRY"] || selectionSet._set[d] === _enums_selection__WEBPACK_IMPORTED_MODULE_2__["SELECTION_OLD_ENTRY"];
        });

        if (propagationInf.propagate === false) {
          selectionSet.updateExit();

          var _selectionSet$getSets = selectionSet.getSets(),
              entrySet = _selectionSet$getSets.entrySet;

          selectionSet.reset(Object(_helper__WEBPACK_IMPORTED_MODULE_1__["getMergedSet"])(entrySet));
          selectionSet.add(addSet);
          selectionSet.update(existingAddSet);
        } else {
          // existing add set
          if (existingAddSet.length) {
            selectionSet.updateExit();
            selectionSet.remove(existingAddSet);
          } else {
            selectionSet.updateEntry();
            selectionSet.add(addSet);
          }

          var _selectionSet$getSets2 = selectionSet.getSets(),
              exitSet = _selectionSet$getSets2.exitSet;

          var mergedExitSet = Object(_helper__WEBPACK_IMPORTED_MODULE_1__["getMergedSet"])(exitSet);
          var completeSetCount = selectionSet.getCompleteSet().length;

          if (mergedExitSet.length === completeSetCount) {
            selectionSet.reset();
          }
        }
      } else {
        selectionSet.remove(selectionSet.getCompleteSet());
      }

      return this;
    }
  }]);

  return PersistentBehaviour;
}(_generic__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/actions/behavioural/select.js":
/*!******************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/behavioural/select.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SelectBehaviour; });
/* harmony import */ var _persistent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./persistent */ "./packages/muze-firebolt/src/actions/behavioural/persistent.js");
/* harmony import */ var _enums_behaviours__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/behaviours */ "./packages/muze-firebolt/src/enums/behaviours.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var SelectBehaviour =
/*#__PURE__*/
function (_PersistentBehaviour) {
  _inherits(SelectBehaviour, _PersistentBehaviour);

  function SelectBehaviour() {
    _classCallCheck(this, SelectBehaviour);

    return _possibleConstructorReturn(this, _getPrototypeOf(SelectBehaviour).apply(this, arguments));
  }

  _createClass(SelectBehaviour, null, [{
    key: "formalName",
    value: function formalName() {
      return _enums_behaviours__WEBPACK_IMPORTED_MODULE_1__["SELECT"];
    }
  }]);

  return SelectBehaviour;
}(_persistent__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/actions/behavioural/volatile.js":
/*!********************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/behavioural/volatile.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return VolatileBehaviour; });
/* harmony import */ var _generic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./generic */ "./packages/muze-firebolt/src/actions/behavioural/generic.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../helper */ "./packages/muze-firebolt/src/helper/index.js");
/* harmony import */ var _enums_selection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../enums/selection */ "./packages/muze-firebolt/src/enums/selection.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





var VolatileBehaviour =
/*#__PURE__*/
function (_GenericBehaviour) {
  _inherits(VolatileBehaviour, _GenericBehaviour);

  function VolatileBehaviour() {
    _classCallCheck(this, VolatileBehaviour);

    return _possibleConstructorReturn(this, _getPrototypeOf(VolatileBehaviour).apply(this, arguments));
  }

  _createClass(VolatileBehaviour, [{
    key: "setSelectionSet",
    value: function setSelectionSet(addSet, selectionSet) {
      if (addSet === null) {
        selectionSet.reset();
      } else if (addSet.length) {
        // new add set
        var existingAddSet = addSet.filter(function (d) {
          return selectionSet._set[d] === _enums_selection__WEBPACK_IMPORTED_MODULE_2__["SELECTION_NEW_ENTRY"] || selectionSet._set[d] === _enums_selection__WEBPACK_IMPORTED_MODULE_2__["SELECTION_OLD_ENTRY"];
        });
        selectionSet.updateExit();

        var _selectionSet$getSets = selectionSet.getSets(),
            entrySet = _selectionSet$getSets.entrySet;

        selectionSet.reset(Object(_helper__WEBPACK_IMPORTED_MODULE_1__["getMergedSet"])(entrySet));
        selectionSet.add(addSet);
        selectionSet.update(existingAddSet);
      } else {
        selectionSet.remove(selectionSet.getCompleteSet());
      }
    }
  }]);

  return VolatileBehaviour;
}(_generic__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/actions/physical/click.js":
/*!**************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/physical/click.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helpers */ "./packages/muze-firebolt/src/actions/physical/helpers/index.js");


/**
 * Adds mouse interactions to target element.
 * @param {VisualUnit} instance instance of visual unit.
 * @param {SVGElement} targetEl Element on which the event listeners will be attached.
 * @param {Array} behaviours Array of behaviours
 */

/* istanbul ignore next */

var click = function click(firebolt) {
  return function (targetEl, behaviours) {
    var dispatchBehaviour = function dispatchBehaviour(args) {
      var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
      var payload = Object(_helpers__WEBPACK_IMPORTED_MODULE_1__["generatePayloadFromEvent"])(args, event, firebolt);
      behaviours.forEach(function (beh) {
        return firebolt.dispatchBehaviour(beh, payload);
      });
      event.stopPropagation();
    };

    targetEl.on('click', dispatchBehaviour);
  };
};

/* harmony default export */ __webpack_exports__["default"] = (click);

/***/ }),

/***/ "./packages/muze-firebolt/src/actions/physical/drag.js":
/*!*************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/physical/drag.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _helpers_drag_event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers/drag-event */ "./packages/muze-firebolt/src/actions/physical/helpers/drag-event.js");

/**
 * Adds dragging action to the target element.
 * @param {VisualUnit} instance Instance of visual unit.
 * @param {SVGElement} targetEl Element on which brushing action is needed.
 * @param {Array} behaviours Array of behaviours
 */

/* istanbul ignore next */

var drag = function drag(firebolt) {
  return function (targetEl, behaviours) {
    Object(_helpers_drag_event__WEBPACK_IMPORTED_MODULE_0__["attachDragEvent"])(targetEl, behaviours, firebolt);
  };
};

/* harmony default export */ __webpack_exports__["default"] = (drag);

/***/ }),

/***/ "./packages/muze-firebolt/src/actions/physical/helpers/drag-action-config.js":
/*!***********************************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/physical/helpers/drag-action-config.js ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");

/**
 * Gets the drag action configuration
 * @param {VisualUnit} instance instance of visual unit
 * @param {Object} config x y positions
 * @return {Object} Payload of behaviour
*/

/* istanbul ignore next */

var getDragActionConfig = function getDragActionConfig(sourceInfo, config, fieldsConfig) {
  if (!(sourceInfo.axes.x || sourceInfo.axes.y)) {
    return {
      criteria: null
    };
  }

  var axes = sourceInfo.axes;
  var xAxis = axes.x[0];
  var yAxis = axes.y[0];
  var axisFields = sourceInfo.fields;
  var xField = axisFields.x[0].getMembers()[0];
  var yField = axisFields.y[0].getMembers()[0];
  var xFieldType = fieldsConfig[xField].def.subtype;
  var yFieldType = fieldsConfig[yField].def.subtype;
  var dimensions = {};
  var stPos = config.startPos;
  var endPos = config.endPos;

  if (stPos.x === endPos.x && stPos.y === endPos.y) {
    return {
      criteria: null
    };
  }

  var dragDim = xFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["MeasureSubtype"].CONTINUOUS ? yFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["MeasureSubtype"].CONTINUOUS ? ['x', 'y'] : ['y'] : ['x'];
  var criteria = {};
  var isXDimension = xFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].CATEGORICAL;
  var isYDimension = yFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].CATEGORICAL;
  var xRange = xAxis.invertExtent(stPos.x, endPos.x);
  var yRange = yAxis.invertExtent(stPos.y, endPos.y);
  var selectedDomains = {
    x: stPos.x === endPos.x ? [] : isXDimension ? xRange : xRange.sort(function (a, b) {
      return a - b;
    }),
    y: stPos.y === endPos.y ? [] : isYDimension ? yRange : yRange.sort(function (a, b) {
      return a - b;
    })
  };
  var rangeObj = {};

  if (dragDim.length === 2) {
    rangeObj[xField] = selectedDomains.x;
    rangeObj[yField] = selectedDomains.y;

    if (xField === yField) {
      var xdom = selectedDomains.x;
      var ydom = selectedDomains.y;
      var min = xdom[0] > ydom[0] ? ydom : xdom;
      var max = min === ydom ? xdom : ydom;

      if (min[1] < max[0]) {
        rangeObj[xField] = [];
      } else {
        rangeObj[xField] = [max[0], min[1] < max[1] ? min[1] : max[1]];
      }

      dimensions.x = [stPos.x, endPos.x];
      dimensions.y = [stPos.y, endPos.y];
    }
  } else {
    criteria[dragDim[0]] = selectedDomains[dragDim[0]] || [];

    if (dragDim[0] === 'x') {
      rangeObj[xField] = criteria.x;

      if (xFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].CATEGORICAL) {
        dimensions.x = config.snap && stPos.x !== endPos.x ? xAxis.getNearestRange(stPos.x, endPos.x) : [stPos.x, endPos.x];
      }
    } else {
      rangeObj[yField] = criteria.y;

      if (yFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].CATEGORICAL) {
        dimensions.y = config.snap && stPos.y !== endPos.y ? yAxis.getNearestRange(stPos.y, endPos.y) : [stPos.y, endPos.y];
      }
    }
  }

  return {
    criteria: rangeObj,
    dimensions: dimensions
  };
};

/* harmony default export */ __webpack_exports__["default"] = (getDragActionConfig);

/***/ }),

/***/ "./packages/muze-firebolt/src/actions/physical/helpers/drag-event.js":
/*!***************************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/physical/helpers/drag-event.js ***!
  \***************************************************************************/
/*! exports provided: attachDragEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "attachDragEvent", function() { return attachDragEvent; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _drag_action_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./drag-action-config */ "./packages/muze-firebolt/src/actions/physical/helpers/drag-action-config.js");


/**
 * Adds dragging action to the target element.
 * @param {VisualUnit} instance Instance of visual unit.
 * @param {SVGElement} targetEl Element on which brushing action is needed.
 * @param {Array} behaviours Array of behaviours
 */

var attachDragEvent = function attachDragEvent(targetEl, behaviours, firebolt, touch) {
  var startPos = {};
  var endPos = {};
  var drawingInf;
  var d3Drag = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getD3Drag"])();
  var touchStart;
  targetEl.call(d3Drag().on('start', function () {
    var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
    startPos = {
      x: event.x,
      y: event.y
    };
    drawingInf = firebolt.context.getDrawingContext();
    touchStart = new Date().getTime();
  }).on('drag', function () {
    var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
    endPos = {
      x: event.x,
      y: event.y
    };

    if (touch && Math.abs(startPos.x - endPos.x) <= 5) {
      return;
    }

    endPos.x = Math.max(0, Math.min(endPos.x, drawingInf.width));
    endPos.y = Math.max(0, Math.min(endPos.y, drawingInf.height));
    var payload = Object(_drag_action_config__WEBPACK_IMPORTED_MODULE_1__["default"])(firebolt.context.getSourceInfo(), {
      startPos: startPos,
      endPos: endPos
    }, firebolt.context.data().getFieldsConfig());
    behaviours.forEach(function (beh) {
      return firebolt.dispatchBehaviour(beh, payload);
    });
  }).on('end', function () {
    var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
    endPos = {
      x: event.x,
      y: event.y
    };
    var duration = new Date().getTime() - touchStart;

    if (touch && duration > 100 && Math.abs(startPos.x - endPos.x) <= 5) {
      return;
    }

    endPos.x = Math.max(0, Math.min(endPos.x, drawingInf.width));
    endPos.y = Math.max(0, Math.min(endPos.y, drawingInf.height));
    var payload = Object(_drag_action_config__WEBPACK_IMPORTED_MODULE_1__["default"])(firebolt.context.getSourceInfo(), {
      startPos: startPos,
      endPos: endPos,
      snap: true
    }, firebolt.context.data().getFieldsConfig());
    payload.dragEnd = true;
    behaviours.forEach(function (beh) {
      return firebolt.dispatchBehaviour(beh, payload);
    });
  }));
};

/***/ }),

/***/ "./packages/muze-firebolt/src/actions/physical/helpers/index.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/physical/helpers/index.js ***!
  \**********************************************************************/
/*! exports provided: generatePayloadFromEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generatePayloadFromEvent", function() { return generatePayloadFromEvent; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");

var generatePayloadFromEvent = function generatePayloadFromEvent(args, event, firebolt) {
  var context = firebolt.context;
  var pos = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getClientPoint"])(context.getDrawingContext().svgContainer, event.touches ? event.touches[0] : event);
  var nearestPoint = context.getNearestPoint(pos.x, pos.y, {
    data: args,
    event: event
  });
  return {
    criteria: nearestPoint ? nearestPoint.id : null,
    showInPosition: nearestPoint.showInPosition,
    target: nearestPoint.target,
    position: pos
  };
};

/***/ }),

/***/ "./packages/muze-firebolt/src/actions/physical/hover.js":
/*!**************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/physical/hover.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-firebolt/src/enums/constants.js");


/**
 * Adds mouse interactions to target element.
 * @param {Firebolt} instance instance of firebolt.
 * @param {SVGElement} targetEl Element on which the event listeners will be attached.
 * @param {Array} behaviours Array of behaviours
 */

/* istanbul ignore next */

var hover = function hover(firebolt) {
  return function (targetEl, behaviours) {
    var dispatchBehaviour = function dispatchBehaviour(args) {
      var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
      var context = firebolt.context;
      var tooltipConf = context.config().interaction.tooltip;
      var mode = tooltipConf.mode;
      var pos = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getClientPoint"])(context.getDrawingContext().svgContainer, event);
      var nearestPoint = context.getNearestPoint(pos.x, pos.y, {
        getAllPoints: mode === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["CONSOLIDATED"] || mode === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["FRAGMENTED"],
        data: args,
        event: event
      });
      var payload = {
        criteria: nearestPoint ? nearestPoint.id : null,
        showInPosition: nearestPoint.showInPosition,
        target: nearestPoint.target,
        position: pos,
        mode: mode
      };
      behaviours.forEach(function (beh) {
        return firebolt.dispatchBehaviour(beh, payload);
      });
      event.stopPropagation();
    };

    targetEl.on('mouseover', dispatchBehaviour).on('mousemove', dispatchBehaviour).on('mouseout', function () {
      behaviours.forEach(function (beh) {
        return firebolt.dispatchBehaviour(beh, {
          criteria: null
        });
      });
    });
  };
};

/* harmony default export */ __webpack_exports__["default"] = (hover);

/***/ }),

/***/ "./packages/muze-firebolt/src/actions/physical/index.js":
/*!**************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/physical/index.js ***!
  \**************************************************************/
/*! exports provided: physicalActions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "physicalActions", function() { return physicalActions; });
/* harmony import */ var _drag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./drag */ "./packages/muze-firebolt/src/actions/physical/drag.js");
/* harmony import */ var _hover__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./hover */ "./packages/muze-firebolt/src/actions/physical/hover.js");
/* harmony import */ var _longtouch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./longtouch */ "./packages/muze-firebolt/src/actions/physical/longtouch.js");
/* harmony import */ var _touch_drag__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./touch-drag */ "./packages/muze-firebolt/src/actions/physical/touch-drag.js");
/* harmony import */ var _enums_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../enums/actions */ "./packages/muze-firebolt/src/enums/actions.js");
/* harmony import */ var _click__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./click */ "./packages/muze-firebolt/src/actions/physical/click.js");
var _physicalActions;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }







var physicalActions = (_physicalActions = {}, _defineProperty(_physicalActions, _enums_actions__WEBPACK_IMPORTED_MODULE_4__["DRAG"], _drag__WEBPACK_IMPORTED_MODULE_0__["default"]), _defineProperty(_physicalActions, _enums_actions__WEBPACK_IMPORTED_MODULE_4__["HOVER"], _hover__WEBPACK_IMPORTED_MODULE_1__["default"]), _defineProperty(_physicalActions, _enums_actions__WEBPACK_IMPORTED_MODULE_4__["CLICK"], _click__WEBPACK_IMPORTED_MODULE_5__["default"]), _defineProperty(_physicalActions, _enums_actions__WEBPACK_IMPORTED_MODULE_4__["LONGTOUCH"], _longtouch__WEBPACK_IMPORTED_MODULE_2__["longtouch"]), _defineProperty(_physicalActions, _enums_actions__WEBPACK_IMPORTED_MODULE_4__["TOUCHDRAG"], _touch_drag__WEBPACK_IMPORTED_MODULE_3__["touchdrag"]), _physicalActions);

/***/ }),

/***/ "./packages/muze-firebolt/src/actions/physical/longtouch.js":
/*!******************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/physical/longtouch.js ***!
  \******************************************************************/
/*! exports provided: longtouch */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "longtouch", function() { return longtouch; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helpers */ "./packages/muze-firebolt/src/actions/physical/helpers/index.js");
/* global setTimeout */


/**
 * Adds mouse interactions to target element.
 * @param {VisualUnit} instance instance of visual unit.
 * @param {SVGElement} targetEl Element on which the event listeners will be attached.
 * @param {Array} behaviours Array of behaviours
 */

var longtouch = function longtouch(firebolt) {
  return function (targetEl, behaviours) {
    var event;
    var touchEnd;

    var dispatchBehaviour = function dispatchBehaviour(args) {
      var payload = Object(_helpers__WEBPACK_IMPORTED_MODULE_1__["generatePayloadFromEvent"])(args, event, firebolt);
      behaviours.forEach(function (beh) {
        return firebolt.dispatchBehaviour(beh, payload);
      });
      event.stopPropagation();
    };

    touchEnd = false;
    event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
    targetEl.on('touchstart', function (args) {
      event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
      touchEnd = false;
      setTimeout(function () {
        if (!touchEnd) {
          dispatchBehaviour(args);
        } else {
          behaviours.forEach(function (beh) {
            return firebolt.dispatchBehaviour(beh, {
              criteria: null
            });
          });
        }
      }, 100);
    }).on('touchend', function () {
      touchEnd = true;
    });
  };
};

/***/ }),

/***/ "./packages/muze-firebolt/src/actions/physical/selection-box-drag.js":
/*!***************************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/physical/selection-box-drag.js ***!
  \***************************************************************************/
/*! exports provided: selectionBoxDrag */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectionBoxDrag", function() { return selectionBoxDrag; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _helpers_drag_action_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helpers/drag-action-config */ "./packages/muze-firebolt/src/actions/physical/helpers/drag-action-config.js");


var selectionBoxDrag = function selectionBoxDrag(firebolt) {
  return function (targetEl, behaviours) {
    var subject;
    var drawingInf;
    var context = firebolt.context;

    var onDrag = function onDrag(payload) {
      behaviours.forEach(function (action) {
        return firebolt.dispatchBehaviour(action, payload);
      });
    };

    var d3Drag = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getD3Drag"])();
    targetEl.call(d3Drag().on('start', function () {
      var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
      drawingInf = context.getDrawingContext();
      subject = event.subject;
    }).on('drag', function () {
      var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
      subject.x += event.dx;
      subject.y += event.dy;
      var width = drawingInf.width;
      var height = drawingInf.height;
      var x = Math.min(width - subject.width, Math.max(subject.x, 0));
      var y = Math.min(height - subject.height, Math.max(subject.y, 0));
      var y2 = y + subject.height;
      var x2 = x + subject.width;

      if (x >= 0 && x2 <= width && y >= 0 && y2 <= height) {
        var payload = Object(_helpers_drag_action_config__WEBPACK_IMPORTED_MODULE_1__["default"])(context.getSourceInfo(), {
          startPos: {
            x: x,
            y: y
          },
          endPos: {
            x: x2,
            y: y2
          }
        }, context.data().getFieldsConfig());
        onDrag(payload);
      }
    }).on('end', function () {
      var width = drawingInf.width;
      var height = drawingInf.height;
      var x = Math.min(width - subject.width, Math.max(subject.x, 0));
      var y = Math.min(height - subject.height, Math.max(subject.y, 0));
      var y2 = y + subject.height;
      var x2 = x + subject.width;

      if (x >= 0 && x2 <= width && y >= 0 && y2 <= height) {
        var payload = Object(_helpers_drag_action_config__WEBPACK_IMPORTED_MODULE_1__["default"])(context.getSourceInfo(), {
          startPos: {
            x: x,
            y: y
          },
          endPos: {
            x: x2,
            y: y2
          },
          snap: true
        }, context.data().getFieldsConfig());
        payload.dragEnd = true;
        onDrag(payload);
      }
    }));
  };
};

/***/ }),

/***/ "./packages/muze-firebolt/src/actions/physical/touch-drag.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-firebolt/src/actions/physical/touch-drag.js ***!
  \*******************************************************************/
/*! exports provided: touchdrag */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "touchdrag", function() { return touchdrag; });
/* harmony import */ var _helpers_drag_event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers/drag-event */ "./packages/muze-firebolt/src/actions/physical/helpers/drag-event.js");

/**
 * Adds dragging action to the target element.
 * @param {VisualUnit} instance Instance of visual unit.
 * @param {SVGElement} targetEl Element on which brushing action is needed.
 * @param {Array} behaviours Array of behaviours
 */

var touchdrag = function touchdrag(firebolt) {
  return function (targetEl, behaviours) {
    Object(_helpers_drag_event__WEBPACK_IMPORTED_MODULE_0__["attachDragEvent"])(targetEl, behaviours, firebolt, true);
  };
};

/***/ }),

/***/ "./packages/muze-firebolt/src/behaviour-effect-map.js":
/*!************************************************************!*\
  !*** ./packages/muze-firebolt/src/behaviour-effect-map.js ***!
  \************************************************************/
/*! exports provided: behaviourEffectMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "behaviourEffectMap", function() { return behaviourEffectMap; });
/* harmony import */ var _enums_behaviours__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./enums/behaviours */ "./packages/muze-firebolt/src/enums/behaviours.js");
var _behaviourEffectMap;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


var behaviourEffectMap = (_behaviourEffectMap = {}, _defineProperty(_behaviourEffectMap, _enums_behaviours__WEBPACK_IMPORTED_MODULE_0__["BRUSH"], ['selectionBox', {
  name: 'highlighter',
  options: {
    strategy: 'fade'
  }
}, 'brush-anchors']), _defineProperty(_behaviourEffectMap, "".concat(_enums_behaviours__WEBPACK_IMPORTED_MODULE_0__["BRUSH"], ",").concat(_enums_behaviours__WEBPACK_IMPORTED_MODULE_0__["SELECT"]), [{
  name: 'tooltip',
  options: {
    strategy: 'showSelectedItems',
    order: 0,
    filter: function filter(context) {
      return context.config().mode === 'fragmented';
    }
  }
}]), _defineProperty(_behaviourEffectMap, _enums_behaviours__WEBPACK_IMPORTED_MODULE_0__["HIGHLIGHT"], [{
  name: 'highlighter',
  options: {
    strategy: 'highlight'
  }
}, 'crossline', {
  name: 'tooltip',
  options: {
    order: 9999
  }
}, 'anchors']), _defineProperty(_behaviourEffectMap, _enums_behaviours__WEBPACK_IMPORTED_MODULE_0__["FILTER"], ['filter']), _defineProperty(_behaviourEffectMap, _enums_behaviours__WEBPACK_IMPORTED_MODULE_0__["SELECT"], [{
  name: 'highlighter',
  options: {
    strategy: 'focus'
  }
}, 'persistent-anchors']), _behaviourEffectMap);

/***/ }),

/***/ "./packages/muze-firebolt/src/enums/actions.js":
/*!*****************************************************!*\
  !*** ./packages/muze-firebolt/src/enums/actions.js ***!
  \*****************************************************/
/*! exports provided: DRAG, HOVER, SELECTIONDRAG, CLICK, LONGTOUCH, TOUCHDRAG, ALL_ACTIONS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DRAG", function() { return DRAG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HOVER", function() { return HOVER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SELECTIONDRAG", function() { return SELECTIONDRAG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLICK", function() { return CLICK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LONGTOUCH", function() { return LONGTOUCH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOUCHDRAG", function() { return TOUCHDRAG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ALL_ACTIONS", function() { return ALL_ACTIONS; });
var DRAG = 'drag';
var HOVER = 'hover';
var SELECTIONDRAG = 'selectiondrag';
var CLICK = 'click';
var LONGTOUCH = 'longtouch';
var TOUCHDRAG = 'touchdrag';
var ALL_ACTIONS = '*';

/***/ }),

/***/ "./packages/muze-firebolt/src/enums/behaviours.js":
/*!********************************************************!*\
  !*** ./packages/muze-firebolt/src/enums/behaviours.js ***!
  \********************************************************/
/*! exports provided: BRUSH, HIGHLIGHT, TOOLTIP, FILTER, SELECT */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BRUSH", function() { return BRUSH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HIGHLIGHT", function() { return HIGHLIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOOLTIP", function() { return TOOLTIP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FILTER", function() { return FILTER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SELECT", function() { return SELECT; });
var BRUSH = 'brush';
var HIGHLIGHT = 'highlight';
var TOOLTIP = 'tooltip';
var FILTER = 'filter';
var SELECT = 'select';

/***/ }),

/***/ "./packages/muze-firebolt/src/enums/constants.js":
/*!*******************************************************!*\
  !*** ./packages/muze-firebolt/src/enums/constants.js ***!
  \*******************************************************/
/*! exports provided: CLASSPREFIX, CONSOLIDATED, FRAGMENTED */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLASSPREFIX", function() { return CLASSPREFIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CONSOLIDATED", function() { return CONSOLIDATED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FRAGMENTED", function() { return FRAGMENTED; });
var CLASSPREFIX = 'muze';
var CONSOLIDATED = 'consolidated';
var FRAGMENTED = 'fragmented';

/***/ }),

/***/ "./packages/muze-firebolt/src/enums/selection.js":
/*!*******************************************************!*\
  !*** ./packages/muze-firebolt/src/enums/selection.js ***!
  \*******************************************************/
/*! exports provided: SELECTION_NEW_ENTRY, SELECTION_NEW_EXIT, SELECTION_NULL, SELECTION_OLD_ENTRY, SELECTION_OLD_EXIT */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SELECTION_NEW_ENTRY", function() { return SELECTION_NEW_ENTRY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SELECTION_NEW_EXIT", function() { return SELECTION_NEW_EXIT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SELECTION_NULL", function() { return SELECTION_NULL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SELECTION_OLD_ENTRY", function() { return SELECTION_OLD_ENTRY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SELECTION_OLD_EXIT", function() { return SELECTION_OLD_EXIT; });
var SELECTION_NEW_ENTRY = 1;
var SELECTION_NEW_EXIT = -1;
var SELECTION_NULL = 0;
var SELECTION_OLD_ENTRY = 2;
var SELECTION_OLD_EXIT = -2;


/***/ }),

/***/ "./packages/muze-firebolt/src/firebolt.js":
/*!************************************************!*\
  !*** ./packages/muze-firebolt/src/firebolt.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Firebolt; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_actions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enums/actions */ "./packages/muze-firebolt/src/enums/actions.js");
/* harmony import */ var _selection_set__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./selection-set */ "./packages/muze-firebolt/src/selection-set/index.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helper */ "./packages/muze-firebolt/src/helper/index.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }





/**
 * This class is responsible for dispatching behavioural actions and side effects. It also keeps the information of
 * registered physical actions, behavioural actions and side effects. Also, it keeps the map of physical and behavioural
 * actions and behavioural actions and side effects. Whenever any behavioural action is dispatched, it also propagates
 * the rows which got affected to the other datamodels. This class is initialized by {@link VisualUnit} and legend to
 * manage it's interaction.
 *
 * @public
 * @class Firebolt
 * @module Firebolt
 */

var Firebolt =
/*#__PURE__*/
function () {
  function Firebolt(context, actions, sideEffects, behaviourEffectMap) {
    _classCallCheck(this, Firebolt);

    this.context = context;
    this._sideEffectDefinitions = {};
    this._sideEffects = {};
    this._propagationInf = {};
    this._actions = {
      behavioural: {},
      physical: {}
    };
    this._selectionSet = {};
    this._volatileSelectionSet = {};
    this._propagationFields = {};
    this._sourceSideEffects = {
      selectionBox: function selectionBox() {
        return false;
      }
    };
    this._propagationBehaviourMap = {};
    this._sourceBehaviours = {};
    this._actionBehaviourMap = {};
    this._config = {};
    this._behaviourEffectMap = {};
    this._entryExitSet = {};
    this._actionHistory = {};
    this._queuedSideEffects = {};
    this.mapSideEffects(behaviourEffectMap);
    this.registerBehaviouralActions(actions.behavioural);
    this.registerSideEffects(sideEffects);
    this.registerPhysicalBehaviouralMap(actions.physicalBehaviouralMap);
    this.registerPhysicalActions(actions.physical);
  }

  _createClass(Firebolt, [{
    key: "config",
    value: function config() {
      if (arguments.length) {
        this._config = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(this._config, arguments.length <= 0 ? undefined : arguments[0]);
        return this;
      }

      return this._config;
    }
  }, {
    key: "mapSideEffects",
    value: function mapSideEffects(behEffectMap) {
      var behaviourEffectMap = this._behaviourEffectMap;

      for (var key in behEffectMap) {
        if ({}.hasOwnProperty.call(behEffectMap, key)) {
          var sideEffects = behEffectMap[key] || [];
          var preventDefaultActions = false;
          var effectNames = void 0;

          if (Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["isSimpleObject"])(sideEffects)) {
            effectNames = sideEffects.effects;
            preventDefaultActions = sideEffects.preventDefaultActions;
          } else {
            effectNames = sideEffects;
          }

          !behaviourEffectMap[key] && (behaviourEffectMap[key] = []);
          this._behaviourEffectMap[key] = _toConsumableArray(new Set(preventDefaultActions ? effectNames : [].concat(_toConsumableArray(behaviourEffectMap[key]), _toConsumableArray(effectNames))));
        }
      }

      return this;
    }
  }, {
    key: "registerBehaviouralActions",
    value: function registerBehaviouralActions(actions) {
      var behaviours = Object(_helper__WEBPACK_IMPORTED_MODULE_3__["initializeBehaviouralActions"])(this, actions);
      this.prepareSelectionSets(behaviours);
      Object.assign(this._actions.behavioural, behaviours);
      return this;
    }
  }, {
    key: "prepareSelectionSets",
    value: function prepareSelectionSets() {
      return this;
    }
  }, {
    key: "registerSideEffects",
    value: function registerSideEffects(sideEffects) {
      for (var key in sideEffects) {
        this._sideEffectDefinitions[sideEffects[key].formalName()] = sideEffects[key];
      }

      this.initializeSideEffects();
      return this;
    }
  }, {
    key: "applySideEffects",
    value: function applySideEffects(sideEffects, selectionSet, payload) {
      var _this = this;

      var sideEffectStore = this.sideEffects();
      var actionHistory = this._actionHistory;
      var queuedSideEffects = this._queuedSideEffects;
      sideEffects.forEach(function (sideEffect) {
        var options;
        var name;
        var effects = sideEffect.effects;
        var behaviours = sideEffect.behaviours;
        var combinedSet = Object(_helper__WEBPACK_IMPORTED_MODULE_3__["unionSets"])(_this, behaviours, selectionSet);
        effects.forEach(function (effect) {
          if (_typeof(effect) === 'object') {
            name = effect.name;
            options = effect.options;
          } else {
            name = effect;
          }

          var sideEffectInstance = sideEffectStore[name];

          if (sideEffectInstance.isEnabled()) {
            if (!sideEffectInstance.constructor.mutates() && Object.values(actionHistory).some(function (d) {
              return d.isMutableAction;
            })) {
              queuedSideEffects["".concat(name, "-").concat(behaviours.join())] = {
                name: name,
                params: [combinedSet, payload, options]
              };
            } else {
              _this.dispatchSideEffect(name, combinedSet, payload, options);
            }
          }
        });
      });
      return this;
    }
  }, {
    key: "dispatchSideEffect",
    value: function dispatchSideEffect(name, selectionSet, payload) {
      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      var sideEffectStore = this.sideEffects();
      var sideEffect = sideEffectStore[name];
      var disable = false;

      if (options.filter && options.filter(sideEffect)) {
        disable = true;
      }

      !disable && sideEffectStore[name].apply(selectionSet, payload, options);
    }
  }, {
    key: "registerPropagationBehaviourMap",
    value: function registerPropagationBehaviourMap(map) {
      this._propagationBehaviourMap = Object.assign(this._propagationBehaviourMap, map || {});
      return this;
    }
  }, {
    key: "dispatchBehaviour",
    value: function dispatchBehaviour(behaviour, payload) {
      var propagationInfo = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var propagate = propagationInfo.propagate !== undefined ? propagationInfo.propagate : true;
      var behaviouralActions = this._actions.behavioural;
      var action = behaviouralActions[behaviour];
      var behaviourEffectMap = this._behaviourEffectMap;
      var sideEffects = Object(_helper__WEBPACK_IMPORTED_MODULE_3__["getSideEffects"])(behaviour, behaviourEffectMap);
      this._propagationInf = propagationInfo;

      if (action) {
        var selectionSet = action.dispatch(payload);
        var propagationSelectionSet = this.getPropagationSelectionSet(selectionSet);
        this._entryExitSet[behaviour] = propagationSelectionSet;
        var shouldApplySideEffects = this.shouldApplySideEffects(propagate);

        if (propagate) {
          this.propagate(behaviour, payload, selectionSet.find(function (d) {
            return d.sourceSelectionSet;
          }), sideEffects);
        }

        if (shouldApplySideEffects) {
          var applicableSideEffects = this.getApplicableSideEffects(sideEffects, payload, propagationInfo);
          this.applySideEffects(applicableSideEffects, propagationSelectionSet, payload);
        }
      }

      return this;
    }
  }, {
    key: "getPropagationSelectionSet",
    value: function getPropagationSelectionSet(selectionSet) {
      return selectionSet.find(function (d) {
        return !d.sourceSelectionSet;
      });
    }
  }, {
    key: "shouldApplySideEffects",
    value: function shouldApplySideEffects() {
      return true;
    }
  }, {
    key: "changeBehaviourStateOnPropagation",
    value: function changeBehaviourStateOnPropagation(behaviour, value) {
      if (value instanceof Function) {
        this._sourceBehaviours[behaviour] = value;
      } else {
        this._sourceBehaviours[behaviour] = function () {
          return value;
        };
      }

      return this;
    }
  }, {
    key: "changeSideEffectStateOnPropagation",
    value: function changeSideEffectStateOnPropagation(sideEffect, value) {
      if (value instanceof Function) {
        this._sourceSideEffects[sideEffect] = value;
      } else {
        this._sourceSideEffects[sideEffect] = function () {
          return value;
        };
      }
    }
  }, {
    key: "propagate",
    value: function propagate() {
      return this;
    }
  }, {
    key: "sideEffects",
    value: function sideEffects() {
      if (arguments.length) {
        this._sideEffects = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._sideEffects;
    }
  }, {
    key: "enableSideEffects",
    value: function enableSideEffects(fn) {
      Object(_helper__WEBPACK_IMPORTED_MODULE_3__["changeSideEffectAvailability"])(this, fn, true);
      return this;
    }
  }, {
    key: "disableSideEffects",
    value: function disableSideEffects(fn) {
      Object(_helper__WEBPACK_IMPORTED_MODULE_3__["changeSideEffectAvailability"])(this, fn, false);
      return this;
    }
  }, {
    key: "dissociateBehaviour",
    value: function dissociateBehaviour(behaviour, physicalAction) {
      var actionBehaviourMap = this._actionBehaviourMap;

      for (var key in actionBehaviourMap) {
        if (key === physicalAction) {
          var behaviourMap = actionBehaviourMap[key];
          behaviourMap.behaviours = behaviourMap.behaviours.filter(function (d) {
            return d !== behaviour;
          });
          this.mapActionsAndBehaviour(key);
        }
      }

      return this;
    }
  }, {
    key: "dissociateSideEffect",
    value: function dissociateSideEffect(sideEffect, behaviour) {
      var behaviourEffectMap = this._behaviourEffectMap;
      behaviourEffectMap[behaviour] = behaviourEffectMap[behaviour].filter(function (d) {
        return (d.name || d) !== sideEffect;
      });
      return this;
    }
  }, {
    key: "getApplicableSideEffects",
    value: function getApplicableSideEffects(sideEffects) {
      return sideEffects;
    }
  }, {
    key: "attachPropagationListener",
    value: function attachPropagationListener(dataModel) {
      dataModel.unsubscribe('propagation');
      dataModel.on('propagation', this.onDataModelPropagation());
      return this;
    }
  }, {
    key: "onDataModelPropagation",
    value: function onDataModelPropagation() {
      var _this2 = this;

      return function (propValue) {
        var payload = propValue.payload;
        var action = payload.action;

        _this2.dispatchBehaviour(action, payload, {
          propagate: false
        });
      };
    }
  }, {
    key: "createSelectionSet",
    value: function createSelectionSet(uniqueIds, behaviouralActions) {
      var behaviours = behaviouralActions || this._actions.behavioural;
      var selectionSet = this._selectionSet;
      var volatileSelectionSet = this._volatileSelectionSet;

      for (var key in behaviours) {
        if ({}.hasOwnProperty.call(behaviours, key)) {
          selectionSet[key] = new _selection_set__WEBPACK_IMPORTED_MODULE_2__["default"](uniqueIds);
          volatileSelectionSet[key] = new _selection_set__WEBPACK_IMPORTED_MODULE_2__["default"](uniqueIds, true);
        }
      }

      this._volatileSelectionSet = volatileSelectionSet;
      this.selectionSet(selectionSet);
      return this;
    }
  }, {
    key: "selectionSet",
    value: function selectionSet() {
      if (arguments.length) {
        this._selectionSet = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._selectionSet;
    }
  }, {
    key: "initializeSideEffects",
    value: function initializeSideEffects() {
      var sideEffectDefinitions = this._sideEffectDefinitions;
      this.sideEffects(Object(_helper__WEBPACK_IMPORTED_MODULE_3__["initializeSideEffects"])(this, sideEffectDefinitions));
      return this;
    }
  }, {
    key: "registerPhysicalActions",
    value: function registerPhysicalActions(actions) {
      var initedActions = Object(_helper__WEBPACK_IMPORTED_MODULE_3__["initializePhysicalActions"])(this, actions);
      Object.assign(this._actions.physical, initedActions);
      return this;
    }
    /**
     * Allows to propagate the datamodel with only the supplied fields. When propagation is done, then the fields
     * which are supplied for the specified behavioural action is propagated.
     *
     * @public
     *
     * @param {string} action Name of behavioural action. If '*' is specified, then for all behavioural actions it is
     * applied.
     * @param {Array} fields Array of field names which will be propagated.
     * @param {boolean} append If true, then it is appended to the existing propagation data model fields else only
     * those fields are projected from propagation data model and propagated.
     *
     * @return {Firebolt} Instance of firebolt
     */

  }, {
    key: "propagateWith",
    value: function propagateWith(action, fields) {
      var append = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      var behaviouralActions = this._actions.behavioural;

      if (fields.length) {
        if (action === _enums_actions__WEBPACK_IMPORTED_MODULE_1__["ALL_ACTIONS"]) {
          for (var key in behaviouralActions) {
            this._propagationFields[key] = {
              fields: fields,
              append: append
            };
          }
        } else {
          this._propagationFields[action] = {
            fields: fields,
            append: append
          };
        }

        return this;
      }

      return this._propagationFields;
    }
    /**
     * Map actions and behaviours
     * @return {Firebolt} Firebolt instance
     */

  }, {
    key: "mapActionsAndBehaviour",
    value: function mapActionsAndBehaviour(phyAction) {
      var initedPhysicalActions = this._actions.physical;
      var map = this._actionBehaviourMap;

      for (var action in map) {
        if (!{}.hasOwnProperty.call(action, map) && action === (phyAction || action)) {
          var target = void 0;
          var mapObj = map[action];
          target = mapObj.target;
          var touch = mapObj.touch;

          if (!target) {
            target = this.context.getDefaultTargetContainer();
          }

          var bind = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["hasTouch"])() ? touch === true || touch === undefined : !touch;
          bind && this.bindActionWithBehaviour(initedPhysicalActions[action], target, mapObj.behaviours);
        }
      }

      return this;
    }
  }, {
    key: "registerPhysicalBehaviouralMap",
    value: function registerPhysicalBehaviouralMap(map) {
      this._actionBehaviourMap = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(this._actionBehaviourMap, map);
      return this;
    }
    /**
     * Binds a target element with an action.
     *
     * @param {Function} action Action method
     * @param {string} target Class name of element
     * @param {Array} behaviourList Array of behaviours
     * @return {FireBolt} Instance of firebolt
     */

  }, {
    key: "bindActionWithBehaviour",
    value: function bindActionWithBehaviour(action, targets, behaviourList) {
      var _this3 = this;

      if (typeof targets === 'string') {
        targets = [targets];
      }

      targets.forEach(function (target) {
        var mount = _this3.context.mount();

        var nodes = target.node instanceof Function ? target : Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(mount).selectAll(target);

        if (!nodes.empty()) {
          if (nodes instanceof Array) {
            nodes.forEach(function (node) {
              action(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(node), behaviourList);
            });
          } else {
            action(nodes, behaviourList);
          }
        }
      });
      return this;
    }
  }, {
    key: "getPropagationInf",
    value: function getPropagationInf() {
      return this._propagationInf;
    }
  }, {
    key: "getAddSetFromCriteria",
    value: function getAddSetFromCriteria(criteria) {
      var propagationInf = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var context = this.context;
      var filteredDataModel = propagationInf.data ? propagationInf.data : context.getDataModelFromIdentifiers(criteria, 'all');
      var xFields = context.fields().x || [];
      var yFields = context.fields().y || [];
      var xMeasures = xFields.every(function (field) {
        return field.type() === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE;
      });
      var yMeasures = yFields.every(function (field) {
        return field.type() === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE;
      });
      return {
        model: filteredDataModel,
        uids: criteria === null ? null : propagationInf.data ? Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["filterPropagationModel"])(this.getFullData(), propagationInf.data[0], xMeasures && yMeasures).getData().uids : filteredDataModel[0].getData().uids
      };
    }
  }, {
    key: "getSelectionSets",
    value: function getSelectionSets(action) {
      var sourceId = this.context.id();
      var propagationInf = this._propagationInf || {};
      var propagationSource = propagationInf.sourceId;
      var applicableSelectionSets = [];

      if (propagationSource !== sourceId) {
        applicableSelectionSets = [this._volatileSelectionSet[action]];
      }

      if (propagationSource) {
        applicableSelectionSets.push(this.selectionSet()[action]);
      }

      return applicableSelectionSets;
    }
  }, {
    key: "getFullData",
    value: function getFullData() {
      return this.context.data();
    }
  }, {
    key: "resetted",
    value: function resetted() {
      return this._resetted;
    }
    /**
     * Returns the entry and exit set information of the specified behavioural action.
     *
     * @public
     *
     * @param {string} behaviour Name of behavioural action.
     *
     * @return {Object} Entry exit set information.
     */

  }, {
    key: "getEntryExitSet",
    value: function getEntryExitSet(behaviour) {
      return this._entryExitSet[behaviour];
    }
  }]);

  return Firebolt;
}();



/***/ }),

/***/ "./packages/muze-firebolt/src/helper/index.js":
/*!****************************************************!*\
  !*** ./packages/muze-firebolt/src/helper/index.js ***!
  \****************************************************/
/*! exports provided: initializeSideEffects, initializeBehaviouralActions, initializePhysicalActions, changeSideEffectAvailability, getMergedSet, getSourceFields, getModelFromSet, getSetInfo, getSideEffects, unionSets */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initializeSideEffects", function() { return initializeSideEffects; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initializeBehaviouralActions", function() { return initializeBehaviouralActions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initializePhysicalActions", function() { return initializePhysicalActions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "changeSideEffectAvailability", function() { return changeSideEffectAvailability; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMergedSet", function() { return getMergedSet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSourceFields", function() { return getSourceFields; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getModelFromSet", function() { return getModelFromSet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSetInfo", function() { return getSetInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSideEffects", function() { return getSideEffects; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unionSets", function() { return unionSets; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_selection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/selection */ "./packages/muze-firebolt/src/enums/selection.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }



var initializeSideEffects = function initializeSideEffects(context, sideEffects) {
  var sideEffectsMap = context._sideEffects;
  var config = context.config();
  sideEffects = sideEffects instanceof Array ? sideEffects : Object.values(sideEffects);
  sideEffects.forEach(function (SideEffect) {
    var formalName = SideEffect.formalName();
    var sideEffectInstance = sideEffectsMap[formalName];
    sideEffectsMap[formalName] = sideEffectInstance || new SideEffect(context);
    var sideEffectConf = config[formalName];
    sideEffectConf && sideEffectsMap[formalName].config(sideEffectConf);
  });
  return sideEffectsMap;
};
var initializeBehaviouralActions = function initializeBehaviouralActions(context, actions) {
  var dispatchableBehaviours = {};
  actions = actions instanceof Array ? actions : Object.values(actions);
  actions.forEach(function (Action) {
    dispatchableBehaviours[Action.formalName()] = new Action(context);
  });
  return dispatchableBehaviours;
};
var initializePhysicalActions = function initializePhysicalActions(context, actions) {
  var physicalActions = {};

  for (var name in actions) {
    if (!{}.hasOwnProperty.call(name, actions)) {
      physicalActions[name] = actions[name](context);
    }
  }

  return physicalActions;
};
var changeSideEffectAvailability = function changeSideEffectAvailability(context, fn, toEnable) {
  var sideEffects = context.sideEffects();

  for (var key in sideEffects) {
    if ({}.hasOwnProperty.call(sideEffects, key)) {
      var change = true;

      if (fn && fn(key) === false) {
        change = false;
      }

      if (change) {
        toEnable ? sideEffects[key].enable() : sideEffects[key].disable();
      }
    }
  }
};
var getMergedSet = function getMergedSet(set) {
  return _toConsumableArray(new Set([].concat(_toConsumableArray(set[0]), _toConsumableArray(set[1]))));
};
var getSourceFields = function getSourceFields(propagationInf) {
  var criteria = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var sourceIdentifiers = propagationInf.sourceIdentifiers;
  var sourceFields;

  if (sourceIdentifiers) {
    sourceFields = sourceIdentifiers.getSchema().map(function (d) {
      return d.name;
    });
  } else if (criteria instanceof Array) {
    sourceFields = criteria[0];
  } else {
    sourceFields = Object.keys(criteria || {});
  }

  return sourceFields;
};
var conditionsMap = {
  newEntry: [_enums_selection__WEBPACK_IMPORTED_MODULE_1__["SELECTION_NEW_ENTRY"]],
  oldEntry: [_enums_selection__WEBPACK_IMPORTED_MODULE_1__["SELECTION_OLD_ENTRY"]],
  mergedEnter: [_enums_selection__WEBPACK_IMPORTED_MODULE_1__["SELECTION_NEW_ENTRY"], _enums_selection__WEBPACK_IMPORTED_MODULE_1__["SELECTION_OLD_ENTRY"]],
  newExit: [_enums_selection__WEBPACK_IMPORTED_MODULE_1__["SELECTION_NEW_EXIT"]],
  oldExit: [_enums_selection__WEBPACK_IMPORTED_MODULE_1__["SELECTION_OLD_EXIT"]],
  mergedExit: [_enums_selection__WEBPACK_IMPORTED_MODULE_1__["SELECTION_NEW_EXIT"], _enums_selection__WEBPACK_IMPORTED_MODULE_1__["SELECTION_OLD_EXIT"]],
  complete: []
};
var getModelFromSet = function getModelFromSet(type, model, set) {
  if (model) {
    return model.select(function (fields, i) {
      return conditionsMap[type].some(function (condition) {
        return set[i] === condition;
      });
    }, {
      saveChild: false
    });
  }

  return null;
};
var getSetInfo = function getSetInfo(type, set, config) {
  var model = null;
  var filteredDataModel = config.filteredDataModel;
  var selectionSet = config.selectionSet;

  if (!config.propagationData) {
    if (selectionSet.resetted()) {
      model = null;
    } else {
      model = getModelFromSet(type, config.dataModel, config.selectionSet._set);
    }
  } else if (filteredDataModel) {
    model = type === 'mergedEnter' ? filteredDataModel[0] : filteredDataModel[1];
  }

  return {
    uids: set,
    length: set.length,
    model: model
  };
};
var getSideEffects = function getSideEffects(behaviour, behaviourEffectMap) {
  var sideEffects = [];

  for (var key in behaviourEffectMap) {
    var behaviours = key.split(',');
    var found = behaviours.some(function (d) {
      return d === behaviour;
    });

    if (found) {
      sideEffects.push({
        effects: behaviourEffectMap[key],
        behaviours: behaviours
      });
    }
  }

  return sideEffects;
};
var unionSets = function unionSets(context, behaviours) {
  var combinedSet = {};
  var models = {
    mergedEnter: null,
    mergedExit: null
  };
  behaviours.forEach(function (behaviour) {
    var entryExitSet = context._entryExitSet[behaviour];

    if (entryExitSet) {
      combinedSet = Object.assign(combinedSet, Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["clone"])(entryExitSet));
      ['mergedEnter', 'mergedExit'].forEach(function (type) {
        var model = entryExitSet[type].model;
        var existingModel = models[type];

        if (!existingModel) {
          existingModel = models[type] = model;
        } else if ("".concat(model.getSchema().map(function (d) {
          return d.name;
        }).sort()) === "".concat(existingModel.getSchema().map(function (d) {
          return d.name;
        }).sort())) {
          existingModel = models[type] = model.union(existingModel);
        } else {
          existingModel = model;
        }

        combinedSet[type].model = existingModel;
      });
    }
  });
  return combinedSet;
};

/***/ }),

/***/ "./packages/muze-firebolt/src/index.js":
/*!*********************************************!*\
  !*** ./packages/muze-firebolt/src/index.js ***!
  \*********************************************/
/*! exports provided: behaviouralActions, VolatileBehaviour, GenericBehaviour, PersistentBehaviour, physicalActions, Firebolt, BEHAVIOURS, ACTIONS, sideEffects, SelectionSet, behaviourEffectMap, SurrogateSideEffect, SpawnableSideEffect, GenericSideEffect, SELECTION */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _firebolt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./firebolt */ "./packages/muze-firebolt/src/firebolt.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Firebolt", function() { return _firebolt__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _actions_behavioural__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./actions/behavioural */ "./packages/muze-firebolt/src/actions/behavioural/index.js");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "behaviouralActions", function() { return _actions_behavioural__WEBPACK_IMPORTED_MODULE_1__; });
/* harmony import */ var _actions_behavioural_persistent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./actions/behavioural/persistent */ "./packages/muze-firebolt/src/actions/behavioural/persistent.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PersistentBehaviour", function() { return _actions_behavioural_persistent__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _actions_behavioural_generic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./actions/behavioural/generic */ "./packages/muze-firebolt/src/actions/behavioural/generic.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GenericBehaviour", function() { return _actions_behavioural_generic__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _actions_behavioural_volatile__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./actions/behavioural/volatile */ "./packages/muze-firebolt/src/actions/behavioural/volatile.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VolatileBehaviour", function() { return _actions_behavioural_volatile__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _actions_physical__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./actions/physical */ "./packages/muze-firebolt/src/actions/physical/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "physicalActions", function() { return _actions_physical__WEBPACK_IMPORTED_MODULE_5__["physicalActions"]; });

/* harmony import */ var _enums_behaviours__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./enums/behaviours */ "./packages/muze-firebolt/src/enums/behaviours.js");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "BEHAVIOURS", function() { return _enums_behaviours__WEBPACK_IMPORTED_MODULE_6__; });
/* harmony import */ var _enums_actions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./enums/actions */ "./packages/muze-firebolt/src/enums/actions.js");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "ACTIONS", function() { return _enums_actions__WEBPACK_IMPORTED_MODULE_7__; });
/* harmony import */ var _enums_selection__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./enums/selection */ "./packages/muze-firebolt/src/enums/selection.js");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "SELECTION", function() { return _enums_selection__WEBPACK_IMPORTED_MODULE_8__; });
/* harmony import */ var _side_effects_surrogate__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./side-effects/surrogate */ "./packages/muze-firebolt/src/side-effects/surrogate.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SurrogateSideEffect", function() { return _side_effects_surrogate__WEBPACK_IMPORTED_MODULE_9__["default"]; });

/* harmony import */ var _side_effects_spawnable__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./side-effects/spawnable */ "./packages/muze-firebolt/src/side-effects/spawnable.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SpawnableSideEffect", function() { return _side_effects_spawnable__WEBPACK_IMPORTED_MODULE_10__["default"]; });

/* harmony import */ var _side_effects_generic__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./side-effects/generic */ "./packages/muze-firebolt/src/side-effects/generic/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GenericSideEffect", function() { return _side_effects_generic__WEBPACK_IMPORTED_MODULE_11__["default"]; });

/* harmony import */ var _side_effects__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./side-effects */ "./packages/muze-firebolt/src/side-effects/index.js");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "sideEffects", function() { return _side_effects__WEBPACK_IMPORTED_MODULE_12__; });
/* harmony import */ var _selection_set__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./selection-set */ "./packages/muze-firebolt/src/selection-set/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SelectionSet", function() { return _selection_set__WEBPACK_IMPORTED_MODULE_13__["default"]; });

/* harmony import */ var _behaviour_effect_map__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./behaviour-effect-map */ "./packages/muze-firebolt/src/behaviour-effect-map.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "behaviourEffectMap", function() { return _behaviour_effect_map__WEBPACK_IMPORTED_MODULE_14__["behaviourEffectMap"]; });


















/***/ }),

/***/ "./packages/muze-firebolt/src/selection-set/index.js":
/*!***********************************************************!*\
  !*** ./packages/muze-firebolt/src/selection-set/index.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _selection_set__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./selection-set */ "./packages/muze-firebolt/src/selection-set/selection-set.js");

/* harmony default export */ __webpack_exports__["default"] = (_selection_set__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./packages/muze-firebolt/src/selection-set/selection-set.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-firebolt/src/selection-set/selection-set.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _enums_selection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums/selection */ "./packages/muze-firebolt/src/enums/selection.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }


/* eslint-disable guard-for-in */

/**
 * This component is used to keep track of the row tuples of the data which gets added and removed. This keeps
 * information of which rows are in previous and new entry set and previous and new exit set. This is initialized by
 * {@link Firebolt}.
 *
 * @public
 *
 * @class SelectionSet
 */

var SelectionSet =
/*#__PURE__*/
function () {
  /**
   * Creates an instance of selection set
   *
   * @param {Array.<string>} completeSet Set of unique ids.
   */
  function SelectionSet(completeSet, _volatile) {
    _classCallCheck(this, SelectionSet);

    this.completeSet = completeSet;
    this._set = completeSet.reduce(function (obj, key) {
      obj[key] = _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NULL"];
      return obj;
    }, {});
    this._volatile = _volatile;
    this._completeSetCount = completeSet.length;
    this._lockedSelection = {};
    this._resetted = true;
  }
  /**
   * Adds a set of ids to the selection set. This also moves the other rows to exit set.
   *
   * @public
   * @param {Array.<number|string>} ids Array of unique ids.
   *
   * @return {SelectionSet} Instance of selection set.
   */


  _createClass(SelectionSet, [{
    key: "add",
    value: function add(ids) {
      this._resetted = false;
      var set = this._set; // from exitset to entryset

      ids.forEach(function (i) {
        set[i] = _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_ENTRY"];
      });

      for (var key in set) {
        if (set[key] !== _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_ENTRY"] && set[key] !== _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_ENTRY"]) {
          set[key] = set[key] < 0 ? _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_EXIT"] : _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_EXIT"];
        }
      }

      return this;
    }
    /**
     * Adds an array of ids to the old entry set.
     *
     * @param {Array.<number|string>} ids Array of unique ids
     *
     * @return {SelectionSet} Instance of selection set.
     */

  }, {
    key: "update",
    value: function update(ids) {
      var set = this._set; // from exitset to entryset

      ids.forEach(function (i) {
        set[i] = _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_ENTRY"];
      });
      return this;
    }
    /**
     * Moves all ids which in new entry set  to old entry set.
     *
     * @public
     * @param {Array.<number|string>} ids Array of unique ids
     *
     * @return {SelectionSet} Instance of selection set.
     */

  }, {
    key: "updateEntry",
    value: function updateEntry() {
      var set = this._set; // from exitset to entryset

      for (var key in set) {
        set[key] = set[key] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_ENTRY"] ? _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_ENTRY"] : set[key];
      }

      return this;
    }
    /**
     * Moves an array of ids which are in new exit set to old exit set.
     *
     * @public
     *
     * @param {Array.<number|string>} ids Array of unique ids.
     *
     * @return {SelectionSet} Instance of selection set.
     */

  }, {
    key: "updateExit",
    value: function updateExit() {
      var set = this._set; // from exitset to entryset

      for (var key in set) {
        set[key] = set[key] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_EXIT"] ? _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_EXIT"] : set[key];
      }

      return this;
    }
    /**
     * Removes an array of ids from the selection set. It also moves the remaining row ids to entry set.
     *
     * @public
     * @param {Array.<string>} ids Array of unique ids
     *
     * @return {SelectionSet}  Instance of selection set
     */

  }, {
    key: "remove",
    value: function remove(ids) {
      this._resetted = false;
      var set = this._set;
      ids.forEach(function (i) {
        set[i] = _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_EXIT"];
      });

      for (var key in set) {
        if (set[key] !== _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_EXIT"] && set[key] !== _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_EXIT"]) {
          set[key] = set[key] === 0 ? _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_ENTRY"] : _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_ENTRY"];
        }
      }

      return this;
    }
  }, {
    key: "getSets",
    value: function getSets() {
      var set = this._set;
      var retObj = {
        entrySet: [[], []],
        exitSet: [[], []],
        completeSet: []
      };

      for (var key in set) {
        if (set[key] > 0) {
          set[key] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_ENTRY"] && retObj.entrySet[0].push(key);
          set[key] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_ENTRY"] && retObj.entrySet[1].push(key);
        } else if (set[key] < 0) {
          set[key] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_EXIT"] && retObj.exitSet[0].push(key);
          set[key] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_EXIT"] && retObj.exitSet[1].push(key);
        }

        retObj.completeSet.push(key);
      }

      ['entrySet', 'exitSet'].forEach(function (type) {
        retObj[type] = retObj[type].map(function (e) {
          return e.map(Number);
        });
      });
      retObj.completeSet = retObj.completeSet.map(Number);
      return retObj;
    }
    /**
     * Resets an array of ids in the selection set to initial state. It sets the value of every unique id value to
     * null in the selection set which means they are neither in entry set nor in exit set. If no ids are passed,
     * then it resets all the ids to null.
     *
     * @public
     *
     * @param {Array} ids Array of unique ids.
     * @return {SelectionSet} Instance of selection set.
     */

  }, {
    key: "reset",
    value: function reset(ids) {
      var set = this._set;

      if (ids) {
        ids.forEach(function (i) {
          set[i] = _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NULL"];
        });
      } else {
        var lockedSel = this._lockedSelection;

        for (var key in set) {
          if (!(key in lockedSel)) {
            set[key] = _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NULL"];
          }
        }
      }

      this._resetted = true;
      return this;
    }
    /**
     * Gets the set of ids which are added in the selection set.
     *
     * @public
     *
     * @return {Array.<string>} Array of unique ids
     */

  }, {
    key: "getEntrySet",
    value: function getEntrySet() {
      var set = this._set;
      var addSet = [];

      for (var key in set) {
        set[key] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_ENTRY"] && addSet.push(key);
      }

      return addSet;
    }
    /**
     * Returns a set of unique ids which are already present in entry set.
     *
     * @public
     * @param {Array} addSet Array of unique ids which are added
     *
     * @return {Array} Array of unique ids which are already in old entry set or new entry set
     */

  }, {
    key: "getExistingEntrySet",
    value: function getExistingEntrySet(addSet) {
      var set = this._set;
      return addSet.filter(function (d) {
        return set[d] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_ENTRY"] || set[d] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_ENTRY"];
      });
    }
    /**
     * Returns a set of unique ids which are already present in exit set.
     *
     * @public
     * @param {Array} addSet Array of unique ids which are added
     *
     * @return {Array} Array of unique ids which are already in old exit set or new exit set
     */

  }, {
    key: "getExistingExitSet",
    value: function getExistingExitSet(removeSet) {
      var set = this._set;
      return removeSet.filter(function (d) {
        return set[d] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_EXIT"] || set[d] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_EXIT"];
      });
    }
    /**
     * Gets the set of ids which are added in the selection set.
     * @return {Array.<string>} Array of unique ids
     */

  }, {
    key: "getOldEntry",
    value: function getOldEntry() {
      var set = this._set;
      var updateSet = [];

      for (var key in set) {
        set[key] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_ENTRY"] && updateSet.push(key);
      }

      return updateSet;
    }
    /**
     * Gets the set of ids which are added in the selection set.
     * @return {Array.<string>} Array of unique ids
     */

  }, {
    key: "getOldExit",
    value: function getOldExit() {
      var set = this._set;
      var updateSet = [];

      for (var key in set) {
        set[key] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_EXIT"] && updateSet.push(key);
      }

      return updateSet;
    }
    /**
     * Gets the array of ids which are in the exit set.
     *
     * @public
     * @return {Array.<string>} Array of unique ids
     */

  }, {
    key: "getExitSet",
    value: function getExitSet() {
      var set = this._set;
      var removeSet = [];

      for (var key in set) {
        set[key] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_EXIT"] && removeSet.push(key);
      }

      return removeSet;
    }
    /**
     * Gets all the ids which are either in exit or entry set.
     *
     * @public
     * @return {Array} Array of unique ids
     */

  }, {
    key: "getCompleteSet",
    value: function getCompleteSet() {
      var set = this._set;
      var completeSet = [];

      for (var key in set) {
        completeSet.push(key);
      }

      return completeSet;
    }
  }, {
    key: "getCompleteSetCount",
    value: function getCompleteSetCount() {
      return this._completeSetCount;
    }
  }, {
    key: "resetted",
    value: function resetted() {
      return this._resetted;
    }
    /**
     * Swaps the add set and remove set in the selection set.
     * @return {SelectionSet} Instance of selection set.
     */

  }, {
    key: "toggle",
    value: function toggle() {
      var set = this._set;

      for (var key in set) {
        if (set[key] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_ENTRY"]) {
          set[key] = _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_EXIT"];
        } else if (set[key] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_EXIT"]) {
          set[key] = _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_NEW_ENTRY"];
        } else if (set[key] === _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_ENTRY"]) {
          set[key] = _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_EXIT"];
        } else {
          set[key] = _enums_selection__WEBPACK_IMPORTED_MODULE_0__["SELECTION_OLD_ENTRY"];
        }
      }

      return this;
    }
  }]);

  return SelectionSet;
}();

/* harmony default export */ __webpack_exports__["default"] = (SelectionSet);

/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/anchors/index.js":
/*!******************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/anchors/index.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return AnchorEffect; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-firebolt/src/enums/constants.js");
/* harmony import */ var _spawnable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../spawnable */ "./packages/muze-firebolt/src/side-effects/spawnable.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./styles.scss */ "./packages/muze-firebolt/src/side-effects/anchors/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_3__);
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }






var addLayer = function addLayer(layerDefs, layerRegistry, context, sideEffect) {
  var layers = [];

  if (layerDefs) {
    layerDefs.forEach(function (layerDef) {
      var mark = layerDef.mark;
      var layerCls = layerRegistry[mark];

      if (layerCls && layerCls.shouldDrawAnchors()) {
        var depLayerEncoding = layerDef.def.encoding;
        var encoding = {
          x: Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getObjProp"])(depLayerEncoding, 'x', 'field'),
          y: Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getObjProp"])(depLayerEncoding, 'y', 'field'),
          color: Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getObjProp"])(depLayerEncoding, 'color', 'field'),
          size: {
            field: Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getObjProp"])(depLayerEncoding, 'size', 'field'),
            value: sideEffect.defaultSizeValue()
          }
        };
        var name = "".concat(layerDef.def.name, "-").concat(sideEffect.constructor.formalName());
        var layerObj = {
          instances: context.addLayer({
            name: name,
            mark: 'point',
            className: sideEffect.constructor.defaultConfig().className,
            encoding: encoding,
            transform: {
              type: 'identity'
            },
            transition: sideEffect.getTransitionConfig(),
            calculateDomain: false,
            source: function source(dm) {
              return dm.select(function () {
                return false;
              }, {
                saveChild: false
              });
            },
            interactive: false,
            render: false
          }),
          linkedLayer: layerDef.def.name
        };
        layers.push(layerObj);
      }
    });
  }

  return layers;
};

var AnchorEffect =
/*#__PURE__*/
function (_SpawnableSideEffect) {
  _inherits(AnchorEffect, _SpawnableSideEffect);

  function AnchorEffect() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, AnchorEffect);

    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
      params[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AnchorEffect)).call.apply(_getPrototypeOf2, [this].concat(params)));
    _this._layersMap = {};

    _this.addAnchorLayers();

    return _this;
  }

  _createClass(AnchorEffect, [{
    key: "addAnchorLayers",
    value: function addAnchorLayers() {
      var _this2 = this;

      var context = this.firebolt.context;
      var metaInf = context.metaInf();
      var layerRegistry = context.registry().layerRegistry;
      var layerDefsVal = context.layerDef();
      context.store().registerImmediateListener("".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].UNIT_LOCAL_NAMESPACE, ".").concat(metaInf.namespace, ".layerDef"), function (_ref) {
        var _ref2 = _slicedToArray(_ref, 2),
            layerDefs = _ref2[1];

        _this2._layers = addLayer(layerDefs, layerRegistry, context, _this2);
      });
      this._layers = addLayer(layerDefsVal, layerRegistry, context, this);
      return this;
    }
  }, {
    key: "getTransitionConfig",
    value: function getTransitionConfig() {
      return {
        disabled: true
      };
    }
    /**
     * Returns the default area value of the anchor point.
     * @return { number } Default area value of anchor.
     */

  }, {
    key: "defaultSizeValue",
    value: function defaultSizeValue() {
      return 100;
    }
  }, {
    key: "apply",
    value: function apply(selectionSet) {
      var self = this;
      var dataModel = selectionSet.mergedEnter.model;

      if (selectionSet.isSourceFieldPresent !== false) {
        var drawingInf = this.drawingContext();
        var sideEffectGroup = drawingInf.sideEffectGroup;
        var className = "".concat(this.config().className);
        var layers = this._layers;
        var parentGroup = this.createElement(sideEffectGroup, 'g', [1], "".concat(className, "-container"));
        var anchorGroups = this.createElement(parentGroup, 'g', Object.values(layers));
        anchorGroups.each(function (layer) {
          var instances = layer.instances;
          var elems = self.createElement(this, 'g', instances, className);
          var linkedLayer = self.firebolt.context.getLayerByName(layer.linkedLayer);

          var _linkedLayer$getTrans = linkedLayer.getTransformedDataFromIdentifiers(dataModel),
              _linkedLayer$getTrans2 = _slicedToArray(_linkedLayer$getTrans, 2),
              transformedData = _linkedLayer$getTrans2[0],
              schema = _linkedLayer$getTrans2[1];

          var transformedDataModel = new muze_utils__WEBPACK_IMPORTED_MODULE_0__["DataModel"](transformedData, schema);
          elems.each(function (d, i) {
            instances[i].data(transformedDataModel).mount(this);
          });
        });
      }

      return this;
    }
  }], [{
    key: "target",
    value: function target() {
      return 'visual-unit';
    }
  }, {
    key: "defaultConfig",
    value: function defaultConfig() {
      return {
        className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CLASSPREFIX"], "-anchors-group")
      };
    }
  }, {
    key: "formalName",
    value: function formalName() {
      return 'anchors';
    }
  }]);

  return AnchorEffect;
}(_spawnable__WEBPACK_IMPORTED_MODULE_2__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/anchors/styles.scss":
/*!*********************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/anchors/styles.scss ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/brush-anchors.js":
/*!******************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/brush-anchors.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return BrushAnchors; });
/* harmony import */ var _anchors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./anchors */ "./packages/muze-firebolt/src/side-effects/anchors/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-firebolt/src/enums/constants.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var BrushAnchors =
/*#__PURE__*/
function (_AnchorEffect) {
  _inherits(BrushAnchors, _AnchorEffect);

  function BrushAnchors() {
    _classCallCheck(this, BrushAnchors);

    return _possibleConstructorReturn(this, _getPrototypeOf(BrushAnchors).apply(this, arguments));
  }

  _createClass(BrushAnchors, [{
    key: "getTransitionConfig",
    value: function getTransitionConfig() {
      return {
        disabled: true
      };
    }
  }], [{
    key: "formalName",
    value: function formalName() {
      return 'brush-anchors';
    }
  }, {
    key: "defaultConfig",
    value: function defaultConfig() {
      return {
        className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CLASSPREFIX"], "-brush-anchors")
      };
    }
  }]);

  return BrushAnchors;
}(_anchors__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/crossline/index.js":
/*!********************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/crossline/index.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Crossline; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./styles.scss */ "./packages/muze-firebolt/src/side-effects/crossline/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-firebolt/src/enums/constants.js");
/* harmony import */ var _spawnable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../spawnable */ "./packages/muze-firebolt/src/side-effects/spawnable.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }






var Crossline =
/*#__PURE__*/
function (_SpawnableSideEffect) {
  _inherits(Crossline, _SpawnableSideEffect);

  function Crossline() {
    _classCallCheck(this, Crossline);

    return _possibleConstructorReturn(this, _getPrototypeOf(Crossline).apply(this, arguments));
  }

  _createClass(Crossline, [{
    key: "apply",
    value: function apply(selectionSet, payload) {
      var _this = this;

      var height;
      var bandWidth;
      var px;
      var width;

      var _this$config = this.config(),
          className = _this$config.className,
          bandClass = _this$config.bandClass,
          lineClass = _this$config.lineClass;

      var dataModel = selectionSet.mergedEnter.model;
      var drawingInf = this.drawingContext();

      if (payload.criteria && dataModel && dataModel.isEmpty()) {
        return this;
      }

      if (payload.criteria === null || !dataModel) {
        this.hide();
        return this;
      }

      var dataObj = dataModel.getData();
      var sourceInf = this.firebolt.context.getSourceInfo();
      var axes = sourceInf.axes;
      var axisFields = sourceInf.fields;
      var fields = selectionSet.fields;
      var data = dataObj.data;
      var fieldsConfig = dataModel.getFieldsConfig();
      var svgContainer = drawingInf.sideEffectGroup;
      var elemData = [];
      fields.forEach(function (field) {
        var fieldIndex = fieldsConfig[field] && fieldsConfig[field].index;
        var dataArr = data.map(function (d) {
          return d[fieldIndex];
        });
        var axisIndex = [['x', 0], ['x', 1], ['y', 0], ['y', 1]].find(function (arr) {
          var fieldInst = axisFields[arr[0]][arr[1]];
          return fieldInst && fieldInst.type() === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION && fieldInst.getMembers().indexOf(field) !== -1;
        });

        if (axisIndex !== undefined && data.length) {
          var type = axisIndex[0];
          var axis = axes[type][axisIndex[1]];
          var value = dataArr[0];
          bandWidth = axis.getUnitWidth() || 0;
          px = axis.getScaleValue(value) + bandWidth / 2 + drawingInf.xOffset;
          var plotWidth = Math.max.apply(Math, _toConsumableArray(_this.firebolt.context.layers().map(function (layer) {
            return layer.getPlotSpan()[type];
          })));
          var pad = Math.max.apply(Math, _toConsumableArray(_this.firebolt.context.layers().map(function (layer) {
            return layer.getPlotPadding()[type];
          })));
          height = drawingInf.height;
          width = drawingInf.width;
          var startPx = px - plotWidth / 2 - pad / 2;
          var endPx = px + plotWidth / 2 + pad / 2;
          var dataPoint = {};

          if (type === 'y') {
            dataPoint.d = "M 0 ".concat(startPx, " L 0 ").concat(endPx, " L ").concat(width, " ").concat(endPx, " L ").concat(width, " ").concat(startPx, " Z");
          } else {
            dataPoint.d = "M ".concat(startPx, " 0 L ").concat(endPx, " 0 L ").concat(endPx, " ").concat(height, " L ").concat(startPx, " ").concat(height, " Z");
          }

          dataPoint.className = plotWidth ? bandClass : lineClass;
          elemData.push(dataPoint);
        }
      });

      if (elemData.length) {
        var parentGroup = this.createElement(svgContainer, 'g', [1], className);
        var elem = this.createElement(parentGroup, 'path', elemData);
        elem.attr('d', function (d) {
          return d.d;
        }).style('pointer-events', 'none').attr('class', function (d) {
          return d.className;
        });
      }

      return this;
    }
  }, {
    key: "hide",
    value: function hide() {
      var className = this.config().className;
      var drawingInf = this.drawingContext();
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(drawingInf.sideEffectGroup).selectAll(".".concat(className)).remove();
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return {
        className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_2__["CLASSPREFIX"], "-crossline-group"),
        bandClass: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_2__["CLASSPREFIX"], "-crossband"),
        lineClass: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_2__["CLASSPREFIX"], "-crossline")
      };
    }
  }, {
    key: "formalName",
    value: function formalName() {
      return 'crossline';
    }
  }]);

  return Crossline;
}(_spawnable__WEBPACK_IMPORTED_MODULE_3__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/crossline/styles.scss":
/*!***********************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/crossline/styles.scss ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/filter/index.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/filter/index.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return FilterEffect; });
/* harmony import */ var _surrogate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../surrogate */ "./packages/muze-firebolt/src/side-effects/surrogate.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



var FilterEffect =
/*#__PURE__*/
function (_SurrogateSideEffect) {
  _inherits(FilterEffect, _SurrogateSideEffect);

  function FilterEffect() {
    _classCallCheck(this, FilterEffect);

    return _possibleConstructorReturn(this, _getPrototypeOf(FilterEffect).apply(this, arguments));
  }

  _createClass(FilterEffect, [{
    key: "apply",
    value: function apply(selectionSet, payload) {
      var context = this.firebolt.context;
      var entryModel = selectionSet.mergedEnter.model;

      if (payload.criteria === null) {
        context.clearCaching().resetData();
      } else {
        context.enableCaching().data(entryModel);
      }

      return this;
    }
  }], [{
    key: "formalName",
    value: function formalName() {
      return 'filter';
    }
  }, {
    key: "target",
    value: function target() {
      return 'visual-unit';
    }
  }, {
    key: "mutates",
    value: function mutates() {
      return true;
    }
  }]);

  return FilterEffect;
}(_surrogate__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/generic/generic-sideeffect.js":
/*!*******************************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/generic/generic-sideeffect.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return GenericSideEffect; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./props */ "./packages/muze-firebolt/src/side-effects/generic/props.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }



/**
 * This is the base class of all side effects. It contains all common methods like setting configuration, disabling,
 * enabling side effect, etc. Every new side effect has to inherit this class or {@link SpawnableSideEffect} or
 * {@link SurrogateSideEffect} class. All side effects are initialized by firebolt. The instance of firebolt is
 * passed on initialization. The firebolt instance contains ```context``` which is the instance of visual unit with
 * which the firebolt is attached.
 *
 * @public
 * @class
 * @module GenericSideEffect
 */

var GenericSideEffect =
/*#__PURE__*/
function () {
  function GenericSideEffect(firebolt) {
    _classCallCheck(this, GenericSideEffect);

    this.firebolt = firebolt;
    this._enabled = true;
    this._strategy = 'default';
    this._config = {};
    this._id = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getUniqueId"])();
    this._strategies = {};
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(this, _props__WEBPACK_IMPORTED_MODULE_1__["PROPS"]);
    this.config(this.constructor.defaultConfig());
  }
  /**
   * Returns the default configuration of the side effect.
   *
   * @public
   * @return {Object} Default configuration of side effect.
   */


  _createClass(GenericSideEffect, [{
    key: "config",

    /**
     * Sets or gets the configuration of side effect.
     *
     * When setter,
     * @param {Object} config Configuration of side effect.
     * @return {GenericSideEffect} Side effect instance.
     *
     * When getter,
     * @return {Object} Side effect configuration.
     */
    value: function config() {
      if (arguments.length) {
        this._config = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(this._config, arguments.length <= 0 ? undefined : arguments[0]);
        return this;
      }

      return this._config;
    }
  }, {
    key: "disable",
    value: function disable() {
      this._enabled = false;
      return this;
    }
  }, {
    key: "enable",
    value: function enable() {
      this._enabled = true;
      return this;
    }
  }, {
    key: "isEnabled",
    value: function isEnabled() {
      return this._enabled;
    }
    /**
     * Applies the interaction effect on the chart. This is where the implemntation of the side effect is defined.
     *
     * @param {Object} selectionSet Contains the entry and exit set of data which got affected during interaction.
     * @param {Object} selectionSet.mergedEnter Combined previous entry and new entry set.
     * @param {DataModel} selectionSet.mergedEnter.model Instance of data model containing all rows which got
     * affected during interaction.
     * @param {Array} selectionSet.mergedEnter.uids Ids of all rows which were affected during interaction.
     * @param {Object} selectionSet.mergedExit Combined previous exit and new exit set.
     * @param {DataModel} selectionSet.mergedExit.model Instance of data model containing rows which were not affected
     * during interaction.
     * @param {Array} selectionSet.mergedExit.uids Ids of all rows which were not affected during interaction.
     * @param {Object} selectionSet.entrySet Entry set information.
     * @param {Array} selectionSet.entrySet[0].uids All row ids which got affected during previous interaction.
     * @param {Array} selectionSet.entrySet[1].uids All row ids which got affected during current interaction.
     * @param {Array} selectionSet.exitSet[0].uids All row ids which were not affected during previous interaction.
     * @param {Array} selectionSet.exitSet[1].uids All row ids which were not affected during current interaction.
     * @param {Object} payload Payload information of the behavioural action on trigger of which this side effect
     * is applied.
     * @param {Object} options Optional information for side effect like strategy, etc.
     */

  }, {
    key: "apply",
    value: function apply() {
      return this;
    }
    /**
     * Adds a new strategy method for this side effect. The strategy method is implemented by side effect class.
     *
     * @param {string} name Name of the strategy.
     * @param {Function} fn Strategy method.
     *
     * @return {GenericSideEffect} Instance of side effect.
     */

  }, {
    key: "addStrategy",
    value: function addStrategy(name, fn) {
      this._strategies[name] = fn;
      return this;
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return {};
    }
    /**
     * Returns the formal name of a side effect. This method must be implemented by all side effects which changes
     * or adds any element in the visualization.
     *
     * @return {string} Formal name of side effect.
     */

  }, {
    key: "formalName",
    value: function formalName() {
      return 'generic';
    }
  }, {
    key: "target",
    value: function target() {
      return 'all';
    }
    /**
     * Returns true if the side effects mutates the data of chart.
     *
     * @public
     *
     * @return {boolean} If the side effect mutates the data of chart.
     */

  }, {
    key: "mutates",
    value: function mutates() {
      return false;
    }
  }]);

  return GenericSideEffect;
}();



/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/generic/index.js":
/*!******************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/generic/index.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _generic_sideeffect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./generic-sideeffect */ "./packages/muze-firebolt/src/side-effects/generic/generic-sideeffect.js");

/* harmony default export */ __webpack_exports__["default"] = (_generic_sideeffect__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/generic/props.js":
/*!******************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/generic/props.js ***!
  \******************************************************************/
/*! exports provided: PROPS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PROPS", function() { return PROPS; });
var PROPS = {
  valueParser: {
    defaultValue: function defaultValue(val) {
      return val;
    }
  }
};

/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/helper/index.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/helper/index.js ***!
  \*****************************************************************/
/*! exports provided: spaceOutBoxes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "spaceOutBoxes", function() { return spaceOutBoxes; });
var spaceOutBoxes = function spaceOutBoxes(boxes, extent, showVertically) {
  var y;
  var height;
  var x;
  var width;
  var i;
  var pad = 5;
  var len = boxes.length;

  var spaceOutIfOverlap = function spaceOutIfOverlap(firstBox, secondBox, opposite) {
    x = firstBox.x;
    width = firstBox.width;
    y = firstBox.y;
    height = firstBox.height;
    var bottom = y + height;
    var right = x + width;

    if (showVertically) {
      if (opposite ? y < secondBox.y + secondBox.height : bottom > secondBox.y) {
        secondBox.y = opposite ? firstBox.y - secondBox.height - pad : bottom + pad;
      }
    } else if (opposite ? x < secondBox.x + secondBox.width : right > secondBox.x) {
      secondBox.x = opposite ? firstBox.x - secondBox.width - pad : right + pad;
    }
  };

  boxes.sort(function (a, b) {
    return showVertically ? a.y - b.y : a.x - b.x;
  });
  i = 0;

  for (i = 0; i < len - 1; i++) {
    spaceOutIfOverlap(boxes[i], boxes[i + 1]);
  }

  if (boxes[i].y + boxes[i].height > extent.height || boxes[i].x + boxes[i].width > extent.width) {
    if (showVertically) {
      boxes[i].y -= boxes[i].height + boxes[i].y - extent.height;
    } else {
      boxes[i].x -= boxes[i].width + boxes[i].x - extent.width;
    }

    for (i = len - 1; i > 0; i--) {
      spaceOutIfOverlap(boxes[i], boxes[i - 1], true);
    }
  }

  return boxes;
};

/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/index.js":
/*!**********************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/index.js ***!
  \**********************************************************/
/*! exports provided: SelectionBox, Tooltip, Crossline, PlotHighlighter, FilterEffect, PersistentAnchors, BrushAnchors, AnchorEffect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _selection_box__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./selection-box */ "./packages/muze-firebolt/src/side-effects/selection-box/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SelectionBox", function() { return _selection_box__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _tooltip__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tooltip */ "./packages/muze-firebolt/src/side-effects/tooltip/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Tooltip", function() { return _tooltip__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _crossline__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./crossline */ "./packages/muze-firebolt/src/side-effects/crossline/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Crossline", function() { return _crossline__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _plot_highlighter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./plot-highlighter */ "./packages/muze-firebolt/src/side-effects/plot-highlighter/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PlotHighlighter", function() { return _plot_highlighter__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _filter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./filter */ "./packages/muze-firebolt/src/side-effects/filter/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FilterEffect", function() { return _filter__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _persistent_anchors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./persistent-anchors */ "./packages/muze-firebolt/src/side-effects/persistent-anchors.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PersistentAnchors", function() { return _persistent_anchors__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _brush_anchors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./brush-anchors */ "./packages/muze-firebolt/src/side-effects/brush-anchors.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BrushAnchors", function() { return _brush_anchors__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _anchors__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./anchors */ "./packages/muze-firebolt/src/side-effects/anchors/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AnchorEffect", function() { return _anchors__WEBPACK_IMPORTED_MODULE_7__["default"]; });










/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/persistent-anchors.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/persistent-anchors.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return PersistentAnchors; });
/* harmony import */ var _anchors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./anchors */ "./packages/muze-firebolt/src/side-effects/anchors/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-firebolt/src/enums/constants.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var PersistentAnchors =
/*#__PURE__*/
function (_AnchorEffect) {
  _inherits(PersistentAnchors, _AnchorEffect);

  function PersistentAnchors() {
    _classCallCheck(this, PersistentAnchors);

    return _possibleConstructorReturn(this, _getPrototypeOf(PersistentAnchors).apply(this, arguments));
  }

  _createClass(PersistentAnchors, [{
    key: "getTransitionConfig",
    value: function getTransitionConfig() {
      return {
        disabled: true
      };
    }
  }], [{
    key: "formalName",
    value: function formalName() {
      return 'persistent-anchors';
    }
  }, {
    key: "defaultConfig",
    value: function defaultConfig() {
      return {
        className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CLASSPREFIX"], "-persistent-anchors")
      };
    }
  }]);

  return PersistentAnchors;
}(_anchors__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/plot-highlighter/index.js":
/*!***************************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/plot-highlighter/index.js ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return PlotHighlighter; });
/* harmony import */ var _surrogate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../surrogate */ "./packages/muze-firebolt/src/side-effects/surrogate.js");
/* harmony import */ var _strategy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strategy */ "./packages/muze-firebolt/src/side-effects/plot-highlighter/strategy.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var PlotHighlighter =
/*#__PURE__*/
function (_SurrogateSideEffect) {
  _inherits(PlotHighlighter, _SurrogateSideEffect);

  function PlotHighlighter() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, PlotHighlighter);

    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
      params[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PlotHighlighter)).call.apply(_getPrototypeOf2, [this].concat(params)));
    _this._strategy = 'highlight';
    _this._strategies = _strategy__WEBPACK_IMPORTED_MODULE_1__["strategies"];
    return _this;
  }

  _createClass(PlotHighlighter, [{
    key: "apply",
    value: function apply(selectionSet, payload) {
      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var strategy = this._strategies[options.strategy || this._strategy];

      if (selectionSet.isSourceFieldPresent !== false) {
        strategy(selectionSet, this, options.strategy || this._strategy);
      }

      return this;
    }
  }], [{
    key: "formalName",
    value: function formalName() {
      return 'highlighter';
    }
  }, {
    key: "target",
    value: function target() {
      return 'visual-unit';
    }
  }]);

  return PlotHighlighter;
}(_surrogate__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/plot-highlighter/strategy.js":
/*!******************************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/plot-highlighter/strategy.js ***!
  \******************************************************************************/
/*! exports provided: strategies */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "strategies", function() { return strategies; });
var fadeFn = function fadeFn(set, context, strategy) {
  var mergedEnter = set.mergedEnter,
      mergedExit = set.mergedExit,
      exitSet = set.exitSet,
      completeSet = set.completeSet;

  if (!mergedEnter.length && !mergedExit.length) {
    context.applyInteractionStyle(completeSet, {}, strategy, false);
  } else {
    context.applyInteractionStyle(exitSet[1], {}, strategy, true);
    context.applyInteractionStyle(mergedEnter, {}, strategy, false);
  }
};

var strategies = {
  fade: fadeFn,
  focus: function focus(set, context) {
    var mergedEnter = set.mergedEnter,
        mergedExit = set.mergedExit,
        completeSet = set.completeSet;

    if (!mergedEnter.length && !mergedExit.length) {
      context.applyInteractionStyle(completeSet, {}, 'focus', false);
    } else {
      context.applyInteractionStyle(mergedExit, {}, 'focus', true);
      context.applyInteractionStyle(mergedEnter, {}, 'focus', false);
    }
  },
  highlight: function highlight(set, context) {
    var mergedEnter = set.mergedEnter,
        mergedExit = set.mergedExit,
        entrySet = set.entrySet,
        exitSet = set.exitSet,
        completeSet = set.completeSet;

    if (!mergedEnter.length && !mergedExit.length) {
      context.applyInteractionStyle(completeSet, {}, 'highlight', false);
    } else {
      context.applyInteractionStyle(entrySet[1], {}, 'highlight', true);
      context.applyInteractionStyle(exitSet[1], {}, 'highlight', false);
    }
  }
};

/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/selection-box/helper.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/selection-box/helper.js ***!
  \*************************************************************************/
/*! exports provided: getBoxDimensionsFromPayload, changeVisibility */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBoxDimensionsFromPayload", function() { return getBoxDimensionsFromPayload; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "changeVisibility", function() { return changeVisibility; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }


var getBoxDimensionsFromPayload = function getBoxDimensionsFromPayload(payload, axes, axisFields) {
  var x1;
  var x2;
  var y1;
  var y2;
  var xRange;
  var yRange;
  var direction;
  var criteria = payload.criteria;
  var dimensions = payload.dimensions || {};
  var xDim = dimensions.x;
  var yDim = dimensions.y;

  if (criteria === null) {
    return null;
  }

  var xAxis = axes.x[0];
  var yAxis = axes.y[0];
  var xLinear = xAxis.constructor.type() === 'linear';
  var yLinear = yAxis.constructor.type() === 'linear';
  var xField = "".concat(axisFields.x[0]);
  var yField = "".concat(axisFields.y[0]);
  var xCriteria = criteria[xField];
  var yCriteria = criteria[yField];

  if (xCriteria && xCriteria[0] instanceof Array) {
    xRange = xCriteria[0];
    yRange = xCriteria[1];
  } else {
    xRange = xCriteria || [];
    yRange = yCriteria || [];
  }

  direction = xCriteria && yCriteria ? 'both' : xCriteria ? 'vertical' : 'horizontal';

  if (xRange && xRange.length) {
    if (yAxis.constructor.type() === 'band' && xLinear) {
      x1 = x2 = undefined;
      direction = 'horizontal';
    } else {
      var domain = xAxis.domain();
      var bandScale = xAxis.constructor.type() === 'band';
      var x1Val;
      var x2Val;

      if (bandScale) {
        var x1DomainIndex = domain.indexOf(xRange[0]);
        var x2DomainIndex = domain.indexOf(xRange[xRange.length - 1]);

        var _sort = [x1DomainIndex, x2DomainIndex].sort(function (a, b) {
          return a - b;
        });

        var _sort2 = _slicedToArray(_sort, 2);

        x1DomainIndex = _sort2[0];
        x2DomainIndex = _sort2[1];
        x1Val = domain[x1DomainIndex];
        x2Val = domain[x2DomainIndex];
      } else {
        x1Val = xRange[0];
        x2Val = xRange[xRange.length - 1];
      }

      x1 = xAxis.getScaleValue(x1Val);
      x2 = xAxis.getScaleValue(x2Val);
      x2 += bandScale ? xAxis.getUnitWidth() : 0;
    }
  } else {
    x1 = x2 = undefined;
  }

  if (yRange && yRange.length) {
    if (xAxis.constructor.type() === 'band' && yLinear) {
      y1 = y2 = undefined;
      direction = 'vertical';
    } else {
      var _domain = yAxis.domain();

      var _bandScale = yAxis.constructor.type() === 'band';

      var y1Val;
      var y2Val;

      if (_bandScale) {
        var y1DomainIndex = _domain.indexOf(yRange[0]);

        var y2DomainIndex = _domain.indexOf(yRange[yRange.length - 1]);

        var _sort3 = [y1DomainIndex, y2DomainIndex].sort(function (a, b) {
          return b - a;
        });

        var _sort4 = _slicedToArray(_sort3, 2);

        y1DomainIndex = _sort4[0];
        y2DomainIndex = _sort4[1];
        y1Val = _domain[y1DomainIndex];
        y2Val = _domain[y2DomainIndex];
      } else {
        y1Val = yRange[0];
        y2Val = yRange[yRange.length - 1];
      }

      y1 = yAxis.getScaleValue(y1Val);
      y2 = yAxis.getScaleValue(y2Val);
      y2 += yAxis.constructor.type() === 'band' ? yAxis.getUnitWidth() : 0;
    }
  } else {
    y1 = y2 = undefined;
  }

  if (yLinear && xLinear || !payload.dragEnd) {
    if (xDim) {
      var _xDim = _slicedToArray(xDim, 2);

      x1 = _xDim[0];
      x2 = _xDim[1];
    }

    if (yDim) {
      var _yDim = _slicedToArray(yDim, 2);

      y1 = _yDim[0];
      y2 = _yDim[1];
    }
  }

  return {
    dimension: {
      x1: x1,
      x2: x2,
      y1: y1,
      y2: y2
    },
    direction: direction
  };
};
var changeVisibility = function changeVisibility(context, sideEffectGroup, visible) {
  var config = context.config();
  var className = config.defClassName;
  var classPrefix = config.classPrefix;
  Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(sideEffectGroup).selectAll(".".concat(classPrefix, "-").concat(className)).style('display', visible ? 'block' : 'none');
};

/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/selection-box/index.js":
/*!************************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/selection-box/index.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-firebolt/src/enums/constants.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./styles.scss */ "./packages/muze-firebolt/src/side-effects/selection-box/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _spawnable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../spawnable */ "./packages/muze-firebolt/src/side-effects/spawnable.js");
/* harmony import */ var _actions_physical_selection_box_drag__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../actions/physical/selection-box-drag */ "./packages/muze-firebolt/src/actions/physical/selection-box-drag.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helper */ "./packages/muze-firebolt/src/side-effects/selection-box/helper.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }







/**
 * This class is used to create a selection box which is used by visual unit for brushing and
 * selection in the canvas.
 * @class SelectionBox
 */

var SelectionBox =
/*#__PURE__*/
function (_SpawnableSideEffect) {
  _inherits(SelectionBox, _SpawnableSideEffect);

  function SelectionBox() {
    _classCallCheck(this, SelectionBox);

    return _possibleConstructorReturn(this, _getPrototypeOf(SelectionBox).apply(this, arguments));
  }

  _createClass(SelectionBox, [{
    key: "apply",

    /**
     * Draws the selectionbox with the specified dimensions.
     * @param {Object} dimension Dimensions of the selection box.
     * @param {number} dimension.x1 Starting x position
     * @param {number} dimension.x2 Ending x position
     * @param {number} dimension.y1 Starting y position
     * @param {number} dimension.y2 Ending y position
     * @param {Object} conf Configuration needed to draw the selection box
     * @param {number} unitWidth Width of the visual unit.
     * @param {number} unitHeight Height of the visual unit.
     */
    value: function apply(selectionSet, payload) {
      var x;
      var y;
      var width;
      var height;
      var config = this._config;
      var boxConf = config.box;
      var firebolt = this.firebolt;
      var drawingInf = this.drawingContext();
      var mountPoint = drawingInf.sideEffectGroup;
      var unitWidth = drawingInf.width;
      var unitHeight = drawingInf.height;
      var classPrefix = config.classPrefix;
      var selectionGroupClassName = config.defClassName;

      if (payload.criteria === null) {
        this.hide(drawingInf);
        return this;
      }

      var sourceInf = firebolt.context.getSourceInfo();

      var _getBoxDimensionsFrom = Object(_helper__WEBPACK_IMPORTED_MODULE_5__["getBoxDimensionsFromPayload"])(payload, sourceInf.axes, sourceInf.fields),
          dimension = _getBoxDimensionsFrom.dimension,
          direction = _getBoxDimensionsFrom.direction;

      var transition = payload.dragEnd && config.transition;

      if (direction === 'both' || direction === 'vertical') {
        x = Math.min(dimension.x1, dimension.x2);
        width = Math.abs(dimension.x2 - dimension.x1);
      } else {
        x = 0;
        width = unitWidth;
      }

      if (direction === 'both' || direction === 'horizontal') {
        y = Math.min(dimension.y1, dimension.y2);
        height = Math.abs(dimension.y2 - dimension.y1);
      } else {
        height = unitHeight;
        y = 0;
      }

      this.show(drawingInf); // Create the data array for drawing the rectangle

      var points = [{
        x: x,
        y: y,
        width: width,
        height: height
      }]; // Create the container group for selection box.

      var selectionGroup = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(mountPoint), 'g', [1], ".".concat(classPrefix, "-").concat(selectionGroupClassName));
      var sideEffect = this;
      var selection = selectionGroup.selectAll('rect').data(points);
      var selectionBox = selection.enter().append('rect').each(function () {
        Object(_actions_physical_selection_box_drag__WEBPACK_IMPORTED_MODULE_4__["selectionBoxDrag"])(firebolt)(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this), ['brush'], sideEffect);
      }).merge(selection).each(function (attrs) {
        var element = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this);
        transition && (element = element.transition().duration(transition.duration));

        for (var key in attrs) {
          if ({}.hasOwnProperty.call(attrs, key)) {
            Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["isValidValue"])(attrs[key]) && element.attr(key, attrs[key]);
          }
        }
      }); // Get the qualified class name for selection box rectangle

      var boxClassName = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getQualifiedClassName"])(boxConf.defClassName, this._id, classPrefix);
      selectionBox.classed(boxClassName.join(' '), true);
      selectionBox.classed(boxConf.className, true);
      return this;
    }
  }, {
    key: "hide",
    value: function hide(drawingInf) {
      Object(_helper__WEBPACK_IMPORTED_MODULE_5__["changeVisibility"])(this, drawingInf.sideEffectGroup, false);
    }
  }, {
    key: "show",
    value: function show(drawingInf) {
      Object(_helper__WEBPACK_IMPORTED_MODULE_5__["changeVisibility"])(this, drawingInf.sideEffectGroup, true);
    }
  }], [{
    key: "defaultConfig",

    /**
     * It returns the default configuration needed by selectionbox.
     * @return {Object} Default configuration of the selection box.
     */
    value: function defaultConfig() {
      return {
        defClassName: 'selection-box-group',
        className: '',
        classPrefix: _enums_constants__WEBPACK_IMPORTED_MODULE_1__["CLASSPREFIX"],
        box: {
          defClassName: 'selection-box',
          className: ''
        },
        transition: {
          duration: 200
        }
      };
    }
  }, {
    key: "formalName",
    value: function formalName() {
      return 'selectionBox';
    }
  }]);

  return SelectionBox;
}(_spawnable__WEBPACK_IMPORTED_MODULE_3__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (SelectionBox);

/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/selection-box/styles.scss":
/*!***************************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/selection-box/styles.scss ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/spawnable.js":
/*!**************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/spawnable.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SpawnableSideEffect; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _generic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./generic */ "./packages/muze-firebolt/src/side-effects/generic/index.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



/**
 * Any side effect which will add any new element to the chart like drawing a rectangular box or any annotation over
 * the chart needs to inherit this class. This class has methods which returns the container where the dom elements
 * needs to be created.
 *
 * To use this,
 * ```
 *      const SpawnableSideEffect = muze.SideEffects.standards.SpawnableSideEffect;
 *
 *      class SelectionBox extends SpawnableSideEffect {
 *          static formalName () {
 *              return 'selectionBox';
 *          }
 *
 *          // Implement the logic of applying the style here.
 *          apply () {
 *          }
 *      }
 * ```
 * @public
 * @class
 * @extends GenericSideEffect
 * @module SpawnableSideEffect
 */

var SpawnableSideEffect =
/*#__PURE__*/
function (_GenericSideEffect) {
  _inherits(SpawnableSideEffect, _GenericSideEffect);

  function SpawnableSideEffect() {
    _classCallCheck(this, SpawnableSideEffect);

    return _possibleConstructorReturn(this, _getPrototypeOf(SpawnableSideEffect).apply(this, arguments));
  }

  _createClass(SpawnableSideEffect, [{
    key: "createElement",

    /**
     * Creates a html or svg element in the container.
     *
     * @public
     * @param {SVGElement|HTMLElement} container Container where the dom element will be rendered.
     * @param {string} elemType Type of dom element.
     * @param {Array} data Array of objects with which the dom elements will be binded.
     * @param {string} className class name of the element.
     *
     * @return {Selection} D3 Selection of the element.
     */
    value: function createElement(container, elemType, data, className, callbacks) {
      return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, elemType, data, className, callbacks);
    }
    /**
     * Returns the drawing information for side effect like svg container, dimensions of the visual unit.
     *
     * @public
     * @return {Object} Drawing information for side effect.
     * ```
     *      sideEffectGroup: // svg container where the side effect needs to be appended.
     *      svgContainer: // svg container of the {@link VisualUnit}.
     *      htmlContainer: // html div container of the {@link VisualUnit}.
     *      width: // Width of the {@link VisualUnit}
     *      height: // Height of the {@link VisualUnit}
     * ```
     */

  }, {
    key: "drawingContext",
    value: function drawingContext() {
      if (arguments.length) {
        this._drawingContext = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._drawingContext();
    }
  }, {
    key: "show",
    value: function show() {
      return this;
    }
  }, {
    key: "hide",
    value: function hide() {
      return this;
    }
  }]);

  return SpawnableSideEffect;
}(_generic__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/surrogate.js":
/*!**************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/surrogate.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SurrogateSideEffect; });
/* harmony import */ var _generic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./generic */ "./packages/muze-firebolt/src/side-effects/generic/index.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }


/**
 * This class is inherited by all side effects which changes the look of any existing elements in the visualization.
 * For example, if a side effect wants to change the color of bar plots, then it is a surrogate side effect.
 *
 * To use this,
 * ```
 *      const SurrogateSideEffect = muze.SideEffects.standards.SurrogateSideEffect;
 *
 *      class BarColorChanger extends SurrogateSideEffect {
 *          static formalName () {
 *              return 'colorChanger';
 *          }
 *
 *          // Implement the logic of applying the style here.
 *          apply () {
 *          }
 *      }
 * ```
 * @public
 *
 * @module SurrogateSideEffect
 * @class
 * @extends GenericSideEffect
 */

var SurrogateSideEffect =
/*#__PURE__*/
function (_GenericSideEffect) {
  _inherits(SurrogateSideEffect, _GenericSideEffect);

  function SurrogateSideEffect() {
    _classCallCheck(this, SurrogateSideEffect);

    return _possibleConstructorReturn(this, _getPrototypeOf(SurrogateSideEffect).apply(this, arguments));
  }

  _createClass(SurrogateSideEffect, [{
    key: "applyInteractionStyle",

    /**
     * Applies or removes interaction styles from plot elements. An array of row ids needs to be passed
     * which identifies the plot elements and applies styles to them.
     *
     * To apply the interaction style,
     * ```
     *      const entryRowIds = entrySet[0].uids;
     *      const interactionStyle = [{
     *          type: 'fill',
     *          intensity: [0, 0, 15, 0] // hsla configuration
     *      }];
     *
     *      this.applyInteractionStyle(entryRowIds, interactionStyle, 'brighten', true);
     * ```
     * @public
     * @param {Array} set Array of row ids.
     * @param {Array} config Style configuration.
     * @param {Object} config[0] fill or stroke configuration.
     * @param {string} config[0].type Type of style - fill or stroke.
     * @param {Array} config[0].intensity hsla configuration.
     * @param {string} interactionType Type of interaction. This is needed for storing the styles for
     * each type of interaction in the plot elements.
     * @param {boolean} apply Whether to apply or remove the interaction style.
     *
     * @return {SurrogateSideEffect} Instance of surrogate side effect.
     */
    value: function applyInteractionStyle(set) {
      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var interactionType = arguments.length > 2 ? arguments[2] : undefined;
      var apply = arguments.length > 3 ? arguments[3] : undefined;
      var layers = this.firebolt.context.layers();
      layers.forEach(function (layer) {
        return layer.config().interactive !== false && layer.applyInteractionStyle(interactionType, set.uids, apply);
      });
      return this;
    }
  }]);

  return SurrogateSideEffect;
}(_generic__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/tooltip/index.js":
/*!******************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/tooltip/index.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Tooltip; });
/* harmony import */ var _chartshq_muze_tooltip__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/muze-tooltip */ "./packages/muze-tooltip/src/index.js");
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helper */ "./packages/muze-firebolt/src/side-effects/helper/index.js");
/* harmony import */ var _strategies__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./strategies */ "./packages/muze-firebolt/src/side-effects/tooltip/strategies.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-firebolt/src/enums/constants.js");
/* harmony import */ var _spawnable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../spawnable */ "./packages/muze-firebolt/src/side-effects/spawnable.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./styles.scss */ "./packages/muze-firebolt/src/side-effects/tooltip/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_6__);
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }









var Tooltip =
/*#__PURE__*/
function (_SpawnableSideEffect) {
  _inherits(Tooltip, _SpawnableSideEffect);

  function Tooltip() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, Tooltip);

    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
      params[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Tooltip)).call.apply(_getPrototypeOf2, [this].concat(params)));
    _this._tooltips = {};
    _this._strategies = _strategies__WEBPACK_IMPORTED_MODULE_3__["strategies"];
    _this._strategy = 'default';
    return _this;
  }

  _createClass(Tooltip, [{
    key: "apply",
    value: function apply(selectionSet, payload) {
      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var totalHeight = 0;
      var totalWidth = 0;
      var dataModel = selectionSet.mergedEnter.model;
      var context = this.firebolt.context;
      var drawingInf = this.drawingContext();

      if (dataModel.isEmpty() || payload.criteria === null || selectionSet.isSourceFieldPresent === false) {
        this.hide(options, null);
        return this;
      }

      var tooltips = this._tooltips;
      var config = this.config();
      var boundBox = {
        width: drawingInf.width,
        height: drawingInf.height
      };
      var showInPosition = payload.showInPosition;
      var pad = config.padding;
      var dataModels = [];
      var fragmented = config.mode === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["FRAGMENTED"];
      var sourceInf = context.getSourceInfo();
      var fields = sourceInf.fields;
      var xFieldDim = fields.x[0] ? fields.x[0].type() === muze_utils__WEBPACK_IMPORTED_MODULE_1__["FieldType"].DIMENSION : false;
      var showVertically = !!xFieldDim;
      var tooltipPos = payload.position;
      var boxes = [];
      var enter = {};
      var uids = dataModel.getData().uids;

      if (fragmented) {
        dataModels.push.apply(dataModels, _toConsumableArray(uids.map(function (d) {
          return dataModel.select(function (fieldsArr, i) {
            return i === d;
          }, {
            saveChild: false
          });
        })));
      } else {
        dataModels.push(dataModel);
      }

      var target = payload.target;
      var targetFields = [];

      if (target) {
        targetFields = target[0] || [];
        var sourceFields = payload.sourceFields;
        var indices = [];

        for (var i = 0, len = targetFields.length; i < len; i++) {
          if (sourceFields.indexOf(targetFields[i]) !== -1) {
            indices.push(i);
          }
        }

        target = target.map(function (d) {
          return d.filter(function (v, i) {
            return indices.indexOf(i) !== -1;
          });
        });
      }

      var plotDimensions = context.getPlotPointsFromIdentifiers(target || payload.criteria, {
        getBBox: true
      }); // Show tooltip for each datamodel

      for (var _i = 0; _i < dataModels.length; _i++) {
        var plotDim = plotDimensions[_i];

        if (fragmented) {
          var dimensions = dataModels[_i].getData().schema.filter(function (d) {
            return d.type === muze_utils__WEBPACK_IMPORTED_MODULE_1__["FieldType"].DIMENSION;
          }).map(function (d) {
            return d.name;
          });

          plotDim = context.getPlotPointsFromIdentifiers(dataModels[_i].project(dimensions), {
            getBBox: true
          });
          plotDim = plotDim && plotDim[0];
        }

        var dt = dataModels[_i];

        if (config.fields) {
          dt = dt.project(config.fields, {
            saveChild: false
          });
        }

        if (config.dataTransform) {
          dt = config.dataTransform(dt, _i);
        }

        enter[_i] = true;
        var layoutContainer = drawingInf.parentContainer,
            parentContainerDimensions = drawingInf.parentContainerDimensions;
        var layoutBoundBox = layoutContainer.getBoundingClientRect();
        var unitBoundBox = drawingInf.htmlContainer.getBoundingClientRect();
        var offsetLeft = unitBoundBox.left - layoutBoundBox.left;
        var offsetTop = unitBoundBox.top - layoutBoundBox.top;
        var tooltipInst = tooltips[_i] = tooltips[_i] || new _chartshq_muze_tooltip__WEBPACK_IMPORTED_MODULE_0__["Tooltip"](layoutContainer, drawingInf.svgContainer);
        sourceInf.payload = payload;
        sourceInf.firebolt = this.firebolt;
        sourceInf.detailFields = context.detailFields();
        sourceInf.timeDiffs = context.timeDiffsByField();
        sourceInf.valueParser = context.valueParser();
        tooltipInst.context(sourceInf);
        var strategy = _strategies__WEBPACK_IMPORTED_MODULE_3__["strategies"][options.strategy];
        tooltipInst.content(options.strategy || this._strategy, dt, {
          formatter: strategy,
          order: options.order
        }).config(this.config()).extent({
          x: 0,
          y: 0,
          width: parentContainerDimensions.width,
          height: parentContainerDimensions.height
        }).offset({
          x: offsetLeft + (config.offset.x || 0),
          y: offsetTop + (config.offset.y || 0)
        });

        if (showInPosition) {
          tooltipInst.position(tooltipPos.x + pad, tooltipPos.y + pad);
        } else if (plotDim) {
          tooltipInst.positionRelativeTo({
            x: plotDim.x,
            y: plotDim.y,
            width: plotDim.width || 0,
            height: plotDim.height || 0
          }, {
            orientation: fragmented ? showVertically ? 'horizontal' : 'vertical' : undefined
          });
        } else {
          tooltipInst.hide();
          break;
        }

        if (fragmented) {
          var position = tooltipInst._position;

          var tooltipBoundBox = tooltipInst._tooltipContainer.node().getBoundingClientRect();

          totalHeight += tooltipBoundBox.height + pad;
          totalWidth += tooltipBoundBox.width + pad;

          if (showVertically ? totalHeight > drawingInf.height : totalWidth > drawingInf.width) {
            break;
          }

          boxes.push({
            x: position.x,
            y: position.y,
            width: tooltipBoundBox.width,
            height: tooltipBoundBox.height,
            tooltip: tooltipInst
          });
        }
      }

      for (var key in tooltips) {
        if (!enter[key]) {
          var tooltip = tooltips[key];
          tooltip.content(payload.action, null);

          if (!tooltip.getContents().length) {
            tooltip.remove();
            delete tooltips[key];
          }
        }
      }

      if (fragmented) {
        Object(_helper__WEBPACK_IMPORTED_MODULE_2__["spaceOutBoxes"])(boxes, boundBox, showVertically);
        boxes.forEach(function (box) {
          return box.tooltip.position(box.x, box.y, {
            repositionArrow: true
          });
        });
      }

      return this;
    }
  }, {
    key: "hide",
    value: function hide(options) {
      var tooltips = this._tooltips;

      for (var key in tooltips) {
        if ({}.hasOwnProperty.call(tooltips, key)) {
          var strategy = options.strategy || this._strategy;
          tooltips[key].content(strategy, null);
          tooltips[key].hide();
        }
      }
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return {
        padding: 5,
        offset: {
          x: 0,
          y: 0
        }
      };
    }
  }, {
    key: "formalName",
    value: function formalName() {
      return 'tooltip';
    }
  }]);

  return Tooltip;
}(_spawnable__WEBPACK_IMPORTED_MODULE_5__["default"]);



/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/tooltip/strategies.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/tooltip/strategies.js ***!
  \***********************************************************************/
/*! exports provided: strategies */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "strategies", function() { return strategies; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }


var strategies = {
  showSelectedItems: function showSelectedItems(dm) {
    var dataObj = dm.getData();
    var measures = dataObj.schema.filter(function (d) {
      return d.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE;
    });
    var aggregatedModel = dm.groupBy([''], measures.reduce(function (acc, v) {
      acc[v.name] = v.defAggFn === 'count' ? 'sum' : v.defAggFn;
      return acc;
    }, {}));
    var fieldsObj = dm.getFieldspace().fieldsObj();
    var fieldsConf = aggregatedModel.getFieldsConfig();
    var values = [{
      value: "".concat(dataObj.data.length),
      style: {
        'font-weight': 'bold'
      }
    }, 'Items Selected'];
    var measureNames = measures.map(function (d) {
      return d.name;
    });

    if (measureNames.length) {
      values = [].concat(_toConsumableArray(values), ["(".concat(fieldsObj[measureNames[0]].defAggFn().toUpperCase(), ") ").concat(measureNames[0]), {
        value: "".concat(aggregatedModel.getData().data[0][fieldsConf[measureNames[0]].index].toFixed(2)),
        style: {
          'font-weight': 'bold'
        }
      }]);
    }

    return [values];
  }
};

/***/ }),

/***/ "./packages/muze-firebolt/src/side-effects/tooltip/styles.scss":
/*!*********************************************************************!*\
  !*** ./packages/muze-firebolt/src/side-effects/tooltip/styles.scss ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/muze-legend/src/enums/actions.js":
/*!***************************************************!*\
  !*** ./packages/muze-legend/src/enums/actions.js ***!
  \***************************************************/
/*! exports provided: DRAG, HOVER, SELECTIONDRAG, CLICK */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DRAG", function() { return DRAG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HOVER", function() { return HOVER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SELECTIONDRAG", function() { return SELECTIONDRAG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLICK", function() { return CLICK; });
var DRAG = 'drag';
var HOVER = 'hover';
var SELECTIONDRAG = 'selectiondrag';
var CLICK = 'click';

/***/ }),

/***/ "./packages/muze-legend/src/enums/behaviours.js":
/*!******************************************************!*\
  !*** ./packages/muze-legend/src/enums/behaviours.js ***!
  \******************************************************/
/*! exports provided: BRUSH, HIGHLIGHT, TOOLTIP, FILTER, SELECT */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BRUSH", function() { return BRUSH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HIGHLIGHT", function() { return HIGHLIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOOLTIP", function() { return TOOLTIP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FILTER", function() { return FILTER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SELECT", function() { return SELECT; });
var BRUSH = 'brush';
var HIGHLIGHT = 'highlight';
var TOOLTIP = 'tooltip';
var FILTER = 'filter';
var SELECT = 'select';

/***/ }),

/***/ "./packages/muze-legend/src/enums/constants.js":
/*!*****************************************************!*\
  !*** ./packages/muze-legend/src/enums/constants.js ***!
  \*****************************************************/
/*! exports provided: CLASSPREFIX, IDFIELD, CONFIG, DATAMODEL, AXES, LAYERDEFS, WIDTH, MAXWIDTH, HEIGHT, MOUNTPOINT, GRIDLINEPARENTGROUPCLASS, TRANSFORM, CONSOLIDATED, FRAGMENTED, DEFAULTCOLOR, DEFAULTSIZE, DEFAULTSHAPE, STEP, GRADIENT, ORDINAL, SCALE_FUNCTIONS, TOP, LEFT, RIGHT, BOTTOM, HORIZONTAL, VERTICAL, CENTER, VALUE, PATH, SHAPE, ICON, RECT, START, UPPER, LOWER, END, SIZE, DISCRETE, MEASURE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLASSPREFIX", function() { return CLASSPREFIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDFIELD", function() { return IDFIELD; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CONFIG", function() { return CONFIG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DATAMODEL", function() { return DATAMODEL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AXES", function() { return AXES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAYERDEFS", function() { return LAYERDEFS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WIDTH", function() { return WIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MAXWIDTH", function() { return MAXWIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HEIGHT", function() { return HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MOUNTPOINT", function() { return MOUNTPOINT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GRIDLINEPARENTGROUPCLASS", function() { return GRIDLINEPARENTGROUPCLASS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TRANSFORM", function() { return TRANSFORM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CONSOLIDATED", function() { return CONSOLIDATED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FRAGMENTED", function() { return FRAGMENTED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULTCOLOR", function() { return DEFAULTCOLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULTSIZE", function() { return DEFAULTSIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULTSHAPE", function() { return DEFAULTSHAPE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "STEP", function() { return STEP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GRADIENT", function() { return GRADIENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ORDINAL", function() { return ORDINAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SCALE_FUNCTIONS", function() { return SCALE_FUNCTIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOP", function() { return TOP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LEFT", function() { return LEFT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RIGHT", function() { return RIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BOTTOM", function() { return BOTTOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HORIZONTAL", function() { return HORIZONTAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VERTICAL", function() { return VERTICAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CENTER", function() { return CENTER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VALUE", function() { return VALUE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PATH", function() { return PATH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SHAPE", function() { return SHAPE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ICON", function() { return ICON; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RECT", function() { return RECT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "START", function() { return START; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UPPER", function() { return UPPER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LOWER", function() { return LOWER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "END", function() { return END; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SIZE", function() { return SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DISCRETE", function() { return DISCRETE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MEASURE", function() { return MEASURE; });
var CLASSPREFIX = 'muze';
var IDFIELD = '__id__';
var CONFIG = 'config';
var DATAMODEL = 'dataModel';
var AXES = 'axes';
var LAYERDEFS = 'layerDef';
var WIDTH = 'width';
var MAXWIDTH = 'max-width';
var HEIGHT = 'height';
var MOUNTPOINT = 'mountPoint';
var GRIDLINEPARENTGROUPCLASS = 'grid-lines';
var TRANSFORM = 'transform';
var CONSOLIDATED = 'consolidated';
var FRAGMENTED = 'fragmented';
var DEFAULTCOLOR = '#F44336';
var DEFAULTSIZE = 50;
var DEFAULTSHAPE = 'circle';
var STEP = 'step';
var GRADIENT = 'gradient';
var ORDINAL = 'ordinal';
var SCALE_FUNCTIONS = {
  size: 'getSize',
  shape: 'getShape',
  color: 'getColor'
};
var TOP = 'top';
var LEFT = 'left';
var RIGHT = 'right';
var BOTTOM = 'bottom';
var HORIZONTAL = 'horizontal';
var VERTICAL = 'vertical';
var CENTER = 'center';
var VALUE = 'value';
var PATH = 'path';
var SHAPE = 'shape';
var ICON = 'icon';
var RECT = 'rect';
var START = 'start';
var UPPER = 'upper';
var LOWER = 'lower';
var END = 'end';
var SIZE = 'size';
var DISCRETE = 'discrete';
var MEASURE = 'measure';

/***/ }),

/***/ "./packages/muze-legend/src/enums/side-effects.js":
/*!********************************************************!*\
  !*** ./packages/muze-legend/src/enums/side-effects.js ***!
  \********************************************************/
/*! exports provided: SELECTIONBOX, Highlighter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SELECTIONBOX", function() { return SELECTIONBOX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Highlighter", function() { return Highlighter; });
var SELECTIONBOX = 'selectionBox';
var Highlighter = 'highlighter';

/***/ }),

/***/ "./packages/muze-legend/src/firebolt/action-behaviour-map.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/action-behaviour-map.js ***!
  \*******************************************************************/
/*! exports provided: actionBehaviourMap, propagationBehaviourMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "actionBehaviourMap", function() { return actionBehaviourMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "propagationBehaviourMap", function() { return propagationBehaviourMap; });
/* harmony import */ var _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/muze-firebolt */ "./packages/muze-firebolt/src/index.js");
var _actionBehaviourMap, _propagationBehaviour;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


var CLASSPREFIX = 'muze';
var actionBehaviourMap = (_actionBehaviourMap = {}, _defineProperty(_actionBehaviourMap, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["ACTIONS"].DRAG, {
  target: ".".concat(CLASSPREFIX, "-gradient-rect"),
  behaviours: [_chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["BEHAVIOURS"].BRUSH]
}), _defineProperty(_actionBehaviourMap, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["ACTIONS"].HOVER, {
  target: [".".concat(CLASSPREFIX, "-legend-columns")],
  behaviours: [_chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["BEHAVIOURS"].HIGHLIGHT]
}), _defineProperty(_actionBehaviourMap, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["ACTIONS"].CLICK, {
  target: [".".concat(CLASSPREFIX, "-legend-columns")],
  behaviours: [_chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["BEHAVIOURS"].SELECT]
}), _actionBehaviourMap);
var propagationBehaviourMap = (_propagationBehaviour = {}, _defineProperty(_propagationBehaviour, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["BEHAVIOURS"].SELECT, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["BEHAVIOURS"].FILTER), _defineProperty(_propagationBehaviour, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["BEHAVIOURS"].BRUSH, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["BEHAVIOURS"].HIGHLIGHT), _propagationBehaviour);

/***/ }),

/***/ "./packages/muze-legend/src/firebolt/behaviour-effect-map.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/behaviour-effect-map.js ***!
  \*******************************************************************/
/*! exports provided: behaviourEffectMap, propagationSideEffects */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "behaviourEffectMap", function() { return behaviourEffectMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "propagationSideEffects", function() { return propagationSideEffects; });
/* harmony import */ var _enums_behaviours__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums/behaviours */ "./packages/muze-legend/src/enums/behaviours.js");
/* harmony import */ var _enums_side_effects__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/side-effects */ "./packages/muze-legend/src/enums/side-effects.js");
var _behaviourEffectMap, _propagationSideEffec;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



var behaviourEffectMap = (_behaviourEffectMap = {}, _defineProperty(_behaviourEffectMap, _enums_behaviours__WEBPACK_IMPORTED_MODULE_0__["BRUSH"], [_enums_side_effects__WEBPACK_IMPORTED_MODULE_1__["SELECTIONBOX"], {
  name: _enums_side_effects__WEBPACK_IMPORTED_MODULE_1__["Highlighter"],
  options: {
    strategy: 'fade'
  }
}]), _defineProperty(_behaviourEffectMap, _enums_behaviours__WEBPACK_IMPORTED_MODULE_0__["HIGHLIGHT"], [_enums_side_effects__WEBPACK_IMPORTED_MODULE_1__["Highlighter"]]), _defineProperty(_behaviourEffectMap, "select", [{
  name: _enums_side_effects__WEBPACK_IMPORTED_MODULE_1__["Highlighter"],
  options: {
    strategy: 'fade'
  }
}]), _behaviourEffectMap);
var propagationSideEffects = (_propagationSideEffec = {}, _defineProperty(_propagationSideEffec, _enums_behaviours__WEBPACK_IMPORTED_MODULE_0__["BRUSH"], [{
  name: _enums_side_effects__WEBPACK_IMPORTED_MODULE_1__["Highlighter"],
  options: {
    strategy: 'fade'
  }
}]), _defineProperty(_propagationSideEffec, _enums_behaviours__WEBPACK_IMPORTED_MODULE_0__["HIGHLIGHT"], [{
  name: _enums_side_effects__WEBPACK_IMPORTED_MODULE_1__["Highlighter"],
  options: {
    strategy: 'fade'
  }
}]), _defineProperty(_propagationSideEffec, _enums_behaviours__WEBPACK_IMPORTED_MODULE_0__["SELECT"], ['filter']), _propagationSideEffec);

/***/ }),

/***/ "./packages/muze-legend/src/firebolt/behavioural/index.js":
/*!****************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/behavioural/index.js ***!
  \****************************************************************/
/*! exports provided: SelectBehaviour */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _select__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./select */ "./packages/muze-legend/src/firebolt/behavioural/select.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SelectBehaviour", function() { return _select__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/muze-legend/src/firebolt/behavioural/select.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/behavioural/select.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SelectBehaviour; });
/* harmony import */ var _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/muze-firebolt */ "./packages/muze-firebolt/src/index.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



var SelectBehaviour =
/*#__PURE__*/
function (_PersistentBehaviour) {
  _inherits(SelectBehaviour, _PersistentBehaviour);

  function SelectBehaviour() {
    _classCallCheck(this, SelectBehaviour);

    return _possibleConstructorReturn(this, _getPrototypeOf(SelectBehaviour).apply(this, arguments));
  }

  _createClass(SelectBehaviour, [{
    key: "setSelectionSet",
    value: function setSelectionSet(addSet, selectionSet) {
      if (addSet === null) {
        selectionSet.reset();
      } else if (addSet.length) {
        // new add set
        var existingRemoveSet = addSet.filter(function (d) {
          return selectionSet._set[d] === _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["SELECTION"].SELECTION_OLD_EXIT || selectionSet._set[d] === _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["SELECTION"].SELECTION_NEW_EXIT;
        }); // existing add set

        if (existingRemoveSet.length) {
          selectionSet.updateEntry();
          selectionSet.add(existingRemoveSet);
        } else {
          selectionSet.updateExit();
          selectionSet.remove(addSet);
        }

        var _selectionSet$getSets = selectionSet.getSets(),
            exitSet = _selectionSet$getSets.exitSet;

        var mergedExitSet = [].concat(_toConsumableArray(new Set(exitSet[1])), _toConsumableArray(new Set(exitSet[0])));
        var completeSetCount = selectionSet.getCompleteSet().length;

        if (exitSet[1].length !== completeSetCount && mergedExitSet.length === completeSetCount) {
          selectionSet.reset();
        }
      } else {
        selectionSet.remove(selectionSet.getCompleteSet());
      }

      return this;
    }
  }], [{
    key: "formalName",
    value: function formalName() {
      return 'select';
    }
  }]);

  return SelectBehaviour;
}(_chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["PersistentBehaviour"]);



/***/ }),

/***/ "./packages/muze-legend/src/firebolt/helper.js":
/*!*****************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/helper.js ***!
  \*****************************************************/
/*! exports provided: propagate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "propagate", function() { return propagate; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _action_behaviour_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./action-behaviour-map */ "./packages/muze-legend/src/firebolt/action-behaviour-map.js");
/* harmony import */ var _behaviour_effect_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./behaviour-effect-map */ "./packages/muze-legend/src/firebolt/behaviour-effect-map.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-legend/src/enums/constants.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }





var propagate = function propagate(firebolt, action, selectionSet) {
  var config = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
  var propagationData;
  var type = firebolt.context.constructor.type();
  var payload = config.payload;
  var data = firebolt.context.data();
  var metaData = firebolt.context.metaData();
  var fieldType = metaData.getData().schema[0].type;
  var propPayload = {};
  var sourceId = firebolt.context._id;
  propPayload.action = _action_behaviour_map__WEBPACK_IMPORTED_MODULE_1__["propagationBehaviourMap"][action] || action;
  propPayload.sideEffects = _behaviour_effect_map__WEBPACK_IMPORTED_MODULE_2__["propagationSideEffects"][action];
  propPayload.sourceCanvas = firebolt.context.canvasAlias();

  var isMutableAction = firebolt._actions.behavioural[propPayload.action].constructor.mutates();

  if (payload.criteria === null) {
    propagationData = null;
  } else {
    var entrySet = selectionSet.mergedEnter;
    var values = data.filter(function (d) {
      return entrySet.uids.indexOf(d.id) !== -1;
    }).map(function (d) {
      return d.rawVal;
    });

    if (type === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["STEP"] || type === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["DISCRETE"] && fieldType === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["MEASURE"]) {
      var field = Object.keys(payload.criteria || {})[0];
      values = data.filter(function (d) {
        return entrySet.uids.indexOf(d.id) !== -1;
      }).map(function (d) {
        return d.range;
      });
      propagationData = values.length ? metaData.select(function (fields) {
        var check = false;

        for (var i = 0; i < values.length; i++) {
          check = fields[field].value >= values[i][0] && fields[field].value <= values[i][1];

          if (check === true) {
            break;
          }
        }

        return check;
      }, {
        saveChild: false
      }) : null;
    } else if (type === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["GRADIENT"]) {
      propagationData = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getDataModelFromRange"])(metaData, payload.criteria);
    } else if (values.length) {
      propagationData = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["assembleModelFromIdentifiers"])(metaData, [payload.criteria[0]].concat(_toConsumableArray(values.map(function (d) {
        return [d];
      }))));
    } else {
      propPayload.criteria = null;
      propagationData = metaData.select(function () {
        return true;
      }, {
        saveChild: false
      });
    }
  }

  var propagateInterpolatedValues = false;

  if (propagationData) {
    var schema = propagationData.getSchema();
    propagateInterpolatedValues = schema.every(function (d) {
      return d.type === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["MEASURE"];
    });
  }

  var propConfig = {
    sourceId: "legend-".concat(sourceId),
    payload: propPayload,
    criteria: propPayload.criteria === null ? null : propagationData,
    isMutableAction: isMutableAction,
    propagateInterpolatedValues: propagateInterpolatedValues,
    action: propPayload.action
  };
  metaData.propagate(propagationData, propConfig, true);
};

/***/ }),

/***/ "./packages/muze-legend/src/firebolt/legend-firebolt.js":
/*!**************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/legend-firebolt.js ***!
  \**************************************************************/
/*! exports provided: LegendFireBolt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LegendFireBolt", function() { return LegendFireBolt; });
/* harmony import */ var _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/muze-firebolt */ "./packages/muze-firebolt/src/index.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./packages/muze-legend/src/firebolt/helper.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-legend/src/enums/constants.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




/**
 * This class manages the interactions of legend.
 * @export
 * @class LegendFireBolt
 * @extends {Firebolt}
 */

var LegendFireBolt =
/*#__PURE__*/
function (_Firebolt) {
  _inherits(LegendFireBolt, _Firebolt);

  function LegendFireBolt() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, LegendFireBolt);

    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
      params[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LegendFireBolt)).call.apply(_getPrototypeOf2, [this].concat(params)));

    _this.initializeSideEffects();

    return _this;
  }

  _createClass(LegendFireBolt, [{
    key: "getPropagationSelectionSet",
    value: function getPropagationSelectionSet(selectionSet) {
      return selectionSet[0];
    }
  }, {
    key: "propagate",
    value: function propagate(behaviourName, payload, selectionSet) {
      Object(_helper__WEBPACK_IMPORTED_MODULE_1__["propagate"])(this, behaviourName, selectionSet, {
        payload: payload
      });
    }
  }, {
    key: "getAddSetFromCriteria",
    value: function getAddSetFromCriteria(criteria) {
      var values;
      var uniqueIds;
      var type = this.context.constructor.type();

      if (criteria === null) {
        uniqueIds = null;
      } else if (type === _enums_constants__WEBPACK_IMPORTED_MODULE_2__["STEP"]) {
        values = Object.values(criteria);
        uniqueIds = this.context.data().filter(function (d) {
          return values.indexOf(d.range) !== -1;
        }).map(function (d) {
          return d.id;
        });
      } else if (type === _enums_constants__WEBPACK_IMPORTED_MODULE_2__["GRADIENT"]) {
        uniqueIds = [];
      } else {
        values = criteria[1];

        if (values) {
          uniqueIds = this.context.data().filter(function (d) {
            return values.indexOf(d.rawVal) !== -1;
          }).map(function (d) {
            return d.id;
          });
        } else {
          values = Object.values(criteria);
          uniqueIds = this.context.data().filter(function (d) {
            return values.indexOf(d.range) !== -1;
          }).map(function (d) {
            return d.id;
          });
        }
      }

      return {
        uids: uniqueIds,
        model: null
      };
    }
  }, {
    key: "getFullData",
    value: function getFullData() {
      return null;
    }
  }]);

  return LegendFireBolt;
}(_chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["Firebolt"]);

/***/ }),

/***/ "./packages/muze-legend/src/firebolt/physical/click.js":
/*!*************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/physical/click.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * Adds mouse interactions to target element.
 * @param {VisualUnit} instance instance of visual unit.
 * @param {SVGElement} targetEl Element on which the event listeners will be attached.
 * @param {Array} behaviours Array of behaviours
 */
var click = function click(firebolt) {
  return function (targetEl, behaviours) {
    var dispatchBehaviour = function dispatchBehaviour(args) {
      var payload = {
        criteria: firebolt.context.getCriteriaFromData(args)
      };
      behaviours.forEach(function (behaviour) {
        return firebolt.dispatchBehaviour(behaviour, payload);
      });
    };

    targetEl.on('click', dispatchBehaviour);
  };
};

/* harmony default export */ __webpack_exports__["default"] = (click);

/***/ }),

/***/ "./packages/muze-legend/src/firebolt/physical/drag.js":
/*!************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/physical/drag.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


/**
 * Adds dragging action to the target element.
 * @param {firebolt} firebolt firebolt
 * @param {SVGElement} targetEl Element on which brushing action is needed.
 * @param {Array} behaviours Array of behaviours
 */

/* istanbul ignore next */

var drag = function drag(firebolt) {
  return function (targetEl, behaviours) {
    var startPos = {};
    var endPos = {};
    var payload;
    var d3Drag = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getD3Drag"])();
    var context = firebolt.context;
    var boundingBox = context.measurement().gradientDimensions;
    var axisType = context.config().align === 'horizontal' ? 'x' : 'y';
    var axisScale = context.axis().source().scale();
    var rangeShifter = axisScale.range()[axisType === 'x' ? 0 : 1];
    targetEl.call(d3Drag().on('start', function () {
      var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
      startPos = {
        x: event.x,
        y: event.y
      };
    }).on('drag', function () {
      var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
      endPos = {
        x: event.x,
        y: event.y
      };
      endPos.x = Math.max(0, Math.min(endPos.x, boundingBox.width));
      endPos.y = Math.max(0, Math.min(endPos.y, boundingBox.height));
      payload = {
        criteria: _defineProperty({}, context.fieldName(), [axisScale.invert(startPos[axisType] + rangeShifter * 2), axisScale.invert(endPos[axisType] + rangeShifter * 2)].sort(function (a, b) {
          return a - b;
        }))
      };
      behaviours.forEach(function (behaviour) {
        return firebolt.dispatchBehaviour(behaviour, payload);
      });
    }).on('end', function () {
      var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
      endPos = {
        x: event.x,
        y: event.y
      };
      endPos.x = Math.max(0, Math.min(endPos.x, boundingBox.width));
      endPos.y = Math.max(0, Math.min(endPos.y, boundingBox.height));

      if (startPos[axisType] === endPos[axisType]) {
        payload = {
          criteria: {}
        };
      } else {
        payload = {
          criteria: _defineProperty({}, context.fieldName(), [axisScale.invert(startPos[axisType] + rangeShifter * 2), axisScale.invert(endPos[axisType] + rangeShifter * 2)].sort(function (a, b) {
            return a - b;
          }))
        };
      }

      behaviours.forEach(function (behaviour) {
        return firebolt.dispatchBehaviour(behaviour, payload);
      });
    }));
  };
};

/* harmony default export */ __webpack_exports__["default"] = (drag);

/***/ }),

/***/ "./packages/muze-legend/src/firebolt/physical/hover.js":
/*!*************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/physical/hover.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");

/**
 * Adds mouse interactions to target element.
 * @param {Firebolt} Firebolt instance of firebolt.
 * @param {SVGElement} targetEl Element on which the event listeners will be attached.
 * @param {Array} behaviours Array of behaviours
 */

/* istanbul ignore next */

var hover = function hover(firebolt) {
  return function (targetEl, behaviours) {
    var dispatchBehaviour = function dispatchBehaviour(args) {
      var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
      var payload = {
        criteria: firebolt.context.getCriteriaFromData(args)
      };
      behaviours.forEach(function (behaviour) {
        return firebolt.dispatchBehaviour(behaviour, payload);
      });
      event.stopPropagation();
    };

    targetEl.on('mouseover', dispatchBehaviour).on('mousemove', dispatchBehaviour).on('mouseout', function () {
      var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
      behaviours.forEach(function (behaviour) {
        return firebolt.dispatchBehaviour(behaviour, {
          criteria: null
        });
      });
      event.stopPropagation();
    });
  };
};

/* harmony default export */ __webpack_exports__["default"] = (hover);

/***/ }),

/***/ "./packages/muze-legend/src/firebolt/physical/index.js":
/*!*************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/physical/index.js ***!
  \*************************************************************/
/*! exports provided: physicalActions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "physicalActions", function() { return physicalActions; });
/* harmony import */ var _drag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./drag */ "./packages/muze-legend/src/firebolt/physical/drag.js");
/* harmony import */ var _hover__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./hover */ "./packages/muze-legend/src/firebolt/physical/hover.js");
/* harmony import */ var _click__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./click */ "./packages/muze-legend/src/firebolt/physical/click.js");
/* harmony import */ var _enums_actions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../enums/actions */ "./packages/muze-legend/src/enums/actions.js");
var _physicalActions;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





var physicalActions = (_physicalActions = {}, _defineProperty(_physicalActions, _enums_actions__WEBPACK_IMPORTED_MODULE_3__["DRAG"], _drag__WEBPACK_IMPORTED_MODULE_0__["default"]), _defineProperty(_physicalActions, _enums_actions__WEBPACK_IMPORTED_MODULE_3__["HOVER"], _hover__WEBPACK_IMPORTED_MODULE_1__["default"]), _defineProperty(_physicalActions, _enums_actions__WEBPACK_IMPORTED_MODULE_3__["CLICK"], _click__WEBPACK_IMPORTED_MODULE_2__["default"]), _physicalActions);

/***/ }),

/***/ "./packages/muze-legend/src/firebolt/physical/selection-box-drag.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/physical/selection-box-drag.js ***!
  \**************************************************************************/
/*! exports provided: selectionBoxDrag */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectionBoxDrag", function() { return selectionBoxDrag; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/constants */ "./packages/muze-legend/src/enums/constants.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




var getSelectionCriteria = function getSelectionCriteria(subject, axis, measures) {
  var criteria = [];
  var axisScale = axis.axisScale,
      axisType = axis.axisType;
  var startPos = measures.startPos,
      endPos = measures.endPos,
      selectionBoxMeasure = measures.selectionBoxMeasure,
      drawingInfMeasure = measures.drawingInfMeasure,
      offset = measures.offset;
  var subjectStartPoint = subject[axisType];

  if (startPos[axisType] === endPos[axisType]) {
    criteria = [];
  } else if (subjectStartPoint + selectionBoxMeasure >= drawingInfMeasure + offset) {
    criteria = [axisScale.invert(drawingInfMeasure + offset - selectionBoxMeasure), axisScale.invert(drawingInfMeasure + offset)];
  } else if (subjectStartPoint - offset < offset) {
    criteria = [axisScale.invert(offset * 2), axisScale.invert(selectionBoxMeasure + offset * 2)];
  } else {
    criteria = [axisScale.invert(subjectStartPoint), axisScale.invert(subjectStartPoint + selectionBoxMeasure)];
  }

  axisType === 'x' ? criteria : criteria.reverse();
  return criteria;
};

var selectionBoxDrag = function selectionBoxDrag(firebolt) {
  return function (targetEl, behaviours) {
    var startPos = {};
    var payload;
    var endPos = {};
    var d3Drag = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getD3Drag"])();
    var context = firebolt.context;
    var axisScale = context.axis().source().scale();
    var axisType = context.config().align === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["HORIZONTAL"] ? 'x' : 'y';
    var drawingInfMeasure = context.measurement().gradientDimensions[axisType === 'x' ? _enums_constants__WEBPACK_IMPORTED_MODULE_1__["WIDTH"] : _enums_constants__WEBPACK_IMPORTED_MODULE_1__["HEIGHT"]];
    var offset = axisScale.range()[axisType === 'x' ? 0 : 1];
    var measures = {
      drawingInfMeasure: drawingInfMeasure,
      offset: offset
    };
    var subject = {};
    targetEl.call(d3Drag().on('start', function () {
      var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
      startPos = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getMousePos"])(this, event.sourceEvent);
      subject = event.subject;
    }).on('drag', function () {
      var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
      var selectionBoxMeasure = subject[axisType === 'x' ? _enums_constants__WEBPACK_IMPORTED_MODULE_1__["WIDTH"] : _enums_constants__WEBPACK_IMPORTED_MODULE_1__["HEIGHT"]];
      subject.x += event.dx;
      subject.y += event.dy;
      measures.selectionBoxMeasure = selectionBoxMeasure;
      measures.startPos = startPos;
      measures.endPos = endPos;
      var criteria = getSelectionCriteria(subject, {
        axisScale: axisScale,
        axisType: axisType
      }, measures);
      payload = {
        criteria: _defineProperty({}, context.fieldName(), criteria),
        fadeOut: true
      };
      firebolt.dispatchBehaviour(behaviours[0], payload);
    }).on('end', function () {
      var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
      var selectionBoxMeasure = subject[axisType === 'x' ? _enums_constants__WEBPACK_IMPORTED_MODULE_1__["WIDTH"] : _enums_constants__WEBPACK_IMPORTED_MODULE_1__["HEIGHT"]];
      measures.selectionBoxMeasure = selectionBoxMeasure;
      measures.startPos = startPos;
      measures.endPos = endPos;
      var criteria = getSelectionCriteria(event, {
        axisScale: axisScale,
        axisType: axisType
      }, measures);
      payload = {
        criteria: _defineProperty({}, context.fieldName(), criteria),
        fadeOut: true,
        config: {
          transition: {
            duration: 200
          }
        }
      };
      firebolt.dispatchBehaviour(behaviours[0], payload);
    }));
  };
};

/***/ }),

/***/ "./packages/muze-legend/src/firebolt/side-effects/index.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/side-effects/index.js ***!
  \*****************************************************************/
/*! exports provided: SelectionBox, LegendHighlighter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _selection_box__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./selection-box */ "./packages/muze-legend/src/firebolt/side-effects/selection-box/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SelectionBox", function() { return _selection_box__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _legend_highlighter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./legend-highlighter */ "./packages/muze-legend/src/firebolt/side-effects/legend-highlighter/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LegendHighlighter", function() { return _legend_highlighter__WEBPACK_IMPORTED_MODULE_1__["default"]; });





/***/ }),

/***/ "./packages/muze-legend/src/firebolt/side-effects/legend-highlighter/index.js":
/*!************************************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/side-effects/legend-highlighter/index.js ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LegendHighlighter; });
/* harmony import */ var _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/muze-firebolt */ "./packages/muze-firebolt/src/index.js");
/* harmony import */ var _strategies__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strategies */ "./packages/muze-legend/src/firebolt/side-effects/legend-highlighter/strategies.js");
/* harmony import */ var _enums_side_effects__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../enums/side-effects */ "./packages/muze-legend/src/enums/side-effects.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





var LegendHighlighter =
/*#__PURE__*/
function (_GenericSideEffect) {
  _inherits(LegendHighlighter, _GenericSideEffect);

  function LegendHighlighter() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, LegendHighlighter);

    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
      params[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LegendHighlighter)).call.apply(_getPrototypeOf2, [this].concat(params)));
    _this._strategies = Object(_strategies__WEBPACK_IMPORTED_MODULE_1__["strategies"])(_this.firebolt);
    _this._strategy = 'brighten';
    return _this;
  }

  _createClass(LegendHighlighter, [{
    key: "apply",
    value: function apply(selectionSet, payload) {
      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var strategy = this._strategies[options.strategy || this._strategy];
      strategy(selectionSet, this);
    }
  }], [{
    key: "formalName",
    value: function formalName() {
      return _enums_side_effects__WEBPACK_IMPORTED_MODULE_2__["Highlighter"];
    }
  }]);

  return LegendHighlighter;
}(_chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["GenericSideEffect"]);



/***/ }),

/***/ "./packages/muze-legend/src/firebolt/side-effects/legend-highlighter/strategies.js":
/*!*****************************************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/side-effects/legend-highlighter/strategies.js ***!
  \*****************************************************************************************/
/*! exports provided: strategies */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "strategies", function() { return strategies; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");

var strategies = function strategies(firebolt) {
  var context = firebolt.context;

  var classed = function classed(set, className, change) {
    var classPrefix = context.config().classPrefix;
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(context.mount()).selectAll(".".concat(classPrefix, "-legend-columns")).filter(function (d) {
      return set.uids.indexOf(d.id) !== -1;
    }).selectAll('div').classed(className, change);
  };

  return {
    fade: function fade(set) {
      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var classPrefix = context.config().classPrefix;

      if (!set.mergedEnter.length && !set.mergedExit.length) {
        classed(set.completeSet, config.className || "".concat(classPrefix, "-legend-fadeout"), false);
      } else {
        classed(set.mergedExit, config.className || "".concat(classPrefix, "-legend-brighten"), false);
        classed(set.mergedExit, config.className || "".concat(classPrefix, "-legend-fadeout"), true);
        classed(set.mergedEnter, config.className || "".concat(classPrefix, "-legend-fadeout"), false);
      }
    },
    brighten: function brighten(set) {
      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var classPrefix = context.config().classPrefix;

      if (!set.mergedEnter.length && !set.mergedExit.length) {
        classed(set.completeSet, config.className || "".concat(classPrefix, "-legend-brighten"), false);
      } else {
        classed(set.mergedEnter, config.className || "".concat(classPrefix, "-legend-brighten"), true);
        classed(set.mergedExit, config.className || "".concat(classPrefix, "-legend-brighten"), false);
      }
    }
  };
};

/***/ }),

/***/ "./packages/muze-legend/src/firebolt/side-effects/selection-box/index.js":
/*!*******************************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/side-effects/selection-box/index.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @chartshq/muze-firebolt */ "./packages/muze-firebolt/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../enums/constants */ "./packages/muze-legend/src/enums/constants.js");
/* harmony import */ var _enums_side_effects__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../enums/side-effects */ "./packages/muze-legend/src/enums/side-effects.js");
/* harmony import */ var _physical_selection_box_drag__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../physical/selection-box-drag */ "./packages/muze-legend/src/firebolt/physical/selection-box-drag.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./styles.scss */ "./packages/muze-legend/src/firebolt/side-effects/selection-box/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_5__);
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }







/**
 * This class is used to create a selection box which is used by visual unit for brushing and
 * selection in the canvas.
 * @class SelectionBox
 */

/* istanbul ignore next */

var SelectionBox =
/*#__PURE__*/
function (_SpawnableSideEffect) {
  _inherits(SelectionBox, _SpawnableSideEffect);

  function SelectionBox() {
    _classCallCheck(this, SelectionBox);

    return _possibleConstructorReturn(this, _getPrototypeOf(SelectionBox).apply(this, arguments));
  }

  _createClass(SelectionBox, [{
    key: "apply",

    /**
     * Draws the selectionbox with the specified dimensions.
     */

    /* istanbul ignore next */
    value: function apply(selectionSet, payload) {
      var x;
      var y;
      var width;
      var height;
      var firebolt = this.firebolt;
      var context = firebolt.context;
      var config = this.config();
      var axis = context.axis().source();
      var className = "".concat(config.classPrefix, "-").concat(config.className);
      var domain = payload.criteria[firebolt.context.fieldName()];
      var axisScale = axis.scale();
      var range = domain ? [axis.getScaleValue(domain[0]), axis.getScaleValue(domain[1])] : [];
      var axisType = context.config().align === _enums_constants__WEBPACK_IMPORTED_MODULE_2__["HORIZONTAL"] ? 'x' : 'y';
      var gradientDimension = firebolt.context.measurement().gradientDimensions[axisType === 'x' ? _enums_constants__WEBPACK_IMPORTED_MODULE_2__["HEIGHT"] : _enums_constants__WEBPACK_IMPORTED_MODULE_2__["WIDTH"]];
      var rangeShifter = axisScale.range()[axisType === 'x' ? 0 : 1];
      var legendGradContainer = context.getDrawingContext().svgContainer;
      var legendSelGroup = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(legendGradContainer, 'g', [1], "".concat(config.classPrefix, "-selection-box-group"));

      if (firebolt.context.config().align === _enums_constants__WEBPACK_IMPORTED_MODULE_2__["HORIZONTAL"]) {
        x = range[0] - rangeShifter || 0;
        y = 0;
        width = range[1] - range[0] || 0;
        height = gradientDimension;
      } else {
        x = 0;
        y = range[1] - rangeShifter || 0;
        height = range[0] - range[1] || 0;
        width = gradientDimension;
      }

      var enterFn = function enterFn(el) {
        Object(_physical_selection_box_drag__WEBPACK_IMPORTED_MODULE_4__["selectionBoxDrag"])(firebolt)(el, ['brush']);
      };

      var selBox = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(legendSelGroup, _enums_constants__WEBPACK_IMPORTED_MODULE_2__["RECT"], [{
        domain: domain,
        x: x,
        y: y,
        width: width,
        height: height
      }], className, {
        enter: enterFn
      });
      selBox.attr('y', y).attr('x', x).attr(_enums_constants__WEBPACK_IMPORTED_MODULE_2__["WIDTH"], width).attr(_enums_constants__WEBPACK_IMPORTED_MODULE_2__["HEIGHT"], height);
    }
  }], [{
    key: "formalName",
    value: function formalName() {
      return _enums_side_effects__WEBPACK_IMPORTED_MODULE_3__["SELECTIONBOX"];
    }
    /**
     * It returns the default configuration needed by selectionbox.
     * @return {Object} Default configuration of the selection box.
     */

  }, {
    key: "defaultConfig",
    value: function defaultConfig() {
      return {
        className: 'legend-selection-box',
        classPrefix: _enums_constants__WEBPACK_IMPORTED_MODULE_2__["CLASSPREFIX"]
      };
    }
  }]);

  return SelectionBox;
}(_chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__["SpawnableSideEffect"]);

/* harmony default export */ __webpack_exports__["default"] = (SelectionBox);

/***/ }),

/***/ "./packages/muze-legend/src/firebolt/side-effects/selection-box/styles.scss":
/*!**********************************************************************************!*\
  !*** ./packages/muze-legend/src/firebolt/side-effects/selection-box/styles.scss ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/muze-legend/src/index.js":
/*!*******************************************!*\
  !*** ./packages/muze-legend/src/index.js ***!
  \*******************************************/
/*! exports provided: DiscreteLegend, GradientLegend, SimpleLegend, StepLegend */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./styles.scss */ "./packages/muze-legend/src/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _legend__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./legend */ "./packages/muze-legend/src/legend/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DiscreteLegend", function() { return _legend__WEBPACK_IMPORTED_MODULE_1__["DiscreteLegend"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GradientLegend", function() { return _legend__WEBPACK_IMPORTED_MODULE_1__["GradientLegend"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleLegend", function() { return _legend__WEBPACK_IMPORTED_MODULE_1__["SimpleLegend"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StepLegend", function() { return _legend__WEBPACK_IMPORTED_MODULE_1__["StepLegend"]; });




/***/ }),

/***/ "./packages/muze-legend/src/legend/defaults.js":
/*!*****************************************************!*\
  !*** ./packages/muze-legend/src/legend/defaults.js ***!
  \*****************************************************/
/*! exports provided: ALIGN, DEFAULT_MEASUREMENT, LEGEND_TITLE, DEFAULT_CONFIG, ICON_MAP */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ALIGN", function() { return ALIGN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_MEASUREMENT", function() { return DEFAULT_MEASUREMENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LEGEND_TITLE", function() { return LEGEND_TITLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_CONFIG", function() { return DEFAULT_CONFIG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ICON_MAP", function() { return ICON_MAP; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-legend/src/enums/constants.js");


var ALIGN = {
  HORIZONTAL: 'horizontal',
  VERTICAL: 'vertical'
};
var DEFAULT_MEASUREMENT = {
  height: 30,
  width: 30,
  maxWidth: Infinity,
  maxHeight: Infinity,
  padding: 2,
  margin: 2,
  border: 1
};
var LEGEND_TITLE = {
  text: '',
  orientation: function orientation(pos) {
    if (pos === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["LEFT"] || pos === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["RIGHT"]) {
      return _enums_constants__WEBPACK_IMPORTED_MODULE_1__["LEFT"];
    }

    return _enums_constants__WEBPACK_IMPORTED_MODULE_1__["CENTER"];
  }
};
var DEFAULT_CONFIG = {
  classPrefix: 'muze',
  borderStyle: 'solid',
  borderColor: 'rgba(0,0,0,0)',
  formatter: {
    bounds: {
      lower: 'less than',
      upper: 'more than'
    }
  },
  item: {
    text: {
      orientation: 'right',
      width: 10,
      formatter: function formatter(val, i, data, context) {
        return context.valueParser()(val);
      }
    },
    icon: {
      className: 'legend-icon',
      height: 20,
      width: 20,
      color: 'rgba(0,0,0,.5)',
      type: 'square'
    }
  }
};
/**
 * Creates a map of pre defined icons
 *
 * @param {string} icon Accepts a icon name like 'square', 'cross', 'diamond' etc
 * @return {Object} icon object which can be used to draw the icons
 */

var ICON_MAP = function ICON_MAP(icon) {
  if (icon && typeof icon === 'string') {
    return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getSymbol"])(icon);
  }

  return icon;
};

/***/ }),

/***/ "./packages/muze-legend/src/legend/discrete-legend.js":
/*!************************************************************!*\
  !*** ./packages/muze-legend/src/legend/discrete-legend.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DiscreteLegend; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _simple_legend__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./simple-legend */ "./packages/muze-legend/src/legend/simple-legend.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-legend/src/enums/constants.js");
/* harmony import */ var _legend_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./legend-helper */ "./packages/muze-legend/src/legend/legend-helper.js");
/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./renderer */ "./packages/muze-legend/src/legend/renderer.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../styles.scss */ "./packages/muze-legend/src/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_5__);
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }







/**
 * Creates a Legend from the axes of a canvas
 *
 * @param {Object} dependencies : legend data
 * @class Legend
 */

var DiscreteLegend =
/*#__PURE__*/
function (_SimpleLegend) {
  _inherits(DiscreteLegend, _SimpleLegend);

  function DiscreteLegend() {
    _classCallCheck(this, DiscreteLegend);

    return _possibleConstructorReturn(this, _getPrototypeOf(DiscreteLegend).apply(this, arguments));
  }

  _createClass(DiscreteLegend, [{
    key: "getDataFromScale",

    /**
     *
     *
     * @param {*} scale
     *
     * @memberof DiscreteLegend
     */
    value: function getDataFromScale(scale) {
      var _getScaleInfo = Object(_legend_helper__WEBPACK_IMPORTED_MODULE_3__["getScaleInfo"])(scale),
          scaleType = _getScaleInfo.scaleType,
          domain = _getScaleInfo.domain,
          scaleFn = _getScaleInfo.scaleFn;

      var domainForLegend = _toConsumableArray(new Set(domain));

      var field = this.metaData().getFieldspace().fields[0];

      var _field$schema = field.schema(),
          type = _field$schema.type,
          subtype = _field$schema.subtype;

      domainForLegend = domainForLegend.map(function (ele, i) {
        var _ref;

        var value = 0;
        var range = 0;
        var rawVal = domainForLegend[i];

        if (type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE) {
          value = (+domainForLegend[i]).toFixed(0);
          var nextVal = domainForLegend[i + 1] ? +domainForLegend[i + 1] : +value;
          range = [value, nextVal.toFixed(0)];
        } else {
          var domainVal = rawVal;

          if (subtype === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL) {
            domainVal = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["formatTemporal"])(domainForLegend[i], field.minimumConsecutiveDifference());
          }

          value = domainVal;
          range = [domainVal];
        }

        return _ref = {}, _defineProperty(_ref, scaleType, scale[scaleFn](ele)), _defineProperty(_ref, "value", value), _defineProperty(_ref, "id", i), _defineProperty(_ref, "range", range), _defineProperty(_ref, "rawVal", rawVal), _ref;
      }).filter(function (d) {
        return d.value !== null;
      });
      domainForLegend = scaleType === _enums_constants__WEBPACK_IMPORTED_MODULE_2__["SIZE"] ? domainForLegend.sort(function (a, b) {
        return a[scaleType] - b[scaleType];
      }) : domainForLegend;
      return domainForLegend;
    }
    /**
     * Render the legend with its title
     *
     * @param {DOM} mountPoint Point where the legend and title are to be appended
     * @return {Instance} Current instance of legend
     * @memberof Legend
     */

  }, {
    key: "render",
    value: function render() {
      var firebolt = this.firebolt();
      var data = this.data();

      var _this$config = this.config(),
          classPrefix = _this$config.classPrefix;

      var legendContainer = _get(_getPrototypeOf(DiscreteLegend.prototype), "render", this).call(this, this.mount()); // create Legend


      var _createLegendSkeleton = Object(_renderer__WEBPACK_IMPORTED_MODULE_4__["createLegendSkeleton"])(this, legendContainer, classPrefix, data),
          legendItem = _createLegendSkeleton.legendItem;

      var _createItemSkeleton = Object(_renderer__WEBPACK_IMPORTED_MODULE_4__["createItemSkeleton"])(this, legendItem),
          itemSkeleton = _createItemSkeleton.itemSkeleton;

      Object(_renderer__WEBPACK_IMPORTED_MODULE_4__["renderDiscreteItem"])(this, itemSkeleton);
      legendContainer.selectAll('div').style('float', _enums_constants__WEBPACK_IMPORTED_MODULE_2__["LEFT"]);
      firebolt.mapActionsAndBehaviour();
      firebolt.createSelectionSet(this.data().map(function (d) {
        return d.id;
      }));
      return legendContainer;
    }
  }], [{
    key: "create",

    /**
     * Initializes an instance of the class
     *
     * @static
     * @param {Object} dependencies Set of dependencies required by the legend
     * @return {Instance} returns a new instance of Legend
     * @memberof Legend
     */
    value: function create(dependencies) {
      return new DiscreteLegend(dependencies);
    }
    /**
     *
     *
     * @static
     *
     * @memberof DiscreteLegend
     */

  }, {
    key: "type",
    value: function type() {
      return _enums_constants__WEBPACK_IMPORTED_MODULE_2__["DISCRETE"];
    }
  }]);

  return DiscreteLegend;
}(_simple_legend__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./packages/muze-legend/src/legend/gradient-helper.js":
/*!************************************************************!*\
  !*** ./packages/muze-legend/src/legend/gradient-helper.js ***!
  \************************************************************/
/*! exports provided: getGradientDomain, makeLinearGradient, createAxis, renderAxis, renderGradient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getGradientDomain", function() { return getGradientDomain; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeLinearGradient", function() { return makeLinearGradient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createAxis", function() { return createAxis; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "renderAxis", function() { return renderAxis; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "renderGradient", function() { return renderGradient; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @chartshq/muze-axis */ "./packages/muze-axis/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-legend/src/enums/constants.js");
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./defaults */ "./packages/muze-legend/src/legend/defaults.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles.scss */ "./packages/muze-legend/src/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_4__);





/**
 *
 *
 * @param {*} data
 *
 */

var getGradientDomain = function getGradientDomain(data) {
  if (typeof data[0].value === 'number') {
    return data.reduce(function (accumulator, currentValue) {
      return [Math.min(currentValue.value, accumulator[0]), Math.max(currentValue.value, accumulator[1])];
    }, [Number.MAX_VALUE, Number.MIN_VALUE]);
  }

  return data.map(function (e) {
    return e.value;
  });
};
/**
 *
 *
 * @param {*} container
 * @param {*} data
 * @param {*} domain
 *
 */

var makeLinearGradient = function makeLinearGradient(container, data, domain) {
  var defs = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'defs', [1]);
  var linearGradient = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(defs, 'linearGradient', [1]).attr('id', 'linear-gradient').attr('x1', '0%').attr('y2', '0%');
  Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(linearGradient, 'stop', data, 'stop-gradient').attr('offset', function (d) {
    return "".concat((d.value - domain[0]) * 100 / (domain[1] - domain[0]), "%");
  }).attr('stop-color', function (d) {
    return d.color;
  });
  return linearGradient;
};
/**
 * Creates an axis cell with a linear axis for computing space and
 * creating gradient legend
 *
 * @return {AxisCell} Instance of Axis Cell for the gradient axis
 * @memberof Legend
 */

var createAxis = function createAxis(context) {
  var data = context.data();

  var _context$config = context.config(),
      align = _context$config.align;

  var AxisCell = context._cells.AxisCell;
  var newAxis = new _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_1__["NumericAxis"]({
    id: "legend-".concat(context._id),
    orientation: align === _defaults__WEBPACK_IMPORTED_MODULE_3__["ALIGN"].VERTICAL ? _enums_constants__WEBPACK_IMPORTED_MODULE_2__["RIGHT"] : _enums_constants__WEBPACK_IMPORTED_MODULE_2__["BOTTOM"],
    style: context._computedStyle,
    nice: false,
    showAxisName: false,
    tickValues: data.map(function (d) {
      return d.value;
    }),
    fixedBaseline: false,
    labels: {
      rotation: 0
    }
  }, {
    labelManager: context._labelManager
  });
  newAxis.domain(getGradientDomain(data));
  newAxis.range([1, 1]);
  return new AxisCell().source(newAxis).config({
    margin: {
      left: 0,
      bottom: 0,
      top: 0,
      right: 0
    }
  });
};
/**
 *
 *
 * @param {*} container
 * @param {*} data
 * @param {*} classPrefix
 *
 * @memberof GradientLegend
 */

var createLegendSkeleton = function createLegendSkeleton(container, classPrefix, data) {
  var domain = getGradientDomain(data);
  var legendContainer = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'div', [1], "".concat(classPrefix, "-legend-body"));
  var legendGradSvg = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(legendContainer, 'svg', [1], "".concat(classPrefix, "-gradient"));
  var legendGradCont = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(legendGradSvg, 'g', [1], "".concat(classPrefix, "-gradient-group"));
  var linearGradient = makeLinearGradient(legendGradSvg, data, domain);
  var legendRect = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(legendGradCont, 'rect', [1], "".concat(classPrefix, "-gradient-rect"));
  return {
    legendContainer: legendContainer,
    legendGradCont: legendGradCont,
    legendGradSvg: legendGradSvg,
    linearGradient: linearGradient,
    legendRect: legendRect
  };
};
/**
 * Renders the axis for the gradient
 *
 * @param {Selection} container Point where axis is to be mounted
 * @param {number} height Height for axis
 * @param {number} width Width for axis
 * @memberof Legend
 */


var renderAxis = function renderAxis(context, container, height, width) {
  var axis = context.axis();
  axis.setAvailableSpace(width, height);
  axis.render(container.node());
  axis.source().render();
};
/**
 * Renders gradient legends
 *
 * @param {Selection} container Point where the legend is to be appended
 * @memberof GradientLegend
 */

var renderGradient = function renderGradient(context, container) {
  var gradHeight = 0;
  var gradWidth = 0;

  var _context$config2 = context.config(),
      align = _context$config2.align,
      classPrefix = _context$config2.classPrefix,
      item = _context$config2.item;

  var data = context.data(); // Create the skeleton for the legend

  var _createLegendSkeleton = createLegendSkeleton(container, classPrefix, data),
      legendContainer = _createLegendSkeleton.legendContainer,
      legendGradSvg = _createLegendSkeleton.legendGradSvg,
      legendGradCont = _createLegendSkeleton.legendGradCont,
      linearGradient = _createLegendSkeleton.linearGradient,
      legendRect = _createLegendSkeleton.legendRect;

  var labelDim = context.axis().source().getAxisDimensions().tickDimensions;

  var _context$measurement = context.measurement(),
      padding = _context$measurement.padding,
      margin = _context$measurement.margin,
      border = _context$measurement.border,
      titleSpaces = _context$measurement.titleSpaces,
      maxItemSpaces = _context$measurement.maxItemSpaces,
      maxHeight = _context$measurement.maxHeight,
      maxWidth = _context$measurement.maxWidth,
      height = _context$measurement.height,
      width = _context$measurement.width;

  var gradientDimensions = {};
  gradHeight = Math.floor(height - (titleSpaces.height + 2 * margin + 2 * border));
  gradWidth = Math.floor(width - (margin * 2 + border * 2));

  if (align === _defaults__WEBPACK_IMPORTED_MODULE_3__["ALIGN"].HORIZONTAL) {
    gradientDimensions.height = item.icon.height;
    gradientDimensions.width = gradWidth - 2 * padding - labelDim.width / 2;
    linearGradient.attr('x2', '100%').attr('y1', '0%');
    legendGradCont.attr('transform', "translate( ".concat(labelDim.width / 2, " 0)"));
    renderAxis(context, legendContainer, gradHeight - item.icon.height - padding, gradWidth - 2 * padding - 1);
    legendContainer.classed("".concat(classPrefix, "-overflow-x"), width > maxWidth);
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["applyStyle"])(legendContainer, {
      height: "".concat(maxItemSpaces.height + border + padding, "px"),
      width: "".concat(Math.min(width, maxWidth), "px"),
      padding: "".concat(padding, "px")
    });
    legendRect.attr('height', gradientDimensions.height);
    legendRect.attr('width', gradientDimensions.width - labelDim.width / 2);
  } else {
    gradientDimensions.height = gradHeight - 2 * padding - labelDim.height / 2;
    gradientDimensions.width = item.icon.width;
    linearGradient.attr('x2', '0%').attr('y1', '100%');
    legendGradCont.attr('transform', "translate(0 ".concat(labelDim.height / 2, ")"));
    renderAxis(context, legendContainer, gradHeight - 2 * padding - 1, gradWidth - item.icon.width - padding * 2);
    legendContainer.classed("".concat(classPrefix, "-overflow-y"), height > maxHeight);
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["applyStyle"])(legendContainer, {
      height: "".concat(Math.min(height, maxHeight), "px"),
      width: "".concat(width, "px"),
      padding: "".concat(padding, "px")
    });
    legendRect.attr('height', gradientDimensions.height - labelDim.height / 2);
    legendRect.attr('width', gradientDimensions.width);
  } // Apply Styles to the legend plot area


  Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["applyStyle"])(legendGradSvg, {
    height: "".concat(gradientDimensions.height, "px"),
    width: "".concat(gradientDimensions.width, "px")
  }); // Apply styles to the legend rect

  Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["applyStyle"])(legendRect, {
    fill: 'url(#linear-gradient)'
  });
  legendGradSvg.attr('height', gradientDimensions.height);
  legendGradSvg.attr('width', gradientDimensions.width);
  context.measurement({
    gradientDimensions: gradientDimensions
  });
  context._legendGradientSvg = legendGradSvg;
  return context;
};

/***/ }),

/***/ "./packages/muze-legend/src/legend/gradient-legend.js":
/*!************************************************************!*\
  !*** ./packages/muze-legend/src/legend/gradient-legend.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return GradientLegend; });
/* harmony import */ var _simple_legend__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./simple-legend */ "./packages/muze-legend/src/legend/simple-legend.js");
/* harmony import */ var _legend_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./legend-helper */ "./packages/muze-legend/src/legend/legend-helper.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-legend/src/enums/constants.js");
/* harmony import */ var _gradient_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./gradient-helper */ "./packages/muze-legend/src/legend/gradient-helper.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles.scss */ "./packages/muze-legend/src/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_4__);
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }






/**
 * Creates a Legend from the axes of a canvas
 *
 * @param {Object} dependencies : legend data
 * @class Legend
 */

var GradientLegend =
/*#__PURE__*/
function (_SimpleLegend) {
  _inherits(GradientLegend, _SimpleLegend);

  function GradientLegend() {
    _classCallCheck(this, GradientLegend);

    return _possibleConstructorReturn(this, _getPrototypeOf(GradientLegend).apply(this, arguments));
  }

  _createClass(GradientLegend, [{
    key: "axis",

    /**
     *
     *
     * @param {*} axis
     *
     * @memberof GradientLegend
     */
    value: function axis() {
      if (arguments.length) {
        this._axis = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._axis;
    }
    /**
     *
     *
     * @param {*} scale
     *
     * @memberof GradientLegend
     */

  }, {
    key: "getDataFromScale",
    value: function getDataFromScale(scale) {
      var domainForLegend = [];

      var _getScaleInfo = Object(_legend_helper__WEBPACK_IMPORTED_MODULE_1__["getScaleInfo"])(scale),
          scaleType = _getScaleInfo.scaleType,
          domain = _getScaleInfo.domain,
          steps = _getScaleInfo.steps,
          scaleFn = _getScaleInfo.scaleFn;

      if (steps instanceof Array) {
        if (domain[0] < steps[0]) {
          domainForLegend[0] = domain[0];
        }

        domainForLegend = [].concat(_toConsumableArray(domainForLegend), _toConsumableArray(steps));

        if (domain[domain.length - 1] > steps[steps.length - 1]) {
          domainForLegend.push(domain[1]);
        }
      } else {
        domainForLegend = Object(_legend_helper__WEBPACK_IMPORTED_MODULE_1__["getInterpolatedData"])(domain, steps - 1);
      }

      domainForLegend = _toConsumableArray(new Set(domainForLegend)).sort(function (a, b) {
        return a - b;
      });
      return domainForLegend.map(function (ele, i) {
        var _ref;

        var value = domainForLegend[i];
        return _ref = {}, _defineProperty(_ref, scaleType, scaleType === _enums_constants__WEBPACK_IMPORTED_MODULE_2__["SIZE"] ? scale[scaleFn](ele) * scale.getScaleFactor() : scale[scaleFn](Math.floor(ele))), _defineProperty(_ref, "value", +value.toFixed(2)), _defineProperty(_ref, "id", i), _ref;
      }).filter(function (d) {
        return d.value !== null;
      });
    }
    /**
     *
     *
     * @param {*} effPadding
     * @param {*} align
     *
     * @memberof Legend
     */

  }, {
    key: "getLabelSpaces",
    value: function getLabelSpaces(effPadding) {
      this.config({
        item: {
          text: {
            orientation: this.config().position
          }
        }
      });
      var axis = Object(_gradient_helper__WEBPACK_IMPORTED_MODULE_3__["createAxis"])(this);
      var axisSpace = axis.getLogicalSpace();
      var space = {
        width: axisSpace.width - effPadding,
        height: axisSpace.height - effPadding
      };
      var axisDomainLength = axis.source().domain().length;
      var labelSpaces = new Array(axisDomainLength).fill(space);
      this.axis(axis);
      return labelSpaces;
    }
    /**
     *
     *
     *
     * @memberof GradientLegend
     */

  }, {
    key: "getDrawingContext",
    value: function getDrawingContext() {
      return {
        svgContainer: this._legendGradientSvg
      };
    }
    /**
     * Render the legend with its title
     *
     * @param {DOM} mountPoint Point where the legend and title are to be appended
     * @return {Instance} Current instance of legend
     * @memberof Legend
     */

  }, {
    key: "render",
    value: function render() {
      var firebolt = this.firebolt();

      var legendContainer = _get(_getPrototypeOf(GradientLegend.prototype), "render", this).call(this, this.mount()); // create Legend


      Object(_gradient_helper__WEBPACK_IMPORTED_MODULE_3__["renderGradient"])(this, legendContainer);
      legendContainer.selectAll('div').style('float', _enums_constants__WEBPACK_IMPORTED_MODULE_2__["LEFT"]);
      firebolt.mapActionsAndBehaviour();
      firebolt.createSelectionSet(this.data().map(function (d) {
        return d.id;
      }));
      return legendContainer;
    }
    /**
        *
        *
        * @param {*} data
        *
        * @memberof SimpleLegend
        */

  }, {
    key: "getCriteriaFromData",
    value: function getCriteriaFromData(data) {
      return [[this.fieldName()], [data.value]];
    }
  }], [{
    key: "create",

    /**
     * Initializes an instance of the class
     *
     * @static
     * @param {Object} dependencies Set of dependencies required by the legend
     * @return {Instance} returns a new instance of Legend
     * @memberof Legend
     */
    value: function create(dependencies) {
      return new GradientLegend(dependencies);
    }
    /**
     *
     *
     * @static
     *
     * @memberof GradientLegend
     */

  }, {
    key: "type",
    value: function type() {
      return _enums_constants__WEBPACK_IMPORTED_MODULE_2__["GRADIENT"];
    }
  }]);

  return GradientLegend;
}(_simple_legend__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-legend/src/legend/index.js":
/*!**************************************************!*\
  !*** ./packages/muze-legend/src/legend/index.js ***!
  \**************************************************/
/*! exports provided: DiscreteLegend, GradientLegend, SimpleLegend, StepLegend */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _discrete_legend__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./discrete-legend */ "./packages/muze-legend/src/legend/discrete-legend.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DiscreteLegend", function() { return _discrete_legend__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _gradient_legend__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./gradient-legend */ "./packages/muze-legend/src/legend/gradient-legend.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GradientLegend", function() { return _gradient_legend__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _simple_legend__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./simple-legend */ "./packages/muze-legend/src/legend/simple-legend.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleLegend", function() { return _simple_legend__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _step_legend__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./step-legend */ "./packages/muze-legend/src/legend/step-legend.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StepLegend", function() { return _step_legend__WEBPACK_IMPORTED_MODULE_3__["default"]; });







/***/ }),

/***/ "./packages/muze-legend/src/legend/legend-helper.js":
/*!**********************************************************!*\
  !*** ./packages/muze-legend/src/legend/legend-helper.js ***!
  \**********************************************************/
/*! exports provided: getScaleInfo, getInterpolatedData, titleCreator, getMaxMeasures, getItemMeasures, computeItemSpaces, getDomainBounds */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getScaleInfo", function() { return getScaleInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getInterpolatedData", function() { return getInterpolatedData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "titleCreator", function() { return titleCreator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMaxMeasures", function() { return getMaxMeasures; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getItemMeasures", function() { return getItemMeasures; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeItemSpaces", function() { return computeItemSpaces; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDomainBounds", function() { return getDomainBounds; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-legend/src/enums/constants.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



/**
 *
 *
 * @param {*} scale
 *
 */

var getScaleInfo = function getScaleInfo(scale) {
  var scaleType = scale.constructor.type();
  var domain = scale.uniqueValues();
  var steps = scale.config().stops || 1;
  var scaleFn = _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SCALE_FUNCTIONS"][scaleType];
  return {
    scaleType: scaleType,
    domain: domain,
    steps: steps,
    scaleFn: scaleFn
  };
};
/**
 *
 *
 * @param {*} domain
 * @param {*} steps
 *
 */

var getInterpolatedData = function getInterpolatedData(domain, steps) {
  var domainForLegend = [];
  var interpolatedFn = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["numberInterpolator"])()(domain[0], domain[1]);

  for (var i = 0; i <= steps; i++) {
    domainForLegend[i] = interpolatedFn(i / steps);
  }

  return domainForLegend;
};
/**
 *
 *
 * @param {*} container
 * @param {*} text
 * @param {*} measurement
 * @param {*} classPrefix
 */

var titleCreator = function titleCreator(container, title, measurement, config) {
  var titleWidth = Math.min(measurement.maxWidth, measurement.width);
  var titleContainer = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'table', [1], "".concat(config.classPrefix, "-legend-title")).style(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["WIDTH"], "".concat(titleWidth, "px")).style(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["HEIGHT"], "".concat(measurement.height, "px")).style('border-bottom', "".concat(measurement.border, "px ").concat(config.borderStyle, " ").concat(config.borderColor)).style('text-align', title.orientation instanceof Function ? title.orientation(config.position) : title.orientation);
  return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(titleContainer, 'td', [1], "".concat(config.classPrefix, "-legend-title-text")).style(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["WIDTH"], "".concat(titleWidth, "px")).style(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["MAXWIDTH"], "".concat(titleWidth, "px")).style(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["HEIGHT"], '100%').style('line-height', 1).style('padding', "".concat(measurement.padding, "px")).text(title.text).style('overflow-x', 'scroll').node();
};
/**
 *
 *
 * @param {*} data
 * @param {*} prop
 * @param {*} labelManager
 *
 */

var getMaxMeasures = function getMaxMeasures(data, prop, labelManager) {
  var maxHeight = -Infinity;
  var maxWidth = -Infinity;
  data.forEach(function (item) {
    var value = prop ? item[prop] : item;
    var space = labelManager.getOriSize(value);
    maxHeight = Math.max(space.height + 2, maxHeight);
    maxWidth = Math.max(space.width + 2, maxWidth);
  });
  return {
    height: maxHeight,
    width: maxWidth
  };
};
/**
 *
 *
 * @param {*} data
 * @param {*} prop
 * @param {*} labelManager
 *
 */

var getItemMeasures = function getItemMeasures(context, prop, formatter) {
  var space = [];
  var data = context.data();
  var labelManager = context._labelManager;
  data.forEach(function (item, index) {
    var value = prop ? item[prop] : item;

    var _labelManager$getOriS = labelManager.getOriSize(formatter(value, index, data, context)),
        height = _labelManager$getOriS.height,
        width = _labelManager$getOriS.width;

    space[index] = {
      height: height + 1,
      width: width + 1
    };
  });
  return space;
};
/**
 *
 *
 * @param {*} textOrientation
 * @param {*} effPadding
 * @param {*} titleSpace
 *
 * @memberof Legend
 */

var computeItemSpaces = function computeItemSpaces(config, measures, data) {
  var totalHeight = 0;
  var totalWidth = 0;
  var maxItemSpaces = {
    width: 0,
    height: 0
  };
  var effPadding = measures.effPadding,
      titleWidth = measures.titleWidth,
      labelSpaces = measures.labelSpaces,
      titleHeight = measures.titleHeight,
      maxWidth = measures.maxWidth;
  var item = config.item,
      align = config.align;
  var icon = item.icon,
      text = item.text;
  var textOrientation = text.orientation;
  var itemSpaces = [];
  var iconSpaces = [];
  var maxIconWidth = 0;
  labelSpaces.forEach(function (labelSpace, i) {
    var itemSpace = {
      width: 0,
      height: 0
    };
    var iconSpace = {
      width: 0,
      height: 0
    };
    var datum = data[i] || {}; // Compute each legend item height/width

    if (textOrientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["LEFT"] || textOrientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["RIGHT"]) {
      // Get label, icon and item widths
      labelSpace.width += effPadding;
      iconSpace.width = (datum.size ? 2 * Math.sqrt(datum.size / Math.PI) : icon.width) + effPadding;
      maxIconWidth = Math.max(iconSpace.width, maxIconWidth);
      itemSpace.width = labelSpace.width + maxIconWidth; // Get label, icon and item heights

      labelSpace.height = Math.max(labelSpace.height, icon.height) + effPadding;
      iconSpace.height = labelSpace.height;
      itemSpace.height = labelSpace.height;
    } else {
      // Get label, icon and item widths
      labelSpace.width = Math.max(labelSpace.width, datum.size ? 2 * Math.sqrt(datum.size / Math.PI) : icon.width) + effPadding;
      iconSpace.width = labelSpace.width;
      itemSpace.width = labelSpace.width;
      maxIconWidth = Math.max(iconSpace.width, maxIconWidth); // Get label, icon and item heights

      labelSpace.height += effPadding;
      iconSpace.height = icon.height + effPadding;
      itemSpace.height = labelSpace.height + iconSpace.height;
    } // Compute height and width of legend for each alignment


    if (align === 'horizontal') {
      totalHeight = Math.max(totalHeight, itemSpace.height);
    } else {
      totalHeight += itemSpace.height;
      totalWidth = Math.max(totalWidth, itemSpace.width, titleWidth);
    }

    maxItemSpaces = {
      width: Math.max(itemSpace.width, maxItemSpaces.width),
      height: Math.max(itemSpace.height, maxItemSpaces.height)
    };
    itemSpaces.push(itemSpace);
    iconSpaces.push(iconSpace);
  });
  itemSpaces.forEach(function (itemSpace, i) {
    if (align === 'horizontal') {
      itemSpace.height = totalHeight;
      iconSpaces[i].width = maxIconWidth;

      if (textOrientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["LEFT"] || textOrientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["RIGHT"]) {
        labelSpaces[i].height = totalHeight;
        iconSpaces[i].height = totalHeight;
        itemSpaces[i].width = labelSpaces[i].width + maxIconWidth;
      } else {
        labelSpaces[i].width = maxIconWidth;
        itemSpaces[i].width = maxIconWidth;
        labelSpaces[i].width = maxIconWidth;
      }

      totalWidth = Math.max(totalWidth + itemSpaces[i].width);
    } else {
      itemSpace.width = Math.max(totalWidth, maxWidth);

      if (textOrientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["TOP"] || textOrientation === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["BOTTOM"]) {
        labelSpaces[i].width = totalWidth;
        iconSpaces[i].width = totalWidth;
        maxIconWidth = totalWidth;
      } else {
        var labelWidth = labelSpaces[i].width;
        var newLabelWidth = maxItemSpaces.width - maxIconWidth;
        iconSpaces[i].width = maxIconWidth;
        itemSpaces[i].width = labelSpaces[i].width + maxIconWidth;
        labelSpaces[i].width = Math.max(labelWidth, newLabelWidth);
        totalWidth = Math.max(totalWidth, itemSpace.width);
      }
    }
  });
  totalWidth = Math.ceil(Math.max(totalWidth, titleWidth)) + effPadding;
  totalHeight += titleHeight + effPadding;
  totalHeight = Math.ceil(totalHeight);
  return {
    totalHeight: totalHeight,
    totalWidth: totalWidth,
    itemSpaces: itemSpaces,
    iconSpaces: iconSpaces,
    maxItemSpaces: maxItemSpaces,
    maxIconWidth: maxIconWidth
  };
};
/**
 *
 *
 * @param {*} type
 * @param {*} scaleInfo
 * @param {*} domainInfo
 *
 */

var getDomainBounds = function getDomainBounds(type, scaleInfo, domainInfo) {
  var _ref;

  var scaleFn = scaleInfo.scaleFn,
      scaleType = scaleInfo.scaleType,
      scale = scaleInfo.scale;
  var domain = domainInfo.domain,
      domainBounds = domainInfo.domainBounds,
      domainLeg = domainInfo.domainLeg,
      steps = domainInfo.steps;
  var ele = domain[type === 'lower' ? 0 : domain.length - 1];
  var step = steps[type === 'lower' ? 0 : steps.length - 1];
  return _ref = {}, _defineProperty(_ref, scaleType, scaleType === 'size' ? scale[scaleFn](ele) * scale.getScaleFactor() : scale[scaleFn](ele)), _defineProperty(_ref, "value", domainBounds[type]), _defineProperty(_ref, "id", type === 'lower' ? 0 : domainLeg.length + 2), _defineProperty(_ref, "range", [ele, step]), _ref;
};

/***/ }),

/***/ "./packages/muze-legend/src/legend/position-config.js":
/*!************************************************************!*\
  !*** ./packages/muze-legend/src/legend/position-config.js ***!
  \************************************************************/
/*! exports provided: positionConfig, alignmentMap, stepData, itemStack */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "positionConfig", function() { return positionConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "alignmentMap", function() { return alignmentMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stepData", function() { return stepData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "itemStack", function() { return itemStack; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-legend/src/enums/constants.js");
var _legendOrientation, _positionConfig, _alignmentMap, _itemStack;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


var legendOrientation = (_legendOrientation = {}, _defineProperty(_legendOrientation, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["HORIZONTAL"], {
  datasets: function datasets(data) {
    return {
      row: [1],
      column: data
    };
  },
  itemContainerMeasures: function itemContainerMeasures(measurement) {
    var itemSpaces = measurement.itemSpaces,
        width = measurement.width;
    return {
      row: {
        width: "".concat(width, "px"),
        padding: "".concat(0, "px")
      },
      column: {
        width: function width(d, i) {
          return "".concat(itemSpaces[i].width, "px");
        },
        padding: "".concat(0, "px")
      }
    };
  },
  getStepSpacesInfo: function getStepSpacesInfo(measurement) {
    var maxItemSpaces = measurement.maxItemSpaces,
        height = measurement.height;
    return {
      iconHeight: height,
      iconWidth: maxItemSpaces.width,
      stepPadding: {
        horizontal: true,
        vertical: false
      }
    };
  }
}), _defineProperty(_legendOrientation, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["VERTICAL"], {
  datasets: function datasets(data) {
    return {
      row: data,
      column: function column(d) {
        return [d];
      }
    };
  },
  itemContainerMeasures: function itemContainerMeasures(measurement, config) {
    var width = measurement.width;
    var padding = config.padding;
    return {
      row: {
        width: "".concat(width, "px"),
        padding: "".concat(padding, "px")
      },
      column: {
        width: "".concat(width, "px"),
        padding: "".concat(0, "px")
      }
    };
  },
  getStepSpacesInfo: function getStepSpacesInfo(measurement) {
    var maxItemSpaces = measurement.maxItemSpaces,
        width = measurement.width;
    return {
      iconHeight: maxItemSpaces.height,
      iconWidth: width,
      stepPadding: {
        horizontal: false,
        vertical: true
      }
    };
  }
}), _legendOrientation);
var positionConfig = (_positionConfig = {}, _defineProperty(_positionConfig, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["LEFT"], legendOrientation[_enums_constants__WEBPACK_IMPORTED_MODULE_0__["VERTICAL"]]), _defineProperty(_positionConfig, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["RIGHT"], legendOrientation[_enums_constants__WEBPACK_IMPORTED_MODULE_0__["VERTICAL"]]), _defineProperty(_positionConfig, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["TOP"], legendOrientation[_enums_constants__WEBPACK_IMPORTED_MODULE_0__["HORIZONTAL"]]), _defineProperty(_positionConfig, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"], legendOrientation[_enums_constants__WEBPACK_IMPORTED_MODULE_0__["HORIZONTAL"]]), _positionConfig);
var alignmentMap = (_alignmentMap = {}, _defineProperty(_alignmentMap, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["LEFT"], _enums_constants__WEBPACK_IMPORTED_MODULE_0__["END"]), _defineProperty(_alignmentMap, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["RIGHT"], _enums_constants__WEBPACK_IMPORTED_MODULE_0__["START"]), _defineProperty(_alignmentMap, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["TOP"], _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CENTER"]), _defineProperty(_alignmentMap, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"], _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CENTER"]), _alignmentMap); // Reverses data for step legend

var stepData = function stepData(data) {
  var _ref;

  return _ref = {}, _defineProperty(_ref, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["LEFT"], data.reverse()), _defineProperty(_ref, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["RIGHT"], data.reverse()), _defineProperty(_ref, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["TOP"], data), _defineProperty(_ref, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"], data), _ref;
}; // Changes the item layout based on the position of the text

var itemStack = (_itemStack = {}, _defineProperty(_itemStack, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["LEFT"], [_enums_constants__WEBPACK_IMPORTED_MODULE_0__["VALUE"], _enums_constants__WEBPACK_IMPORTED_MODULE_0__["SHAPE"]]), _defineProperty(_itemStack, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["RIGHT"], [_enums_constants__WEBPACK_IMPORTED_MODULE_0__["SHAPE"], _enums_constants__WEBPACK_IMPORTED_MODULE_0__["VALUE"]]), _defineProperty(_itemStack, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["TOP"], [_enums_constants__WEBPACK_IMPORTED_MODULE_0__["VALUE"], _enums_constants__WEBPACK_IMPORTED_MODULE_0__["SHAPE"]]), _defineProperty(_itemStack, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"], [_enums_constants__WEBPACK_IMPORTED_MODULE_0__["SHAPE"], _enums_constants__WEBPACK_IMPORTED_MODULE_0__["VALUE"]]), _itemStack);

/***/ }),

/***/ "./packages/muze-legend/src/legend/props.js":
/*!**************************************************!*\
  !*** ./packages/muze-legend/src/legend/props.js ***!
  \**************************************************/
/*! exports provided: PROPS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PROPS", function() { return PROPS; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");

var PROPS = {
  canvasAlias: {},
  config: {
    sanitization: function sanitization(context, value) {
      return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(context._config || {}, value);
    }
  },
  data: {},
  fieldName: {},
  legendContainer: {},
  measurement: {
    sanitization: function sanitization(context, value) {
      var measurement = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(context._measurement, value);
      ['padding', 'border', 'margin'].forEach(function (space) {
        measurement[space] = Math.min(measurement[space] > 0 ? measurement[space] : 0, measurement.maxWidth * 0.1, measurement.maxHeight * 0.1);
      });
      return measurement;
    }
  },
  logicalSpace: {},
  metaData: {},
  range: {
    sanitization: function sanitization(context, value) {
      context.scale().range(value);
      context.resetLogicalSpace();
      context.store().commit('range', value);
      return value;
    }
  },
  scale: {},
  smartTicks: {},
  store: {},
  title: {
    sanitization: function sanitization(context, value) {
      return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(context._title || {}, value);
    }
  },
  valueParser: {
    defaultValue: function defaultValue(val) {
      return val;
    }
  }
};

/***/ }),

/***/ "./packages/muze-legend/src/legend/renderer.js":
/*!*****************************************************!*\
  !*** ./packages/muze-legend/src/legend/renderer.js ***!
  \*****************************************************/
/*! exports provided: getItemContainers, createLegendSkeleton, createItemSkeleton, applyItemStyle, getLegendIcon, renderIcon, renderDiscreteItem, renderStepItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getItemContainers", function() { return getItemContainers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createLegendSkeleton", function() { return createLegendSkeleton; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createItemSkeleton", function() { return createItemSkeleton; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyItemStyle", function() { return applyItemStyle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLegendIcon", function() { return getLegendIcon; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "renderIcon", function() { return renderIcon; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "renderDiscreteItem", function() { return renderDiscreteItem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "renderStepItem", function() { return renderStepItem; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./defaults */ "./packages/muze-legend/src/legend/defaults.js");
/* harmony import */ var _position_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./position-config */ "./packages/muze-legend/src/legend/position-config.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-legend/src/enums/constants.js");




/**
 *
 *
 * @param {*} container
 * @param {*} data
 * @param {*} legendInstance
 * @param {*} align
 *
 */

var getItemContainers = function getItemContainers(container, data, legendInstance) {
  var measurement = legendInstance.measurement();
  var config = legendInstance.config();
  var itemSpaces = measurement.itemSpaces;
  var classPrefix = config.classPrefix,
      position = config.position;
  var positionObj = _position_config__WEBPACK_IMPORTED_MODULE_2__["positionConfig"][position];
  var datasets = positionObj.datasets(data);
  var measures = positionObj.itemContainerMeasures(measurement, config);
  var rows = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'div', datasets.row, "".concat(classPrefix, "-legend-row"));
  rows.style(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["HEIGHT"], function (d, i) {
    return "".concat(itemSpaces[i].height, "px");
  });
  rows.style(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["WIDTH"], measures.row.width);
  rows.style('padding', measures.row.padding);
  var columns = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(rows, 'div', datasets.column, "".concat(classPrefix, "-legend-columns"));
  columns.style(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["WIDTH"], measures.column.width);
  columns.style('padding', measures.column.padding);
  return columns;
};
/**
 *
 *
 * @param {*} container
 * @param {*} classPrefix
 * @param {*} data
 *
 * @memberof DiscreteLegend
 */

var createLegendSkeleton = function createLegendSkeleton(context, container, classPrefix, data) {
  var gradWidth = 0;
  var gradHeight = 0;
  var maxGradHeight = 0;
  var maxGradWidth = 0;
  var measurement = context.measurement();
  var margin = measurement.margin,
      border = measurement.border,
      titleSpaces = measurement.titleSpaces,
      width = measurement.width,
      height = measurement.height,
      maxWidth = measurement.maxWidth,
      maxHeight = measurement.maxHeight;
  gradHeight = height - (titleSpaces.height + 2 * margin + 2 * border);
  gradWidth = width - (margin * 2 + border * 2);
  maxGradHeight = maxHeight - (titleSpaces.height + margin * 2 + border * 2);
  maxGradWidth = maxWidth - (margin * 2 + border * 2);
  var legendBody = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'div', [1], "".concat(classPrefix, "-legend-body"));
  legendBody.select(".".concat(classPrefix, "-legend-overflow")).remove(); // Create a div with scroll when overflow

  if (maxGradWidth && maxGradWidth < gradWidth) {
    legendBody = legendBody.style(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["WIDTH"], "".concat(maxGradWidth, "px")).style('overflow-x', 'scroll');
  } // Create a div with scroll when overflow


  if (maxGradHeight && maxGradHeight < gradHeight) {
    legendBody.style(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["HEIGHT"], "".concat(maxGradHeight, "px")).style('overflow-y', 'scroll');
  }

  legendBody = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(legendBody, 'div', [1], "".concat(classPrefix, "-legend-overflow"));
  legendBody.style(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["WIDTH"], "".concat(gradWidth, "px"));
  legendBody.style(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["HEIGHT"], "".concat(gradHeight, "px"));
  var legendItem = getItemContainers(legendBody, data, context);
  return {
    legendItem: legendItem
  };
};
/**
 * Creates legend item based on alignment and text orientation
 *
 * @param {Selection} container Point where items are to be mounted
 * @return {Instance} Current instance
 * @memberof Legend
 */

var createItemSkeleton = function createItemSkeleton(context, container) {
  var _context$config = context.config(),
      classPrefix = _context$config.classPrefix,
      item = _context$config.item;

  var textOrientation = item.text.orientation;
  var stack = _position_config__WEBPACK_IMPORTED_MODULE_2__["itemStack"][textOrientation];
  var itemSkeleton = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'div', function (d, i) {
    return stack.map(function (e) {
      return [e, d[e], d.color, d.size, d.value, context.fieldName(), i];
    });
  }, "".concat(classPrefix, "-legend-item-info"));
  var alignClass = _position_config__WEBPACK_IMPORTED_MODULE_2__["alignmentMap"][textOrientation];
  itemSkeleton.classed(alignClass, true);
  return {
    itemSkeleton: itemSkeleton
  };
};
/**
 *
 *
 * @param {*} measureType
 * @param {*} stepColorCheck
 */

var applyItemStyle = function applyItemStyle(item, measureType, stepColorCheck, context) {
  var _context$measurement = context.measurement(),
      padding = _context$measurement.padding,
      labelSpaces = _context$measurement.labelSpaces,
      iconSpaces = _context$measurement.iconSpaces,
      maxIconWidth = _context$measurement.maxIconWidth;

  var diff = stepColorCheck ? -padding * 2 : 0;

  if (item[0] === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["VALUE"]) {
    return "".concat(labelSpaces[item[6]][measureType], "px");
  }

  return "".concat(measureType === 'width' && !stepColorCheck ? maxIconWidth : iconSpaces[item[6]][measureType] - diff, "px");
};
/**
 *
 *
 * @param {*} str
 *
 */

var checkPath = function checkPath(str) {
  if (/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(str) && /[\dz]$/i.test(str) && str.length > 4) {
    return true;
  }

  return false;
};
/**
 *
 *
 * @param {*} d
 * @param {*} elem
 */


var createShape = function createShape(d, elem, defaultIcon, width, height) {
  var groupElement = elem; // const { shape, size, update } = d;

  var size = d[3] || Math.min(width, height) * Math.PI;
  var shape = d[1] || defaultIcon;

  if (shape instanceof Promise) {
    shape.then(function (res) {
      d.shape = res;
      return createShape(d, elem);
    });
  } else if (shape instanceof Element) {
    var newShape = shape.cloneNode(true);

    if (newShape.nodeName.toLowerCase() === 'img') {
      var src = newShape.src || newShape.href;
      newShape = document.createElementNS('http://www.w3.org/2000/svg', 'image');
      newShape.setAttribute('href', src);
    }

    var shapeElement = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(newShape);
    shapeElement.attr('transform', "scale(".concat(size / 100, ")"));
    return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(groupElement.node().appendChild(newShape));
  } else if (typeof shape === 'string') {
    var pathStr;

    if (checkPath(shape)) {
      pathStr = shape;
    } else {
      pathStr = Object(_defaults__WEBPACK_IMPORTED_MODULE_1__["ICON_MAP"])(shape).size(size)();
    }

    return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(groupElement, 'path', function (data) {
      return [data];
    }).attr('d', pathStr);
  }

  d[1] = 'circle';
  return createShape(d, elem, 'circle');
};
/**
 * Returns the icon of the legend item
 *
 * @param {Object} datum Data property attached to the item
 * @param {number} width width of the item
 * @param {number} height height of the item
 * @return {Object|string} returns the path string or the string name of the icon
 * @memberof Legend
 */


var getLegendIcon = function getLegendIcon(datum, width, height, defaultIcon) {
  var icon = Object(_defaults__WEBPACK_IMPORTED_MODULE_1__["ICON_MAP"])(datum[1]);

  if (icon) {
    return icon.size(datum[3] || Math.min(width, height) * Math.PI);
  }

  return Object(_defaults__WEBPACK_IMPORTED_MODULE_1__["ICON_MAP"])(datum[3] ? 'circle' : defaultIcon).size(datum[3] || Math.min(width, height) * Math.PI);
};
/**
 *
 *
 */

var renderIcon = function renderIcon(icon, container, datum, context) {
  var classPrefix = context.classPrefix,
      iconHeight = context.iconHeight,
      iconWidth = context.iconWidth,
      maxIconWidth = context.maxIconWidth,
      padding = context.padding,
      color = context.color;
  var svg = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'svg', function (f) {
    return [f];
  }, "".concat(classPrefix, "-legend-icon-svg")).attr(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["WIDTH"], maxIconWidth).attr(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["HEIGHT"], iconHeight).style(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["WIDTH"], "".concat(maxIconWidth, "px")).style(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["HEIGHT"], "".concat(iconHeight, "px"));

  if (icon !== _enums_constants__WEBPACK_IMPORTED_MODULE_3__["RECT"]) {
    var group = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(svg, 'g', [datum[1]], "".concat(classPrefix, "-legend-icon"));
    createShape(datum, group, datum[3] ? 'circle' : 'square', iconWidth, iconHeight).attr('transform', "translate(".concat(maxIconWidth / 2 - padding, " ").concat(iconHeight / 2, ")")).attr('fill', datum[2] || color);
  } else {
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(svg, _enums_constants__WEBPACK_IMPORTED_MODULE_3__["RECT"], [datum[1]], "".concat(classPrefix, "-legend-icon")).attr('x', 0).attr('y', 0).attr(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["WIDTH"], maxIconWidth).attr(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["HEIGHT"], iconHeight).attr('fill', datum[2] || color);
  }
};
/**
 * Renders the items in the legend i.e, icon and text
 *
 * @param {DOM} container Point where item is to be mounted
 * @memberof Legend
 */

var renderDiscreteItem = function renderDiscreteItem(context, container) {
  var labelManager = context._labelManager;

  var _context$config2 = context.config(),
      item = _context$config2.item,
      classPrefix = _context$config2.classPrefix;

  var _context$measurement2 = context.measurement(),
      maxIconWidth = _context$measurement2.maxIconWidth,
      padding = _context$measurement2.padding;

  var _item$icon = item.icon,
      iconWidth = _item$icon.width,
      iconHeight = _item$icon.height,
      color = _item$icon.color,
      className = _item$icon.className;
  var textOrientation = item.text.orientation;
  var formatter = item.text.formatter;
  labelManager.useEllipsesOnOverflow(true);
  Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["applyStyle"])(container, {
    width: function width(d) {
      return applyItemStyle(d, _enums_constants__WEBPACK_IMPORTED_MODULE_3__["WIDTH"], false, context);
    },
    height: function height(d) {
      return applyItemStyle(d, _enums_constants__WEBPACK_IMPORTED_MODULE_3__["HEIGHT"], false, context);
    },
    'text-align': _enums_constants__WEBPACK_IMPORTED_MODULE_3__["CENTER"],
    padding: "".concat(padding, "px")
  });
  labelManager.setStyle(context._computedStyle);
  var dataArr = container.data();
  container.each(function (d, i) {
    if (d[0] === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["VALUE"]) {
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this).text(formatter(d[1], i, dataArr, context)).style("padding-".concat(textOrientation === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["RIGHT"] ? _enums_constants__WEBPACK_IMPORTED_MODULE_3__["LEFT"] : _enums_constants__WEBPACK_IMPORTED_MODULE_3__["RIGHT"]), '0px');
    } else {
      // const icon = getLegendIcon(d, iconWidth, iconHeight, type);
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this).classed("".concat(classPrefix, "-").concat(className), true);
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this).classed("".concat(classPrefix, "-").concat(className, "-").concat(i), true);
      renderIcon('circle', Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this), d, {
        classPrefix: classPrefix,
        iconWidth: iconWidth,
        // iconWidth: 2 * Math.sqrt(d[3] / Math.PI) || iconWidth,
        iconHeight: iconHeight,
        maxIconWidth: maxIconWidth,
        padding: padding,
        color: color
      });
    }
  });
};
/**
* Renders the items in the legend i.e, icon and text
*
* @param {DOM} container Point where item is to be mounted
* @memberof Legend
*/

var renderStepItem = function renderStepItem(context, container) {
  var labelManager = context._labelManager;

  var _context$config3 = context.config(),
      item = _context$config3.item,
      position = _context$config3.position,
      classPrefix = _context$config3.classPrefix;

  var _context$measurement3 = context.measurement(),
      maxItemSpaces = _context$measurement3.maxItemSpaces,
      maxIconWidth = _context$measurement3.maxIconWidth,
      padding = _context$measurement3.padding;

  var _item$icon2 = item.icon,
      width = _item$icon2.width,
      height = _item$icon2.height,
      color = _item$icon2.color;
  var formatter = item.text.formatter;
  labelManager.useEllipsesOnOverflow(true);

  var _positionConfig$posit = _position_config__WEBPACK_IMPORTED_MODULE_2__["positionConfig"][position].getStepSpacesInfo({
    maxItemSpaces: maxItemSpaces,
    height: height,
    width: width
  }),
      iconHeight = _positionConfig$posit.iconHeight,
      iconWidth = _positionConfig$posit.iconWidth,
      stepPadding = _positionConfig$posit.stepPadding;

  Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["applyStyle"])(container, {
    width: function width(d) {
      return applyItemStyle(d, _enums_constants__WEBPACK_IMPORTED_MODULE_3__["WIDTH"], stepPadding.horizontal, context);
    },
    height: function height(d) {
      return applyItemStyle(d, _enums_constants__WEBPACK_IMPORTED_MODULE_3__["HEIGHT"], stepPadding.vertical, context);
    },
    'text-align': 'center',
    padding: "".concat(padding, "px")
  });
  labelManager.setStyle(context._computedStyle);
  var dataArr = container.data();
  container.each(function (d, i) {
    if (d[0] === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["VALUE"]) {
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this).text(formatter(d[1], i, dataArr, context));
    } else {
      renderIcon(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["RECT"], Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this), d, {
        classPrefix: classPrefix,
        iconWidth: iconWidth,
        iconHeight: iconHeight,
        maxIconWidth: maxIconWidth,
        color: color
      });
    }
  });
};

/***/ }),

/***/ "./packages/muze-legend/src/legend/simple-legend.js":
/*!**********************************************************!*\
  !*** ./packages/muze-legend/src/legend/simple-legend.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SimpleLegend; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @chartshq/muze-firebolt */ "./packages/muze-firebolt/src/index.js");
/* harmony import */ var _firebolt_behavioural__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../firebolt/behavioural */ "./packages/muze-legend/src/firebolt/behavioural/index.js");
/* harmony import */ var _firebolt_legend_firebolt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../firebolt/legend-firebolt */ "./packages/muze-legend/src/firebolt/legend-firebolt.js");
/* harmony import */ var _firebolt_action_behaviour_map__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../firebolt/action-behaviour-map */ "./packages/muze-legend/src/firebolt/action-behaviour-map.js");
/* harmony import */ var _firebolt_physical__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../firebolt/physical */ "./packages/muze-legend/src/firebolt/physical/index.js");
/* harmony import */ var _firebolt_side_effects__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../firebolt/side-effects */ "./packages/muze-legend/src/firebolt/side-effects/index.js");
/* harmony import */ var _firebolt_behaviour_effect_map__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../firebolt/behaviour-effect-map */ "./packages/muze-legend/src/firebolt/behaviour-effect-map.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-legend/src/enums/constants.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./props */ "./packages/muze-legend/src/legend/props.js");
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./defaults */ "./packages/muze-legend/src/legend/defaults.js");
/* harmony import */ var _legend_helper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./legend-helper */ "./packages/muze-legend/src/legend/legend-helper.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }













/**
 * Creates a Legend from the axes of a canvas
 *
 * @param {Object} dependencies : legend data
 * @class SimpleLegend
 */

var SimpleLegend =
/*#__PURE__*/
function () {
  /**
   * Creates an instance of Legend.
   * @param {Object} dependencies Set of dependencies required by the legend
   * @memberof Legend
   */
  function SimpleLegend(dependencies) {
    _classCallCheck(this, SimpleLegend);

    this._data = [];
    this._metaData = [];
    this._mount = null;
    this._fieldName = null;
    this._title = Object.assign({}, _defaults__WEBPACK_IMPORTED_MODULE_10__["LEGEND_TITLE"]);
    this._metaData = null;
    this._labelManager = dependencies.labelManager;
    this._cells = dependencies.cells;
    this._id = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getUniqueId"])();
    this._measurement = Object.assign({}, this.constructor.defaultMeasurement());
    this._config = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, this.constructor.defaultConfig());
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(this, _props__WEBPACK_IMPORTED_MODULE_9__["PROPS"]);
    this._computedStyle = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getSmartComputedStyle"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])('body'), "".concat(this.config().classPrefix, "-legend-item-info"));
    this._firebolt = new _firebolt_legend_firebolt__WEBPACK_IMPORTED_MODULE_3__["LegendFireBolt"](this, {
      behavioural: Object.assign({}, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__["behaviouralActions"], _firebolt_behavioural__WEBPACK_IMPORTED_MODULE_2__),
      physical: _firebolt_physical__WEBPACK_IMPORTED_MODULE_5__["physicalActions"],
      physicalBehaviouralMap: _firebolt_action_behaviour_map__WEBPACK_IMPORTED_MODULE_4__["actionBehaviourMap"]
    }, _firebolt_side_effects__WEBPACK_IMPORTED_MODULE_6__, _firebolt_behaviour_effect_map__WEBPACK_IMPORTED_MODULE_7__["behaviourEffectMap"]);
  }

  _createClass(SimpleLegend, [{
    key: "id",
    value: function id() {
      return this._id;
    }
    /**
     * Returns a unique identifier for the instance used
     * to control selective rendering.
     *
     * @memberof SimpleCell
     */

  }, {
    key: "getDataFromScale",
    value: function getDataFromScale() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Initializes an instance of the class
     *
     * @static
     * @param {Object} dependencies Set of dependencies required by the legend
     * @return {Instance} returns a new instance of Legend
     * @memberof Legend
     */

  }, {
    key: "firebolt",

    /**
     *
     *
     * @readonly
     * @memberof SimpleLegend
     */
    value: function firebolt() {
      if (arguments.length) {
        return this;
      }

      return this._firebolt;
    }
    /**
     *
     *
     *
     * @memberof Legend
     */

  }, {
    key: "elemType",
    value: function elemType() {
      return _enums_constants__WEBPACK_IMPORTED_MODULE_8__["PATH"];
    }
    /**
     *
     *
     *
     * @memberof Legend
     */

  }, {
    key: "mount",
    value: function mount() {
      if (arguments.length) {
        this._mount = arguments.length <= 0 ? undefined : arguments[0];
        this.render();
        return this;
      }

      return this._mount;
    }
    /**
     *
     *
     * @param {*} effPadding
     * @param {*} align
     *
     * @memberof Legend
     */

  }, {
    key: "getLabelSpaces",
    value: function getLabelSpaces() {
      var _this$config = this.config(),
          item = _this$config.item,
          classPrefix = _this$config.classPrefix;

      this._labelManager.setStyle(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getSmartComputedStyle"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])('body'), "".concat(classPrefix, "-legend-item-info")));

      return Object(_legend_helper__WEBPACK_IMPORTED_MODULE_11__["getItemMeasures"])(this, _enums_constants__WEBPACK_IMPORTED_MODULE_8__["VALUE"], item.text.formatter);
    }
    /**
     * Sets the height and width of a legend based on provided max
     * height and width and based on its contents
     *
     * @return {Instance} Current instance
     * @memberof Legend
     */

  }, {
    key: "setLegendMeasures",
    value: function setLegendMeasures() {
      var _this$measurement = this.measurement(),
          width = _this$measurement.width,
          height = _this$measurement.height,
          maxWidth = _this$measurement.maxWidth,
          maxHeight = _this$measurement.maxHeight,
          padding = _this$measurement.padding,
          margin = _this$measurement.margin,
          border = _this$measurement.border;

      var _this$config2 = this.config(),
          align = _this$config2.align; // Effective padding, margin and padding


      var effPadding = padding * 2;
      var effBorder = border * 2;
      var effMargin = margin * 2;
      this.data(this.getDataFromScale(this.scale())); // Get space occupied by title

      var titleSpace = this.getTitleSpace();
      var titleHeight = titleSpace.height > 0 ? titleSpace.height + effPadding : 0;
      var titleWidth = titleSpace.width + effPadding; // Get space occupied by labels

      var labelSpaces = this.getLabelSpaces(effPadding, align);

      var _computeItemSpaces = Object(_legend_helper__WEBPACK_IMPORTED_MODULE_11__["computeItemSpaces"])(this.config(), {
        effPadding: effPadding,
        titleWidth: titleWidth,
        labelSpaces: labelSpaces,
        titleHeight: titleHeight,
        maxWidth: maxWidth,
        maxHeight: maxHeight
      }, this.data()),
          totalHeight = _computeItemSpaces.totalHeight,
          totalWidth = _computeItemSpaces.totalWidth,
          itemSpaces = _computeItemSpaces.itemSpaces,
          iconSpaces = _computeItemSpaces.iconSpaces,
          maxItemSpaces = _computeItemSpaces.maxItemSpaces,
          maxIconWidth = _computeItemSpaces.maxIconWidth;

      this.measurement({
        width: Math.max(totalWidth, width) + effMargin + effBorder,
        height: Math.max(totalHeight, height) + effMargin + effBorder,
        labelSpaces: labelSpaces,
        iconSpaces: iconSpaces,
        itemSpaces: itemSpaces,
        maxItemSpaces: maxItemSpaces,
        maxIconWidth: maxIconWidth,
        titleSpaces: {
          width: Math.min(maxWidth, this.measurement().width) - effMargin - effBorder,
          height: titleHeight
        }
      });
      return this;
    }
    /**
     * Returns the space occupied by the legend title
     *
     * @return {Object} Space occupied by title
     * @memberof Legend
     */

  }, {
    key: "getTitleSpace",
    value: function getTitleSpace() {
      this._labelManager.setStyle(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getSmartComputedStyle"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])('body'), "".concat(this.config().classPrefix, "-legend-title")));

      return this._labelManager.getOriSize(this.title().text ? this.title().text : '');
    }
    /**
     * Creates the title for the legend
     *
     * @param {DOM} container Container made for the title
     * @return {Selection} Title and it's node
     * @memberof Legend
     */

  }, {
    key: "renderTitle",
    value: function renderTitle(container) {
      var _this$measurement2 = this.measurement(),
          titleSpaces = _this$measurement2.titleSpaces,
          border = _this$measurement2.border,
          padding = _this$measurement2.padding,
          width = _this$measurement2.width,
          maxWidth = _this$measurement2.maxWidth;

      var _this$config3 = this.config(),
          borderStyle = _this$config3.borderStyle,
          borderColor = _this$config3.borderColor;

      Object(_legend_helper__WEBPACK_IMPORTED_MODULE_11__["titleCreator"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(container), this.title(), {
        height: titleSpaces.height,
        width: width,
        maxWidth: maxWidth,
        border: border,
        padding: padding,
        borderStyle: borderStyle,
        borderColor: borderColor
      }, this.config());
      return this;
    }
    /**
     * Render the legend with its title
     *
     * @param {DOM} mountPoint Point where the legend and title are to be appended
     * @return {Instance} Current instance of legend
     * @memberof Legend
     */

  }, {
    key: "render",
    value: function render() {
      var firebolt = this.firebolt();

      var _this$config4 = this.config(),
          classPrefix = _this$config4.classPrefix,
          borderStyle = _this$config4.borderStyle,
          borderColor = _this$config4.borderColor,
          position = _this$config4.position;

      var _this$measurement3 = this.measurement(),
          maxWidth = _this$measurement3.maxWidth,
          maxHeight = _this$measurement3.maxHeight,
          width = _this$measurement3.width,
          height = _this$measurement3.height,
          margin = _this$measurement3.margin,
          border = _this$measurement3.border;

      var legendContainer = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this.mount()), 'div', [1], "".concat(classPrefix, "-legend-box"));
      var marginPosition;

      switch (position) {
        case _enums_constants__WEBPACK_IMPORTED_MODULE_8__["TOP"]:
          marginPosition = "margin-".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_8__["BOTTOM"]);
          break;

        case _enums_constants__WEBPACK_IMPORTED_MODULE_8__["LEFT"]:
          marginPosition = "margin-".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_8__["RIGHT"]);
          break;

        case _enums_constants__WEBPACK_IMPORTED_MODULE_8__["BOTTOM"]:
          marginPosition = "margin-".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_8__["TOP"]);
          break;

        default:
          marginPosition = "margin-".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_8__["LEFT"]);
      }

      legendContainer.classed("".concat(classPrefix, "-legend-box-").concat(this._id), true);
      legendContainer.style('float', 'left'); // set height and width

      legendContainer.style('width', "".concat(Math.min(maxWidth, width) - margin * 2, "px")).style('height', "".concat(Math.min(maxHeight, height) - margin * 2, "px")).style("".concat(marginPosition), "".concat(margin, "px")).style('border', "".concat(border, "px ").concat(borderStyle, " ").concat(borderColor));
      this.legendContainer(legendContainer.node()); // create title

      this.renderTitle(legendContainer.node());
      firebolt.createSelectionSet(this.data().map(function (d) {
        return d.id;
      }));
      return legendContainer;
    }
    /**
     *
     *
     * @param {*} data
     *
     * @memberof StepLegend
     */

  }, {
    key: "getCriteriaFromData",
    value: function getCriteriaFromData(data) {
      var fieldName = this.fieldName();
      var type = this.metaData().getData().schema[0].type;

      if (type === 'measure') {
        return _defineProperty({}, fieldName, data.range);
      }

      return [[fieldName], [data.rawVal]];
    }
  }], [{
    key: "create",
    value: function create(dependencies) {
      return new SimpleLegend(dependencies);
    }
    /**
     *
     *
     * @static
     *
     * @memberof SimpleLegend
     */

  }, {
    key: "defaultConfig",
    value: function defaultConfig() {
      return _defaults__WEBPACK_IMPORTED_MODULE_10__["DEFAULT_CONFIG"];
    }
    /**
     *
     *
     * @static
     *
     * @memberof SimpleLegend
     */

  }, {
    key: "defaultMeasurement",
    value: function defaultMeasurement() {
      return _defaults__WEBPACK_IMPORTED_MODULE_10__["DEFAULT_MEASUREMENT"];
    }
  }]);

  return SimpleLegend;
}();



/***/ }),

/***/ "./packages/muze-legend/src/legend/step-legend.js":
/*!********************************************************!*\
  !*** ./packages/muze-legend/src/legend/step-legend.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return StepLegend; });
/* harmony import */ var _simple_legend__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./simple-legend */ "./packages/muze-legend/src/legend/simple-legend.js");
/* harmony import */ var _legend_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./legend-helper */ "./packages/muze-legend/src/legend/legend-helper.js");
/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./renderer */ "./packages/muze-legend/src/legend/renderer.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/constants */ "./packages/muze-legend/src/enums/constants.js");
/* harmony import */ var _position_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./position-config */ "./packages/muze-legend/src/legend/position-config.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../styles.scss */ "./packages/muze-legend/src/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_5__);
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }







/**
 * Creates a Legend from the axes of a canvas
 *
 * @param {Object} dependencies : legend data
 * @class Legend
 */

var StepLegend =
/*#__PURE__*/
function (_SimpleLegend) {
  _inherits(StepLegend, _SimpleLegend);

  function StepLegend() {
    _classCallCheck(this, StepLegend);

    return _possibleConstructorReturn(this, _getPrototypeOf(StepLegend).apply(this, arguments));
  }

  _createClass(StepLegend, [{
    key: "getDataFromScale",

    /**
     *
     *
     * @param {*} scale
     *
     * @memberof StepLegend
     */
    value: function getDataFromScale(scale) {
      var domainLeg = [];

      var _getScaleInfo = Object(_legend_helper__WEBPACK_IMPORTED_MODULE_1__["getScaleInfo"])(scale),
          scaleType = _getScaleInfo.scaleType,
          domain = _getScaleInfo.domain,
          steps = _getScaleInfo.steps,
          scaleFn = _getScaleInfo.scaleFn;

      var _this$config = this.config(),
          formatter = _this$config.formatter;

      var domainBounds = {
        lower: null,
        upper: null
      };

      if (steps instanceof Array) {
        if (domain[0] < steps[0]) {
          domainBounds.lower = ["".concat(formatter.bounds.lower, " ").concat(steps[0])];
        }

        domainLeg = [].concat(_toConsumableArray(domainLeg), _toConsumableArray(steps));

        if (domain[domain.length - 1] > steps[steps.length - 1]) {
          domainBounds.upper = ["".concat(formatter.bounds.upper, " ").concat(steps[steps.length - 1])];
        }
      } else {
        domainLeg = Object(_legend_helper__WEBPACK_IMPORTED_MODULE_1__["getInterpolatedData"])(domain, steps);
      }

      domainLeg = _toConsumableArray(new Set(domainLeg)).sort(function (a, b) {
        return a - b;
      });
      domainLeg = domainLeg.map(function (ele, i) {
        var _ref;

        var value = null;

        if (i < domainLeg.length - 1) {
          value = "".concat(ele.toFixed(1), " - ").concat(+domainLeg[i + 1].toFixed(1));
        }

        return _ref = {}, _defineProperty(_ref, scaleType, scaleType === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["SIZE"] ? scale[scaleFn](ele) * scale.getScaleFactor() : scale[scaleFn](ele)), _defineProperty(_ref, "value", value), _defineProperty(_ref, "id", i + 1), _defineProperty(_ref, "range", [ele, domainLeg[i + 1]]), _ref;
      }).filter(function (d) {
        return d.value !== null;
      });

      if (domainBounds.lower) {
        var lowerBounds = Object(_legend_helper__WEBPACK_IMPORTED_MODULE_1__["getDomainBounds"])(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["LOWER"], {
          scale: scale,
          scaleFn: scaleFn,
          scaleType: scaleType
        }, {
          domain: domain,
          steps: steps,
          domainBounds: domainBounds
        });
        domainLeg = [lowerBounds].concat(_toConsumableArray(domainLeg));
      }

      if (domainBounds.upper) {
        var upperBounds = Object(_legend_helper__WEBPACK_IMPORTED_MODULE_1__["getDomainBounds"])(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["UPPER"], {
          scale: scale,
          scaleFn: scaleFn,
          scaleType: scaleType
        }, {
          domain: domain,
          steps: steps,
          domainBounds: domainBounds,
          domainLeg: domainLeg
        });
        domainLeg = [].concat(_toConsumableArray(domainLeg), [upperBounds]);
      }

      return domainLeg;
    }
    /**
    *
    *
    * @param {*} effPadding
    * @param {*} align
    *
    * @memberof Legend
    */

  }, {
    key: "getLabelSpaces",
    value: function getLabelSpaces(effPadding, align) {
      this.config({
        item: {
          text: {
            orientation: this.config().position
          }
        }
      });
      return _get(_getPrototypeOf(StepLegend.prototype), "getLabelSpaces", this).call(this, effPadding, align);
    }
    /**
     *
     *
     *
     * @memberof Legend
     */

  }, {
    key: "elemType",
    value: function elemType() {
      return _enums_constants__WEBPACK_IMPORTED_MODULE_3__["RECT"];
    }
    /**
    * Render the legend with its title
    *
    * @param {DOM} mountPoint Point where the legend and title are to be appended
    * @return {Instance} Current instance of legend
    * @memberof Legend
    */

  }, {
    key: "render",
    value: function render() {
      var firebolt = this.firebolt();

      var _this$config2 = this.config(),
          classPrefix = _this$config2.classPrefix,
          position = _this$config2.position;

      var data = Object(_position_config__WEBPACK_IMPORTED_MODULE_4__["stepData"])(this.data())[position];

      var legendContainer = _get(_getPrototypeOf(StepLegend.prototype), "render", this).call(this, this.mount()); // create Legend


      var _createLegendSkeleton = Object(_renderer__WEBPACK_IMPORTED_MODULE_2__["createLegendSkeleton"])(this, legendContainer, classPrefix, data),
          legendItem = _createLegendSkeleton.legendItem;

      var _createItemSkeleton = Object(_renderer__WEBPACK_IMPORTED_MODULE_2__["createItemSkeleton"])(this, legendItem),
          itemSkeleton = _createItemSkeleton.itemSkeleton;

      Object(_renderer__WEBPACK_IMPORTED_MODULE_2__["renderStepItem"])(this, itemSkeleton);
      legendContainer.selectAll('div').style('float', _enums_constants__WEBPACK_IMPORTED_MODULE_3__["LEFT"]);
      firebolt.mapActionsAndBehaviour();
      firebolt.createSelectionSet(this.data().map(function (d) {
        return d.id;
      }));
      return legendContainer;
    }
    /**
     *
     *
     * @param {*} data
     *
     * @memberof StepLegend
     */

  }, {
    key: "getCriteriaFromData",
    value: function getCriteriaFromData(data) {
      var fieldName = this.fieldName();
      return _defineProperty({}, fieldName, data.range);
    }
  }], [{
    key: "create",

    /**
     * Initializes an instance of the class
     *
     * @static
     * @param {Object} dependencies Set of dependencies required by the legend
     * @return {Instance} returns a new instance of Legend
     * @memberof Legend
     */
    value: function create(dependencies) {
      return new StepLegend(dependencies);
    }
    /**
     *
     *
     * @static
     *
     * @memberof StepLegend
     */

  }, {
    key: "type",
    value: function type() {
      return _enums_constants__WEBPACK_IMPORTED_MODULE_3__["STEP"];
    }
  }]);

  return StepLegend;
}(_simple_legend__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze-legend/src/styles.scss":
/*!**********************************************!*\
  !*** ./packages/muze-legend/src/styles.scss ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/muze-tooltip/src/constants.js":
/*!************************************************!*\
  !*** ./packages/muze-tooltip/src/constants.js ***!
  \************************************************/
/*! exports provided: CLASSPREFIX, ARROW_RIGHT, ARROW_TOP, ARROW_BOTTOM, ARROW_LEFT, TOOLTIP_LEFT, TOOLTIP_RIGHT, TOOLTIP_BOTTOM, TOOLTIP_TOP, INITIAL_STYLE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLASSPREFIX", function() { return CLASSPREFIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ARROW_RIGHT", function() { return ARROW_RIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ARROW_TOP", function() { return ARROW_TOP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ARROW_BOTTOM", function() { return ARROW_BOTTOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ARROW_LEFT", function() { return ARROW_LEFT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOOLTIP_LEFT", function() { return TOOLTIP_LEFT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOOLTIP_RIGHT", function() { return TOOLTIP_RIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOOLTIP_BOTTOM", function() { return TOOLTIP_BOTTOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOOLTIP_TOP", function() { return TOOLTIP_TOP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "INITIAL_STYLE", function() { return INITIAL_STYLE; });
var CLASSPREFIX = 'muze';
var ARROW_RIGHT = 'right';
var ARROW_TOP = 'top';
var ARROW_BOTTOM = 'bottom';
var ARROW_LEFT = 'left';
var TOOLTIP_LEFT = 'left';
var TOOLTIP_RIGHT = 'right';
var TOOLTIP_BOTTOM = 'bottom';
var TOOLTIP_TOP = 'top';
var INITIAL_STYLE = {
  position: 'absolute',
  width: 0,
  height: 0
};

/***/ }),

/***/ "./packages/muze-tooltip/src/content.js":
/*!**********************************************!*\
  !*** ./packages/muze-tooltip/src/content.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Content; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _strategy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strategy */ "./packages/muze-tooltip/src/strategy.js");
/* harmony import */ var _default_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./default-config */ "./packages/muze-tooltip/src/default-config.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }




/**
 * This class is used to manage the content of tooltip.
 */

var Content =
/*#__PURE__*/
function () {
  /**
   * Creates an instance of content.
   */
  function Content() {
    _classCallCheck(this, Content);

    this._model = null;
    this._strategy = _strategy__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_STRATEGY"];
    this._formatter = null;
    this._config = this.constructor.defaultConfig();
  }
  /**
    * Returns the default configuration of tooltip
    * @return {Object} Configuration of tooltip.
    */


  _createClass(Content, [{
    key: "config",
    value: function config() {
      if (arguments.length > 0) {
        this._config = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(this._config, arguments.length <= 0 ? undefined : arguments[0]);
        return this;
      }

      return this._config;
    }
    /**
     * Update model. The format contains presentation strategy which determines how to show the content.
     * If no strategy is mentioned then default is to show key value pair
    */

  }, {
    key: "update",
    value: function update(item) {
      this._model = item.model;
      this._strategy = item.strategy !== undefined ? item.strategy : _strategy__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_STRATEGY"];
      this._formatter = item.formatter;
      return this;
    }
  }, {
    key: "context",
    value: function context(ctx) {
      this._context = ctx;
      return this;
    }
  }, {
    key: "render",
    value: function render(mount) {
      var data;
      var config = this._config;
      var iconContainerSize = config.iconContainerSize;
      var formatter = this._formatter;
      var rowMargin = config.rowMargin;
      var model = this._model;
      this._mount = mount;

      if (model instanceof Array) {
        data = model;
      } else {
        data = formatter instanceof Function ? formatter(this._model, this._context) : _strategy__WEBPACK_IMPORTED_MODULE_1__["strategy"][this._strategy](this._model, this.config(), this._context);
      }

      if (data instanceof Function) {
        mount.html(data());
      } else {
        var content = data;
        var displayFormat = 'default';

        if (Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["isSimpleObject"])(data)) {
          content = data.content;
          displayFormat = data.displayFormat;
        }

        var body = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(mount, 'div', [displayFormat], "".concat(config.classPrefix, "-tooltip-content"), {}, function (d) {
          return d;
        });

        if (displayFormat === 'table') {
          var table = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(body, 'table', [1], "".concat(config.classPrefix, "-tooltip-table"));
          var tbody = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(table, 'tbody', [1], "".concat(config.classPrefix, "-tooltip-table-tbody"));
          var rows = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(tbody, 'tr', content, "".concat(config.classPrefix, "-tooltip-table-row"));
          rows.each(function (d, i) {
            Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this).classed("".concat(config.classPrefix, "-tooltip-table-row-").concat(i), true);
          });
          var cells = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(rows, 'td', function (d) {
            return d;
          }, "".concat(config.classPrefix, "-tooltip-table-cell"));
          cells.each(function (d) {
            Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this).html(d);
          });
        } else {
          var _rows = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(body, 'div', content, "".concat(config.classPrefix, "-tooltip-row"));

          var _cells = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(_rows, 'span', function (d) {
            return d;
          }, "".concat(config.classPrefix, "-tooltip-content"));

          _cells.attr('class', "".concat(config.classPrefix, "-tooltip-content"));

          Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setStyles"])(_rows, {
            margin: rowMargin
          });
          Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setStyles"])(_cells, {
            display: 'inline-block',
            'margin-right': "".concat(config.spacing, "px")
          });

          _cells.each(function (d) {
            var el = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this);
            el.html('');

            if (d instanceof Object) {
              if (d.type === 'icon') {
                var svg = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(el, 'svg', [1]);
                var path = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(svg, 'path', [1]);
                var shape = d.shape instanceof Function ? d.shape : Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getSymbol"])(d.shape);
                Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setAttrs"])(svg, {
                  x: 0,
                  y: 0,
                  width: iconContainerSize,
                  height: iconContainerSize
                });
                Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setAttrs"])(path, {
                  d: shape.size(d.size)(),
                  transform: "translate(".concat(iconContainerSize / 2, ", ").concat(iconContainerSize / 2, ")")
                });
                Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setStyles"])(path, {
                  fill: d.color
                });
                Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setStyles"])(svg, {
                  width: "".concat(iconContainerSize, "px"),
                  height: "".concat(iconContainerSize, "px")
                });
              } else {
                el.html(d.value);
                d.className && el.classed(d.className, true);
                Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setStyles"])(el, d.style);
              }
            } else {
              el.html(d);
            }
          });
        }
      }

      return this;
    }
  }, {
    key: "clear",
    value: function clear() {
      this._model = null;
      return this;
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      var config = _default_config__WEBPACK_IMPORTED_MODULE_2__["defaultConfig"].content;
      config.classPrefix = _default_config__WEBPACK_IMPORTED_MODULE_2__["defaultConfig"].classPrefix;
      return config;
    }
  }]);

  return Content;
}();



/***/ }),

/***/ "./packages/muze-tooltip/src/default-config.js":
/*!*****************************************************!*\
  !*** ./packages/muze-tooltip/src/default-config.js ***!
  \*****************************************************/
/*! exports provided: defaultConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultConfig", function() { return defaultConfig; });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "./packages/muze-tooltip/src/constants.js");

var defaultConfig = {
  classPrefix: _constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"],
  defClassName: 'tooltip-box',
  connectorClassName: 'tooltip-connectors',
  className: '',
  row: {
    margin: 0
  },
  content: {
    spacing: 5,
    iconContainerSize: 10,
    iconScale: 1,
    iconShape: 'circle',
    iconColor: '#ff0000',
    rowMargin: '0px',
    margin: 10,
    separator: ':',
    className: 'tooltip-content-container',
    parentClassName: 'tooltip-content-parent-container'
  },
  arrow: {
    size: 10,
    disabled: false,
    defClassName: 'tooltip-arrow',
    className: '',
    color: 'rgba(195,195,195,0.85)'
  }
};

/***/ }),

/***/ "./packages/muze-tooltip/src/helper.js":
/*!*********************************************!*\
  !*** ./packages/muze-tooltip/src/helper.js ***!
  \*********************************************/
/*! exports provided: getArrowPos, placeArrow, reorderContainers */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getArrowPos", function() { return getArrowPos; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "placeArrow", function() { return placeArrow; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reorderContainers", function() { return reorderContainers; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ "./packages/muze-tooltip/src/constants.js");
var _this = undefined;



var getArrowPos = function getArrowPos(orient, dim, measurement, config) {
  var arrowPos;
  var x = measurement.x,
      y = measurement.y,
      boxHeight = measurement.boxHeight,
      boxWidth = measurement.boxWidth;
  var arrowDisabled = config.arrow.disabled;
  var arrowWidth = arrowDisabled ? 0 : config.arrow.size;

  if (orient === _constants__WEBPACK_IMPORTED_MODULE_1__["ARROW_LEFT"] || orient === _constants__WEBPACK_IMPORTED_MODULE_1__["ARROW_RIGHT"]) {
    var start = 0;
    var diff = boxHeight / 2;
    var plotBottom = dim.y + dim.height;
    var boxBottom = y + boxHeight;

    if (dim.y > y) {
      start = dim.y - y;
      diff = (plotBottom >= boxBottom ? boxBottom - dim.y : dim.height) / 2;
    } else if (boxBottom > plotBottom) {
      diff = Math.abs(y - (dim.y + dim.height)) / 2;
    }

    arrowPos = start + diff - arrowWidth / 2;
  } else {
    var _start = 0;

    var _diff = boxWidth / 2;

    var plotRight = dim.x + dim.width;
    var boxRight = x + boxWidth;

    if (dim.x > x) {
      _start = dim.x - x;
      _diff = (plotRight >= boxRight ? boxRight - dim.x : dim.width) / 2;
    } else if (boxRight > plotRight) {
      _diff = Math.abs(x - (dim.x + dim.width)) / 2;
    }

    arrowPos = _start + _diff - arrowWidth / 2;
  }

  return arrowPos;
};
/**
 * Places the arrow in the specified arrow position. It also applies appropriate arrow
 * class name to the arrow element.
 * @param {string} position Left, bottom or right position of the arrow;
 * @param {number} arrowPos position of arrow in pixels
 * @return {Tooltip} Instance of tooltip.
 */

var placeArrow = function placeArrow(context, position, arrowPos) {
  var tooltipArrow = context._tooltipArrow;
  var tooltipBackground = context._tooltipBackground;
  var config = context._config;
  var classPrefix = config.classPrefix;
  var arrowConf = config.arrow;
  var className = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getQualifiedClassName"])(arrowConf.defClassName, context._id, config.classPrefix);
  tooltipArrow.style('display', 'block');
  tooltipArrow.attr('class', "".concat(className.join(' ')));

  if (position === _constants__WEBPACK_IMPORTED_MODULE_1__["TOOLTIP_LEFT"] || position === _constants__WEBPACK_IMPORTED_MODULE_1__["TOOLTIP_RIGHT"]) {
    tooltipArrow.style('top', "".concat(arrowPos, "px"));
    tooltipArrow.style('left', '');
    tooltipBackground.style('top', "".concat(arrowPos, "px"));
    tooltipBackground.style('left', '');
  } else {
    position === _constants__WEBPACK_IMPORTED_MODULE_1__["TOOLTIP_BOTTOM"] ? tooltipArrow.style('top', '100%') : tooltipArrow.style('top', "-".concat(arrowConf.size, "px"));
    tooltipArrow.style('left', "".concat(arrowPos, "px"));
    position === _constants__WEBPACK_IMPORTED_MODULE_1__["TOOLTIP_BOTTOM"] ? tooltipBackground.style('top', '100%') : tooltipBackground.style('top', "-".concat(arrowConf.size + 3, "px"));
    tooltipBackground.style('left', "".concat(arrowPos, "px"));
  }

  tooltipArrow.classed("".concat(classPrefix, "-tooltip-arrow"), true);
  tooltipArrow.classed("".concat(classPrefix, "-tooltip-arrow-").concat(context._arrowOrientation), false);
  tooltipArrow.classed("".concat(classPrefix, "-tooltip-arrow-").concat(position), true);
  tooltipBackground.classed("".concat(classPrefix, "-tooltip-background-arrow"), true);
  tooltipBackground.classed("".concat(classPrefix, "-tooltip-background-arrow-").concat(context._arrowOrientation), false);
  tooltipBackground.classed("".concat(classPrefix, "-tooltip-background-arrow-").concat(position), true);
  return _this;
};
var reorderContainers = function reorderContainers(parentContainer, className) {
  parentContainer.selectAll(className).sort(function (a, b) {
    return a - b;
  });
};

/***/ }),

/***/ "./packages/muze-tooltip/src/index.js":
/*!********************************************!*\
  !*** ./packages/muze-tooltip/src/index.js ***!
  \********************************************/
/*! exports provided: Tooltip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tooltip__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tooltip */ "./packages/muze-tooltip/src/tooltip.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Tooltip", function() { return _tooltip__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/muze-tooltip/src/strategy.js":
/*!***********************************************!*\
  !*** ./packages/muze-tooltip/src/strategy.js ***!
  \***********************************************/
/*! exports provided: buildTooltipData, strategy, DEFAULT_STRATEGY */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "buildTooltipData", function() { return buildTooltipData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "strategy", function() { return strategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_STRATEGY", function() { return DEFAULT_STRATEGY; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
function isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


var InvalidAwareTypes = muze_utils__WEBPACK_IMPORTED_MODULE_0__["DataModel"].InvalidAwareTypes;

var formatters = function formatters(formatter, interval, valueParser) {
  var _ref;

  return _ref = {}, _defineProperty(_ref, muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL, function (value) {
    if (value instanceof InvalidAwareTypes) {
      return valueParser(value);
    }

    return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["formatTemporal"])(value, interval);
  }), _defineProperty(_ref, muze_utils__WEBPACK_IMPORTED_MODULE_0__["MeasureSubtype"].CONTINUOUS, function (value) {
    return value instanceof InvalidAwareTypes ? valueParser(value) : formatter(value.toFixed(2));
  }), _defineProperty(_ref, muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].CATEGORICAL, function (value) {
    return valueParser(value);
  }), _ref;
};

var getDefaultTooltipFormatterFn = function getDefaultTooltipFormatterFn(formatter, defaultFormatter) {
  return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["defaultValue"])(formatter, defaultFormatter);
};

var getTabularData = function getTabularData(dataObj, context, defaultFormatter) {
  var rows = [];
  var data = dataObj.data,
      schema = dataObj.schema,
      fieldspace = dataObj.fieldspace;
  rows.push(schema.map(function (d) {
    return d.name;
  }));
  var valueParser = context.valueParser,
      timeDiffs = context.timeDiffs;
  data.forEach(function (d) {
    var row = [];
    schema.forEach(function (fieldObj, i) {
      var interval = fieldObj.subtype === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL ? timeDiffs[fieldObj.name] : 0;
      var numberFormat = fieldObj.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE && fieldspace.fields[i].numberFormat();
      var formatterFn = getDefaultTooltipFormatterFn(formatters(numberFormat, interval, valueParser)[fieldObj.subtype], defaultFormatter);
      var value = formatterFn(d[i]);
      row.push(value);
    });
    rows.push(row);
  });
  return rows;
};

var buildTooltipData = function buildTooltipData(dataModel) {
  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var context = arguments.length > 2 ? arguments[2] : undefined;
  var fieldValues = [];
  var dataObj = dataModel.getData();
  var data = dataObj.data;
  var schema = dataObj.schema;
  var separator = config.separator;
  var fieldsConfig = dataModel.getFieldsConfig();
  var fieldspace = dataModel.getFieldspace();
  var detailFields = context.detailFields || [];
  var dimensions = schema.filter(function (d) {
    return d.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
  });
  var measures = schema.filter(function (d) {
    return d.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE;
  });
  var containsDetailField = schema.find(function (d) {
    return detailFields.indexOf(d.name) !== -1;
  });
  var dataLen = data.length;
  var valueParser = context.valueParser,
      axes = context.axes,
      dimensionMeasureMap = context.dimensionMeasureMap,
      timeDiffs = context.timeDiffs;
  var defFormatter = formatters(null, null, valueParser)[muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].CATEGORICAL];

  var getRowContent = function getRowContent(field, type) {
    var value;
    var formattedValue;
    var measureIndex;
    var values = [];
    var index = fieldsConfig[field].index;
    var interval = fieldsConfig[field].def.subtype === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL ? timeDiffs[field] : 0;
    var formatterFn = getDefaultTooltipFormatterFn(formatters(function (val) {
      return val;
    }, interval, valueParser)[type], defFormatter);

    if (value !== null) {
      var uniqueVals = type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["MeasureSubtype"].CONTINUOUS ? data.map(function (d) {
        return d[index];
      }) : _toConsumableArray(new Set(data.map(function (d) {
        return d[index];
      })));
      uniqueVals = uniqueVals.filter(function (d) {
        return d !== '';
      });
      var colorAxis = axes.color[0];
      var shapeAxis = axes.shape[0];
      var sizeAxis = axes.size[0];
      var isRetinalField = (colorAxis || shapeAxis || sizeAxis) && dataLen > 1 && type !== muze_utils__WEBPACK_IMPORTED_MODULE_0__["MeasureSubtype"].CONTINUOUS;
      uniqueVals.forEach(function (val, i) {
        var key;
        var associatedMeasures = dimensionMeasureMap[field];

        if (associatedMeasures && associatedMeasures.length && dataLen > 1) {
          key = val;
          var icon = {
            value: ''
          };

          if (isRetinalField) {
            icon = {
              type: 'icon',
              color: colorAxis.getColor(val),
              shape: shapeAxis.getShape(val),
              size: sizeAxis.getSize(val) * config.iconScale
            };
          }

          if (associatedMeasures.length > 1) {
            var formattedKey = type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL ? formatterFn(key, interval) : key;
            values.push([icon, "".concat(formattedKey)]);
            associatedMeasures.forEach(function (measure) {
              measureIndex = fieldsConfig[measure].index;
              value = data[i][measureIndex];
              var numberFormat = fieldspace.fields[measureIndex].numberFormat();
              var measureFormatter = getDefaultTooltipFormatterFn(formatters(numberFormat, interval, valueParser)[muze_utils__WEBPACK_IMPORTED_MODULE_0__["MeasureSubtype"].CONTINUOUS]);
              formattedValue = measureFormatter(value);
              values.push([{
                value: "".concat(measure).concat(separator),
                style: {
                  'margin-left': "".concat(config.margin, "px}")
                },
                className: "".concat(config.classPrefix, "-tooltip-key")
              }, {
                value: "".concat(formattedValue),
                className: "".concat(config.classPrefix, "-tooltip-value")
              }]);
            });
          } else {
            measureIndex = fieldsConfig[associatedMeasures[0]].index;
            value = data[i][measureIndex];
            var numberFormat = fieldspace.fields[measureIndex].numberFormat();
            var measureFormatter = getDefaultTooltipFormatterFn(formatters(numberFormat, interval, valueParser)[muze_utils__WEBPACK_IMPORTED_MODULE_0__["MeasureSubtype"].CONTINUOUS]);
            formattedValue = measureFormatter(value);

            var _formattedKey = type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL ? formatterFn(key, interval) : key;

            values.push([icon, {
              value: "".concat(_formattedKey),
              className: "".concat(config.classPrefix, "-tooltip-key")
            }, {
              value: "".concat(formattedValue),
              className: "".concat(config.classPrefix, "-tooltip-value")
            }]);
          }
        } else {
          key = field;
          value = val;
          formattedValue = formatterFn(value);
          values.push([{
            value: "".concat(key).concat(separator),
            className: "".concat(config.classPrefix, "-tooltip-key")
          }, {
            value: "".concat(formattedValue),
            className: "".concat(config.classPrefix, "-tooltip-value")
          }]);
        }
      });
    }

    return values;
  };

  var displayFormat = 'keyValue';

  if (dataLen > 1 && containsDetailField) {
    fieldValues = getTabularData({
      data: data,
      schema: schema,
      fieldspace: fieldspace
    }, context, defFormatter);
    displayFormat = 'table';
  } else {
    dimensions.forEach(function (item) {
      var type = item.subtype ? item.subtype : item.type;
      fieldValues = [].concat(_toConsumableArray(fieldValues), _toConsumableArray(getRowContent(item.name, type)));
    });

    var allMeasures = _toConsumableArray(_construct(Set, _toConsumableArray(Object.values(dimensionMeasureMap))));

    var filteredMeasures = dataLen > 1 ? measures.filter(function (d) {
      return allMeasures.indexOf(d.name) === -1;
    }) : measures;
    filteredMeasures.forEach(function (item) {
      var type = item.subtype ? item.subtype : item.type;
      fieldValues = [].concat(_toConsumableArray(fieldValues), _toConsumableArray(getRowContent(item.name, type)));
    });
  }

  return {
    content: fieldValues,
    displayFormat: displayFormat
  };
};
/**
 * This contains the strategy methods for showing tooltip in the chart.
 * @param {VisualUnit} context Attached instance.
 */

var strategy = {
  keyValue: function keyValue(data, config, context) {
    var values = buildTooltipData(data, config, context);
    return values;
  }
};
var DEFAULT_STRATEGY = 'keyValue';

/***/ }),

/***/ "./packages/muze-tooltip/src/styles.scss":
/*!***********************************************!*\
  !*** ./packages/muze-tooltip/src/styles.scss ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/muze-tooltip/src/tooltip.js":
/*!**********************************************!*\
  !*** ./packages/muze-tooltip/src/tooltip.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Tooltip; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ "./packages/muze-tooltip/src/constants.js");
/* harmony import */ var _default_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./default-config */ "./packages/muze-tooltip/src/default-config.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helper */ "./packages/muze-tooltip/src/helper.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./styles.scss */ "./packages/muze-tooltip/src/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _content__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./content */ "./packages/muze-tooltip/src/content.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }







/**
 * This component is responsible for creating a tooltip element. It appends the tooltip
 * in the body element.
 * @class Tooltip
 */

var Tooltip =
/*#__PURE__*/
function () {
  /**
   * Initializes the tooltip with the container element and configuration
   * @param {HTMLElement} container container where the tooltip will be mounted.
   * @param {string} className Class name of the tooltip.
   */
  function Tooltip(htmlContainer, svgContainer) {
    _classCallCheck(this, Tooltip);

    var connectorContainer = svgContainer;
    this._id = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getUniqueId"])();
    this._config = {};
    this.config({});
    var tooltipConf = this._config;
    var classPrefix = tooltipConf.classPrefix;
    var contentClass = tooltipConf.content.parentClassName;
    var container = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(htmlContainer, 'div', [1], "".concat(classPrefix, "-tooltip-container"));
    this._container = container;
    this._tooltipContainer = container.append('div').style('position', 'absolute');
    this._contentContainer = this._tooltipContainer.append('div').attr('class', "".concat(classPrefix, "-").concat(contentClass));
    this._tooltipBackground = this._tooltipContainer.append('div').style('position', 'relative');
    this._tooltipArrow = this._tooltipContainer.append('div');

    if (!svgContainer) {
      connectorContainer = htmlContainer.append('svg').style('pointer-events', 'none');
    }

    this._contents = {};
    this._tooltipConnectorContainer = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(connectorContainer).append('g').attr('class', "".concat(tooltipConf.classPrefix, "-").concat(tooltipConf.connectorClassName));
    var id = this._id;
    var defClassName = tooltipConf.defClassName;
    var qualifiedClassName = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getQualifiedClassName"])(defClassName, id, tooltipConf.classPrefix);
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setStyles"])(this._tooltipArrow, _constants__WEBPACK_IMPORTED_MODULE_1__["INITIAL_STYLE"]);
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setStyles"])(this._tooltipBackground, _constants__WEBPACK_IMPORTED_MODULE_1__["INITIAL_STYLE"]);
    this.addClass(qualifiedClassName.join(' '));
    this.addClass(tooltipConf.className);
    this.hide();
  }
  /**
   * Sets the configuration of tooltip.
   * @param {Object} config Configuration of tooltip
   * @return {Tooltip} Instance of tooltip
   */


  _createClass(Tooltip, [{
    key: "config",
    value: function config() {
      if (arguments.length > 0) {
        var defConf = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, this.constructor.defaultConfig());
        this._config = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(defConf, arguments.length <= 0 ? undefined : arguments[0]);
        return this;
      }

      return this._config;
    }
    /**
     * Returns the default configuration of tooltip
     * @return {Object} Configuration of tooltip.
     */

  }, {
    key: "addClass",

    /**
     * Sets the class name of tooltip
     * @param {string} className tooltip class name
     * @return {Tooltip} Instance of tooltip.
     */
    value: function addClass(className) {
      this._tooltipContainer.classed(className, true);

      return this;
    }
  }, {
    key: "context",
    value: function context() {
      if (arguments.length) {
        this._context = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._context;
    }
  }, {
    key: "content",
    value: function content(name, data) {
      var contentConfig = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var config = this.config();
      var classPrefix = config.classPrefix;
      var contentClass = config.content.className;
      var formatter = config.formatter;
      var className = contentConfig.className || "".concat(classPrefix, "-").concat(contentClass, "-").concat(name);
      var content = this._contents[name] = this._contents[name] || new _content__WEBPACK_IMPORTED_MODULE_5__["default"]();
      var container = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(this._contentContainer, 'div', [contentConfig.order], className);
      container.attr('class', "".concat(classPrefix, "-").concat(contentClass, " ").concat(className));
      Object(_helper__WEBPACK_IMPORTED_MODULE_3__["reorderContainers"])(this._contentContainer, ".".concat(classPrefix, "-").concat(contentClass));
      var contentConf = config.content;
      contentConfig.classPrefix = this._config.classPrefix;
      content.config(contentConf);

      if (data === null) {
        content.clear();
        container.remove();
        delete this._contents[name];
      } else {
        content.update({
          model: data,
          formatter: contentConfig.formatter || formatter
        });
        content.context(this._context);
        content.render(container);
      }

      if (!Object.keys(this._contents).length) {
        this.hide();
      }

      return this;
    }
  }, {
    key: "getContents",
    value: function getContents() {
      return Object.values(this._contents);
    }
    /**
     * Positions the tooltip at the given x and y position.
     * @param {number} x x position
     * @param {number} y y position
     * @return {Tooltip} Instance of tooltip.
     */

  }, {
    key: "position",
    value: function position(x, y) {
      var conf = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

      if (!Object.keys(this._contents).length) {
        this.hide();
        return this;
      }

      this.show();
      var target = this._target;
      var repositionArrow = conf.repositionArrow;

      if (target && repositionArrow) {
        var node = this._tooltipContainer.node();

        var config = this._config;
        var arrowDisabled = config.arrow.disabled;
        var arrowWidth = arrowDisabled ? 0 : config.arrow.size;
        var arrowOrient = this._arrowOrientation;
        var outsidePlot = arrowOrient === _constants__WEBPACK_IMPORTED_MODULE_1__["ARROW_LEFT"] || arrowOrient === _constants__WEBPACK_IMPORTED_MODULE_1__["ARROW_RIGHT"] ? y + node.offsetHeight - arrowWidth < target.y || y > target.y + target.height : x + node.offsetWidth - arrowWidth < target.x || x > target.x + target.width;

        if (!arrowDisabled) {
          if (outsidePlot) {
            var path;

            this._tooltipArrow.style('display', 'none');

            this._tooltipBackground.style('display', 'none');

            this._tooltipConnectorContainer.style('display', 'block');

            var connector = this._tooltipConnectorContainer.selectAll('path').data([1]);

            var enter = connector.enter().append('path');

            if (arrowOrient === _constants__WEBPACK_IMPORTED_MODULE_1__["ARROW_LEFT"]) {
              path = "M ".concat(x, " ").concat(y + node.offsetHeight / 2, " L ").concat(target.x + target.width) + " ".concat(target.y + target.height / 2);
            } else if (arrowOrient === _constants__WEBPACK_IMPORTED_MODULE_1__["ARROW_RIGHT"]) {
              path = "M ".concat(x + node.offsetWidth, " ").concat(y + node.offsetHeight / 2) + " L ".concat(target.x, " ").concat(target.y + target.height / 2);
            } else if (arrowOrient === _constants__WEBPACK_IMPORTED_MODULE_1__["ARROW_BOTTOM"]) {
              path = "M ".concat(x + node.offsetWidth / 2, " ").concat(y + node.offsetHeight) + " L ".concat(target.x + target.width / 2, " ").concat(target.y);
            }

            enter.merge(connector).attr('d', path).style('display', 'block');
          } else {
            var arrowPos = Object(_helper__WEBPACK_IMPORTED_MODULE_3__["getArrowPos"])(arrowOrient, target, {
              x: x,
              y: y,
              boxHeight: node.offsetHeight,
              boxWidth: node.offsetWidth
            }, this._config);
            Object(_helper__WEBPACK_IMPORTED_MODULE_3__["placeArrow"])(this, this._arrowOrientation, arrowPos);

            this._tooltipConnectorContainer.style('display', 'none');
          }
        }
      }

      var offset = this._offset || {
        x: 0,
        y: 0
      };

      this._tooltipContainer.style('left', "".concat(offset.x + x, "px")).style('top', "".concat(offset.y + y, "px"));

      return this;
    }
    /**
     * Positions the tooltip relative to a rectangular box. It takes care of tooltip overflowing the
     * boundaries.
     * @param {Object} dim Dimensions of the plot.
     */

  }, {
    key: "positionRelativeTo",
    value: function positionRelativeTo(dim) {
      var _this = this;

      var tooltipConf = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var obj;
      var orientation = tooltipConf.orientation;
      this.show();

      if (!dim) {
        this.hide();
        return this;
      }

      var extent = this._extent;

      var node = this._tooltipContainer.node();

      this._tooltipContainer.style('top', '0px').style('left', '0px');

      var offsetWidth = node.offsetWidth + 2;
      var offsetHeight = node.offsetHeight + 2;
      var config = this._config;
      var offset = this._offset;
      var arrowDisabled = config.arrow.disabled;
      var arrowSize = arrowDisabled ? 0 : config.arrow.size;
      var draw = tooltipConf.draw !== undefined ? tooltipConf.draw : true;
      var topSpace = dim.y; // When there is no space in right

      var dimX = dim.x + dim.width + offset.x;
      var rightSpace = extent.width - dimX;
      var leftSpace = dim.x + offset.x - extent.x;
      var positionTop = topSpace > offsetHeight + arrowSize;
      var positionRight = rightSpace >= offsetWidth + arrowSize;
      var positionLeft = leftSpace >= offsetWidth + arrowSize;

      var positionHorizontal = function positionHorizontal() {
        var position;
        var x = dim.x + dim.width;
        var y = dim.y;

        if (positionRight) {
          position = _constants__WEBPACK_IMPORTED_MODULE_1__["TOOLTIP_LEFT"];
          x += arrowSize;
        } else if (positionLeft) {
          x = dim.x - offsetWidth;
          position = _constants__WEBPACK_IMPORTED_MODULE_1__["TOOLTIP_RIGHT"];
          x -= arrowSize;
        } else {
          position = 'left';
          x += arrowSize;
        }

        if (dim.height < offsetHeight) {
          y = Math.max(0, dim.y + dim.height / 2 - offsetHeight / 2);
        }

        var arrowPos = Object(_helper__WEBPACK_IMPORTED_MODULE_3__["getArrowPos"])(position, dim, {
          x: x,
          y: y,
          boxHeight: offsetHeight,
          boxWidth: offsetWidth
        }, _this._config);
        return {
          position: position,
          arrowPos: arrowPos,
          x: x,
          y: y
        };
      };

      var positionVertical = function positionVertical() {
        var position;
        var y; // Position tooltip at the center of plot

        var x = dim.x - offsetWidth / 2 + dim.width / 2; // Overflows to the right

        if (extent.width - (dim.x + offset.x) < offsetWidth) {
          x = extent.width - offsetWidth - offset.x;
        } else if (x + offset.x < extent.x) {
          // Overflows to the left
          x = extent.x;
        }

        if (positionTop) {
          y = dim.y - offsetHeight - arrowSize;
          position = _constants__WEBPACK_IMPORTED_MODULE_1__["TOOLTIP_BOTTOM"];
        } else {
          y = dim.y + dim.height + arrowSize;
          position = _constants__WEBPACK_IMPORTED_MODULE_1__["TOOLTIP_TOP"];
        }

        var arrowPos = Object(_helper__WEBPACK_IMPORTED_MODULE_3__["getArrowPos"])(position, dim, {
          x: x,
          y: y,
          boxHeight: offsetHeight,
          boxWidth: offsetWidth
        }, _this._config);
        return {
          position: position,
          arrowPos: arrowPos,
          x: x,
          y: y
        };
      };

      this._target = dim;

      if (!orientation) {
        if (positionTop) {
          orientation = 'vertical';
        } else if (positionRight || positionLeft) {
          orientation = 'horizontal';
        } else {
          orientation = 'vertical';
        }
      }

      if (orientation === 'horizontal') {
        obj = positionHorizontal();
      } else if (orientation === 'vertical') {
        obj = positionVertical();
      }

      this._position = {
        x: obj.x,
        y: obj.y
      };
      this._arrowPos = obj.arrowPos;

      if (!arrowDisabled) {
        Object(_helper__WEBPACK_IMPORTED_MODULE_3__["placeArrow"])(this, obj.position, obj.arrowPos);
      } else {
        this._tooltipArrow.style('display', 'none');

        this._tooltipBackground.style('display', 'none');
      }

      this._arrowOrientation = obj.position;
      draw && this.position(obj.x, obj.y);
      return this;
    }
    /**
     * Hides the tooltip element.
     * @return {Tooltip} Instance of tooltip.
     */

  }, {
    key: "hide",
    value: function hide() {
      this._tooltipContainer.style('display', 'none');

      this._tooltipConnectorContainer.style('display', 'none');

      return this;
    }
    /**
     * Shows the tooltip element.
     * @return {Tooltip} Instance of tooltip.
     */

  }, {
    key: "show",
    value: function show() {
      this._tooltipContainer.style('display', 'block');

      return this;
    }
  }, {
    key: "extent",
    value: function extent(_extent) {
      this._extent = _extent;
      return this;
    }
  }, {
    key: "offset",
    value: function offset(_offset) {
      this._offset = _offset;
      return this;
    }
  }, {
    key: "remove",
    value: function remove() {
      this._tooltipContainer.remove();

      this._tooltipBackground.remove();

      this._tooltipConnectorContainer.remove();

      return this;
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return _default_config__WEBPACK_IMPORTED_MODULE_2__["defaultConfig"];
    }
  }]);

  return Tooltip;
}();



/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/array.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/array.js ***!
  \****************************************************************/
/*! exports provided: slice, map */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "slice", function() { return slice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "map", function() { return map; });
var array = Array.prototype;
var slice = array.slice;
var map = array.map;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/ascending.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/ascending.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (a, b) {
  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/bisect.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/bisect.js ***!
  \*****************************************************************/
/*! exports provided: bisectRight, bisectLeft, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bisectRight", function() { return bisectRight; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bisectLeft", function() { return bisectLeft; });
/* harmony import */ var _ascending__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ascending */ "./packages/muze-utils/node_modules/d3-array/src/ascending.js");
/* harmony import */ var _bisector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bisector */ "./packages/muze-utils/node_modules/d3-array/src/bisector.js");


var ascendingBisect = Object(_bisector__WEBPACK_IMPORTED_MODULE_1__["default"])(_ascending__WEBPACK_IMPORTED_MODULE_0__["default"]);
var bisectRight = ascendingBisect.right;
var bisectLeft = ascendingBisect.left;
/* harmony default export */ __webpack_exports__["default"] = (bisectRight);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/bisector.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/bisector.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _ascending__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ascending */ "./packages/muze-utils/node_modules/d3-array/src/ascending.js");

/* harmony default export */ __webpack_exports__["default"] = (function (compare) {
  if (compare.length === 1) compare = ascendingComparator(compare);
  return {
    left: function left(a, x, lo, hi) {
      if (lo == null) lo = 0;
      if (hi == null) hi = a.length;

      while (lo < hi) {
        var mid = lo + hi >>> 1;
        if (compare(a[mid], x) < 0) lo = mid + 1;else hi = mid;
      }

      return lo;
    },
    right: function right(a, x, lo, hi) {
      if (lo == null) lo = 0;
      if (hi == null) hi = a.length;

      while (lo < hi) {
        var mid = lo + hi >>> 1;
        if (compare(a[mid], x) > 0) hi = mid;else lo = mid + 1;
      }

      return lo;
    }
  };
});

function ascendingComparator(f) {
  return function (d, x) {
    return Object(_ascending__WEBPACK_IMPORTED_MODULE_0__["default"])(f(d), x);
  };
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/constant.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/constant.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (x) {
  return function () {
    return x;
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/cross.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/cross.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _pairs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pairs */ "./packages/muze-utils/node_modules/d3-array/src/pairs.js");

/* harmony default export */ __webpack_exports__["default"] = (function (values0, values1, reduce) {
  var n0 = values0.length,
      n1 = values1.length,
      values = new Array(n0 * n1),
      i0,
      i1,
      i,
      value0;
  if (reduce == null) reduce = _pairs__WEBPACK_IMPORTED_MODULE_0__["pair"];

  for (i0 = i = 0; i0 < n0; ++i0) {
    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {
      values[i] = reduce(value0, values1[i1]);
    }
  }

  return values;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/descending.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/descending.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (a, b) {
  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/deviation.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/deviation.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _variance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./variance */ "./packages/muze-utils/node_modules/d3-array/src/variance.js");

/* harmony default export */ __webpack_exports__["default"] = (function (array, f) {
  var v = Object(_variance__WEBPACK_IMPORTED_MODULE_0__["default"])(array, f);
  return v ? Math.sqrt(v) : v;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/extent.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/extent.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (values, valueof) {
  var n = values.length,
      i = -1,
      value,
      min,
      max;

  if (valueof == null) {
    while (++i < n) {
      // Find the first comparable value.
      if ((value = values[i]) != null && value >= value) {
        min = max = value;

        while (++i < n) {
          // Compare the remaining values.
          if ((value = values[i]) != null) {
            if (min > value) min = value;
            if (max < value) max = value;
          }
        }
      }
    }
  } else {
    while (++i < n) {
      // Find the first comparable value.
      if ((value = valueof(values[i], i, values)) != null && value >= value) {
        min = max = value;

        while (++i < n) {
          // Compare the remaining values.
          if ((value = valueof(values[i], i, values)) != null) {
            if (min > value) min = value;
            if (max < value) max = value;
          }
        }
      }
    }
  }

  return [min, max];
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/histogram.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/histogram.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./array */ "./packages/muze-utils/node_modules/d3-array/src/array.js");
/* harmony import */ var _bisect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bisect */ "./packages/muze-utils/node_modules/d3-array/src/bisect.js");
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constant */ "./packages/muze-utils/node_modules/d3-array/src/constant.js");
/* harmony import */ var _extent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./extent */ "./packages/muze-utils/node_modules/d3-array/src/extent.js");
/* harmony import */ var _identity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./identity */ "./packages/muze-utils/node_modules/d3-array/src/identity.js");
/* harmony import */ var _range__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./range */ "./packages/muze-utils/node_modules/d3-array/src/range.js");
/* harmony import */ var _ticks__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ticks */ "./packages/muze-utils/node_modules/d3-array/src/ticks.js");
/* harmony import */ var _threshold_sturges__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./threshold/sturges */ "./packages/muze-utils/node_modules/d3-array/src/threshold/sturges.js");








/* harmony default export */ __webpack_exports__["default"] = (function () {
  var value = _identity__WEBPACK_IMPORTED_MODULE_4__["default"],
      domain = _extent__WEBPACK_IMPORTED_MODULE_3__["default"],
      threshold = _threshold_sturges__WEBPACK_IMPORTED_MODULE_7__["default"];

  function histogram(data) {
    var i,
        n = data.length,
        x,
        values = new Array(n);

    for (i = 0; i < n; ++i) {
      values[i] = value(data[i], i, data);
    }

    var xz = domain(values),
        x0 = xz[0],
        x1 = xz[1],
        tz = threshold(values, x0, x1); // Convert number of thresholds into uniform thresholds.

    if (!Array.isArray(tz)) {
      tz = Object(_ticks__WEBPACK_IMPORTED_MODULE_6__["tickStep"])(x0, x1, tz);
      tz = Object(_range__WEBPACK_IMPORTED_MODULE_5__["default"])(Math.ceil(x0 / tz) * tz, x1, tz); // exclusive
    } // Remove any thresholds outside the domain.


    var m = tz.length;

    while (tz[0] <= x0) {
      tz.shift(), --m;
    }

    while (tz[m - 1] > x1) {
      tz.pop(), --m;
    }

    var bins = new Array(m + 1),
        bin; // Initialize bins.

    for (i = 0; i <= m; ++i) {
      bin = bins[i] = [];
      bin.x0 = i > 0 ? tz[i - 1] : x0;
      bin.x1 = i < m ? tz[i] : x1;
    } // Assign data to bins by value, ignoring any outside the domain.


    for (i = 0; i < n; ++i) {
      x = values[i];

      if (x0 <= x && x <= x1) {
        bins[Object(_bisect__WEBPACK_IMPORTED_MODULE_1__["default"])(tz, x, 0, m)].push(data[i]);
      }
    }

    return bins;
  }

  histogram.value = function (_) {
    return arguments.length ? (value = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_2__["default"])(_), histogram) : value;
  };

  histogram.domain = function (_) {
    return arguments.length ? (domain = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_2__["default"])([_[0], _[1]]), histogram) : domain;
  };

  histogram.thresholds = function (_) {
    return arguments.length ? (threshold = typeof _ === "function" ? _ : Array.isArray(_) ? Object(_constant__WEBPACK_IMPORTED_MODULE_2__["default"])(_array__WEBPACK_IMPORTED_MODULE_0__["slice"].call(_)) : Object(_constant__WEBPACK_IMPORTED_MODULE_2__["default"])(_), histogram) : threshold;
  };

  return histogram;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/identity.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/identity.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (x) {
  return x;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/index.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/index.js ***!
  \****************************************************************/
/*! exports provided: bisect, bisectRight, bisectLeft, ascending, bisector, cross, descending, deviation, extent, histogram, thresholdFreedmanDiaconis, thresholdScott, thresholdSturges, max, mean, median, merge, min, pairs, permute, quantile, range, scan, shuffle, sum, ticks, tickIncrement, tickStep, transpose, variance, zip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _bisect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bisect */ "./packages/muze-utils/node_modules/d3-array/src/bisect.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bisect", function() { return _bisect__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bisectRight", function() { return _bisect__WEBPACK_IMPORTED_MODULE_0__["bisectRight"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bisectLeft", function() { return _bisect__WEBPACK_IMPORTED_MODULE_0__["bisectLeft"]; });

/* harmony import */ var _ascending__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ascending */ "./packages/muze-utils/node_modules/d3-array/src/ascending.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ascending", function() { return _ascending__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _bisector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bisector */ "./packages/muze-utils/node_modules/d3-array/src/bisector.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bisector", function() { return _bisector__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _cross__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cross */ "./packages/muze-utils/node_modules/d3-array/src/cross.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "cross", function() { return _cross__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _descending__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./descending */ "./packages/muze-utils/node_modules/d3-array/src/descending.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "descending", function() { return _descending__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _deviation__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./deviation */ "./packages/muze-utils/node_modules/d3-array/src/deviation.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "deviation", function() { return _deviation__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _extent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./extent */ "./packages/muze-utils/node_modules/d3-array/src/extent.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "extent", function() { return _extent__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _histogram__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./histogram */ "./packages/muze-utils/node_modules/d3-array/src/histogram.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "histogram", function() { return _histogram__WEBPACK_IMPORTED_MODULE_7__["default"]; });

/* harmony import */ var _threshold_freedmanDiaconis__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./threshold/freedmanDiaconis */ "./packages/muze-utils/node_modules/d3-array/src/threshold/freedmanDiaconis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "thresholdFreedmanDiaconis", function() { return _threshold_freedmanDiaconis__WEBPACK_IMPORTED_MODULE_8__["default"]; });

/* harmony import */ var _threshold_scott__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./threshold/scott */ "./packages/muze-utils/node_modules/d3-array/src/threshold/scott.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "thresholdScott", function() { return _threshold_scott__WEBPACK_IMPORTED_MODULE_9__["default"]; });

/* harmony import */ var _threshold_sturges__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./threshold/sturges */ "./packages/muze-utils/node_modules/d3-array/src/threshold/sturges.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "thresholdSturges", function() { return _threshold_sturges__WEBPACK_IMPORTED_MODULE_10__["default"]; });

/* harmony import */ var _max__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./max */ "./packages/muze-utils/node_modules/d3-array/src/max.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "max", function() { return _max__WEBPACK_IMPORTED_MODULE_11__["default"]; });

/* harmony import */ var _mean__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./mean */ "./packages/muze-utils/node_modules/d3-array/src/mean.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mean", function() { return _mean__WEBPACK_IMPORTED_MODULE_12__["default"]; });

/* harmony import */ var _median__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./median */ "./packages/muze-utils/node_modules/d3-array/src/median.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "median", function() { return _median__WEBPACK_IMPORTED_MODULE_13__["default"]; });

/* harmony import */ var _merge__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./merge */ "./packages/muze-utils/node_modules/d3-array/src/merge.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "merge", function() { return _merge__WEBPACK_IMPORTED_MODULE_14__["default"]; });

/* harmony import */ var _min__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./min */ "./packages/muze-utils/node_modules/d3-array/src/min.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "min", function() { return _min__WEBPACK_IMPORTED_MODULE_15__["default"]; });

/* harmony import */ var _pairs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./pairs */ "./packages/muze-utils/node_modules/d3-array/src/pairs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "pairs", function() { return _pairs__WEBPACK_IMPORTED_MODULE_16__["default"]; });

/* harmony import */ var _permute__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./permute */ "./packages/muze-utils/node_modules/d3-array/src/permute.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "permute", function() { return _permute__WEBPACK_IMPORTED_MODULE_17__["default"]; });

/* harmony import */ var _quantile__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./quantile */ "./packages/muze-utils/node_modules/d3-array/src/quantile.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "quantile", function() { return _quantile__WEBPACK_IMPORTED_MODULE_18__["default"]; });

/* harmony import */ var _range__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./range */ "./packages/muze-utils/node_modules/d3-array/src/range.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "range", function() { return _range__WEBPACK_IMPORTED_MODULE_19__["default"]; });

/* harmony import */ var _scan__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./scan */ "./packages/muze-utils/node_modules/d3-array/src/scan.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scan", function() { return _scan__WEBPACK_IMPORTED_MODULE_20__["default"]; });

/* harmony import */ var _shuffle__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./shuffle */ "./packages/muze-utils/node_modules/d3-array/src/shuffle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "shuffle", function() { return _shuffle__WEBPACK_IMPORTED_MODULE_21__["default"]; });

/* harmony import */ var _sum__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./sum */ "./packages/muze-utils/node_modules/d3-array/src/sum.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "sum", function() { return _sum__WEBPACK_IMPORTED_MODULE_22__["default"]; });

/* harmony import */ var _ticks__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./ticks */ "./packages/muze-utils/node_modules/d3-array/src/ticks.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ticks", function() { return _ticks__WEBPACK_IMPORTED_MODULE_23__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "tickIncrement", function() { return _ticks__WEBPACK_IMPORTED_MODULE_23__["tickIncrement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "tickStep", function() { return _ticks__WEBPACK_IMPORTED_MODULE_23__["tickStep"]; });

/* harmony import */ var _transpose__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./transpose */ "./packages/muze-utils/node_modules/d3-array/src/transpose.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "transpose", function() { return _transpose__WEBPACK_IMPORTED_MODULE_24__["default"]; });

/* harmony import */ var _variance__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./variance */ "./packages/muze-utils/node_modules/d3-array/src/variance.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "variance", function() { return _variance__WEBPACK_IMPORTED_MODULE_25__["default"]; });

/* harmony import */ var _zip__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./zip */ "./packages/muze-utils/node_modules/d3-array/src/zip.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "zip", function() { return _zip__WEBPACK_IMPORTED_MODULE_26__["default"]; });





























/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/max.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/max.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (values, valueof) {
  var n = values.length,
      i = -1,
      value,
      max;

  if (valueof == null) {
    while (++i < n) {
      // Find the first comparable value.
      if ((value = values[i]) != null && value >= value) {
        max = value;

        while (++i < n) {
          // Compare the remaining values.
          if ((value = values[i]) != null && value > max) {
            max = value;
          }
        }
      }
    }
  } else {
    while (++i < n) {
      // Find the first comparable value.
      if ((value = valueof(values[i], i, values)) != null && value >= value) {
        max = value;

        while (++i < n) {
          // Compare the remaining values.
          if ((value = valueof(values[i], i, values)) != null && value > max) {
            max = value;
          }
        }
      }
    }
  }

  return max;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/mean.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/mean.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _number__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./number */ "./packages/muze-utils/node_modules/d3-array/src/number.js");

/* harmony default export */ __webpack_exports__["default"] = (function (values, valueof) {
  var n = values.length,
      m = n,
      i = -1,
      value,
      sum = 0;

  if (valueof == null) {
    while (++i < n) {
      if (!isNaN(value = Object(_number__WEBPACK_IMPORTED_MODULE_0__["default"])(values[i]))) sum += value;else --m;
    }
  } else {
    while (++i < n) {
      if (!isNaN(value = Object(_number__WEBPACK_IMPORTED_MODULE_0__["default"])(valueof(values[i], i, values)))) sum += value;else --m;
    }
  }

  if (m) return sum / m;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/median.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/median.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _ascending__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ascending */ "./packages/muze-utils/node_modules/d3-array/src/ascending.js");
/* harmony import */ var _number__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./number */ "./packages/muze-utils/node_modules/d3-array/src/number.js");
/* harmony import */ var _quantile__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./quantile */ "./packages/muze-utils/node_modules/d3-array/src/quantile.js");



/* harmony default export */ __webpack_exports__["default"] = (function (values, valueof) {
  var n = values.length,
      i = -1,
      value,
      numbers = [];

  if (valueof == null) {
    while (++i < n) {
      if (!isNaN(value = Object(_number__WEBPACK_IMPORTED_MODULE_1__["default"])(values[i]))) {
        numbers.push(value);
      }
    }
  } else {
    while (++i < n) {
      if (!isNaN(value = Object(_number__WEBPACK_IMPORTED_MODULE_1__["default"])(valueof(values[i], i, values)))) {
        numbers.push(value);
      }
    }
  }

  return Object(_quantile__WEBPACK_IMPORTED_MODULE_2__["default"])(numbers.sort(_ascending__WEBPACK_IMPORTED_MODULE_0__["default"]), 0.5);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/merge.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/merge.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (arrays) {
  var n = arrays.length,
      m,
      i = -1,
      j = 0,
      merged,
      array;

  while (++i < n) {
    j += arrays[i].length;
  }

  merged = new Array(j);

  while (--n >= 0) {
    array = arrays[n];
    m = array.length;

    while (--m >= 0) {
      merged[--j] = array[m];
    }
  }

  return merged;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/min.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/min.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (values, valueof) {
  var n = values.length,
      i = -1,
      value,
      min;

  if (valueof == null) {
    while (++i < n) {
      // Find the first comparable value.
      if ((value = values[i]) != null && value >= value) {
        min = value;

        while (++i < n) {
          // Compare the remaining values.
          if ((value = values[i]) != null && min > value) {
            min = value;
          }
        }
      }
    }
  } else {
    while (++i < n) {
      // Find the first comparable value.
      if ((value = valueof(values[i], i, values)) != null && value >= value) {
        min = value;

        while (++i < n) {
          // Compare the remaining values.
          if ((value = valueof(values[i], i, values)) != null && min > value) {
            min = value;
          }
        }
      }
    }
  }

  return min;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/number.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/number.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (x) {
  return x === null ? NaN : +x;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/pairs.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/pairs.js ***!
  \****************************************************************/
/*! exports provided: default, pair */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pair", function() { return pair; });
/* harmony default export */ __webpack_exports__["default"] = (function (array, f) {
  if (f == null) f = pair;
  var i = 0,
      n = array.length - 1,
      p = array[0],
      pairs = new Array(n < 0 ? 0 : n);

  while (i < n) {
    pairs[i] = f(p, p = array[++i]);
  }

  return pairs;
});
function pair(a, b) {
  return [a, b];
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/permute.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/permute.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (array, indexes) {
  var i = indexes.length,
      permutes = new Array(i);

  while (i--) {
    permutes[i] = array[indexes[i]];
  }

  return permutes;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/quantile.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/quantile.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _number__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./number */ "./packages/muze-utils/node_modules/d3-array/src/number.js");

/* harmony default export */ __webpack_exports__["default"] = (function (values, p, valueof) {
  if (valueof == null) valueof = _number__WEBPACK_IMPORTED_MODULE_0__["default"];
  if (!(n = values.length)) return;
  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);
  if (p >= 1) return +valueof(values[n - 1], n - 1, values);
  var n,
      i = (n - 1) * p,
      i0 = Math.floor(i),
      value0 = +valueof(values[i0], i0, values),
      value1 = +valueof(values[i0 + 1], i0 + 1, values);
  return value0 + (value1 - value0) * (i - i0);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/range.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/range.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (start, stop, step) {
  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;
  var i = -1,
      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,
      range = new Array(n);

  while (++i < n) {
    range[i] = start + i * step;
  }

  return range;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/scan.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/scan.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _ascending__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ascending */ "./packages/muze-utils/node_modules/d3-array/src/ascending.js");

/* harmony default export */ __webpack_exports__["default"] = (function (values, compare) {
  if (!(n = values.length)) return;
  var n,
      i = 0,
      j = 0,
      xi,
      xj = values[j];
  if (compare == null) compare = _ascending__WEBPACK_IMPORTED_MODULE_0__["default"];

  while (++i < n) {
    if (compare(xi = values[i], xj) < 0 || compare(xj, xj) !== 0) {
      xj = xi, j = i;
    }
  }

  if (compare(xj, xj) === 0) return j;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/shuffle.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/shuffle.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (array, i0, i1) {
  var m = (i1 == null ? array.length : i1) - (i0 = i0 == null ? 0 : +i0),
      t,
      i;

  while (m) {
    i = Math.random() * m-- | 0;
    t = array[m + i0];
    array[m + i0] = array[i + i0];
    array[i + i0] = t;
  }

  return array;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/sum.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/sum.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (values, valueof) {
  var n = values.length,
      i = -1,
      value,
      sum = 0;

  if (valueof == null) {
    while (++i < n) {
      if (value = +values[i]) sum += value; // Note: zero and null are equivalent.
    }
  } else {
    while (++i < n) {
      if (value = +valueof(values[i], i, values)) sum += value;
    }
  }

  return sum;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/threshold/freedmanDiaconis.js":
/*!*************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/threshold/freedmanDiaconis.js ***!
  \*************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../array */ "./packages/muze-utils/node_modules/d3-array/src/array.js");
/* harmony import */ var _ascending__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ascending */ "./packages/muze-utils/node_modules/d3-array/src/ascending.js");
/* harmony import */ var _number__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../number */ "./packages/muze-utils/node_modules/d3-array/src/number.js");
/* harmony import */ var _quantile__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../quantile */ "./packages/muze-utils/node_modules/d3-array/src/quantile.js");




/* harmony default export */ __webpack_exports__["default"] = (function (values, min, max) {
  values = _array__WEBPACK_IMPORTED_MODULE_0__["map"].call(values, _number__WEBPACK_IMPORTED_MODULE_2__["default"]).sort(_ascending__WEBPACK_IMPORTED_MODULE_1__["default"]);
  return Math.ceil((max - min) / (2 * (Object(_quantile__WEBPACK_IMPORTED_MODULE_3__["default"])(values, 0.75) - Object(_quantile__WEBPACK_IMPORTED_MODULE_3__["default"])(values, 0.25)) * Math.pow(values.length, -1 / 3)));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/threshold/scott.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/threshold/scott.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _deviation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../deviation */ "./packages/muze-utils/node_modules/d3-array/src/deviation.js");

/* harmony default export */ __webpack_exports__["default"] = (function (values, min, max) {
  return Math.ceil((max - min) / (3.5 * Object(_deviation__WEBPACK_IMPORTED_MODULE_0__["default"])(values) * Math.pow(values.length, -1 / 3)));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/threshold/sturges.js":
/*!****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/threshold/sturges.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (values) {
  return Math.ceil(Math.log(values.length) / Math.LN2) + 1;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/ticks.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/ticks.js ***!
  \****************************************************************/
/*! exports provided: default, tickIncrement, tickStep */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tickIncrement", function() { return tickIncrement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tickStep", function() { return tickStep; });
var e10 = Math.sqrt(50),
    e5 = Math.sqrt(10),
    e2 = Math.sqrt(2);
/* harmony default export */ __webpack_exports__["default"] = (function (start, stop, count) {
  var reverse,
      i = -1,
      n,
      ticks,
      step;
  stop = +stop, start = +start, count = +count;
  if (start === stop && count > 0) return [start];
  if (reverse = stop < start) n = start, start = stop, stop = n;
  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];

  if (step > 0) {
    start = Math.ceil(start / step);
    stop = Math.floor(stop / step);
    ticks = new Array(n = Math.ceil(stop - start + 1));

    while (++i < n) {
      ticks[i] = (start + i) * step;
    }
  } else {
    start = Math.floor(start * step);
    stop = Math.ceil(stop * step);
    ticks = new Array(n = Math.ceil(start - stop + 1));

    while (++i < n) {
      ticks[i] = (start - i) / step;
    }
  }

  if (reverse) ticks.reverse();
  return ticks;
});
function tickIncrement(start, stop, count) {
  var step = (stop - start) / Math.max(0, count),
      power = Math.floor(Math.log(step) / Math.LN10),
      error = step / Math.pow(10, power);
  return power >= 0 ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power) : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);
}
function tickStep(start, stop, count) {
  var step0 = Math.abs(stop - start) / Math.max(0, count),
      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),
      error = step0 / step1;
  if (error >= e10) step1 *= 10;else if (error >= e5) step1 *= 5;else if (error >= e2) step1 *= 2;
  return stop < start ? -step1 : step1;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/transpose.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/transpose.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _min__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./min */ "./packages/muze-utils/node_modules/d3-array/src/min.js");

/* harmony default export */ __webpack_exports__["default"] = (function (matrix) {
  if (!(n = matrix.length)) return [];

  for (var i = -1, m = Object(_min__WEBPACK_IMPORTED_MODULE_0__["default"])(matrix, length), transpose = new Array(m); ++i < m;) {
    for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {
      row[j] = matrix[j][i];
    }
  }

  return transpose;
});

function length(d) {
  return d.length;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/variance.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/variance.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _number__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./number */ "./packages/muze-utils/node_modules/d3-array/src/number.js");

/* harmony default export */ __webpack_exports__["default"] = (function (values, valueof) {
  var n = values.length,
      m = 0,
      i = -1,
      mean = 0,
      value,
      delta,
      sum = 0;

  if (valueof == null) {
    while (++i < n) {
      if (!isNaN(value = Object(_number__WEBPACK_IMPORTED_MODULE_0__["default"])(values[i]))) {
        delta = value - mean;
        mean += delta / ++m;
        sum += delta * (value - mean);
      }
    }
  } else {
    while (++i < n) {
      if (!isNaN(value = Object(_number__WEBPACK_IMPORTED_MODULE_0__["default"])(valueof(values[i], i, values)))) {
        delta = value - mean;
        mean += delta / ++m;
        sum += delta * (value - mean);
      }
    }
  }

  if (m > 1) return sum / (m - 1);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-array/src/zip.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-array/src/zip.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _transpose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transpose */ "./packages/muze-utils/node_modules/d3-array/src/transpose.js");

/* harmony default export */ __webpack_exports__["default"] = (function () {
  return Object(_transpose__WEBPACK_IMPORTED_MODULE_0__["default"])(arguments);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-axis/index.js":
/*!***********************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-axis/index.js ***!
  \***********************************************************/
/*! exports provided: axisTop, axisRight, axisBottom, axisLeft */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _src_axis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/axis */ "./packages/muze-utils/node_modules/d3-axis/src/axis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "axisTop", function() { return _src_axis__WEBPACK_IMPORTED_MODULE_0__["axisTop"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "axisRight", function() { return _src_axis__WEBPACK_IMPORTED_MODULE_0__["axisRight"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "axisBottom", function() { return _src_axis__WEBPACK_IMPORTED_MODULE_0__["axisBottom"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "axisLeft", function() { return _src_axis__WEBPACK_IMPORTED_MODULE_0__["axisLeft"]; });



/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-axis/src/array.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-axis/src/array.js ***!
  \***************************************************************/
/*! exports provided: slice */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "slice", function() { return slice; });
var slice = Array.prototype.slice;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-axis/src/axis.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-axis/src/axis.js ***!
  \**************************************************************/
/*! exports provided: axisTop, axisRight, axisBottom, axisLeft */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "axisTop", function() { return axisTop; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "axisRight", function() { return axisRight; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "axisBottom", function() { return axisBottom; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "axisLeft", function() { return axisLeft; });
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./array */ "./packages/muze-utils/node_modules/d3-axis/src/array.js");
/* harmony import */ var _identity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./identity */ "./packages/muze-utils/node_modules/d3-axis/src/identity.js");


var top = 1,
    right = 2,
    bottom = 3,
    left = 4,
    epsilon = 1e-6;

function translateX(x) {
  return "translate(" + (x + 0.5) + ",0)";
}

function translateY(y) {
  return "translate(0," + (y + 0.5) + ")";
}

function number(scale) {
  return function (d) {
    return +scale(d);
  };
}

function center(scale) {
  var offset = Math.max(0, scale.bandwidth() - 1) / 2; // Adjust for 0.5px offset.

  if (scale.round()) offset = Math.round(offset);
  return function (d) {
    return +scale(d) + offset;
  };
}

function entering() {
  return !this.__axis;
}

function axis(orient, scale) {
  var tickArguments = [],
      tickValues = null,
      tickFormat = null,
      tickTransform = null,
      tickSizeInner = 6,
      tickSizeOuter = 6,
      tickPadding = 3,
      k = orient === top || orient === left ? -1 : 1,
      x = orient === left || orient === right ? "x" : "y",
      transform = orient === top || orient === bottom ? translateX : translateY;

  function axis(context) {
    var values = tickValues == null ? scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain() : tickValues,
        format = tickFormat == null ? scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : _identity__WEBPACK_IMPORTED_MODULE_1__["default"] : tickFormat,
        spacing = Math.max(tickSizeInner, 0) + tickPadding,
        range = scale.range(),
        range0 = +range[0] + 0.5,
        range1 = +range[range.length - 1] + 0.5,
        position = (scale.bandwidth ? center : number)(scale.copy()),
        selection = context.selection ? context.selection() : context,
        path = selection.selectAll(".domain").data([null]),
        tick = selection.selectAll(".tick").data(values, scale).order(),
        tickExit = tick.exit(),
        tickEnter = tick.enter().append("g").attr("class", "tick"),
        line = tick.select("line"),
        text = tick.select("text");
    path = path.merge(path.enter().insert("path", ".tick").attr("class", "domain").attr("stroke", "#000"));
    tick = tick.merge(tickEnter);
    line = line.merge(tickEnter.append("line").attr("stroke", "#000").attr(x + "2", k * tickSizeInner));
    text = text.merge(tickEnter.append("text").attr("fill", "#000").attr(x, k * spacing).attr("dy", orient === top ? "0em" : orient === bottom ? "0.71em" : "0.32em")).style('transform', tickTransform);

    if (context !== selection) {
      path = path.transition(context);
      tick = tick.transition(context);
      line = line.transition(context);
      text = text.transition(context);
      tickExit = tickExit.transition(context).attr("opacity", epsilon).attr("transform", function (d) {
        return isFinite(d = position(d)) ? transform(d) : this.getAttribute("transform");
      });
      tickEnter.attr("opacity", epsilon).attr("transform", function (d) {
        var p = this.parentNode.__axis;
        return transform(p && isFinite(p = p(d)) ? p : position(d));
      });
    }

    tickExit.remove();
    path.attr("d", orient === left || orient == right ? "M" + k * tickSizeOuter + "," + range0 + "H0.5V" + range1 + "H" + k * tickSizeOuter : "M" + range0 + "," + k * tickSizeOuter + "V0.5H" + range1 + "V" + k * tickSizeOuter);
    tick.attr("opacity", 1).attr("transform", function (d) {
      return transform(position(d));
    });
    line.attr(x + "2", k * tickSizeInner);
    text.attr(x, k * spacing).text(format);
    selection.filter(entering).attr("fill", "none").attr("font-size", 10).attr("font-family", "sans-serif").attr("text-anchor", orient === right ? "start" : orient === left ? "end" : "middle");
    selection.each(function () {
      this.__axis = position;
    });
  }

  axis.scale = function (_) {
    return arguments.length ? (scale = _, axis) : scale;
  };

  axis.tickTransform = function (_) {
    return arguments.length ? (tickTransform = _, axis) : tickTransform;
  };

  axis.ticks = function () {
    return tickArguments = _array__WEBPACK_IMPORTED_MODULE_0__["slice"].call(arguments), axis;
  };

  axis.tickArguments = function (_) {
    return arguments.length ? (tickArguments = _ == null ? [] : _array__WEBPACK_IMPORTED_MODULE_0__["slice"].call(_), axis) : tickArguments.slice();
  };

  axis.tickValues = function (_) {
    return arguments.length ? (tickValues = _ == null ? null : _array__WEBPACK_IMPORTED_MODULE_0__["slice"].call(_), axis) : tickValues && tickValues.slice();
  };

  axis.tickFormat = function (_) {
    return arguments.length ? (tickFormat = _, axis) : tickFormat;
  };

  axis.tickSize = function (_) {
    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;
  };

  axis.tickSizeInner = function (_) {
    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;
  };

  axis.tickSizeOuter = function (_) {
    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;
  };

  axis.tickPadding = function (_) {
    return arguments.length ? (tickPadding = +_, axis) : tickPadding;
  };

  return axis;
}

function axisTop(scale) {
  return axis(top, scale);
}
function axisRight(scale) {
  return axis(right, scale);
}
function axisBottom(scale) {
  return axis(bottom, scale);
}
function axisLeft(scale) {
  return axis(left, scale);
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-axis/src/identity.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-axis/src/identity.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (x) {
  return x;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-collection/index.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-collection/index.js ***!
  \*****************************************************************/
/*! exports provided: nest, set, map, keys, values, entries */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _src_nest__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/nest */ "./packages/muze-utils/node_modules/d3-collection/src/nest.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "nest", function() { return _src_nest__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _src_set__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/set */ "./packages/muze-utils/node_modules/d3-collection/src/set.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "set", function() { return _src_set__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _src_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/map */ "./packages/muze-utils/node_modules/d3-collection/src/map.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "map", function() { return _src_map__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _src_keys__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/keys */ "./packages/muze-utils/node_modules/d3-collection/src/keys.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "keys", function() { return _src_keys__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _src_values__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src/values */ "./packages/muze-utils/node_modules/d3-collection/src/values.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "values", function() { return _src_values__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _src_entries__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./src/entries */ "./packages/muze-utils/node_modules/d3-collection/src/entries.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "entries", function() { return _src_entries__WEBPACK_IMPORTED_MODULE_5__["default"]; });








/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-collection/src/entries.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-collection/src/entries.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (map) {
  var entries = [];

  for (var key in map) {
    entries.push({
      key: key,
      value: map[key]
    });
  }

  return entries;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-collection/src/keys.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-collection/src/keys.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (map) {
  var keys = [];

  for (var key in map) {
    keys.push(key);
  }

  return keys;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-collection/src/map.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-collection/src/map.js ***!
  \*******************************************************************/
/*! exports provided: prefix, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prefix", function() { return prefix; });
var prefix = "$";

function Map() {}

Map.prototype = map.prototype = {
  constructor: Map,
  has: function has(key) {
    return prefix + key in this;
  },
  get: function get(key) {
    return this[prefix + key];
  },
  set: function set(key, value) {
    this[prefix + key] = value;
    return this;
  },
  remove: function remove(key) {
    var property = prefix + key;
    return property in this && delete this[property];
  },
  clear: function clear() {
    for (var property in this) {
      if (property[0] === prefix) delete this[property];
    }
  },
  keys: function keys() {
    var keys = [];

    for (var property in this) {
      if (property[0] === prefix) keys.push(property.slice(1));
    }

    return keys;
  },
  values: function values() {
    var values = [];

    for (var property in this) {
      if (property[0] === prefix) values.push(this[property]);
    }

    return values;
  },
  entries: function entries() {
    var entries = [];

    for (var property in this) {
      if (property[0] === prefix) entries.push({
        key: property.slice(1),
        value: this[property]
      });
    }

    return entries;
  },
  size: function size() {
    var size = 0;

    for (var property in this) {
      if (property[0] === prefix) ++size;
    }

    return size;
  },
  empty: function empty() {
    for (var property in this) {
      if (property[0] === prefix) return false;
    }

    return true;
  },
  each: function each(f) {
    for (var property in this) {
      if (property[0] === prefix) f(this[property], property.slice(1), this);
    }
  }
};

function map(object, f) {
  var map = new Map(); // Copy constructor.

  if (object instanceof Map) object.each(function (value, key) {
    map.set(key, value);
  }); // Index array by numeric index or specified key function.
  else if (Array.isArray(object)) {
      var i = -1,
          n = object.length,
          o;
      if (f == null) while (++i < n) {
        map.set(i, object[i]);
      } else while (++i < n) {
        map.set(f(o = object[i], i, object), o);
      }
    } // Convert object to map.
    else if (object) for (var key in object) {
        map.set(key, object[key]);
      }
  return map;
}

/* harmony default export */ __webpack_exports__["default"] = (map);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-collection/src/nest.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-collection/src/nest.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./map */ "./packages/muze-utils/node_modules/d3-collection/src/map.js");

/* harmony default export */ __webpack_exports__["default"] = (function () {
  var keys = [],
      _sortKeys = [],
      _sortValues,
      _rollup,
      nest;

  function apply(array, depth, createResult, setResult) {
    if (depth >= keys.length) {
      if (_sortValues != null) array.sort(_sortValues);
      return _rollup != null ? _rollup(array) : array;
    }

    var i = -1,
        n = array.length,
        key = keys[depth++],
        keyValue,
        value,
        valuesByKey = Object(_map__WEBPACK_IMPORTED_MODULE_0__["default"])(),
        values,
        result = createResult();

    while (++i < n) {
      if (values = valuesByKey.get(keyValue = key(value = array[i]) + "")) {
        values.push(value);
      } else {
        valuesByKey.set(keyValue, [value]);
      }
    }

    valuesByKey.each(function (values, key) {
      setResult(result, key, apply(values, depth, createResult, setResult));
    });
    return result;
  }

  function _entries(map, depth) {
    if (++depth > keys.length) return map;
    var array,
        sortKey = _sortKeys[depth - 1];
    if (_rollup != null && depth >= keys.length) array = map.entries();else array = [], map.each(function (v, k) {
      array.push({
        key: k,
        values: _entries(v, depth)
      });
    });
    return sortKey != null ? array.sort(function (a, b) {
      return sortKey(a.key, b.key);
    }) : array;
  }

  return nest = {
    object: function object(array) {
      return apply(array, 0, createObject, setObject);
    },
    map: function map(array) {
      return apply(array, 0, createMap, setMap);
    },
    entries: function entries(array) {
      return _entries(apply(array, 0, createMap, setMap), 0);
    },
    key: function key(d) {
      keys.push(d);
      return nest;
    },
    sortKeys: function sortKeys(order) {
      _sortKeys[keys.length - 1] = order;
      return nest;
    },
    sortValues: function sortValues(order) {
      _sortValues = order;
      return nest;
    },
    rollup: function rollup(f) {
      _rollup = f;
      return nest;
    }
  };
});

function createObject() {
  return {};
}

function setObject(object, key, value) {
  object[key] = value;
}

function createMap() {
  return Object(_map__WEBPACK_IMPORTED_MODULE_0__["default"])();
}

function setMap(map, key, value) {
  map.set(key, value);
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-collection/src/set.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-collection/src/set.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./map */ "./packages/muze-utils/node_modules/d3-collection/src/map.js");


function Set() {}

var proto = _map__WEBPACK_IMPORTED_MODULE_0__["default"].prototype;
Set.prototype = set.prototype = {
  constructor: Set,
  has: proto.has,
  add: function add(value) {
    value += "";
    this[_map__WEBPACK_IMPORTED_MODULE_0__["prefix"] + value] = value;
    return this;
  },
  remove: proto.remove,
  clear: proto.clear,
  values: proto.keys,
  size: proto.size,
  empty: proto.empty,
  each: proto.each
};

function set(object, f) {
  var set = new Set(); // Copy constructor.

  if (object instanceof Set) object.each(function (value) {
    set.add(value);
  }); // Otherwise, assume it’s an array.
  else if (object) {
      var i = -1,
          n = object.length;
      if (f == null) while (++i < n) {
        set.add(object[i]);
      } else while (++i < n) {
        set.add(f(object[i], i, object));
      }
    }
  return set;
}

/* harmony default export */ __webpack_exports__["default"] = (set);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-collection/src/values.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-collection/src/values.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (map) {
  var values = [];

  for (var key in map) {
    values.push(map[key]);
  }

  return values;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-color/src/color.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-color/src/color.js ***!
  \****************************************************************/
/*! exports provided: Color, darker, brighter, default, rgbConvert, rgb, Rgb, hslConvert, hsl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Color", function() { return Color; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "darker", function() { return _darker; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "brighter", function() { return _brighter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return color; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rgbConvert", function() { return rgbConvert; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rgb", function() { return rgb; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Rgb", function() { return Rgb; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hslConvert", function() { return hslConvert; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hsl", function() { return hsl; });
/* harmony import */ var _define__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./define */ "./packages/muze-utils/node_modules/d3-color/src/define.js");

function Color() {}
var _darker = 0.7;


var _brighter = 1 / _darker;


var reI = "\\s*([+-]?\\d+)\\s*",
    reN = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",
    reP = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",
    reHex3 = /^#([0-9a-f]{3})$/,
    reHex6 = /^#([0-9a-f]{6})$/,
    reRgbInteger = new RegExp("^rgb\\(" + [reI, reI, reI] + "\\)$"),
    reRgbPercent = new RegExp("^rgb\\(" + [reP, reP, reP] + "\\)$"),
    reRgbaInteger = new RegExp("^rgba\\(" + [reI, reI, reI, reN] + "\\)$"),
    reRgbaPercent = new RegExp("^rgba\\(" + [reP, reP, reP, reN] + "\\)$"),
    reHslPercent = new RegExp("^hsl\\(" + [reN, reP, reP] + "\\)$"),
    reHslaPercent = new RegExp("^hsla\\(" + [reN, reP, reP, reN] + "\\)$");
var named = {
  aliceblue: 0xf0f8ff,
  antiquewhite: 0xfaebd7,
  aqua: 0x00ffff,
  aquamarine: 0x7fffd4,
  azure: 0xf0ffff,
  beige: 0xf5f5dc,
  bisque: 0xffe4c4,
  black: 0x000000,
  blanchedalmond: 0xffebcd,
  blue: 0x0000ff,
  blueviolet: 0x8a2be2,
  brown: 0xa52a2a,
  burlywood: 0xdeb887,
  cadetblue: 0x5f9ea0,
  chartreuse: 0x7fff00,
  chocolate: 0xd2691e,
  coral: 0xff7f50,
  cornflowerblue: 0x6495ed,
  cornsilk: 0xfff8dc,
  crimson: 0xdc143c,
  cyan: 0x00ffff,
  darkblue: 0x00008b,
  darkcyan: 0x008b8b,
  darkgoldenrod: 0xb8860b,
  darkgray: 0xa9a9a9,
  darkgreen: 0x006400,
  darkgrey: 0xa9a9a9,
  darkkhaki: 0xbdb76b,
  darkmagenta: 0x8b008b,
  darkolivegreen: 0x556b2f,
  darkorange: 0xff8c00,
  darkorchid: 0x9932cc,
  darkred: 0x8b0000,
  darksalmon: 0xe9967a,
  darkseagreen: 0x8fbc8f,
  darkslateblue: 0x483d8b,
  darkslategray: 0x2f4f4f,
  darkslategrey: 0x2f4f4f,
  darkturquoise: 0x00ced1,
  darkviolet: 0x9400d3,
  deeppink: 0xff1493,
  deepskyblue: 0x00bfff,
  dimgray: 0x696969,
  dimgrey: 0x696969,
  dodgerblue: 0x1e90ff,
  firebrick: 0xb22222,
  floralwhite: 0xfffaf0,
  forestgreen: 0x228b22,
  fuchsia: 0xff00ff,
  gainsboro: 0xdcdcdc,
  ghostwhite: 0xf8f8ff,
  gold: 0xffd700,
  goldenrod: 0xdaa520,
  gray: 0x808080,
  green: 0x008000,
  greenyellow: 0xadff2f,
  grey: 0x808080,
  honeydew: 0xf0fff0,
  hotpink: 0xff69b4,
  indianred: 0xcd5c5c,
  indigo: 0x4b0082,
  ivory: 0xfffff0,
  khaki: 0xf0e68c,
  lavender: 0xe6e6fa,
  lavenderblush: 0xfff0f5,
  lawngreen: 0x7cfc00,
  lemonchiffon: 0xfffacd,
  lightblue: 0xadd8e6,
  lightcoral: 0xf08080,
  lightcyan: 0xe0ffff,
  lightgoldenrodyellow: 0xfafad2,
  lightgray: 0xd3d3d3,
  lightgreen: 0x90ee90,
  lightgrey: 0xd3d3d3,
  lightpink: 0xffb6c1,
  lightsalmon: 0xffa07a,
  lightseagreen: 0x20b2aa,
  lightskyblue: 0x87cefa,
  lightslategray: 0x778899,
  lightslategrey: 0x778899,
  lightsteelblue: 0xb0c4de,
  lightyellow: 0xffffe0,
  lime: 0x00ff00,
  limegreen: 0x32cd32,
  linen: 0xfaf0e6,
  magenta: 0xff00ff,
  maroon: 0x800000,
  mediumaquamarine: 0x66cdaa,
  mediumblue: 0x0000cd,
  mediumorchid: 0xba55d3,
  mediumpurple: 0x9370db,
  mediumseagreen: 0x3cb371,
  mediumslateblue: 0x7b68ee,
  mediumspringgreen: 0x00fa9a,
  mediumturquoise: 0x48d1cc,
  mediumvioletred: 0xc71585,
  midnightblue: 0x191970,
  mintcream: 0xf5fffa,
  mistyrose: 0xffe4e1,
  moccasin: 0xffe4b5,
  navajowhite: 0xffdead,
  navy: 0x000080,
  oldlace: 0xfdf5e6,
  olive: 0x808000,
  olivedrab: 0x6b8e23,
  orange: 0xffa500,
  orangered: 0xff4500,
  orchid: 0xda70d6,
  palegoldenrod: 0xeee8aa,
  palegreen: 0x98fb98,
  paleturquoise: 0xafeeee,
  palevioletred: 0xdb7093,
  papayawhip: 0xffefd5,
  peachpuff: 0xffdab9,
  peru: 0xcd853f,
  pink: 0xffc0cb,
  plum: 0xdda0dd,
  powderblue: 0xb0e0e6,
  purple: 0x800080,
  rebeccapurple: 0x663399,
  red: 0xff0000,
  rosybrown: 0xbc8f8f,
  royalblue: 0x4169e1,
  saddlebrown: 0x8b4513,
  salmon: 0xfa8072,
  sandybrown: 0xf4a460,
  seagreen: 0x2e8b57,
  seashell: 0xfff5ee,
  sienna: 0xa0522d,
  silver: 0xc0c0c0,
  skyblue: 0x87ceeb,
  slateblue: 0x6a5acd,
  slategray: 0x708090,
  slategrey: 0x708090,
  snow: 0xfffafa,
  springgreen: 0x00ff7f,
  steelblue: 0x4682b4,
  tan: 0xd2b48c,
  teal: 0x008080,
  thistle: 0xd8bfd8,
  tomato: 0xff6347,
  turquoise: 0x40e0d0,
  violet: 0xee82ee,
  wheat: 0xf5deb3,
  white: 0xffffff,
  whitesmoke: 0xf5f5f5,
  yellow: 0xffff00,
  yellowgreen: 0x9acd32
};
Object(_define__WEBPACK_IMPORTED_MODULE_0__["default"])(Color, color, {
  displayable: function displayable() {
    return this.rgb().displayable();
  },
  hex: function hex() {
    return this.rgb().hex();
  },
  toString: function toString() {
    return this.rgb() + "";
  }
});
function color(format) {
  var m;
  format = (format + "").trim().toLowerCase();
  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb(m >> 8 & 0xf | m >> 4 & 0x0f0, m >> 4 & 0xf | m & 0xf0, (m & 0xf) << 4 | m & 0xf, 1) // #f00
  ) : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000
  : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)
  : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)
  : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)
  : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)
  : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)
  : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)
  : named.hasOwnProperty(format) ? rgbn(named[format]) : format === "transparent" ? new Rgb(NaN, NaN, NaN, 0) : null;
}

function rgbn(n) {
  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);
}

function rgba(r, g, b, a) {
  if (a <= 0) r = g = b = NaN;
  return new Rgb(r, g, b, a);
}

function rgbConvert(o) {
  if (!(o instanceof Color)) o = color(o);
  if (!o) return new Rgb();
  o = o.rgb();
  return new Rgb(o.r, o.g, o.b, o.opacity);
}
function rgb(r, g, b, opacity) {
  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);
}
function Rgb(r, g, b, opacity) {
  this.r = +r;
  this.g = +g;
  this.b = +b;
  this.opacity = +opacity;
}
Object(_define__WEBPACK_IMPORTED_MODULE_0__["default"])(Rgb, rgb, Object(_define__WEBPACK_IMPORTED_MODULE_0__["extend"])(Color, {
  brighter: function brighter(k) {
    k = k == null ? _brighter : Math.pow(_brighter, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  darker: function darker(k) {
    k = k == null ? _darker : Math.pow(_darker, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  rgb: function rgb() {
    return this;
  },
  displayable: function displayable() {
    return 0 <= this.r && this.r <= 255 && 0 <= this.g && this.g <= 255 && 0 <= this.b && this.b <= 255 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: function hex() {
    return "#" + _hex(this.r) + _hex(this.g) + _hex(this.b);
  },
  toString: function toString() {
    var a = this.opacity;
    a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));
    return (a === 1 ? "rgb(" : "rgba(") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (a === 1 ? ")" : ", " + a + ")");
  }
}));

function _hex(value) {
  value = Math.max(0, Math.min(255, Math.round(value) || 0));
  return (value < 16 ? "0" : "") + value.toString(16);
}

function hsla(h, s, l, a) {
  if (a <= 0) h = s = l = NaN;else if (l <= 0 || l >= 1) h = s = NaN;else if (s <= 0) h = NaN;
  return new Hsl(h, s, l, a);
}

function hslConvert(o) {
  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);
  if (!(o instanceof Color)) o = color(o);
  if (!o) return new Hsl();
  if (o instanceof Hsl) return o;
  o = o.rgb();
  var r = o.r / 255,
      g = o.g / 255,
      b = o.b / 255,
      min = Math.min(r, g, b),
      max = Math.max(r, g, b),
      h = NaN,
      s = max - min,
      l = (max + min) / 2;

  if (s) {
    if (r === max) h = (g - b) / s + (g < b) * 6;else if (g === max) h = (b - r) / s + 2;else h = (r - g) / s + 4;
    s /= l < 0.5 ? max + min : 2 - max - min;
    h *= 60;
  } else {
    s = l > 0 && l < 1 ? 0 : h;
  }

  return new Hsl(h, s, l, o.opacity);
}
function hsl(h, s, l, opacity) {
  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);
}

function Hsl(h, s, l, opacity) {
  this.h = +h;
  this.s = +s;
  this.l = +l;
  this.opacity = +opacity;
}

Object(_define__WEBPACK_IMPORTED_MODULE_0__["default"])(Hsl, hsl, Object(_define__WEBPACK_IMPORTED_MODULE_0__["extend"])(Color, {
  brighter: function brighter(k) {
    k = k == null ? _brighter : Math.pow(_brighter, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  darker: function darker(k) {
    k = k == null ? _darker : Math.pow(_darker, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  rgb: function rgb() {
    var h = this.h % 360 + (this.h < 0) * 360,
        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,
        l = this.l,
        m2 = l + (l < 0.5 ? l : 1 - l) * s,
        m1 = 2 * l - m2;
    return new Rgb(hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2), hsl2rgb(h, m1, m2), hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2), this.opacity);
  },
  displayable: function displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  }
}));
/* From FvD 13.37, CSS Color Module Level 3 */

function hsl2rgb(h, m1, m2) {
  return (h < 60 ? m1 + (m2 - m1) * h / 60 : h < 180 ? m2 : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60 : m1) * 255;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-color/src/cubehelix.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-color/src/cubehelix.js ***!
  \********************************************************************/
/*! exports provided: default, Cubehelix */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return cubehelix; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cubehelix", function() { return Cubehelix; });
/* harmony import */ var _define__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./define */ "./packages/muze-utils/node_modules/d3-color/src/define.js");
/* harmony import */ var _color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color */ "./packages/muze-utils/node_modules/d3-color/src/color.js");
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./math */ "./packages/muze-utils/node_modules/d3-color/src/math.js");



var A = -0.14861,
    B = +1.78277,
    C = -0.29227,
    D = -0.90649,
    E = +1.97294,
    ED = E * D,
    EB = E * B,
    BC_DA = B * C - D * A;

function cubehelixConvert(o) {
  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);
  if (!(o instanceof _color__WEBPACK_IMPORTED_MODULE_1__["Rgb"])) o = Object(_color__WEBPACK_IMPORTED_MODULE_1__["rgbConvert"])(o);
  var r = o.r / 255,
      g = o.g / 255,
      b = o.b / 255,
      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),
      bl = b - l,
      k = (E * (g - l) - C * bl) / D,
      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)),
      // NaN if l=0 or l=1
  h = s ? Math.atan2(k, bl) * _math__WEBPACK_IMPORTED_MODULE_2__["rad2deg"] - 120 : NaN;
  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);
}

function cubehelix(h, s, l, opacity) {
  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);
}
function Cubehelix(h, s, l, opacity) {
  this.h = +h;
  this.s = +s;
  this.l = +l;
  this.opacity = +opacity;
}
Object(_define__WEBPACK_IMPORTED_MODULE_0__["default"])(Cubehelix, cubehelix, Object(_define__WEBPACK_IMPORTED_MODULE_0__["extend"])(_color__WEBPACK_IMPORTED_MODULE_1__["Color"], {
  brighter: function brighter(k) {
    k = k == null ? _color__WEBPACK_IMPORTED_MODULE_1__["brighter"] : Math.pow(_color__WEBPACK_IMPORTED_MODULE_1__["brighter"], k);
    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);
  },
  darker: function darker(k) {
    k = k == null ? _color__WEBPACK_IMPORTED_MODULE_1__["darker"] : Math.pow(_color__WEBPACK_IMPORTED_MODULE_1__["darker"], k);
    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);
  },
  rgb: function rgb() {
    var h = isNaN(this.h) ? 0 : (this.h + 120) * _math__WEBPACK_IMPORTED_MODULE_2__["deg2rad"],
        l = +this.l,
        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),
        cosh = Math.cos(h),
        sinh = Math.sin(h);
    return new _color__WEBPACK_IMPORTED_MODULE_1__["Rgb"](255 * (l + a * (A * cosh + B * sinh)), 255 * (l + a * (C * cosh + D * sinh)), 255 * (l + a * (E * cosh)), this.opacity);
  }
}));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-color/src/define.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-color/src/define.js ***!
  \*****************************************************************/
/*! exports provided: default, extend */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extend", function() { return extend; });
/* harmony default export */ __webpack_exports__["default"] = (function (constructor, factory, prototype) {
  constructor.prototype = factory.prototype = prototype;
  prototype.constructor = constructor;
});
function extend(parent, definition) {
  var prototype = Object.create(parent.prototype);

  for (var key in definition) {
    prototype[key] = definition[key];
  }

  return prototype;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-color/src/index.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-color/src/index.js ***!
  \****************************************************************/
/*! exports provided: color, rgb, hsl, lab, hcl, lch, gray, cubehelix */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./color */ "./packages/muze-utils/node_modules/d3-color/src/color.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "color", function() { return _color__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "rgb", function() { return _color__WEBPACK_IMPORTED_MODULE_0__["rgb"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hsl", function() { return _color__WEBPACK_IMPORTED_MODULE_0__["hsl"]; });

/* harmony import */ var _lab__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lab */ "./packages/muze-utils/node_modules/d3-color/src/lab.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "lab", function() { return _lab__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hcl", function() { return _lab__WEBPACK_IMPORTED_MODULE_1__["hcl"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "lch", function() { return _lab__WEBPACK_IMPORTED_MODULE_1__["lch"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "gray", function() { return _lab__WEBPACK_IMPORTED_MODULE_1__["gray"]; });

/* harmony import */ var _cubehelix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cubehelix */ "./packages/muze-utils/node_modules/d3-color/src/cubehelix.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "cubehelix", function() { return _cubehelix__WEBPACK_IMPORTED_MODULE_2__["default"]; });





/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-color/src/lab.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-color/src/lab.js ***!
  \**************************************************************/
/*! exports provided: gray, default, Lab, lch, hcl, Hcl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "gray", function() { return gray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return lab; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Lab", function() { return Lab; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lch", function() { return lch; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hcl", function() { return hcl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Hcl", function() { return Hcl; });
/* harmony import */ var _define__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./define */ "./packages/muze-utils/node_modules/d3-color/src/define.js");
/* harmony import */ var _color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color */ "./packages/muze-utils/node_modules/d3-color/src/color.js");
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./math */ "./packages/muze-utils/node_modules/d3-color/src/math.js");


 // https://beta.observablehq.com/@mbostock/lab-and-rgb

var K = 18,
    Xn = 0.96422,
    Yn = 1,
    Zn = 0.82521,
    t0 = 4 / 29,
    t1 = 6 / 29,
    t2 = 3 * t1 * t1,
    t3 = t1 * t1 * t1;

function labConvert(o) {
  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);

  if (o instanceof Hcl) {
    if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);
    var h = o.h * _math__WEBPACK_IMPORTED_MODULE_2__["deg2rad"];
    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);
  }

  if (!(o instanceof _color__WEBPACK_IMPORTED_MODULE_1__["Rgb"])) o = Object(_color__WEBPACK_IMPORTED_MODULE_1__["rgbConvert"])(o);
  var r = rgb2lrgb(o.r),
      g = rgb2lrgb(o.g),
      b = rgb2lrgb(o.b),
      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn),
      x,
      z;
  if (r === g && g === b) x = z = y;else {
    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);
    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);
  }
  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);
}

function gray(l, opacity) {
  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);
}
function lab(l, a, b, opacity) {
  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);
}
function Lab(l, a, b, opacity) {
  this.l = +l;
  this.a = +a;
  this.b = +b;
  this.opacity = +opacity;
}
Object(_define__WEBPACK_IMPORTED_MODULE_0__["default"])(Lab, lab, Object(_define__WEBPACK_IMPORTED_MODULE_0__["extend"])(_color__WEBPACK_IMPORTED_MODULE_1__["Color"], {
  brighter: function brighter(k) {
    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);
  },
  darker: function darker(k) {
    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);
  },
  rgb: function rgb() {
    var y = (this.l + 16) / 116,
        x = isNaN(this.a) ? y : y + this.a / 500,
        z = isNaN(this.b) ? y : y - this.b / 200;
    x = Xn * lab2xyz(x);
    y = Yn * lab2xyz(y);
    z = Zn * lab2xyz(z);
    return new _color__WEBPACK_IMPORTED_MODULE_1__["Rgb"](lrgb2rgb(3.1338561 * x - 1.6168667 * y - 0.4906146 * z), lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z), lrgb2rgb(0.0719453 * x - 0.2289914 * y + 1.4052427 * z), this.opacity);
  }
}));

function xyz2lab(t) {
  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;
}

function lab2xyz(t) {
  return t > t1 ? t * t * t : t2 * (t - t0);
}

function lrgb2rgb(x) {
  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);
}

function rgb2lrgb(x) {
  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);
}

function hclConvert(o) {
  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);
  if (!(o instanceof Lab)) o = labConvert(o);
  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0, o.l, o.opacity);
  var h = Math.atan2(o.b, o.a) * _math__WEBPACK_IMPORTED_MODULE_2__["rad2deg"];
  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);
}

function lch(l, c, h, opacity) {
  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);
}
function hcl(h, c, l, opacity) {
  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);
}
function Hcl(h, c, l, opacity) {
  this.h = +h;
  this.c = +c;
  this.l = +l;
  this.opacity = +opacity;
}
Object(_define__WEBPACK_IMPORTED_MODULE_0__["default"])(Hcl, hcl, Object(_define__WEBPACK_IMPORTED_MODULE_0__["extend"])(_color__WEBPACK_IMPORTED_MODULE_1__["Color"], {
  brighter: function brighter(k) {
    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);
  },
  darker: function darker(k) {
    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);
  },
  rgb: function rgb() {
    return labConvert(this).rgb();
  }
}));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-color/src/math.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-color/src/math.js ***!
  \***************************************************************/
/*! exports provided: deg2rad, rad2deg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deg2rad", function() { return deg2rad; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rad2deg", function() { return rad2deg; });
var deg2rad = Math.PI / 180;
var rad2deg = 180 / Math.PI;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-dispatch/src/dispatch.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-dispatch/src/dispatch.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var noop = {
  value: function value() {}
};

function dispatch() {
  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {
    if (!(t = arguments[i] + "") || t in _) throw new Error("illegal type: " + t);
    _[t] = [];
  }

  return new Dispatch(_);
}

function Dispatch(_) {
  this._ = _;
}

function parseTypenames(typenames, types) {
  return typenames.trim().split(/^|\s+/).map(function (t) {
    var name = "",
        i = t.indexOf(".");
    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);
    if (t && !types.hasOwnProperty(t)) throw new Error("unknown type: " + t);
    return {
      type: t,
      name: name
    };
  });
}

Dispatch.prototype = dispatch.prototype = {
  constructor: Dispatch,
  on: function on(typename, callback) {
    var _ = this._,
        T = parseTypenames(typename + "", _),
        t,
        i = -1,
        n = T.length; // If no callback was specified, return the callback of the given type and name.

    if (arguments.length < 2) {
      while (++i < n) {
        if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;
      }

      return;
    } // If a type was specified, set the callback for the given type and name.
    // Otherwise, if a null callback was specified, remove callbacks of the given name.


    if (callback != null && typeof callback !== "function") throw new Error("invalid callback: " + callback);

    while (++i < n) {
      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);else if (callback == null) for (t in _) {
        _[t] = set(_[t], typename.name, null);
      }
    }

    return this;
  },
  copy: function copy() {
    var copy = {},
        _ = this._;

    for (var t in _) {
      copy[t] = _[t].slice();
    }

    return new Dispatch(copy);
  },
  call: function call(type, that) {
    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) {
      args[i] = arguments[i + 2];
    }
    if (!this._.hasOwnProperty(type)) throw new Error("unknown type: " + type);

    for (t = this._[type], i = 0, n = t.length; i < n; ++i) {
      t[i].value.apply(that, args);
    }
  },
  apply: function apply(type, that, args) {
    if (!this._.hasOwnProperty(type)) throw new Error("unknown type: " + type);

    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) {
      t[i].value.apply(that, args);
    }
  }
};

function get(type, name) {
  for (var i = 0, n = type.length, c; i < n; ++i) {
    if ((c = type[i]).name === name) {
      return c.value;
    }
  }
}

function set(type, name, callback) {
  for (var i = 0, n = type.length; i < n; ++i) {
    if (type[i].name === name) {
      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));
      break;
    }
  }

  if (callback != null) type.push({
    name: name,
    value: callback
  });
  return type;
}

/* harmony default export */ __webpack_exports__["default"] = (dispatch);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-dispatch/src/index.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-dispatch/src/index.js ***!
  \*******************************************************************/
/*! exports provided: dispatch */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _dispatch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dispatch */ "./packages/muze-utils/node_modules/d3-dispatch/src/dispatch.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "dispatch", function() { return _dispatch__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-drag/src/constant.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-drag/src/constant.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (x) {
  return function () {
    return x;
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-drag/src/drag.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-drag/src/drag.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_dispatch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-dispatch */ "./packages/muze-utils/node_modules/d3-dispatch/src/index.js");
/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-selection */ "./packages/muze-utils/node_modules/d3-selection/src/index.js");
/* harmony import */ var _nodrag__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./nodrag */ "./packages/muze-utils/node_modules/d3-drag/src/nodrag.js");
/* harmony import */ var _noevent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./noevent */ "./packages/muze-utils/node_modules/d3-drag/src/noevent.js");
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constant */ "./packages/muze-utils/node_modules/d3-drag/src/constant.js");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./event */ "./packages/muze-utils/node_modules/d3-drag/src/event.js");





 // Ignore right-click, since that should open the context menu.

function defaultFilter() {
  return !d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].button;
}

function defaultContainer() {
  return this.parentNode;
}

function defaultSubject(d) {
  return d == null ? {
    x: d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].x,
    y: d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].y
  } : d;
}

function defaultTouchable() {
  return "ontouchstart" in this;
}

/* harmony default export */ __webpack_exports__["default"] = (function () {
  var filter = defaultFilter,
      container = defaultContainer,
      subject = defaultSubject,
      touchable = defaultTouchable,
      gestures = {},
      listeners = Object(d3_dispatch__WEBPACK_IMPORTED_MODULE_0__["dispatch"])("start", "drag", "end"),
      active = 0,
      mousedownx,
      mousedowny,
      mousemoving,
      touchending,
      clickDistance2 = 0;

  function drag(selection) {
    selection.on("mousedown.drag", mousedowned).filter(touchable).on("touchstart.drag", touchstarted).on("touchmove.drag", touchmoved).on("touchend.drag touchcancel.drag", touchended).style("touch-action", "none").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }

  function mousedowned() {
    if (touchending || !filter.apply(this, arguments)) return;
    var gesture = beforestart("mouse", container.apply(this, arguments), d3_selection__WEBPACK_IMPORTED_MODULE_1__["mouse"], this, arguments);
    if (!gesture) return;
    Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__["select"])(d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].view).on("mousemove.drag", mousemoved, true).on("mouseup.drag", mouseupped, true);
    Object(_nodrag__WEBPACK_IMPORTED_MODULE_2__["default"])(d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].view);
    Object(_noevent__WEBPACK_IMPORTED_MODULE_3__["nopropagation"])();
    mousemoving = false;
    mousedownx = d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].clientX;
    mousedowny = d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].clientY;
    gesture("start");
  }

  function mousemoved() {
    Object(_noevent__WEBPACK_IMPORTED_MODULE_3__["default"])();

    if (!mousemoving) {
      var dx = d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].clientX - mousedownx,
          dy = d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].clientY - mousedowny;
      mousemoving = dx * dx + dy * dy > clickDistance2;
    }

    gestures.mouse("drag");
  }

  function mouseupped() {
    Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__["select"])(d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].view).on("mousemove.drag mouseup.drag", null);
    Object(_nodrag__WEBPACK_IMPORTED_MODULE_2__["yesdrag"])(d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].view, mousemoving);
    Object(_noevent__WEBPACK_IMPORTED_MODULE_3__["default"])();
    gestures.mouse("end");
  }

  function touchstarted() {
    if (!filter.apply(this, arguments)) return;
    var touches = d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].changedTouches,
        c = container.apply(this, arguments),
        n = touches.length,
        i,
        gesture;

    for (i = 0; i < n; ++i) {
      if (gesture = beforestart(touches[i].identifier, c, d3_selection__WEBPACK_IMPORTED_MODULE_1__["touch"], this, arguments)) {
        Object(_noevent__WEBPACK_IMPORTED_MODULE_3__["nopropagation"])();
        gesture("start");
      }
    }
  }

  function touchmoved() {
    var touches = d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].changedTouches,
        n = touches.length,
        i,
        gesture;

    for (i = 0; i < n; ++i) {
      if (gesture = gestures[touches[i].identifier]) {
        Object(_noevent__WEBPACK_IMPORTED_MODULE_3__["default"])();
        gesture("drag");
      }
    }
  }

  function touchended() {
    var touches = d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].changedTouches,
        n = touches.length,
        i,
        gesture;
    if (touchending) clearTimeout(touchending);
    touchending = setTimeout(function () {
      touchending = null;
    }, 500); // Ghost clicks are delayed!

    for (i = 0; i < n; ++i) {
      if (gesture = gestures[touches[i].identifier]) {
        Object(_noevent__WEBPACK_IMPORTED_MODULE_3__["nopropagation"])();
        gesture("end");
      }
    }
  }

  function beforestart(id, container, point, that, args) {
    var p = point(container, id),
        s,
        dx,
        dy,
        sublisteners = listeners.copy();
    if (!Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__["customEvent"])(new _event__WEBPACK_IMPORTED_MODULE_5__["default"](drag, "beforestart", s, id, active, p[0], p[1], 0, 0, sublisteners), function () {
      if ((d3_selection__WEBPACK_IMPORTED_MODULE_1__["event"].subject = s = subject.apply(that, args)) == null) return false;
      dx = s.x - p[0] || 0;
      dy = s.y - p[1] || 0;
      return true;
    })) return;
    return function gesture(type) {
      var p0 = p,
          n;

      switch (type) {
        case "start":
          gestures[id] = gesture, n = active++;
          break;

        case "end":
          delete gestures[id], --active;
        // nobreak

        case "drag":
          p = point(container, id), n = active;
          break;
      }

      Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__["customEvent"])(new _event__WEBPACK_IMPORTED_MODULE_5__["default"](drag, type, s, id, n, p[0] + dx, p[1] + dy, p[0] - p0[0], p[1] - p0[1], sublisteners), sublisteners.apply, sublisteners, [type, that, args]);
    };
  }

  drag.filter = function (_) {
    return arguments.length ? (filter = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_4__["default"])(!!_), drag) : filter;
  };

  drag.container = function (_) {
    return arguments.length ? (container = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_4__["default"])(_), drag) : container;
  };

  drag.subject = function (_) {
    return arguments.length ? (subject = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_4__["default"])(_), drag) : subject;
  };

  drag.touchable = function (_) {
    return arguments.length ? (touchable = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_4__["default"])(!!_), drag) : touchable;
  };

  drag.on = function () {
    var value = listeners.on.apply(listeners, arguments);
    return value === listeners ? drag : value;
  };

  drag.clickDistance = function (_) {
    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);
  };

  return drag;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-drag/src/event.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-drag/src/event.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DragEvent; });
function DragEvent(target, type, subject, id, active, x, y, dx, dy, dispatch) {
  this.target = target;
  this.type = type;
  this.subject = subject;
  this.identifier = id;
  this.active = active;
  this.x = x;
  this.y = y;
  this.dx = dx;
  this.dy = dy;
  this._ = dispatch;
}

DragEvent.prototype.on = function () {
  var value = this._.on.apply(this._, arguments);

  return value === this._ ? this : value;
};

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-drag/src/index.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-drag/src/index.js ***!
  \***************************************************************/
/*! exports provided: drag, dragDisable, dragEnable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _drag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./drag */ "./packages/muze-utils/node_modules/d3-drag/src/drag.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "drag", function() { return _drag__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _nodrag__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./nodrag */ "./packages/muze-utils/node_modules/d3-drag/src/nodrag.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "dragDisable", function() { return _nodrag__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "dragEnable", function() { return _nodrag__WEBPACK_IMPORTED_MODULE_1__["yesdrag"]; });




/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-drag/src/nodrag.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-drag/src/nodrag.js ***!
  \****************************************************************/
/*! exports provided: default, yesdrag */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "yesdrag", function() { return yesdrag; });
/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-selection */ "./packages/muze-utils/node_modules/d3-selection/src/index.js");
/* harmony import */ var _noevent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./noevent */ "./packages/muze-utils/node_modules/d3-drag/src/noevent.js");


/* harmony default export */ __webpack_exports__["default"] = (function (view) {
  var root = view.document.documentElement,
      selection = Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["select"])(view).on("dragstart.drag", _noevent__WEBPACK_IMPORTED_MODULE_1__["default"], true);

  if ("onselectstart" in root) {
    selection.on("selectstart.drag", _noevent__WEBPACK_IMPORTED_MODULE_1__["default"], true);
  } else {
    root.__noselect = root.style.MozUserSelect;
    root.style.MozUserSelect = "none";
  }
});
function yesdrag(view, noclick) {
  var root = view.document.documentElement,
      selection = Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["select"])(view).on("dragstart.drag", null);

  if (noclick) {
    selection.on("click.drag", _noevent__WEBPACK_IMPORTED_MODULE_1__["default"], true);
    setTimeout(function () {
      selection.on("click.drag", null);
    }, 0);
  }

  if ("onselectstart" in root) {
    selection.on("selectstart.drag", null);
  } else {
    root.style.MozUserSelect = root.__noselect;
    delete root.__noselect;
  }
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-drag/src/noevent.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-drag/src/noevent.js ***!
  \*****************************************************************/
/*! exports provided: nopropagation, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nopropagation", function() { return nopropagation; });
/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-selection */ "./packages/muze-utils/node_modules/d3-selection/src/index.js");

function nopropagation() {
  d3_selection__WEBPACK_IMPORTED_MODULE_0__["event"].stopImmediatePropagation();
}
/* harmony default export */ __webpack_exports__["default"] = (function () {
  d3_selection__WEBPACK_IMPORTED_MODULE_0__["event"].preventDefault();
  d3_selection__WEBPACK_IMPORTED_MODULE_0__["event"].stopImmediatePropagation();
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-ease/src/back.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-ease/src/back.js ***!
  \**************************************************************/
/*! exports provided: backIn, backOut, backInOut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "backIn", function() { return backIn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "backOut", function() { return backOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "backInOut", function() { return backInOut; });
var overshoot = 1.70158;
var backIn = function custom(s) {
  s = +s;

  function backIn(t) {
    return t * t * ((s + 1) * t - s);
  }

  backIn.overshoot = custom;
  return backIn;
}(overshoot);
var backOut = function custom(s) {
  s = +s;

  function backOut(t) {
    return --t * t * ((s + 1) * t + s) + 1;
  }

  backOut.overshoot = custom;
  return backOut;
}(overshoot);
var backInOut = function custom(s) {
  s = +s;

  function backInOut(t) {
    return ((t *= 2) < 1 ? t * t * ((s + 1) * t - s) : (t -= 2) * t * ((s + 1) * t + s) + 2) / 2;
  }

  backInOut.overshoot = custom;
  return backInOut;
}(overshoot);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-ease/src/bounce.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-ease/src/bounce.js ***!
  \****************************************************************/
/*! exports provided: bounceIn, bounceOut, bounceInOut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bounceIn", function() { return bounceIn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bounceOut", function() { return bounceOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bounceInOut", function() { return bounceInOut; });
var b1 = 4 / 11,
    b2 = 6 / 11,
    b3 = 8 / 11,
    b4 = 3 / 4,
    b5 = 9 / 11,
    b6 = 10 / 11,
    b7 = 15 / 16,
    b8 = 21 / 22,
    b9 = 63 / 64,
    b0 = 1 / b1 / b1;
function bounceIn(t) {
  return 1 - bounceOut(1 - t);
}
function bounceOut(t) {
  return (t = +t) < b1 ? b0 * t * t : t < b3 ? b0 * (t -= b2) * t + b4 : t < b6 ? b0 * (t -= b5) * t + b7 : b0 * (t -= b8) * t + b9;
}
function bounceInOut(t) {
  return ((t *= 2) <= 1 ? 1 - bounceOut(1 - t) : bounceOut(t - 1) + 1) / 2;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-ease/src/circle.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-ease/src/circle.js ***!
  \****************************************************************/
/*! exports provided: circleIn, circleOut, circleInOut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "circleIn", function() { return circleIn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "circleOut", function() { return circleOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "circleInOut", function() { return circleInOut; });
function circleIn(t) {
  return 1 - Math.sqrt(1 - t * t);
}
function circleOut(t) {
  return Math.sqrt(1 - --t * t);
}
function circleInOut(t) {
  return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-ease/src/cubic.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-ease/src/cubic.js ***!
  \***************************************************************/
/*! exports provided: cubicIn, cubicOut, cubicInOut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cubicIn", function() { return cubicIn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cubicOut", function() { return cubicOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cubicInOut", function() { return cubicInOut; });
function cubicIn(t) {
  return t * t * t;
}
function cubicOut(t) {
  return --t * t * t + 1;
}
function cubicInOut(t) {
  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-ease/src/elastic.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-ease/src/elastic.js ***!
  \*****************************************************************/
/*! exports provided: elasticIn, elasticOut, elasticInOut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "elasticIn", function() { return elasticIn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "elasticOut", function() { return elasticOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "elasticInOut", function() { return elasticInOut; });
var tau = 2 * Math.PI,
    amplitude = 1,
    period = 0.3;
var elasticIn = function custom(a, p) {
  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);

  function elasticIn(t) {
    return a * Math.pow(2, 10 * --t) * Math.sin((s - t) / p);
  }

  elasticIn.amplitude = function (a) {
    return custom(a, p * tau);
  };

  elasticIn.period = function (p) {
    return custom(a, p);
  };

  return elasticIn;
}(amplitude, period);
var elasticOut = function custom(a, p) {
  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);

  function elasticOut(t) {
    return 1 - a * Math.pow(2, -10 * (t = +t)) * Math.sin((t + s) / p);
  }

  elasticOut.amplitude = function (a) {
    return custom(a, p * tau);
  };

  elasticOut.period = function (p) {
    return custom(a, p);
  };

  return elasticOut;
}(amplitude, period);
var elasticInOut = function custom(a, p) {
  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);

  function elasticInOut(t) {
    return ((t = t * 2 - 1) < 0 ? a * Math.pow(2, 10 * t) * Math.sin((s - t) / p) : 2 - a * Math.pow(2, -10 * t) * Math.sin((s + t) / p)) / 2;
  }

  elasticInOut.amplitude = function (a) {
    return custom(a, p * tau);
  };

  elasticInOut.period = function (p) {
    return custom(a, p);
  };

  return elasticInOut;
}(amplitude, period);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-ease/src/exp.js":
/*!*************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-ease/src/exp.js ***!
  \*************************************************************/
/*! exports provided: expIn, expOut, expInOut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "expIn", function() { return expIn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "expOut", function() { return expOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "expInOut", function() { return expInOut; });
function expIn(t) {
  return Math.pow(2, 10 * t - 10);
}
function expOut(t) {
  return 1 - Math.pow(2, -10 * t);
}
function expInOut(t) {
  return ((t *= 2) <= 1 ? Math.pow(2, 10 * t - 10) : 2 - Math.pow(2, 10 - 10 * t)) / 2;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-ease/src/index.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-ease/src/index.js ***!
  \***************************************************************/
/*! exports provided: easeLinear, easeQuad, easeQuadIn, easeQuadOut, easeQuadInOut, easeCubic, easeCubicIn, easeCubicOut, easeCubicInOut, easePoly, easePolyIn, easePolyOut, easePolyInOut, easeSin, easeSinIn, easeSinOut, easeSinInOut, easeExp, easeExpIn, easeExpOut, easeExpInOut, easeCircle, easeCircleIn, easeCircleOut, easeCircleInOut, easeBounce, easeBounceIn, easeBounceOut, easeBounceInOut, easeBack, easeBackIn, easeBackOut, easeBackInOut, easeElastic, easeElasticIn, easeElasticOut, easeElasticInOut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _linear__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./linear */ "./packages/muze-utils/node_modules/d3-ease/src/linear.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeLinear", function() { return _linear__WEBPACK_IMPORTED_MODULE_0__["linear"]; });

/* harmony import */ var _quad__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./quad */ "./packages/muze-utils/node_modules/d3-ease/src/quad.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeQuad", function() { return _quad__WEBPACK_IMPORTED_MODULE_1__["quadInOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeQuadIn", function() { return _quad__WEBPACK_IMPORTED_MODULE_1__["quadIn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeQuadOut", function() { return _quad__WEBPACK_IMPORTED_MODULE_1__["quadOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeQuadInOut", function() { return _quad__WEBPACK_IMPORTED_MODULE_1__["quadInOut"]; });

/* harmony import */ var _cubic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cubic */ "./packages/muze-utils/node_modules/d3-ease/src/cubic.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeCubic", function() { return _cubic__WEBPACK_IMPORTED_MODULE_2__["cubicInOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeCubicIn", function() { return _cubic__WEBPACK_IMPORTED_MODULE_2__["cubicIn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeCubicOut", function() { return _cubic__WEBPACK_IMPORTED_MODULE_2__["cubicOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeCubicInOut", function() { return _cubic__WEBPACK_IMPORTED_MODULE_2__["cubicInOut"]; });

/* harmony import */ var _poly__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./poly */ "./packages/muze-utils/node_modules/d3-ease/src/poly.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easePoly", function() { return _poly__WEBPACK_IMPORTED_MODULE_3__["polyInOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easePolyIn", function() { return _poly__WEBPACK_IMPORTED_MODULE_3__["polyIn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easePolyOut", function() { return _poly__WEBPACK_IMPORTED_MODULE_3__["polyOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easePolyInOut", function() { return _poly__WEBPACK_IMPORTED_MODULE_3__["polyInOut"]; });

/* harmony import */ var _sin__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./sin */ "./packages/muze-utils/node_modules/d3-ease/src/sin.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeSin", function() { return _sin__WEBPACK_IMPORTED_MODULE_4__["sinInOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeSinIn", function() { return _sin__WEBPACK_IMPORTED_MODULE_4__["sinIn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeSinOut", function() { return _sin__WEBPACK_IMPORTED_MODULE_4__["sinOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeSinInOut", function() { return _sin__WEBPACK_IMPORTED_MODULE_4__["sinInOut"]; });

/* harmony import */ var _exp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./exp */ "./packages/muze-utils/node_modules/d3-ease/src/exp.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeExp", function() { return _exp__WEBPACK_IMPORTED_MODULE_5__["expInOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeExpIn", function() { return _exp__WEBPACK_IMPORTED_MODULE_5__["expIn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeExpOut", function() { return _exp__WEBPACK_IMPORTED_MODULE_5__["expOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeExpInOut", function() { return _exp__WEBPACK_IMPORTED_MODULE_5__["expInOut"]; });

/* harmony import */ var _circle__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./circle */ "./packages/muze-utils/node_modules/d3-ease/src/circle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeCircle", function() { return _circle__WEBPACK_IMPORTED_MODULE_6__["circleInOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeCircleIn", function() { return _circle__WEBPACK_IMPORTED_MODULE_6__["circleIn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeCircleOut", function() { return _circle__WEBPACK_IMPORTED_MODULE_6__["circleOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeCircleInOut", function() { return _circle__WEBPACK_IMPORTED_MODULE_6__["circleInOut"]; });

/* harmony import */ var _bounce__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./bounce */ "./packages/muze-utils/node_modules/d3-ease/src/bounce.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeBounce", function() { return _bounce__WEBPACK_IMPORTED_MODULE_7__["bounceOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeBounceIn", function() { return _bounce__WEBPACK_IMPORTED_MODULE_7__["bounceIn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeBounceOut", function() { return _bounce__WEBPACK_IMPORTED_MODULE_7__["bounceOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeBounceInOut", function() { return _bounce__WEBPACK_IMPORTED_MODULE_7__["bounceInOut"]; });

/* harmony import */ var _back__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./back */ "./packages/muze-utils/node_modules/d3-ease/src/back.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeBack", function() { return _back__WEBPACK_IMPORTED_MODULE_8__["backInOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeBackIn", function() { return _back__WEBPACK_IMPORTED_MODULE_8__["backIn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeBackOut", function() { return _back__WEBPACK_IMPORTED_MODULE_8__["backOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeBackInOut", function() { return _back__WEBPACK_IMPORTED_MODULE_8__["backInOut"]; });

/* harmony import */ var _elastic__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./elastic */ "./packages/muze-utils/node_modules/d3-ease/src/elastic.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeElastic", function() { return _elastic__WEBPACK_IMPORTED_MODULE_9__["elasticOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeElasticIn", function() { return _elastic__WEBPACK_IMPORTED_MODULE_9__["elasticIn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeElasticOut", function() { return _elastic__WEBPACK_IMPORTED_MODULE_9__["elasticOut"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeElasticInOut", function() { return _elastic__WEBPACK_IMPORTED_MODULE_9__["elasticInOut"]; });












/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-ease/src/linear.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-ease/src/linear.js ***!
  \****************************************************************/
/*! exports provided: linear */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "linear", function() { return linear; });
function linear(t) {
  return +t;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-ease/src/poly.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-ease/src/poly.js ***!
  \**************************************************************/
/*! exports provided: polyIn, polyOut, polyInOut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "polyIn", function() { return polyIn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "polyOut", function() { return polyOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "polyInOut", function() { return polyInOut; });
var exponent = 3;
var polyIn = function custom(e) {
  e = +e;

  function polyIn(t) {
    return Math.pow(t, e);
  }

  polyIn.exponent = custom;
  return polyIn;
}(exponent);
var polyOut = function custom(e) {
  e = +e;

  function polyOut(t) {
    return 1 - Math.pow(1 - t, e);
  }

  polyOut.exponent = custom;
  return polyOut;
}(exponent);
var polyInOut = function custom(e) {
  e = +e;

  function polyInOut(t) {
    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;
  }

  polyInOut.exponent = custom;
  return polyInOut;
}(exponent);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-ease/src/quad.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-ease/src/quad.js ***!
  \**************************************************************/
/*! exports provided: quadIn, quadOut, quadInOut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "quadIn", function() { return quadIn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "quadOut", function() { return quadOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "quadInOut", function() { return quadInOut; });
function quadIn(t) {
  return t * t;
}
function quadOut(t) {
  return t * (2 - t);
}
function quadInOut(t) {
  return ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-ease/src/sin.js":
/*!*************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-ease/src/sin.js ***!
  \*************************************************************/
/*! exports provided: sinIn, sinOut, sinInOut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sinIn", function() { return sinIn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sinOut", function() { return sinOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sinInOut", function() { return sinInOut; });
var pi = Math.PI,
    halfPi = pi / 2;
function sinIn(t) {
  return 1 - Math.cos(t * halfPi);
}
function sinOut(t) {
  return Math.sin(t * halfPi);
}
function sinInOut(t) {
  return (1 - Math.cos(pi * t)) / 2;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/defaultLocale.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/defaultLocale.js ***!
  \*************************************************************************/
/*! exports provided: format, formatPrefix, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "format", function() { return format; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatPrefix", function() { return formatPrefix; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return defaultLocale; });
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./locale */ "./packages/muze-utils/node_modules/d3-format/src/locale.js");

var locale;
var format;
var formatPrefix;
defaultLocale({
  decimal: ".",
  thousands: ",",
  grouping: [3],
  currency: ["$", ""]
});
function defaultLocale(definition) {
  locale = Object(_locale__WEBPACK_IMPORTED_MODULE_0__["default"])(definition);
  format = locale.format;
  formatPrefix = locale.formatPrefix;
  return locale;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/exponent.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/exponent.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _formatDecimal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./formatDecimal */ "./packages/muze-utils/node_modules/d3-format/src/formatDecimal.js");

/* harmony default export */ __webpack_exports__["default"] = (function (x) {
  return x = Object(_formatDecimal__WEBPACK_IMPORTED_MODULE_0__["default"])(Math.abs(x)), x ? x[1] : NaN;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/formatDecimal.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/formatDecimal.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
// Computes the decimal coefficient and exponent of the specified number x with
// significant digits p, where x is positive and p is in [1, 21] or undefined.
// For example, formatDecimal(1.23) returns ["123", 0].
/* harmony default export */ __webpack_exports__["default"] = (function (x, p) {
  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf("e")) < 0) return null; // NaN, ±Infinity

  var i,
      coefficient = x.slice(0, i); // The string returned by toExponential either has the form \d\.\d+e[-+]\d+
  // (e.g., 1.2e+3) or the form \de[-+]\d+ (e.g., 1e+3).

  return [coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient, +x.slice(i + 1)];
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/formatGroup.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/formatGroup.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (grouping, thousands) {
  return function (value, width) {
    var i = value.length,
        t = [],
        j = 0,
        g = grouping[0],
        length = 0;

    while (i > 0 && g > 0) {
      if (length + g + 1 > width) g = Math.max(1, width - length);
      t.push(value.substring(i -= g, i + g));
      if ((length += g + 1) > width) break;
      g = grouping[j = (j + 1) % grouping.length];
    }

    return t.reverse().join(thousands);
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/formatNumerals.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/formatNumerals.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (numerals) {
  return function (value) {
    return value.replace(/[0-9]/g, function (i) {
      return numerals[+i];
    });
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/formatPrefixAuto.js":
/*!****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/formatPrefixAuto.js ***!
  \****************************************************************************/
/*! exports provided: prefixExponent, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prefixExponent", function() { return prefixExponent; });
/* harmony import */ var _formatDecimal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./formatDecimal */ "./packages/muze-utils/node_modules/d3-format/src/formatDecimal.js");

var prefixExponent;
/* harmony default export */ __webpack_exports__["default"] = (function (x, p) {
  var d = Object(_formatDecimal__WEBPACK_IMPORTED_MODULE_0__["default"])(x, p);
  if (!d) return x + "";
  var coefficient = d[0],
      exponent = d[1],
      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,
      n = coefficient.length;
  return i === n ? coefficient : i > n ? coefficient + new Array(i - n + 1).join("0") : i > 0 ? coefficient.slice(0, i) + "." + coefficient.slice(i) : "0." + new Array(1 - i).join("0") + Object(_formatDecimal__WEBPACK_IMPORTED_MODULE_0__["default"])(x, Math.max(0, p + i - 1))[0]; // less than 1y!
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/formatRounded.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/formatRounded.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _formatDecimal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./formatDecimal */ "./packages/muze-utils/node_modules/d3-format/src/formatDecimal.js");

/* harmony default export */ __webpack_exports__["default"] = (function (x, p) {
  var d = Object(_formatDecimal__WEBPACK_IMPORTED_MODULE_0__["default"])(x, p);
  if (!d) return x + "";
  var coefficient = d[0],
      exponent = d[1];
  return exponent < 0 ? "0." + new Array(-exponent).join("0") + coefficient : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + "." + coefficient.slice(exponent + 1) : coefficient + new Array(exponent - coefficient.length + 2).join("0");
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/formatSpecifier.js":
/*!***************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/formatSpecifier.js ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return formatSpecifier; });
// [[fill]align][sign][symbol][0][width][,][.precision][~][type]
var re = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
function formatSpecifier(specifier) {
  return new FormatSpecifier(specifier);
}
formatSpecifier.prototype = FormatSpecifier.prototype; // instanceof

function FormatSpecifier(specifier) {
  if (!(match = re.exec(specifier))) throw new Error("invalid format: " + specifier);
  var match;
  this.fill = match[1] || " ";
  this.align = match[2] || ">";
  this.sign = match[3] || "-";
  this.symbol = match[4] || "";
  this.zero = !!match[5];
  this.width = match[6] && +match[6];
  this.comma = !!match[7];
  this.precision = match[8] && +match[8].slice(1);
  this.trim = !!match[9];
  this.type = match[10] || "";
}

FormatSpecifier.prototype.toString = function () {
  return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width == null ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision == null ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type;
};

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/formatTrim.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/formatTrim.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.
/* harmony default export */ __webpack_exports__["default"] = (function (s) {
  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {
    switch (s[i]) {
      case ".":
        i0 = i1 = i;
        break;

      case "0":
        if (i0 === 0) i0 = i;
        i1 = i;
        break;

      default:
        if (i0 > 0) {
          if (!+s[i]) break out;
          i0 = 0;
        }

        break;
    }
  }

  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/formatTypes.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/formatTypes.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _formatPrefixAuto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./formatPrefixAuto */ "./packages/muze-utils/node_modules/d3-format/src/formatPrefixAuto.js");
/* harmony import */ var _formatRounded__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./formatRounded */ "./packages/muze-utils/node_modules/d3-format/src/formatRounded.js");


/* harmony default export */ __webpack_exports__["default"] = ({
  "%": function _(x, p) {
    return (x * 100).toFixed(p);
  },
  "b": function b(x) {
    return Math.round(x).toString(2);
  },
  "c": function c(x) {
    return x + "";
  },
  "d": function d(x) {
    return Math.round(x).toString(10);
  },
  "e": function e(x, p) {
    return x.toExponential(p);
  },
  "f": function f(x, p) {
    return x.toFixed(p);
  },
  "g": function g(x, p) {
    return x.toPrecision(p);
  },
  "o": function o(x) {
    return Math.round(x).toString(8);
  },
  "p": function p(x, _p) {
    return Object(_formatRounded__WEBPACK_IMPORTED_MODULE_1__["default"])(x * 100, _p);
  },
  "r": _formatRounded__WEBPACK_IMPORTED_MODULE_1__["default"],
  "s": _formatPrefixAuto__WEBPACK_IMPORTED_MODULE_0__["default"],
  "X": function X(x) {
    return Math.round(x).toString(16).toUpperCase();
  },
  "x": function x(_x) {
    return Math.round(_x).toString(16);
  }
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/identity.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/identity.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (x) {
  return x;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/index.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/index.js ***!
  \*****************************************************************/
/*! exports provided: formatDefaultLocale, format, formatPrefix, formatLocale, formatSpecifier, precisionFixed, precisionPrefix, precisionRound */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _defaultLocale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaultLocale */ "./packages/muze-utils/node_modules/d3-format/src/defaultLocale.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "formatDefaultLocale", function() { return _defaultLocale__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "format", function() { return _defaultLocale__WEBPACK_IMPORTED_MODULE_0__["format"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "formatPrefix", function() { return _defaultLocale__WEBPACK_IMPORTED_MODULE_0__["formatPrefix"]; });

/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale */ "./packages/muze-utils/node_modules/d3-format/src/locale.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "formatLocale", function() { return _locale__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _formatSpecifier__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./formatSpecifier */ "./packages/muze-utils/node_modules/d3-format/src/formatSpecifier.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "formatSpecifier", function() { return _formatSpecifier__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _precisionFixed__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./precisionFixed */ "./packages/muze-utils/node_modules/d3-format/src/precisionFixed.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "precisionFixed", function() { return _precisionFixed__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _precisionPrefix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./precisionPrefix */ "./packages/muze-utils/node_modules/d3-format/src/precisionPrefix.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "precisionPrefix", function() { return _precisionPrefix__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _precisionRound__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./precisionRound */ "./packages/muze-utils/node_modules/d3-format/src/precisionRound.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "precisionRound", function() { return _precisionRound__WEBPACK_IMPORTED_MODULE_5__["default"]; });








/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/locale.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/locale.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exponent */ "./packages/muze-utils/node_modules/d3-format/src/exponent.js");
/* harmony import */ var _formatGroup__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./formatGroup */ "./packages/muze-utils/node_modules/d3-format/src/formatGroup.js");
/* harmony import */ var _formatNumerals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./formatNumerals */ "./packages/muze-utils/node_modules/d3-format/src/formatNumerals.js");
/* harmony import */ var _formatSpecifier__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./formatSpecifier */ "./packages/muze-utils/node_modules/d3-format/src/formatSpecifier.js");
/* harmony import */ var _formatTrim__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./formatTrim */ "./packages/muze-utils/node_modules/d3-format/src/formatTrim.js");
/* harmony import */ var _formatTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./formatTypes */ "./packages/muze-utils/node_modules/d3-format/src/formatTypes.js");
/* harmony import */ var _formatPrefixAuto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./formatPrefixAuto */ "./packages/muze-utils/node_modules/d3-format/src/formatPrefixAuto.js");
/* harmony import */ var _identity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./identity */ "./packages/muze-utils/node_modules/d3-format/src/identity.js");








var prefixes = ["y", "z", "a", "f", "p", "n", "µ", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"];
/* harmony default export */ __webpack_exports__["default"] = (function (locale) {
  var group = locale.grouping && locale.thousands ? Object(_formatGroup__WEBPACK_IMPORTED_MODULE_1__["default"])(locale.grouping, locale.thousands) : _identity__WEBPACK_IMPORTED_MODULE_7__["default"],
      currency = locale.currency,
      decimal = locale.decimal,
      numerals = locale.numerals ? Object(_formatNumerals__WEBPACK_IMPORTED_MODULE_2__["default"])(locale.numerals) : _identity__WEBPACK_IMPORTED_MODULE_7__["default"],
      percent = locale.percent || "%";

  function newFormat(specifier) {
    specifier = Object(_formatSpecifier__WEBPACK_IMPORTED_MODULE_3__["default"])(specifier);
    var fill = specifier.fill,
        align = specifier.align,
        sign = specifier.sign,
        symbol = specifier.symbol,
        zero = specifier.zero,
        width = specifier.width,
        comma = specifier.comma,
        precision = specifier.precision,
        trim = specifier.trim,
        type = specifier.type; // The "n" type is an alias for ",g".

    if (type === "n") comma = true, type = "g"; // The "" type, and any invalid type, is an alias for ".12~g".
    else if (!_formatTypes__WEBPACK_IMPORTED_MODULE_5__["default"][type]) precision == null && (precision = 12), trim = true, type = "g"; // If zero fill is specified, padding goes after sign and before digits.

    if (zero || fill === "0" && align === "=") zero = true, fill = "0", align = "="; // Compute the prefix and suffix.
    // For SI-prefix, the suffix is lazily computed.

    var prefix = symbol === "$" ? currency[0] : symbol === "#" && /[boxX]/.test(type) ? "0" + type.toLowerCase() : "",
        suffix = symbol === "$" ? currency[1] : /[%p]/.test(type) ? percent : ""; // What format function should we use?
    // Is this an integer type?
    // Can this type generate exponential notation?

    var formatType = _formatTypes__WEBPACK_IMPORTED_MODULE_5__["default"][type],
        maybeSuffix = /[defgprs%]/.test(type); // Set the default precision if not specified,
    // or clamp the specified precision to the supported range.
    // For significant precision, it must be in [1, 21].
    // For fixed precision, it must be in [0, 20].

    precision = precision == null ? 6 : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision)) : Math.max(0, Math.min(20, precision));

    function format(value) {
      var valuePrefix = prefix,
          valueSuffix = suffix,
          i,
          n,
          c;

      if (type === "c") {
        valueSuffix = formatType(value) + valueSuffix;
        value = "";
      } else {
        value = +value; // Perform the initial formatting.

        var valueNegative = value < 0;
        value = formatType(Math.abs(value), precision); // Trim insignificant zeros.

        if (trim) value = Object(_formatTrim__WEBPACK_IMPORTED_MODULE_4__["default"])(value); // If a negative value rounds to zero during formatting, treat as positive.

        if (valueNegative && +value === 0) valueNegative = false; // Compute the prefix and suffix.

        valuePrefix = (valueNegative ? sign === "(" ? sign : "-" : sign === "-" || sign === "(" ? "" : sign) + valuePrefix;
        valueSuffix = (type === "s" ? prefixes[8 + _formatPrefixAuto__WEBPACK_IMPORTED_MODULE_6__["prefixExponent"] / 3] : "") + valueSuffix + (valueNegative && sign === "(" ? ")" : ""); // Break the formatted value into the integer “value” part that can be
        // grouped, and fractional or exponential “suffix” part that is not.

        if (maybeSuffix) {
          i = -1, n = value.length;

          while (++i < n) {
            if (c = value.charCodeAt(i), 48 > c || c > 57) {
              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;
              value = value.slice(0, i);
              break;
            }
          }
        }
      } // If the fill character is not "0", grouping is applied before padding.


      if (comma && !zero) value = group(value, Infinity); // Compute the padding.

      var length = valuePrefix.length + value.length + valueSuffix.length,
          padding = length < width ? new Array(width - length + 1).join(fill) : ""; // If the fill character is "0", grouping is applied after padding.

      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = ""; // Reconstruct the final output based on the desired alignment.

      switch (align) {
        case "<":
          value = valuePrefix + value + valueSuffix + padding;
          break;

        case "=":
          value = valuePrefix + padding + value + valueSuffix;
          break;

        case "^":
          value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length);
          break;

        default:
          value = padding + valuePrefix + value + valueSuffix;
          break;
      }

      return numerals(value);
    }

    format.toString = function () {
      return specifier + "";
    };

    return format;
  }

  function formatPrefix(specifier, value) {
    var f = newFormat((specifier = Object(_formatSpecifier__WEBPACK_IMPORTED_MODULE_3__["default"])(specifier), specifier.type = "f", specifier)),
        e = Math.max(-8, Math.min(8, Math.floor(Object(_exponent__WEBPACK_IMPORTED_MODULE_0__["default"])(value) / 3))) * 3,
        k = Math.pow(10, -e),
        prefix = prefixes[8 + e / 3];
    return function (value) {
      return f(k * value) + prefix;
    };
  }

  return {
    format: newFormat,
    formatPrefix: formatPrefix
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/precisionFixed.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/precisionFixed.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exponent */ "./packages/muze-utils/node_modules/d3-format/src/exponent.js");

/* harmony default export */ __webpack_exports__["default"] = (function (step) {
  return Math.max(0, -Object(_exponent__WEBPACK_IMPORTED_MODULE_0__["default"])(Math.abs(step)));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/precisionPrefix.js":
/*!***************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/precisionPrefix.js ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exponent */ "./packages/muze-utils/node_modules/d3-format/src/exponent.js");

/* harmony default export */ __webpack_exports__["default"] = (function (step, value) {
  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(Object(_exponent__WEBPACK_IMPORTED_MODULE_0__["default"])(value) / 3))) * 3 - Object(_exponent__WEBPACK_IMPORTED_MODULE_0__["default"])(Math.abs(step)));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-format/src/precisionRound.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-format/src/precisionRound.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exponent */ "./packages/muze-utils/node_modules/d3-format/src/exponent.js");

/* harmony default export */ __webpack_exports__["default"] = (function (step, max) {
  step = Math.abs(step), max = Math.abs(max) - step;
  return Math.max(0, Object(_exponent__WEBPACK_IMPORTED_MODULE_0__["default"])(max) - Object(_exponent__WEBPACK_IMPORTED_MODULE_0__["default"])(step)) + 1;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/array.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/array.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./value */ "./packages/muze-utils/node_modules/d3-interpolate/src/value.js");

/* harmony default export */ __webpack_exports__["default"] = (function (a, b) {
  var nb = b ? b.length : 0,
      na = a ? Math.min(nb, a.length) : 0,
      x = new Array(na),
      c = new Array(nb),
      i;

  for (i = 0; i < na; ++i) {
    x[i] = Object(_value__WEBPACK_IMPORTED_MODULE_0__["default"])(a[i], b[i]);
  }

  for (; i < nb; ++i) {
    c[i] = b[i];
  }

  return function (t) {
    for (i = 0; i < na; ++i) {
      c[i] = x[i](t);
    }

    return c;
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/basis.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/basis.js ***!
  \**********************************************************************/
/*! exports provided: basis, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "basis", function() { return basis; });
function basis(t1, v0, v1, v2, v3) {
  var t2 = t1 * t1,
      t3 = t2 * t1;
  return ((1 - 3 * t1 + 3 * t2 - t3) * v0 + (4 - 6 * t2 + 3 * t3) * v1 + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2 + t3 * v3) / 6;
}
/* harmony default export */ __webpack_exports__["default"] = (function (values) {
  var n = values.length - 1;
  return function (t) {
    var i = t <= 0 ? t = 0 : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),
        v1 = values[i],
        v2 = values[i + 1],
        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,
        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;
    return basis((t - i / n) * n, v0, v1, v2, v3);
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/basisClosed.js":
/*!****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/basisClosed.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _basis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basis */ "./packages/muze-utils/node_modules/d3-interpolate/src/basis.js");

/* harmony default export */ __webpack_exports__["default"] = (function (values) {
  var n = values.length;
  return function (t) {
    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),
        v0 = values[(i + n - 1) % n],
        v1 = values[i % n],
        v2 = values[(i + 1) % n],
        v3 = values[(i + 2) % n];
    return Object(_basis__WEBPACK_IMPORTED_MODULE_0__["basis"])((t - i / n) * n, v0, v1, v2, v3);
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/color.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/color.js ***!
  \**********************************************************************/
/*! exports provided: hue, gamma, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hue", function() { return hue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "gamma", function() { return gamma; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return nogamma; });
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constant */ "./packages/muze-utils/node_modules/d3-interpolate/src/constant.js");


function linear(a, d) {
  return function (t) {
    return a + t * d;
  };
}

function exponential(a, b, y) {
  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function (t) {
    return Math.pow(a + t * b, y);
  };
}

function hue(a, b) {
  var d = b - a;
  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : Object(_constant__WEBPACK_IMPORTED_MODULE_0__["default"])(isNaN(a) ? b : a);
}
function gamma(y) {
  return (y = +y) === 1 ? nogamma : function (a, b) {
    return b - a ? exponential(a, b, y) : Object(_constant__WEBPACK_IMPORTED_MODULE_0__["default"])(isNaN(a) ? b : a);
  };
}
function nogamma(a, b) {
  var d = b - a;
  return d ? linear(a, d) : Object(_constant__WEBPACK_IMPORTED_MODULE_0__["default"])(isNaN(a) ? b : a);
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/constant.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/constant.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (x) {
  return function () {
    return x;
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/cubehelix.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/cubehelix.js ***!
  \**************************************************************************/
/*! exports provided: default, cubehelixLong */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cubehelixLong", function() { return cubehelixLong; });
/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ "./packages/muze-utils/node_modules/d3-color/src/index.js");
/* harmony import */ var _color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color */ "./packages/muze-utils/node_modules/d3-interpolate/src/color.js");



function cubehelix(hue) {
  return function cubehelixGamma(y) {
    y = +y;

    function cubehelix(start, end) {
      var h = hue((start = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])(start)).h, (end = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])(end)).h),
          s = Object(_color__WEBPACK_IMPORTED_MODULE_1__["default"])(start.s, end.s),
          l = Object(_color__WEBPACK_IMPORTED_MODULE_1__["default"])(start.l, end.l),
          opacity = Object(_color__WEBPACK_IMPORTED_MODULE_1__["default"])(start.opacity, end.opacity);
      return function (t) {
        start.h = h(t);
        start.s = s(t);
        start.l = l(Math.pow(t, y));
        start.opacity = opacity(t);
        return start + "";
      };
    }

    cubehelix.gamma = cubehelixGamma;
    return cubehelix;
  }(1);
}

/* harmony default export */ __webpack_exports__["default"] = (cubehelix(_color__WEBPACK_IMPORTED_MODULE_1__["hue"]));
var cubehelixLong = cubehelix(_color__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/date.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/date.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (a, b) {
  var d = new Date();
  return a = +a, b -= a, function (t) {
    return d.setTime(a + b * t), d;
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/discrete.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/discrete.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (range) {
  var n = range.length;
  return function (t) {
    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/hcl.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/hcl.js ***!
  \********************************************************************/
/*! exports provided: default, hclLong */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hclLong", function() { return hclLong; });
/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ "./packages/muze-utils/node_modules/d3-color/src/index.js");
/* harmony import */ var _color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color */ "./packages/muze-utils/node_modules/d3-interpolate/src/color.js");



function hcl(hue) {
  return function (start, end) {
    var h = hue((start = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["hcl"])(start)).h, (end = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["hcl"])(end)).h),
        c = Object(_color__WEBPACK_IMPORTED_MODULE_1__["default"])(start.c, end.c),
        l = Object(_color__WEBPACK_IMPORTED_MODULE_1__["default"])(start.l, end.l),
        opacity = Object(_color__WEBPACK_IMPORTED_MODULE_1__["default"])(start.opacity, end.opacity);
    return function (t) {
      start.h = h(t);
      start.c = c(t);
      start.l = l(t);
      start.opacity = opacity(t);
      return start + "";
    };
  };
}

/* harmony default export */ __webpack_exports__["default"] = (hcl(_color__WEBPACK_IMPORTED_MODULE_1__["hue"]));
var hclLong = hcl(_color__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/hsl.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/hsl.js ***!
  \********************************************************************/
/*! exports provided: default, hslLong */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hslLong", function() { return hslLong; });
/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ "./packages/muze-utils/node_modules/d3-color/src/index.js");
/* harmony import */ var _color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color */ "./packages/muze-utils/node_modules/d3-interpolate/src/color.js");



function hsl(hue) {
  return function (start, end) {
    var h = hue((start = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["hsl"])(start)).h, (end = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["hsl"])(end)).h),
        s = Object(_color__WEBPACK_IMPORTED_MODULE_1__["default"])(start.s, end.s),
        l = Object(_color__WEBPACK_IMPORTED_MODULE_1__["default"])(start.l, end.l),
        opacity = Object(_color__WEBPACK_IMPORTED_MODULE_1__["default"])(start.opacity, end.opacity);
    return function (t) {
      start.h = h(t);
      start.s = s(t);
      start.l = l(t);
      start.opacity = opacity(t);
      return start + "";
    };
  };
}

/* harmony default export */ __webpack_exports__["default"] = (hsl(_color__WEBPACK_IMPORTED_MODULE_1__["hue"]));
var hslLong = hsl(_color__WEBPACK_IMPORTED_MODULE_1__["default"]);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/hue.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/hue.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./color */ "./packages/muze-utils/node_modules/d3-interpolate/src/color.js");

/* harmony default export */ __webpack_exports__["default"] = (function (a, b) {
  var i = Object(_color__WEBPACK_IMPORTED_MODULE_0__["hue"])(+a, +b);
  return function (t) {
    var x = i(t);
    return x - 360 * Math.floor(x / 360);
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/index.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/index.js ***!
  \**********************************************************************/
/*! exports provided: interpolate, interpolateArray, interpolateBasis, interpolateBasisClosed, interpolateDate, interpolateDiscrete, interpolateHue, interpolateNumber, interpolateObject, interpolateRound, interpolateString, interpolateTransformCss, interpolateTransformSvg, interpolateZoom, interpolateRgb, interpolateRgbBasis, interpolateRgbBasisClosed, interpolateHsl, interpolateHslLong, interpolateLab, interpolateHcl, interpolateHclLong, interpolateCubehelix, interpolateCubehelixLong, piecewise, quantize */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./value */ "./packages/muze-utils/node_modules/d3-interpolate/src/value.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolate", function() { return _value__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./array */ "./packages/muze-utils/node_modules/d3-interpolate/src/array.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateArray", function() { return _array__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _basis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./basis */ "./packages/muze-utils/node_modules/d3-interpolate/src/basis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateBasis", function() { return _basis__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _basisClosed__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./basisClosed */ "./packages/muze-utils/node_modules/d3-interpolate/src/basisClosed.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateBasisClosed", function() { return _basisClosed__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _date__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./date */ "./packages/muze-utils/node_modules/d3-interpolate/src/date.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateDate", function() { return _date__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _discrete__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./discrete */ "./packages/muze-utils/node_modules/d3-interpolate/src/discrete.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateDiscrete", function() { return _discrete__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _hue__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./hue */ "./packages/muze-utils/node_modules/d3-interpolate/src/hue.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateHue", function() { return _hue__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _number__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./number */ "./packages/muze-utils/node_modules/d3-interpolate/src/number.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateNumber", function() { return _number__WEBPACK_IMPORTED_MODULE_7__["default"]; });

/* harmony import */ var _object__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./object */ "./packages/muze-utils/node_modules/d3-interpolate/src/object.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateObject", function() { return _object__WEBPACK_IMPORTED_MODULE_8__["default"]; });

/* harmony import */ var _round__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./round */ "./packages/muze-utils/node_modules/d3-interpolate/src/round.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRound", function() { return _round__WEBPACK_IMPORTED_MODULE_9__["default"]; });

/* harmony import */ var _string__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./string */ "./packages/muze-utils/node_modules/d3-interpolate/src/string.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateString", function() { return _string__WEBPACK_IMPORTED_MODULE_10__["default"]; });

/* harmony import */ var _transform_index__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./transform/index */ "./packages/muze-utils/node_modules/d3-interpolate/src/transform/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateTransformCss", function() { return _transform_index__WEBPACK_IMPORTED_MODULE_11__["interpolateTransformCss"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateTransformSvg", function() { return _transform_index__WEBPACK_IMPORTED_MODULE_11__["interpolateTransformSvg"]; });

/* harmony import */ var _zoom__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./zoom */ "./packages/muze-utils/node_modules/d3-interpolate/src/zoom.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateZoom", function() { return _zoom__WEBPACK_IMPORTED_MODULE_12__["default"]; });

/* harmony import */ var _rgb__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./rgb */ "./packages/muze-utils/node_modules/d3-interpolate/src/rgb.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRgb", function() { return _rgb__WEBPACK_IMPORTED_MODULE_13__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRgbBasis", function() { return _rgb__WEBPACK_IMPORTED_MODULE_13__["rgbBasis"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRgbBasisClosed", function() { return _rgb__WEBPACK_IMPORTED_MODULE_13__["rgbBasisClosed"]; });

/* harmony import */ var _hsl__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./hsl */ "./packages/muze-utils/node_modules/d3-interpolate/src/hsl.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateHsl", function() { return _hsl__WEBPACK_IMPORTED_MODULE_14__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateHslLong", function() { return _hsl__WEBPACK_IMPORTED_MODULE_14__["hslLong"]; });

/* harmony import */ var _lab__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./lab */ "./packages/muze-utils/node_modules/d3-interpolate/src/lab.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateLab", function() { return _lab__WEBPACK_IMPORTED_MODULE_15__["default"]; });

/* harmony import */ var _hcl__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./hcl */ "./packages/muze-utils/node_modules/d3-interpolate/src/hcl.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateHcl", function() { return _hcl__WEBPACK_IMPORTED_MODULE_16__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateHclLong", function() { return _hcl__WEBPACK_IMPORTED_MODULE_16__["hclLong"]; });

/* harmony import */ var _cubehelix__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./cubehelix */ "./packages/muze-utils/node_modules/d3-interpolate/src/cubehelix.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateCubehelix", function() { return _cubehelix__WEBPACK_IMPORTED_MODULE_17__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateCubehelixLong", function() { return _cubehelix__WEBPACK_IMPORTED_MODULE_17__["cubehelixLong"]; });

/* harmony import */ var _piecewise__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./piecewise */ "./packages/muze-utils/node_modules/d3-interpolate/src/piecewise.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "piecewise", function() { return _piecewise__WEBPACK_IMPORTED_MODULE_18__["default"]; });

/* harmony import */ var _quantize__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./quantize */ "./packages/muze-utils/node_modules/d3-interpolate/src/quantize.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "quantize", function() { return _quantize__WEBPACK_IMPORTED_MODULE_19__["default"]; });






















/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/lab.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/lab.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return lab; });
/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ "./packages/muze-utils/node_modules/d3-color/src/index.js");
/* harmony import */ var _color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color */ "./packages/muze-utils/node_modules/d3-interpolate/src/color.js");


function lab(start, end) {
  var l = Object(_color__WEBPACK_IMPORTED_MODULE_1__["default"])((start = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["lab"])(start)).l, (end = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["lab"])(end)).l),
      a = Object(_color__WEBPACK_IMPORTED_MODULE_1__["default"])(start.a, end.a),
      b = Object(_color__WEBPACK_IMPORTED_MODULE_1__["default"])(start.b, end.b),
      opacity = Object(_color__WEBPACK_IMPORTED_MODULE_1__["default"])(start.opacity, end.opacity);
  return function (t) {
    start.l = l(t);
    start.a = a(t);
    start.b = b(t);
    start.opacity = opacity(t);
    return start + "";
  };
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/number.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/number.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (a, b) {
  return a = +a, b -= a, function (t) {
    return a + b * t;
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/object.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/object.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./value */ "./packages/muze-utils/node_modules/d3-interpolate/src/value.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }


/* harmony default export */ __webpack_exports__["default"] = (function (a, b) {
  var i = {},
      c = {},
      k;
  if (a === null || _typeof(a) !== "object") a = {};
  if (b === null || _typeof(b) !== "object") b = {};

  for (k in b) {
    if (k in a) {
      i[k] = Object(_value__WEBPACK_IMPORTED_MODULE_0__["default"])(a[k], b[k]);
    } else {
      c[k] = b[k];
    }
  }

  return function (t) {
    for (k in i) {
      c[k] = i[k](t);
    }

    return c;
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/piecewise.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/piecewise.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return piecewise; });
function piecewise(interpolate, values) {
  var i = 0,
      n = values.length - 1,
      v = values[0],
      I = new Array(n < 0 ? 0 : n);

  while (i < n) {
    I[i] = interpolate(v, v = values[++i]);
  }

  return function (t) {
    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));
    return I[i](t - i);
  };
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/quantize.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/quantize.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (interpolator, n) {
  var samples = new Array(n);

  for (var i = 0; i < n; ++i) {
    samples[i] = interpolator(i / (n - 1));
  }

  return samples;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/rgb.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/rgb.js ***!
  \********************************************************************/
/*! exports provided: default, rgbBasis, rgbBasisClosed */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rgbBasis", function() { return rgbBasis; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rgbBasisClosed", function() { return rgbBasisClosed; });
/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ "./packages/muze-utils/node_modules/d3-color/src/index.js");
/* harmony import */ var _basis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./basis */ "./packages/muze-utils/node_modules/d3-interpolate/src/basis.js");
/* harmony import */ var _basisClosed__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./basisClosed */ "./packages/muze-utils/node_modules/d3-interpolate/src/basisClosed.js");
/* harmony import */ var _color__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./color */ "./packages/muze-utils/node_modules/d3-interpolate/src/color.js");




/* harmony default export */ __webpack_exports__["default"] = ((function rgbGamma(y) {
  var color = Object(_color__WEBPACK_IMPORTED_MODULE_3__["gamma"])(y);

  function rgb(start, end) {
    var r = color((start = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["rgb"])(start)).r, (end = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["rgb"])(end)).r),
        g = color(start.g, end.g),
        b = color(start.b, end.b),
        opacity = Object(_color__WEBPACK_IMPORTED_MODULE_3__["default"])(start.opacity, end.opacity);
    return function (t) {
      start.r = r(t);
      start.g = g(t);
      start.b = b(t);
      start.opacity = opacity(t);
      return start + "";
    };
  }

  rgb.gamma = rgbGamma;
  return rgb;
})(1));

function rgbSpline(spline) {
  return function (colors) {
    var n = colors.length,
        r = new Array(n),
        g = new Array(n),
        b = new Array(n),
        i,
        color;

    for (i = 0; i < n; ++i) {
      color = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["rgb"])(colors[i]);
      r[i] = color.r || 0;
      g[i] = color.g || 0;
      b[i] = color.b || 0;
    }

    r = spline(r);
    g = spline(g);
    b = spline(b);
    color.opacity = 1;
    return function (t) {
      color.r = r(t);
      color.g = g(t);
      color.b = b(t);
      return color + "";
    };
  };
}

var rgbBasis = rgbSpline(_basis__WEBPACK_IMPORTED_MODULE_1__["default"]);
var rgbBasisClosed = rgbSpline(_basisClosed__WEBPACK_IMPORTED_MODULE_2__["default"]);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/round.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/round.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (a, b) {
  return a = +a, b -= a, function (t) {
    return Math.round(a + b * t);
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/string.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/string.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _number__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./number */ "./packages/muze-utils/node_modules/d3-interpolate/src/number.js");

var reA = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
    reB = new RegExp(reA.source, "g");

function zero(b) {
  return function () {
    return b;
  };
}

function one(b) {
  return function (t) {
    return b(t) + "";
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (a, b) {
  var bi = reA.lastIndex = reB.lastIndex = 0,
      // scan index for next number in b
  am,
      // current match in a
  bm,
      // current match in b
  bs,
      // string preceding current number in b, if any
  i = -1,
      // index in s
  s = [],
      // string constants and placeholders
  q = []; // number interpolators
  // Coerce inputs to strings.

  a = a + "", b = b + ""; // Interpolate pairs of numbers in a & b.

  while ((am = reA.exec(a)) && (bm = reB.exec(b))) {
    if ((bs = bm.index) > bi) {
      // a string precedes the next number in b
      bs = b.slice(bi, bs);
      if (s[i]) s[i] += bs; // coalesce with previous string
      else s[++i] = bs;
    }

    if ((am = am[0]) === (bm = bm[0])) {
      // numbers in a & b match
      if (s[i]) s[i] += bm; // coalesce with previous string
      else s[++i] = bm;
    } else {
      // interpolate non-matching numbers
      s[++i] = null;
      q.push({
        i: i,
        x: Object(_number__WEBPACK_IMPORTED_MODULE_0__["default"])(am, bm)
      });
    }

    bi = reB.lastIndex;
  } // Add remains of b.


  if (bi < b.length) {
    bs = b.slice(bi);
    if (s[i]) s[i] += bs; // coalesce with previous string
    else s[++i] = bs;
  } // Special optimization for only a single match.
  // Otherwise, interpolate each of the numbers and rejoin the string.


  return s.length < 2 ? q[0] ? one(q[0].x) : zero(b) : (b = q.length, function (t) {
    for (var i = 0, o; i < b; ++i) {
      s[(o = q[i]).i] = o.x(t);
    }

    return s.join("");
  });
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/transform/decompose.js":
/*!************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/transform/decompose.js ***!
  \************************************************************************************/
/*! exports provided: identity, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "identity", function() { return identity; });
var degrees = 180 / Math.PI;
var identity = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
/* harmony default export */ __webpack_exports__["default"] = (function (a, b, c, d, e, f) {
  var scaleX, scaleY, skewX;
  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;
  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;
  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;
  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;
  return {
    translateX: e,
    translateY: f,
    rotate: Math.atan2(b, a) * degrees,
    skewX: Math.atan(skewX) * degrees,
    scaleX: scaleX,
    scaleY: scaleY
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/transform/index.js":
/*!********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/transform/index.js ***!
  \********************************************************************************/
/*! exports provided: interpolateTransformCss, interpolateTransformSvg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "interpolateTransformCss", function() { return interpolateTransformCss; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "interpolateTransformSvg", function() { return interpolateTransformSvg; });
/* harmony import */ var _number__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../number */ "./packages/muze-utils/node_modules/d3-interpolate/src/number.js");
/* harmony import */ var _parse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parse */ "./packages/muze-utils/node_modules/d3-interpolate/src/transform/parse.js");



function interpolateTransform(parse, pxComma, pxParen, degParen) {
  function pop(s) {
    return s.length ? s.pop() + " " : "";
  }

  function translate(xa, ya, xb, yb, s, q) {
    if (xa !== xb || ya !== yb) {
      var i = s.push("translate(", null, pxComma, null, pxParen);
      q.push({
        i: i - 4,
        x: Object(_number__WEBPACK_IMPORTED_MODULE_0__["default"])(xa, xb)
      }, {
        i: i - 2,
        x: Object(_number__WEBPACK_IMPORTED_MODULE_0__["default"])(ya, yb)
      });
    } else if (xb || yb) {
      s.push("translate(" + xb + pxComma + yb + pxParen);
    }
  }

  function rotate(a, b, s, q) {
    if (a !== b) {
      if (a - b > 180) b += 360;else if (b - a > 180) a += 360; // shortest path

      q.push({
        i: s.push(pop(s) + "rotate(", null, degParen) - 2,
        x: Object(_number__WEBPACK_IMPORTED_MODULE_0__["default"])(a, b)
      });
    } else if (b) {
      s.push(pop(s) + "rotate(" + b + degParen);
    }
  }

  function skewX(a, b, s, q) {
    if (a !== b) {
      q.push({
        i: s.push(pop(s) + "skewX(", null, degParen) - 2,
        x: Object(_number__WEBPACK_IMPORTED_MODULE_0__["default"])(a, b)
      });
    } else if (b) {
      s.push(pop(s) + "skewX(" + b + degParen);
    }
  }

  function scale(xa, ya, xb, yb, s, q) {
    if (xa !== xb || ya !== yb) {
      var i = s.push(pop(s) + "scale(", null, ",", null, ")");
      q.push({
        i: i - 4,
        x: Object(_number__WEBPACK_IMPORTED_MODULE_0__["default"])(xa, xb)
      }, {
        i: i - 2,
        x: Object(_number__WEBPACK_IMPORTED_MODULE_0__["default"])(ya, yb)
      });
    } else if (xb !== 1 || yb !== 1) {
      s.push(pop(s) + "scale(" + xb + "," + yb + ")");
    }
  }

  return function (a, b) {
    var s = [],
        // string constants and placeholders
    q = []; // number interpolators

    a = parse(a), b = parse(b);
    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);
    rotate(a.rotate, b.rotate, s, q);
    skewX(a.skewX, b.skewX, s, q);
    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);
    a = b = null; // gc

    return function (t) {
      var i = -1,
          n = q.length,
          o;

      while (++i < n) {
        s[(o = q[i]).i] = o.x(t);
      }

      return s.join("");
    };
  };
}

var interpolateTransformCss = interpolateTransform(_parse__WEBPACK_IMPORTED_MODULE_1__["parseCss"], "px, ", "px)", "deg)");
var interpolateTransformSvg = interpolateTransform(_parse__WEBPACK_IMPORTED_MODULE_1__["parseSvg"], ", ", ")", ")");

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/transform/parse.js":
/*!********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/transform/parse.js ***!
  \********************************************************************************/
/*! exports provided: parseCss, parseSvg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseCss", function() { return parseCss; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseSvg", function() { return parseSvg; });
/* harmony import */ var _decompose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./decompose */ "./packages/muze-utils/node_modules/d3-interpolate/src/transform/decompose.js");

var cssNode, cssRoot, cssView, svgNode;
function parseCss(value) {
  if (value === "none") return _decompose__WEBPACK_IMPORTED_MODULE_0__["identity"];
  if (!cssNode) cssNode = document.createElement("DIV"), cssRoot = document.documentElement, cssView = document.defaultView;
  cssNode.style.transform = value;
  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue("transform");
  cssRoot.removeChild(cssNode);
  value = value.slice(7, -1).split(",");
  return Object(_decompose__WEBPACK_IMPORTED_MODULE_0__["default"])(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);
}
function parseSvg(value) {
  if (value == null) return _decompose__WEBPACK_IMPORTED_MODULE_0__["identity"];
  if (!svgNode) svgNode = document.createElementNS("http://www.w3.org/2000/svg", "g");
  svgNode.setAttribute("transform", value);
  if (!(value = svgNode.transform.baseVal.consolidate())) return _decompose__WEBPACK_IMPORTED_MODULE_0__["identity"];
  value = value.matrix;
  return Object(_decompose__WEBPACK_IMPORTED_MODULE_0__["default"])(value.a, value.b, value.c, value.d, value.e, value.f);
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/value.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/value.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ "./packages/muze-utils/node_modules/d3-color/src/index.js");
/* harmony import */ var _rgb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rgb */ "./packages/muze-utils/node_modules/d3-interpolate/src/rgb.js");
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./array */ "./packages/muze-utils/node_modules/d3-interpolate/src/array.js");
/* harmony import */ var _date__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./date */ "./packages/muze-utils/node_modules/d3-interpolate/src/date.js");
/* harmony import */ var _number__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./number */ "./packages/muze-utils/node_modules/d3-interpolate/src/number.js");
/* harmony import */ var _object__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./object */ "./packages/muze-utils/node_modules/d3-interpolate/src/object.js");
/* harmony import */ var _string__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./string */ "./packages/muze-utils/node_modules/d3-interpolate/src/string.js");
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./constant */ "./packages/muze-utils/node_modules/d3-interpolate/src/constant.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }









/* harmony default export */ __webpack_exports__["default"] = (function (a, b) {
  var t = _typeof(b),
      c;

  return b == null || t === "boolean" ? Object(_constant__WEBPACK_IMPORTED_MODULE_7__["default"])(b) : (t === "number" ? _number__WEBPACK_IMPORTED_MODULE_4__["default"] : t === "string" ? (c = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["color"])(b)) ? (b = c, _rgb__WEBPACK_IMPORTED_MODULE_1__["default"]) : _string__WEBPACK_IMPORTED_MODULE_6__["default"] : b instanceof d3_color__WEBPACK_IMPORTED_MODULE_0__["color"] ? _rgb__WEBPACK_IMPORTED_MODULE_1__["default"] : b instanceof Date ? _date__WEBPACK_IMPORTED_MODULE_3__["default"] : Array.isArray(b) ? _array__WEBPACK_IMPORTED_MODULE_2__["default"] : typeof b.valueOf !== "function" && typeof b.toString !== "function" || isNaN(b) ? _object__WEBPACK_IMPORTED_MODULE_5__["default"] : _number__WEBPACK_IMPORTED_MODULE_4__["default"])(a, b);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-interpolate/src/zoom.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-interpolate/src/zoom.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var rho = Math.SQRT2,
    rho2 = 2,
    rho4 = 4,
    epsilon2 = 1e-12;

function cosh(x) {
  return ((x = Math.exp(x)) + 1 / x) / 2;
}

function sinh(x) {
  return ((x = Math.exp(x)) - 1 / x) / 2;
}

function tanh(x) {
  return ((x = Math.exp(2 * x)) - 1) / (x + 1);
} // p0 = [ux0, uy0, w0]
// p1 = [ux1, uy1, w1]


/* harmony default export */ __webpack_exports__["default"] = (function (p0, p1) {
  var ux0 = p0[0],
      uy0 = p0[1],
      w0 = p0[2],
      ux1 = p1[0],
      uy1 = p1[1],
      w1 = p1[2],
      dx = ux1 - ux0,
      dy = uy1 - uy0,
      d2 = dx * dx + dy * dy,
      i,
      S; // Special case for u0 ≅ u1.

  if (d2 < epsilon2) {
    S = Math.log(w1 / w0) / rho;

    i = function i(t) {
      return [ux0 + t * dx, uy0 + t * dy, w0 * Math.exp(rho * t * S)];
    };
  } // General case.
  else {
      var d1 = Math.sqrt(d2),
          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),
          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),
          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),
          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);
      S = (r1 - r0) / rho;

      i = function i(t) {
        var s = t * S,
            coshr0 = cosh(r0),
            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));
        return [ux0 + u * dx, uy0 + u * dy, w0 * coshr0 / cosh(rho * s + r0)];
      };
    }

  i.duration = S * 1000;
  return i;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-path/src/index.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-path/src/index.js ***!
  \***************************************************************/
/*! exports provided: path */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./path */ "./packages/muze-utils/node_modules/d3-path/src/path.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "path", function() { return _path__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-path/src/path.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-path/src/path.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var pi = Math.PI,
    tau = 2 * pi,
    epsilon = 1e-6,
    tauEpsilon = tau - epsilon;

function Path() {
  this._x0 = this._y0 = // start of current subpath
  this._x1 = this._y1 = null; // end of current subpath

  this._ = "";
}

function path() {
  return new Path();
}

Path.prototype = path.prototype = {
  constructor: Path,
  moveTo: function moveTo(x, y) {
    this._ += "M" + (this._x0 = this._x1 = +x) + "," + (this._y0 = this._y1 = +y);
  },
  closePath: function closePath() {
    if (this._x1 !== null) {
      this._x1 = this._x0, this._y1 = this._y0;
      this._ += "Z";
    }
  },
  lineTo: function lineTo(x, y) {
    this._ += "L" + (this._x1 = +x) + "," + (this._y1 = +y);
  },
  quadraticCurveTo: function quadraticCurveTo(x1, y1, x, y) {
    this._ += "Q" + +x1 + "," + +y1 + "," + (this._x1 = +x) + "," + (this._y1 = +y);
  },
  bezierCurveTo: function bezierCurveTo(x1, y1, x2, y2, x, y) {
    this._ += "C" + +x1 + "," + +y1 + "," + +x2 + "," + +y2 + "," + (this._x1 = +x) + "," + (this._y1 = +y);
  },
  arcTo: function arcTo(x1, y1, x2, y2, r) {
    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;
    var x0 = this._x1,
        y0 = this._y1,
        x21 = x2 - x1,
        y21 = y2 - y1,
        x01 = x0 - x1,
        y01 = y0 - y1,
        l01_2 = x01 * x01 + y01 * y01; // Is the radius negative? Error.

    if (r < 0) throw new Error("negative radius: " + r); // Is this path empty? Move to (x1,y1).

    if (this._x1 === null) {
      this._ += "M" + (this._x1 = x1) + "," + (this._y1 = y1);
    } // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.
    else if (!(l01_2 > epsilon)) ; // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?
      // Equivalently, is (x1,y1) coincident with (x2,y2)?
      // Or, is the radius zero? Line to (x1,y1).
      else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {
          this._ += "L" + (this._x1 = x1) + "," + (this._y1 = y1);
        } // Otherwise, draw an arc!
        else {
            var x20 = x2 - x0,
                y20 = y2 - y0,
                l21_2 = x21 * x21 + y21 * y21,
                l20_2 = x20 * x20 + y20 * y20,
                l21 = Math.sqrt(l21_2),
                l01 = Math.sqrt(l01_2),
                l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),
                t01 = l / l01,
                t21 = l / l21; // If the start tangent is not coincident with (x0,y0), line to.

            if (Math.abs(t01 - 1) > epsilon) {
              this._ += "L" + (x1 + t01 * x01) + "," + (y1 + t01 * y01);
            }

            this._ += "A" + r + "," + r + ",0,0," + +(y01 * x20 > x01 * y20) + "," + (this._x1 = x1 + t21 * x21) + "," + (this._y1 = y1 + t21 * y21);
          }
  },
  arc: function arc(x, y, r, a0, a1, ccw) {
    x = +x, y = +y, r = +r;
    var dx = r * Math.cos(a0),
        dy = r * Math.sin(a0),
        x0 = x + dx,
        y0 = y + dy,
        cw = 1 ^ ccw,
        da = ccw ? a0 - a1 : a1 - a0; // Is the radius negative? Error.

    if (r < 0) throw new Error("negative radius: " + r); // Is this path empty? Move to (x0,y0).

    if (this._x1 === null) {
      this._ += "M" + x0 + "," + y0;
    } // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).
    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {
        this._ += "L" + x0 + "," + y0;
      } // Is this arc empty? We’re done.


    if (!r) return; // Does the angle go the wrong way? Flip the direction.

    if (da < 0) da = da % tau + tau; // Is this a complete circle? Draw two arcs to complete the circle.

    if (da > tauEpsilon) {
      this._ += "A" + r + "," + r + ",0,1," + cw + "," + (x - dx) + "," + (y - dy) + "A" + r + "," + r + ",0,1," + cw + "," + (this._x1 = x0) + "," + (this._y1 = y0);
    } // Is this arc non-empty? Draw an arc!
    else if (da > epsilon) {
        this._ += "A" + r + "," + r + ",0," + +(da >= pi) + "," + cw + "," + (this._x1 = x + r * Math.cos(a1)) + "," + (this._y1 = y + r * Math.sin(a1));
      }
  },
  rect: function rect(x, y, w, h) {
    this._ += "M" + (this._x0 = this._x1 = +x) + "," + (this._y0 = this._y1 = +y) + "h" + +w + "v" + +h + "h" + -w + "Z";
  },
  toString: function toString() {
    return this._;
  }
};
/* harmony default export */ __webpack_exports__["default"] = (path);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Accent.js":
/*!***************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Accent.js ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");

/* harmony default export */ __webpack_exports__["default"] = (Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Dark2.js":
/*!**************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Dark2.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");

/* harmony default export */ __webpack_exports__["default"] = (Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Paired.js":
/*!***************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Paired.js ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");

/* harmony default export */ __webpack_exports__["default"] = (Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Pastel1.js":
/*!****************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Pastel1.js ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");

/* harmony default export */ __webpack_exports__["default"] = (Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Pastel2.js":
/*!****************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Pastel2.js ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");

/* harmony default export */ __webpack_exports__["default"] = (Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set1.js":
/*!*************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set1.js ***!
  \*************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");

/* harmony default export */ __webpack_exports__["default"] = (Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set2.js":
/*!*************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set2.js ***!
  \*************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");

/* harmony default export */ __webpack_exports__["default"] = (Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set3.js":
/*!*************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set3.js ***!
  \*************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");

/* harmony default export */ __webpack_exports__["default"] = (Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/category10.js":
/*!*******************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/category10.js ***!
  \*******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");

/* harmony default export */ __webpack_exports__["default"] = (Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js":
/*!***************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (specifier) {
  var n = specifier.length / 6 | 0,
      colors = new Array(n),
      i = 0;

  while (i < n) {
    colors[i] = "#" + specifier.slice(i * 6, ++i * 6);
  }

  return colors;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/BrBG.js":
/*!***********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/BrBG.js ***!
  \***********************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("d8b365f5f5f55ab4ac", "a6611adfc27d80cdc1018571", "a6611adfc27df5f5f580cdc1018571", "8c510ad8b365f6e8c3c7eae55ab4ac01665e", "8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e", "8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e", "8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e", "5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30", "5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PRGn.js":
/*!***********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PRGn.js ***!
  \***********************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("af8dc3f7f7f77fbf7b", "7b3294c2a5cfa6dba0008837", "7b3294c2a5cff7f7f7a6dba0008837", "762a83af8dc3e7d4e8d9f0d37fbf7b1b7837", "762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837", "762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837", "762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837", "40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b", "40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PiYG.js":
/*!***********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PiYG.js ***!
  \***********************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("e9a3c9f7f7f7a1d76a", "d01c8bf1b6dab8e1864dac26", "d01c8bf1b6daf7f7f7b8e1864dac26", "c51b7de9a3c9fde0efe6f5d0a1d76a4d9221", "c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221", "c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221", "c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221", "8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419", "8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PuOr.js":
/*!***********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PuOr.js ***!
  \***********************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("998ec3f7f7f7f1a340", "5e3c99b2abd2fdb863e66101", "5e3c99b2abd2f7f7f7fdb863e66101", "542788998ec3d8daebfee0b6f1a340b35806", "542788998ec3d8daebf7f7f7fee0b6f1a340b35806", "5427888073acb2abd2d8daebfee0b6fdb863e08214b35806", "5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806", "2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08", "2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdBu.js":
/*!***********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdBu.js ***!
  \***********************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("ef8a62f7f7f767a9cf", "ca0020f4a58292c5de0571b0", "ca0020f4a582f7f7f792c5de0571b0", "b2182bef8a62fddbc7d1e5f067a9cf2166ac", "b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac", "b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac", "b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac", "67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061", "67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdGy.js":
/*!***********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdGy.js ***!
  \***********************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("ef8a62ffffff999999", "ca0020f4a582bababa404040", "ca0020f4a582ffffffbababa404040", "b2182bef8a62fddbc7e0e0e09999994d4d4d", "b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d", "b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d", "b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d", "67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a", "67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js":
/*!*************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js ***!
  \*************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("fc8d59ffffbf91bfdb", "d7191cfdae61abd9e92c7bb6", "d7191cfdae61ffffbfabd9e92c7bb6", "d73027fc8d59fee090e0f3f891bfdb4575b4", "d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4", "d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4", "d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4", "a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695", "a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js":
/*!*************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js ***!
  \*************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("fc8d59ffffbf91cf60", "d7191cfdae61a6d96a1a9641", "d7191cfdae61ffffbfa6d96a1a9641", "d73027fc8d59fee08bd9ef8b91cf601a9850", "d73027fc8d59fee08bffffbfd9ef8b91cf601a9850", "d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850", "d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850", "a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837", "a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/Spectral.js":
/*!***************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/Spectral.js ***!
  \***************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("fc8d59ffffbf99d594", "d7191cfdae61abdda42b83ba", "d7191cfdae61ffffbfabdda42b83ba", "d53e4ffc8d59fee08be6f59899d5943288bd", "d53e4ffc8d59fee08bffffbfe6f59899d5943288bd", "d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd", "d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd", "9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2", "9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/index.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/index.js ***!
  \**************************************************************************/
/*! exports provided: schemeCategory10, schemeAccent, schemeDark2, schemePaired, schemePastel1, schemePastel2, schemeSet1, schemeSet2, schemeSet3, interpolateBrBG, schemeBrBG, interpolatePRGn, schemePRGn, interpolatePiYG, schemePiYG, interpolatePuOr, schemePuOr, interpolateRdBu, schemeRdBu, interpolateRdGy, schemeRdGy, interpolateRdYlBu, schemeRdYlBu, interpolateRdYlGn, schemeRdYlGn, interpolateSpectral, schemeSpectral, interpolateBuGn, schemeBuGn, interpolateBuPu, schemeBuPu, interpolateGnBu, schemeGnBu, interpolateOrRd, schemeOrRd, interpolatePuBuGn, schemePuBuGn, interpolatePuBu, schemePuBu, interpolatePuRd, schemePuRd, interpolateRdPu, schemeRdPu, interpolateYlGnBu, schemeYlGnBu, interpolateYlGn, schemeYlGn, interpolateYlOrBr, schemeYlOrBr, interpolateYlOrRd, schemeYlOrRd, interpolateBlues, schemeBlues, interpolateGreens, schemeGreens, interpolateGreys, schemeGreys, interpolatePurples, schemePurples, interpolateReds, schemeReds, interpolateOranges, schemeOranges, interpolateCubehelixDefault, interpolateRainbow, interpolateWarm, interpolateCool, interpolateSinebow, interpolateViridis, interpolateMagma, interpolateInferno, interpolatePlasma */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _categorical_category10__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./categorical/category10 */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/category10.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeCategory10", function() { return _categorical_category10__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _categorical_Accent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./categorical/Accent */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Accent.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeAccent", function() { return _categorical_Accent__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _categorical_Dark2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./categorical/Dark2 */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Dark2.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeDark2", function() { return _categorical_Dark2__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _categorical_Paired__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./categorical/Paired */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Paired.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePaired", function() { return _categorical_Paired__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _categorical_Pastel1__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./categorical/Pastel1 */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Pastel1.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePastel1", function() { return _categorical_Pastel1__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _categorical_Pastel2__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./categorical/Pastel2 */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Pastel2.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePastel2", function() { return _categorical_Pastel2__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _categorical_Set1__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./categorical/Set1 */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set1.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeSet1", function() { return _categorical_Set1__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _categorical_Set2__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./categorical/Set2 */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set2.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeSet2", function() { return _categorical_Set2__WEBPACK_IMPORTED_MODULE_7__["default"]; });

/* harmony import */ var _categorical_Set3__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./categorical/Set3 */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set3.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeSet3", function() { return _categorical_Set3__WEBPACK_IMPORTED_MODULE_8__["default"]; });

/* harmony import */ var _diverging_BrBG__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./diverging/BrBG */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/BrBG.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateBrBG", function() { return _diverging_BrBG__WEBPACK_IMPORTED_MODULE_9__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeBrBG", function() { return _diverging_BrBG__WEBPACK_IMPORTED_MODULE_9__["scheme"]; });

/* harmony import */ var _diverging_PRGn__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./diverging/PRGn */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PRGn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePRGn", function() { return _diverging_PRGn__WEBPACK_IMPORTED_MODULE_10__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePRGn", function() { return _diverging_PRGn__WEBPACK_IMPORTED_MODULE_10__["scheme"]; });

/* harmony import */ var _diverging_PiYG__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./diverging/PiYG */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PiYG.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePiYG", function() { return _diverging_PiYG__WEBPACK_IMPORTED_MODULE_11__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePiYG", function() { return _diverging_PiYG__WEBPACK_IMPORTED_MODULE_11__["scheme"]; });

/* harmony import */ var _diverging_PuOr__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./diverging/PuOr */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PuOr.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePuOr", function() { return _diverging_PuOr__WEBPACK_IMPORTED_MODULE_12__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePuOr", function() { return _diverging_PuOr__WEBPACK_IMPORTED_MODULE_12__["scheme"]; });

/* harmony import */ var _diverging_RdBu__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./diverging/RdBu */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdBu.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRdBu", function() { return _diverging_RdBu__WEBPACK_IMPORTED_MODULE_13__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeRdBu", function() { return _diverging_RdBu__WEBPACK_IMPORTED_MODULE_13__["scheme"]; });

/* harmony import */ var _diverging_RdGy__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./diverging/RdGy */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdGy.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRdGy", function() { return _diverging_RdGy__WEBPACK_IMPORTED_MODULE_14__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeRdGy", function() { return _diverging_RdGy__WEBPACK_IMPORTED_MODULE_14__["scheme"]; });

/* harmony import */ var _diverging_RdYlBu__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./diverging/RdYlBu */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRdYlBu", function() { return _diverging_RdYlBu__WEBPACK_IMPORTED_MODULE_15__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeRdYlBu", function() { return _diverging_RdYlBu__WEBPACK_IMPORTED_MODULE_15__["scheme"]; });

/* harmony import */ var _diverging_RdYlGn__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./diverging/RdYlGn */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRdYlGn", function() { return _diverging_RdYlGn__WEBPACK_IMPORTED_MODULE_16__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeRdYlGn", function() { return _diverging_RdYlGn__WEBPACK_IMPORTED_MODULE_16__["scheme"]; });

/* harmony import */ var _diverging_Spectral__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./diverging/Spectral */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/Spectral.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateSpectral", function() { return _diverging_Spectral__WEBPACK_IMPORTED_MODULE_17__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeSpectral", function() { return _diverging_Spectral__WEBPACK_IMPORTED_MODULE_17__["scheme"]; });

/* harmony import */ var _sequential_multi_BuGn__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./sequential-multi/BuGn */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateBuGn", function() { return _sequential_multi_BuGn__WEBPACK_IMPORTED_MODULE_18__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeBuGn", function() { return _sequential_multi_BuGn__WEBPACK_IMPORTED_MODULE_18__["scheme"]; });

/* harmony import */ var _sequential_multi_BuPu__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./sequential-multi/BuPu */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateBuPu", function() { return _sequential_multi_BuPu__WEBPACK_IMPORTED_MODULE_19__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeBuPu", function() { return _sequential_multi_BuPu__WEBPACK_IMPORTED_MODULE_19__["scheme"]; });

/* harmony import */ var _sequential_multi_GnBu__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./sequential-multi/GnBu */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateGnBu", function() { return _sequential_multi_GnBu__WEBPACK_IMPORTED_MODULE_20__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeGnBu", function() { return _sequential_multi_GnBu__WEBPACK_IMPORTED_MODULE_20__["scheme"]; });

/* harmony import */ var _sequential_multi_OrRd__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./sequential-multi/OrRd */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateOrRd", function() { return _sequential_multi_OrRd__WEBPACK_IMPORTED_MODULE_21__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeOrRd", function() { return _sequential_multi_OrRd__WEBPACK_IMPORTED_MODULE_21__["scheme"]; });

/* harmony import */ var _sequential_multi_PuBuGn__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./sequential-multi/PuBuGn */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePuBuGn", function() { return _sequential_multi_PuBuGn__WEBPACK_IMPORTED_MODULE_22__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePuBuGn", function() { return _sequential_multi_PuBuGn__WEBPACK_IMPORTED_MODULE_22__["scheme"]; });

/* harmony import */ var _sequential_multi_PuBu__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./sequential-multi/PuBu */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePuBu", function() { return _sequential_multi_PuBu__WEBPACK_IMPORTED_MODULE_23__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePuBu", function() { return _sequential_multi_PuBu__WEBPACK_IMPORTED_MODULE_23__["scheme"]; });

/* harmony import */ var _sequential_multi_PuRd__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./sequential-multi/PuRd */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePuRd", function() { return _sequential_multi_PuRd__WEBPACK_IMPORTED_MODULE_24__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePuRd", function() { return _sequential_multi_PuRd__WEBPACK_IMPORTED_MODULE_24__["scheme"]; });

/* harmony import */ var _sequential_multi_RdPu__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./sequential-multi/RdPu */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRdPu", function() { return _sequential_multi_RdPu__WEBPACK_IMPORTED_MODULE_25__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeRdPu", function() { return _sequential_multi_RdPu__WEBPACK_IMPORTED_MODULE_25__["scheme"]; });

/* harmony import */ var _sequential_multi_YlGnBu__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./sequential-multi/YlGnBu */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateYlGnBu", function() { return _sequential_multi_YlGnBu__WEBPACK_IMPORTED_MODULE_26__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeYlGnBu", function() { return _sequential_multi_YlGnBu__WEBPACK_IMPORTED_MODULE_26__["scheme"]; });

/* harmony import */ var _sequential_multi_YlGn__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./sequential-multi/YlGn */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateYlGn", function() { return _sequential_multi_YlGn__WEBPACK_IMPORTED_MODULE_27__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeYlGn", function() { return _sequential_multi_YlGn__WEBPACK_IMPORTED_MODULE_27__["scheme"]; });

/* harmony import */ var _sequential_multi_YlOrBr__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./sequential-multi/YlOrBr */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateYlOrBr", function() { return _sequential_multi_YlOrBr__WEBPACK_IMPORTED_MODULE_28__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeYlOrBr", function() { return _sequential_multi_YlOrBr__WEBPACK_IMPORTED_MODULE_28__["scheme"]; });

/* harmony import */ var _sequential_multi_YlOrRd__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./sequential-multi/YlOrRd */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateYlOrRd", function() { return _sequential_multi_YlOrRd__WEBPACK_IMPORTED_MODULE_29__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeYlOrRd", function() { return _sequential_multi_YlOrRd__WEBPACK_IMPORTED_MODULE_29__["scheme"]; });

/* harmony import */ var _sequential_single_Blues__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./sequential-single/Blues */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Blues.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateBlues", function() { return _sequential_single_Blues__WEBPACK_IMPORTED_MODULE_30__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeBlues", function() { return _sequential_single_Blues__WEBPACK_IMPORTED_MODULE_30__["scheme"]; });

/* harmony import */ var _sequential_single_Greens__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./sequential-single/Greens */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Greens.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateGreens", function() { return _sequential_single_Greens__WEBPACK_IMPORTED_MODULE_31__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeGreens", function() { return _sequential_single_Greens__WEBPACK_IMPORTED_MODULE_31__["scheme"]; });

/* harmony import */ var _sequential_single_Greys__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./sequential-single/Greys */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Greys.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateGreys", function() { return _sequential_single_Greys__WEBPACK_IMPORTED_MODULE_32__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeGreys", function() { return _sequential_single_Greys__WEBPACK_IMPORTED_MODULE_32__["scheme"]; });

/* harmony import */ var _sequential_single_Purples__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./sequential-single/Purples */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Purples.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePurples", function() { return _sequential_single_Purples__WEBPACK_IMPORTED_MODULE_33__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePurples", function() { return _sequential_single_Purples__WEBPACK_IMPORTED_MODULE_33__["scheme"]; });

/* harmony import */ var _sequential_single_Reds__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./sequential-single/Reds */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Reds.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateReds", function() { return _sequential_single_Reds__WEBPACK_IMPORTED_MODULE_34__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeReds", function() { return _sequential_single_Reds__WEBPACK_IMPORTED_MODULE_34__["scheme"]; });

/* harmony import */ var _sequential_single_Oranges__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./sequential-single/Oranges */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateOranges", function() { return _sequential_single_Oranges__WEBPACK_IMPORTED_MODULE_35__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeOranges", function() { return _sequential_single_Oranges__WEBPACK_IMPORTED_MODULE_35__["scheme"]; });

/* harmony import */ var _sequential_multi_cubehelix__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./sequential-multi/cubehelix */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateCubehelixDefault", function() { return _sequential_multi_cubehelix__WEBPACK_IMPORTED_MODULE_36__["default"]; });

/* harmony import */ var _sequential_multi_rainbow__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./sequential-multi/rainbow */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRainbow", function() { return _sequential_multi_rainbow__WEBPACK_IMPORTED_MODULE_37__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateWarm", function() { return _sequential_multi_rainbow__WEBPACK_IMPORTED_MODULE_37__["warm"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateCool", function() { return _sequential_multi_rainbow__WEBPACK_IMPORTED_MODULE_37__["cool"]; });

/* harmony import */ var _sequential_multi_sinebow__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./sequential-multi/sinebow */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateSinebow", function() { return _sequential_multi_sinebow__WEBPACK_IMPORTED_MODULE_38__["default"]; });

/* harmony import */ var _sequential_multi_viridis__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./sequential-multi/viridis */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateViridis", function() { return _sequential_multi_viridis__WEBPACK_IMPORTED_MODULE_39__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateMagma", function() { return _sequential_multi_viridis__WEBPACK_IMPORTED_MODULE_39__["magma"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateInferno", function() { return _sequential_multi_viridis__WEBPACK_IMPORTED_MODULE_39__["inferno"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePlasma", function() { return _sequential_multi_viridis__WEBPACK_IMPORTED_MODULE_39__["plasma"]; });










































/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_interpolate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-interpolate */ "./packages/muze-utils/node_modules/d3-interpolate/src/index.js");

/* harmony default export */ __webpack_exports__["default"] = (function (scheme) {
  return Object(d3_interpolate__WEBPACK_IMPORTED_MODULE_0__["interpolateRgbBasis"])(scheme[scheme.length - 1]);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js":
/*!******************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js ***!
  \******************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("e5f5f999d8c92ca25f", "edf8fbb2e2e266c2a4238b45", "edf8fbb2e2e266c2a42ca25f006d2c", "edf8fbccece699d8c966c2a42ca25f006d2c", "edf8fbccece699d8c966c2a441ae76238b45005824", "f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824", "f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js":
/*!******************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js ***!
  \******************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("e0ecf49ebcda8856a7", "edf8fbb3cde38c96c688419d", "edf8fbb3cde38c96c68856a7810f7c", "edf8fbbfd3e69ebcda8c96c68856a7810f7c", "edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b", "f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b", "f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js":
/*!******************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js ***!
  \******************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("e0f3dba8ddb543a2ca", "f0f9e8bae4bc7bccc42b8cbe", "f0f9e8bae4bc7bccc443a2ca0868ac", "f0f9e8ccebc5a8ddb57bccc443a2ca0868ac", "f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e", "f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e", "f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js":
/*!******************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js ***!
  \******************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("fee8c8fdbb84e34a33", "fef0d9fdcc8afc8d59d7301f", "fef0d9fdcc8afc8d59e34a33b30000", "fef0d9fdd49efdbb84fc8d59e34a33b30000", "fef0d9fdd49efdbb84fc8d59ef6548d7301f990000", "fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000", "fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js":
/*!******************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js ***!
  \******************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("ece7f2a6bddb2b8cbe", "f1eef6bdc9e174a9cf0570b0", "f1eef6bdc9e174a9cf2b8cbe045a8d", "f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d", "f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b", "fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b", "fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js":
/*!********************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js ***!
  \********************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("ece2f0a6bddb1c9099", "f6eff7bdc9e167a9cf02818a", "f6eff7bdc9e167a9cf1c9099016c59", "f6eff7d0d1e6a6bddb67a9cf1c9099016c59", "f6eff7d0d1e6a6bddb67a9cf3690c002818a016450", "fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450", "fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js":
/*!******************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js ***!
  \******************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("e7e1efc994c7dd1c77", "f1eef6d7b5d8df65b0ce1256", "f1eef6d7b5d8df65b0dd1c77980043", "f1eef6d4b9dac994c7df65b0dd1c77980043", "f1eef6d4b9dac994c7df65b0e7298ace125691003f", "f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f", "f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js":
/*!******************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js ***!
  \******************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("fde0ddfa9fb5c51b8a", "feebe2fbb4b9f768a1ae017e", "feebe2fbb4b9f768a1c51b8a7a0177", "feebe2fcc5c0fa9fb5f768a1c51b8a7a0177", "feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177", "fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177", "fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js":
/*!******************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js ***!
  \******************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("f7fcb9addd8e31a354", "ffffccc2e69978c679238443", "ffffccc2e69978c67931a354006837", "ffffccd9f0a3addd8e78c67931a354006837", "ffffccd9f0a3addd8e78c67941ab5d238443005a32", "ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32", "ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js":
/*!********************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js ***!
  \********************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("edf8b17fcdbb2c7fb8", "ffffcca1dab441b6c4225ea8", "ffffcca1dab441b6c42c7fb8253494", "ffffccc7e9b47fcdbb41b6c42c7fb8253494", "ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84", "ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84", "ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js":
/*!********************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js ***!
  \********************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("fff7bcfec44fd95f0e", "ffffd4fed98efe9929cc4c02", "ffffd4fed98efe9929d95f0e993404", "ffffd4fee391fec44ffe9929d95f0e993404", "ffffd4fee391fec44ffe9929ec7014cc4c028c2d04", "ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04", "ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js":
/*!********************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js ***!
  \********************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("ffeda0feb24cf03b20", "ffffb2fecc5cfd8d3ce31a1c", "ffffb2fecc5cfd8d3cf03b20bd0026", "ffffb2fed976feb24cfd8d3cf03b20bd0026", "ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026", "ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026", "ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js":
/*!***********************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js ***!
  \***********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ "./packages/muze-utils/node_modules/d3-color/src/index.js");
/* harmony import */ var d3_interpolate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-interpolate */ "./packages/muze-utils/node_modules/d3-interpolate/src/index.js");


/* harmony default export */ __webpack_exports__["default"] = (Object(d3_interpolate__WEBPACK_IMPORTED_MODULE_1__["interpolateCubehelixLong"])(Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])(300, 0.5, 0.0), Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])(-240, 0.5, 1.0)));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js":
/*!*********************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js ***!
  \*********************************************************************************************/
/*! exports provided: warm, cool, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "warm", function() { return warm; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cool", function() { return cool; });
/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ "./packages/muze-utils/node_modules/d3-color/src/index.js");
/* harmony import */ var d3_interpolate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-interpolate */ "./packages/muze-utils/node_modules/d3-interpolate/src/index.js");


var warm = Object(d3_interpolate__WEBPACK_IMPORTED_MODULE_1__["interpolateCubehelixLong"])(Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])(-100, 0.75, 0.35), Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])(80, 1.50, 0.8));
var cool = Object(d3_interpolate__WEBPACK_IMPORTED_MODULE_1__["interpolateCubehelixLong"])(Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])(260, 0.75, 0.35), Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])(80, 1.50, 0.8));
var c = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])();
/* harmony default export */ __webpack_exports__["default"] = (function (t) {
  if (t < 0 || t > 1) t -= Math.floor(t);
  var ts = Math.abs(t - 0.5);
  c.h = 360 * t - 100;
  c.s = 1.5 - 1.5 * ts;
  c.l = 0.8 - 0.9 * ts;
  return c + "";
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js":
/*!*********************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js ***!
  \*********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ "./packages/muze-utils/node_modules/d3-color/src/index.js");

var c = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["rgb"])(),
    pi_1_3 = Math.PI / 3,
    pi_2_3 = Math.PI * 2 / 3;
/* harmony default export */ __webpack_exports__["default"] = (function (t) {
  var x;
  t = (0.5 - t) * Math.PI;
  c.r = 255 * (x = Math.sin(t)) * x;
  c.g = 255 * (x = Math.sin(t + pi_1_3)) * x;
  c.b = 255 * (x = Math.sin(t + pi_2_3)) * x;
  return c + "";
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js":
/*!*********************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js ***!
  \*********************************************************************************************/
/*! exports provided: default, magma, inferno, plasma */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "magma", function() { return magma; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "inferno", function() { return inferno; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "plasma", function() { return plasma; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");


function ramp(range) {
  var n = range.length;
  return function (t) {
    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];
  };
}

/* harmony default export */ __webpack_exports__["default"] = (ramp(Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")));
var magma = ramp(Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));
var inferno = ramp(Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));
var plasma = ramp(Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Blues.js":
/*!********************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Blues.js ***!
  \********************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("deebf79ecae13182bd", "eff3ffbdd7e76baed62171b5", "eff3ffbdd7e76baed63182bd08519c", "eff3ffc6dbef9ecae16baed63182bd08519c", "eff3ffc6dbef9ecae16baed64292c62171b5084594", "f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594", "f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Greens.js":
/*!*********************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Greens.js ***!
  \*********************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("e5f5e0a1d99b31a354", "edf8e9bae4b374c476238b45", "edf8e9bae4b374c47631a354006d2c", "edf8e9c7e9c0a1d99b74c47631a354006d2c", "edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32", "f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32", "f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Greys.js":
/*!********************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Greys.js ***!
  \********************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("f0f0f0bdbdbd636363", "f7f7f7cccccc969696525252", "f7f7f7cccccc969696636363252525", "f7f7f7d9d9d9bdbdbd969696636363252525", "f7f7f7d9d9d9bdbdbd969696737373525252252525", "fffffff0f0f0d9d9d9bdbdbd969696737373525252252525", "fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js":
/*!**********************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js ***!
  \**********************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("fee6cefdae6be6550d", "feeddefdbe85fd8d3cd94701", "feeddefdbe85fd8d3ce6550da63603", "feeddefdd0a2fdae6bfd8d3ce6550da63603", "feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04", "fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04", "fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Purples.js":
/*!**********************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Purples.js ***!
  \**********************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("efedf5bcbddc756bb1", "f2f0f7cbc9e29e9ac86a51a3", "f2f0f7cbc9e29e9ac8756bb154278f", "f2f0f7dadaebbcbddc9e9ac8756bb154278f", "f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486", "fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486", "fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Reds.js":
/*!*******************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Reds.js ***!
  \*******************************************************************************************/
/*! exports provided: scheme, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scheme", function() { return scheme; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js");
/* harmony import */ var _ramp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ramp */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js");


var scheme = new Array(3).concat("fee0d2fc9272de2d26", "fee5d9fcae91fb6a4acb181d", "fee5d9fcae91fb6a4ade2d26a50f15", "fee5d9fcbba1fc9272fb6a4ade2d26a50f15", "fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d", "fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d", "fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(_colors__WEBPACK_IMPORTED_MODULE_0__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (Object(_ramp__WEBPACK_IMPORTED_MODULE_1__["default"])(scheme));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/index.js":
/*!************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/index.js ***!
  \************************************************************/
/*! exports provided: scaleBand, scalePoint, scaleIdentity, scaleLinear, scaleLog, scaleOrdinal, scaleImplicit, scalePow, scaleSqrt, scaleQuantile, scaleQuantize, scaleThreshold, scaleTime, scaleUtc, schemeCategory10, schemeCategory20b, schemeCategory20c, schemeCategory20, interpolateCubehelixDefault, interpolateRainbow, interpolateWarm, interpolateCool, interpolateViridis, interpolateMagma, interpolateInferno, interpolatePlasma, scaleSequential */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _src_band__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/band */ "./packages/muze-utils/node_modules/d3-scale/src/band.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleBand", function() { return _src_band__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scalePoint", function() { return _src_band__WEBPACK_IMPORTED_MODULE_0__["point"]; });

/* harmony import */ var _src_identity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/identity */ "./packages/muze-utils/node_modules/d3-scale/src/identity.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleIdentity", function() { return _src_identity__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _src_linear__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/linear */ "./packages/muze-utils/node_modules/d3-scale/src/linear.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleLinear", function() { return _src_linear__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _src_log__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/log */ "./packages/muze-utils/node_modules/d3-scale/src/log.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleLog", function() { return _src_log__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _src_ordinal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src/ordinal */ "./packages/muze-utils/node_modules/d3-scale/src/ordinal.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleOrdinal", function() { return _src_ordinal__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleImplicit", function() { return _src_ordinal__WEBPACK_IMPORTED_MODULE_4__["implicit"]; });

/* harmony import */ var _src_pow__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./src/pow */ "./packages/muze-utils/node_modules/d3-scale/src/pow.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scalePow", function() { return _src_pow__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleSqrt", function() { return _src_pow__WEBPACK_IMPORTED_MODULE_5__["sqrt"]; });

/* harmony import */ var _src_quantile__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./src/quantile */ "./packages/muze-utils/node_modules/d3-scale/src/quantile.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleQuantile", function() { return _src_quantile__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _src_quantize__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./src/quantize */ "./packages/muze-utils/node_modules/d3-scale/src/quantize.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleQuantize", function() { return _src_quantize__WEBPACK_IMPORTED_MODULE_7__["default"]; });

/* harmony import */ var _src_threshold__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./src/threshold */ "./packages/muze-utils/node_modules/d3-scale/src/threshold.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleThreshold", function() { return _src_threshold__WEBPACK_IMPORTED_MODULE_8__["default"]; });

/* harmony import */ var _src_time__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./src/time */ "./packages/muze-utils/node_modules/d3-scale/src/time.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleTime", function() { return _src_time__WEBPACK_IMPORTED_MODULE_9__["default"]; });

/* harmony import */ var _src_utcTime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./src/utcTime */ "./packages/muze-utils/node_modules/d3-scale/src/utcTime.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleUtc", function() { return _src_utcTime__WEBPACK_IMPORTED_MODULE_10__["default"]; });

/* harmony import */ var _src_category10__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./src/category10 */ "./packages/muze-utils/node_modules/d3-scale/src/category10.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeCategory10", function() { return _src_category10__WEBPACK_IMPORTED_MODULE_11__["default"]; });

/* harmony import */ var _src_category20b__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./src/category20b */ "./packages/muze-utils/node_modules/d3-scale/src/category20b.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeCategory20b", function() { return _src_category20b__WEBPACK_IMPORTED_MODULE_12__["default"]; });

/* harmony import */ var _src_category20c__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./src/category20c */ "./packages/muze-utils/node_modules/d3-scale/src/category20c.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeCategory20c", function() { return _src_category20c__WEBPACK_IMPORTED_MODULE_13__["default"]; });

/* harmony import */ var _src_category20__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./src/category20 */ "./packages/muze-utils/node_modules/d3-scale/src/category20.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeCategory20", function() { return _src_category20__WEBPACK_IMPORTED_MODULE_14__["default"]; });

/* harmony import */ var _src_cubehelix__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./src/cubehelix */ "./packages/muze-utils/node_modules/d3-scale/src/cubehelix.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateCubehelixDefault", function() { return _src_cubehelix__WEBPACK_IMPORTED_MODULE_15__["default"]; });

/* harmony import */ var _src_rainbow__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/rainbow */ "./packages/muze-utils/node_modules/d3-scale/src/rainbow.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRainbow", function() { return _src_rainbow__WEBPACK_IMPORTED_MODULE_16__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateWarm", function() { return _src_rainbow__WEBPACK_IMPORTED_MODULE_16__["warm"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateCool", function() { return _src_rainbow__WEBPACK_IMPORTED_MODULE_16__["cool"]; });

/* harmony import */ var _src_viridis__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./src/viridis */ "./packages/muze-utils/node_modules/d3-scale/src/viridis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateViridis", function() { return _src_viridis__WEBPACK_IMPORTED_MODULE_17__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateMagma", function() { return _src_viridis__WEBPACK_IMPORTED_MODULE_17__["magma"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateInferno", function() { return _src_viridis__WEBPACK_IMPORTED_MODULE_17__["inferno"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePlasma", function() { return _src_viridis__WEBPACK_IMPORTED_MODULE_17__["plasma"]; });

/* harmony import */ var _src_sequential__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./src/sequential */ "./packages/muze-utils/node_modules/d3-scale/src/sequential.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleSequential", function() { return _src_sequential__WEBPACK_IMPORTED_MODULE_18__["default"]; });





















/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/array.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/array.js ***!
  \****************************************************************/
/*! exports provided: map, slice */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "map", function() { return map; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "slice", function() { return slice; });
var array = Array.prototype;
var map = array.map;
var slice = array.slice;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/band.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/band.js ***!
  \***************************************************************/
/*! exports provided: default, point */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return band; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "point", function() { return point; });
/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-array */ "./packages/muze-utils/node_modules/d3-array/src/index.js");
/* harmony import */ var _ordinal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ordinal */ "./packages/muze-utils/node_modules/d3-scale/src/ordinal.js");


function band() {
  var scale = Object(_ordinal__WEBPACK_IMPORTED_MODULE_1__["default"])().unknown(undefined),
      domain = scale.domain,
      ordinalRange = scale.range,
      range = [0, 1],
      step,
      bandwidth,
      round = false,
      paddingInner = 0,
      paddingOuter = 0,
      align = 0.5;
  delete scale.unknown;

  function rescale() {
    var n = domain().length,
        reverse = range[1] < range[0],
        start = range[reverse - 0],
        stop = range[1 - reverse];
    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);
    if (round) step = Math.floor(step);
    start += (stop - start - step * (n - paddingInner)) * align;
    bandwidth = step * (1 - paddingInner);
    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);
    var values = Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["range"])(n).map(function (i) {
      return start + step * i;
    });
    return ordinalRange(reverse ? values.reverse() : values);
  }

  scale.domain = function (_) {
    return arguments.length ? (domain(_), rescale()) : domain();
  };

  scale.range = function (_) {
    return arguments.length ? (range = [+_[0], +_[1]], rescale()) : range.slice();
  };

  scale.rangeRound = function (_) {
    return range = [+_[0], +_[1]], round = true, rescale();
  };

  scale.bandwidth = function () {
    return bandwidth;
  };

  scale.step = function () {
    return step;
  };

  scale.round = function (_) {
    return arguments.length ? (round = !!_, rescale()) : round;
  };

  scale.padding = function (_) {
    return arguments.length ? (paddingInner = paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;
  };

  scale.paddingInner = function (_) {
    return arguments.length ? (paddingInner = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;
  };

  scale.paddingOuter = function (_) {
    return arguments.length ? (paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingOuter;
  };

  scale.align = function (_) {
    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;
  };

  scale.copy = function () {
    return band().domain(domain()).range(range).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align);
  };

  scale.invertExtent = function (r0, r1) {
    var lo = +r0,
        hi = arguments.length > 1 ? +r1 : lo,
        reverse = range[1] < range[0],
        values = reverse ? ordinalRange().reverse() : ordinalRange(),
        n = values.length - 1,
        a,
        b,
        t,
        hiIndex;
    values.push(values[n] + this.step()); // order range inputs, bail if outside of scale range

    if (hi < lo) t = lo, lo = hi, hi = t;
    if (hi < values[0] || lo > range[1 - reverse]) return undefined; // binary search to index into scale range

    a = Math.max(0, getClosestIndexOf(values, lo));
    hiIndex = getClosestIndexOf(values, hi);
    b = lo === hi ? a : Math.max(a, hiIndex - 1); // increment index a if lo is within padding gap
    // if (lo - values[a] > bandwidth + 1e-10) ++a;

    if (reverse) t = a, a = n - b, b = n - t; // map + swap

    return a > b ? undefined : domain().slice(a, b + 1);
  };

  scale.invert = function (r0, r1) {
    var lo = +r0,
        hi = arguments.length > 1 ? +r1 : lo,
        reverse = range[1] < range[0],
        values = reverse ? ordinalRange().reverse() : ordinalRange(),
        n = values.length - 1,
        a,
        t; // order range inputs, bail if outside of scale range

    if (hi < lo) t = lo, lo = hi, hi = t;
    if (hi < values[0] || lo > range[1 - reverse]) return undefined; // binary search to index into scale range

    a = Math.max(0, getClosestIndexOf(values, lo, 'left')); // increment index a if lo is within padding gap
    // if (lo - values[a] > bandwidth + 1e-10) ++a;

    return domain()[reverse ? n - a : a];
  };

  return rescale();
}

function pointish(scale) {
  var copy = scale.copy;
  scale.padding = scale.paddingOuter;
  delete scale.paddingInner;
  delete scale.paddingOuter;

  scale.copy = function () {
    return pointish(copy());
  };

  return scale;
}

function point() {
  return pointish(band().paddingInner(1));
}

function getClosestIndexOf(arr, value, side) {
  var low = 0,
      arrLen = arr.length,
      high = arrLen - 1,
      highVal,
      mid,
      d1,
      d2;

  while (low < high) {
    mid = Math.floor((low + high) / 2);
    d1 = Math.abs(arr[mid] - value);
    d2 = Math.abs(arr[mid + 1] - value);

    if (d2 <= d1) {
      low = mid + 1;
    } else {
      high = mid;
    }
  }

  if (!side) {
    return high;
  }

  highVal = arr[high];

  if (highVal === value) {
    return high;
  } else if (highVal > value) {
    if (high === 0) {
      return high;
    }

    return side === 'left' ? high - 1 : high;
  } else {
    if (high === arr.length - 1) {
      return high;
    }

    return side === 'left' ? high : high + 1;
  }
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/category10.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/category10.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./colors */ "./packages/muze-utils/node_modules/d3-scale/src/colors.js");

/* harmony default export */ __webpack_exports__["default"] = (Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/category20.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/category20.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./colors */ "./packages/muze-utils/node_modules/d3-scale/src/colors.js");

/* harmony default export */ __webpack_exports__["default"] = (Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/category20b.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/category20b.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./colors */ "./packages/muze-utils/node_modules/d3-scale/src/colors.js");

/* harmony default export */ __webpack_exports__["default"] = (Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/category20c.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/category20c.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./colors */ "./packages/muze-utils/node_modules/d3-scale/src/colors.js");

/* harmony default export */ __webpack_exports__["default"] = (Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/colors.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/colors.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (s) {
  return s.match(/.{6}/g).map(function (x) {
    return "#" + x;
  });
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/constant.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/constant.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (x) {
  return function () {
    return x;
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/continuous.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/continuous.js ***!
  \*********************************************************************/
/*! exports provided: deinterpolateLinear, copy, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deinterpolateLinear", function() { return deinterpolateLinear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copy", function() { return copy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return continuous; });
/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-array */ "./packages/muze-utils/node_modules/d3-array/src/index.js");
/* harmony import */ var d3_interpolate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-interpolate */ "./packages/muze-utils/node_modules/d3-interpolate/src/index.js");
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./array */ "./packages/muze-utils/node_modules/d3-scale/src/array.js");
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constant */ "./packages/muze-utils/node_modules/d3-scale/src/constant.js");
/* harmony import */ var _number__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./number */ "./packages/muze-utils/node_modules/d3-scale/src/number.js");





var unit = [0, 1];
function deinterpolateLinear(a, b) {
  return (b -= a = +a) ? function (x) {
    return (x - a) / b;
  } : Object(_constant__WEBPACK_IMPORTED_MODULE_3__["default"])(b);
}

function deinterpolateClamp(deinterpolate) {
  return function (a, b) {
    var d = deinterpolate(a = +a, b = +b);
    return function (x) {
      return x <= a ? 0 : x >= b ? 1 : d(x);
    };
  };
}

function reinterpolateClamp(reinterpolate) {
  return function (a, b) {
    var r = reinterpolate(a = +a, b = +b);
    return function (t) {
      return t <= 0 ? a : t >= 1 ? b : r(t);
    };
  };
}

function bimap(domain, range, deinterpolate, reinterpolate) {
  var d0 = domain[0],
      d1 = domain[1],
      r0 = range[0],
      r1 = range[1];
  if (d1 < d0) d0 = deinterpolate(d1, d0), r0 = reinterpolate(r1, r0);else d0 = deinterpolate(d0, d1), r0 = reinterpolate(r0, r1);
  return function (x) {
    return r0(d0(x));
  };
}

function polymap(domain, range, deinterpolate, reinterpolate) {
  var j = Math.min(domain.length, range.length) - 1,
      d = new Array(j),
      r = new Array(j),
      i = -1; // Reverse descending domains.

  if (domain[j] < domain[0]) {
    domain = domain.slice().reverse();
    range = range.slice().reverse();
  }

  while (++i < j) {
    d[i] = deinterpolate(domain[i], domain[i + 1]);
    r[i] = reinterpolate(range[i], range[i + 1]);
  }

  return function (x) {
    var i = Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["bisect"])(domain, x, 1, j) - 1;
    return r[i](d[i](x));
  };
}

function copy(source, target) {
  return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp());
} // deinterpolate(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].
// reinterpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding domain value x in [a,b].

function continuous(deinterpolate, reinterpolate) {
  var domain = unit,
      range = unit,
      interpolate = d3_interpolate__WEBPACK_IMPORTED_MODULE_1__["interpolate"],
      clamp = false,
      piecewise,
      output,
      input;

  function rescale() {
    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;
    output = input = null;
    return scale;
  }

  function scale(x) {
    return (output || (output = piecewise(domain, range, clamp ? deinterpolateClamp(deinterpolate) : deinterpolate, interpolate)))(+x);
  }

  scale.invert = function (y) {
    return (input || (input = piecewise(range, domain, deinterpolateLinear, clamp ? reinterpolateClamp(reinterpolate) : reinterpolate)))(+y);
  };

  scale.domain = function (_) {
    return arguments.length ? (domain = _array__WEBPACK_IMPORTED_MODULE_2__["map"].call(_, _number__WEBPACK_IMPORTED_MODULE_4__["default"]), rescale()) : domain.slice();
  };

  scale.range = function (_) {
    return arguments.length ? (range = _array__WEBPACK_IMPORTED_MODULE_2__["slice"].call(_), rescale()) : range.slice();
  };

  scale.rangeRound = function (_) {
    return range = _array__WEBPACK_IMPORTED_MODULE_2__["slice"].call(_), interpolate = d3_interpolate__WEBPACK_IMPORTED_MODULE_1__["interpolateRound"], rescale();
  };

  scale.clamp = function (_) {
    return arguments.length ? (clamp = !!_, rescale()) : clamp;
  };

  scale.interpolate = function (_) {
    return arguments.length ? (interpolate = _, rescale()) : interpolate;
  };

  return rescale();
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/cubehelix.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/cubehelix.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ "./packages/muze-utils/node_modules/d3-color/src/index.js");
/* harmony import */ var d3_interpolate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-interpolate */ "./packages/muze-utils/node_modules/d3-interpolate/src/index.js");


/* harmony default export */ __webpack_exports__["default"] = (Object(d3_interpolate__WEBPACK_IMPORTED_MODULE_1__["interpolateCubehelixLong"])(Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])(300, 0.5, 0.0), Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])(-240, 0.5, 1.0)));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/identity.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/identity.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return identity; });
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./array */ "./packages/muze-utils/node_modules/d3-scale/src/array.js");
/* harmony import */ var _linear__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./linear */ "./packages/muze-utils/node_modules/d3-scale/src/linear.js");
/* harmony import */ var _number__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./number */ "./packages/muze-utils/node_modules/d3-scale/src/number.js");



function identity() {
  var domain = [0, 1];

  function scale(x) {
    return +x;
  }

  scale.invert = scale;

  scale.domain = scale.range = function (_) {
    return arguments.length ? (domain = _array__WEBPACK_IMPORTED_MODULE_0__["map"].call(_, _number__WEBPACK_IMPORTED_MODULE_2__["default"]), scale) : domain.slice();
  };

  scale.copy = function () {
    return identity().domain(domain);
  };

  return Object(_linear__WEBPACK_IMPORTED_MODULE_1__["linearish"])(scale);
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/linear.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/linear.js ***!
  \*****************************************************************/
/*! exports provided: linearish, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "linearish", function() { return linearish; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return linear; });
/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-array */ "./packages/muze-utils/node_modules/d3-array/src/index.js");
/* harmony import */ var d3_interpolate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-interpolate */ "./packages/muze-utils/node_modules/d3-interpolate/src/index.js");
/* harmony import */ var _continuous__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./continuous */ "./packages/muze-utils/node_modules/d3-scale/src/continuous.js");
/* harmony import */ var _tickFormat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tickFormat */ "./packages/muze-utils/node_modules/d3-scale/src/tickFormat.js");




function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function (count) {
    var d = domain();
    return Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["ticks"])(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function (count, specifier) {
    return Object(_tickFormat__WEBPACK_IMPORTED_MODULE_3__["default"])(domain(), count, specifier);
  };

  scale.nice = function (count) {
    if (count == null) count = 10;
    var d = domain(),
        i0 = 0,
        i1 = d.length - 1,
        start = d[i0],
        stop = d[i1],
        step;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    step = Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["tickIncrement"])(start, stop, count);

    if (step > 0) {
      start = Math.floor(start / step) * step;
      stop = Math.ceil(stop / step) * step;
      step = Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["tickIncrement"])(start, stop, count);
    } else if (step < 0) {
      start = Math.ceil(start * step) / step;
      stop = Math.floor(stop * step) / step;
      step = Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["tickIncrement"])(start, stop, count);
    }

    if (step > 0) {
      d[i0] = Math.floor(start / step) * step;
      d[i1] = Math.ceil(stop / step) * step;
      domain(d);
    } else if (step < 0) {
      d[i0] = Math.ceil(start * step) / step;
      d[i1] = Math.floor(stop * step) / step;
      domain(d);
    }

    return scale;
  };

  return scale;
}
function linear() {
  var scale = Object(_continuous__WEBPACK_IMPORTED_MODULE_2__["default"])(_continuous__WEBPACK_IMPORTED_MODULE_2__["deinterpolateLinear"], d3_interpolate__WEBPACK_IMPORTED_MODULE_1__["interpolateNumber"]);

  scale.copy = function () {
    return Object(_continuous__WEBPACK_IMPORTED_MODULE_2__["copy"])(scale, linear());
  };

  return linearish(scale);
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/log.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/log.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return log; });
/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-array */ "./packages/muze-utils/node_modules/d3-array/src/index.js");
/* harmony import */ var d3_format__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-format */ "./packages/muze-utils/node_modules/d3-format/src/index.js");
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constant */ "./packages/muze-utils/node_modules/d3-scale/src/constant.js");
/* harmony import */ var _nice__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./nice */ "./packages/muze-utils/node_modules/d3-scale/src/nice.js");
/* harmony import */ var _continuous__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./continuous */ "./packages/muze-utils/node_modules/d3-scale/src/continuous.js");






function deinterpolate(a, b) {
  return (b = Math.log(b / a)) ? function (x) {
    return Math.log(x / a) / b;
  } : Object(_constant__WEBPACK_IMPORTED_MODULE_2__["default"])(b);
}

function reinterpolate(a, b) {
  return a < 0 ? function (t) {
    return -Math.pow(-b, t) * Math.pow(-a, 1 - t);
  } : function (t) {
    return Math.pow(b, t) * Math.pow(a, 1 - t);
  };
}

function pow10(x) {
  return isFinite(x) ? +("1e" + x) : x < 0 ? 0 : x;
}

function powp(base) {
  return base === 10 ? pow10 : base === Math.E ? Math.exp : function (x) {
    return Math.pow(base, x);
  };
}

function logp(base) {
  return base === Math.E ? Math.log : base === 10 && Math.log10 || base === 2 && Math.log2 || (base = Math.log(base), function (x) {
    return Math.log(x) / base;
  });
}

function reflect(f) {
  return function (x) {
    return -f(-x);
  };
}

function log() {
  var scale = Object(_continuous__WEBPACK_IMPORTED_MODULE_4__["default"])(deinterpolate, reinterpolate).domain([1, 10]),
      domain = scale.domain,
      base = 10,
      logs = logp(10),
      pows = powp(10);

  function rescale() {
    logs = logp(base), pows = powp(base);
    if (domain()[0] < 0) logs = reflect(logs), pows = reflect(pows);
    return scale;
  }

  scale.base = function (_) {
    return arguments.length ? (base = +_, rescale()) : base;
  };

  scale.domain = function (_) {
    return arguments.length ? (domain(_), rescale()) : domain();
  };

  scale.ticks = function (count) {
    var d = domain(),
        u = d[0],
        v = d[d.length - 1],
        r;
    if (r = v < u) i = u, u = v, v = i;
    var i = logs(u),
        j = logs(v),
        p,
        k,
        t,
        n = count == null ? 10 : +count,
        z = [];

    if (!(base % 1) && j - i < n) {
      i = Math.round(i) - 1, j = Math.round(j) + 1;
      if (u > 0) for (; i < j; ++i) {
        for (k = 1, p = pows(i); k < base; ++k) {
          t = p * k;
          if (t < u) continue;
          if (t > v) break;
          z.push(t);
        }
      } else for (; i < j; ++i) {
        for (k = base - 1, p = pows(i); k >= 1; --k) {
          t = p * k;
          if (t < u) continue;
          if (t > v) break;
          z.push(t);
        }
      }
    } else {
      z = Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["ticks"])(i, j, Math.min(j - i, n)).map(pows);
    }

    return r ? z.reverse() : z;
  };

  scale.tickFormat = function (count, specifier) {
    if (specifier == null) specifier = base === 10 ? ".0e" : ",";
    if (typeof specifier !== "function") specifier = Object(d3_format__WEBPACK_IMPORTED_MODULE_1__["format"])(specifier);
    if (count === Infinity) return specifier;
    if (count == null) count = 10;
    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?

    return function (d) {
      var i = d / pows(Math.round(logs(d)));
      if (i * base < base - 0.5) i *= base;
      return i <= k ? specifier(d) : "";
    };
  };

  scale.nice = function () {
    return domain(Object(_nice__WEBPACK_IMPORTED_MODULE_3__["default"])(domain(), {
      floor: function floor(x) {
        return pows(Math.floor(logs(x)));
      },
      ceil: function ceil(x) {
        return pows(Math.ceil(logs(x)));
      }
    }));
  };

  scale.copy = function () {
    return Object(_continuous__WEBPACK_IMPORTED_MODULE_4__["copy"])(scale, log().base(base));
  };

  return scale;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/nice.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/nice.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (domain, interval) {
  domain = domain.slice();
  var i0 = 0,
      i1 = domain.length - 1,
      x0 = domain[i0],
      x1 = domain[i1],
      t;

  if (x1 < x0) {
    t = i0, i0 = i1, i1 = t;
    t = x0, x0 = x1, x1 = t;
  }

  domain[i0] = interval.floor(x0);
  domain[i1] = interval.ceil(x1);
  return domain;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/number.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/number.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (x) {
  return +x;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/ordinal.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/ordinal.js ***!
  \******************************************************************/
/*! exports provided: implicit, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "implicit", function() { return implicit; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ordinal; });
/* harmony import */ var d3_collection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-collection */ "./packages/muze-utils/node_modules/d3-collection/index.js");
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./array */ "./packages/muze-utils/node_modules/d3-scale/src/array.js");


var implicit = {
  name: "implicit"
};
function ordinal(range) {
  var index = Object(d3_collection__WEBPACK_IMPORTED_MODULE_0__["map"])(),
      domain = [],
      unknown = implicit;
  range = range == null ? [] : _array__WEBPACK_IMPORTED_MODULE_1__["slice"].call(range);

  function scale(d) {
    var key = d + "",
        i = index.get(key);

    if (!i) {
      if (unknown !== implicit) return unknown;
      index.set(key, i = domain.push(d));
    }

    return range[(i - 1) % range.length];
  }

  scale.domain = function (_) {
    if (!arguments.length) return domain.slice();
    domain = [], index = Object(d3_collection__WEBPACK_IMPORTED_MODULE_0__["map"])();
    var i = -1,
        n = _.length,
        d,
        key;

    while (++i < n) {
      if (!index.has(key = (d = _[i]) + "")) index.set(key, domain.push(d));
    }

    return scale;
  };

  scale.range = function (_) {
    return arguments.length ? (range = _array__WEBPACK_IMPORTED_MODULE_1__["slice"].call(_), scale) : range.slice();
  };

  scale.unknown = function (_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };

  scale.copy = function () {
    return ordinal().domain(domain).range(range).unknown(unknown);
  };

  return scale;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/pow.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/pow.js ***!
  \**************************************************************/
/*! exports provided: default, sqrt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return pow; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqrt", function() { return sqrt; });
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constant */ "./packages/muze-utils/node_modules/d3-scale/src/constant.js");
/* harmony import */ var _linear__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./linear */ "./packages/muze-utils/node_modules/d3-scale/src/linear.js");
/* harmony import */ var _continuous__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./continuous */ "./packages/muze-utils/node_modules/d3-scale/src/continuous.js");




function raise(x, exponent) {
  return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);
}

function pow() {
  var exponent = 1,
      scale = Object(_continuous__WEBPACK_IMPORTED_MODULE_2__["default"])(deinterpolate, reinterpolate),
      domain = scale.domain;

  function deinterpolate(a, b) {
    return (b = raise(b, exponent) - (a = raise(a, exponent))) ? function (x) {
      return (raise(x, exponent) - a) / b;
    } : Object(_constant__WEBPACK_IMPORTED_MODULE_0__["default"])(b);
  }

  function reinterpolate(a, b) {
    b = raise(b, exponent) - (a = raise(a, exponent));
    return function (t) {
      return raise(a + b * t, 1 / exponent);
    };
  }

  scale.exponent = function (_) {
    return arguments.length ? (exponent = +_, domain(domain())) : exponent;
  };

  scale.copy = function () {
    return Object(_continuous__WEBPACK_IMPORTED_MODULE_2__["copy"])(scale, pow().exponent(exponent));
  };

  return Object(_linear__WEBPACK_IMPORTED_MODULE_1__["linearish"])(scale);
}
function sqrt() {
  return pow().exponent(0.5);
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/quantile.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/quantile.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return quantile; });
/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-array */ "./packages/muze-utils/node_modules/d3-array/src/index.js");
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./array */ "./packages/muze-utils/node_modules/d3-scale/src/array.js");


function quantile() {
  var domain = [],
      range = [],
      thresholds = [];

  function rescale() {
    var i = 0,
        n = Math.max(1, range.length);
    thresholds = new Array(n - 1);

    while (++i < n) {
      thresholds[i - 1] = Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["quantile"])(domain, i / n);
    }

    return scale;
  }

  function scale(x) {
    if (!isNaN(x = +x)) return range[Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["bisect"])(thresholds, x)];
  }

  scale.invertExtent = function (y) {
    var i = range.indexOf(y);
    return i < 0 ? [NaN, NaN] : [i > 0 ? thresholds[i - 1] : domain[0], i < thresholds.length ? thresholds[i] : domain[domain.length - 1]];
  };

  scale.domain = function (_) {
    if (!arguments.length) return domain.slice();
    domain = [];

    for (var i = 0, n = _.length, d; i < n; ++i) {
      if (d = _[i], d != null && !isNaN(d = +d)) domain.push(d);
    }

    domain.sort(d3_array__WEBPACK_IMPORTED_MODULE_0__["ascending"]);
    return rescale();
  };

  scale.range = function (_) {
    return arguments.length ? (range = _array__WEBPACK_IMPORTED_MODULE_1__["slice"].call(_), rescale()) : range.slice();
  };

  scale.quantiles = function () {
    return thresholds.slice();
  };

  scale.copy = function () {
    return quantile().domain(domain).range(range);
  };

  return scale;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/quantize.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/quantize.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return quantize; });
/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-array */ "./packages/muze-utils/node_modules/d3-array/src/index.js");
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./array */ "./packages/muze-utils/node_modules/d3-scale/src/array.js");
/* harmony import */ var _linear__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./linear */ "./packages/muze-utils/node_modules/d3-scale/src/linear.js");



function quantize() {
  var x0 = 0,
      x1 = 1,
      n = 1,
      domain = [0.5],
      range = [0, 1];

  function scale(x) {
    if (x <= x) return range[Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["bisect"])(domain, x, 0, n)];
  }

  function rescale() {
    var i = -1;
    domain = new Array(n);

    while (++i < n) {
      domain[i] = ((i + 1) * x1 - (i - n) * x0) / (n + 1);
    }

    return scale;
  }

  scale.domain = function (_) {
    return arguments.length ? (x0 = +_[0], x1 = +_[1], rescale()) : [x0, x1];
  };

  scale.range = function (_) {
    return arguments.length ? (n = (range = _array__WEBPACK_IMPORTED_MODULE_1__["slice"].call(_)).length - 1, rescale()) : range.slice();
  };

  scale.invertExtent = function (y) {
    var i = range.indexOf(y);
    return i < 0 ? [NaN, NaN] : i < 1 ? [x0, domain[0]] : i >= n ? [domain[n - 1], x1] : [domain[i - 1], domain[i]];
  };

  scale.copy = function () {
    return quantize().domain([x0, x1]).range(range);
  };

  return Object(_linear__WEBPACK_IMPORTED_MODULE_2__["linearish"])(scale);
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/rainbow.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/rainbow.js ***!
  \******************************************************************/
/*! exports provided: warm, cool, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "warm", function() { return warm; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cool", function() { return cool; });
/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ "./packages/muze-utils/node_modules/d3-color/src/index.js");
/* harmony import */ var d3_interpolate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-interpolate */ "./packages/muze-utils/node_modules/d3-interpolate/src/index.js");


var warm = Object(d3_interpolate__WEBPACK_IMPORTED_MODULE_1__["interpolateCubehelixLong"])(Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])(-100, 0.75, 0.35), Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])(80, 1.50, 0.8));
var cool = Object(d3_interpolate__WEBPACK_IMPORTED_MODULE_1__["interpolateCubehelixLong"])(Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])(260, 0.75, 0.35), Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])(80, 1.50, 0.8));
var rainbow = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["cubehelix"])();
/* harmony default export */ __webpack_exports__["default"] = (function (t) {
  if (t < 0 || t > 1) t -= Math.floor(t);
  var ts = Math.abs(t - 0.5);
  rainbow.h = 360 * t - 100;
  rainbow.s = 1.5 - 1.5 * ts;
  rainbow.l = 0.8 - 0.9 * ts;
  return rainbow + "";
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/sequential.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/sequential.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return sequential; });
/* harmony import */ var _linear__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./linear */ "./packages/muze-utils/node_modules/d3-scale/src/linear.js");

function sequential(interpolator) {
  var x0 = 0,
      x1 = 1,
      clamp = false;

  function scale(x) {
    var t = (x - x0) / (x1 - x0);
    return interpolator(clamp ? Math.max(0, Math.min(1, t)) : t);
  }

  scale.domain = function (_) {
    return arguments.length ? (x0 = +_[0], x1 = +_[1], scale) : [x0, x1];
  };

  scale.clamp = function (_) {
    return arguments.length ? (clamp = !!_, scale) : clamp;
  };

  scale.interpolator = function (_) {
    return arguments.length ? (interpolator = _, scale) : interpolator;
  };

  scale.copy = function () {
    return sequential(interpolator).domain([x0, x1]).clamp(clamp);
  };

  return Object(_linear__WEBPACK_IMPORTED_MODULE_0__["linearish"])(scale);
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/threshold.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/threshold.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return threshold; });
/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-array */ "./packages/muze-utils/node_modules/d3-array/src/index.js");
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./array */ "./packages/muze-utils/node_modules/d3-scale/src/array.js");


function threshold() {
  var domain = [0.5],
      range = [0, 1],
      n = 1;

  function scale(x) {
    if (x <= x) return range[Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["bisect"])(domain, x, 0, n)];
  }

  scale.domain = function (_) {
    return arguments.length ? (domain = _array__WEBPACK_IMPORTED_MODULE_1__["slice"].call(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();
  };

  scale.range = function (_) {
    return arguments.length ? (range = _array__WEBPACK_IMPORTED_MODULE_1__["slice"].call(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();
  };

  scale.invertExtent = function (y) {
    var i = range.indexOf(y);
    return [domain[i - 1], domain[i]];
  };

  scale.copy = function () {
    return threshold().domain(domain).range(range);
  };

  return scale;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/tickFormat.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/tickFormat.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-array */ "./packages/muze-utils/node_modules/d3-array/src/index.js");
/* harmony import */ var d3_format__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-format */ "./packages/muze-utils/node_modules/d3-format/src/index.js");


/* harmony default export */ __webpack_exports__["default"] = (function (domain, count, specifier) {
  var start = domain[0],
      stop = domain[domain.length - 1],
      step = Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["tickStep"])(start, stop, count == null ? 10 : count),
      precision;
  specifier = Object(d3_format__WEBPACK_IMPORTED_MODULE_1__["formatSpecifier"])(specifier == null ? ",f" : specifier);

  switch (specifier.type) {
    case "s":
      {
        var value = Math.max(Math.abs(start), Math.abs(stop));
        if (specifier.precision == null && !isNaN(precision = Object(d3_format__WEBPACK_IMPORTED_MODULE_1__["precisionPrefix"])(step, value))) specifier.precision = precision;
        return Object(d3_format__WEBPACK_IMPORTED_MODULE_1__["formatPrefix"])(specifier, value);
      }

    case "":
    case "e":
    case "g":
    case "p":
    case "r":
      {
        if (specifier.precision == null && !isNaN(precision = Object(d3_format__WEBPACK_IMPORTED_MODULE_1__["precisionRound"])(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === "e");
        break;
      }

    case "f":
    case "%":
      {
        if (specifier.precision == null && !isNaN(precision = Object(d3_format__WEBPACK_IMPORTED_MODULE_1__["precisionFixed"])(step))) specifier.precision = precision - (specifier.type === "%") * 2;
        break;
      }
  }

  return Object(d3_format__WEBPACK_IMPORTED_MODULE_1__["format"])(specifier);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/time.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/time.js ***!
  \***************************************************************/
/*! exports provided: calendar, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calendar", function() { return calendar; });
/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-array */ "./packages/muze-utils/node_modules/d3-array/src/index.js");
/* harmony import */ var d3_interpolate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-interpolate */ "./packages/muze-utils/node_modules/d3-interpolate/src/index.js");
/* harmony import */ var d3_time__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! d3-time */ "./packages/muze-utils/node_modules/d3-time/src/index.js");
/* harmony import */ var d3_time_format__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! d3-time-format */ "./packages/muze-utils/node_modules/d3-time-format/src/index.js");
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./array */ "./packages/muze-utils/node_modules/d3-scale/src/array.js");
/* harmony import */ var _continuous__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./continuous */ "./packages/muze-utils/node_modules/d3-scale/src/continuous.js");
/* harmony import */ var _nice__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./nice */ "./packages/muze-utils/node_modules/d3-scale/src/nice.js");







var durationSecond = 1000,
    durationMinute = durationSecond * 60,
    durationHour = durationMinute * 60,
    durationDay = durationHour * 24,
    durationWeek = durationDay * 7,
    durationMonth = durationDay * 30,
    durationYear = durationDay * 365;

function date(t) {
  return new Date(t);
}

function number(t) {
  return t instanceof Date ? +t : +new Date(+t);
}

function calendar(year, month, week, day, hour, minute, second, millisecond, format) {
  var scale = Object(_continuous__WEBPACK_IMPORTED_MODULE_5__["default"])(_continuous__WEBPACK_IMPORTED_MODULE_5__["deinterpolateLinear"], d3_interpolate__WEBPACK_IMPORTED_MODULE_1__["interpolateNumber"]),
      invert = scale.invert,
      domain = scale.domain;
  var formatMillisecond = format(".%L"),
      formatSecond = format(":%S"),
      formatMinute = format("%I:%M"),
      formatHour = format("%I %p"),
      formatDay = format("%a %d"),
      formatWeek = format("%b %d"),
      formatMonth = format("%B"),
      formatYear = format("%Y");
  var tickIntervals = [[second, 1, durationSecond], [second, 5, 5 * durationSecond], [second, 15, 15 * durationSecond], [second, 30, 30 * durationSecond], [minute, 1, durationMinute], [minute, 5, 5 * durationMinute], [minute, 15, 15 * durationMinute], [minute, 30, 30 * durationMinute], [hour, 1, durationHour], [hour, 3, 3 * durationHour], [hour, 6, 6 * durationHour], [hour, 12, 12 * durationHour], [day, 1, durationDay], [day, 2, 2 * durationDay], [week, 1, durationWeek], [month, 1, durationMonth], [month, 3, 3 * durationMonth], [year, 1, durationYear]];

  function tickFormat(date) {
    return (second(date) < date ? formatMillisecond : minute(date) < date ? formatSecond : hour(date) < date ? formatMinute : day(date) < date ? formatHour : month(date) < date ? week(date) < date ? formatDay : formatWeek : year(date) < date ? formatMonth : formatYear)(date);
  }

  function tickInterval(interval, start, stop, step) {
    if (interval == null) interval = 10; // If a desired tick count is specified, pick a reasonable tick interval
    // based on the extent of the domain and a rough estimate of tick size.
    // Otherwise, assume interval is already a time interval and use it.

    if (typeof interval === "number") {
      var target = Math.abs(stop - start) / interval,
          i = Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["bisector"])(function (i) {
        return i[2];
      }).right(tickIntervals, target);

      if (i === tickIntervals.length) {
        step = Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["tickStep"])(start / durationYear, stop / durationYear, interval);
        interval = year;
      } else if (i) {
        i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];
        step = i[1];
        interval = i[0];
      } else {
        step = Math.max(Object(d3_array__WEBPACK_IMPORTED_MODULE_0__["tickStep"])(start, stop, interval), 1);
        interval = millisecond;
      }
    }

    return step == null ? interval : interval.every(step);
  }

  scale.invert = function (y) {
    return new Date(invert(y));
  };

  scale.domain = function (_) {
    return arguments.length ? domain(_array__WEBPACK_IMPORTED_MODULE_4__["map"].call(_, number)) : domain().map(date);
  };

  scale.ticks = function (interval, step) {
    var d = domain(),
        t0 = d[0],
        t1 = d[d.length - 1],
        r = t1 < t0,
        t;
    if (r) t = t0, t0 = t1, t1 = t;
    t = tickInterval(interval, t0, t1, step);
    t = t ? t.range(t0, t1 + 1) : []; // inclusive stop

    return r ? t.reverse() : t;
  };

  scale.tickFormat = function (count, specifier) {
    return specifier == null ? tickFormat : format(specifier);
  };

  scale.nice = function (interval, step) {
    var d = domain();
    return (interval = tickInterval(interval, d[0], d[d.length - 1], step)) ? domain(Object(_nice__WEBPACK_IMPORTED_MODULE_6__["default"])(d, interval)) : scale;
  };

  scale.copy = function () {
    return Object(_continuous__WEBPACK_IMPORTED_MODULE_5__["copy"])(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));
  };

  return scale;
}
/* harmony default export */ __webpack_exports__["default"] = (function () {
  return calendar(d3_time__WEBPACK_IMPORTED_MODULE_2__["timeYear"], d3_time__WEBPACK_IMPORTED_MODULE_2__["timeMonth"], d3_time__WEBPACK_IMPORTED_MODULE_2__["timeWeek"], d3_time__WEBPACK_IMPORTED_MODULE_2__["timeDay"], d3_time__WEBPACK_IMPORTED_MODULE_2__["timeHour"], d3_time__WEBPACK_IMPORTED_MODULE_2__["timeMinute"], d3_time__WEBPACK_IMPORTED_MODULE_2__["timeSecond"], d3_time__WEBPACK_IMPORTED_MODULE_2__["timeMillisecond"], d3_time_format__WEBPACK_IMPORTED_MODULE_3__["timeFormat"]).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/utcTime.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/utcTime.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _time__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./time */ "./packages/muze-utils/node_modules/d3-scale/src/time.js");
/* harmony import */ var d3_time_format__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-time-format */ "./packages/muze-utils/node_modules/d3-time-format/src/index.js");
/* harmony import */ var d3_time__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! d3-time */ "./packages/muze-utils/node_modules/d3-time/src/index.js");



/* harmony default export */ __webpack_exports__["default"] = (function () {
  return Object(_time__WEBPACK_IMPORTED_MODULE_0__["calendar"])(d3_time__WEBPACK_IMPORTED_MODULE_2__["utcYear"], d3_time__WEBPACK_IMPORTED_MODULE_2__["utcMonth"], d3_time__WEBPACK_IMPORTED_MODULE_2__["utcWeek"], d3_time__WEBPACK_IMPORTED_MODULE_2__["utcDay"], d3_time__WEBPACK_IMPORTED_MODULE_2__["utcHour"], d3_time__WEBPACK_IMPORTED_MODULE_2__["utcMinute"], d3_time__WEBPACK_IMPORTED_MODULE_2__["utcSecond"], d3_time__WEBPACK_IMPORTED_MODULE_2__["utcMillisecond"], d3_time_format__WEBPACK_IMPORTED_MODULE_1__["utcFormat"]).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-scale/src/viridis.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-scale/src/viridis.js ***!
  \******************************************************************/
/*! exports provided: default, magma, inferno, plasma */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "magma", function() { return magma; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "inferno", function() { return inferno; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "plasma", function() { return plasma; });
/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./colors */ "./packages/muze-utils/node_modules/d3-scale/src/colors.js");


function ramp(range) {
  var n = range.length;
  return function (t) {
    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];
  };
}

/* harmony default export */ __webpack_exports__["default"] = (ramp(Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")));
var magma = ramp(Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));
var inferno = ramp(Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));
var plasma = ramp(Object(_colors__WEBPACK_IMPORTED_MODULE_0__["default"])("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/constant.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/constant.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (x) {
  return function () {
    return x;
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/create.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/create.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./creator */ "./packages/muze-utils/node_modules/d3-selection/src/creator.js");
/* harmony import */ var _select__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./select */ "./packages/muze-utils/node_modules/d3-selection/src/select.js");


/* harmony default export */ __webpack_exports__["default"] = (function (name) {
  return Object(_select__WEBPACK_IMPORTED_MODULE_1__["default"])(Object(_creator__WEBPACK_IMPORTED_MODULE_0__["default"])(name).call(document.documentElement));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/creator.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/creator.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _namespace__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./namespace */ "./packages/muze-utils/node_modules/d3-selection/src/namespace.js");
/* harmony import */ var _namespaces__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./namespaces */ "./packages/muze-utils/node_modules/d3-selection/src/namespaces.js");



function creatorInherit(name) {
  return function () {
    var document = this.ownerDocument,
        uri = this.namespaceURI;
    return uri === _namespaces__WEBPACK_IMPORTED_MODULE_1__["xhtml"] && document.documentElement.namespaceURI === _namespaces__WEBPACK_IMPORTED_MODULE_1__["xhtml"] ? document.createElement(name) : document.createElementNS(uri, name);
  };
}

function creatorFixed(fullname) {
  return function () {
    return this.ownerDocument.createElementNS(fullname.space, fullname.local);
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (name) {
  var fullname = Object(_namespace__WEBPACK_IMPORTED_MODULE_0__["default"])(name);
  return (fullname.local ? creatorFixed : creatorInherit)(fullname);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/index.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/index.js ***!
  \********************************************************************/
/*! exports provided: create, creator, local, matcher, mouse, namespace, namespaces, clientPoint, select, selectAll, selection, selector, selectorAll, style, touch, touches, window, event, customEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _create__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./create */ "./packages/muze-utils/node_modules/d3-selection/src/create.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "create", function() { return _create__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _creator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./creator */ "./packages/muze-utils/node_modules/d3-selection/src/creator.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "creator", function() { return _creator__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _local__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./local */ "./packages/muze-utils/node_modules/d3-selection/src/local.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "local", function() { return _local__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _matcher__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./matcher */ "./packages/muze-utils/node_modules/d3-selection/src/matcher.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "matcher", function() { return _matcher__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _mouse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./mouse */ "./packages/muze-utils/node_modules/d3-selection/src/mouse.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mouse", function() { return _mouse__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _namespace__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./namespace */ "./packages/muze-utils/node_modules/d3-selection/src/namespace.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return _namespace__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _namespaces__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./namespaces */ "./packages/muze-utils/node_modules/d3-selection/src/namespaces.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "namespaces", function() { return _namespaces__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./point */ "./packages/muze-utils/node_modules/d3-selection/src/point.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "clientPoint", function() { return _point__WEBPACK_IMPORTED_MODULE_7__["default"]; });

/* harmony import */ var _select__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./select */ "./packages/muze-utils/node_modules/d3-selection/src/select.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "select", function() { return _select__WEBPACK_IMPORTED_MODULE_8__["default"]; });

/* harmony import */ var _selectAll__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./selectAll */ "./packages/muze-utils/node_modules/d3-selection/src/selectAll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "selectAll", function() { return _selectAll__WEBPACK_IMPORTED_MODULE_9__["default"]; });

/* harmony import */ var _selection_index__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./selection/index */ "./packages/muze-utils/node_modules/d3-selection/src/selection/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "selection", function() { return _selection_index__WEBPACK_IMPORTED_MODULE_10__["default"]; });

/* harmony import */ var _selector__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./selector */ "./packages/muze-utils/node_modules/d3-selection/src/selector.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "selector", function() { return _selector__WEBPACK_IMPORTED_MODULE_11__["default"]; });

/* harmony import */ var _selectorAll__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./selectorAll */ "./packages/muze-utils/node_modules/d3-selection/src/selectorAll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "selectorAll", function() { return _selectorAll__WEBPACK_IMPORTED_MODULE_12__["default"]; });

/* harmony import */ var _selection_style__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./selection/style */ "./packages/muze-utils/node_modules/d3-selection/src/selection/style.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "style", function() { return _selection_style__WEBPACK_IMPORTED_MODULE_13__["styleValue"]; });

/* harmony import */ var _touch__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./touch */ "./packages/muze-utils/node_modules/d3-selection/src/touch.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "touch", function() { return _touch__WEBPACK_IMPORTED_MODULE_14__["default"]; });

/* harmony import */ var _touches__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./touches */ "./packages/muze-utils/node_modules/d3-selection/src/touches.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "touches", function() { return _touches__WEBPACK_IMPORTED_MODULE_15__["default"]; });

/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./window */ "./packages/muze-utils/node_modules/d3-selection/src/window.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "window", function() { return _window__WEBPACK_IMPORTED_MODULE_16__["default"]; });

/* harmony import */ var _selection_on__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./selection/on */ "./packages/muze-utils/node_modules/d3-selection/src/selection/on.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "event", function() { return _selection_on__WEBPACK_IMPORTED_MODULE_17__["event"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "customEvent", function() { return _selection_on__WEBPACK_IMPORTED_MODULE_17__["customEvent"]; });




















/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/local.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/local.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return local; });
var nextId = 0;
function local() {
  return new Local();
}

function Local() {
  this._ = "@" + (++nextId).toString(36);
}

Local.prototype = local.prototype = {
  constructor: Local,
  get: function get(node) {
    var id = this._;

    while (!(id in node)) {
      if (!(node = node.parentNode)) return;
    }

    return node[id];
  },
  set: function set(node, value) {
    return node[this._] = value;
  },
  remove: function remove(node) {
    return this._ in node && delete node[this._];
  },
  toString: function toString() {
    return this._;
  }
};

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/matcher.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/matcher.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var matcher = function matcher(selector) {
  return function () {
    return this.matches(selector);
  };
};

if (typeof document !== "undefined") {
  var element = document.documentElement;

  if (!element.matches) {
    var vendorMatches = element.webkitMatchesSelector || element.msMatchesSelector || element.mozMatchesSelector || element.oMatchesSelector;

    matcher = function matcher(selector) {
      return function () {
        return vendorMatches.call(this, selector);
      };
    };
  }
}

/* harmony default export */ __webpack_exports__["default"] = (matcher);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/mouse.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/mouse.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _sourceEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sourceEvent */ "./packages/muze-utils/node_modules/d3-selection/src/sourceEvent.js");
/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./point */ "./packages/muze-utils/node_modules/d3-selection/src/point.js");


/* harmony default export */ __webpack_exports__["default"] = (function (node) {
  var event = Object(_sourceEvent__WEBPACK_IMPORTED_MODULE_0__["default"])();
  if (event.changedTouches) event = event.changedTouches[0];
  return Object(_point__WEBPACK_IMPORTED_MODULE_1__["default"])(node, event);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/namespace.js":
/*!************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/namespace.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _namespaces__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./namespaces */ "./packages/muze-utils/node_modules/d3-selection/src/namespaces.js");

/* harmony default export */ __webpack_exports__["default"] = (function (name) {
  var prefix = name += "",
      i = prefix.indexOf(":");
  if (i >= 0 && (prefix = name.slice(0, i)) !== "xmlns") name = name.slice(i + 1);
  return _namespaces__WEBPACK_IMPORTED_MODULE_0__["default"].hasOwnProperty(prefix) ? {
    space: _namespaces__WEBPACK_IMPORTED_MODULE_0__["default"][prefix],
    local: name
  } : name;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/namespaces.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/namespaces.js ***!
  \*************************************************************************/
/*! exports provided: xhtml, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "xhtml", function() { return xhtml; });
var xhtml = "http://www.w3.org/1999/xhtml";
/* harmony default export */ __webpack_exports__["default"] = ({
  svg: "http://www.w3.org/2000/svg",
  xhtml: xhtml,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/point.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/point.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (node, event) {
  var svg = node.ownerSVGElement || node;

  if (svg.createSVGPoint) {
    var point = svg.createSVGPoint();
    point.x = event.clientX, point.y = event.clientY;
    point = point.matrixTransform(node.getScreenCTM().inverse());
    return [point.x, point.y];
  }

  var rect = node.getBoundingClientRect();
  return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/select.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/select.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _selection_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./selection/index */ "./packages/muze-utils/node_modules/d3-selection/src/selection/index.js");

/* harmony default export */ __webpack_exports__["default"] = (function (selector) {
  return typeof selector === "string" ? new _selection_index__WEBPACK_IMPORTED_MODULE_0__["Selection"]([[document.querySelector(selector)]], [document.documentElement]) : new _selection_index__WEBPACK_IMPORTED_MODULE_0__["Selection"]([[selector]], _selection_index__WEBPACK_IMPORTED_MODULE_0__["root"]);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selectAll.js":
/*!************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selectAll.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _selection_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./selection/index */ "./packages/muze-utils/node_modules/d3-selection/src/selection/index.js");

/* harmony default export */ __webpack_exports__["default"] = (function (selector) {
  return typeof selector === "string" ? new _selection_index__WEBPACK_IMPORTED_MODULE_0__["Selection"]([document.querySelectorAll(selector)], [document.documentElement]) : new _selection_index__WEBPACK_IMPORTED_MODULE_0__["Selection"]([selector == null ? [] : selector], _selection_index__WEBPACK_IMPORTED_MODULE_0__["root"]);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/append.js":
/*!*******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/append.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../creator */ "./packages/muze-utils/node_modules/d3-selection/src/creator.js");

/* harmony default export */ __webpack_exports__["default"] = (function (name) {
  var create = typeof name === "function" ? name : Object(_creator__WEBPACK_IMPORTED_MODULE_0__["default"])(name);
  return this.select(function () {
    return this.appendChild(create.apply(this, arguments));
  });
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/attr.js":
/*!*****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/attr.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _namespace__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../namespace */ "./packages/muze-utils/node_modules/d3-selection/src/namespace.js");


function attrRemove(name) {
  return function () {
    this.removeAttribute(name);
  };
}

function attrRemoveNS(fullname) {
  return function () {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}

function attrConstant(name, value) {
  return function () {
    this.setAttribute(name, value);
  };
}

function attrConstantNS(fullname, value) {
  return function () {
    this.setAttributeNS(fullname.space, fullname.local, value);
  };
}

function attrFunction(name, value) {
  return function () {
    var v = value.apply(this, arguments);
    if (v == null) this.removeAttribute(name);else this.setAttribute(name, v);
  };
}

function attrFunctionNS(fullname, value) {
  return function () {
    var v = value.apply(this, arguments);
    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);else this.setAttributeNS(fullname.space, fullname.local, v);
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (name, value) {
  var fullname = Object(_namespace__WEBPACK_IMPORTED_MODULE_0__["default"])(name);

  if (arguments.length < 2) {
    var node = this.node();
    return fullname.local ? node.getAttributeNS(fullname.space, fullname.local) : node.getAttribute(fullname);
  }

  return this.each((value == null ? fullname.local ? attrRemoveNS : attrRemove : typeof value === "function" ? fullname.local ? attrFunctionNS : attrFunction : fullname.local ? attrConstantNS : attrConstant)(fullname, value));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/call.js":
/*!*****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/call.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function () {
  var callback = arguments[0];
  arguments[0] = this;
  callback.apply(null, arguments);
  return this;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/classed.js":
/*!********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/classed.js ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function classArray(string) {
  return string.trim().split(/^|\s+/);
}

function classList(node) {
  return node.classList || new ClassList(node);
}

function ClassList(node) {
  this._node = node;
  this._names = classArray(node.getAttribute("class") || "");
}

ClassList.prototype = {
  add: function add(name) {
    var i = this._names.indexOf(name);

    if (i < 0) {
      this._names.push(name);

      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  remove: function remove(name) {
    var i = this._names.indexOf(name);

    if (i >= 0) {
      this._names.splice(i, 1);

      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  contains: function contains(name) {
    return this._names.indexOf(name) >= 0;
  }
};

function classedAdd(node, names) {
  var list = classList(node),
      i = -1,
      n = names.length;

  while (++i < n) {
    list.add(names[i]);
  }
}

function classedRemove(node, names) {
  var list = classList(node),
      i = -1,
      n = names.length;

  while (++i < n) {
    list.remove(names[i]);
  }
}

function classedTrue(names) {
  return function () {
    classedAdd(this, names);
  };
}

function classedFalse(names) {
  return function () {
    classedRemove(this, names);
  };
}

function classedFunction(names, value) {
  return function () {
    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (name, value) {
  var names = classArray(name + "");

  if (arguments.length < 2) {
    var list = classList(this.node()),
        i = -1,
        n = names.length;

    while (++i < n) {
      if (!list.contains(names[i])) return false;
    }

    return true;
  }

  return this.each((typeof value === "function" ? classedFunction : value ? classedTrue : classedFalse)(names, value));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/clone.js":
/*!******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/clone.js ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function selection_cloneShallow() {
  return this.parentNode.insertBefore(this.cloneNode(false), this.nextSibling);
}

function selection_cloneDeep() {
  return this.parentNode.insertBefore(this.cloneNode(true), this.nextSibling);
}

/* harmony default export */ __webpack_exports__["default"] = (function (deep) {
  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/data.js":
/*!*****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/data.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ "./packages/muze-utils/node_modules/d3-selection/src/selection/index.js");
/* harmony import */ var _enter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enter */ "./packages/muze-utils/node_modules/d3-selection/src/selection/enter.js");
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constant */ "./packages/muze-utils/node_modules/d3-selection/src/constant.js");



var keyPrefix = "$"; // Protect against keys like “__proto__”.

function bindIndex(parent, group, enter, update, exit, data) {
  var i = 0,
      node,
      groupLength = group.length,
      dataLength = data.length; // Put any non-null nodes that fit into update.
  // Put any null nodes into enter.
  // Put any remaining data into enter.

  for (; i < dataLength; ++i) {
    if (node = group[i]) {
      node.__data__ = data[i];
      update[i] = node;
    } else {
      enter[i] = new _enter__WEBPACK_IMPORTED_MODULE_1__["EnterNode"](parent, data[i]);
    }
  } // Put any non-null nodes that don’t fit into exit.


  for (; i < groupLength; ++i) {
    if (node = group[i]) {
      exit[i] = node;
    }
  }
}

function bindKey(parent, group, enter, update, exit, data, key) {
  var i,
      node,
      nodeByKeyValue = {},
      groupLength = group.length,
      dataLength = data.length,
      keyValues = new Array(groupLength),
      keyValue; // Compute the key for each node.
  // If multiple nodes have the same key, the duplicates are added to exit.

  for (i = 0; i < groupLength; ++i) {
    if (node = group[i]) {
      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);

      if (keyValue in nodeByKeyValue) {
        exit[i] = node;
      } else {
        nodeByKeyValue[keyValue] = node;
      }
    }
  } // Compute the key for each datum.
  // If there a node associated with this key, join and add it to update.
  // If there is not (or the key is a duplicate), add it to enter.


  for (i = 0; i < dataLength; ++i) {
    keyValue = keyPrefix + key.call(parent, data[i], i, data);

    if (node = nodeByKeyValue[keyValue]) {
      update[i] = node;
      node.__data__ = data[i];
      nodeByKeyValue[keyValue] = null;
    } else {
      enter[i] = new _enter__WEBPACK_IMPORTED_MODULE_1__["EnterNode"](parent, data[i]);
    }
  } // Add any remaining nodes that were not bound to data to exit.


  for (i = 0; i < groupLength; ++i) {
    if ((node = group[i]) && nodeByKeyValue[keyValues[i]] === node) {
      exit[i] = node;
    }
  }
}

/* harmony default export */ __webpack_exports__["default"] = (function (value, key) {
  if (!value) {
    data = new Array(this.size()), j = -1;
    this.each(function (d) {
      data[++j] = d;
    });
    return data;
  }

  var bind = key ? bindKey : bindIndex,
      parents = this._parents,
      groups = this._groups;
  if (typeof value !== "function") value = Object(_constant__WEBPACK_IMPORTED_MODULE_2__["default"])(value);

  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {
    var parent = parents[j],
        group = groups[j],
        groupLength = group.length,
        data = value.call(parent, parent && parent.__data__, j, parents),
        dataLength = data.length,
        enterGroup = enter[j] = new Array(dataLength),
        updateGroup = update[j] = new Array(dataLength),
        exitGroup = exit[j] = new Array(groupLength);
    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key); // Now connect the enter nodes to their following update node, such that
    // appendChild can insert the materialized enter node before this node,
    // rather than at the end of the parent node.

    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {
      if (previous = enterGroup[i0]) {
        if (i0 >= i1) i1 = i0 + 1;

        while (!(next = updateGroup[i1]) && ++i1 < dataLength) {
          ;
        }

        previous._next = next || null;
      }
    }
  }

  update = new _index__WEBPACK_IMPORTED_MODULE_0__["Selection"](update, parents);
  update._enter = enter;
  update._exit = exit;
  return update;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/datum.js":
/*!******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/datum.js ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (value) {
  return arguments.length ? this.property("__data__", value) : this.node().__data__;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/dispatch.js":
/*!*********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/dispatch.js ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../window */ "./packages/muze-utils/node_modules/d3-selection/src/window.js");


function dispatchEvent(node, type, params) {
  var window = Object(_window__WEBPACK_IMPORTED_MODULE_0__["default"])(node),
      event = window.CustomEvent;

  if (typeof event === "function") {
    event = new event(type, params);
  } else {
    event = window.document.createEvent("Event");
    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;else event.initEvent(type, false, false);
  }

  node.dispatchEvent(event);
}

function dispatchConstant(type, params) {
  return function () {
    return dispatchEvent(this, type, params);
  };
}

function dispatchFunction(type, params) {
  return function () {
    return dispatchEvent(this, type, params.apply(this, arguments));
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (type, params) {
  return this.each((typeof params === "function" ? dispatchFunction : dispatchConstant)(type, params));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/each.js":
/*!*****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/each.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (callback) {
  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {
      if (node = group[i]) callback.call(node, node.__data__, i, group);
    }
  }

  return this;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/empty.js":
/*!******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/empty.js ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function () {
  return !this.node();
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/enter.js":
/*!******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/enter.js ***!
  \******************************************************************************/
/*! exports provided: default, EnterNode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EnterNode", function() { return EnterNode; });
/* harmony import */ var _sparse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sparse */ "./packages/muze-utils/node_modules/d3-selection/src/selection/sparse.js");
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ "./packages/muze-utils/node_modules/d3-selection/src/selection/index.js");


/* harmony default export */ __webpack_exports__["default"] = (function () {
  return new _index__WEBPACK_IMPORTED_MODULE_1__["Selection"](this._enter || this._groups.map(_sparse__WEBPACK_IMPORTED_MODULE_0__["default"]), this._parents);
});
function EnterNode(parent, datum) {
  this.ownerDocument = parent.ownerDocument;
  this.namespaceURI = parent.namespaceURI;
  this._next = null;
  this._parent = parent;
  this.__data__ = datum;
}
EnterNode.prototype = {
  constructor: EnterNode,
  appendChild: function appendChild(child) {
    return this._parent.insertBefore(child, this._next);
  },
  insertBefore: function insertBefore(child, next) {
    return this._parent.insertBefore(child, next);
  },
  querySelector: function querySelector(selector) {
    return this._parent.querySelector(selector);
  },
  querySelectorAll: function querySelectorAll(selector) {
    return this._parent.querySelectorAll(selector);
  }
};

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/exit.js":
/*!*****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/exit.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _sparse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sparse */ "./packages/muze-utils/node_modules/d3-selection/src/selection/sparse.js");
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ "./packages/muze-utils/node_modules/d3-selection/src/selection/index.js");


/* harmony default export */ __webpack_exports__["default"] = (function () {
  return new _index__WEBPACK_IMPORTED_MODULE_1__["Selection"](this._exit || this._groups.map(_sparse__WEBPACK_IMPORTED_MODULE_0__["default"]), this._parents);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/filter.js":
/*!*******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/filter.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ "./packages/muze-utils/node_modules/d3-selection/src/selection/index.js");
/* harmony import */ var _matcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../matcher */ "./packages/muze-utils/node_modules/d3-selection/src/matcher.js");


/* harmony default export */ __webpack_exports__["default"] = (function (match) {
  if (typeof match !== "function") match = Object(_matcher__WEBPACK_IMPORTED_MODULE_1__["default"])(match);

  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {
      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {
        subgroup.push(node);
      }
    }
  }

  return new _index__WEBPACK_IMPORTED_MODULE_0__["Selection"](subgroups, this._parents);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/html.js":
/*!*****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/html.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function htmlRemove() {
  this.innerHTML = "";
}

function htmlConstant(value) {
  return function () {
    this.innerHTML = value;
  };
}

function htmlFunction(value) {
  return function () {
    var v = value.apply(this, arguments);
    this.innerHTML = v == null ? "" : v;
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (value) {
  return arguments.length ? this.each(value == null ? htmlRemove : (typeof value === "function" ? htmlFunction : htmlConstant)(value)) : this.node().innerHTML;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/index.js":
/*!******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/index.js ***!
  \******************************************************************************/
/*! exports provided: root, Selection, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "root", function() { return root; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Selection", function() { return Selection; });
/* harmony import */ var _select__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./select */ "./packages/muze-utils/node_modules/d3-selection/src/selection/select.js");
/* harmony import */ var _selectAll__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./selectAll */ "./packages/muze-utils/node_modules/d3-selection/src/selection/selectAll.js");
/* harmony import */ var _filter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./filter */ "./packages/muze-utils/node_modules/d3-selection/src/selection/filter.js");
/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data */ "./packages/muze-utils/node_modules/d3-selection/src/selection/data.js");
/* harmony import */ var _enter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./enter */ "./packages/muze-utils/node_modules/d3-selection/src/selection/enter.js");
/* harmony import */ var _exit__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./exit */ "./packages/muze-utils/node_modules/d3-selection/src/selection/exit.js");
/* harmony import */ var _merge__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./merge */ "./packages/muze-utils/node_modules/d3-selection/src/selection/merge.js");
/* harmony import */ var _order__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./order */ "./packages/muze-utils/node_modules/d3-selection/src/selection/order.js");
/* harmony import */ var _sort__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./sort */ "./packages/muze-utils/node_modules/d3-selection/src/selection/sort.js");
/* harmony import */ var _call__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./call */ "./packages/muze-utils/node_modules/d3-selection/src/selection/call.js");
/* harmony import */ var _nodes__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./nodes */ "./packages/muze-utils/node_modules/d3-selection/src/selection/nodes.js");
/* harmony import */ var _node__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./node */ "./packages/muze-utils/node_modules/d3-selection/src/selection/node.js");
/* harmony import */ var _size__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./size */ "./packages/muze-utils/node_modules/d3-selection/src/selection/size.js");
/* harmony import */ var _empty__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./empty */ "./packages/muze-utils/node_modules/d3-selection/src/selection/empty.js");
/* harmony import */ var _each__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./each */ "./packages/muze-utils/node_modules/d3-selection/src/selection/each.js");
/* harmony import */ var _attr__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./attr */ "./packages/muze-utils/node_modules/d3-selection/src/selection/attr.js");
/* harmony import */ var _style__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./style */ "./packages/muze-utils/node_modules/d3-selection/src/selection/style.js");
/* harmony import */ var _property__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./property */ "./packages/muze-utils/node_modules/d3-selection/src/selection/property.js");
/* harmony import */ var _classed__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./classed */ "./packages/muze-utils/node_modules/d3-selection/src/selection/classed.js");
/* harmony import */ var _text__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./text */ "./packages/muze-utils/node_modules/d3-selection/src/selection/text.js");
/* harmony import */ var _html__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./html */ "./packages/muze-utils/node_modules/d3-selection/src/selection/html.js");
/* harmony import */ var _raise__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./raise */ "./packages/muze-utils/node_modules/d3-selection/src/selection/raise.js");
/* harmony import */ var _lower__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./lower */ "./packages/muze-utils/node_modules/d3-selection/src/selection/lower.js");
/* harmony import */ var _append__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./append */ "./packages/muze-utils/node_modules/d3-selection/src/selection/append.js");
/* harmony import */ var _insert__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./insert */ "./packages/muze-utils/node_modules/d3-selection/src/selection/insert.js");
/* harmony import */ var _remove__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./remove */ "./packages/muze-utils/node_modules/d3-selection/src/selection/remove.js");
/* harmony import */ var _clone__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./clone */ "./packages/muze-utils/node_modules/d3-selection/src/selection/clone.js");
/* harmony import */ var _datum__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./datum */ "./packages/muze-utils/node_modules/d3-selection/src/selection/datum.js");
/* harmony import */ var _on__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./on */ "./packages/muze-utils/node_modules/d3-selection/src/selection/on.js");
/* harmony import */ var _dispatch__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./dispatch */ "./packages/muze-utils/node_modules/d3-selection/src/selection/dispatch.js");






























var root = [null];
function Selection(groups, parents) {
  this._groups = groups;
  this._parents = parents;
}

function selection() {
  return new Selection([[document.documentElement]], root);
}

Selection.prototype = selection.prototype = {
  constructor: Selection,
  select: _select__WEBPACK_IMPORTED_MODULE_0__["default"],
  selectAll: _selectAll__WEBPACK_IMPORTED_MODULE_1__["default"],
  filter: _filter__WEBPACK_IMPORTED_MODULE_2__["default"],
  data: _data__WEBPACK_IMPORTED_MODULE_3__["default"],
  enter: _enter__WEBPACK_IMPORTED_MODULE_4__["default"],
  exit: _exit__WEBPACK_IMPORTED_MODULE_5__["default"],
  merge: _merge__WEBPACK_IMPORTED_MODULE_6__["default"],
  order: _order__WEBPACK_IMPORTED_MODULE_7__["default"],
  sort: _sort__WEBPACK_IMPORTED_MODULE_8__["default"],
  call: _call__WEBPACK_IMPORTED_MODULE_9__["default"],
  nodes: _nodes__WEBPACK_IMPORTED_MODULE_10__["default"],
  node: _node__WEBPACK_IMPORTED_MODULE_11__["default"],
  size: _size__WEBPACK_IMPORTED_MODULE_12__["default"],
  empty: _empty__WEBPACK_IMPORTED_MODULE_13__["default"],
  each: _each__WEBPACK_IMPORTED_MODULE_14__["default"],
  attr: _attr__WEBPACK_IMPORTED_MODULE_15__["default"],
  style: _style__WEBPACK_IMPORTED_MODULE_16__["default"],
  property: _property__WEBPACK_IMPORTED_MODULE_17__["default"],
  classed: _classed__WEBPACK_IMPORTED_MODULE_18__["default"],
  text: _text__WEBPACK_IMPORTED_MODULE_19__["default"],
  html: _html__WEBPACK_IMPORTED_MODULE_20__["default"],
  raise: _raise__WEBPACK_IMPORTED_MODULE_21__["default"],
  lower: _lower__WEBPACK_IMPORTED_MODULE_22__["default"],
  append: _append__WEBPACK_IMPORTED_MODULE_23__["default"],
  insert: _insert__WEBPACK_IMPORTED_MODULE_24__["default"],
  remove: _remove__WEBPACK_IMPORTED_MODULE_25__["default"],
  clone: _clone__WEBPACK_IMPORTED_MODULE_26__["default"],
  datum: _datum__WEBPACK_IMPORTED_MODULE_27__["default"],
  on: _on__WEBPACK_IMPORTED_MODULE_28__["default"],
  dispatch: _dispatch__WEBPACK_IMPORTED_MODULE_29__["default"]
};
/* harmony default export */ __webpack_exports__["default"] = (selection);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/insert.js":
/*!*******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/insert.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _creator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../creator */ "./packages/muze-utils/node_modules/d3-selection/src/creator.js");
/* harmony import */ var _selector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../selector */ "./packages/muze-utils/node_modules/d3-selection/src/selector.js");



function constantNull() {
  return null;
}

/* harmony default export */ __webpack_exports__["default"] = (function (name, before) {
  var create = typeof name === "function" ? name : Object(_creator__WEBPACK_IMPORTED_MODULE_0__["default"])(name),
      select = before == null ? constantNull : typeof before === "function" ? before : Object(_selector__WEBPACK_IMPORTED_MODULE_1__["default"])(before);
  return this.select(function () {
    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);
  });
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/lower.js":
/*!******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/lower.js ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function lower() {
  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);
}

/* harmony default export */ __webpack_exports__["default"] = (function () {
  return this.each(lower);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/merge.js":
/*!******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/merge.js ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ "./packages/muze-utils/node_modules/d3-selection/src/selection/index.js");

/* harmony default export */ __webpack_exports__["default"] = (function (selection) {
  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group0[i] || group1[i]) {
        merge[i] = node;
      }
    }
  }

  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }

  return new _index__WEBPACK_IMPORTED_MODULE_0__["Selection"](merges, this._parents);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/node.js":
/*!*****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/node.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function () {
  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {
      var node = group[i];
      if (node) return node;
    }
  }

  return null;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/nodes.js":
/*!******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/nodes.js ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function () {
  var nodes = new Array(this.size()),
      i = -1;
  this.each(function () {
    nodes[++i] = this;
  });
  return nodes;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/on.js":
/*!***************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/on.js ***!
  \***************************************************************************/
/*! exports provided: event, default, customEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "event", function() { return event; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "customEvent", function() { return customEvent; });
var filterEvents = {};
var event = null;

if (typeof document !== "undefined") {
  var element = document.documentElement;

  if (!("onmouseenter" in element)) {
    filterEvents = {
      mouseenter: "mouseover",
      mouseleave: "mouseout"
    };
  }
}

function filterContextListener(listener, index, group) {
  listener = contextListener(listener, index, group);
  return function (event) {
    var related = event.relatedTarget;

    if (!related || related !== this && !(related.compareDocumentPosition(this) & 8)) {
      listener.call(this, event);
    }
  };
}

function contextListener(listener, index, group) {
  return function (event1) {
    var event0 = event; // Events can be reentrant (e.g., focus).

    event = event1;

    try {
      listener.call(this, this.__data__, index, group);
    } finally {
      event = event0;
    }
  };
}

function parseTypenames(typenames) {
  return typenames.trim().split(/^|\s+/).map(function (t) {
    var name = "",
        i = t.indexOf(".");
    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);
    return {
      type: t,
      name: name
    };
  });
}

function onRemove(typename) {
  return function () {
    var on = this.__on;
    if (!on) return;

    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {
      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {
        this.removeEventListener(o.type, o.listener, o.capture);
      } else {
        on[++i] = o;
      }
    }

    if (++i) on.length = i;else delete this.__on;
  };
}

function onAdd(typename, value, capture) {
  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;
  return function (d, i, group) {
    var on = this.__on,
        o,
        listener = wrap(value, i, group);
    if (on) for (var j = 0, m = on.length; j < m; ++j) {
      if ((o = on[j]).type === typename.type && o.name === typename.name) {
        this.removeEventListener(o.type, o.listener, o.capture);
        this.addEventListener(o.type, o.listener = listener, o.capture = capture);
        o.value = value;
        return;
      }
    }
    this.addEventListener(typename.type, listener, capture);
    o = {
      type: typename.type,
      name: typename.name,
      value: value,
      listener: listener,
      capture: capture
    };
    if (!on) this.__on = [o];else on.push(o);
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (typename, value, capture) {
  var typenames = parseTypenames(typename + ""),
      i,
      n = typenames.length,
      t;

  if (arguments.length < 2) {
    var on = this.node().__on;

    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {
      for (i = 0, o = on[j]; i < n; ++i) {
        if ((t = typenames[i]).type === o.type && t.name === o.name) {
          return o.value;
        }
      }
    }
    return;
  }

  on = value ? onAdd : onRemove;
  if (capture == null) capture = false;

  for (i = 0; i < n; ++i) {
    this.each(on(typenames[i], value, capture));
  }

  return this;
});
function customEvent(event1, listener, that, args) {
  var event0 = event;
  event1.sourceEvent = event;
  event = event1;

  try {
    return listener.apply(that, args);
  } finally {
    event = event0;
  }
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/order.js":
/*!******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/order.js ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function () {
  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {
    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {
      if (node = group[i]) {
        if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);
        next = node;
      }
    }
  }

  return this;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/property.js":
/*!*********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/property.js ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function propertyRemove(name) {
  return function () {
    delete this[name];
  };
}

function propertyConstant(name, value) {
  return function () {
    this[name] = value;
  };
}

function propertyFunction(name, value) {
  return function () {
    var v = value.apply(this, arguments);
    if (v == null) delete this[name];else this[name] = v;
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (name, value) {
  return arguments.length > 1 ? this.each((value == null ? propertyRemove : typeof value === "function" ? propertyFunction : propertyConstant)(name, value)) : this.node()[name];
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/raise.js":
/*!******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/raise.js ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function raise() {
  if (this.nextSibling) this.parentNode.appendChild(this);
}

/* harmony default export */ __webpack_exports__["default"] = (function () {
  return this.each(raise);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/remove.js":
/*!*******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/remove.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function remove() {
  var parent = this.parentNode;
  if (parent) parent.removeChild(this);
}

/* harmony default export */ __webpack_exports__["default"] = (function () {
  return this.each(remove);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/select.js":
/*!*******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/select.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ "./packages/muze-utils/node_modules/d3-selection/src/selection/index.js");
/* harmony import */ var _selector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../selector */ "./packages/muze-utils/node_modules/d3-selection/src/selector.js");


/* harmony default export */ __webpack_exports__["default"] = (function (select) {
  if (typeof select !== "function") select = Object(_selector__WEBPACK_IMPORTED_MODULE_1__["default"])(select);

  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {
      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {
        if ("__data__" in node) subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
      }
    }
  }

  return new _index__WEBPACK_IMPORTED_MODULE_0__["Selection"](subgroups, this._parents);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/selectAll.js":
/*!**********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/selectAll.js ***!
  \**********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ "./packages/muze-utils/node_modules/d3-selection/src/selection/index.js");
/* harmony import */ var _selectorAll__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../selectorAll */ "./packages/muze-utils/node_modules/d3-selection/src/selectorAll.js");


/* harmony default export */ __webpack_exports__["default"] = (function (select) {
  if (typeof select !== "function") select = Object(_selectorAll__WEBPACK_IMPORTED_MODULE_1__["default"])(select);

  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        subgroups.push(select.call(node, node.__data__, i, group));
        parents.push(node);
      }
    }
  }

  return new _index__WEBPACK_IMPORTED_MODULE_0__["Selection"](subgroups, parents);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/size.js":
/*!*****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/size.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function () {
  var size = 0;
  this.each(function () {
    ++size;
  });
  return size;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/sort.js":
/*!*****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/sort.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ "./packages/muze-utils/node_modules/d3-selection/src/selection/index.js");

/* harmony default export */ __webpack_exports__["default"] = (function (compare) {
  if (!compare) compare = ascending;

  function compareNode(a, b) {
    return a && b ? compare(a.__data__, b.__data__) : !a - !b;
  }

  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        sortgroup[i] = node;
      }
    }

    sortgroup.sort(compareNode);
  }

  return new _index__WEBPACK_IMPORTED_MODULE_0__["Selection"](sortgroups, this._parents).order();
});

function ascending(a, b) {
  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/sparse.js":
/*!*******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/sparse.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (update) {
  return new Array(update.length);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/style.js":
/*!******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/style.js ***!
  \******************************************************************************/
/*! exports provided: default, styleValue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "styleValue", function() { return styleValue; });
/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../window */ "./packages/muze-utils/node_modules/d3-selection/src/window.js");


function styleRemove(name) {
  return function () {
    this.style.removeProperty(name);
  };
}

function styleConstant(name, value, priority) {
  return function () {
    this.style.setProperty(name, value, priority);
  };
}

function styleFunction(name, value, priority) {
  return function () {
    var v = value.apply(this, arguments);
    if (v == null) this.style.removeProperty(name);else this.style.setProperty(name, v, priority);
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (name, value, priority) {
  return arguments.length > 1 ? this.each((value == null ? styleRemove : typeof value === "function" ? styleFunction : styleConstant)(name, value, priority == null ? "" : priority)) : styleValue(this.node(), name);
});
function styleValue(node, name) {
  return node.style.getPropertyValue(name) || Object(_window__WEBPACK_IMPORTED_MODULE_0__["default"])(node).getComputedStyle(node, null).getPropertyValue(name);
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selection/text.js":
/*!*****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selection/text.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function textRemove() {
  this.textContent = "";
}

function textConstant(value) {
  return function () {
    this.textContent = value;
  };
}

function textFunction(value) {
  return function () {
    var v = value.apply(this, arguments);
    this.textContent = v == null ? "" : v;
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (value) {
  return arguments.length ? this.each(value == null ? textRemove : (typeof value === "function" ? textFunction : textConstant)(value)) : this.node().textContent;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selector.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selector.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function none() {}

/* harmony default export */ __webpack_exports__["default"] = (function (selector) {
  return selector == null ? none : function () {
    return this.querySelector(selector);
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/selectorAll.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/selectorAll.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function empty() {
  return [];
}

/* harmony default export */ __webpack_exports__["default"] = (function (selector) {
  return selector == null ? empty : function () {
    return this.querySelectorAll(selector);
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/sourceEvent.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/sourceEvent.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _selection_on__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./selection/on */ "./packages/muze-utils/node_modules/d3-selection/src/selection/on.js");

/* harmony default export */ __webpack_exports__["default"] = (function () {
  var current = _selection_on__WEBPACK_IMPORTED_MODULE_0__["event"],
      source;

  while (source = current.sourceEvent) {
    current = source;
  }

  return current;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/touch.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/touch.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _sourceEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sourceEvent */ "./packages/muze-utils/node_modules/d3-selection/src/sourceEvent.js");
/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./point */ "./packages/muze-utils/node_modules/d3-selection/src/point.js");


/* harmony default export */ __webpack_exports__["default"] = (function (node, touches, identifier) {
  if (arguments.length < 3) identifier = touches, touches = Object(_sourceEvent__WEBPACK_IMPORTED_MODULE_0__["default"])().changedTouches;

  for (var i = 0, n = touches ? touches.length : 0, touch; i < n; ++i) {
    if ((touch = touches[i]).identifier === identifier) {
      return Object(_point__WEBPACK_IMPORTED_MODULE_1__["default"])(node, touch);
    }
  }

  return null;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/touches.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/touches.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _sourceEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sourceEvent */ "./packages/muze-utils/node_modules/d3-selection/src/sourceEvent.js");
/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./point */ "./packages/muze-utils/node_modules/d3-selection/src/point.js");


/* harmony default export */ __webpack_exports__["default"] = (function (node, touches) {
  if (touches == null) touches = Object(_sourceEvent__WEBPACK_IMPORTED_MODULE_0__["default"])().touches;

  for (var i = 0, n = touches ? touches.length : 0, points = new Array(n); i < n; ++i) {
    points[i] = Object(_point__WEBPACK_IMPORTED_MODULE_1__["default"])(node, touches[i]);
  }

  return points;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-selection/src/window.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-selection/src/window.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (node) {
  return node.ownerDocument && node.ownerDocument.defaultView || // node is a Node
  node.document && node // node is a Window
  || node.defaultView; // node is a Document
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/arc.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/arc.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-path */ "./packages/muze-utils/node_modules/d3-path/src/index.js");
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constant */ "./packages/muze-utils/node_modules/d3-shape/src/constant.js");
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./math */ "./packages/muze-utils/node_modules/d3-shape/src/math.js");




function arcInnerRadius(d) {
  return d.innerRadius;
}

function arcOuterRadius(d) {
  return d.outerRadius;
}

function arcStartAngle(d) {
  return d.startAngle;
}

function arcEndAngle(d) {
  return d.endAngle;
}

function arcPadAngle(d) {
  return d && d.padAngle; // Note: optional!
}

function intersect(x0, y0, x1, y1, x2, y2, x3, y3) {
  var x10 = x1 - x0,
      y10 = y1 - y0,
      x32 = x3 - x2,
      y32 = y3 - y2,
      t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / (y32 * x10 - x32 * y10);
  return [x0 + t * x10, y0 + t * y10];
} // Compute perpendicular offset line of length rc.
// http://mathworld.wolfram.com/Circle-LineIntersection.html


function cornerTangents(x0, y0, x1, y1, r1, rc, cw) {
  var x01 = x0 - x1,
      y01 = y0 - y1,
      lo = (cw ? rc : -rc) / Object(_math__WEBPACK_IMPORTED_MODULE_2__["sqrt"])(x01 * x01 + y01 * y01),
      ox = lo * y01,
      oy = -lo * x01,
      x11 = x0 + ox,
      y11 = y0 + oy,
      x10 = x1 + ox,
      y10 = y1 + oy,
      x00 = (x11 + x10) / 2,
      y00 = (y11 + y10) / 2,
      dx = x10 - x11,
      dy = y10 - y11,
      d2 = dx * dx + dy * dy,
      r = r1 - rc,
      D = x11 * y10 - x10 * y11,
      d = (dy < 0 ? -1 : 1) * Object(_math__WEBPACK_IMPORTED_MODULE_2__["sqrt"])(Object(_math__WEBPACK_IMPORTED_MODULE_2__["max"])(0, r * r * d2 - D * D)),
      cx0 = (D * dy - dx * d) / d2,
      cy0 = (-D * dx - dy * d) / d2,
      cx1 = (D * dy + dx * d) / d2,
      cy1 = (-D * dx + dy * d) / d2,
      dx0 = cx0 - x00,
      dy0 = cy0 - y00,
      dx1 = cx1 - x00,
      dy1 = cy1 - y00; // Pick the closer of the two intersection points.
  // TODO Is there a faster way to determine which intersection to use?

  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;
  return {
    cx: cx0,
    cy: cy0,
    x01: -ox,
    y01: -oy,
    x11: cx0 * (r1 / r - 1),
    y11: cy0 * (r1 / r - 1)
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function () {
  var innerRadius = arcInnerRadius,
      outerRadius = arcOuterRadius,
      cornerRadius = Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(0),
      padRadius = null,
      startAngle = arcStartAngle,
      endAngle = arcEndAngle,
      padAngle = arcPadAngle,
      context = null;

  function arc() {
    var buffer,
        r,
        r0 = +innerRadius.apply(this, arguments),
        r1 = +outerRadius.apply(this, arguments),
        a0 = startAngle.apply(this, arguments) - _math__WEBPACK_IMPORTED_MODULE_2__["halfPi"],
        a1 = endAngle.apply(this, arguments) - _math__WEBPACK_IMPORTED_MODULE_2__["halfPi"],
        da = Object(_math__WEBPACK_IMPORTED_MODULE_2__["abs"])(a1 - a0),
        cw = a1 > a0;
    if (!context) context = buffer = Object(d3_path__WEBPACK_IMPORTED_MODULE_0__["path"])(); // Ensure that the outer radius is always larger than the inner radius.

    if (r1 < r0) r = r1, r1 = r0, r0 = r; // Is it a point?

    if (!(r1 > _math__WEBPACK_IMPORTED_MODULE_2__["epsilon"])) context.moveTo(0, 0); // Or is it a circle or annulus?
    else if (da > _math__WEBPACK_IMPORTED_MODULE_2__["tau"] - _math__WEBPACK_IMPORTED_MODULE_2__["epsilon"]) {
        context.moveTo(r1 * Object(_math__WEBPACK_IMPORTED_MODULE_2__["cos"])(a0), r1 * Object(_math__WEBPACK_IMPORTED_MODULE_2__["sin"])(a0));
        context.arc(0, 0, r1, a0, a1, !cw);

        if (r0 > _math__WEBPACK_IMPORTED_MODULE_2__["epsilon"]) {
          context.moveTo(r0 * Object(_math__WEBPACK_IMPORTED_MODULE_2__["cos"])(a1), r0 * Object(_math__WEBPACK_IMPORTED_MODULE_2__["sin"])(a1));
          context.arc(0, 0, r0, a1, a0, cw);
        }
      } // Or is it a circular or annular sector?
      else {
          var a01 = a0,
              a11 = a1,
              a00 = a0,
              a10 = a1,
              da0 = da,
              da1 = da,
              ap = padAngle.apply(this, arguments) / 2,
              rp = ap > _math__WEBPACK_IMPORTED_MODULE_2__["epsilon"] && (padRadius ? +padRadius.apply(this, arguments) : Object(_math__WEBPACK_IMPORTED_MODULE_2__["sqrt"])(r0 * r0 + r1 * r1)),
              rc = Object(_math__WEBPACK_IMPORTED_MODULE_2__["min"])(Object(_math__WEBPACK_IMPORTED_MODULE_2__["abs"])(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),
              rc0 = rc,
              rc1 = rc,
              t0,
              t1; // Apply padding? Note that since r1 ≥ r0, da1 ≥ da0.

          if (rp > _math__WEBPACK_IMPORTED_MODULE_2__["epsilon"]) {
            var p0 = Object(_math__WEBPACK_IMPORTED_MODULE_2__["asin"])(rp / r0 * Object(_math__WEBPACK_IMPORTED_MODULE_2__["sin"])(ap)),
                p1 = Object(_math__WEBPACK_IMPORTED_MODULE_2__["asin"])(rp / r1 * Object(_math__WEBPACK_IMPORTED_MODULE_2__["sin"])(ap));
            if ((da0 -= p0 * 2) > _math__WEBPACK_IMPORTED_MODULE_2__["epsilon"]) p0 *= cw ? 1 : -1, a00 += p0, a10 -= p0;else da0 = 0, a00 = a10 = (a0 + a1) / 2;
            if ((da1 -= p1 * 2) > _math__WEBPACK_IMPORTED_MODULE_2__["epsilon"]) p1 *= cw ? 1 : -1, a01 += p1, a11 -= p1;else da1 = 0, a01 = a11 = (a0 + a1) / 2;
          }

          var x01 = r1 * Object(_math__WEBPACK_IMPORTED_MODULE_2__["cos"])(a01),
              y01 = r1 * Object(_math__WEBPACK_IMPORTED_MODULE_2__["sin"])(a01),
              x10 = r0 * Object(_math__WEBPACK_IMPORTED_MODULE_2__["cos"])(a10),
              y10 = r0 * Object(_math__WEBPACK_IMPORTED_MODULE_2__["sin"])(a10); // Apply rounded corners?

          if (rc > _math__WEBPACK_IMPORTED_MODULE_2__["epsilon"]) {
            var x11 = r1 * Object(_math__WEBPACK_IMPORTED_MODULE_2__["cos"])(a11),
                y11 = r1 * Object(_math__WEBPACK_IMPORTED_MODULE_2__["sin"])(a11),
                x00 = r0 * Object(_math__WEBPACK_IMPORTED_MODULE_2__["cos"])(a00),
                y00 = r0 * Object(_math__WEBPACK_IMPORTED_MODULE_2__["sin"])(a00); // Restrict the corner radius according to the sector angle.

            if (da < _math__WEBPACK_IMPORTED_MODULE_2__["pi"]) {
              var oc = da0 > _math__WEBPACK_IMPORTED_MODULE_2__["epsilon"] ? intersect(x01, y01, x00, y00, x11, y11, x10, y10) : [x10, y10],
                  ax = x01 - oc[0],
                  ay = y01 - oc[1],
                  bx = x11 - oc[0],
                  by = y11 - oc[1],
                  kc = 1 / Object(_math__WEBPACK_IMPORTED_MODULE_2__["sin"])(Object(_math__WEBPACK_IMPORTED_MODULE_2__["acos"])((ax * bx + ay * by) / (Object(_math__WEBPACK_IMPORTED_MODULE_2__["sqrt"])(ax * ax + ay * ay) * Object(_math__WEBPACK_IMPORTED_MODULE_2__["sqrt"])(bx * bx + by * by))) / 2),
                  lc = Object(_math__WEBPACK_IMPORTED_MODULE_2__["sqrt"])(oc[0] * oc[0] + oc[1] * oc[1]);
              rc0 = Object(_math__WEBPACK_IMPORTED_MODULE_2__["min"])(rc, (r0 - lc) / (kc - 1));
              rc1 = Object(_math__WEBPACK_IMPORTED_MODULE_2__["min"])(rc, (r1 - lc) / (kc + 1));
            }
          } // Is the sector collapsed to a line?


          if (!(da1 > _math__WEBPACK_IMPORTED_MODULE_2__["epsilon"])) context.moveTo(x01, y01); // Does the sector’s outer ring have rounded corners?
          else if (rc1 > _math__WEBPACK_IMPORTED_MODULE_2__["epsilon"]) {
              t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);
              t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);
              context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01); // Have the corners merged?

              if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t0.y01, t0.x01), Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t1.y01, t1.x01), !cw); // Otherwise, draw the two corners and the ring.
              else {
                  context.arc(t0.cx, t0.cy, rc1, Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t0.y01, t0.x01), Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t0.y11, t0.x11), !cw);
                  context.arc(0, 0, r1, Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t0.cy + t0.y11, t0.cx + t0.x11), Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t1.cy + t1.y11, t1.cx + t1.x11), !cw);
                  context.arc(t1.cx, t1.cy, rc1, Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t1.y11, t1.x11), Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t1.y01, t1.x01), !cw);
                }
            } // Or is the outer ring just a circular arc?
            else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw); // Is there no inner ring, and it’s a circular sector?
          // Or perhaps it’s an annular sector collapsed due to padding?

          if (!(r0 > _math__WEBPACK_IMPORTED_MODULE_2__["epsilon"]) || !(da0 > _math__WEBPACK_IMPORTED_MODULE_2__["epsilon"])) context.lineTo(x10, y10); // Does the sector’s inner ring (or point) have rounded corners?
          else if (rc0 > _math__WEBPACK_IMPORTED_MODULE_2__["epsilon"]) {
              t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);
              t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);
              context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01); // Have the corners merged?

              if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t0.y01, t0.x01), Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t1.y01, t1.x01), !cw); // Otherwise, draw the two corners and the ring.
              else {
                  context.arc(t0.cx, t0.cy, rc0, Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t0.y01, t0.x01), Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t0.y11, t0.x11), !cw);
                  context.arc(0, 0, r0, Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t0.cy + t0.y11, t0.cx + t0.x11), Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t1.cy + t1.y11, t1.cx + t1.x11), cw);
                  context.arc(t1.cx, t1.cy, rc0, Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t1.y11, t1.x11), Object(_math__WEBPACK_IMPORTED_MODULE_2__["atan2"])(t1.y01, t1.x01), !cw);
                }
            } // Or is the inner ring just a circular arc?
            else context.arc(0, 0, r0, a10, a00, cw);
        }
    context.closePath();
    if (buffer) return context = null, buffer + "" || null;
  }

  arc.centroid = function () {
    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,
        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - _math__WEBPACK_IMPORTED_MODULE_2__["pi"] / 2;
    return [Object(_math__WEBPACK_IMPORTED_MODULE_2__["cos"])(a) * r, Object(_math__WEBPACK_IMPORTED_MODULE_2__["sin"])(a) * r];
  };

  arc.innerRadius = function (_) {
    return arguments.length ? (innerRadius = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), arc) : innerRadius;
  };

  arc.outerRadius = function (_) {
    return arguments.length ? (outerRadius = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), arc) : outerRadius;
  };

  arc.cornerRadius = function (_) {
    return arguments.length ? (cornerRadius = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), arc) : cornerRadius;
  };

  arc.padRadius = function (_) {
    return arguments.length ? (padRadius = _ == null ? null : typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), arc) : padRadius;
  };

  arc.startAngle = function (_) {
    return arguments.length ? (startAngle = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), arc) : startAngle;
  };

  arc.endAngle = function (_) {
    return arguments.length ? (endAngle = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), arc) : endAngle;
  };

  arc.padAngle = function (_) {
    return arguments.length ? (padAngle = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), arc) : padAngle;
  };

  arc.context = function (_) {
    return arguments.length ? (context = _ == null ? null : _, arc) : context;
  };

  return arc;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/area.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/area.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-path */ "./packages/muze-utils/node_modules/d3-path/src/index.js");
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constant */ "./packages/muze-utils/node_modules/d3-shape/src/constant.js");
/* harmony import */ var _curve_linear__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./curve/linear */ "./packages/muze-utils/node_modules/d3-shape/src/curve/linear.js");
/* harmony import */ var _line__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./line */ "./packages/muze-utils/node_modules/d3-shape/src/line.js");
/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./point */ "./packages/muze-utils/node_modules/d3-shape/src/point.js");





/* harmony default export */ __webpack_exports__["default"] = (function () {
  var x0 = _point__WEBPACK_IMPORTED_MODULE_4__["x"],
      x1 = null,
      y0 = Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(0),
      y1 = _point__WEBPACK_IMPORTED_MODULE_4__["y"],
      defined = Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(true),
      context = null,
      curve = _curve_linear__WEBPACK_IMPORTED_MODULE_2__["default"],
      output = null;

  function area(data) {
    var i,
        j,
        k,
        n = data.length,
        d,
        defined0 = false,
        buffer,
        x0z = new Array(n),
        y0z = new Array(n);
    if (context == null) output = curve(buffer = Object(d3_path__WEBPACK_IMPORTED_MODULE_0__["path"])());

    for (i = 0; i <= n; ++i) {
      if (!(i < n && defined(d = data[i], i, data)) === defined0) {
        if (defined0 = !defined0) {
          j = i;
          output.areaStart();
          output.lineStart();
        } else {
          output.lineEnd();
          output.lineStart();

          for (k = i - 1; k >= j; --k) {
            output.point(x0z[k], y0z[k]);
          }

          output.lineEnd();
          output.areaEnd();
        }
      }

      if (defined0) {
        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);
        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);
      }
    }

    if (buffer) return output = null, buffer + "" || null;
  }

  function arealine() {
    return Object(_line__WEBPACK_IMPORTED_MODULE_3__["default"])().defined(defined).curve(curve).context(context);
  }

  area.x = function (_) {
    return arguments.length ? (x0 = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), x1 = null, area) : x0;
  };

  area.x0 = function (_) {
    return arguments.length ? (x0 = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), area) : x0;
  };

  area.x1 = function (_) {
    return arguments.length ? (x1 = _ == null ? null : typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), area) : x1;
  };

  area.y = function (_) {
    return arguments.length ? (y0 = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), y1 = null, area) : y0;
  };

  area.y0 = function (_) {
    return arguments.length ? (y0 = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), area) : y0;
  };

  area.y1 = function (_) {
    return arguments.length ? (y1 = _ == null ? null : typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), area) : y1;
  };

  area.lineX0 = area.lineY0 = function () {
    return arealine().x(x0).y(y0);
  };

  area.lineY1 = function () {
    return arealine().x(x0).y(y1);
  };

  area.lineX1 = function () {
    return arealine().x(x1).y(y0);
  };

  area.defined = function (_) {
    return arguments.length ? (defined = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(!!_), area) : defined;
  };

  area.curve = function (_) {
    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;
  };

  area.context = function (_) {
    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;
  };

  return area;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/areaRadial.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/areaRadial.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _curve_radial__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./curve/radial */ "./packages/muze-utils/node_modules/d3-shape/src/curve/radial.js");
/* harmony import */ var _area__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./area */ "./packages/muze-utils/node_modules/d3-shape/src/area.js");
/* harmony import */ var _lineRadial__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lineRadial */ "./packages/muze-utils/node_modules/d3-shape/src/lineRadial.js");



/* harmony default export */ __webpack_exports__["default"] = (function () {
  var a = Object(_area__WEBPACK_IMPORTED_MODULE_1__["default"])().curve(_curve_radial__WEBPACK_IMPORTED_MODULE_0__["curveRadialLinear"]),
      c = a.curve,
      x0 = a.lineX0,
      x1 = a.lineX1,
      y0 = a.lineY0,
      y1 = a.lineY1;
  a.angle = a.x, delete a.x;
  a.startAngle = a.x0, delete a.x0;
  a.endAngle = a.x1, delete a.x1;
  a.radius = a.y, delete a.y;
  a.innerRadius = a.y0, delete a.y0;
  a.outerRadius = a.y1, delete a.y1;
  a.lineStartAngle = function () {
    return Object(_lineRadial__WEBPACK_IMPORTED_MODULE_2__["lineRadial"])(x0());
  }, delete a.lineX0;
  a.lineEndAngle = function () {
    return Object(_lineRadial__WEBPACK_IMPORTED_MODULE_2__["lineRadial"])(x1());
  }, delete a.lineX1;
  a.lineInnerRadius = function () {
    return Object(_lineRadial__WEBPACK_IMPORTED_MODULE_2__["lineRadial"])(y0());
  }, delete a.lineY0;
  a.lineOuterRadius = function () {
    return Object(_lineRadial__WEBPACK_IMPORTED_MODULE_2__["lineRadial"])(y1());
  }, delete a.lineY1;

  a.curve = function (_) {
    return arguments.length ? c(Object(_curve_radial__WEBPACK_IMPORTED_MODULE_0__["default"])(_)) : c()._curve;
  };

  return a;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/array.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/array.js ***!
  \****************************************************************/
/*! exports provided: slice */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "slice", function() { return slice; });
var slice = Array.prototype.slice;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/constant.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/constant.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (x) {
  return function constant() {
    return x;
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/basis.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/basis.js ***!
  \**********************************************************************/
/*! exports provided: point, Basis, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "point", function() { return _point; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Basis", function() { return Basis; });
function _point(that, x, y) {
  that._context.bezierCurveTo((2 * that._x0 + that._x1) / 3, (2 * that._y0 + that._y1) / 3, (that._x0 + 2 * that._x1) / 3, (that._y0 + 2 * that._y1) / 3, (that._x0 + 4 * that._x1 + x) / 6, (that._y0 + 4 * that._y1 + y) / 6);
}


function Basis(context) {
  this._context = context;
}
Basis.prototype = {
  areaStart: function areaStart() {
    this._line = 0;
  },
  areaEnd: function areaEnd() {
    this._line = NaN;
  },
  lineStart: function lineStart() {
    this._x0 = this._x1 = this._y0 = this._y1 = NaN;
    this._point = 0;
  },
  lineEnd: function lineEnd() {
    switch (this._point) {
      case 3:
        _point(this, this._x1, this._y1);

      // proceed

      case 2:
        this._context.lineTo(this._x1, this._y1);

        break;
    }

    if (this._line || this._line !== 0 && this._point === 1) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function point(x, y) {
    x = +x, y = +y;

    switch (this._point) {
      case 0:
        this._point = 1;
        this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y);
        break;

      case 1:
        this._point = 2;
        break;

      case 2:
        this._point = 3;

        this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6);

      // proceed

      default:
        _point(this, x, y);

        break;
    }

    this._x0 = this._x1, this._x1 = x;
    this._y0 = this._y1, this._y1 = y;
  }
};
/* harmony default export */ __webpack_exports__["default"] = (function (context) {
  return new Basis(context);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/basisClosed.js":
/*!****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/basisClosed.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _noop__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../noop */ "./packages/muze-utils/node_modules/d3-shape/src/noop.js");
/* harmony import */ var _basis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./basis */ "./packages/muze-utils/node_modules/d3-shape/src/curve/basis.js");



function BasisClosed(context) {
  this._context = context;
}

BasisClosed.prototype = {
  areaStart: _noop__WEBPACK_IMPORTED_MODULE_0__["default"],
  areaEnd: _noop__WEBPACK_IMPORTED_MODULE_0__["default"],
  lineStart: function lineStart() {
    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;
    this._point = 0;
  },
  lineEnd: function lineEnd() {
    switch (this._point) {
      case 1:
        {
          this._context.moveTo(this._x2, this._y2);

          this._context.closePath();

          break;
        }

      case 2:
        {
          this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);

          this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);

          this._context.closePath();

          break;
        }

      case 3:
        {
          this.point(this._x2, this._y2);
          this.point(this._x3, this._y3);
          this.point(this._x4, this._y4);
          break;
        }
    }
  },
  point: function point(x, y) {
    x = +x, y = +y;

    switch (this._point) {
      case 0:
        this._point = 1;
        this._x2 = x, this._y2 = y;
        break;

      case 1:
        this._point = 2;
        this._x3 = x, this._y3 = y;
        break;

      case 2:
        this._point = 3;
        this._x4 = x, this._y4 = y;

        this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6);

        break;

      default:
        Object(_basis__WEBPACK_IMPORTED_MODULE_1__["point"])(this, x, y);

        break;
    }

    this._x0 = this._x1, this._x1 = x;
    this._y0 = this._y1, this._y1 = y;
  }
};
/* harmony default export */ __webpack_exports__["default"] = (function (context) {
  return new BasisClosed(context);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/basisOpen.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/basisOpen.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _basis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basis */ "./packages/muze-utils/node_modules/d3-shape/src/curve/basis.js");


function BasisOpen(context) {
  this._context = context;
}

BasisOpen.prototype = {
  areaStart: function areaStart() {
    this._line = 0;
  },
  areaEnd: function areaEnd() {
    this._line = NaN;
  },
  lineStart: function lineStart() {
    this._x0 = this._x1 = this._y0 = this._y1 = NaN;
    this._point = 0;
  },
  lineEnd: function lineEnd() {
    if (this._line || this._line !== 0 && this._point === 3) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function point(x, y) {
    x = +x, y = +y;

    switch (this._point) {
      case 0:
        this._point = 1;
        break;

      case 1:
        this._point = 2;
        break;

      case 2:
        this._point = 3;
        var x0 = (this._x0 + 4 * this._x1 + x) / 6,
            y0 = (this._y0 + 4 * this._y1 + y) / 6;
        this._line ? this._context.lineTo(x0, y0) : this._context.moveTo(x0, y0);
        break;

      case 3:
        this._point = 4;
      // proceed

      default:
        Object(_basis__WEBPACK_IMPORTED_MODULE_0__["point"])(this, x, y);

        break;
    }

    this._x0 = this._x1, this._x1 = x;
    this._y0 = this._y1, this._y1 = y;
  }
};
/* harmony default export */ __webpack_exports__["default"] = (function (context) {
  return new BasisOpen(context);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/bundle.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/bundle.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _basis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basis */ "./packages/muze-utils/node_modules/d3-shape/src/curve/basis.js");


function Bundle(context, beta) {
  this._basis = new _basis__WEBPACK_IMPORTED_MODULE_0__["Basis"](context);
  this._beta = beta;
}

Bundle.prototype = {
  lineStart: function lineStart() {
    this._x = [];
    this._y = [];

    this._basis.lineStart();
  },
  lineEnd: function lineEnd() {
    var x = this._x,
        y = this._y,
        j = x.length - 1;

    if (j > 0) {
      var x0 = x[0],
          y0 = y[0],
          dx = x[j] - x0,
          dy = y[j] - y0,
          i = -1,
          t;

      while (++i <= j) {
        t = i / j;

        this._basis.point(this._beta * x[i] + (1 - this._beta) * (x0 + t * dx), this._beta * y[i] + (1 - this._beta) * (y0 + t * dy));
      }
    }

    this._x = this._y = null;

    this._basis.lineEnd();
  },
  point: function point(x, y) {
    this._x.push(+x);

    this._y.push(+y);
  }
};
/* harmony default export */ __webpack_exports__["default"] = ((function custom(beta) {
  function bundle(context) {
    return beta === 1 ? new _basis__WEBPACK_IMPORTED_MODULE_0__["Basis"](context) : new Bundle(context, beta);
  }

  bundle.beta = function (beta) {
    return custom(+beta);
  };

  return bundle;
})(0.85));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/cardinal.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/cardinal.js ***!
  \*************************************************************************/
/*! exports provided: point, Cardinal, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "point", function() { return _point; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cardinal", function() { return Cardinal; });
function _point(that, x, y) {
  that._context.bezierCurveTo(that._x1 + that._k * (that._x2 - that._x0), that._y1 + that._k * (that._y2 - that._y0), that._x2 + that._k * (that._x1 - x), that._y2 + that._k * (that._y1 - y), that._x2, that._y2);
}


function Cardinal(context, tension) {
  this._context = context;
  this._k = (1 - tension) / 6;
}
Cardinal.prototype = {
  areaStart: function areaStart() {
    this._line = 0;
  },
  areaEnd: function areaEnd() {
    this._line = NaN;
  },
  lineStart: function lineStart() {
    this._x0 = this._x1 = this._x2 = this._y0 = this._y1 = this._y2 = NaN;
    this._point = 0;
  },
  lineEnd: function lineEnd() {
    switch (this._point) {
      case 2:
        this._context.lineTo(this._x2, this._y2);

        break;

      case 3:
        _point(this, this._x1, this._y1);

        break;
    }

    if (this._line || this._line !== 0 && this._point === 1) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function point(x, y) {
    x = +x, y = +y;

    switch (this._point) {
      case 0:
        this._point = 1;
        this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y);
        break;

      case 1:
        this._point = 2;
        this._x1 = x, this._y1 = y;
        break;

      case 2:
        this._point = 3;
      // proceed

      default:
        _point(this, x, y);

        break;
    }

    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;
  }
};
/* harmony default export */ __webpack_exports__["default"] = ((function custom(tension) {
  function cardinal(context) {
    return new Cardinal(context, tension);
  }

  cardinal.tension = function (tension) {
    return custom(+tension);
  };

  return cardinal;
})(0));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/cardinalClosed.js":
/*!*******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/cardinalClosed.js ***!
  \*******************************************************************************/
/*! exports provided: CardinalClosed, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CardinalClosed", function() { return CardinalClosed; });
/* harmony import */ var _noop__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../noop */ "./packages/muze-utils/node_modules/d3-shape/src/noop.js");
/* harmony import */ var _cardinal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cardinal */ "./packages/muze-utils/node_modules/d3-shape/src/curve/cardinal.js");


function CardinalClosed(context, tension) {
  this._context = context;
  this._k = (1 - tension) / 6;
}
CardinalClosed.prototype = {
  areaStart: _noop__WEBPACK_IMPORTED_MODULE_0__["default"],
  areaEnd: _noop__WEBPACK_IMPORTED_MODULE_0__["default"],
  lineStart: function lineStart() {
    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 = this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;
    this._point = 0;
  },
  lineEnd: function lineEnd() {
    switch (this._point) {
      case 1:
        {
          this._context.moveTo(this._x3, this._y3);

          this._context.closePath();

          break;
        }

      case 2:
        {
          this._context.lineTo(this._x3, this._y3);

          this._context.closePath();

          break;
        }

      case 3:
        {
          this.point(this._x3, this._y3);
          this.point(this._x4, this._y4);
          this.point(this._x5, this._y5);
          break;
        }
    }
  },
  point: function point(x, y) {
    x = +x, y = +y;

    switch (this._point) {
      case 0:
        this._point = 1;
        this._x3 = x, this._y3 = y;
        break;

      case 1:
        this._point = 2;

        this._context.moveTo(this._x4 = x, this._y4 = y);

        break;

      case 2:
        this._point = 3;
        this._x5 = x, this._y5 = y;
        break;

      default:
        Object(_cardinal__WEBPACK_IMPORTED_MODULE_1__["point"])(this, x, y);

        break;
    }

    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;
  }
};
/* harmony default export */ __webpack_exports__["default"] = ((function custom(tension) {
  function cardinal(context) {
    return new CardinalClosed(context, tension);
  }

  cardinal.tension = function (tension) {
    return custom(+tension);
  };

  return cardinal;
})(0));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/cardinalOpen.js":
/*!*****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/cardinalOpen.js ***!
  \*****************************************************************************/
/*! exports provided: CardinalOpen, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CardinalOpen", function() { return CardinalOpen; });
/* harmony import */ var _cardinal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cardinal */ "./packages/muze-utils/node_modules/d3-shape/src/curve/cardinal.js");

function CardinalOpen(context, tension) {
  this._context = context;
  this._k = (1 - tension) / 6;
}
CardinalOpen.prototype = {
  areaStart: function areaStart() {
    this._line = 0;
  },
  areaEnd: function areaEnd() {
    this._line = NaN;
  },
  lineStart: function lineStart() {
    this._x0 = this._x1 = this._x2 = this._y0 = this._y1 = this._y2 = NaN;
    this._point = 0;
  },
  lineEnd: function lineEnd() {
    if (this._line || this._line !== 0 && this._point === 3) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function point(x, y) {
    x = +x, y = +y;

    switch (this._point) {
      case 0:
        this._point = 1;
        break;

      case 1:
        this._point = 2;
        break;

      case 2:
        this._point = 3;
        this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2);
        break;

      case 3:
        this._point = 4;
      // proceed

      default:
        Object(_cardinal__WEBPACK_IMPORTED_MODULE_0__["point"])(this, x, y);

        break;
    }

    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;
  }
};
/* harmony default export */ __webpack_exports__["default"] = ((function custom(tension) {
  function cardinal(context) {
    return new CardinalOpen(context, tension);
  }

  cardinal.tension = function (tension) {
    return custom(+tension);
  };

  return cardinal;
})(0));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRom.js":
/*!***************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRom.js ***!
  \***************************************************************************/
/*! exports provided: point, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "point", function() { return _point; });
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math */ "./packages/muze-utils/node_modules/d3-shape/src/math.js");
/* harmony import */ var _cardinal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cardinal */ "./packages/muze-utils/node_modules/d3-shape/src/curve/cardinal.js");



function _point(that, x, y) {
  var x1 = that._x1,
      y1 = that._y1,
      x2 = that._x2,
      y2 = that._y2;

  if (that._l01_a > _math__WEBPACK_IMPORTED_MODULE_0__["epsilon"]) {
    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,
        n = 3 * that._l01_a * (that._l01_a + that._l12_a);
    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;
    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;
  }

  if (that._l23_a > _math__WEBPACK_IMPORTED_MODULE_0__["epsilon"]) {
    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,
        m = 3 * that._l23_a * (that._l23_a + that._l12_a);
    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;
    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;
  }

  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);
}



function CatmullRom(context, alpha) {
  this._context = context;
  this._alpha = alpha;
}

CatmullRom.prototype = {
  areaStart: function areaStart() {
    this._line = 0;
  },
  areaEnd: function areaEnd() {
    this._line = NaN;
  },
  lineStart: function lineStart() {
    this._x0 = this._x1 = this._x2 = this._y0 = this._y1 = this._y2 = NaN;
    this._l01_a = this._l12_a = this._l23_a = this._l01_2a = this._l12_2a = this._l23_2a = this._point = 0;
  },
  lineEnd: function lineEnd() {
    switch (this._point) {
      case 2:
        this._context.lineTo(this._x2, this._y2);

        break;

      case 3:
        this.point(this._x2, this._y2);
        break;
    }

    if (this._line || this._line !== 0 && this._point === 1) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function point(x, y) {
    x = +x, y = +y;

    if (this._point) {
      var x23 = this._x2 - x,
          y23 = this._y2 - y;
      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));
    }

    switch (this._point) {
      case 0:
        this._point = 1;
        this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y);
        break;

      case 1:
        this._point = 2;
        break;

      case 2:
        this._point = 3;
      // proceed

      default:
        _point(this, x, y);

        break;
    }

    this._l01_a = this._l12_a, this._l12_a = this._l23_a;
    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;
  }
};
/* harmony default export */ __webpack_exports__["default"] = ((function custom(alpha) {
  function catmullRom(context) {
    return alpha ? new CatmullRom(context, alpha) : new _cardinal__WEBPACK_IMPORTED_MODULE_1__["Cardinal"](context, 0);
  }

  catmullRom.alpha = function (alpha) {
    return custom(+alpha);
  };

  return catmullRom;
})(0.5));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRomClosed.js":
/*!*********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRomClosed.js ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _cardinalClosed__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cardinalClosed */ "./packages/muze-utils/node_modules/d3-shape/src/curve/cardinalClosed.js");
/* harmony import */ var _noop__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../noop */ "./packages/muze-utils/node_modules/d3-shape/src/noop.js");
/* harmony import */ var _catmullRom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./catmullRom */ "./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRom.js");




function CatmullRomClosed(context, alpha) {
  this._context = context;
  this._alpha = alpha;
}

CatmullRomClosed.prototype = {
  areaStart: _noop__WEBPACK_IMPORTED_MODULE_1__["default"],
  areaEnd: _noop__WEBPACK_IMPORTED_MODULE_1__["default"],
  lineStart: function lineStart() {
    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 = this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;
    this._l01_a = this._l12_a = this._l23_a = this._l01_2a = this._l12_2a = this._l23_2a = this._point = 0;
  },
  lineEnd: function lineEnd() {
    switch (this._point) {
      case 1:
        {
          this._context.moveTo(this._x3, this._y3);

          this._context.closePath();

          break;
        }

      case 2:
        {
          this._context.lineTo(this._x3, this._y3);

          this._context.closePath();

          break;
        }

      case 3:
        {
          this.point(this._x3, this._y3);
          this.point(this._x4, this._y4);
          this.point(this._x5, this._y5);
          break;
        }
    }
  },
  point: function point(x, y) {
    x = +x, y = +y;

    if (this._point) {
      var x23 = this._x2 - x,
          y23 = this._y2 - y;
      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));
    }

    switch (this._point) {
      case 0:
        this._point = 1;
        this._x3 = x, this._y3 = y;
        break;

      case 1:
        this._point = 2;

        this._context.moveTo(this._x4 = x, this._y4 = y);

        break;

      case 2:
        this._point = 3;
        this._x5 = x, this._y5 = y;
        break;

      default:
        Object(_catmullRom__WEBPACK_IMPORTED_MODULE_2__["point"])(this, x, y);

        break;
    }

    this._l01_a = this._l12_a, this._l12_a = this._l23_a;
    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;
  }
};
/* harmony default export */ __webpack_exports__["default"] = ((function custom(alpha) {
  function catmullRom(context) {
    return alpha ? new CatmullRomClosed(context, alpha) : new _cardinalClosed__WEBPACK_IMPORTED_MODULE_0__["CardinalClosed"](context, 0);
  }

  catmullRom.alpha = function (alpha) {
    return custom(+alpha);
  };

  return catmullRom;
})(0.5));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRomOpen.js":
/*!*******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRomOpen.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _cardinalOpen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cardinalOpen */ "./packages/muze-utils/node_modules/d3-shape/src/curve/cardinalOpen.js");
/* harmony import */ var _catmullRom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./catmullRom */ "./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRom.js");



function CatmullRomOpen(context, alpha) {
  this._context = context;
  this._alpha = alpha;
}

CatmullRomOpen.prototype = {
  areaStart: function areaStart() {
    this._line = 0;
  },
  areaEnd: function areaEnd() {
    this._line = NaN;
  },
  lineStart: function lineStart() {
    this._x0 = this._x1 = this._x2 = this._y0 = this._y1 = this._y2 = NaN;
    this._l01_a = this._l12_a = this._l23_a = this._l01_2a = this._l12_2a = this._l23_2a = this._point = 0;
  },
  lineEnd: function lineEnd() {
    if (this._line || this._line !== 0 && this._point === 3) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function point(x, y) {
    x = +x, y = +y;

    if (this._point) {
      var x23 = this._x2 - x,
          y23 = this._y2 - y;
      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));
    }

    switch (this._point) {
      case 0:
        this._point = 1;
        break;

      case 1:
        this._point = 2;
        break;

      case 2:
        this._point = 3;
        this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2);
        break;

      case 3:
        this._point = 4;
      // proceed

      default:
        Object(_catmullRom__WEBPACK_IMPORTED_MODULE_1__["point"])(this, x, y);

        break;
    }

    this._l01_a = this._l12_a, this._l12_a = this._l23_a;
    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;
  }
};
/* harmony default export */ __webpack_exports__["default"] = ((function custom(alpha) {
  function catmullRom(context) {
    return alpha ? new CatmullRomOpen(context, alpha) : new _cardinalOpen__WEBPACK_IMPORTED_MODULE_0__["CardinalOpen"](context, 0);
  }

  catmullRom.alpha = function (alpha) {
    return custom(+alpha);
  };

  return catmullRom;
})(0.5));

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/linear.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/linear.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function Linear(context) {
  this._context = context;
}

Linear.prototype = {
  areaStart: function areaStart() {
    this._line = 0;
  },
  areaEnd: function areaEnd() {
    this._line = NaN;
  },
  lineStart: function lineStart() {
    this._point = 0;
  },
  lineEnd: function lineEnd() {
    if (this._line || this._line !== 0 && this._point === 1) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function point(x, y) {
    x = +x, y = +y;

    switch (this._point) {
      case 0:
        this._point = 1;
        this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y);
        break;

      case 1:
        this._point = 2;
      // proceed

      default:
        this._context.lineTo(x, y);

        break;
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (function (context) {
  return new Linear(context);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/linearClosed.js":
/*!*****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/linearClosed.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _noop__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../noop */ "./packages/muze-utils/node_modules/d3-shape/src/noop.js");


function LinearClosed(context) {
  this._context = context;
}

LinearClosed.prototype = {
  areaStart: _noop__WEBPACK_IMPORTED_MODULE_0__["default"],
  areaEnd: _noop__WEBPACK_IMPORTED_MODULE_0__["default"],
  lineStart: function lineStart() {
    this._point = 0;
  },
  lineEnd: function lineEnd() {
    if (this._point) this._context.closePath();
  },
  point: function point(x, y) {
    x = +x, y = +y;
    if (this._point) this._context.lineTo(x, y);else this._point = 1, this._context.moveTo(x, y);
  }
};
/* harmony default export */ __webpack_exports__["default"] = (function (context) {
  return new LinearClosed(context);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/monotone.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/monotone.js ***!
  \*************************************************************************/
/*! exports provided: monotoneX, monotoneY */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "monotoneX", function() { return monotoneX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "monotoneY", function() { return monotoneY; });
function sign(x) {
  return x < 0 ? -1 : 1;
} // Calculate the slopes of the tangents (Hermite-type interpolation) based on
// the following paper: Steffen, M. 1990. A Simple Method for Monotonic
// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.
// NOV(II), P. 443, 1990.


function slope3(that, x2, y2) {
  var h0 = that._x1 - that._x0,
      h1 = x2 - that._x1,
      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),
      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),
      p = (s0 * h1 + s1 * h0) / (h0 + h1);
  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;
} // Calculate a one-sided slope.


function slope2(that, t) {
  var h = that._x1 - that._x0;
  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;
} // According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations
// "you can express cubic Hermite interpolation in terms of cubic Bézier curves
// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1".


function _point(that, t0, t1) {
  var x0 = that._x0,
      y0 = that._y0,
      x1 = that._x1,
      y1 = that._y1,
      dx = (x1 - x0) / 3;

  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);
}

function MonotoneX(context) {
  this._context = context;
}

MonotoneX.prototype = {
  areaStart: function areaStart() {
    this._line = 0;
  },
  areaEnd: function areaEnd() {
    this._line = NaN;
  },
  lineStart: function lineStart() {
    this._x0 = this._x1 = this._y0 = this._y1 = this._t0 = NaN;
    this._point = 0;
  },
  lineEnd: function lineEnd() {
    switch (this._point) {
      case 2:
        this._context.lineTo(this._x1, this._y1);

        break;

      case 3:
        _point(this, this._t0, slope2(this, this._t0));

        break;
    }

    if (this._line || this._line !== 0 && this._point === 1) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function point(x, y) {
    var t1 = NaN;
    x = +x, y = +y;
    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.

    switch (this._point) {
      case 0:
        this._point = 1;
        this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y);
        break;

      case 1:
        this._point = 2;
        break;

      case 2:
        this._point = 3;

        _point(this, slope2(this, t1 = slope3(this, x, y)), t1);

        break;

      default:
        _point(this, this._t0, t1 = slope3(this, x, y));

        break;
    }

    this._x0 = this._x1, this._x1 = x;
    this._y0 = this._y1, this._y1 = y;
    this._t0 = t1;
  }
};

function MonotoneY(context) {
  this._context = new ReflectContext(context);
}

(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function (x, y) {
  MonotoneX.prototype.point.call(this, y, x);
};

function ReflectContext(context) {
  this._context = context;
}

ReflectContext.prototype = {
  moveTo: function moveTo(x, y) {
    this._context.moveTo(y, x);
  },
  closePath: function closePath() {
    this._context.closePath();
  },
  lineTo: function lineTo(x, y) {
    this._context.lineTo(y, x);
  },
  bezierCurveTo: function bezierCurveTo(x1, y1, x2, y2, x, y) {
    this._context.bezierCurveTo(y1, x1, y2, x2, y, x);
  }
};
function monotoneX(context) {
  return new MonotoneX(context);
}
function monotoneY(context) {
  return new MonotoneY(context);
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/natural.js":
/*!************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/natural.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function Natural(context) {
  this._context = context;
}

Natural.prototype = {
  areaStart: function areaStart() {
    this._line = 0;
  },
  areaEnd: function areaEnd() {
    this._line = NaN;
  },
  lineStart: function lineStart() {
    this._x = [];
    this._y = [];
  },
  lineEnd: function lineEnd() {
    var x = this._x,
        y = this._y,
        n = x.length;

    if (n) {
      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);

      if (n === 2) {
        this._context.lineTo(x[1], y[1]);
      } else {
        var px = controlPoints(x),
            py = controlPoints(y);

        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {
          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);
        }
      }
    }

    if (this._line || this._line !== 0 && n === 1) this._context.closePath();
    this._line = 1 - this._line;
    this._x = this._y = null;
  },
  point: function point(x, y) {
    this._x.push(+x);

    this._y.push(+y);
  }
}; // See https://www.particleincell.com/2012/bezier-splines/ for derivation.

function controlPoints(x) {
  var i,
      n = x.length - 1,
      m,
      a = new Array(n),
      b = new Array(n),
      r = new Array(n);
  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];

  for (i = 1; i < n - 1; ++i) {
    a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];
  }

  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];

  for (i = 1; i < n; ++i) {
    m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];
  }

  a[n - 1] = r[n - 1] / b[n - 1];

  for (i = n - 2; i >= 0; --i) {
    a[i] = (r[i] - a[i + 1]) / b[i];
  }

  b[n - 1] = (x[n] + a[n - 1]) / 2;

  for (i = 0; i < n - 1; ++i) {
    b[i] = 2 * x[i + 1] - a[i + 1];
  }

  return [a, b];
}

/* harmony default export */ __webpack_exports__["default"] = (function (context) {
  return new Natural(context);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/radial.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/radial.js ***!
  \***********************************************************************/
/*! exports provided: curveRadialLinear, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "curveRadialLinear", function() { return curveRadialLinear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return curveRadial; });
/* harmony import */ var _linear__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./linear */ "./packages/muze-utils/node_modules/d3-shape/src/curve/linear.js");

var curveRadialLinear = curveRadial(_linear__WEBPACK_IMPORTED_MODULE_0__["default"]);

function Radial(curve) {
  this._curve = curve;
}

Radial.prototype = {
  areaStart: function areaStart() {
    this._curve.areaStart();
  },
  areaEnd: function areaEnd() {
    this._curve.areaEnd();
  },
  lineStart: function lineStart() {
    this._curve.lineStart();
  },
  lineEnd: function lineEnd() {
    this._curve.lineEnd();
  },
  point: function point(a, r) {
    this._curve.point(r * Math.sin(a), r * -Math.cos(a));
  }
};
function curveRadial(curve) {
  function radial(context) {
    return new Radial(curve(context));
  }

  radial._curve = curve;
  return radial;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/curve/step.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/curve/step.js ***!
  \*********************************************************************/
/*! exports provided: default, stepBefore, stepAfter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stepBefore", function() { return stepBefore; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stepAfter", function() { return stepAfter; });
function Step(context, t) {
  this._context = context;
  this._t = t;
}

Step.prototype = {
  areaStart: function areaStart() {
    this._line = 0;
  },
  areaEnd: function areaEnd() {
    this._line = NaN;
  },
  lineStart: function lineStart() {
    this._x = this._y = NaN;
    this._point = 0;
  },
  lineEnd: function lineEnd() {
    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);
    if (this._line || this._line !== 0 && this._point === 1) this._context.closePath();
    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;
  },
  point: function point(x, y) {
    x = +x, y = +y;

    switch (this._point) {
      case 0:
        this._point = 1;
        this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y);
        break;

      case 1:
        this._point = 2;
      // proceed

      default:
        {
          if (this._t <= 0) {
            this._context.lineTo(this._x, y);

            this._context.lineTo(x, y);
          } else {
            var x1 = this._x * (1 - this._t) + x * this._t;

            this._context.lineTo(x1, this._y);

            this._context.lineTo(x1, y);
          }

          break;
        }
    }

    this._x = x, this._y = y;
  }
};
/* harmony default export */ __webpack_exports__["default"] = (function (context) {
  return new Step(context, 0.5);
});
function stepBefore(context) {
  return new Step(context, 0);
}
function stepAfter(context) {
  return new Step(context, 1);
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/descending.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/descending.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (a, b) {
  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/identity.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/identity.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (d) {
  return d;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/index.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/index.js ***!
  \****************************************************************/
/*! exports provided: arc, area, line, pie, areaRadial, radialArea, lineRadial, radialLine, pointRadial, linkHorizontal, linkVertical, linkRadial, symbol, symbols, symbolCircle, symbolCross, symbolDiamond, symbolSquare, symbolStar, symbolTriangle, symbolWye, curveBasisClosed, curveBasisOpen, curveBasis, curveBundle, curveCardinalClosed, curveCardinalOpen, curveCardinal, curveCatmullRomClosed, curveCatmullRomOpen, curveCatmullRom, curveLinearClosed, curveLinear, curveMonotoneX, curveMonotoneY, curveNatural, curveStep, curveStepAfter, curveStepBefore, stack, stackOffsetExpand, stackOffsetDiverging, stackOffsetNone, stackOffsetSilhouette, stackOffsetWiggle, stackOrderAscending, stackOrderDescending, stackOrderInsideOut, stackOrderNone, stackOrderReverse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _arc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arc */ "./packages/muze-utils/node_modules/d3-shape/src/arc.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "arc", function() { return _arc__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _area__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./area */ "./packages/muze-utils/node_modules/d3-shape/src/area.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "area", function() { return _area__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _line__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./line */ "./packages/muze-utils/node_modules/d3-shape/src/line.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "line", function() { return _line__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _pie__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pie */ "./packages/muze-utils/node_modules/d3-shape/src/pie.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "pie", function() { return _pie__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _areaRadial__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./areaRadial */ "./packages/muze-utils/node_modules/d3-shape/src/areaRadial.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "areaRadial", function() { return _areaRadial__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "radialArea", function() { return _areaRadial__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _lineRadial__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lineRadial */ "./packages/muze-utils/node_modules/d3-shape/src/lineRadial.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "lineRadial", function() { return _lineRadial__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "radialLine", function() { return _lineRadial__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _pointRadial__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./pointRadial */ "./packages/muze-utils/node_modules/d3-shape/src/pointRadial.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "pointRadial", function() { return _pointRadial__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _link_index__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./link/index */ "./packages/muze-utils/node_modules/d3-shape/src/link/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "linkHorizontal", function() { return _link_index__WEBPACK_IMPORTED_MODULE_7__["linkHorizontal"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "linkVertical", function() { return _link_index__WEBPACK_IMPORTED_MODULE_7__["linkVertical"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "linkRadial", function() { return _link_index__WEBPACK_IMPORTED_MODULE_7__["linkRadial"]; });

/* harmony import */ var _symbol__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./symbol */ "./packages/muze-utils/node_modules/d3-shape/src/symbol.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "symbol", function() { return _symbol__WEBPACK_IMPORTED_MODULE_8__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "symbols", function() { return _symbol__WEBPACK_IMPORTED_MODULE_8__["symbols"]; });

/* harmony import */ var _symbol_circle__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./symbol/circle */ "./packages/muze-utils/node_modules/d3-shape/src/symbol/circle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "symbolCircle", function() { return _symbol_circle__WEBPACK_IMPORTED_MODULE_9__["default"]; });

/* harmony import */ var _symbol_cross__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./symbol/cross */ "./packages/muze-utils/node_modules/d3-shape/src/symbol/cross.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "symbolCross", function() { return _symbol_cross__WEBPACK_IMPORTED_MODULE_10__["default"]; });

/* harmony import */ var _symbol_diamond__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./symbol/diamond */ "./packages/muze-utils/node_modules/d3-shape/src/symbol/diamond.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "symbolDiamond", function() { return _symbol_diamond__WEBPACK_IMPORTED_MODULE_11__["default"]; });

/* harmony import */ var _symbol_square__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./symbol/square */ "./packages/muze-utils/node_modules/d3-shape/src/symbol/square.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "symbolSquare", function() { return _symbol_square__WEBPACK_IMPORTED_MODULE_12__["default"]; });

/* harmony import */ var _symbol_star__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./symbol/star */ "./packages/muze-utils/node_modules/d3-shape/src/symbol/star.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "symbolStar", function() { return _symbol_star__WEBPACK_IMPORTED_MODULE_13__["default"]; });

/* harmony import */ var _symbol_triangle__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./symbol/triangle */ "./packages/muze-utils/node_modules/d3-shape/src/symbol/triangle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "symbolTriangle", function() { return _symbol_triangle__WEBPACK_IMPORTED_MODULE_14__["default"]; });

/* harmony import */ var _symbol_wye__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./symbol/wye */ "./packages/muze-utils/node_modules/d3-shape/src/symbol/wye.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "symbolWye", function() { return _symbol_wye__WEBPACK_IMPORTED_MODULE_15__["default"]; });

/* harmony import */ var _curve_basisClosed__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./curve/basisClosed */ "./packages/muze-utils/node_modules/d3-shape/src/curve/basisClosed.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveBasisClosed", function() { return _curve_basisClosed__WEBPACK_IMPORTED_MODULE_16__["default"]; });

/* harmony import */ var _curve_basisOpen__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./curve/basisOpen */ "./packages/muze-utils/node_modules/d3-shape/src/curve/basisOpen.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveBasisOpen", function() { return _curve_basisOpen__WEBPACK_IMPORTED_MODULE_17__["default"]; });

/* harmony import */ var _curve_basis__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./curve/basis */ "./packages/muze-utils/node_modules/d3-shape/src/curve/basis.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveBasis", function() { return _curve_basis__WEBPACK_IMPORTED_MODULE_18__["default"]; });

/* harmony import */ var _curve_bundle__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./curve/bundle */ "./packages/muze-utils/node_modules/d3-shape/src/curve/bundle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveBundle", function() { return _curve_bundle__WEBPACK_IMPORTED_MODULE_19__["default"]; });

/* harmony import */ var _curve_cardinalClosed__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./curve/cardinalClosed */ "./packages/muze-utils/node_modules/d3-shape/src/curve/cardinalClosed.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveCardinalClosed", function() { return _curve_cardinalClosed__WEBPACK_IMPORTED_MODULE_20__["default"]; });

/* harmony import */ var _curve_cardinalOpen__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./curve/cardinalOpen */ "./packages/muze-utils/node_modules/d3-shape/src/curve/cardinalOpen.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveCardinalOpen", function() { return _curve_cardinalOpen__WEBPACK_IMPORTED_MODULE_21__["default"]; });

/* harmony import */ var _curve_cardinal__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./curve/cardinal */ "./packages/muze-utils/node_modules/d3-shape/src/curve/cardinal.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveCardinal", function() { return _curve_cardinal__WEBPACK_IMPORTED_MODULE_22__["default"]; });

/* harmony import */ var _curve_catmullRomClosed__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./curve/catmullRomClosed */ "./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRomClosed.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveCatmullRomClosed", function() { return _curve_catmullRomClosed__WEBPACK_IMPORTED_MODULE_23__["default"]; });

/* harmony import */ var _curve_catmullRomOpen__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./curve/catmullRomOpen */ "./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRomOpen.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveCatmullRomOpen", function() { return _curve_catmullRomOpen__WEBPACK_IMPORTED_MODULE_24__["default"]; });

/* harmony import */ var _curve_catmullRom__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./curve/catmullRom */ "./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRom.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveCatmullRom", function() { return _curve_catmullRom__WEBPACK_IMPORTED_MODULE_25__["default"]; });

/* harmony import */ var _curve_linearClosed__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./curve/linearClosed */ "./packages/muze-utils/node_modules/d3-shape/src/curve/linearClosed.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveLinearClosed", function() { return _curve_linearClosed__WEBPACK_IMPORTED_MODULE_26__["default"]; });

/* harmony import */ var _curve_linear__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./curve/linear */ "./packages/muze-utils/node_modules/d3-shape/src/curve/linear.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveLinear", function() { return _curve_linear__WEBPACK_IMPORTED_MODULE_27__["default"]; });

/* harmony import */ var _curve_monotone__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./curve/monotone */ "./packages/muze-utils/node_modules/d3-shape/src/curve/monotone.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveMonotoneX", function() { return _curve_monotone__WEBPACK_IMPORTED_MODULE_28__["monotoneX"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveMonotoneY", function() { return _curve_monotone__WEBPACK_IMPORTED_MODULE_28__["monotoneY"]; });

/* harmony import */ var _curve_natural__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./curve/natural */ "./packages/muze-utils/node_modules/d3-shape/src/curve/natural.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveNatural", function() { return _curve_natural__WEBPACK_IMPORTED_MODULE_29__["default"]; });

/* harmony import */ var _curve_step__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./curve/step */ "./packages/muze-utils/node_modules/d3-shape/src/curve/step.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveStep", function() { return _curve_step__WEBPACK_IMPORTED_MODULE_30__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveStepAfter", function() { return _curve_step__WEBPACK_IMPORTED_MODULE_30__["stepAfter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "curveStepBefore", function() { return _curve_step__WEBPACK_IMPORTED_MODULE_30__["stepBefore"]; });

/* harmony import */ var _stack__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./stack */ "./packages/muze-utils/node_modules/d3-shape/src/stack.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stack", function() { return _stack__WEBPACK_IMPORTED_MODULE_31__["default"]; });

/* harmony import */ var _offset_expand__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./offset/expand */ "./packages/muze-utils/node_modules/d3-shape/src/offset/expand.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stackOffsetExpand", function() { return _offset_expand__WEBPACK_IMPORTED_MODULE_32__["default"]; });

/* harmony import */ var _offset_diverging__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./offset/diverging */ "./packages/muze-utils/node_modules/d3-shape/src/offset/diverging.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stackOffsetDiverging", function() { return _offset_diverging__WEBPACK_IMPORTED_MODULE_33__["default"]; });

/* harmony import */ var _offset_none__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./offset/none */ "./packages/muze-utils/node_modules/d3-shape/src/offset/none.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stackOffsetNone", function() { return _offset_none__WEBPACK_IMPORTED_MODULE_34__["default"]; });

/* harmony import */ var _offset_silhouette__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./offset/silhouette */ "./packages/muze-utils/node_modules/d3-shape/src/offset/silhouette.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stackOffsetSilhouette", function() { return _offset_silhouette__WEBPACK_IMPORTED_MODULE_35__["default"]; });

/* harmony import */ var _offset_wiggle__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./offset/wiggle */ "./packages/muze-utils/node_modules/d3-shape/src/offset/wiggle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stackOffsetWiggle", function() { return _offset_wiggle__WEBPACK_IMPORTED_MODULE_36__["default"]; });

/* harmony import */ var _order_ascending__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./order/ascending */ "./packages/muze-utils/node_modules/d3-shape/src/order/ascending.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stackOrderAscending", function() { return _order_ascending__WEBPACK_IMPORTED_MODULE_37__["default"]; });

/* harmony import */ var _order_descending__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./order/descending */ "./packages/muze-utils/node_modules/d3-shape/src/order/descending.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stackOrderDescending", function() { return _order_descending__WEBPACK_IMPORTED_MODULE_38__["default"]; });

/* harmony import */ var _order_insideOut__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./order/insideOut */ "./packages/muze-utils/node_modules/d3-shape/src/order/insideOut.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stackOrderInsideOut", function() { return _order_insideOut__WEBPACK_IMPORTED_MODULE_39__["default"]; });

/* harmony import */ var _order_none__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./order/none */ "./packages/muze-utils/node_modules/d3-shape/src/order/none.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stackOrderNone", function() { return _order_none__WEBPACK_IMPORTED_MODULE_40__["default"]; });

/* harmony import */ var _order_reverse__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./order/reverse */ "./packages/muze-utils/node_modules/d3-shape/src/order/reverse.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stackOrderReverse", function() { return _order_reverse__WEBPACK_IMPORTED_MODULE_41__["default"]; });





 // Note: radialArea is deprecated!

 // Note: radialLine is deprecated!






































/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/line.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/line.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-path */ "./packages/muze-utils/node_modules/d3-path/src/index.js");
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constant */ "./packages/muze-utils/node_modules/d3-shape/src/constant.js");
/* harmony import */ var _curve_linear__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./curve/linear */ "./packages/muze-utils/node_modules/d3-shape/src/curve/linear.js");
/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./point */ "./packages/muze-utils/node_modules/d3-shape/src/point.js");




/* harmony default export */ __webpack_exports__["default"] = (function () {
  var x = _point__WEBPACK_IMPORTED_MODULE_3__["x"],
      y = _point__WEBPACK_IMPORTED_MODULE_3__["y"],
      defined = Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(true),
      context = null,
      curve = _curve_linear__WEBPACK_IMPORTED_MODULE_2__["default"],
      output = null;

  function line(data) {
    var i,
        n = data.length,
        d,
        defined0 = false,
        buffer;
    if (context == null) output = curve(buffer = Object(d3_path__WEBPACK_IMPORTED_MODULE_0__["path"])());

    for (i = 0; i <= n; ++i) {
      if (!(i < n && defined(d = data[i], i, data)) === defined0) {
        if (defined0 = !defined0) output.lineStart();else output.lineEnd();
      }

      if (defined0) output.point(+x(d, i, data), +y(d, i, data));
    }

    if (buffer) return output = null, buffer + "" || null;
  }

  line.x = function (_) {
    return arguments.length ? (x = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), line) : x;
  };

  line.y = function (_) {
    return arguments.length ? (y = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), line) : y;
  };

  line.defined = function (_) {
    return arguments.length ? (defined = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(!!_), line) : defined;
  };

  line.curve = function (_) {
    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;
  };

  line.context = function (_) {
    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;
  };

  return line;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/lineRadial.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/lineRadial.js ***!
  \*********************************************************************/
/*! exports provided: lineRadial, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lineRadial", function() { return lineRadial; });
/* harmony import */ var _curve_radial__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./curve/radial */ "./packages/muze-utils/node_modules/d3-shape/src/curve/radial.js");
/* harmony import */ var _line__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./line */ "./packages/muze-utils/node_modules/d3-shape/src/line.js");


function lineRadial(l) {
  var c = l.curve;
  l.angle = l.x, delete l.x;
  l.radius = l.y, delete l.y;

  l.curve = function (_) {
    return arguments.length ? c(Object(_curve_radial__WEBPACK_IMPORTED_MODULE_0__["default"])(_)) : c()._curve;
  };

  return l;
}
/* harmony default export */ __webpack_exports__["default"] = (function () {
  return lineRadial(Object(_line__WEBPACK_IMPORTED_MODULE_1__["default"])().curve(_curve_radial__WEBPACK_IMPORTED_MODULE_0__["curveRadialLinear"]));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/link/index.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/link/index.js ***!
  \*********************************************************************/
/*! exports provided: linkHorizontal, linkVertical, linkRadial */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "linkHorizontal", function() { return linkHorizontal; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "linkVertical", function() { return linkVertical; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "linkRadial", function() { return linkRadial; });
/* harmony import */ var d3_path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-path */ "./packages/muze-utils/node_modules/d3-path/src/index.js");
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../array */ "./packages/muze-utils/node_modules/d3-shape/src/array.js");
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constant */ "./packages/muze-utils/node_modules/d3-shape/src/constant.js");
/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../point */ "./packages/muze-utils/node_modules/d3-shape/src/point.js");
/* harmony import */ var _pointRadial__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../pointRadial */ "./packages/muze-utils/node_modules/d3-shape/src/pointRadial.js");






function linkSource(d) {
  return d.source;
}

function linkTarget(d) {
  return d.target;
}

function link(curve) {
  var source = linkSource,
      target = linkTarget,
      x = _point__WEBPACK_IMPORTED_MODULE_3__["x"],
      y = _point__WEBPACK_IMPORTED_MODULE_3__["y"],
      context = null;

  function link() {
    var buffer,
        argv = _array__WEBPACK_IMPORTED_MODULE_1__["slice"].call(arguments),
        s = source.apply(this, argv),
        t = target.apply(this, argv);
    if (!context) context = buffer = Object(d3_path__WEBPACK_IMPORTED_MODULE_0__["path"])();
    curve(context, +x.apply(this, (argv[0] = s, argv)), +y.apply(this, argv), +x.apply(this, (argv[0] = t, argv)), +y.apply(this, argv));
    if (buffer) return context = null, buffer + "" || null;
  }

  link.source = function (_) {
    return arguments.length ? (source = _, link) : source;
  };

  link.target = function (_) {
    return arguments.length ? (target = _, link) : target;
  };

  link.x = function (_) {
    return arguments.length ? (x = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_2__["default"])(+_), link) : x;
  };

  link.y = function (_) {
    return arguments.length ? (y = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_2__["default"])(+_), link) : y;
  };

  link.context = function (_) {
    return arguments.length ? (context = _ == null ? null : _, link) : context;
  };

  return link;
}

function curveHorizontal(context, x0, y0, x1, y1) {
  context.moveTo(x0, y0);
  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);
}

function curveVertical(context, x0, y0, x1, y1) {
  context.moveTo(x0, y0);
  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);
}

function curveRadial(context, x0, y0, x1, y1) {
  var p0 = Object(_pointRadial__WEBPACK_IMPORTED_MODULE_4__["default"])(x0, y0),
      p1 = Object(_pointRadial__WEBPACK_IMPORTED_MODULE_4__["default"])(x0, y0 = (y0 + y1) / 2),
      p2 = Object(_pointRadial__WEBPACK_IMPORTED_MODULE_4__["default"])(x1, y0),
      p3 = Object(_pointRadial__WEBPACK_IMPORTED_MODULE_4__["default"])(x1, y1);
  context.moveTo(p0[0], p0[1]);
  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);
}

function linkHorizontal() {
  return link(curveHorizontal);
}
function linkVertical() {
  return link(curveVertical);
}
function linkRadial() {
  var l = link(curveRadial);
  l.angle = l.x, delete l.x;
  l.radius = l.y, delete l.y;
  return l;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/math.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/math.js ***!
  \***************************************************************/
/*! exports provided: abs, atan2, cos, max, min, sin, sqrt, epsilon, pi, halfPi, tau, acos, asin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "abs", function() { return abs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "atan2", function() { return atan2; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cos", function() { return cos; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "max", function() { return max; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "min", function() { return min; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sin", function() { return sin; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqrt", function() { return sqrt; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "epsilon", function() { return epsilon; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pi", function() { return pi; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "halfPi", function() { return halfPi; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tau", function() { return tau; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "acos", function() { return acos; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "asin", function() { return asin; });
var abs = Math.abs;
var atan2 = Math.atan2;
var cos = Math.cos;
var max = Math.max;
var min = Math.min;
var sin = Math.sin;
var sqrt = Math.sqrt;
var epsilon = 1e-12;
var pi = Math.PI;
var halfPi = pi / 2;
var tau = 2 * pi;
function acos(x) {
  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);
}
function asin(x) {
  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/noop.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/noop.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function () {});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/offset/diverging.js":
/*!***************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/offset/diverging.js ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (series, order) {
  if (!((n = series.length) > 1)) return;

  for (var i, j = 0, d, dy, yp, yn, n, m = series[order[0]].length; j < m; ++j) {
    for (yp = yn = 0, i = 0; i < n; ++i) {
      if ((dy = (d = series[order[i]][j])[1] - d[0]) >= 0) {
        d[0] = yp, d[1] = yp += dy;
      } else if (dy < 0) {
        d[1] = yn, d[0] = yn += dy;
      } else {
        d[0] = yp;
      }
    }
  }
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/offset/expand.js":
/*!************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/offset/expand.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _none__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./none */ "./packages/muze-utils/node_modules/d3-shape/src/offset/none.js");

/* harmony default export */ __webpack_exports__["default"] = (function (series, order) {
  if (!((n = series.length) > 0)) return;

  for (var i, n, j = 0, m = series[0].length, y; j < m; ++j) {
    for (y = i = 0; i < n; ++i) {
      y += series[i][j][1] || 0;
    }

    if (y) for (i = 0; i < n; ++i) {
      series[i][j][1] /= y;
    }
  }

  Object(_none__WEBPACK_IMPORTED_MODULE_0__["default"])(series, order);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/offset/none.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/offset/none.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (series, order) {
  if (!((n = series.length) > 1)) return;

  for (var i = 1, j, s0, s1 = series[order[0]], n, m = s1.length; i < n; ++i) {
    s0 = s1, s1 = series[order[i]];

    for (j = 0; j < m; ++j) {
      s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];
    }
  }
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/offset/silhouette.js":
/*!****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/offset/silhouette.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _none__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./none */ "./packages/muze-utils/node_modules/d3-shape/src/offset/none.js");

/* harmony default export */ __webpack_exports__["default"] = (function (series, order) {
  if (!((n = series.length) > 0)) return;

  for (var j = 0, s0 = series[order[0]], n, m = s0.length; j < m; ++j) {
    for (var i = 0, y = 0; i < n; ++i) {
      y += series[i][j][1] || 0;
    }

    s0[j][1] += s0[j][0] = -y / 2;
  }

  Object(_none__WEBPACK_IMPORTED_MODULE_0__["default"])(series, order);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/offset/wiggle.js":
/*!************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/offset/wiggle.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _none__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./none */ "./packages/muze-utils/node_modules/d3-shape/src/offset/none.js");

/* harmony default export */ __webpack_exports__["default"] = (function (series, order) {
  if (!((n = series.length) > 0) || !((m = (s0 = series[order[0]]).length) > 0)) return;

  for (var y = 0, j = 1, s0, m, n; j < m; ++j) {
    for (var i = 0, s1 = 0, s2 = 0; i < n; ++i) {
      var si = series[order[i]],
          sij0 = si[j][1] || 0,
          sij1 = si[j - 1][1] || 0,
          s3 = (sij0 - sij1) / 2;

      for (var k = 0; k < i; ++k) {
        var sk = series[order[k]],
            skj0 = sk[j][1] || 0,
            skj1 = sk[j - 1][1] || 0;
        s3 += skj0 - skj1;
      }

      s1 += sij0, s2 += s3 * sij0;
    }

    s0[j - 1][1] += s0[j - 1][0] = y;
    if (s1) y -= s2 / s1;
  }

  s0[j - 1][1] += s0[j - 1][0] = y;
  Object(_none__WEBPACK_IMPORTED_MODULE_0__["default"])(series, order);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/order/ascending.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/order/ascending.js ***!
  \**************************************************************************/
/*! exports provided: default, sum */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sum", function() { return sum; });
/* harmony import */ var _none__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./none */ "./packages/muze-utils/node_modules/d3-shape/src/order/none.js");

/* harmony default export */ __webpack_exports__["default"] = (function (series) {
  var sums = series.map(sum);
  return Object(_none__WEBPACK_IMPORTED_MODULE_0__["default"])(series).sort(function (a, b) {
    return sums[a] - sums[b];
  });
});
function sum(series) {
  var s = 0,
      i = -1,
      n = series.length,
      v;

  while (++i < n) {
    if (v = +series[i][1]) s += v;
  }

  return s;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/order/descending.js":
/*!***************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/order/descending.js ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _ascending__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ascending */ "./packages/muze-utils/node_modules/d3-shape/src/order/ascending.js");

/* harmony default export */ __webpack_exports__["default"] = (function (series) {
  return Object(_ascending__WEBPACK_IMPORTED_MODULE_0__["default"])(series).reverse();
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/order/insideOut.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/order/insideOut.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _none__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./none */ "./packages/muze-utils/node_modules/d3-shape/src/order/none.js");
/* harmony import */ var _ascending__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ascending */ "./packages/muze-utils/node_modules/d3-shape/src/order/ascending.js");


/* harmony default export */ __webpack_exports__["default"] = (function (series) {
  var n = series.length,
      i,
      j,
      sums = series.map(_ascending__WEBPACK_IMPORTED_MODULE_1__["sum"]),
      order = Object(_none__WEBPACK_IMPORTED_MODULE_0__["default"])(series).sort(function (a, b) {
    return sums[b] - sums[a];
  }),
      top = 0,
      bottom = 0,
      tops = [],
      bottoms = [];

  for (i = 0; i < n; ++i) {
    j = order[i];

    if (top < bottom) {
      top += sums[j];
      tops.push(j);
    } else {
      bottom += sums[j];
      bottoms.push(j);
    }
  }

  return bottoms.reverse().concat(tops);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/order/none.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/order/none.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (series) {
  var n = series.length,
      o = new Array(n);

  while (--n >= 0) {
    o[n] = n;
  }

  return o;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/order/reverse.js":
/*!************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/order/reverse.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _none__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./none */ "./packages/muze-utils/node_modules/d3-shape/src/order/none.js");

/* harmony default export */ __webpack_exports__["default"] = (function (series) {
  return Object(_none__WEBPACK_IMPORTED_MODULE_0__["default"])(series).reverse();
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/pie.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/pie.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constant */ "./packages/muze-utils/node_modules/d3-shape/src/constant.js");
/* harmony import */ var _descending__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./descending */ "./packages/muze-utils/node_modules/d3-shape/src/descending.js");
/* harmony import */ var _identity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./identity */ "./packages/muze-utils/node_modules/d3-shape/src/identity.js");
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./math */ "./packages/muze-utils/node_modules/d3-shape/src/math.js");




/* harmony default export */ __webpack_exports__["default"] = (function () {
  var value = _identity__WEBPACK_IMPORTED_MODULE_2__["default"],
      sortValues = _descending__WEBPACK_IMPORTED_MODULE_1__["default"],
      sort = null,
      startAngle = Object(_constant__WEBPACK_IMPORTED_MODULE_0__["default"])(0),
      endAngle = Object(_constant__WEBPACK_IMPORTED_MODULE_0__["default"])(_math__WEBPACK_IMPORTED_MODULE_3__["tau"]),
      padAngle = Object(_constant__WEBPACK_IMPORTED_MODULE_0__["default"])(0);

  function pie(data) {
    var i,
        n = data.length,
        j,
        k,
        sum = 0,
        index = new Array(n),
        arcs = new Array(n),
        a0 = +startAngle.apply(this, arguments),
        da = Math.min(_math__WEBPACK_IMPORTED_MODULE_3__["tau"], Math.max(-_math__WEBPACK_IMPORTED_MODULE_3__["tau"], endAngle.apply(this, arguments) - a0)),
        a1,
        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),
        pa = p * (da < 0 ? -1 : 1),
        v;

    for (i = 0; i < n; ++i) {
      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {
        sum += v;
      }
    } // Optionally sort the arcs by previously-computed values or by data.


    if (sortValues != null) index.sort(function (i, j) {
      return sortValues(arcs[i], arcs[j]);
    });else if (sort != null) index.sort(function (i, j) {
      return sort(data[i], data[j]);
    }); // Compute the arcs! They are stored in the original data's order.

    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {
      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {
        data: data[j],
        index: i,
        value: v,
        startAngle: a0,
        endAngle: a1,
        padAngle: p
      };
    }

    return arcs;
  }

  pie.value = function (_) {
    return arguments.length ? (value = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_0__["default"])(+_), pie) : value;
  };

  pie.sortValues = function (_) {
    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;
  };

  pie.sort = function (_) {
    return arguments.length ? (sort = _, sortValues = null, pie) : sort;
  };

  pie.startAngle = function (_) {
    return arguments.length ? (startAngle = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_0__["default"])(+_), pie) : startAngle;
  };

  pie.endAngle = function (_) {
    return arguments.length ? (endAngle = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_0__["default"])(+_), pie) : endAngle;
  };

  pie.padAngle = function (_) {
    return arguments.length ? (padAngle = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_0__["default"])(+_), pie) : padAngle;
  };

  return pie;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/point.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/point.js ***!
  \****************************************************************/
/*! exports provided: x, y */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "x", function() { return x; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "y", function() { return y; });
function x(p) {
  return p[0];
}
function y(p) {
  return p[1];
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/pointRadial.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/pointRadial.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (x, y) {
  return [(y = +y) * Math.cos(x -= Math.PI / 2), y * Math.sin(x)];
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/stack.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/stack.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./array */ "./packages/muze-utils/node_modules/d3-shape/src/array.js");
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constant */ "./packages/muze-utils/node_modules/d3-shape/src/constant.js");
/* harmony import */ var _offset_none__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./offset/none */ "./packages/muze-utils/node_modules/d3-shape/src/offset/none.js");
/* harmony import */ var _order_none__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./order/none */ "./packages/muze-utils/node_modules/d3-shape/src/order/none.js");





function stackValue(d, key) {
  return d[key];
}

/* harmony default export */ __webpack_exports__["default"] = (function () {
  var keys = Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])([]),
      order = _order_none__WEBPACK_IMPORTED_MODULE_3__["default"],
      offset = _offset_none__WEBPACK_IMPORTED_MODULE_2__["default"],
      value = stackValue;

  function stack(data) {
    var kz = keys.apply(this, arguments),
        i,
        m = data.length,
        n = kz.length,
        sz = new Array(n),
        oz;

    for (i = 0; i < n; ++i) {
      for (var ki = kz[i], si = sz[i] = new Array(m), j = 0, sij; j < m; ++j) {
        si[j] = sij = [0, +value(data[j], ki, j, data)];
        sij.data = data[j];
      }

      si.key = ki;
    }

    for (i = 0, oz = order(sz); i < n; ++i) {
      sz[oz[i]].index = i;
    }

    offset(sz, oz);
    return sz;
  }

  stack.keys = function (_) {
    return arguments.length ? (keys = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(_array__WEBPACK_IMPORTED_MODULE_0__["slice"].call(_)), stack) : keys;
  };

  stack.value = function (_) {
    return arguments.length ? (value = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(+_), stack) : value;
  };

  stack.order = function (_) {
    return arguments.length ? (order = _ == null ? _order_none__WEBPACK_IMPORTED_MODULE_3__["default"] : typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(_array__WEBPACK_IMPORTED_MODULE_0__["slice"].call(_)), stack) : order;
  };

  stack.offset = function (_) {
    return arguments.length ? (offset = _ == null ? _offset_none__WEBPACK_IMPORTED_MODULE_2__["default"] : _, stack) : offset;
  };

  return stack;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/symbol.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/symbol.js ***!
  \*****************************************************************/
/*! exports provided: symbols, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "symbols", function() { return symbols; });
/* harmony import */ var d3_path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-path */ "./packages/muze-utils/node_modules/d3-path/src/index.js");
/* harmony import */ var _symbol_circle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./symbol/circle */ "./packages/muze-utils/node_modules/d3-shape/src/symbol/circle.js");
/* harmony import */ var _symbol_cross__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./symbol/cross */ "./packages/muze-utils/node_modules/d3-shape/src/symbol/cross.js");
/* harmony import */ var _symbol_diamond__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./symbol/diamond */ "./packages/muze-utils/node_modules/d3-shape/src/symbol/diamond.js");
/* harmony import */ var _symbol_star__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./symbol/star */ "./packages/muze-utils/node_modules/d3-shape/src/symbol/star.js");
/* harmony import */ var _symbol_square__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./symbol/square */ "./packages/muze-utils/node_modules/d3-shape/src/symbol/square.js");
/* harmony import */ var _symbol_triangle__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./symbol/triangle */ "./packages/muze-utils/node_modules/d3-shape/src/symbol/triangle.js");
/* harmony import */ var _symbol_wye__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./symbol/wye */ "./packages/muze-utils/node_modules/d3-shape/src/symbol/wye.js");
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./constant */ "./packages/muze-utils/node_modules/d3-shape/src/constant.js");









var symbols = [_symbol_circle__WEBPACK_IMPORTED_MODULE_1__["default"], _symbol_cross__WEBPACK_IMPORTED_MODULE_2__["default"], _symbol_diamond__WEBPACK_IMPORTED_MODULE_3__["default"], _symbol_square__WEBPACK_IMPORTED_MODULE_5__["default"], _symbol_star__WEBPACK_IMPORTED_MODULE_4__["default"], _symbol_triangle__WEBPACK_IMPORTED_MODULE_6__["default"], _symbol_wye__WEBPACK_IMPORTED_MODULE_7__["default"]];
/* harmony default export */ __webpack_exports__["default"] = (function () {
  var type = Object(_constant__WEBPACK_IMPORTED_MODULE_8__["default"])(_symbol_circle__WEBPACK_IMPORTED_MODULE_1__["default"]),
      size = Object(_constant__WEBPACK_IMPORTED_MODULE_8__["default"])(64),
      context = null;

  function symbol() {
    var buffer;
    if (!context) context = buffer = Object(d3_path__WEBPACK_IMPORTED_MODULE_0__["path"])();
    type.apply(this, arguments).draw(context, +size.apply(this, arguments));
    if (buffer) return context = null, buffer + "" || null;
  }

  symbol.type = function (_) {
    return arguments.length ? (type = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_8__["default"])(_), symbol) : type;
  };

  symbol.size = function (_) {
    return arguments.length ? (size = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_8__["default"])(+_), symbol) : size;
  };

  symbol.context = function (_) {
    return arguments.length ? (context = _ == null ? null : _, symbol) : context;
  };

  return symbol;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/symbol/circle.js":
/*!************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/symbol/circle.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math */ "./packages/muze-utils/node_modules/d3-shape/src/math.js");

/* harmony default export */ __webpack_exports__["default"] = ({
  draw: function draw(context, size) {
    var r = Math.sqrt(size / _math__WEBPACK_IMPORTED_MODULE_0__["pi"]);
    context.moveTo(r, 0);
    context.arc(0, 0, r, 0, _math__WEBPACK_IMPORTED_MODULE_0__["tau"]);
  }
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/symbol/cross.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/symbol/cross.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  draw: function draw(context, size) {
    var r = Math.sqrt(size / 5) / 2;
    context.moveTo(-3 * r, -r);
    context.lineTo(-r, -r);
    context.lineTo(-r, -3 * r);
    context.lineTo(r, -3 * r);
    context.lineTo(r, -r);
    context.lineTo(3 * r, -r);
    context.lineTo(3 * r, r);
    context.lineTo(r, r);
    context.lineTo(r, 3 * r);
    context.lineTo(-r, 3 * r);
    context.lineTo(-r, r);
    context.lineTo(-3 * r, r);
    context.closePath();
  }
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/symbol/diamond.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/symbol/diamond.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var tan30 = Math.sqrt(1 / 3),
    tan30_2 = tan30 * 2;
/* harmony default export */ __webpack_exports__["default"] = ({
  draw: function draw(context, size) {
    var y = Math.sqrt(size / tan30_2),
        x = y * tan30;
    context.moveTo(0, -y);
    context.lineTo(x, 0);
    context.lineTo(0, y);
    context.lineTo(-x, 0);
    context.closePath();
  }
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/symbol/square.js":
/*!************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/symbol/square.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  draw: function draw(context, size) {
    var w = Math.sqrt(size),
        x = -w / 2;
    context.rect(x, x, w, w);
  }
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/symbol/star.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/symbol/star.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math */ "./packages/muze-utils/node_modules/d3-shape/src/math.js");

var ka = 0.89081309152928522810,
    kr = Math.sin(_math__WEBPACK_IMPORTED_MODULE_0__["pi"] / 10) / Math.sin(7 * _math__WEBPACK_IMPORTED_MODULE_0__["pi"] / 10),
    kx = Math.sin(_math__WEBPACK_IMPORTED_MODULE_0__["tau"] / 10) * kr,
    ky = -Math.cos(_math__WEBPACK_IMPORTED_MODULE_0__["tau"] / 10) * kr;
/* harmony default export */ __webpack_exports__["default"] = ({
  draw: function draw(context, size) {
    var r = Math.sqrt(size * ka),
        x = kx * r,
        y = ky * r;
    context.moveTo(0, -r);
    context.lineTo(x, y);

    for (var i = 1; i < 5; ++i) {
      var a = _math__WEBPACK_IMPORTED_MODULE_0__["tau"] * i / 5,
          c = Math.cos(a),
          s = Math.sin(a);
      context.lineTo(s * r, -c * r);
      context.lineTo(c * x - s * y, s * x + c * y);
    }

    context.closePath();
  }
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/symbol/triangle.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/symbol/triangle.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var sqrt3 = Math.sqrt(3);
/* harmony default export */ __webpack_exports__["default"] = ({
  draw: function draw(context, size) {
    var y = -Math.sqrt(size / (sqrt3 * 3));
    context.moveTo(0, y * 2);
    context.lineTo(-sqrt3 * y, -y);
    context.lineTo(sqrt3 * y, -y);
    context.closePath();
  }
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-shape/src/symbol/wye.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-shape/src/symbol/wye.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var c = -0.5,
    s = Math.sqrt(3) / 2,
    k = 1 / Math.sqrt(12),
    a = (k / 2 + 1) * 3;
/* harmony default export */ __webpack_exports__["default"] = ({
  draw: function draw(context, size) {
    var r = Math.sqrt(size / a),
        x0 = r / 2,
        y0 = r * k,
        x1 = x0,
        y1 = r * k + r,
        x2 = -x1,
        y2 = y1;
    context.moveTo(x0, y0);
    context.lineTo(x1, y1);
    context.lineTo(x2, y2);
    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);
    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);
    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);
    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);
    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);
    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);
    context.closePath();
  }
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time-format/src/defaultLocale.js":
/*!******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time-format/src/defaultLocale.js ***!
  \******************************************************************************/
/*! exports provided: timeFormat, timeParse, utcFormat, utcParse, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "timeFormat", function() { return timeFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "timeParse", function() { return timeParse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcFormat", function() { return utcFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcParse", function() { return utcParse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return defaultLocale; });
/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./locale */ "./packages/muze-utils/node_modules/d3-time-format/src/locale.js");

var locale;
var timeFormat;
var timeParse;
var utcFormat;
var utcParse;
defaultLocale({
  dateTime: "%x, %X",
  date: "%-m/%-d/%Y",
  time: "%-I:%M:%S %p",
  periods: ["AM", "PM"],
  days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
  shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
  shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
});
function defaultLocale(definition) {
  locale = Object(_locale__WEBPACK_IMPORTED_MODULE_0__["default"])(definition);
  timeFormat = locale.format;
  timeParse = locale.parse;
  utcFormat = locale.utcFormat;
  utcParse = locale.utcParse;
  return locale;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time-format/src/index.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time-format/src/index.js ***!
  \**********************************************************************/
/*! exports provided: timeFormatDefaultLocale, timeFormat, timeParse, utcFormat, utcParse, timeFormatLocale, isoFormat, isoParse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _defaultLocale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaultLocale */ "./packages/muze-utils/node_modules/d3-time-format/src/defaultLocale.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeFormatDefaultLocale", function() { return _defaultLocale__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeFormat", function() { return _defaultLocale__WEBPACK_IMPORTED_MODULE_0__["timeFormat"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeParse", function() { return _defaultLocale__WEBPACK_IMPORTED_MODULE_0__["timeParse"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcFormat", function() { return _defaultLocale__WEBPACK_IMPORTED_MODULE_0__["utcFormat"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcParse", function() { return _defaultLocale__WEBPACK_IMPORTED_MODULE_0__["utcParse"]; });

/* harmony import */ var _locale__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale */ "./packages/muze-utils/node_modules/d3-time-format/src/locale.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeFormatLocale", function() { return _locale__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _isoFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isoFormat */ "./packages/muze-utils/node_modules/d3-time-format/src/isoFormat.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isoFormat", function() { return _isoFormat__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _isoParse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./isoParse */ "./packages/muze-utils/node_modules/d3-time-format/src/isoParse.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isoParse", function() { return _isoParse__WEBPACK_IMPORTED_MODULE_3__["default"]; });






/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time-format/src/isoFormat.js":
/*!**************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time-format/src/isoFormat.js ***!
  \**************************************************************************/
/*! exports provided: isoSpecifier, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isoSpecifier", function() { return isoSpecifier; });
/* harmony import */ var _defaultLocale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaultLocale */ "./packages/muze-utils/node_modules/d3-time-format/src/defaultLocale.js");

var isoSpecifier = "%Y-%m-%dT%H:%M:%S.%LZ";

function formatIsoNative(date) {
  return date.toISOString();
}

var formatIso = Date.prototype.toISOString ? formatIsoNative : Object(_defaultLocale__WEBPACK_IMPORTED_MODULE_0__["utcFormat"])(isoSpecifier);
/* harmony default export */ __webpack_exports__["default"] = (formatIso);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time-format/src/isoParse.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time-format/src/isoParse.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _isoFormat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isoFormat */ "./packages/muze-utils/node_modules/d3-time-format/src/isoFormat.js");
/* harmony import */ var _defaultLocale__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./defaultLocale */ "./packages/muze-utils/node_modules/d3-time-format/src/defaultLocale.js");



function parseIsoNative(string) {
  var date = new Date(string);
  return isNaN(date) ? null : date;
}

var parseIso = +new Date("2000-01-01T00:00:00.000Z") ? parseIsoNative : Object(_defaultLocale__WEBPACK_IMPORTED_MODULE_1__["utcParse"])(_isoFormat__WEBPACK_IMPORTED_MODULE_0__["isoSpecifier"]);
/* harmony default export */ __webpack_exports__["default"] = (parseIso);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time-format/src/locale.js":
/*!***********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time-format/src/locale.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return formatLocale; });
/* harmony import */ var d3_time__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-time */ "./packages/muze-utils/node_modules/d3-time/src/index.js");


function localDate(d) {
  if (0 <= d.y && d.y < 100) {
    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);
    date.setFullYear(d.y);
    return date;
  }

  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);
}

function utcDate(d) {
  if (0 <= d.y && d.y < 100) {
    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));
    date.setUTCFullYear(d.y);
    return date;
  }

  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));
}

function newYear(y) {
  return {
    y: y,
    m: 0,
    d: 1,
    H: 0,
    M: 0,
    S: 0,
    L: 0
  };
}

function formatLocale(locale) {
  var locale_dateTime = locale.dateTime,
      locale_date = locale.date,
      locale_time = locale.time,
      locale_periods = locale.periods,
      locale_weekdays = locale.days,
      locale_shortWeekdays = locale.shortDays,
      locale_months = locale.months,
      locale_shortMonths = locale.shortMonths;
  var periodRe = formatRe(locale_periods),
      periodLookup = formatLookup(locale_periods),
      weekdayRe = formatRe(locale_weekdays),
      weekdayLookup = formatLookup(locale_weekdays),
      shortWeekdayRe = formatRe(locale_shortWeekdays),
      shortWeekdayLookup = formatLookup(locale_shortWeekdays),
      monthRe = formatRe(locale_months),
      monthLookup = formatLookup(locale_months),
      shortMonthRe = formatRe(locale_shortMonths),
      shortMonthLookup = formatLookup(locale_shortMonths);
  var formats = {
    "a": formatShortWeekday,
    "A": formatWeekday,
    "b": formatShortMonth,
    "B": formatMonth,
    "c": null,
    "d": formatDayOfMonth,
    "e": formatDayOfMonth,
    "f": formatMicroseconds,
    "H": formatHour24,
    "I": formatHour12,
    "j": formatDayOfYear,
    "L": formatMilliseconds,
    "m": formatMonthNumber,
    "M": formatMinutes,
    "p": formatPeriod,
    "Q": formatUnixTimestamp,
    "s": formatUnixTimestampSeconds,
    "S": formatSeconds,
    "u": formatWeekdayNumberMonday,
    "U": formatWeekNumberSunday,
    "V": formatWeekNumberISO,
    "w": formatWeekdayNumberSunday,
    "W": formatWeekNumberMonday,
    "x": null,
    "X": null,
    "y": formatYear,
    "Y": formatFullYear,
    "Z": formatZone,
    "%": formatLiteralPercent
  };
  var utcFormats = {
    "a": formatUTCShortWeekday,
    "A": formatUTCWeekday,
    "b": formatUTCShortMonth,
    "B": formatUTCMonth,
    "c": null,
    "d": formatUTCDayOfMonth,
    "e": formatUTCDayOfMonth,
    "f": formatUTCMicroseconds,
    "H": formatUTCHour24,
    "I": formatUTCHour12,
    "j": formatUTCDayOfYear,
    "L": formatUTCMilliseconds,
    "m": formatUTCMonthNumber,
    "M": formatUTCMinutes,
    "p": formatUTCPeriod,
    "Q": formatUnixTimestamp,
    "s": formatUnixTimestampSeconds,
    "S": formatUTCSeconds,
    "u": formatUTCWeekdayNumberMonday,
    "U": formatUTCWeekNumberSunday,
    "V": formatUTCWeekNumberISO,
    "w": formatUTCWeekdayNumberSunday,
    "W": formatUTCWeekNumberMonday,
    "x": null,
    "X": null,
    "y": formatUTCYear,
    "Y": formatUTCFullYear,
    "Z": formatUTCZone,
    "%": formatLiteralPercent
  };
  var parses = {
    "a": parseShortWeekday,
    "A": parseWeekday,
    "b": parseShortMonth,
    "B": parseMonth,
    "c": parseLocaleDateTime,
    "d": parseDayOfMonth,
    "e": parseDayOfMonth,
    "f": parseMicroseconds,
    "H": parseHour24,
    "I": parseHour24,
    "j": parseDayOfYear,
    "L": parseMilliseconds,
    "m": parseMonthNumber,
    "M": parseMinutes,
    "p": parsePeriod,
    "Q": parseUnixTimestamp,
    "s": parseUnixTimestampSeconds,
    "S": parseSeconds,
    "u": parseWeekdayNumberMonday,
    "U": parseWeekNumberSunday,
    "V": parseWeekNumberISO,
    "w": parseWeekdayNumberSunday,
    "W": parseWeekNumberMonday,
    "x": parseLocaleDate,
    "X": parseLocaleTime,
    "y": parseYear,
    "Y": parseFullYear,
    "Z": parseZone,
    "%": parseLiteralPercent
  }; // These recursive directive definitions must be deferred.

  formats.x = newFormat(locale_date, formats);
  formats.X = newFormat(locale_time, formats);
  formats.c = newFormat(locale_dateTime, formats);
  utcFormats.x = newFormat(locale_date, utcFormats);
  utcFormats.X = newFormat(locale_time, utcFormats);
  utcFormats.c = newFormat(locale_dateTime, utcFormats);

  function newFormat(specifier, formats) {
    return function (date) {
      var string = [],
          i = -1,
          j = 0,
          n = specifier.length,
          c,
          pad,
          format;
      if (!(date instanceof Date)) date = new Date(+date);

      while (++i < n) {
        if (specifier.charCodeAt(i) === 37) {
          string.push(specifier.slice(j, i));
          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);else pad = c === "e" ? " " : "0";
          if (format = formats[c]) c = format(date, pad);
          string.push(c);
          j = i + 1;
        }
      }

      string.push(specifier.slice(j, i));
      return string.join("");
    };
  }

  function newParse(specifier, newDate) {
    return function (string) {
      var d = newYear(1900),
          i = parseSpecifier(d, specifier, string += "", 0),
          week,
          day;
      if (i != string.length) return null; // If a UNIX timestamp is specified, return it.

      if ("Q" in d) return new Date(d.Q); // The am-pm flag is 0 for AM, and 1 for PM.

      if ("p" in d) d.H = d.H % 12 + d.p * 12; // Convert day-of-week and week-of-year to day-of-year.

      if ("V" in d) {
        if (d.V < 1 || d.V > 53) return null;
        if (!("w" in d)) d.w = 1;

        if ("Z" in d) {
          week = utcDate(newYear(d.y)), day = week.getUTCDay();
          week = day > 4 || day === 0 ? d3_time__WEBPACK_IMPORTED_MODULE_0__["utcMonday"].ceil(week) : Object(d3_time__WEBPACK_IMPORTED_MODULE_0__["utcMonday"])(week);
          week = d3_time__WEBPACK_IMPORTED_MODULE_0__["utcDay"].offset(week, (d.V - 1) * 7);
          d.y = week.getUTCFullYear();
          d.m = week.getUTCMonth();
          d.d = week.getUTCDate() + (d.w + 6) % 7;
        } else {
          week = newDate(newYear(d.y)), day = week.getDay();
          week = day > 4 || day === 0 ? d3_time__WEBPACK_IMPORTED_MODULE_0__["timeMonday"].ceil(week) : Object(d3_time__WEBPACK_IMPORTED_MODULE_0__["timeMonday"])(week);
          week = d3_time__WEBPACK_IMPORTED_MODULE_0__["timeDay"].offset(week, (d.V - 1) * 7);
          d.y = week.getFullYear();
          d.m = week.getMonth();
          d.d = week.getDate() + (d.w + 6) % 7;
        }
      } else if ("W" in d || "U" in d) {
        if (!("w" in d)) d.w = "u" in d ? d.u % 7 : "W" in d ? 1 : 0;
        day = "Z" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();
        d.m = 0;
        d.d = "W" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;
      } // If a time zone is specified, all fields are interpreted as UTC and then
      // offset according to the specified time zone.


      if ("Z" in d) {
        d.H += d.Z / 100 | 0;
        d.M += d.Z % 100;
        return utcDate(d);
      } // Otherwise, all fields are in local time.


      return newDate(d);
    };
  }

  function parseSpecifier(d, specifier, string, j) {
    var i = 0,
        n = specifier.length,
        m = string.length,
        c,
        parse;

    while (i < n) {
      if (j >= m) return -1;
      c = specifier.charCodeAt(i++);

      if (c === 37) {
        c = specifier.charAt(i++);
        parse = parses[c in pads ? specifier.charAt(i++) : c];
        if (!parse || (j = parse(d, string, j)) < 0) return -1;
      } else if (c != string.charCodeAt(j++)) {
        return -1;
      }
    }

    return j;
  }

  function parsePeriod(d, string, i) {
    var n = periodRe.exec(string.slice(i));
    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseShortWeekday(d, string, i) {
    var n = shortWeekdayRe.exec(string.slice(i));
    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseWeekday(d, string, i) {
    var n = weekdayRe.exec(string.slice(i));
    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseShortMonth(d, string, i) {
    var n = shortMonthRe.exec(string.slice(i));
    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseMonth(d, string, i) {
    var n = monthRe.exec(string.slice(i));
    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseLocaleDateTime(d, string, i) {
    return parseSpecifier(d, locale_dateTime, string, i);
  }

  function parseLocaleDate(d, string, i) {
    return parseSpecifier(d, locale_date, string, i);
  }

  function parseLocaleTime(d, string, i) {
    return parseSpecifier(d, locale_time, string, i);
  }

  function formatShortWeekday(d) {
    return locale_shortWeekdays[d.getDay()];
  }

  function formatWeekday(d) {
    return locale_weekdays[d.getDay()];
  }

  function formatShortMonth(d) {
    return locale_shortMonths[d.getMonth()];
  }

  function formatMonth(d) {
    return locale_months[d.getMonth()];
  }

  function formatPeriod(d) {
    return locale_periods[+(d.getHours() >= 12)];
  }

  function formatUTCShortWeekday(d) {
    return locale_shortWeekdays[d.getUTCDay()];
  }

  function formatUTCWeekday(d) {
    return locale_weekdays[d.getUTCDay()];
  }

  function formatUTCShortMonth(d) {
    return locale_shortMonths[d.getUTCMonth()];
  }

  function formatUTCMonth(d) {
    return locale_months[d.getUTCMonth()];
  }

  function formatUTCPeriod(d) {
    return locale_periods[+(d.getUTCHours() >= 12)];
  }

  return {
    format: function format(specifier) {
      var f = newFormat(specifier += "", formats);

      f.toString = function () {
        return specifier;
      };

      return f;
    },
    parse: function parse(specifier) {
      var p = newParse(specifier += "", localDate);

      p.toString = function () {
        return specifier;
      };

      return p;
    },
    utcFormat: function utcFormat(specifier) {
      var f = newFormat(specifier += "", utcFormats);

      f.toString = function () {
        return specifier;
      };

      return f;
    },
    utcParse: function utcParse(specifier) {
      var p = newParse(specifier, utcDate);

      p.toString = function () {
        return specifier;
      };

      return p;
    }
  };
}
var pads = {
  "-": "",
  "_": " ",
  "0": "0"
},
    numberRe = /^\s*\d+/,
    // note: ignores next directive
percentRe = /^%/,
    requoteRe = /[\\^$*+?|[\]().{}]/g;

function pad(value, fill, width) {
  var sign = value < 0 ? "-" : "",
      string = (sign ? -value : value) + "",
      length = string.length;
  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);
}

function requote(s) {
  return s.replace(requoteRe, "\\$&");
}

function formatRe(names) {
  return new RegExp("^(?:" + names.map(requote).join("|") + ")", "i");
}

function formatLookup(names) {
  var map = {},
      i = -1,
      n = names.length;

  while (++i < n) {
    map[names[i].toLowerCase()] = i;
  }

  return map;
}

function parseWeekdayNumberSunday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 1));
  return n ? (d.w = +n[0], i + n[0].length) : -1;
}

function parseWeekdayNumberMonday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 1));
  return n ? (d.u = +n[0], i + n[0].length) : -1;
}

function parseWeekNumberSunday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.U = +n[0], i + n[0].length) : -1;
}

function parseWeekNumberISO(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.V = +n[0], i + n[0].length) : -1;
}

function parseWeekNumberMonday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.W = +n[0], i + n[0].length) : -1;
}

function parseFullYear(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 4));
  return n ? (d.y = +n[0], i + n[0].length) : -1;
}

function parseYear(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;
}

function parseZone(d, string, i) {
  var n = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i, i + 6));
  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || "00")), i + n[0].length) : -1;
}

function parseMonthNumber(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;
}

function parseDayOfMonth(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.d = +n[0], i + n[0].length) : -1;
}

function parseDayOfYear(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 3));
  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;
}

function parseHour24(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.H = +n[0], i + n[0].length) : -1;
}

function parseMinutes(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.M = +n[0], i + n[0].length) : -1;
}

function parseSeconds(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.S = +n[0], i + n[0].length) : -1;
}

function parseMilliseconds(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 3));
  return n ? (d.L = +n[0], i + n[0].length) : -1;
}

function parseMicroseconds(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 6));
  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;
}

function parseLiteralPercent(d, string, i) {
  var n = percentRe.exec(string.slice(i, i + 1));
  return n ? i + n[0].length : -1;
}

function parseUnixTimestamp(d, string, i) {
  var n = numberRe.exec(string.slice(i));
  return n ? (d.Q = +n[0], i + n[0].length) : -1;
}

function parseUnixTimestampSeconds(d, string, i) {
  var n = numberRe.exec(string.slice(i));
  return n ? (d.Q = +n[0] * 1000, i + n[0].length) : -1;
}

function formatDayOfMonth(d, p) {
  return pad(d.getDate(), p, 2);
}

function formatHour24(d, p) {
  return pad(d.getHours(), p, 2);
}

function formatHour12(d, p) {
  return pad(d.getHours() % 12 || 12, p, 2);
}

function formatDayOfYear(d, p) {
  return pad(1 + d3_time__WEBPACK_IMPORTED_MODULE_0__["timeDay"].count(Object(d3_time__WEBPACK_IMPORTED_MODULE_0__["timeYear"])(d), d), p, 3);
}

function formatMilliseconds(d, p) {
  return pad(d.getMilliseconds(), p, 3);
}

function formatMicroseconds(d, p) {
  return formatMilliseconds(d, p) + "000";
}

function formatMonthNumber(d, p) {
  return pad(d.getMonth() + 1, p, 2);
}

function formatMinutes(d, p) {
  return pad(d.getMinutes(), p, 2);
}

function formatSeconds(d, p) {
  return pad(d.getSeconds(), p, 2);
}

function formatWeekdayNumberMonday(d) {
  var day = d.getDay();
  return day === 0 ? 7 : day;
}

function formatWeekNumberSunday(d, p) {
  return pad(d3_time__WEBPACK_IMPORTED_MODULE_0__["timeSunday"].count(Object(d3_time__WEBPACK_IMPORTED_MODULE_0__["timeYear"])(d), d), p, 2);
}

function formatWeekNumberISO(d, p) {
  var day = d.getDay();
  d = day >= 4 || day === 0 ? Object(d3_time__WEBPACK_IMPORTED_MODULE_0__["timeThursday"])(d) : d3_time__WEBPACK_IMPORTED_MODULE_0__["timeThursday"].ceil(d);
  return pad(d3_time__WEBPACK_IMPORTED_MODULE_0__["timeThursday"].count(Object(d3_time__WEBPACK_IMPORTED_MODULE_0__["timeYear"])(d), d) + (Object(d3_time__WEBPACK_IMPORTED_MODULE_0__["timeYear"])(d).getDay() === 4), p, 2);
}

function formatWeekdayNumberSunday(d) {
  return d.getDay();
}

function formatWeekNumberMonday(d, p) {
  return pad(d3_time__WEBPACK_IMPORTED_MODULE_0__["timeMonday"].count(Object(d3_time__WEBPACK_IMPORTED_MODULE_0__["timeYear"])(d), d), p, 2);
}

function formatYear(d, p) {
  return pad(d.getFullYear() % 100, p, 2);
}

function formatFullYear(d, p) {
  return pad(d.getFullYear() % 10000, p, 4);
}

function formatZone(d) {
  var z = d.getTimezoneOffset();
  return (z > 0 ? "-" : (z *= -1, "+")) + pad(z / 60 | 0, "0", 2) + pad(z % 60, "0", 2);
}

function formatUTCDayOfMonth(d, p) {
  return pad(d.getUTCDate(), p, 2);
}

function formatUTCHour24(d, p) {
  return pad(d.getUTCHours(), p, 2);
}

function formatUTCHour12(d, p) {
  return pad(d.getUTCHours() % 12 || 12, p, 2);
}

function formatUTCDayOfYear(d, p) {
  return pad(1 + d3_time__WEBPACK_IMPORTED_MODULE_0__["utcDay"].count(Object(d3_time__WEBPACK_IMPORTED_MODULE_0__["utcYear"])(d), d), p, 3);
}

function formatUTCMilliseconds(d, p) {
  return pad(d.getUTCMilliseconds(), p, 3);
}

function formatUTCMicroseconds(d, p) {
  return formatUTCMilliseconds(d, p) + "000";
}

function formatUTCMonthNumber(d, p) {
  return pad(d.getUTCMonth() + 1, p, 2);
}

function formatUTCMinutes(d, p) {
  return pad(d.getUTCMinutes(), p, 2);
}

function formatUTCSeconds(d, p) {
  return pad(d.getUTCSeconds(), p, 2);
}

function formatUTCWeekdayNumberMonday(d) {
  var dow = d.getUTCDay();
  return dow === 0 ? 7 : dow;
}

function formatUTCWeekNumberSunday(d, p) {
  return pad(d3_time__WEBPACK_IMPORTED_MODULE_0__["utcSunday"].count(Object(d3_time__WEBPACK_IMPORTED_MODULE_0__["utcYear"])(d), d), p, 2);
}

function formatUTCWeekNumberISO(d, p) {
  var day = d.getUTCDay();
  d = day >= 4 || day === 0 ? Object(d3_time__WEBPACK_IMPORTED_MODULE_0__["utcThursday"])(d) : d3_time__WEBPACK_IMPORTED_MODULE_0__["utcThursday"].ceil(d);
  return pad(d3_time__WEBPACK_IMPORTED_MODULE_0__["utcThursday"].count(Object(d3_time__WEBPACK_IMPORTED_MODULE_0__["utcYear"])(d), d) + (Object(d3_time__WEBPACK_IMPORTED_MODULE_0__["utcYear"])(d).getUTCDay() === 4), p, 2);
}

function formatUTCWeekdayNumberSunday(d) {
  return d.getUTCDay();
}

function formatUTCWeekNumberMonday(d, p) {
  return pad(d3_time__WEBPACK_IMPORTED_MODULE_0__["utcMonday"].count(Object(d3_time__WEBPACK_IMPORTED_MODULE_0__["utcYear"])(d), d), p, 2);
}

function formatUTCYear(d, p) {
  return pad(d.getUTCFullYear() % 100, p, 2);
}

function formatUTCFullYear(d, p) {
  return pad(d.getUTCFullYear() % 10000, p, 4);
}

function formatUTCZone() {
  return "+0000";
}

function formatLiteralPercent() {
  return "%";
}

function formatUnixTimestamp(d) {
  return +d;
}

function formatUnixTimestampSeconds(d) {
  return Math.floor(+d / 1000);
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/day.js":
/*!*************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/day.js ***!
  \*************************************************************/
/*! exports provided: default, days */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "days", function() { return days; });
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");
/* harmony import */ var _duration__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./duration */ "./packages/muze-utils/node_modules/d3-time/src/duration.js");


var day = Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
  date.setHours(0, 0, 0, 0);
}, function (date, step) {
  date.setDate(date.getDate() + step);
}, function (start, end) {
  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * _duration__WEBPACK_IMPORTED_MODULE_1__["durationMinute"]) / _duration__WEBPACK_IMPORTED_MODULE_1__["durationDay"];
}, function (date) {
  return date.getDate() - 1;
});
/* harmony default export */ __webpack_exports__["default"] = (day);
var days = day.range;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/duration.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/duration.js ***!
  \******************************************************************/
/*! exports provided: durationSecond, durationMinute, durationHour, durationDay, durationWeek */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "durationSecond", function() { return durationSecond; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "durationMinute", function() { return durationMinute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "durationHour", function() { return durationHour; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "durationDay", function() { return durationDay; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "durationWeek", function() { return durationWeek; });
var durationSecond = 1e3;
var durationMinute = 6e4;
var durationHour = 36e5;
var durationDay = 864e5;
var durationWeek = 6048e5;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/hour.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/hour.js ***!
  \**************************************************************/
/*! exports provided: default, hours */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hours", function() { return hours; });
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");
/* harmony import */ var _duration__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./duration */ "./packages/muze-utils/node_modules/d3-time/src/duration.js");


var hour = Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
  date.setTime(date - date.getMilliseconds() - date.getSeconds() * _duration__WEBPACK_IMPORTED_MODULE_1__["durationSecond"] - date.getMinutes() * _duration__WEBPACK_IMPORTED_MODULE_1__["durationMinute"]);
}, function (date, step) {
  date.setTime(+date + step * _duration__WEBPACK_IMPORTED_MODULE_1__["durationHour"]);
}, function (start, end) {
  return (end - start) / _duration__WEBPACK_IMPORTED_MODULE_1__["durationHour"];
}, function (date) {
  return date.getHours();
});
/* harmony default export */ __webpack_exports__["default"] = (hour);
var hours = hour.range;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/index.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/index.js ***!
  \***************************************************************/
/*! exports provided: timeInterval, timeMillisecond, timeMilliseconds, utcMillisecond, utcMilliseconds, timeSecond, timeSeconds, utcSecond, utcSeconds, timeMinute, timeMinutes, timeHour, timeHours, timeDay, timeDays, timeWeek, timeWeeks, timeSunday, timeSundays, timeMonday, timeMondays, timeTuesday, timeTuesdays, timeWednesday, timeWednesdays, timeThursday, timeThursdays, timeFriday, timeFridays, timeSaturday, timeSaturdays, timeMonth, timeMonths, timeYear, timeYears, utcMinute, utcMinutes, utcHour, utcHours, utcDay, utcDays, utcWeek, utcWeeks, utcSunday, utcSundays, utcMonday, utcMondays, utcTuesday, utcTuesdays, utcWednesday, utcWednesdays, utcThursday, utcThursdays, utcFriday, utcFridays, utcSaturday, utcSaturdays, utcMonth, utcMonths, utcYear, utcYears */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeInterval", function() { return _interval__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _millisecond__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./millisecond */ "./packages/muze-utils/node_modules/d3-time/src/millisecond.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeMillisecond", function() { return _millisecond__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeMilliseconds", function() { return _millisecond__WEBPACK_IMPORTED_MODULE_1__["milliseconds"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcMillisecond", function() { return _millisecond__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcMilliseconds", function() { return _millisecond__WEBPACK_IMPORTED_MODULE_1__["milliseconds"]; });

/* harmony import */ var _second__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./second */ "./packages/muze-utils/node_modules/d3-time/src/second.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeSecond", function() { return _second__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeSeconds", function() { return _second__WEBPACK_IMPORTED_MODULE_2__["seconds"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcSecond", function() { return _second__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcSeconds", function() { return _second__WEBPACK_IMPORTED_MODULE_2__["seconds"]; });

/* harmony import */ var _minute__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./minute */ "./packages/muze-utils/node_modules/d3-time/src/minute.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeMinute", function() { return _minute__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeMinutes", function() { return _minute__WEBPACK_IMPORTED_MODULE_3__["minutes"]; });

/* harmony import */ var _hour__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./hour */ "./packages/muze-utils/node_modules/d3-time/src/hour.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeHour", function() { return _hour__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeHours", function() { return _hour__WEBPACK_IMPORTED_MODULE_4__["hours"]; });

/* harmony import */ var _day__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./day */ "./packages/muze-utils/node_modules/d3-time/src/day.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeDay", function() { return _day__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeDays", function() { return _day__WEBPACK_IMPORTED_MODULE_5__["days"]; });

/* harmony import */ var _week__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./week */ "./packages/muze-utils/node_modules/d3-time/src/week.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeWeek", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["sunday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeWeeks", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["sundays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeSunday", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["sunday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeSundays", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["sundays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeMonday", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["monday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeMondays", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["mondays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeTuesday", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["tuesday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeTuesdays", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["tuesdays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeWednesday", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["wednesday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeWednesdays", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["wednesdays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeThursday", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["thursday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeThursdays", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["thursdays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeFriday", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["friday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeFridays", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["fridays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeSaturday", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["saturday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeSaturdays", function() { return _week__WEBPACK_IMPORTED_MODULE_6__["saturdays"]; });

/* harmony import */ var _month__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./month */ "./packages/muze-utils/node_modules/d3-time/src/month.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeMonth", function() { return _month__WEBPACK_IMPORTED_MODULE_7__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeMonths", function() { return _month__WEBPACK_IMPORTED_MODULE_7__["months"]; });

/* harmony import */ var _year__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./year */ "./packages/muze-utils/node_modules/d3-time/src/year.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeYear", function() { return _year__WEBPACK_IMPORTED_MODULE_8__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeYears", function() { return _year__WEBPACK_IMPORTED_MODULE_8__["years"]; });

/* harmony import */ var _utcMinute__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utcMinute */ "./packages/muze-utils/node_modules/d3-time/src/utcMinute.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcMinute", function() { return _utcMinute__WEBPACK_IMPORTED_MODULE_9__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcMinutes", function() { return _utcMinute__WEBPACK_IMPORTED_MODULE_9__["utcMinutes"]; });

/* harmony import */ var _utcHour__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utcHour */ "./packages/muze-utils/node_modules/d3-time/src/utcHour.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcHour", function() { return _utcHour__WEBPACK_IMPORTED_MODULE_10__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcHours", function() { return _utcHour__WEBPACK_IMPORTED_MODULE_10__["utcHours"]; });

/* harmony import */ var _utcDay__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./utcDay */ "./packages/muze-utils/node_modules/d3-time/src/utcDay.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcDay", function() { return _utcDay__WEBPACK_IMPORTED_MODULE_11__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcDays", function() { return _utcDay__WEBPACK_IMPORTED_MODULE_11__["utcDays"]; });

/* harmony import */ var _utcWeek__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./utcWeek */ "./packages/muze-utils/node_modules/d3-time/src/utcWeek.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcWeek", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcSunday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcWeeks", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcSundays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcSunday", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcSunday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcSundays", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcSundays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcMonday", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcMonday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcMondays", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcMondays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcTuesday", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcTuesday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcTuesdays", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcTuesdays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcWednesday", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcWednesday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcWednesdays", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcWednesdays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcThursday", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcThursday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcThursdays", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcThursdays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcFriday", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcFriday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcFridays", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcFridays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcSaturday", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcSaturday"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcSaturdays", function() { return _utcWeek__WEBPACK_IMPORTED_MODULE_12__["utcSaturdays"]; });

/* harmony import */ var _utcMonth__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./utcMonth */ "./packages/muze-utils/node_modules/d3-time/src/utcMonth.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcMonth", function() { return _utcMonth__WEBPACK_IMPORTED_MODULE_13__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcMonths", function() { return _utcMonth__WEBPACK_IMPORTED_MODULE_13__["utcMonths"]; });

/* harmony import */ var _utcYear__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./utcYear */ "./packages/muze-utils/node_modules/d3-time/src/utcYear.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcYear", function() { return _utcYear__WEBPACK_IMPORTED_MODULE_14__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "utcYears", function() { return _utcYear__WEBPACK_IMPORTED_MODULE_14__["utcYears"]; });

















/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/interval.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/interval.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return newInterval; });
var t0 = new Date(),
    t1 = new Date();
function newInterval(floori, offseti, count, field) {
  function interval(date) {
    return floori(date = new Date(+date)), date;
  }

  interval.floor = interval;

  interval.ceil = function (date) {
    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;
  };

  interval.round = function (date) {
    var d0 = interval(date),
        d1 = interval.ceil(date);
    return date - d0 < d1 - date ? d0 : d1;
  };

  interval.offset = function (date, step) {
    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;
  };

  interval.range = function (start, stop, step) {
    var range = [],
        previous;
    start = interval.ceil(start);
    step = step == null ? 1 : Math.floor(step);
    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date

    do {
      range.push(previous = new Date(+start)), offseti(start, step), floori(start);
    } while (previous < start && start < stop);

    return range;
  };

  interval.filter = function (test) {
    return newInterval(function (date) {
      if (date >= date) while (floori(date), !test(date)) {
        date.setTime(date - 1);
      }
    }, function (date, step) {
      if (date >= date) {
        if (step < 0) while (++step <= 0) {
          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty

        } else while (--step >= 0) {
          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty

        }
      }
    });
  };

  if (count) {
    interval.count = function (start, end) {
      t0.setTime(+start), t1.setTime(+end);
      floori(t0), floori(t1);
      return Math.floor(count(t0, t1));
    };

    interval.every = function (step) {
      step = Math.floor(step);
      return !isFinite(step) || !(step > 0) ? null : !(step > 1) ? interval : interval.filter(field ? function (d) {
        return field(d) % step === 0;
      } : function (d) {
        return interval.count(0, d) % step === 0;
      });
    };
  }

  return interval;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/millisecond.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/millisecond.js ***!
  \*********************************************************************/
/*! exports provided: default, milliseconds */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "milliseconds", function() { return milliseconds; });
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");

var millisecond = Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function () {// noop
}, function (date, step) {
  date.setTime(+date + step);
}, function (start, end) {
  return end - start;
}); // An optimized implementation for this simple case.

millisecond.every = function (k) {
  k = Math.floor(k);
  if (!isFinite(k) || !(k > 0)) return null;
  if (!(k > 1)) return millisecond;
  return Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
    date.setTime(Math.floor(date / k) * k);
  }, function (date, step) {
    date.setTime(+date + step * k);
  }, function (start, end) {
    return (end - start) / k;
  });
};

/* harmony default export */ __webpack_exports__["default"] = (millisecond);
var milliseconds = millisecond.range;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/minute.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/minute.js ***!
  \****************************************************************/
/*! exports provided: default, minutes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "minutes", function() { return minutes; });
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");
/* harmony import */ var _duration__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./duration */ "./packages/muze-utils/node_modules/d3-time/src/duration.js");


var minute = Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
  date.setTime(date - date.getMilliseconds() - date.getSeconds() * _duration__WEBPACK_IMPORTED_MODULE_1__["durationSecond"]);
}, function (date, step) {
  date.setTime(+date + step * _duration__WEBPACK_IMPORTED_MODULE_1__["durationMinute"]);
}, function (start, end) {
  return (end - start) / _duration__WEBPACK_IMPORTED_MODULE_1__["durationMinute"];
}, function (date) {
  return date.getMinutes();
});
/* harmony default export */ __webpack_exports__["default"] = (minute);
var minutes = minute.range;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/month.js":
/*!***************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/month.js ***!
  \***************************************************************/
/*! exports provided: default, months */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "months", function() { return months; });
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");

var month = Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
  date.setDate(1);
  date.setHours(0, 0, 0, 0);
}, function (date, step) {
  date.setMonth(date.getMonth() + step);
}, function (start, end) {
  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;
}, function (date) {
  return date.getMonth();
});
/* harmony default export */ __webpack_exports__["default"] = (month);
var months = month.range;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/second.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/second.js ***!
  \****************************************************************/
/*! exports provided: default, seconds */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "seconds", function() { return seconds; });
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");
/* harmony import */ var _duration__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./duration */ "./packages/muze-utils/node_modules/d3-time/src/duration.js");


var second = Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
  date.setTime(date - date.getMilliseconds());
}, function (date, step) {
  date.setTime(+date + step * _duration__WEBPACK_IMPORTED_MODULE_1__["durationSecond"]);
}, function (start, end) {
  return (end - start) / _duration__WEBPACK_IMPORTED_MODULE_1__["durationSecond"];
}, function (date) {
  return date.getUTCSeconds();
});
/* harmony default export */ __webpack_exports__["default"] = (second);
var seconds = second.range;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/utcDay.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/utcDay.js ***!
  \****************************************************************/
/*! exports provided: default, utcDays */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcDays", function() { return utcDays; });
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");
/* harmony import */ var _duration__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./duration */ "./packages/muze-utils/node_modules/d3-time/src/duration.js");


var utcDay = Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
  date.setUTCHours(0, 0, 0, 0);
}, function (date, step) {
  date.setUTCDate(date.getUTCDate() + step);
}, function (start, end) {
  return (end - start) / _duration__WEBPACK_IMPORTED_MODULE_1__["durationDay"];
}, function (date) {
  return date.getUTCDate() - 1;
});
/* harmony default export */ __webpack_exports__["default"] = (utcDay);
var utcDays = utcDay.range;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/utcHour.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/utcHour.js ***!
  \*****************************************************************/
/*! exports provided: default, utcHours */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcHours", function() { return utcHours; });
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");
/* harmony import */ var _duration__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./duration */ "./packages/muze-utils/node_modules/d3-time/src/duration.js");


var utcHour = Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
  date.setUTCMinutes(0, 0, 0);
}, function (date, step) {
  date.setTime(+date + step * _duration__WEBPACK_IMPORTED_MODULE_1__["durationHour"]);
}, function (start, end) {
  return (end - start) / _duration__WEBPACK_IMPORTED_MODULE_1__["durationHour"];
}, function (date) {
  return date.getUTCHours();
});
/* harmony default export */ __webpack_exports__["default"] = (utcHour);
var utcHours = utcHour.range;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/utcMinute.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/utcMinute.js ***!
  \*******************************************************************/
/*! exports provided: default, utcMinutes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcMinutes", function() { return utcMinutes; });
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");
/* harmony import */ var _duration__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./duration */ "./packages/muze-utils/node_modules/d3-time/src/duration.js");


var utcMinute = Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
  date.setUTCSeconds(0, 0);
}, function (date, step) {
  date.setTime(+date + step * _duration__WEBPACK_IMPORTED_MODULE_1__["durationMinute"]);
}, function (start, end) {
  return (end - start) / _duration__WEBPACK_IMPORTED_MODULE_1__["durationMinute"];
}, function (date) {
  return date.getUTCMinutes();
});
/* harmony default export */ __webpack_exports__["default"] = (utcMinute);
var utcMinutes = utcMinute.range;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/utcMonth.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/utcMonth.js ***!
  \******************************************************************/
/*! exports provided: default, utcMonths */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcMonths", function() { return utcMonths; });
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");

var utcMonth = Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
  date.setUTCDate(1);
  date.setUTCHours(0, 0, 0, 0);
}, function (date, step) {
  date.setUTCMonth(date.getUTCMonth() + step);
}, function (start, end) {
  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;
}, function (date) {
  return date.getUTCMonth();
});
/* harmony default export */ __webpack_exports__["default"] = (utcMonth);
var utcMonths = utcMonth.range;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/utcWeek.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/utcWeek.js ***!
  \*****************************************************************/
/*! exports provided: utcSunday, utcMonday, utcTuesday, utcWednesday, utcThursday, utcFriday, utcSaturday, utcSundays, utcMondays, utcTuesdays, utcWednesdays, utcThursdays, utcFridays, utcSaturdays */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcSunday", function() { return utcSunday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcMonday", function() { return utcMonday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcTuesday", function() { return utcTuesday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcWednesday", function() { return utcWednesday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcThursday", function() { return utcThursday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcFriday", function() { return utcFriday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcSaturday", function() { return utcSaturday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcSundays", function() { return utcSundays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcMondays", function() { return utcMondays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcTuesdays", function() { return utcTuesdays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcWednesdays", function() { return utcWednesdays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcThursdays", function() { return utcThursdays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcFridays", function() { return utcFridays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcSaturdays", function() { return utcSaturdays; });
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");
/* harmony import */ var _duration__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./duration */ "./packages/muze-utils/node_modules/d3-time/src/duration.js");



function utcWeekday(i) {
  return Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);
    date.setUTCHours(0, 0, 0, 0);
  }, function (date, step) {
    date.setUTCDate(date.getUTCDate() + step * 7);
  }, function (start, end) {
    return (end - start) / _duration__WEBPACK_IMPORTED_MODULE_1__["durationWeek"];
  });
}

var utcSunday = utcWeekday(0);
var utcMonday = utcWeekday(1);
var utcTuesday = utcWeekday(2);
var utcWednesday = utcWeekday(3);
var utcThursday = utcWeekday(4);
var utcFriday = utcWeekday(5);
var utcSaturday = utcWeekday(6);
var utcSundays = utcSunday.range;
var utcMondays = utcMonday.range;
var utcTuesdays = utcTuesday.range;
var utcWednesdays = utcWednesday.range;
var utcThursdays = utcThursday.range;
var utcFridays = utcFriday.range;
var utcSaturdays = utcSaturday.range;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/utcYear.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/utcYear.js ***!
  \*****************************************************************/
/*! exports provided: default, utcYears */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "utcYears", function() { return utcYears; });
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");

var utcYear = Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
  date.setUTCMonth(0, 1);
  date.setUTCHours(0, 0, 0, 0);
}, function (date, step) {
  date.setUTCFullYear(date.getUTCFullYear() + step);
}, function (start, end) {
  return end.getUTCFullYear() - start.getUTCFullYear();
}, function (date) {
  return date.getUTCFullYear();
}); // An optimized implementation for this simple case.

utcYear.every = function (k) {
  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);
    date.setUTCMonth(0, 1);
    date.setUTCHours(0, 0, 0, 0);
  }, function (date, step) {
    date.setUTCFullYear(date.getUTCFullYear() + step * k);
  });
};

/* harmony default export */ __webpack_exports__["default"] = (utcYear);
var utcYears = utcYear.range;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/week.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/week.js ***!
  \**************************************************************/
/*! exports provided: sunday, monday, tuesday, wednesday, thursday, friday, saturday, sundays, mondays, tuesdays, wednesdays, thursdays, fridays, saturdays */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sunday", function() { return sunday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "monday", function() { return monday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tuesday", function() { return tuesday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "wednesday", function() { return wednesday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "thursday", function() { return thursday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "friday", function() { return friday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "saturday", function() { return saturday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sundays", function() { return sundays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mondays", function() { return mondays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tuesdays", function() { return tuesdays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "wednesdays", function() { return wednesdays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "thursdays", function() { return thursdays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fridays", function() { return fridays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "saturdays", function() { return saturdays; });
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");
/* harmony import */ var _duration__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./duration */ "./packages/muze-utils/node_modules/d3-time/src/duration.js");



function weekday(i) {
  return Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);
    date.setHours(0, 0, 0, 0);
  }, function (date, step) {
    date.setDate(date.getDate() + step * 7);
  }, function (start, end) {
    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * _duration__WEBPACK_IMPORTED_MODULE_1__["durationMinute"]) / _duration__WEBPACK_IMPORTED_MODULE_1__["durationWeek"];
  });
}

var sunday = weekday(0);
var monday = weekday(1);
var tuesday = weekday(2);
var wednesday = weekday(3);
var thursday = weekday(4);
var friday = weekday(5);
var saturday = weekday(6);
var sundays = sunday.range;
var mondays = monday.range;
var tuesdays = tuesday.range;
var wednesdays = wednesday.range;
var thursdays = thursday.range;
var fridays = friday.range;
var saturdays = saturday.range;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-time/src/year.js":
/*!**************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-time/src/year.js ***!
  \**************************************************************/
/*! exports provided: default, years */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "years", function() { return years; });
/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-time/src/interval.js");

var year = Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
  date.setMonth(0, 1);
  date.setHours(0, 0, 0, 0);
}, function (date, step) {
  date.setFullYear(date.getFullYear() + step);
}, function (start, end) {
  return end.getFullYear() - start.getFullYear();
}, function (date) {
  return date.getFullYear();
}); // An optimized implementation for this simple case.

year.every = function (k) {
  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : Object(_interval__WEBPACK_IMPORTED_MODULE_0__["default"])(function (date) {
    date.setFullYear(Math.floor(date.getFullYear() / k) * k);
    date.setMonth(0, 1);
    date.setHours(0, 0, 0, 0);
  }, function (date, step) {
    date.setFullYear(date.getFullYear() + step * k);
  });
};

/* harmony default export */ __webpack_exports__["default"] = (year);
var years = year.range;

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-timer/src/index.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-timer/src/index.js ***!
  \****************************************************************/
/*! exports provided: now, timer, timerFlush, timeout, interval */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _timer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timer */ "./packages/muze-utils/node_modules/d3-timer/src/timer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "now", function() { return _timer__WEBPACK_IMPORTED_MODULE_0__["now"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timer", function() { return _timer__WEBPACK_IMPORTED_MODULE_0__["timer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timerFlush", function() { return _timer__WEBPACK_IMPORTED_MODULE_0__["timerFlush"]; });

/* harmony import */ var _timeout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./timeout */ "./packages/muze-utils/node_modules/d3-timer/src/timeout.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeout", function() { return _timeout__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _interval__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./interval */ "./packages/muze-utils/node_modules/d3-timer/src/interval.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interval", function() { return _interval__WEBPACK_IMPORTED_MODULE_2__["default"]; });





/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-timer/src/interval.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-timer/src/interval.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _timer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timer */ "./packages/muze-utils/node_modules/d3-timer/src/timer.js");

/* harmony default export */ __webpack_exports__["default"] = (function (callback, delay, time) {
  var t = new _timer__WEBPACK_IMPORTED_MODULE_0__["Timer"](),
      total = delay;
  if (delay == null) return t.restart(callback, delay, time), t;
  delay = +delay, time = time == null ? Object(_timer__WEBPACK_IMPORTED_MODULE_0__["now"])() : +time;
  t.restart(function tick(elapsed) {
    elapsed += total;
    t.restart(tick, total += delay, time);
    callback(elapsed);
  }, delay, time);
  return t;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-timer/src/timeout.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-timer/src/timeout.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _timer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timer */ "./packages/muze-utils/node_modules/d3-timer/src/timer.js");

/* harmony default export */ __webpack_exports__["default"] = (function (callback, delay, time) {
  var t = new _timer__WEBPACK_IMPORTED_MODULE_0__["Timer"]();
  delay = delay == null ? 0 : +delay;
  t.restart(function (elapsed) {
    t.stop();
    callback(elapsed + delay);
  }, delay, time);
  return t;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-timer/src/timer.js":
/*!****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-timer/src/timer.js ***!
  \****************************************************************/
/*! exports provided: now, Timer, timer, timerFlush */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "now", function() { return now; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Timer", function() { return Timer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "timer", function() { return timer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "timerFlush", function() { return timerFlush; });
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

var frame = 0,
    // is an animation frame pending?
timeout = 0,
    // is a timeout pending?
interval = 0,
    // are any timers active?
pokeDelay = 1000,
    // how frequently we check for clock skew
taskHead,
    taskTail,
    clockLast = 0,
    clockNow = 0,
    clockSkew = 0,
    clock = (typeof performance === "undefined" ? "undefined" : _typeof(performance)) === "object" && performance.now ? performance : Date,
    setFrame = (typeof window === "undefined" ? "undefined" : _typeof(window)) === "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (f) {
  setTimeout(f, 17);
};
function now() {
  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);
}

function clearNow() {
  clockNow = 0;
}

function Timer() {
  this._call = this._time = this._next = null;
}
Timer.prototype = timer.prototype = {
  constructor: Timer,
  restart: function restart(callback, delay, time) {
    if (typeof callback !== "function") throw new TypeError("callback is not a function");
    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);

    if (!this._next && taskTail !== this) {
      if (taskTail) taskTail._next = this;else taskHead = this;
      taskTail = this;
    }

    this._call = callback;
    this._time = time;
    sleep();
  },
  stop: function stop() {
    if (this._call) {
      this._call = null;
      this._time = Infinity;
      sleep();
    }
  }
};
function timer(callback, delay, time) {
  var t = new Timer();
  t.restart(callback, delay, time);
  return t;
}
function timerFlush() {
  now(); // Get the current time, if not already set.

  ++frame; // Pretend we’ve set an alarm, if we haven’t already.

  var t = taskHead,
      e;

  while (t) {
    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);
    t = t._next;
  }

  --frame;
}

function wake() {
  clockNow = (clockLast = clock.now()) + clockSkew;
  frame = timeout = 0;

  try {
    timerFlush();
  } finally {
    frame = 0;
    nap();
    clockNow = 0;
  }
}

function poke() {
  var now = clock.now(),
      delay = now - clockLast;
  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;
}

function nap() {
  var t0,
      t1 = taskHead,
      t2,
      time = Infinity;

  while (t1) {
    if (t1._call) {
      if (time > t1._time) time = t1._time;
      t0 = t1, t1 = t1._next;
    } else {
      t2 = t1._next, t1._next = null;
      t1 = t0 ? t0._next = t2 : taskHead = t2;
    }
  }

  taskTail = t0;
  sleep(time);
}

function sleep(time) {
  if (frame) return; // Soonest alarm already set, or will be.

  if (timeout) timeout = clearTimeout(timeout);
  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.

  if (delay > 24) {
    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);
    if (interval) interval = clearInterval(interval);
  } else {
    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);
    frame = 1, setFrame(wake);
  }
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/active.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/active.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _transition_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transition/index */ "./packages/muze-utils/node_modules/d3-transition/src/transition/index.js");
/* harmony import */ var _transition_schedule__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transition/schedule */ "./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js");


var root = [null];
/* harmony default export */ __webpack_exports__["default"] = (function (node, name) {
  var schedules = node.__transition,
      schedule,
      i;

  if (schedules) {
    name = name == null ? null : name + "";

    for (i in schedules) {
      if ((schedule = schedules[i]).state > _transition_schedule__WEBPACK_IMPORTED_MODULE_1__["SCHEDULED"] && schedule.name === name) {
        return new _transition_index__WEBPACK_IMPORTED_MODULE_0__["Transition"]([[node]], root, name, +i);
      }
    }
  }

  return null;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/index.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/index.js ***!
  \*********************************************************************/
/*! exports provided: transition, active, interrupt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _selection_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./selection/index */ "./packages/muze-utils/node_modules/d3-transition/src/selection/index.js");
/* harmony import */ var _transition_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transition/index */ "./packages/muze-utils/node_modules/d3-transition/src/transition/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "transition", function() { return _transition_index__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _active__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./active */ "./packages/muze-utils/node_modules/d3-transition/src/active.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "active", function() { return _active__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _interrupt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interrupt */ "./packages/muze-utils/node_modules/d3-transition/src/interrupt.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interrupt", function() { return _interrupt__WEBPACK_IMPORTED_MODULE_3__["default"]; });






/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/interrupt.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/interrupt.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _transition_schedule__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transition/schedule */ "./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js");

/* harmony default export */ __webpack_exports__["default"] = (function (node, name) {
  var schedules = node.__transition,
      schedule,
      active,
      empty = true,
      i;
  if (!schedules) return;
  name = name == null ? null : name + "";

  for (i in schedules) {
    if ((schedule = schedules[i]).name !== name) {
      empty = false;
      continue;
    }

    active = schedule.state > _transition_schedule__WEBPACK_IMPORTED_MODULE_0__["STARTING"] && schedule.state < _transition_schedule__WEBPACK_IMPORTED_MODULE_0__["ENDING"];
    schedule.state = _transition_schedule__WEBPACK_IMPORTED_MODULE_0__["ENDED"];
    schedule.timer.stop();
    if (active) schedule.on.call("interrupt", node, node.__data__, schedule.index, schedule.group);
    delete schedules[i];
  }

  if (empty) delete node.__transition;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/selection/index.js":
/*!*******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/selection/index.js ***!
  \*******************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-selection */ "./packages/muze-utils/node_modules/d3-selection/src/index.js");
/* harmony import */ var _interrupt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interrupt */ "./packages/muze-utils/node_modules/d3-transition/src/selection/interrupt.js");
/* harmony import */ var _transition__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./transition */ "./packages/muze-utils/node_modules/d3-transition/src/selection/transition.js");



d3_selection__WEBPACK_IMPORTED_MODULE_0__["selection"].prototype.interrupt = _interrupt__WEBPACK_IMPORTED_MODULE_1__["default"];
d3_selection__WEBPACK_IMPORTED_MODULE_0__["selection"].prototype.transition = _transition__WEBPACK_IMPORTED_MODULE_2__["default"];

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/selection/interrupt.js":
/*!***********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/selection/interrupt.js ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _interrupt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../interrupt */ "./packages/muze-utils/node_modules/d3-transition/src/interrupt.js");

/* harmony default export */ __webpack_exports__["default"] = (function (name) {
  return this.each(function () {
    Object(_interrupt__WEBPACK_IMPORTED_MODULE_0__["default"])(this, name);
  });
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/selection/transition.js":
/*!************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/selection/transition.js ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _transition_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../transition/index */ "./packages/muze-utils/node_modules/d3-transition/src/transition/index.js");
/* harmony import */ var _transition_schedule__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../transition/schedule */ "./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js");
/* harmony import */ var d3_ease__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! d3-ease */ "./packages/muze-utils/node_modules/d3-ease/src/index.js");
/* harmony import */ var d3_timer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! d3-timer */ "./packages/muze-utils/node_modules/d3-timer/src/index.js");




var defaultTiming = {
  time: null,
  // Set on use.
  delay: 0,
  duration: 250,
  ease: d3_ease__WEBPACK_IMPORTED_MODULE_2__["easeCubicInOut"]
};

function inherit(node, id) {
  var timing;

  while (!(timing = node.__transition) || !(timing = timing[id])) {
    if (!(node = node.parentNode)) {
      return defaultTiming.time = Object(d3_timer__WEBPACK_IMPORTED_MODULE_3__["now"])(), defaultTiming;
    }
  }

  return timing;
}

/* harmony default export */ __webpack_exports__["default"] = (function (name) {
  var id, timing;

  if (name instanceof _transition_index__WEBPACK_IMPORTED_MODULE_0__["Transition"]) {
    id = name._id, name = name._name;
  } else {
    id = Object(_transition_index__WEBPACK_IMPORTED_MODULE_0__["newId"])(), (timing = defaultTiming).time = Object(d3_timer__WEBPACK_IMPORTED_MODULE_3__["now"])(), name = name == null ? null : name + "";
  }

  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        Object(_transition_schedule__WEBPACK_IMPORTED_MODULE_1__["default"])(node, name, id, i, group, timing || inherit(node, id));
      }
    }
  }

  return new _transition_index__WEBPACK_IMPORTED_MODULE_0__["Transition"](groups, this._parents, name, id);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/attr.js":
/*!*******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/attr.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_interpolate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-interpolate */ "./packages/muze-utils/node_modules/d3-interpolate/src/index.js");
/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-selection */ "./packages/muze-utils/node_modules/d3-selection/src/index.js");
/* harmony import */ var _tween__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tween */ "./packages/muze-utils/node_modules/d3-transition/src/transition/tween.js");
/* harmony import */ var _interpolate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interpolate */ "./packages/muze-utils/node_modules/d3-transition/src/transition/interpolate.js");





function attrRemove(name) {
  return function () {
    this.removeAttribute(name);
  };
}

function attrRemoveNS(fullname) {
  return function () {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}

function attrConstant(name, interpolate, value1) {
  var value00, interpolate0;
  return function () {
    var value0 = this.getAttribute(name);
    return value0 === value1 ? null : value0 === value00 ? interpolate0 : interpolate0 = interpolate(value00 = value0, value1);
  };
}

function attrConstantNS(fullname, interpolate, value1) {
  var value00, interpolate0;
  return function () {
    var value0 = this.getAttributeNS(fullname.space, fullname.local);
    return value0 === value1 ? null : value0 === value00 ? interpolate0 : interpolate0 = interpolate(value00 = value0, value1);
  };
}

function attrFunction(name, interpolate, value) {
  var value00, value10, interpolate0;
  return function () {
    var value0,
        value1 = value(this);
    if (value1 == null) return void this.removeAttribute(name);
    value0 = this.getAttribute(name);
    return value0 === value1 ? null : value0 === value00 && value1 === value10 ? interpolate0 : interpolate0 = interpolate(value00 = value0, value10 = value1);
  };
}

function attrFunctionNS(fullname, interpolate, value) {
  var value00, value10, interpolate0;
  return function () {
    var value0,
        value1 = value(this);
    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);
    value0 = this.getAttributeNS(fullname.space, fullname.local);
    return value0 === value1 ? null : value0 === value00 && value1 === value10 ? interpolate0 : interpolate0 = interpolate(value00 = value0, value10 = value1);
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (name, value) {
  var fullname = Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__["namespace"])(name),
      i = fullname === "transform" ? d3_interpolate__WEBPACK_IMPORTED_MODULE_0__["interpolateTransformSvg"] : _interpolate__WEBPACK_IMPORTED_MODULE_3__["default"];
  return this.attrTween(name, typeof value === "function" ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, Object(_tween__WEBPACK_IMPORTED_MODULE_2__["tweenValue"])(this, "attr." + name, value)) : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname) : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value + ""));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/attrTween.js":
/*!************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/attrTween.js ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-selection */ "./packages/muze-utils/node_modules/d3-selection/src/index.js");


function attrTweenNS(fullname, value) {
  function tween() {
    var node = this,
        i = value.apply(node, arguments);
    return i && function (t) {
      node.setAttributeNS(fullname.space, fullname.local, i(t));
    };
  }

  tween._value = value;
  return tween;
}

function attrTween(name, value) {
  function tween() {
    var node = this,
        i = value.apply(node, arguments);
    return i && function (t) {
      node.setAttribute(name, i(t));
    };
  }

  tween._value = value;
  return tween;
}

/* harmony default export */ __webpack_exports__["default"] = (function (name, value) {
  var key = "attr." + name;
  if (arguments.length < 2) return (key = this.tween(key)) && key._value;
  if (value == null) return this.tween(key, null);
  if (typeof value !== "function") throw new Error();
  var fullname = Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["namespace"])(name);
  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/delay.js":
/*!********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/delay.js ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _schedule__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schedule */ "./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js");


function delayFunction(id, value) {
  return function () {
    Object(_schedule__WEBPACK_IMPORTED_MODULE_0__["init"])(this, id).delay = +value.apply(this, arguments);
  };
}

function delayConstant(id, value) {
  return value = +value, function () {
    Object(_schedule__WEBPACK_IMPORTED_MODULE_0__["init"])(this, id).delay = value;
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (value) {
  var id = this._id;
  return arguments.length ? this.each((typeof value === "function" ? delayFunction : delayConstant)(id, value)) : Object(_schedule__WEBPACK_IMPORTED_MODULE_0__["get"])(this.node(), id).delay;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/duration.js":
/*!***********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/duration.js ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _schedule__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schedule */ "./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js");


function durationFunction(id, value) {
  return function () {
    Object(_schedule__WEBPACK_IMPORTED_MODULE_0__["set"])(this, id).duration = +value.apply(this, arguments);
  };
}

function durationConstant(id, value) {
  return value = +value, function () {
    Object(_schedule__WEBPACK_IMPORTED_MODULE_0__["set"])(this, id).duration = value;
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (value) {
  var id = this._id;
  return arguments.length ? this.each((typeof value === "function" ? durationFunction : durationConstant)(id, value)) : Object(_schedule__WEBPACK_IMPORTED_MODULE_0__["get"])(this.node(), id).duration;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/ease.js":
/*!*******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/ease.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _schedule__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schedule */ "./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js");


function easeConstant(id, value) {
  if (typeof value !== "function") throw new Error();
  return function () {
    Object(_schedule__WEBPACK_IMPORTED_MODULE_0__["set"])(this, id).ease = value;
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (value) {
  var id = this._id;
  return arguments.length ? this.each(easeConstant(id, value)) : Object(_schedule__WEBPACK_IMPORTED_MODULE_0__["get"])(this.node(), id).ease;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/filter.js":
/*!*********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/filter.js ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-selection */ "./packages/muze-utils/node_modules/d3-selection/src/index.js");
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ "./packages/muze-utils/node_modules/d3-transition/src/transition/index.js");


/* harmony default export */ __webpack_exports__["default"] = (function (match) {
  if (typeof match !== "function") match = Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["matcher"])(match);

  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {
      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {
        subgroup.push(node);
      }
    }
  }

  return new _index__WEBPACK_IMPORTED_MODULE_1__["Transition"](subgroups, this._parents, this._name, this._id);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/index.js":
/*!********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/index.js ***!
  \********************************************************************************/
/*! exports provided: Transition, default, newId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Transition", function() { return Transition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return transition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "newId", function() { return newId; });
/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-selection */ "./packages/muze-utils/node_modules/d3-selection/src/index.js");
/* harmony import */ var _attr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./attr */ "./packages/muze-utils/node_modules/d3-transition/src/transition/attr.js");
/* harmony import */ var _attrTween__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./attrTween */ "./packages/muze-utils/node_modules/d3-transition/src/transition/attrTween.js");
/* harmony import */ var _delay__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./delay */ "./packages/muze-utils/node_modules/d3-transition/src/transition/delay.js");
/* harmony import */ var _duration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./duration */ "./packages/muze-utils/node_modules/d3-transition/src/transition/duration.js");
/* harmony import */ var _ease__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ease */ "./packages/muze-utils/node_modules/d3-transition/src/transition/ease.js");
/* harmony import */ var _filter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./filter */ "./packages/muze-utils/node_modules/d3-transition/src/transition/filter.js");
/* harmony import */ var _merge__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./merge */ "./packages/muze-utils/node_modules/d3-transition/src/transition/merge.js");
/* harmony import */ var _on__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./on */ "./packages/muze-utils/node_modules/d3-transition/src/transition/on.js");
/* harmony import */ var _remove__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./remove */ "./packages/muze-utils/node_modules/d3-transition/src/transition/remove.js");
/* harmony import */ var _select__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./select */ "./packages/muze-utils/node_modules/d3-transition/src/transition/select.js");
/* harmony import */ var _selectAll__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./selectAll */ "./packages/muze-utils/node_modules/d3-transition/src/transition/selectAll.js");
/* harmony import */ var _selection__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./selection */ "./packages/muze-utils/node_modules/d3-transition/src/transition/selection.js");
/* harmony import */ var _style__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./style */ "./packages/muze-utils/node_modules/d3-transition/src/transition/style.js");
/* harmony import */ var _styleTween__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./styleTween */ "./packages/muze-utils/node_modules/d3-transition/src/transition/styleTween.js");
/* harmony import */ var _text__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./text */ "./packages/muze-utils/node_modules/d3-transition/src/transition/text.js");
/* harmony import */ var _transition__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./transition */ "./packages/muze-utils/node_modules/d3-transition/src/transition/transition.js");
/* harmony import */ var _tween__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./tween */ "./packages/muze-utils/node_modules/d3-transition/src/transition/tween.js");


















var id = 0;
function Transition(groups, parents, name, id) {
  this._groups = groups;
  this._parents = parents;
  this._name = name;
  this._id = id;
}
function transition(name) {
  return Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["selection"])().transition(name);
}
function newId() {
  return ++id;
}
var selection_prototype = d3_selection__WEBPACK_IMPORTED_MODULE_0__["selection"].prototype;
Transition.prototype = transition.prototype = {
  constructor: Transition,
  select: _select__WEBPACK_IMPORTED_MODULE_10__["default"],
  selectAll: _selectAll__WEBPACK_IMPORTED_MODULE_11__["default"],
  filter: _filter__WEBPACK_IMPORTED_MODULE_6__["default"],
  merge: _merge__WEBPACK_IMPORTED_MODULE_7__["default"],
  selection: _selection__WEBPACK_IMPORTED_MODULE_12__["default"],
  transition: _transition__WEBPACK_IMPORTED_MODULE_16__["default"],
  call: selection_prototype.call,
  nodes: selection_prototype.nodes,
  node: selection_prototype.node,
  size: selection_prototype.size,
  empty: selection_prototype.empty,
  each: selection_prototype.each,
  on: _on__WEBPACK_IMPORTED_MODULE_8__["default"],
  attr: _attr__WEBPACK_IMPORTED_MODULE_1__["default"],
  attrTween: _attrTween__WEBPACK_IMPORTED_MODULE_2__["default"],
  style: _style__WEBPACK_IMPORTED_MODULE_13__["default"],
  styleTween: _styleTween__WEBPACK_IMPORTED_MODULE_14__["default"],
  text: _text__WEBPACK_IMPORTED_MODULE_15__["default"],
  remove: _remove__WEBPACK_IMPORTED_MODULE_9__["default"],
  tween: _tween__WEBPACK_IMPORTED_MODULE_17__["default"],
  delay: _delay__WEBPACK_IMPORTED_MODULE_3__["default"],
  duration: _duration__WEBPACK_IMPORTED_MODULE_4__["default"],
  ease: _ease__WEBPACK_IMPORTED_MODULE_5__["default"]
};

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/interpolate.js":
/*!**************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/interpolate.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ "./packages/muze-utils/node_modules/d3-color/src/index.js");
/* harmony import */ var d3_interpolate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-interpolate */ "./packages/muze-utils/node_modules/d3-interpolate/src/index.js");


/* harmony default export */ __webpack_exports__["default"] = (function (a, b) {
  var c;
  return (typeof b === "number" ? d3_interpolate__WEBPACK_IMPORTED_MODULE_1__["interpolateNumber"] : b instanceof d3_color__WEBPACK_IMPORTED_MODULE_0__["color"] ? d3_interpolate__WEBPACK_IMPORTED_MODULE_1__["interpolateRgb"] : (c = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__["color"])(b)) ? (b = c, d3_interpolate__WEBPACK_IMPORTED_MODULE_1__["interpolateRgb"]) : d3_interpolate__WEBPACK_IMPORTED_MODULE_1__["interpolateString"])(a, b);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/merge.js":
/*!********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/merge.js ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ "./packages/muze-utils/node_modules/d3-transition/src/transition/index.js");

/* harmony default export */ __webpack_exports__["default"] = (function (transition) {
  if (transition._id !== this._id) throw new Error();

  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group0[i] || group1[i]) {
        merge[i] = node;
      }
    }
  }

  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }

  return new _index__WEBPACK_IMPORTED_MODULE_0__["Transition"](merges, this._parents, this._name, this._id);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/on.js":
/*!*****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/on.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _schedule__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schedule */ "./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js");


function start(name) {
  return (name + "").trim().split(/^|\s+/).every(function (t) {
    var i = t.indexOf(".");
    if (i >= 0) t = t.slice(0, i);
    return !t || t === "start";
  });
}

function onFunction(id, name, listener) {
  var on0,
      on1,
      sit = start(name) ? _schedule__WEBPACK_IMPORTED_MODULE_0__["init"] : _schedule__WEBPACK_IMPORTED_MODULE_0__["set"];
  return function () {
    var schedule = sit(this, id),
        on = schedule.on; // If this node shared a dispatch with the previous node,
    // just assign the updated shared dispatch and we’re done!
    // Otherwise, copy-on-write.

    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);
    schedule.on = on1;
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (name, listener) {
  var id = this._id;
  return arguments.length < 2 ? Object(_schedule__WEBPACK_IMPORTED_MODULE_0__["get"])(this.node(), id).on.on(name) : this.each(onFunction(id, name, listener));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/remove.js":
/*!*********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/remove.js ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function removeFunction(id) {
  return function () {
    var parent = this.parentNode;

    for (var i in this.__transition) {
      if (+i !== id) return;
    }

    if (parent) parent.removeChild(this);
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function () {
  return this.on("end.remove", removeFunction(this._id));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js":
/*!***********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js ***!
  \***********************************************************************************/
/*! exports provided: CREATED, SCHEDULED, STARTING, STARTED, RUNNING, ENDING, ENDED, default, init, set, get */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CREATED", function() { return CREATED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SCHEDULED", function() { return SCHEDULED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "STARTING", function() { return STARTING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "STARTED", function() { return STARTED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RUNNING", function() { return RUNNING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ENDING", function() { return ENDING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ENDED", function() { return ENDED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "init", function() { return init; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "set", function() { return set; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "get", function() { return get; });
/* harmony import */ var d3_dispatch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-dispatch */ "./packages/muze-utils/node_modules/d3-dispatch/src/index.js");
/* harmony import */ var d3_timer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-timer */ "./packages/muze-utils/node_modules/d3-timer/src/index.js");


var emptyOn = Object(d3_dispatch__WEBPACK_IMPORTED_MODULE_0__["dispatch"])("start", "end", "interrupt");
var emptyTween = [];
var CREATED = 0;
var SCHEDULED = 1;
var STARTING = 2;
var STARTED = 3;
var RUNNING = 4;
var ENDING = 5;
var ENDED = 6;
/* harmony default export */ __webpack_exports__["default"] = (function (node, name, id, index, group, timing) {
  var schedules = node.__transition;
  if (!schedules) node.__transition = {};else if (id in schedules) return;
  create(node, id, {
    name: name,
    index: index,
    // For context during callback.
    group: group,
    // For context during callback.
    on: emptyOn,
    tween: emptyTween,
    time: timing.time,
    delay: timing.delay,
    duration: timing.duration,
    ease: timing.ease,
    timer: null,
    state: CREATED
  });
});
function init(node, id) {
  var schedule = get(node, id);
  if (schedule.state > CREATED) throw new Error("too late; already scheduled");
  return schedule;
}
function set(node, id) {
  var schedule = get(node, id);
  if (schedule.state > STARTING) throw new Error("too late; already started");
  return schedule;
}
function get(node, id) {
  var schedule = node.__transition;
  if (!schedule || !(schedule = schedule[id])) throw new Error("transition not found");
  return schedule;
}

function create(node, id, self) {
  var schedules = node.__transition,
      tween; // Initialize the self timer when the transition is created.
  // Note the actual delay is not known until the first callback!

  schedules[id] = self;
  self.timer = Object(d3_timer__WEBPACK_IMPORTED_MODULE_1__["timer"])(schedule, 0, self.time);

  function schedule(elapsed) {
    self.state = SCHEDULED;
    self.timer.restart(start, self.delay, self.time); // If the elapsed delay is less than our first sleep, start immediately.

    if (self.delay <= elapsed) start(elapsed - self.delay);
  }

  function start(elapsed) {
    var i, j, n, o; // If the state is not SCHEDULED, then we previously errored on start.

    if (self.state !== SCHEDULED) return stop();

    for (i in schedules) {
      o = schedules[i];
      if (o.name !== self.name) continue; // While this element already has a starting transition during this frame,
      // defer starting an interrupting transition until that transition has a
      // chance to tick (and possibly end); see d3/d3-transition#54!

      if (o.state === STARTED) return Object(d3_timer__WEBPACK_IMPORTED_MODULE_1__["timeout"])(start); // Interrupt the active transition, if any.
      // Dispatch the interrupt event.

      if (o.state === RUNNING) {
        o.state = ENDED;
        o.timer.stop();
        o.on.call("interrupt", node, node.__data__, o.index, o.group);
        delete schedules[i];
      } // Cancel any pre-empted transitions. No interrupt event is dispatched
      // because the cancelled transitions never started. Note that this also
      // removes this transition from the pending list!
      else if (+i < id) {
          o.state = ENDED;
          o.timer.stop();
          delete schedules[i];
        }
    } // Defer the first tick to end of the current frame; see d3/d3#1576.
    // Note the transition may be canceled after start and before the first tick!
    // Note this must be scheduled before the start event; see d3/d3-transition#16!
    // Assuming this is successful, subsequent callbacks go straight to tick.


    Object(d3_timer__WEBPACK_IMPORTED_MODULE_1__["timeout"])(function () {
      if (self.state === STARTED) {
        self.state = RUNNING;
        self.timer.restart(tick, self.delay, self.time);
        tick(elapsed);
      }
    }); // Dispatch the start event.
    // Note this must be done before the tween are initialized.

    self.state = STARTING;
    self.on.call("start", node, node.__data__, self.index, self.group);
    if (self.state !== STARTING) return; // interrupted

    self.state = STARTED; // Initialize the tween, deleting null tween.

    tween = new Array(n = self.tween.length);

    for (i = 0, j = -1; i < n; ++i) {
      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {
        tween[++j] = o;
      }
    }

    tween.length = j + 1;
  }

  function tick(elapsed) {
    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),
        i = -1,
        n = tween.length;

    while (++i < n) {
      tween[i].call(null, t);
    } // Dispatch the end event.


    if (self.state === ENDING) {
      self.on.call("end", node, node.__data__, self.index, self.group);
      stop();
    }
  }

  function stop() {
    self.state = ENDED;
    self.timer.stop();
    delete schedules[id];

    for (var i in schedules) {
      return;
    } // eslint-disable-line no-unused-vars


    delete node.__transition;
  }
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/select.js":
/*!*********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/select.js ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-selection */ "./packages/muze-utils/node_modules/d3-selection/src/index.js");
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ "./packages/muze-utils/node_modules/d3-transition/src/transition/index.js");
/* harmony import */ var _schedule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./schedule */ "./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js");



/* harmony default export */ __webpack_exports__["default"] = (function (select) {
  var name = this._name,
      id = this._id;
  if (typeof select !== "function") select = Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["selector"])(select);

  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {
      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {
        if ("__data__" in node) subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
        Object(_schedule__WEBPACK_IMPORTED_MODULE_2__["default"])(subgroup[i], name, id, i, subgroup, Object(_schedule__WEBPACK_IMPORTED_MODULE_2__["get"])(node, id));
      }
    }
  }

  return new _index__WEBPACK_IMPORTED_MODULE_1__["Transition"](subgroups, this._parents, name, id);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/selectAll.js":
/*!************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/selectAll.js ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-selection */ "./packages/muze-utils/node_modules/d3-selection/src/index.js");
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ "./packages/muze-utils/node_modules/d3-transition/src/transition/index.js");
/* harmony import */ var _schedule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./schedule */ "./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js");



/* harmony default export */ __webpack_exports__["default"] = (function (select) {
  var name = this._name,
      id = this._id;
  if (typeof select !== "function") select = Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["selectorAll"])(select);

  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        for (var children = select.call(node, node.__data__, i, group), child, inherit = Object(_schedule__WEBPACK_IMPORTED_MODULE_2__["get"])(node, id), k = 0, l = children.length; k < l; ++k) {
          if (child = children[k]) {
            Object(_schedule__WEBPACK_IMPORTED_MODULE_2__["default"])(child, name, id, k, children, inherit);
          }
        }

        subgroups.push(children);
        parents.push(node);
      }
    }
  }

  return new _index__WEBPACK_IMPORTED_MODULE_1__["Transition"](subgroups, parents, name, id);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/selection.js":
/*!************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/selection.js ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-selection */ "./packages/muze-utils/node_modules/d3-selection/src/index.js");

var Selection = d3_selection__WEBPACK_IMPORTED_MODULE_0__["selection"].prototype.constructor;
/* harmony default export */ __webpack_exports__["default"] = (function () {
  return new Selection(this._groups, this._parents);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/style.js":
/*!********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/style.js ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_interpolate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-interpolate */ "./packages/muze-utils/node_modules/d3-interpolate/src/index.js");
/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-selection */ "./packages/muze-utils/node_modules/d3-selection/src/index.js");
/* harmony import */ var _tween__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tween */ "./packages/muze-utils/node_modules/d3-transition/src/transition/tween.js");
/* harmony import */ var _interpolate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interpolate */ "./packages/muze-utils/node_modules/d3-transition/src/transition/interpolate.js");





function styleRemove(name, interpolate) {
  var value00, value10, interpolate0;
  return function () {
    var value0 = Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__["style"])(this, name),
        value1 = (this.style.removeProperty(name), Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__["style"])(this, name));
    return value0 === value1 ? null : value0 === value00 && value1 === value10 ? interpolate0 : interpolate0 = interpolate(value00 = value0, value10 = value1);
  };
}

function styleRemoveEnd(name) {
  return function () {
    this.style.removeProperty(name);
  };
}

function styleConstant(name, interpolate, value1) {
  var value00, interpolate0;
  return function () {
    var value0 = Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__["style"])(this, name);
    return value0 === value1 ? null : value0 === value00 ? interpolate0 : interpolate0 = interpolate(value00 = value0, value1);
  };
}

function styleFunction(name, interpolate, value) {
  var value00, value10, interpolate0;
  return function () {
    var value0 = Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__["style"])(this, name),
        value1 = value(this);
    if (value1 == null) value1 = (this.style.removeProperty(name), Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__["style"])(this, name));
    return value0 === value1 ? null : value0 === value00 && value1 === value10 ? interpolate0 : interpolate0 = interpolate(value00 = value0, value10 = value1);
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (name, value, priority) {
  var i = (name += "") === "transform" ? d3_interpolate__WEBPACK_IMPORTED_MODULE_0__["interpolateTransformCss"] : _interpolate__WEBPACK_IMPORTED_MODULE_3__["default"];
  return value == null ? this.styleTween(name, styleRemove(name, i)).on("end.style." + name, styleRemoveEnd(name)) : this.styleTween(name, typeof value === "function" ? styleFunction(name, i, Object(_tween__WEBPACK_IMPORTED_MODULE_2__["tweenValue"])(this, "style." + name, value)) : styleConstant(name, i, value + ""), priority);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/styleTween.js":
/*!*************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/styleTween.js ***!
  \*************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function styleTween(name, value, priority) {
  function tween() {
    var node = this,
        i = value.apply(node, arguments);
    return i && function (t) {
      node.style.setProperty(name, i(t), priority);
    };
  }

  tween._value = value;
  return tween;
}

/* harmony default export */ __webpack_exports__["default"] = (function (name, value, priority) {
  var key = "style." + (name += "");
  if (arguments.length < 2) return (key = this.tween(key)) && key._value;
  if (value == null) return this.tween(key, null);
  if (typeof value !== "function") throw new Error();
  return this.tween(key, styleTween(name, value, priority == null ? "" : priority));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/text.js":
/*!*******************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/text.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tween__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tween */ "./packages/muze-utils/node_modules/d3-transition/src/transition/tween.js");


function textConstant(value) {
  return function () {
    this.textContent = value;
  };
}

function textFunction(value) {
  return function () {
    var value1 = value(this);
    this.textContent = value1 == null ? "" : value1;
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (value) {
  return this.tween("text", typeof value === "function" ? textFunction(Object(_tween__WEBPACK_IMPORTED_MODULE_0__["tweenValue"])(this, "text", value)) : textConstant(value == null ? "" : value + ""));
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/transition.js":
/*!*************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/transition.js ***!
  \*************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ "./packages/muze-utils/node_modules/d3-transition/src/transition/index.js");
/* harmony import */ var _schedule__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schedule */ "./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js");


/* harmony default export */ __webpack_exports__["default"] = (function () {
  var name = this._name,
      id0 = this._id,
      id1 = Object(_index__WEBPACK_IMPORTED_MODULE_0__["newId"])();

  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        var inherit = Object(_schedule__WEBPACK_IMPORTED_MODULE_1__["get"])(node, id0);
        Object(_schedule__WEBPACK_IMPORTED_MODULE_1__["default"])(node, name, id1, i, group, {
          time: inherit.time + inherit.delay + inherit.duration,
          delay: 0,
          duration: inherit.duration,
          ease: inherit.ease
        });
      }
    }
  }

  return new _index__WEBPACK_IMPORTED_MODULE_0__["Transition"](groups, this._parents, name, id1);
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-transition/src/transition/tween.js":
/*!********************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-transition/src/transition/tween.js ***!
  \********************************************************************************/
/*! exports provided: default, tweenValue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tweenValue", function() { return tweenValue; });
/* harmony import */ var _schedule__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schedule */ "./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js");


function tweenRemove(id, name) {
  var tween0, tween1;
  return function () {
    var schedule = Object(_schedule__WEBPACK_IMPORTED_MODULE_0__["set"])(this, id),
        tween = schedule.tween; // If this node shared tween with the previous node,
    // just assign the updated shared tween and we’re done!
    // Otherwise, copy-on-write.

    if (tween !== tween0) {
      tween1 = tween0 = tween;

      for (var i = 0, n = tween1.length; i < n; ++i) {
        if (tween1[i].name === name) {
          tween1 = tween1.slice();
          tween1.splice(i, 1);
          break;
        }
      }
    }

    schedule.tween = tween1;
  };
}

function tweenFunction(id, name, value) {
  var tween0, tween1;
  if (typeof value !== "function") throw new Error();
  return function () {
    var schedule = Object(_schedule__WEBPACK_IMPORTED_MODULE_0__["set"])(this, id),
        tween = schedule.tween; // If this node shared tween with the previous node,
    // just assign the updated shared tween and we’re done!
    // Otherwise, copy-on-write.

    if (tween !== tween0) {
      tween1 = (tween0 = tween).slice();

      for (var t = {
        name: name,
        value: value
      }, i = 0, n = tween1.length; i < n; ++i) {
        if (tween1[i].name === name) {
          tween1[i] = t;
          break;
        }
      }

      if (i === n) tween1.push(t);
    }

    schedule.tween = tween1;
  };
}

/* harmony default export */ __webpack_exports__["default"] = (function (name, value) {
  var id = this._id;
  name += "";

  if (arguments.length < 2) {
    var tween = Object(_schedule__WEBPACK_IMPORTED_MODULE_0__["get"])(this.node(), id).tween;

    for (var i = 0, n = tween.length, t; i < n; ++i) {
      if ((t = tween[i]).name === name) {
        return t.value;
      }
    }

    return null;
  }

  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));
});
function tweenValue(transition, name, value) {
  var id = transition._id;
  transition.each(function () {
    var schedule = Object(_schedule__WEBPACK_IMPORTED_MODULE_0__["set"])(this, id);
    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);
  });
  return function (node) {
    return Object(_schedule__WEBPACK_IMPORTED_MODULE_0__["get"])(node, id).value[name];
  };
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-voronoi/src/Beach.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-voronoi/src/Beach.js ***!
  \******************************************************************/
/*! exports provided: removeBeach, addBeach */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeBeach", function() { return removeBeach; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addBeach", function() { return addBeach; });
/* harmony import */ var _RedBlackTree__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RedBlackTree */ "./packages/muze-utils/node_modules/d3-voronoi/src/RedBlackTree.js");
/* harmony import */ var _Cell__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Cell */ "./packages/muze-utils/node_modules/d3-voronoi/src/Cell.js");
/* harmony import */ var _Circle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Circle */ "./packages/muze-utils/node_modules/d3-voronoi/src/Circle.js");
/* harmony import */ var _Edge__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Edge */ "./packages/muze-utils/node_modules/d3-voronoi/src/Edge.js");
/* harmony import */ var _Diagram__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Diagram */ "./packages/muze-utils/node_modules/d3-voronoi/src/Diagram.js");





var beachPool = [];

function Beach() {
  Object(_RedBlackTree__WEBPACK_IMPORTED_MODULE_0__["RedBlackNode"])(this);
  this.edge = this.site = this.circle = null;
}

function createBeach(site) {
  var beach = beachPool.pop() || new Beach();
  beach.site = site;
  return beach;
}

function detachBeach(beach) {
  Object(_Circle__WEBPACK_IMPORTED_MODULE_2__["detachCircle"])(beach);
  _Diagram__WEBPACK_IMPORTED_MODULE_4__["beaches"].remove(beach);
  beachPool.push(beach);
  Object(_RedBlackTree__WEBPACK_IMPORTED_MODULE_0__["RedBlackNode"])(beach);
}

function removeBeach(beach) {
  var circle = beach.circle,
      x = circle.x,
      y = circle.cy,
      vertex = [x, y],
      previous = beach.P,
      next = beach.N,
      disappearing = [beach];
  detachBeach(beach);
  var lArc = previous;

  while (lArc.circle && Math.abs(x - lArc.circle.x) < _Diagram__WEBPACK_IMPORTED_MODULE_4__["epsilon"] && Math.abs(y - lArc.circle.cy) < _Diagram__WEBPACK_IMPORTED_MODULE_4__["epsilon"]) {
    previous = lArc.P;
    disappearing.unshift(lArc);
    detachBeach(lArc);
    lArc = previous;
  }

  disappearing.unshift(lArc);
  Object(_Circle__WEBPACK_IMPORTED_MODULE_2__["detachCircle"])(lArc);
  var rArc = next;

  while (rArc.circle && Math.abs(x - rArc.circle.x) < _Diagram__WEBPACK_IMPORTED_MODULE_4__["epsilon"] && Math.abs(y - rArc.circle.cy) < _Diagram__WEBPACK_IMPORTED_MODULE_4__["epsilon"]) {
    next = rArc.N;
    disappearing.push(rArc);
    detachBeach(rArc);
    rArc = next;
  }

  disappearing.push(rArc);
  Object(_Circle__WEBPACK_IMPORTED_MODULE_2__["detachCircle"])(rArc);
  var nArcs = disappearing.length,
      iArc;

  for (iArc = 1; iArc < nArcs; ++iArc) {
    rArc = disappearing[iArc];
    lArc = disappearing[iArc - 1];
    Object(_Edge__WEBPACK_IMPORTED_MODULE_3__["setEdgeEnd"])(rArc.edge, lArc.site, rArc.site, vertex);
  }

  lArc = disappearing[0];
  rArc = disappearing[nArcs - 1];
  rArc.edge = Object(_Edge__WEBPACK_IMPORTED_MODULE_3__["createEdge"])(lArc.site, rArc.site, null, vertex);
  Object(_Circle__WEBPACK_IMPORTED_MODULE_2__["attachCircle"])(lArc);
  Object(_Circle__WEBPACK_IMPORTED_MODULE_2__["attachCircle"])(rArc);
}
function addBeach(site) {
  var x = site[0],
      directrix = site[1],
      lArc,
      rArc,
      dxl,
      dxr,
      node = _Diagram__WEBPACK_IMPORTED_MODULE_4__["beaches"]._;

  while (node) {
    dxl = leftBreakPoint(node, directrix) - x;
    if (dxl > _Diagram__WEBPACK_IMPORTED_MODULE_4__["epsilon"]) node = node.L;else {
      dxr = x - rightBreakPoint(node, directrix);

      if (dxr > _Diagram__WEBPACK_IMPORTED_MODULE_4__["epsilon"]) {
        if (!node.R) {
          lArc = node;
          break;
        }

        node = node.R;
      } else {
        if (dxl > -_Diagram__WEBPACK_IMPORTED_MODULE_4__["epsilon"]) {
          lArc = node.P;
          rArc = node;
        } else if (dxr > -_Diagram__WEBPACK_IMPORTED_MODULE_4__["epsilon"]) {
          lArc = node;
          rArc = node.N;
        } else {
          lArc = rArc = node;
        }

        break;
      }
    }
  }

  Object(_Cell__WEBPACK_IMPORTED_MODULE_1__["createCell"])(site);
  var newArc = createBeach(site);
  _Diagram__WEBPACK_IMPORTED_MODULE_4__["beaches"].insert(lArc, newArc);
  if (!lArc && !rArc) return;

  if (lArc === rArc) {
    Object(_Circle__WEBPACK_IMPORTED_MODULE_2__["detachCircle"])(lArc);
    rArc = createBeach(lArc.site);
    _Diagram__WEBPACK_IMPORTED_MODULE_4__["beaches"].insert(newArc, rArc);
    newArc.edge = rArc.edge = Object(_Edge__WEBPACK_IMPORTED_MODULE_3__["createEdge"])(lArc.site, newArc.site);
    Object(_Circle__WEBPACK_IMPORTED_MODULE_2__["attachCircle"])(lArc);
    Object(_Circle__WEBPACK_IMPORTED_MODULE_2__["attachCircle"])(rArc);
    return;
  }

  if (!rArc) {
    // && lArc
    newArc.edge = Object(_Edge__WEBPACK_IMPORTED_MODULE_3__["createEdge"])(lArc.site, newArc.site);
    return;
  } // else lArc !== rArc


  Object(_Circle__WEBPACK_IMPORTED_MODULE_2__["detachCircle"])(lArc);
  Object(_Circle__WEBPACK_IMPORTED_MODULE_2__["detachCircle"])(rArc);
  var lSite = lArc.site,
      ax = lSite[0],
      ay = lSite[1],
      bx = site[0] - ax,
      by = site[1] - ay,
      rSite = rArc.site,
      cx = rSite[0] - ax,
      cy = rSite[1] - ay,
      d = 2 * (bx * cy - by * cx),
      hb = bx * bx + by * by,
      hc = cx * cx + cy * cy,
      vertex = [(cy * hb - by * hc) / d + ax, (bx * hc - cx * hb) / d + ay];
  Object(_Edge__WEBPACK_IMPORTED_MODULE_3__["setEdgeEnd"])(rArc.edge, lSite, rSite, vertex);
  newArc.edge = Object(_Edge__WEBPACK_IMPORTED_MODULE_3__["createEdge"])(lSite, site, null, vertex);
  rArc.edge = Object(_Edge__WEBPACK_IMPORTED_MODULE_3__["createEdge"])(site, rSite, null, vertex);
  Object(_Circle__WEBPACK_IMPORTED_MODULE_2__["attachCircle"])(lArc);
  Object(_Circle__WEBPACK_IMPORTED_MODULE_2__["attachCircle"])(rArc);
}

function leftBreakPoint(arc, directrix) {
  var site = arc.site,
      rfocx = site[0],
      rfocy = site[1],
      pby2 = rfocy - directrix;
  if (!pby2) return rfocx;
  var lArc = arc.P;
  if (!lArc) return -Infinity;
  site = lArc.site;
  var lfocx = site[0],
      lfocy = site[1],
      plby2 = lfocy - directrix;
  if (!plby2) return lfocx;
  var hl = lfocx - rfocx,
      aby2 = 1 / pby2 - 1 / plby2,
      b = hl / plby2;
  if (aby2) return (-b + Math.sqrt(b * b - 2 * aby2 * (hl * hl / (-2 * plby2) - lfocy + plby2 / 2 + rfocy - pby2 / 2))) / aby2 + rfocx;
  return (rfocx + lfocx) / 2;
}

function rightBreakPoint(arc, directrix) {
  var rArc = arc.N;
  if (rArc) return leftBreakPoint(rArc, directrix);
  var site = arc.site;
  return site[1] === directrix ? site[0] : Infinity;
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-voronoi/src/Cell.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-voronoi/src/Cell.js ***!
  \*****************************************************************/
/*! exports provided: createCell, cellHalfedgeStart, cellHalfedgeEnd, sortCellHalfedges, clipCells */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createCell", function() { return createCell; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cellHalfedgeStart", function() { return cellHalfedgeStart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cellHalfedgeEnd", function() { return cellHalfedgeEnd; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sortCellHalfedges", function() { return sortCellHalfedges; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clipCells", function() { return clipCells; });
/* harmony import */ var _Edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Edge */ "./packages/muze-utils/node_modules/d3-voronoi/src/Edge.js");
/* harmony import */ var _Diagram__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Diagram */ "./packages/muze-utils/node_modules/d3-voronoi/src/Diagram.js");


function createCell(site) {
  return _Diagram__WEBPACK_IMPORTED_MODULE_1__["cells"][site.index] = {
    site: site,
    halfedges: []
  };
}

function cellHalfedgeAngle(cell, edge) {
  var site = cell.site,
      va = edge.left,
      vb = edge.right;
  if (site === vb) vb = va, va = site;
  if (vb) return Math.atan2(vb[1] - va[1], vb[0] - va[0]);
  if (site === va) va = edge[1], vb = edge[0];else va = edge[0], vb = edge[1];
  return Math.atan2(va[0] - vb[0], vb[1] - va[1]);
}

function cellHalfedgeStart(cell, edge) {
  return edge[+(edge.left !== cell.site)];
}
function cellHalfedgeEnd(cell, edge) {
  return edge[+(edge.left === cell.site)];
}
function sortCellHalfedges() {
  for (var i = 0, n = _Diagram__WEBPACK_IMPORTED_MODULE_1__["cells"].length, cell, halfedges, j, m; i < n; ++i) {
    if ((cell = _Diagram__WEBPACK_IMPORTED_MODULE_1__["cells"][i]) && (m = (halfedges = cell.halfedges).length)) {
      var index = new Array(m),
          array = new Array(m);

      for (j = 0; j < m; ++j) {
        index[j] = j, array[j] = cellHalfedgeAngle(cell, _Diagram__WEBPACK_IMPORTED_MODULE_1__["edges"][halfedges[j]]);
      }

      index.sort(function (i, j) {
        return array[j] - array[i];
      });

      for (j = 0; j < m; ++j) {
        array[j] = halfedges[index[j]];
      }

      for (j = 0; j < m; ++j) {
        halfedges[j] = array[j];
      }
    }
  }
}
function clipCells(x0, y0, x1, y1) {
  var nCells = _Diagram__WEBPACK_IMPORTED_MODULE_1__["cells"].length,
      iCell,
      cell,
      site,
      iHalfedge,
      halfedges,
      nHalfedges,
      start,
      startX,
      startY,
      end,
      endX,
      endY,
      cover = true;

  for (iCell = 0; iCell < nCells; ++iCell) {
    if (cell = _Diagram__WEBPACK_IMPORTED_MODULE_1__["cells"][iCell]) {
      site = cell.site;
      halfedges = cell.halfedges;
      iHalfedge = halfedges.length; // Remove any dangling clipped edges.

      while (iHalfedge--) {
        if (!_Diagram__WEBPACK_IMPORTED_MODULE_1__["edges"][halfedges[iHalfedge]]) {
          halfedges.splice(iHalfedge, 1);
        }
      } // Insert any border edges as necessary.


      iHalfedge = 0, nHalfedges = halfedges.length;

      while (iHalfedge < nHalfedges) {
        end = cellHalfedgeEnd(cell, _Diagram__WEBPACK_IMPORTED_MODULE_1__["edges"][halfedges[iHalfedge]]), endX = end[0], endY = end[1];
        start = cellHalfedgeStart(cell, _Diagram__WEBPACK_IMPORTED_MODULE_1__["edges"][halfedges[++iHalfedge % nHalfedges]]), startX = start[0], startY = start[1];

        if (Math.abs(endX - startX) > _Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon"] || Math.abs(endY - startY) > _Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon"]) {
          halfedges.splice(iHalfedge, 0, _Diagram__WEBPACK_IMPORTED_MODULE_1__["edges"].push(Object(_Edge__WEBPACK_IMPORTED_MODULE_0__["createBorderEdge"])(site, end, Math.abs(endX - x0) < _Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon"] && y1 - endY > _Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon"] ? [x0, Math.abs(startX - x0) < _Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon"] ? startY : y1] : Math.abs(endY - y1) < _Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon"] && x1 - endX > _Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon"] ? [Math.abs(startY - y1) < _Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon"] ? startX : x1, y1] : Math.abs(endX - x1) < _Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon"] && endY - y0 > _Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon"] ? [x1, Math.abs(startX - x1) < _Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon"] ? startY : y0] : Math.abs(endY - y0) < _Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon"] && endX - x0 > _Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon"] ? [Math.abs(startY - y0) < _Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon"] ? startX : x0, y0] : null)) - 1);
          ++nHalfedges;
        }
      }

      if (nHalfedges) cover = false;
    }
  } // If there weren’t any edges, have the closest site cover the extent.
  // It doesn’t matter which corner of the extent we measure!


  if (cover) {
    var dx,
        dy,
        d2,
        dc = Infinity;

    for (iCell = 0, cover = null; iCell < nCells; ++iCell) {
      if (cell = _Diagram__WEBPACK_IMPORTED_MODULE_1__["cells"][iCell]) {
        site = cell.site;
        dx = site[0] - x0;
        dy = site[1] - y0;
        d2 = dx * dx + dy * dy;
        if (d2 < dc) dc = d2, cover = cell;
      }
    }

    if (cover) {
      var v00 = [x0, y0],
          v01 = [x0, y1],
          v11 = [x1, y1],
          v10 = [x1, y0];
      cover.halfedges.push(_Diagram__WEBPACK_IMPORTED_MODULE_1__["edges"].push(Object(_Edge__WEBPACK_IMPORTED_MODULE_0__["createBorderEdge"])(site = cover.site, v00, v01)) - 1, _Diagram__WEBPACK_IMPORTED_MODULE_1__["edges"].push(Object(_Edge__WEBPACK_IMPORTED_MODULE_0__["createBorderEdge"])(site, v01, v11)) - 1, _Diagram__WEBPACK_IMPORTED_MODULE_1__["edges"].push(Object(_Edge__WEBPACK_IMPORTED_MODULE_0__["createBorderEdge"])(site, v11, v10)) - 1, _Diagram__WEBPACK_IMPORTED_MODULE_1__["edges"].push(Object(_Edge__WEBPACK_IMPORTED_MODULE_0__["createBorderEdge"])(site, v10, v00)) - 1);
    }
  } // Lastly delete any cells with no edges; these were entirely clipped.


  for (iCell = 0; iCell < nCells; ++iCell) {
    if (cell = _Diagram__WEBPACK_IMPORTED_MODULE_1__["cells"][iCell]) {
      if (!cell.halfedges.length) {
        delete _Diagram__WEBPACK_IMPORTED_MODULE_1__["cells"][iCell];
      }
    }
  }
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-voronoi/src/Circle.js":
/*!*******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-voronoi/src/Circle.js ***!
  \*******************************************************************/
/*! exports provided: firstCircle, attachCircle, detachCircle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "firstCircle", function() { return firstCircle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "attachCircle", function() { return attachCircle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "detachCircle", function() { return detachCircle; });
/* harmony import */ var _RedBlackTree__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RedBlackTree */ "./packages/muze-utils/node_modules/d3-voronoi/src/RedBlackTree.js");
/* harmony import */ var _Diagram__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Diagram */ "./packages/muze-utils/node_modules/d3-voronoi/src/Diagram.js");


var circlePool = [];
var firstCircle;

function Circle() {
  Object(_RedBlackTree__WEBPACK_IMPORTED_MODULE_0__["RedBlackNode"])(this);
  this.x = this.y = this.arc = this.site = this.cy = null;
}

function attachCircle(arc) {
  var lArc = arc.P,
      rArc = arc.N;
  if (!lArc || !rArc) return;
  var lSite = lArc.site,
      cSite = arc.site,
      rSite = rArc.site;
  if (lSite === rSite) return;
  var bx = cSite[0],
      by = cSite[1],
      ax = lSite[0] - bx,
      ay = lSite[1] - by,
      cx = rSite[0] - bx,
      cy = rSite[1] - by;
  var d = 2 * (ax * cy - ay * cx);
  if (d >= -_Diagram__WEBPACK_IMPORTED_MODULE_1__["epsilon2"]) return;
  var ha = ax * ax + ay * ay,
      hc = cx * cx + cy * cy,
      x = (cy * ha - ay * hc) / d,
      y = (ax * hc - cx * ha) / d;
  var circle = circlePool.pop() || new Circle();
  circle.arc = arc;
  circle.site = cSite;
  circle.x = x + bx;
  circle.y = (circle.cy = y + by) + Math.sqrt(x * x + y * y); // y bottom

  arc.circle = circle;
  var before = null,
      node = _Diagram__WEBPACK_IMPORTED_MODULE_1__["circles"]._;

  while (node) {
    if (circle.y < node.y || circle.y === node.y && circle.x <= node.x) {
      if (node.L) node = node.L;else {
        before = node.P;
        break;
      }
    } else {
      if (node.R) node = node.R;else {
        before = node;
        break;
      }
    }
  }

  _Diagram__WEBPACK_IMPORTED_MODULE_1__["circles"].insert(before, circle);
  if (!before) firstCircle = circle;
}
function detachCircle(arc) {
  var circle = arc.circle;

  if (circle) {
    if (!circle.P) firstCircle = circle.N;
    _Diagram__WEBPACK_IMPORTED_MODULE_1__["circles"].remove(circle);
    circlePool.push(circle);
    Object(_RedBlackTree__WEBPACK_IMPORTED_MODULE_0__["RedBlackNode"])(circle);
    arc.circle = null;
  }
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-voronoi/src/Diagram.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-voronoi/src/Diagram.js ***!
  \********************************************************************/
/*! exports provided: epsilon, epsilon2, beaches, cells, circles, edges, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "epsilon", function() { return epsilon; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "epsilon2", function() { return epsilon2; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "beaches", function() { return beaches; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cells", function() { return cells; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "circles", function() { return circles; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "edges", function() { return edges; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Diagram; });
/* harmony import */ var _Beach__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Beach */ "./packages/muze-utils/node_modules/d3-voronoi/src/Beach.js");
/* harmony import */ var _Cell__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Cell */ "./packages/muze-utils/node_modules/d3-voronoi/src/Cell.js");
/* harmony import */ var _Circle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Circle */ "./packages/muze-utils/node_modules/d3-voronoi/src/Circle.js");
/* harmony import */ var _Edge__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Edge */ "./packages/muze-utils/node_modules/d3-voronoi/src/Edge.js");
/* harmony import */ var _RedBlackTree__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./RedBlackTree */ "./packages/muze-utils/node_modules/d3-voronoi/src/RedBlackTree.js");





var epsilon = 1e-6;
var epsilon2 = 1e-12;
var beaches;
var cells;
var circles;
var edges;

function triangleArea(a, b, c) {
  return (a[0] - c[0]) * (b[1] - a[1]) - (a[0] - b[0]) * (c[1] - a[1]);
}

function lexicographic(a, b) {
  return b[1] - a[1] || b[0] - a[0];
}

function Diagram(sites, extent) {
  var site = sites.sort(lexicographic).pop(),
      x,
      y,
      circle;
  edges = [];
  cells = new Array(sites.length);
  beaches = new _RedBlackTree__WEBPACK_IMPORTED_MODULE_4__["default"]();
  circles = new _RedBlackTree__WEBPACK_IMPORTED_MODULE_4__["default"]();

  while (true) {
    circle = _Circle__WEBPACK_IMPORTED_MODULE_2__["firstCircle"];

    if (site && (!circle || site[1] < circle.y || site[1] === circle.y && site[0] < circle.x)) {
      if (site[0] !== x || site[1] !== y) {
        Object(_Beach__WEBPACK_IMPORTED_MODULE_0__["addBeach"])(site);
        x = site[0], y = site[1];
      }

      site = sites.pop();
    } else if (circle) {
      Object(_Beach__WEBPACK_IMPORTED_MODULE_0__["removeBeach"])(circle.arc);
    } else {
      break;
    }
  }

  Object(_Cell__WEBPACK_IMPORTED_MODULE_1__["sortCellHalfedges"])();

  if (extent) {
    var x0 = +extent[0][0],
        y0 = +extent[0][1],
        x1 = +extent[1][0],
        y1 = +extent[1][1];
    Object(_Edge__WEBPACK_IMPORTED_MODULE_3__["clipEdges"])(x0, y0, x1, y1);
    Object(_Cell__WEBPACK_IMPORTED_MODULE_1__["clipCells"])(x0, y0, x1, y1);
  }

  this.edges = edges;
  this.cells = cells;
  beaches = circles = edges = cells = null;
}
Diagram.prototype = {
  constructor: Diagram,
  polygons: function polygons() {
    var edges = this.edges;
    return this.cells.map(function (cell) {
      var polygon = cell.halfedges.map(function (i) {
        return Object(_Cell__WEBPACK_IMPORTED_MODULE_1__["cellHalfedgeStart"])(cell, edges[i]);
      });
      polygon.data = cell.site.data;
      return polygon;
    });
  },
  triangles: function triangles() {
    var triangles = [],
        edges = this.edges;
    this.cells.forEach(function (cell, i) {
      if (!(m = (halfedges = cell.halfedges).length)) return;
      var site = cell.site,
          halfedges,
          j = -1,
          m,
          s0,
          e1 = edges[halfedges[m - 1]],
          s1 = e1.left === site ? e1.right : e1.left;

      while (++j < m) {
        s0 = s1;
        e1 = edges[halfedges[j]];
        s1 = e1.left === site ? e1.right : e1.left;

        if (s0 && s1 && i < s0.index && i < s1.index && triangleArea(site, s0, s1) < 0) {
          triangles.push([site.data, s0.data, s1.data]);
        }
      }
    });
    return triangles;
  },
  links: function links() {
    return this.edges.filter(function (edge) {
      return edge.right;
    }).map(function (edge) {
      return {
        source: edge.left.data,
        target: edge.right.data
      };
    });
  },
  find: function find(x, y, radius) {
    var that = this,
        i0,
        i1 = that._found || 0,
        n = that.cells.length,
        cell; // Use the previously-found cell, or start with an arbitrary one.

    while (!(cell = that.cells[i1])) {
      if (++i1 >= n) return null;
    }

    var dx = x - cell.site[0],
        dy = y - cell.site[1],
        d2 = dx * dx + dy * dy; // Traverse the half-edges to find a closer cell, if any.

    do {
      cell = that.cells[i0 = i1], i1 = null;
      cell.halfedges.forEach(function (e) {
        var edge = that.edges[e],
            v = edge.left;
        if ((v === cell.site || !v) && !(v = edge.right)) return;
        var vx = x - v[0],
            vy = y - v[1],
            v2 = vx * vx + vy * vy;
        if (v2 < d2) d2 = v2, i1 = v.index;
      });
    } while (i1 !== null);

    that._found = i0;
    return radius == null || d2 <= radius * radius ? cell.site : null;
  }
};

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-voronoi/src/Edge.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-voronoi/src/Edge.js ***!
  \*****************************************************************/
/*! exports provided: createEdge, createBorderEdge, setEdgeEnd, clipEdges */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createEdge", function() { return createEdge; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createBorderEdge", function() { return createBorderEdge; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setEdgeEnd", function() { return setEdgeEnd; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clipEdges", function() { return clipEdges; });
/* harmony import */ var _Diagram__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Diagram */ "./packages/muze-utils/node_modules/d3-voronoi/src/Diagram.js");

function createEdge(left, right, v0, v1) {
  var edge = [null, null],
      index = _Diagram__WEBPACK_IMPORTED_MODULE_0__["edges"].push(edge) - 1;
  edge.left = left;
  edge.right = right;
  if (v0) setEdgeEnd(edge, left, right, v0);
  if (v1) setEdgeEnd(edge, right, left, v1);
  _Diagram__WEBPACK_IMPORTED_MODULE_0__["cells"][left.index].halfedges.push(index);
  _Diagram__WEBPACK_IMPORTED_MODULE_0__["cells"][right.index].halfedges.push(index);
  return edge;
}
function createBorderEdge(left, v0, v1) {
  var edge = [v0, v1];
  edge.left = left;
  return edge;
}
function setEdgeEnd(edge, left, right, vertex) {
  if (!edge[0] && !edge[1]) {
    edge[0] = vertex;
    edge.left = left;
    edge.right = right;
  } else if (edge.left === right) {
    edge[1] = vertex;
  } else {
    edge[0] = vertex;
  }
} // Liang–Barsky line clipping.

function clipEdge(edge, x0, y0, x1, y1) {
  var a = edge[0],
      b = edge[1],
      ax = a[0],
      ay = a[1],
      bx = b[0],
      by = b[1],
      t0 = 0,
      t1 = 1,
      dx = bx - ax,
      dy = by - ay,
      r;
  r = x0 - ax;
  if (!dx && r > 0) return;
  r /= dx;

  if (dx < 0) {
    if (r < t0) return;
    if (r < t1) t1 = r;
  } else if (dx > 0) {
    if (r > t1) return;
    if (r > t0) t0 = r;
  }

  r = x1 - ax;
  if (!dx && r < 0) return;
  r /= dx;

  if (dx < 0) {
    if (r > t1) return;
    if (r > t0) t0 = r;
  } else if (dx > 0) {
    if (r < t0) return;
    if (r < t1) t1 = r;
  }

  r = y0 - ay;
  if (!dy && r > 0) return;
  r /= dy;

  if (dy < 0) {
    if (r < t0) return;
    if (r < t1) t1 = r;
  } else if (dy > 0) {
    if (r > t1) return;
    if (r > t0) t0 = r;
  }

  r = y1 - ay;
  if (!dy && r < 0) return;
  r /= dy;

  if (dy < 0) {
    if (r > t1) return;
    if (r > t0) t0 = r;
  } else if (dy > 0) {
    if (r < t0) return;
    if (r < t1) t1 = r;
  }

  if (!(t0 > 0) && !(t1 < 1)) return true; // TODO Better check?

  if (t0 > 0) edge[0] = [ax + t0 * dx, ay + t0 * dy];
  if (t1 < 1) edge[1] = [ax + t1 * dx, ay + t1 * dy];
  return true;
}

function connectEdge(edge, x0, y0, x1, y1) {
  var v1 = edge[1];
  if (v1) return true;
  var v0 = edge[0],
      left = edge.left,
      right = edge.right,
      lx = left[0],
      ly = left[1],
      rx = right[0],
      ry = right[1],
      fx = (lx + rx) / 2,
      fy = (ly + ry) / 2,
      fm,
      fb;

  if (ry === ly) {
    if (fx < x0 || fx >= x1) return;

    if (lx > rx) {
      if (!v0) v0 = [fx, y0];else if (v0[1] >= y1) return;
      v1 = [fx, y1];
    } else {
      if (!v0) v0 = [fx, y1];else if (v0[1] < y0) return;
      v1 = [fx, y0];
    }
  } else {
    fm = (lx - rx) / (ry - ly);
    fb = fy - fm * fx;

    if (fm < -1 || fm > 1) {
      if (lx > rx) {
        if (!v0) v0 = [(y0 - fb) / fm, y0];else if (v0[1] >= y1) return;
        v1 = [(y1 - fb) / fm, y1];
      } else {
        if (!v0) v0 = [(y1 - fb) / fm, y1];else if (v0[1] < y0) return;
        v1 = [(y0 - fb) / fm, y0];
      }
    } else {
      if (ly < ry) {
        if (!v0) v0 = [x0, fm * x0 + fb];else if (v0[0] >= x1) return;
        v1 = [x1, fm * x1 + fb];
      } else {
        if (!v0) v0 = [x1, fm * x1 + fb];else if (v0[0] < x0) return;
        v1 = [x0, fm * x0 + fb];
      }
    }
  }

  edge[0] = v0;
  edge[1] = v1;
  return true;
}

function clipEdges(x0, y0, x1, y1) {
  var i = _Diagram__WEBPACK_IMPORTED_MODULE_0__["edges"].length,
      edge;

  while (i--) {
    if (!connectEdge(edge = _Diagram__WEBPACK_IMPORTED_MODULE_0__["edges"][i], x0, y0, x1, y1) || !clipEdge(edge, x0, y0, x1, y1) || !(Math.abs(edge[0][0] - edge[1][0]) > _Diagram__WEBPACK_IMPORTED_MODULE_0__["epsilon"] || Math.abs(edge[0][1] - edge[1][1]) > _Diagram__WEBPACK_IMPORTED_MODULE_0__["epsilon"])) {
      delete _Diagram__WEBPACK_IMPORTED_MODULE_0__["edges"][i];
    }
  }
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-voronoi/src/RedBlackTree.js":
/*!*************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-voronoi/src/RedBlackTree.js ***!
  \*************************************************************************/
/*! exports provided: RedBlackNode, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RedBlackNode", function() { return RedBlackNode; });
function RedBlackTree() {
  this._ = null; // root node
}

function RedBlackNode(node) {
  node.U = // parent node
  node.C = // color - true for red, false for black
  node.L = // left node
  node.R = // right node
  node.P = // previous node
  node.N = null; // next node
}
RedBlackTree.prototype = {
  constructor: RedBlackTree,
  insert: function insert(after, node) {
    var parent, grandpa, uncle;

    if (after) {
      node.P = after;
      node.N = after.N;
      if (after.N) after.N.P = node;
      after.N = node;

      if (after.R) {
        after = after.R;

        while (after.L) {
          after = after.L;
        }

        after.L = node;
      } else {
        after.R = node;
      }

      parent = after;
    } else if (this._) {
      after = RedBlackFirst(this._);
      node.P = null;
      node.N = after;
      after.P = after.L = node;
      parent = after;
    } else {
      node.P = node.N = null;
      this._ = node;
      parent = null;
    }

    node.L = node.R = null;
    node.U = parent;
    node.C = true;
    after = node;

    while (parent && parent.C) {
      grandpa = parent.U;

      if (parent === grandpa.L) {
        uncle = grandpa.R;

        if (uncle && uncle.C) {
          parent.C = uncle.C = false;
          grandpa.C = true;
          after = grandpa;
        } else {
          if (after === parent.R) {
            RedBlackRotateLeft(this, parent);
            after = parent;
            parent = after.U;
          }

          parent.C = false;
          grandpa.C = true;
          RedBlackRotateRight(this, grandpa);
        }
      } else {
        uncle = grandpa.L;

        if (uncle && uncle.C) {
          parent.C = uncle.C = false;
          grandpa.C = true;
          after = grandpa;
        } else {
          if (after === parent.L) {
            RedBlackRotateRight(this, parent);
            after = parent;
            parent = after.U;
          }

          parent.C = false;
          grandpa.C = true;
          RedBlackRotateLeft(this, grandpa);
        }
      }

      parent = after.U;
    }

    this._.C = false;
  },
  remove: function remove(node) {
    if (node.N) node.N.P = node.P;
    if (node.P) node.P.N = node.N;
    node.N = node.P = null;
    var parent = node.U,
        sibling,
        left = node.L,
        right = node.R,
        next,
        red;
    if (!left) next = right;else if (!right) next = left;else next = RedBlackFirst(right);

    if (parent) {
      if (parent.L === node) parent.L = next;else parent.R = next;
    } else {
      this._ = next;
    }

    if (left && right) {
      red = next.C;
      next.C = node.C;
      next.L = left;
      left.U = next;

      if (next !== right) {
        parent = next.U;
        next.U = node.U;
        node = next.R;
        parent.L = node;
        next.R = right;
        right.U = next;
      } else {
        next.U = parent;
        parent = next;
        node = next.R;
      }
    } else {
      red = node.C;
      node = next;
    }

    if (node) node.U = parent;
    if (red) return;

    if (node && node.C) {
      node.C = false;
      return;
    }

    do {
      if (node === this._) break;

      if (node === parent.L) {
        sibling = parent.R;

        if (sibling.C) {
          sibling.C = false;
          parent.C = true;
          RedBlackRotateLeft(this, parent);
          sibling = parent.R;
        }

        if (sibling.L && sibling.L.C || sibling.R && sibling.R.C) {
          if (!sibling.R || !sibling.R.C) {
            sibling.L.C = false;
            sibling.C = true;
            RedBlackRotateRight(this, sibling);
            sibling = parent.R;
          }

          sibling.C = parent.C;
          parent.C = sibling.R.C = false;
          RedBlackRotateLeft(this, parent);
          node = this._;
          break;
        }
      } else {
        sibling = parent.L;

        if (sibling.C) {
          sibling.C = false;
          parent.C = true;
          RedBlackRotateRight(this, parent);
          sibling = parent.L;
        }

        if (sibling.L && sibling.L.C || sibling.R && sibling.R.C) {
          if (!sibling.L || !sibling.L.C) {
            sibling.R.C = false;
            sibling.C = true;
            RedBlackRotateLeft(this, sibling);
            sibling = parent.L;
          }

          sibling.C = parent.C;
          parent.C = sibling.L.C = false;
          RedBlackRotateRight(this, parent);
          node = this._;
          break;
        }
      }

      sibling.C = true;
      node = parent;
      parent = parent.U;
    } while (!node.C);

    if (node) node.C = false;
  }
};

function RedBlackRotateLeft(tree, node) {
  var p = node,
      q = node.R,
      parent = p.U;

  if (parent) {
    if (parent.L === p) parent.L = q;else parent.R = q;
  } else {
    tree._ = q;
  }

  q.U = parent;
  p.U = q;
  p.R = q.L;
  if (p.R) p.R.U = p;
  q.L = p;
}

function RedBlackRotateRight(tree, node) {
  var p = node,
      q = node.L,
      parent = p.U;

  if (parent) {
    if (parent.L === p) parent.L = q;else parent.R = q;
  } else {
    tree._ = q;
  }

  q.U = parent;
  p.U = q;
  p.L = q.R;
  if (p.L) p.L.U = p;
  q.R = p;
}

function RedBlackFirst(node) {
  while (node.L) {
    node = node.L;
  }

  return node;
}

/* harmony default export */ __webpack_exports__["default"] = (RedBlackTree);

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-voronoi/src/constant.js":
/*!*********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-voronoi/src/constant.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (x) {
  return function () {
    return x;
  };
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-voronoi/src/index.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-voronoi/src/index.js ***!
  \******************************************************************/
/*! exports provided: voronoi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _voronoi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./voronoi */ "./packages/muze-utils/node_modules/d3-voronoi/src/voronoi.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "voronoi", function() { return _voronoi__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-voronoi/src/point.js":
/*!******************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-voronoi/src/point.js ***!
  \******************************************************************/
/*! exports provided: x, y */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "x", function() { return x; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "y", function() { return y; });
function x(d) {
  return d[0];
}
function y(d) {
  return d[1];
}

/***/ }),

/***/ "./packages/muze-utils/node_modules/d3-voronoi/src/voronoi.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/d3-voronoi/src/voronoi.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constant */ "./packages/muze-utils/node_modules/d3-voronoi/src/constant.js");
/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./point */ "./packages/muze-utils/node_modules/d3-voronoi/src/point.js");
/* harmony import */ var _Diagram__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Diagram */ "./packages/muze-utils/node_modules/d3-voronoi/src/Diagram.js");



/* harmony default export */ __webpack_exports__["default"] = (function () {
  var x = _point__WEBPACK_IMPORTED_MODULE_1__["x"],
      y = _point__WEBPACK_IMPORTED_MODULE_1__["y"],
      extent = null;

  function voronoi(data) {
    return new _Diagram__WEBPACK_IMPORTED_MODULE_2__["default"](data.map(function (d, i) {
      var s = [Math.round(x(d, i, data) / _Diagram__WEBPACK_IMPORTED_MODULE_2__["epsilon"]) * _Diagram__WEBPACK_IMPORTED_MODULE_2__["epsilon"], Math.round(y(d, i, data) / _Diagram__WEBPACK_IMPORTED_MODULE_2__["epsilon"]) * _Diagram__WEBPACK_IMPORTED_MODULE_2__["epsilon"]];
      s.index = i;
      s.data = d;
      return s;
    }), extent);
  }

  voronoi.polygons = function (data) {
    return voronoi(data).polygons();
  };

  voronoi.links = function (data) {
    return voronoi(data).links();
  };

  voronoi.triangles = function (data) {
    return voronoi(data).triangles();
  };

  voronoi.x = function (_) {
    return arguments.length ? (x = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_0__["default"])(+_), voronoi) : x;
  };

  voronoi.y = function (_) {
    return arguments.length ? (y = typeof _ === "function" ? _ : Object(_constant__WEBPACK_IMPORTED_MODULE_0__["default"])(+_), voronoi) : y;
  };

  voronoi.extent = function (_) {
    return arguments.length ? (extent = _ == null ? null : [[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]], voronoi) : extent && [[extent[0][0], extent[0][1]], [extent[1][0], extent[1][1]]];
  };

  voronoi.size = function (_) {
    return arguments.length ? (extent = _ == null ? null : [[0, 0], [+_[0], +_[1]]], voronoi) : extent && [extent[1][0] - extent[0][0], extent[1][1] - extent[0][1]];
  };

  return voronoi;
});

/***/ }),

/***/ "./packages/muze-utils/node_modules/datamodel/dist/datamodel.js":
/*!**********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/datamodel/dist/datamodel.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

!function (e, t) {
  "object" == ( false ? undefined : _typeof(exports)) && "object" == ( false ? undefined : _typeof(module)) ? module.exports = t() :  true ? !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (t),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)) : undefined;
}(window, function () {
  return function (e) {
    var t = {};

    function n(r) {
      if (t[r]) return t[r].exports;
      var a = t[r] = {
        i: r,
        l: !1,
        exports: {}
      };
      return e[r].call(a.exports, a, a.exports, n), a.l = !0, a.exports;
    }

    return n.m = e, n.c = t, n.d = function (e, t, r) {
      n.o(e, t) || Object.defineProperty(e, t, {
        enumerable: !0,
        get: r
      });
    }, n.r = function (e) {
      "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
        value: "Module"
      }), Object.defineProperty(e, "__esModule", {
        value: !0
      });
    }, n.t = function (e, t) {
      if (1 & t && (e = n(e)), 8 & t) return e;
      if (4 & t && "object" == _typeof(e) && e && e.__esModule) return e;
      var r = Object.create(null);
      if (n.r(r), Object.defineProperty(r, "default", {
        enumerable: !0,
        value: e
      }), 2 & t && "string" != typeof e) for (var a in e) {
        n.d(r, a, function (t) {
          return e[t];
        }.bind(null, a));
      }
      return r;
    }, n.n = function (e) {
      var t = e && e.__esModule ? function () {
        return e.default;
      } : function () {
        return e;
      };
      return n.d(t, "a", t), t;
    }, n.o = function (e, t) {
      return Object.prototype.hasOwnProperty.call(e, t);
    }, n.p = "", n(n.s = 1);
  }([function (e) {
    e.exports = {
      name: "datamodel",
      description: "Relational algebra compliant in-memory tabular data store",
      homepage: "https://github.com/chartshq/datamodel",
      version: "2.1.0",
      license: "MIT",
      main: "dist/datamodel.js",
      author: "Charts.com <support@charts.com>",
      keywords: ["datamodel", "data", "relational", "algebra", "model", "muze", "fusioncharts", "table", "tabular", "operation"],
      repository: {
        type: "git",
        url: "https://github.com/chartshq/datamodel.git"
      },
      contributors: [{
        name: "Akash Goswami",
        email: "akash@charts.com"
      }, {
        name: "Subhash Haldar",
        email: "subhash@charts.com"
      }, {
        name: "Rousan Ali",
        email: "rousan@charts.com",
        url: "https://rousan.io"
      }, {
        name: "Ujjal Kumar Dutta",
        email: "ujjal@charts.com"
      }],
      dependencies: {
        "d3-dsv": "^1.0.8"
      },
      devDependencies: {
        "babel-cli": "6.26.0",
        "babel-core": "^6.26.3",
        "babel-eslint": "6.1.2",
        "babel-loader": "^7.1.4",
        "babel-plugin-transform-runtime": "^6.23.0",
        "babel-preset-env": "^1.7.0",
        "babel-preset-es2015": "^6.24.1",
        "babel-preset-flow": "^6.23.0",
        chai: "3.5.0",
        "cross-env": "^5.0.5",
        eslint: "3.19.0",
        "eslint-config-airbnb": "15.1.0",
        "eslint-plugin-import": "2.7.0",
        "eslint-plugin-jsx-a11y": "5.1.1",
        "eslint-plugin-react": "7.3.0",
        "istanbul-instrumenter-loader": "^3.0.0",
        jsdoc: "3.5.5",
        json2yaml: "^1.1.0",
        karma: "1.7.1",
        "karma-chai": "0.1.0",
        "karma-chrome-launcher": "2.1.1",
        "karma-coverage-istanbul-reporter": "^1.3.0",
        "karma-mocha": "1.3.0",
        "karma-spec-reporter": "0.0.31",
        "karma-webpack": "2.0.3",
        marked: "^0.5.0",
        mocha: "3.4.2",
        "mocha-webpack": "0.7.0",
        "transform-runtime": "0.0.0",
        webpack: "^4.12.0",
        "webpack-cli": "^3.0.7",
        "webpack-dev-server": "^3.1.4"
      },
      scripts: {
        test: "npm run lint && npm run ut",
        ut: "karma start karma.conf.js",
        utd: "karma start --single-run false --browsers Chrome karma.conf.js ",
        build: "webpack --mode production",
        start: "webpack-dev-server --config webpack.config.dev.js --mode development --open",
        lint: "eslint ./src",
        "lint-errors": "eslint --quiet ./src",
        docs: "rm -rf yaml && mkdir yaml && jsdoc -c jsdoc.conf.json"
      }
    };
  }, function (e, t, n) {
    var r = n(2);
    e.exports = r.default ? r.default : r;
  }, function (e, t, n) {
    "use strict";

    n.r(t);
    var r = {};
    n.r(r), n.d(r, "DataFormat", function () {
      return o;
    }), n.d(r, "DimensionSubtype", function () {
      return u;
    }), n.d(r, "MeasureSubtype", function () {
      return c;
    }), n.d(r, "FieldType", function () {
      return f;
    }), n.d(r, "FilteringMode", function () {
      return l;
    });
    var a = {};
    n.r(a), n.d(a, "DSVArr", function () {
      return Ge;
    }), n.d(a, "DSVStr", function () {
      return tt;
    }), n.d(a, "FlatJSON", function () {
      return nt;
    }), n.d(a, "Auto", function () {
      return rt;
    });
    var i = {};
    n.r(i), n.d(i, "sum", function () {
      return jt;
    }), n.d(i, "avg", function () {
      return St;
    }), n.d(i, "min", function () {
      return Nt;
    }), n.d(i, "max", function () {
      return kt;
    }), n.d(i, "first", function () {
      return Ft;
    }), n.d(i, "last", function () {
      return Dt;
    }), n.d(i, "count", function () {
      return Tt;
    }), n.d(i, "sd", function () {
      return Rt;
    });
    var o = {
      FLAT_JSON: "FlatJSON",
      DSV_STR: "DSVStr",
      DSV_ARR: "DSVArr",
      AUTO: "Auto"
    },
        u = {
      CATEGORICAL: "categorical",
      TEMPORAL: "temporal",
      GEO: "geo",
      BINNED: "binned"
    },
        c = {
      CONTINUOUS: "continuous"
    },
        f = {
      MEASURE: "measure",
      DIMENSION: "dimension"
    },
        l = {
      NORMAL: "normal",
      INVERSE: "inverse",
      ALL: "all"
    };

    function s(e) {
      return e instanceof Date ? e : new Date(e);
    }

    function d(e) {
      return e < 10 ? "0" + e : e;
    }

    function p(e) {
      this.format = e, this.dtParams = void 0, this.nativeDate = void 0;
    }

    RegExp.escape = function (e) {
      return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
    }, p.TOKEN_PREFIX = "%", p.DATETIME_PARAM_SEQUENCE = {
      YEAR: 0,
      MONTH: 1,
      DAY: 2,
      HOUR: 3,
      MINUTE: 4,
      SECOND: 5,
      MILLISECOND: 6
    }, p.defaultNumberParser = function (e) {
      return function (t) {
        var n;
        return isFinite(n = parseInt(t, 10)) ? n : e;
      };
    }, p.defaultRangeParser = function (e, t) {
      return function (n) {
        var r,
            a = void 0;
        if (!n) return t;
        var i = n.toLowerCase();

        for (a = 0, r = e.length; a < r; a++) {
          if (e[a].toLowerCase() === i) return a;
        }

        return void 0 === a ? t : null;
      };
    }, p.getTokenDefinitions = function () {
      var e = {
        short: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
        long: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]
      },
          t = {
        short: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        long: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
      };
      return {
        H: {
          name: "H",
          index: 3,
          extract: function extract() {
            return "(\\d+)";
          },
          parser: p.defaultNumberParser(),
          formatter: function formatter(e) {
            return s(e).getHours().toString();
          }
        },
        l: {
          name: "l",
          index: 3,
          extract: function extract() {
            return "(\\d+)";
          },
          parser: p.defaultNumberParser(),
          formatter: function formatter(e) {
            var t = s(e).getHours() % 12;
            return (0 === t ? 12 : t).toString();
          }
        },
        p: {
          name: "p",
          index: 3,
          extract: function extract() {
            return "(AM|PM)";
          },
          parser: function parser(e) {
            return e ? e.toLowerCase() : null;
          },
          formatter: function formatter(e) {
            return s(e).getHours() < 12 ? "AM" : "PM";
          }
        },
        P: {
          name: "P",
          index: 3,
          extract: function extract() {
            return "(am|pm)";
          },
          parser: function parser(e) {
            return e ? e.toLowerCase() : null;
          },
          formatter: function formatter(e) {
            return s(e).getHours() < 12 ? "am" : "pm";
          }
        },
        M: {
          name: "M",
          index: 4,
          extract: function extract() {
            return "(\\d+)";
          },
          parser: p.defaultNumberParser(),
          formatter: function formatter(e) {
            return d(s(e).getMinutes());
          }
        },
        S: {
          name: "S",
          index: 5,
          extract: function extract() {
            return "(\\d+)";
          },
          parser: p.defaultNumberParser(),
          formatter: function formatter(e) {
            return d(s(e).getSeconds());
          }
        },
        K: {
          name: "K",
          index: 6,
          extract: function extract() {
            return "(\\d+)";
          },
          parser: p.defaultNumberParser(),
          formatter: function formatter(e) {
            return s(e).getMilliseconds().toString();
          }
        },
        a: {
          name: "a",
          index: 2,
          extract: function extract() {
            return "(" + e.short.join("|") + ")";
          },
          parser: p.defaultRangeParser(e.short),
          formatter: function formatter(t) {
            var n = s(t).getDay();
            return e.short[n].toString();
          }
        },
        A: {
          name: "A",
          index: 2,
          extract: function extract() {
            return "(" + e.long.join("|") + ")";
          },
          parser: p.defaultRangeParser(e.long),
          formatter: function formatter(t) {
            var n = s(t).getDay();
            return e.long[n].toString();
          }
        },
        e: {
          name: "e",
          index: 2,
          extract: function extract() {
            return "(\\d+)";
          },
          parser: p.defaultNumberParser(),
          formatter: function formatter(e) {
            return s(e).getDate().toString();
          }
        },
        d: {
          name: "d",
          index: 2,
          extract: function extract() {
            return "(\\d+)";
          },
          parser: p.defaultNumberParser(),
          formatter: function formatter(e) {
            return d(s(e).getDate());
          }
        },
        b: {
          name: "b",
          index: 1,
          extract: function extract() {
            return "(" + t.short.join("|") + ")";
          },
          parser: p.defaultRangeParser(t.short),
          formatter: function formatter(e) {
            var n = s(e).getMonth();
            return t.short[n].toString();
          }
        },
        B: {
          name: "B",
          index: 1,
          extract: function extract() {
            return "(" + t.long.join("|") + ")";
          },
          parser: p.defaultRangeParser(t.long),
          formatter: function formatter(e) {
            var n = s(e).getMonth();
            return t.long[n].toString();
          }
        },
        m: {
          name: "m",
          index: 1,
          extract: function extract() {
            return "(\\d+)";
          },
          parser: function parser(e) {
            return p.defaultNumberParser()(e) - 1;
          },
          formatter: function formatter(e) {
            return d(s(e).getMonth() + 1);
          }
        },
        y: {
          name: "y",
          index: 0,
          extract: function extract() {
            return "(\\d{2})";
          },
          parser: function parser(e) {
            var t = void 0;

            if (e) {
              var n = e.length;
              e = e.substring(n - 2, n);
            }

            var r = p.defaultNumberParser()(e),
                a = new Date(),
                i = Math.trunc(a.getFullYear() / 100);
            return s(t = "" + i + r).getFullYear() > a.getFullYear() && (t = "" + (i - 1) + r), s(t).getFullYear();
          },
          formatter: function formatter(e) {
            var t = s(e).getFullYear().toString(),
                n = void 0;
            return t && (n = t.length, t = t.substring(n - 2, n)), t;
          }
        },
        Y: {
          name: "Y",
          index: 0,
          extract: function extract() {
            return "(\\d{4})";
          },
          parser: p.defaultNumberParser(),
          formatter: function formatter(e) {
            return s(e).getFullYear().toString();
          }
        }
      };
    }, p.getTokenFormalNames = function () {
      var e = p.getTokenDefinitions();
      return {
        HOUR: e.H,
        HOUR_12: e.l,
        AMPM_UPPERCASE: e.p,
        AMPM_LOWERCASE: e.P,
        MINUTE: e.M,
        SECOND: e.S,
        SHORT_DAY: e.a,
        LONG_DAY: e.A,
        DAY_OF_MONTH: e.e,
        DAY_OF_MONTH_CONSTANT_WIDTH: e.d,
        SHORT_MONTH: e.b,
        LONG_MONTH: e.B,
        MONTH_OF_YEAR: e.m,
        SHORT_YEAR: e.y,
        LONG_YEAR: e.Y
      };
    }, p.tokenResolver = function () {
      var e = p.getTokenDefinitions(),
          t = function t() {
        for (var e = 0, t = void 0, n = void 0, r = arguments.length; e < r; e++) {
          t = arguments.length <= e ? void 0 : arguments[e], (arguments.length <= e ? void 0 : arguments[e]) && (n = t);
        }

        return n ? n[0].parser(n[1]) : null;
      };

      return {
        YEAR: [e.y, e.Y, t],
        MONTH: [e.b, e.B, e.m, t],
        DAY: [e.a, e.A, e.e, e.d, t],
        HOUR: [e.H, e.l, e.p, e.P, function (e, t, n, r) {
          var a = void 0,
              i = void 0,
              o = void 0,
              u = void 0;
          return t && (i = n || r) ? ("pm" === i[0].parser(i[1]) && (o = !0), a = t) : a = t || e, a ? (u = a[0].parser(a[1]), o && (u += 12), u) : null;
        }],
        MINUTE: [e.M, t],
        SECOND: [e.S, t]
      };
    }, p.findTokens = function (e) {
      for (var t = p.TOKEN_PREFIX, n = p.getTokenDefinitions(), r = Object.keys(n), a = [], i = void 0, o = void 0; (i = e.indexOf(t, i + 1)) >= 0;) {
        o = e[i + 1], -1 !== r.indexOf(o) && a.push({
          index: i,
          token: o
        });
      }

      return a;
    }, p.formatAs = function (e, t) {
      var n,
          r = s(e),
          a = p.findTokens(t),
          i = p.getTokenDefinitions(),
          o = String(t),
          u = p.TOKEN_PREFIX,
          c = void 0,
          f = void 0,
          l = void 0;

      for (l = 0, n = a.length; l < n; l++) {
        f = i[c = a[l].token].formatter(r), o = o.replace(new RegExp(u + c, "g"), f);
      }

      return o;
    }, p.prototype.parse = function (e, t) {
      var n = p.tokenResolver(),
          r = this.extractTokenValue(e),
          a = p.DATETIME_PARAM_SEQUENCE,
          i = t && t.noBreak,
          o = [],
          u = [],
          c = void 0,
          f = void 0,
          l = void 0,
          s = void 0,
          d = void 0,
          h = void 0,
          v = void 0,
          m = void 0,
          y = [];

      for (c in n) {
        if ({}.hasOwnProperty.call(n, c)) {
          for (u.length = 0, l = (f = n[c]).splice(f.length - 1, 1)[0], d = 0, m = f.length; d < m; d++) {
            void 0 === (s = r[(h = f[d]).name]) ? u.push(null) : u.push([h, s]);
          }

          if (null == (v = l.apply(this, u)) && !i) break;
          o[a[c]] = v;
        }
      }

      return o.length && this.checkIfOnlyYear(o.length) ? y.unshift(o[0], 0, 1) : y.unshift.apply(y, o), y;
    }, p.prototype.extractTokenValue = function (e) {
      var t,
          n = this.format,
          r = p.getTokenDefinitions(),
          a = p.TOKEN_PREFIX,
          i = p.findTokens(n),
          o = {},
          u = void 0,
          c = void 0,
          f = void 0,
          l = void 0,
          s = void 0,
          d = void 0;
      s = String(n);
      var h = i.map(function (e) {
        return e.token;
      }),
          v = i.length;

      for (d = v - 1; d >= 0; d--) {
        (f = i[d].index) + 1 !== s.length - 1 ? (void 0 === u && (u = s.length), l = s.substring(f + 2, u), s = s.substring(0, f + 2) + RegExp.escape(l) + s.substring(u, s.length), u = f) : u = f;
      }

      for (d = 0; d < v; d++) {
        c = i[d], s = s.replace(a + c.token, r[c.token].extract());
      }

      var m = e.match(new RegExp(s)) || [];

      for (m.shift(), d = 0, t = h.length; d < t; d++) {
        o[h[d]] = m[d];
      }

      return o;
    }, p.prototype.getNativeDate = function (e) {
      var t = null;
      if (Number.isFinite(e)) t = new Date(e);else if (!this.format && Date.parse(e)) t = new Date(e);else {
        var n = this.dtParams = this.parse(e);
        n.length && (this.nativeDate = new (Function.prototype.bind.apply(Date, [null].concat(function (e) {
          if (Array.isArray(e)) {
            for (var t = 0, n = Array(e.length); t < e.length; t++) {
              n[t] = e[t];
            }

            return n;
          }

          return Array.from(e);
        }(n))))(), t = this.nativeDate);
      }
      return t;
    }, p.prototype.checkIfOnlyYear = function (e) {
      return 1 === e && this.format.match(/y|Y/g).length;
    }, p.prototype.formatAs = function (e, t) {
      var n = void 0;
      return t ? n = this.nativeDate = this.getNativeDate(t) : (n = this.nativeDate) || (n = this.getNativeDate(t)), p.formatAs(n, e);
    };

    var h = function h(e) {
      var t = 0;
      return function () {
        for (var n = arguments.length, r = Array(n), a = 0; a < n; a++) {
          r[a] = arguments[a];
        }

        r.forEach(function (n, r) {
          e[r] instanceof Array || (e[r] = Array.from({
            length: t
          })), e[r].push(n);
        }), t++;
      };
    },
        v = "function" == typeof Symbol && "symbol" == _typeof(Symbol.iterator) ? function (e) {
      return _typeof(e);
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : _typeof(e);
    },
        m = "object",
        y = Object.prototype.toString,
        g = "[object Object]",
        b = "[object Array]";

    function w(e, t) {
      for (var n = t.length, r = -1; n;) {
        if (e === t[n]) return r = n;
        n -= 1;
      }

      return r;
    }

    function _(e, t, n) {
      return (void 0 === e ? "undefined" : v(e)) !== m && (void 0 === t ? "undefined" : v(t)) !== m ? null : (void 0 === t ? "undefined" : v(t)) !== m || null === t ? e : ((void 0 === e ? "undefined" : v(e)) !== m && (e = t instanceof Array ? [] : {}), function e(t, n, r, a, i) {
        var o, u, c, f, l;
        if (i ? (a.push(t), i.push(n)) : (a = [t], i = [n]), n instanceof Array) for (o = 0; o < n.length; o += 1) {
          try {
            u = t[o], c = n[o];
          } catch (e) {
            continue;
          }

          (void 0 === c ? "undefined" : v(c)) !== m ? r && void 0 === c || (t[o] = c) : (null !== u && (void 0 === u ? "undefined" : v(u)) === m || (u = t[o] = c instanceof Array ? [] : {}), -1 !== (l = w(c, i)) ? u = t[o] = a[l] : e(u, c, r, a, i));
        } else for (o in n) {
          try {
            u = t[o], c = n[o];
          } catch (e) {
            continue;
          }

          if (null !== c && (void 0 === c ? "undefined" : v(c)) === m) (f = y.call(c)) === g ? (null !== u && (void 0 === u ? "undefined" : v(u)) === m || (u = t[o] = {}), -1 !== (l = w(c, i)) ? u = t[o] = a[l] : e(u, c, r, a, i)) : f === b ? (null !== u && u instanceof Array || (u = t[o] = []), -1 !== (l = w(c, i)) ? u = t[o] = a[l] : e(u, c, r, a, i)) : t[o] = c;else {
            if (r && void 0 === c) continue;
            t[o] = c;
          }
        }
        return t;
      }(e, t, n), e);
    }

    function O(e) {
      return Array.isArray(e);
    }

    var E = function E() {
      return "id-" + new Date().getTime() + Math.round(1e4 * Math.random());
    };

    function A(e, t) {
      if (!O(e) || !O(t)) return e === t;
      if (e.length !== t.length) return !1;

      for (var n = 0; n < e.length; n++) {
        if (e[n] !== t[n]) return !1;
      }

      return !0;
    }

    function j(e) {
      return e;
    }

    var S = function S(e) {
      return "string" == typeof e ? o.DSV_STR : O(e) && O(e[0]) ? o.DSV_ARR : O(e) && (0 === e.length || function (e) {
        return e === Object(e);
      }(e[0])) ? o.FLAT_JSON : null;
    },
        N = {
      data: {},
      createNamespace: function createNamespace(e, t) {
        var n = t || E();
        return this.data[n] = {
          name: n,
          fields: e,
          fieldsObj: function fieldsObj() {
            var e = this._cachedFieldsObj;
            return e || (e = this._cachedFieldsObj = {}, this.fields.forEach(function (t) {
              e[t.name()] = t;
            })), e;
          },
          getMeasure: function getMeasure() {
            var e = this._cachedMeasure;
            return e || (e = this._cachedMeasure = {}, this.fields.forEach(function (t) {
              t.schema().type === f.MEASURE && (e[t.name()] = t);
            })), e;
          },
          getDimension: function getDimension() {
            var e = this._cachedDimension;
            return this._cachedDimension || (e = this._cachedDimension = {}, this.fields.forEach(function (t) {
              t.schema().type === f.DIMENSION && (e[t.name()] = t);
            })), e;
          }
        }, this.data[n];
      }
    },
        k = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var F = function () {
      function e(t, n) {
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, e), Object.defineProperty(this, "_value", {
          enumerable: !1,
          configurable: !1,
          writable: !1,
          value: t
        }), this.field = n;
      }

      return k(e, [{
        key: "toString",
        value: function value() {
          return String(this.value);
        }
      }, {
        key: "valueOf",
        value: function value() {
          return this.value;
        }
      }, {
        key: "value",
        get: function get() {
          return this._value;
        }
      }]), e;
    }();

    function D(e, t) {
      e.length > 0 && e.split(",").forEach(function (e) {
        var n = e.split("-"),
            r = +n[0],
            a = +(n[1] || n[0]);
        if (a >= r) for (var i = r; i <= a; i += 1) {
          t(i);
        }
      });
    }

    var T = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var R = function () {
      function e(t) {
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, e), this._value = t;
      }

      return T(e, null, [{
        key: "invalidAwareVals",
        value: function value(t) {
          return t ? Object.assign(e._invalidAwareValsMap, t) : e._invalidAwareValsMap;
        }
      }]), T(e, [{
        key: "value",
        value: function value() {
          return this._value;
        }
      }, {
        key: "toString",
        value: function value() {
          return String(this._value);
        }
      }], [{
        key: "isInvalid",
        value: function value(t) {
          return t instanceof e || !!e.invalidAwareVals()[t];
        }
      }, {
        key: "getInvalidType",
        value: function value(t) {
          return t instanceof e ? t : e.invalidAwareVals()[t];
        }
      }]), e;
    }();

    R.NULL = new R("null"), R.NA = new R("na"), R.NIL = new R("nil"), R._invalidAwareValsMap = {
      invalid: R.NA,
      nil: R.NIL,
      null: R.NULL,
      undefined: R.NA
    };

    var I = R,
        M = function () {
      return function (e, t) {
        if (Array.isArray(e)) return e;
        if (Symbol.iterator in Object(e)) return function (e, t) {
          var n = [],
              r = !0,
              a = !1,
              i = void 0;

          try {
            for (var o, u = e[Symbol.iterator](); !(r = (o = u.next()).done) && (n.push(o.value), !t || n.length !== t); r = !0) {
              ;
            }
          } catch (e) {
            a = !0, i = e;
          } finally {
            try {
              !r && u.return && u.return();
            } finally {
              if (a) throw i;
            }
          }

          return n;
        }(e, t);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }(),
        P = function P(e, t, n) {
      for (var r = [], a = t; a < n;) {
        r.push(a), a += e;
      }

      return r.push(a), r;
    },
        x = function x(e, t) {
      for (var n = 0, r = e.length - 1, a = void 0, i = void 0; n <= r;) {
        if (t >= (i = e[a = n + Math.floor((r - n) / 2)]).start && t < i.end) return i;
        t >= i.end ? n = a + 1 : t < i.start && (r = a - 1);
      }

      return null;
    };

    function C(e, t) {
      var n = [],
          r = [];
      return e.fields.forEach(function (e) {
        r.push(e.schema().name);
      }), t.fields.forEach(function (e) {
        -1 !== r.indexOf(e.schema().name) && n.push(e.schema().name);
      }), n;
    }

    var L = "select",
        U = "project",
        V = "group",
        H = "compose",
        Y = "calculatedVariable",
        B = "bin",
        J = {
      CROSS: "cross",
      LEFTOUTER: "leftOuter",
      RIGHTOUTER: "rightOuter",
      NATURAL: "natural",
      FULLOUTER: "fullOuter"
    },
        G = "and";

    function K() {
      return !0;
    }

    function W(e, t, n) {
      var r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
          a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : J.CROSS,
          i = [],
          o = [],
          u = n || K,
          c = e.getFieldspace(),
          f = t.getFieldspace(),
          l = c.name,
          s = f.name,
          d = c.name + "." + f.name,
          p = C(c, f);
      if (l === s) throw new Error("DataModels must have different alias names");
      return c.fields.forEach(function (e) {
        var t = _({}, e.schema());

        -1 === p.indexOf(t.name) || r || (t.name = c.name + "." + t.name), i.push(t);
      }), f.fields.forEach(function (e) {
        var t = _({}, e.schema());

        -1 !== p.indexOf(t.name) ? r || (t.name = f.name + "." + t.name, i.push(t)) : i.push(t);
      }), D(e._rowDiffset, function (n) {
        var d = !1,
            h = void 0;
        D(t._rowDiffset, function (v) {
          var m = [],
              y = {};
          y[l] = {}, y[s] = {}, c.fields.forEach(function (e) {
            m.push(e.partialField.data[n]), y[l][e.name()] = e.partialField.data[n];
          }), f.fields.forEach(function (e) {
            -1 !== p.indexOf(e.schema().name) && r || m.push(e.partialField.data[v]), y[s][e.name()] = e.partialField.data[v];
          });
          var g = ot(y[l]),
              b = ot(y[s]);

          if (u(g, b, function () {
            return e.detachedRoot();
          }, function () {
            return t.detachedRoot();
          }, {})) {
            var w = {};
            m.forEach(function (e, t) {
              w[i[t].name] = e;
            }), d && J.CROSS !== a ? o[h] = w : (o.push(w), d = !0, h = n);
          } else if ((a === J.LEFTOUTER || a === J.RIGHTOUTER) && !d) {
            var _ = {},
                O = c.fields.length - 1;
            m.forEach(function (e, t) {
              _[i[t].name] = t <= O ? e : null;
            }), d = !0, h = n, o.push(_);
          }
        });
      }), new At(o, i, {
        name: d
      });
    }

    function z(e, t) {
      var n = "" + e,
          r = "" + t;
      return n < r ? -1 : n > r ? 1 : 0;
    }

    function q(e) {
      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : z;
      return e.length > 1 && function e(t, n, r, a) {
        if (r === n) return t;
        var i = n + Math.floor((r - n) / 2);
        return e(t, n, i, a), e(t, i + 1, r, a), function (e, t, n, r, a) {
          for (var i = e, o = [], u = t; u <= r; u += 1) {
            o[u] = i[u];
          }

          for (var c = t, f = n + 1, l = t; l <= r; l += 1) {
            c > n ? (i[l] = o[f], f += 1) : f > r ? (i[l] = o[c], c += 1) : a(o[c], o[f]) <= 0 ? (i[l] = o[c], c += 1) : (i[l] = o[f], f += 1);
          }
        }(t, n, i, r, a), t;
      }(e, 0, e.length - 1, t), e;
    }

    function X(e) {
      if (Array.isArray(e)) {
        for (var t = 0, n = Array(e.length); t < e.length; t++) {
          n[t] = e[t];
        }

        return n;
      }

      return Array.from(e);
    }

    function $(e, t, n) {
      var r = void 0;

      switch (e) {
        case c.CONTINUOUS:
        case u.TEMPORAL:
          r = "desc" === t ? function (e, t) {
            return t[n] - e[n];
          } : function (e, t) {
            return e[n] - t[n];
          };
          break;

        default:
          r = function r(e, _r) {
            var a = "" + e[n],
                i = "" + _r[n];
            return a < i ? "desc" === t ? 1 : -1 : a > i ? "desc" === t ? -1 : 1 : 0;
          };

      }

      return r;
    }

    function Q(e, t) {
      var n = new Map(),
          r = [];
      return e.forEach(function (e) {
        var a = e[t];
        n.has(a) ? r[n.get(a)][1].push(e) : (r.push([a, [e]]), n.set(a, r.length - 1));
      }), r;
    }

    function Z(e, t, n) {
      var r = {
        label: e[0]
      };
      return t.reduce(function (t, r, a) {
        return t[r] = e[1].map(function (e) {
          return e[n[a].index];
        }), t;
      }, r), r;
    }

    function ee(e, t, n, r, a) {
      a = Object.assign({}, {
        addUid: !1,
        columnWise: !1
      }, a);
      var i = {
        schema: [],
        data: [],
        uids: []
      },
          o = a.addUid,
          u = r && r.length > 0,
          c = [];

      if (n.split(",").forEach(function (t) {
        for (var n = 0; n < e.length; n += 1) {
          if (e[n].name() === t) {
            c.push(e[n]);
            break;
          }
        }
      }), c.forEach(function (e) {
        i.schema.push(e.schema());
      }), o && i.schema.push({
        name: "uid",
        type: "identifier"
      }), D(t, function (e) {
        i.data.push([]);
        var t = i.data.length - 1;
        c.forEach(function (n, r) {
          i.data[t][r + 0] = n.partialField.data[e];
        }), o && (i.data[t][c.length] = e), i.uids.push(e), u && i.data[t].push(e);
      }), u && function (e, t) {
        for (var n = e.data, r = e.schema, a = void 0, i = void 0, o = void 0, u = t.length - 1; u >= 0; u--) {
          a = t[u][0], i = t[u][1], (o = vt(r, a)) && ("function" == typeof i ? q(n, function (e, t) {
            return i(e[o.index], t[o.index]);
          }) : O(i) ? function () {
            var e = Q(n, o.index),
                t = i[i.length - 1],
                a = i.slice(0, i.length - 1),
                u = a.map(function (e) {
              return vt(r, e);
            });
            e.forEach(function (e) {
              e.push(Z(e, a, u));
            }), q(e, function (e, n) {
              var r = e[2],
                  a = n[2];
              return t(r, a);
            }), n.length = 0, e.forEach(function (e) {
              n.push.apply(n, X(e[1]));
            });
          }() : (i = "desc" === String(i).toLowerCase() ? "desc" : "asc", q(n, $(o.type, i, o.index))));
        }

        e.uids = [], n.forEach(function (t) {
          e.uids.push(t.pop());
        });
      }(i, r), a.columnWise) {
        var f = Array.apply(void 0, X(Array(i.schema.length))).map(function () {
          return [];
        });
        i.data.forEach(function (e) {
          e.forEach(function (e, t) {
            f[t].push(e);
          });
        }), i.data = f;
      }

      return i;
    }

    function te(e, t) {
      var n = {},
          r = [],
          a = [],
          i = [],
          o = e.getFieldspace(),
          u = t.getFieldspace(),
          c = o.fieldsObj(),
          f = u.fieldsObj(),
          l = o.name + " union " + u.name;
      if (!A(e._colIdentifier.split(",").sort(), t._colIdentifier.split(",").sort())) return null;

      function s(e, t, r) {
        D(e._rowDiffset, function (e) {
          var o = {},
              u = "";
          a.forEach(function (n) {
            var r = t[n].partialField.data[e];
            u += "-" + r, o[n] = r;
          }), n[u] || (r && i.push(o), n[u] = !0);
        });
      }

      return e._colIdentifier.split(",").forEach(function (e) {
        var t = c[e];
        r.push(_({}, t.schema())), a.push(t.schema().name);
      }), s(t, f, !1), s(e, c, !0), new At(i, r, {
        name: l
      });
    }

    function ne(e) {
      if (Array.isArray(e)) {
        for (var t = 0, n = Array(e.length); t < e.length; t++) {
          n[t] = e[t];
        }

        return n;
      }

      return Array.from(e);
    }

    function re(e) {
      return e.filter(function (e) {
        return !(e instanceof I);
      });
    }

    function ae(e) {
      if (O(e) && !(e[0] instanceof Array)) {
        var t = re(e);
        return t.length ? t.reduce(function (e, t) {
          return e + t;
        }, 0) : I.NULL;
      }

      return I.NULL;
    }

    function ie(e) {
      if (O(e) && !(e[0] instanceof Array)) {
        var t = ae(e),
            n = e.length || 1;
        return Number.isNaN(t) || t instanceof I ? I.NULL : t / n;
      }

      return I.NULL;
    }

    var oe = {
      sum: ae,
      avg: ie,
      min: function min(e) {
        if (O(e) && !(e[0] instanceof Array)) {
          var t = re(e);
          return t.length ? Math.min.apply(Math, ne(t)) : I.NULL;
        }

        return I.NULL;
      },
      max: function max(e) {
        if (O(e) && !(e[0] instanceof Array)) {
          var t = re(e);
          return t.length ? Math.max.apply(Math, ne(t)) : I.NULL;
        }

        return I.NULL;
      },
      first: function first(e) {
        return e[0];
      },
      last: function last(e) {
        return e[e.length - 1];
      },
      count: function count(e) {
        return O(e) ? e.length : I.NULL;
      },
      std: function std(e) {
        return Math.sqrt(function (e) {
          var t = ie(e);
          return ie(e.map(function (e) {
            return Math.pow(e - t, 2);
          }));
        }(e));
      }
    },
        ue = "sum",
        ce = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var fe = function () {
      function e() {
        var t = this;
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, e), this.store = new Map(), this.store.set("defReducer", ae), Object.entries(oe).forEach(function (e) {
          t.store.set(e[0], e[1]);
        });
      }

      return ce(e, [{
        key: "defaultReducer",
        value: function value() {
          if (!arguments.length) return this.store.get("defReducer");
          var e = arguments.length <= 0 ? void 0 : arguments[0];
          if ("function" == typeof e) this.store.set("defReducer", e);else {
            if (e = String(e), -1 === Object.keys(oe).indexOf(e)) throw new Error("Reducer " + e + " not found in registry");
            this.store.set("defReducer", oe[e]);
          }
          return this;
        }
      }, {
        key: "register",
        value: function value(e, t) {
          var n = this;
          if ("function" != typeof t) throw new Error("Reducer should be a function");
          return e = String(e), this.store.set(e, t), function () {
            n.__unregister(e);
          };
        }
      }, {
        key: "__unregister",
        value: function value(e) {
          this.store.has(e) && this.store.delete(e);
        }
      }, {
        key: "resolve",
        value: function value(e) {
          return e instanceof Function ? e : this.store.get(e);
        }
      }]), e;
    }(),
        le = function () {
      var e = null;
      return null === e && (e = new fe()), e;
    }(),
        se = function () {
      return function (e, t) {
        if (Array.isArray(e)) return e;
        if (Symbol.iterator in Object(e)) return function (e, t) {
          var n = [],
              r = !0,
              a = !1,
              i = void 0;

          try {
            for (var o, u = e[Symbol.iterator](); !(r = (o = u.next()).done) && (n.push(o.value), !t || n.length !== t); r = !0) {
              ;
            }
          } catch (e) {
            a = !0, i = e;
          } finally {
            try {
              !r && u.return && u.return();
            } finally {
              if (a) throw i;
            }
          }

          return n;
        }(e, t);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }();

    function de(e, t, n, r) {
      var a = function (e, t) {
        var n = [],
            r = e.getFieldspace().getDimension();
        return Object.entries(r).forEach(function (e) {
          var r = se(e, 1)[0];
          t && t.length ? -1 !== t.indexOf(r) && n.push(r) : n.push(r);
        }), n;
      }(e, t),
          i = function (e) {
        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
            n = {},
            r = e.getFieldspace().getMeasure(),
            a = le.defaultReducer();
        return Object.keys(r).forEach(function (e) {
          "string" != typeof t[e] && (t[e] = r[e].defAggFn());
          var i = le.resolve(t[e]);
          i ? n[e] = i : (n[e] = a, t[e] = ue);
        }), n;
      }(e, n),
          o = e.getFieldspace(),
          u = o.fieldsObj(),
          c = o.name,
          l = [],
          s = [],
          d = [],
          p = {},
          h = [],
          v = void 0;

      Object.entries(u).forEach(function (e) {
        var t = se(e, 2),
            n = t[0],
            r = t[1];
        if (-1 !== a.indexOf(n) || i[n]) switch (d.push(_({}, r.schema())), r.schema().type) {
          case f.MEASURE:
            s.push(n);
            break;

          default:
          case f.DIMENSION:
            l.push(n);
        }
      });
      var m = 0;
      D(e._rowDiffset, function (e) {
        var t = "";
        l.forEach(function (n) {
          t = t + "-" + u[n].partialField.data[e];
        }), void 0 === p[t] ? (p[t] = m, h.push({}), l.forEach(function (t) {
          h[m][t] = u[t].partialField.data[e];
        }), s.forEach(function (t) {
          h[m][t] = [u[t].partialField.data[e]];
        }), m += 1) : s.forEach(function (n) {
          h[p[t]][n].push(u[n].partialField.data[e]);
        });
      });

      var y = {},
          g = function g() {
        return e.detachedRoot();
      };

      return h.forEach(function (e) {
        var t = e;
        s.forEach(function (n) {
          t[n] = i[n](e[n], g, y);
        });
      }), r ? (r.__calculateFieldspace(), v = r) : v = new Mt(h, d, {
        name: c
      }), v;
    }

    function pe(e, t) {
      var n = C(e.getFieldspace(), t.getFieldspace());
      return function (e, t) {
        var r = !0;
        return n.forEach(function (n) {
          r = !(e[n].value !== t[n].value || !r);
        }), r;
      };
    }

    function he(e, t) {
      var n = {},
          r = [],
          a = [],
          i = [],
          o = e.getFieldspace(),
          u = t.getFieldspace(),
          c = o.fieldsObj(),
          f = u.fieldsObj(),
          l = o.name + " union " + u.name;
      if (!A(e._colIdentifier.split(",").sort(), t._colIdentifier.split(",").sort())) return null;

      function s(e, t) {
        D(e._rowDiffset, function (e) {
          var r = {},
              o = "";
          a.forEach(function (n) {
            var a = t[n].partialField.data[e];
            o += "-" + a, r[n] = a;
          }), n[o] || (i.push(r), n[o] = !0);
        });
      }

      return e._colIdentifier.split(",").forEach(function (e) {
        var t = c[e];
        r.push(_({}, t.schema())), a.push(t.schema().name);
      }), s(e, c), s(t, f), new Mt(i, r, {
        name: l
      });
    }

    function ve(e, t, n) {
      return W(e, t, n, !1, J.LEFTOUTER);
    }

    function me(e, t, n) {
      return W(t, e, n, !1, J.RIGHTOUTER);
    }

    var ye = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var ge = function () {
      function e(t, n) {
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, e), this.partialField = t, this.rowDiffset = n;
      }

      return ye(e, [{
        key: "domain",
        value: function value() {
          throw new Error("Not yet implemented");
        }
      }, {
        key: "schema",
        value: function value() {
          return this.partialField.schema;
        }
      }, {
        key: "name",
        value: function value() {
          return this.partialField.name;
        }
      }, {
        key: "type",
        value: function value() {
          return this.partialField.schema.type;
        }
      }, {
        key: "subtype",
        value: function value() {
          return this.partialField.schema.subtype;
        }
      }, {
        key: "description",
        value: function value() {
          return this.partialField.schema.description;
        }
      }, {
        key: "displayName",
        value: function value() {
          return this.partialField.schema.displayName || this.partialField.schema.name;
        }
      }, {
        key: "data",
        value: function value() {
          var e = this,
              t = [];
          return D(this.rowDiffset, function (n) {
            t.push(e.partialField.data[n]);
          }), t;
        }
      }, {
        key: "formattedData",
        value: function value() {
          throw new Error("Not yet implemented");
        }
      }]), e;
    }(),
        be = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var we = function (e) {
      function t() {
        return function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, t), function (e, t) {
          if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return !t || "object" != _typeof(t) && "function" != typeof t ? e : t;
        }(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments));
      }

      return function (e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + _typeof(t));
        e.prototype = Object.create(t && t.prototype, {
          constructor: {
            value: e,
            enumerable: !1,
            writable: !0,
            configurable: !0
          }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
      }(t, ge), be(t, [{
        key: "domain",
        value: function value() {
          return this._cachedDomain || (this._cachedDomain = this.calculateDataDomain()), this._cachedDomain;
        }
      }, {
        key: "calculateDataDomain",
        value: function value() {
          throw new Error("Not yet implemented");
        }
      }, {
        key: "formattedData",
        value: function value() {
          return this.data();
        }
      }]), t;
    }(),
        _e = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var Oe = function (e) {
      function t() {
        return function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, t), function (e, t) {
          if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return !t || "object" != _typeof(t) && "function" != typeof t ? e : t;
        }(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments));
      }

      return function (e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + _typeof(t));
        e.prototype = Object.create(t && t.prototype, {
          constructor: {
            value: e,
            enumerable: !1,
            writable: !0,
            configurable: !0
          }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
      }(t, we), _e(t, [{
        key: "subtype",
        value: function value() {
          return u.CATEGORICAL;
        }
      }, {
        key: "calculateDataDomain",
        value: function value() {
          var e = this,
              t = new Set(),
              n = [];
          return D(this.rowDiffset, function (r) {
            var a = e.partialField.data[r];
            t.has(a) || (t.add(a), n.push(a));
          }), n;
        }
      }]), t;
    }(),
        Ee = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var Ae = function (e) {
      function t(e, n) {
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, t);

        var r = function (e, t) {
          if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return !t || "object" != _typeof(t) && "function" != typeof t ? e : t;
        }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n));

        return r._cachedMinDiff = null, r;
      }

      return function (e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + _typeof(t));
        e.prototype = Object.create(t && t.prototype, {
          constructor: {
            value: e,
            enumerable: !1,
            writable: !0,
            configurable: !0
          }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
      }(t, we), Ee(t, [{
        key: "calculateDataDomain",
        value: function value() {
          var e = this,
              t = new Set(),
              n = [];
          return D(this.rowDiffset, function (r) {
            var a = e.partialField.data[r];
            t.has(a) || (t.add(a), n.push(a));
          }), n;
        }
      }, {
        key: "minimumConsecutiveDifference",
        value: function value() {
          if (this._cachedMinDiff) return this._cachedMinDiff;

          for (var e = this.data().filter(function (e) {
            return !(e instanceof I);
          }).sort(function (e, t) {
            return e - t;
          }), t = e.length, n = Number.POSITIVE_INFINITY, r = void 0, a = void 0, i = 0, o = 1; o < t; o++) {
            r = e[o - 1], (a = e[o]) !== r && (n = Math.min(n, a - e[o - 1]), i++);
          }

          return i || (n = null), this._cachedMinDiff = n, this._cachedMinDiff;
        }
      }, {
        key: "format",
        value: function value() {
          return this.partialField.schema.format;
        }
      }, {
        key: "formattedData",
        value: function value() {
          var e = this,
              t = [];
          return D(this.rowDiffset, function (n) {
            var r = e.partialField.data[n];
            r instanceof I ? t.push(r) : t.push(p.formatAs(r, e.format()));
          }), t;
        }
      }]), t;
    }(),
        je = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var Se = function (e) {
      function t() {
        return function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, t), function (e, t) {
          if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return !t || "object" != _typeof(t) && "function" != typeof t ? e : t;
        }(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments));
      }

      return function (e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + _typeof(t));
        e.prototype = Object.create(t && t.prototype, {
          constructor: {
            value: e,
            enumerable: !1,
            writable: !0,
            configurable: !0
          }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
      }(t, we), je(t, [{
        key: "calculateDataDomain",
        value: function value() {
          var e = this.partialField.schema.bins;
          return [e[0], e[e.length - 1]];
        }
      }, {
        key: "bins",
        value: function value() {
          return this.partialField.schema.bins;
        }
      }]), t;
    }(),
        Ne = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var ke = function (e) {
      function t() {
        return function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, t), function (e, t) {
          if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return !t || "object" != _typeof(t) && "function" != typeof t ? e : t;
        }(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments));
      }

      return function (e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + _typeof(t));
        e.prototype = Object.create(t && t.prototype, {
          constructor: {
            value: e,
            enumerable: !1,
            writable: !0,
            configurable: !0
          }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
      }(t, ge), Ne(t, [{
        key: "domain",
        value: function value() {
          return this._cachedDomain || (this._cachedDomain = this.calculateDataDomain()), this._cachedDomain;
        }
      }, {
        key: "unit",
        value: function value() {
          return this.partialField.schema.unit;
        }
      }, {
        key: "defAggFn",
        value: function value() {
          return this.partialField.schema.defAggFn || ue;
        }
      }, {
        key: "numberFormat",
        value: function value() {
          var e = this.partialField.schema.numberFormat;
          return e instanceof Function ? e : j;
        }
      }, {
        key: "calculateDataDomain",
        value: function value() {
          throw new Error("Not yet implemented");
        }
      }, {
        key: "formattedData",
        value: function value() {
          return this.data();
        }
      }]), t;
    }(),
        Fe = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var De = function (e) {
      function t() {
        return function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, t), function (e, t) {
          if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return !t || "object" != _typeof(t) && "function" != typeof t ? e : t;
        }(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments));
      }

      return function (e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + _typeof(t));
        e.prototype = Object.create(t && t.prototype, {
          constructor: {
            value: e,
            enumerable: !1,
            writable: !0,
            configurable: !0
          }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
      }(t, ke), Fe(t, [{
        key: "subtype",
        value: function value() {
          return c.CONTINUOUS;
        }
      }, {
        key: "calculateDataDomain",
        value: function value() {
          var e = this,
              t = Number.POSITIVE_INFINITY,
              n = Number.NEGATIVE_INFINITY;
          return D(this.rowDiffset, function (r) {
            var a = e.partialField.data[r];
            a instanceof I || (a < t && (t = a), a > n && (n = a));
          }), [t, n];
        }
      }]), t;
    }(),
        Te = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var Re = function () {
      function e() {
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, e);
      }

      return Te(e, [{
        key: "parse",
        value: function value() {
          throw new Error("Not yet implemented");
        }
      }]), e;
    }(),
        Ie = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var Me = function (e) {
      function t() {
        return function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, t), function (e, t) {
          if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return !t || "object" != _typeof(t) && "function" != typeof t ? e : t;
        }(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments));
      }

      return function (e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + _typeof(t));
        e.prototype = Object.create(t && t.prototype, {
          constructor: {
            value: e,
            enumerable: !1,
            writable: !0,
            configurable: !0
          }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
      }(t, Re), Ie(t, [{
        key: "parse",
        value: function value(e) {
          return I.isInvalid(e) ? I.getInvalidType(e) : String(e).trim();
        }
      }]), t;
    }(),
        Pe = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var xe = function (e) {
      function t(e) {
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, t);

        var n = function (e, t) {
          if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return !t || "object" != _typeof(t) && "function" != typeof t ? e : t;
        }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));

        return n.schema = e, n._dtf = new p(n.schema.format), n;
      }

      return function (e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + _typeof(t));
        e.prototype = Object.create(t && t.prototype, {
          constructor: {
            value: e,
            enumerable: !1,
            writable: !0,
            configurable: !0
          }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
      }(t, Re), Pe(t, [{
        key: "parse",
        value: function value(e) {
          var t = void 0;
          if (I.isInvalid(e)) t = I.getInvalidType(e);else {
            var n = this._dtf.getNativeDate(e);

            t = n ? n.getTime() : I.NA;
          }
          return t;
        }
      }]), t;
    }(),
        Ce = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var Le = function (e) {
      function t() {
        return function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, t), function (e, t) {
          if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return !t || "object" != _typeof(t) && "function" != typeof t ? e : t;
        }(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments));
      }

      return function (e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + _typeof(t));
        e.prototype = Object.create(t && t.prototype, {
          constructor: {
            value: e,
            enumerable: !1,
            writable: !0,
            configurable: !0
          }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
      }(t, Re), Ce(t, [{
        key: "parse",
        value: function value(e) {
          e = String(e);
          var t = void 0;
          if (I.isInvalid(e)) t = I.getInvalidType(e);else {
            var n = e.match(/^\s*([+-]?\d+(?:\.\d+)?)\s*-\s*([+-]?\d+(?:\.\d+)?)\s*$/);
            t = n ? Number.parseFloat(n[1]) + "-" + Number.parseFloat(n[2]) : I.NA;
          }
          return t;
        }
      }]), t;
    }(),
        Ue = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var Ve = function (e) {
      function t() {
        return function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, t), function (e, t) {
          if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return !t || "object" != _typeof(t) && "function" != typeof t ? e : t;
        }(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments));
      }

      return function (e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + _typeof(t));
        e.prototype = Object.create(t && t.prototype, {
          constructor: {
            value: e,
            enumerable: !1,
            writable: !0,
            configurable: !0
          }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
      }(t, Re), Ue(t, [{
        key: "parse",
        value: function value(e) {
          var t = void 0;
          if (I.isInvalid(e)) t = I.getInvalidType(e);else {
            var n = parseFloat(e, 10);
            t = Number.isNaN(n) ? I.NA : n;
          }
          return t;
        }
      }]), t;
    }(),
        He = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var Ye = function () {
      function e(t, n, r, a) {
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, e), this.name = t, this.schema = r, this.parser = a, this.data = this._sanitize(n);
      }

      return He(e, [{
        key: "_sanitize",
        value: function value(e) {
          var t = this;
          return e.map(function (e) {
            return t.parser.parse(e);
          });
        }
      }]), e;
    }();

    function Be(e, t, n) {
      var r = {};
      return n && n.length || (n = t.map(function (e) {
        return e.name;
      })), n.forEach(function (e, t) {
        r[e] = t;
      }), t.map(function (t) {
        return function (e, t) {
          e = e || [];
          var n = void 0;

          switch (t.type) {
            case f.MEASURE:
              switch (t.subtype) {
                case c.CONTINUOUS:
                default:
                  return n = new Ye(t.name, e, t, new Ve()), new De(n, "0-" + (e.length - 1));
              }

            case f.DIMENSION:
              switch (t.subtype) {
                case u.CATEGORICAL:
                  return n = new Ye(t.name, e, t, new Me()), new Oe(n, "0-" + (e.length - 1));

                case u.TEMPORAL:
                  return n = new Ye(t.name, e, t, new xe(t)), new Ae(n, "0-" + (e.length - 1));

                case u.BINNED:
                  return n = new Ye(t.name, e, t, new Le()), new Se(n, "0-" + (e.length - 1));

                default:
                  return n = new Ye(t.name, e, t, new Me()), new Oe(n, "0-" + (e.length - 1));
              }

            default:
              return n = new Ye(t.name, e, t, new Me()), new Oe(n, "0-" + (e.length - 1));
          }
        }(e[r[t.name]], t);
      });
    }

    var Je = {
      dataFormat: o.AUTO
    };

    var Ge = function Ge(e, t) {
      t = Object.assign({}, {
        firstRowHeader: !0
      }, t);
      var n = void 0,
          r = [],
          a = h(r);
      return n = t.firstRowHeader ? e.splice(0, 1)[0] : [], e.forEach(function (e) {
        return a.apply(void 0, function (e) {
          if (Array.isArray(e)) {
            for (var t = 0, n = Array(e.length); t < e.length; t++) {
              n[t] = e[t];
            }

            return n;
          }

          return Array.from(e);
        }(e));
      }), [n, r];
    },
        Ke = {},
        We = {},
        ze = 34,
        qe = 10,
        Xe = 13;

    function $e(e) {
      return new Function("d", "return {" + e.map(function (e, t) {
        return JSON.stringify(e) + ": d[" + t + "]";
      }).join(",") + "}");
    }

    var Qe = function Qe(e) {
      var t = new RegExp('["' + e + "\n\r]"),
          n = e.charCodeAt(0);

      function r(e, t) {
        var r,
            a = [],
            i = e.length,
            o = 0,
            u = 0,
            c = i <= 0,
            f = !1;

        function l() {
          if (c) return We;
          if (f) return f = !1, Ke;
          var t,
              r,
              a = o;

          if (e.charCodeAt(a) === ze) {
            for (; o++ < i && e.charCodeAt(o) !== ze || e.charCodeAt(++o) === ze;) {
              ;
            }

            return (t = o) >= i ? c = !0 : (r = e.charCodeAt(o++)) === qe ? f = !0 : r === Xe && (f = !0, e.charCodeAt(o) === qe && ++o), e.slice(a + 1, t - 1).replace(/""/g, '"');
          }

          for (; o < i;) {
            if ((r = e.charCodeAt(t = o++)) === qe) f = !0;else if (r === Xe) f = !0, e.charCodeAt(o) === qe && ++o;else if (r !== n) continue;
            return e.slice(a, t);
          }

          return c = !0, e.slice(a, i);
        }

        for (e.charCodeAt(i - 1) === qe && --i, e.charCodeAt(i - 1) === Xe && --i; (r = l()) !== We;) {
          for (var s = []; r !== Ke && r !== We;) {
            s.push(r), r = l();
          }

          t && null == (s = t(s, u++)) || a.push(s);
        }

        return a;
      }

      function a(t) {
        return t.map(i).join(e);
      }

      function i(e) {
        return null == e ? "" : t.test(e += "") ? '"' + e.replace(/"/g, '""') + '"' : e;
      }

      return {
        parse: function parse(e, t) {
          var n,
              a,
              i = r(e, function (e, r) {
            if (n) return n(e, r - 1);
            a = e, n = t ? function (e, t) {
              var n = $e(e);
              return function (r, a) {
                return t(n(r), a, e);
              };
            }(e, t) : $e(e);
          });
          return i.columns = a || [], i;
        },
        parseRows: r,
        format: function format(t, n) {
          return null == n && (n = function (e) {
            var t = Object.create(null),
                n = [];
            return e.forEach(function (e) {
              for (var r in e) {
                r in t || n.push(t[r] = r);
              }
            }), n;
          }(t)), [n.map(i).join(e)].concat(t.map(function (t) {
            return n.map(function (e) {
              return i(t[e]);
            }).join(e);
          })).join("\n");
        },
        formatRows: function formatRows(e) {
          return e.map(a).join("\n");
        }
      };
    },
        Ze = Qe(","),
        et = (Ze.parse, Ze.parseRows, Ze.format, Ze.formatRows, Qe("\t"));

    et.parse, et.parseRows, et.format, et.formatRows;

    var tt = function tt(e, t) {
      t = Object.assign({}, {
        firstRowHeader: !0,
        fieldSeparator: ","
      }, t);
      var n = Qe(t.fieldSeparator);
      return Ge(n.parseRows(e), t);
    };

    var nt = function nt(e) {
      var t = {},
          n = 0,
          r = void 0,
          a = [],
          i = h(a);
      return e.forEach(function (e) {
        var a = [];

        for (var o in e) {
          o in t ? r = t[o] : (t[o] = n++, r = n - 1), a[r] = e[o];
        }

        i.apply(void 0, a);
      }), [Object.keys(t), a];
    };

    var rt = function rt(e, t) {
      var n = {
        FlatJSON: nt,
        DSVStr: tt,
        DSVArr: Ge
      },
          r = S(e);
      if (!r) throw new Error("Couldn't detect the data format");
      return n[r](e, t);
    },
        at = function () {
      return function (e, t) {
        if (Array.isArray(e)) return e;
        if (Symbol.iterator in Object(e)) return function (e, t) {
          var n = [],
              r = !0,
              a = !1,
              i = void 0;

          try {
            for (var o, u = e[Symbol.iterator](); !(r = (o = u.next()).done) && (n.push(o.value), !t || n.length !== t); r = !0) {
              ;
            }
          } catch (e) {
            a = !0, i = e;
          } finally {
            try {
              !r && u.return && u.return();
            } finally {
              if (a) throw i;
            }
          }

          return n;
        }(e, t);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }();

    function it(e) {
      if (Array.isArray(e)) {
        for (var t = 0, n = Array(e.length); t < e.length; t++) {
          n[t] = e[t];
        }

        return n;
      }

      return Array.from(e);
    }

    function ot(e) {
      var t = {};
      return Object.keys(e).forEach(function (n) {
        t[n] = new F(e[n], n);
      }), t;
    }

    var ut = function ut(e, t, n) {
      var r = at(e, 2),
          a = r[0],
          i = r[1],
          o = i.length ? i.split(",") : [],
          l = t.fieldsObj(),
          s = o.map(function (e) {
        return function (e, t) {
          var n = e.schema;

          switch (n.type) {
            case f.MEASURE:
              switch (n.subtype) {
                case c.CONTINUOUS:
                default:
                  return new De(e, t);
              }

            case f.DIMENSION:
              switch (n.subtype) {
                case u.CATEGORICAL:
                  return new Oe(e, t);

                case u.TEMPORAL:
                  return new Ae(e, t);

                case u.BINNED:
                  return new Se(e, t);

                default:
                  return new Oe(e, t);
              }

            default:
              return new Oe(e, t);
          }
        }(l[e].partialField, a);
      });
      return N.createNamespace(s, n);
    },
        ct = function ct(e, t) {
      var n,
          r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
          a = arguments[3],
          i = void 0;
      t !== H ? (i = {
        op: t,
        meta: r,
        criteria: a
      }, e._derivation.push(i)) : (i = [].concat(it(a)), e._derivation.length = 0, (n = e._derivation).push.apply(n, it(i)));
    },
        ft = function ft(e, t, n, r, a) {
      var i = [],
          o = -1,
          u = r.mode,
          c = void 0,
          f = {},
          s = function s() {
        return a.detachedRoot();
      },
          d = function d(e) {
        return n(function (e, t) {
          var n = {},
              r = !0,
              a = !1,
              i = void 0;

          try {
            for (var o, u = e[Symbol.iterator](); !(r = (o = u.next()).done); r = !0) {
              var c = o.value;
              n[c.name()] = new F(c.partialField.data[t], c);
            }
          } catch (e) {
            a = !0, i = e;
          } finally {
            try {
              !r && u.return && u.return();
            } finally {
              if (a) throw i;
            }
          }

          return n;
        }(t, e), e, s, f);
      },
          p = void 0;

      return p = u === l.INVERSE ? function (e) {
        return !d(e);
      } : function (e) {
        return d(e);
      }, D(e, function (e) {
        p(e) && (-1 !== o && e === o + 1 ? (c = i.length - 1, i[c] = i[c].split("-")[0] + "-" + e) : i.push("" + e), o = e);
      }), i.join(",");
    },
        lt = function lt(e, t) {
      var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
          r = n.operation || G,
          a = n.filterByMeasure || !1,
          i = [];
      i = t.length ? t.map(function (e) {
        return n = (t = e).getData(), r = n.schema, i = t.getFieldsConfig(), o = t.getFieldspace().fieldsObj(), u = n.data, c = Object.values(i).reduce(function (e, t) {
          return e[t.def.name] = o[t.def.name].domain(), e;
        }, {}), function (e) {
          return !!u.length && u.some(function (t) {
            return r.every(function (n) {
              if (!(n.name in e)) return !0;
              var r = e[n.name].valueOf();
              if (a && n.type === f.MEASURE) return r >= c[n.name][0] && r <= c[n.name][1];
              if (n.type !== f.DIMENSION) return !0;
              var o = i[n.name].index;
              return t[o] === e[n.name].valueOf();
            });
          });
        };
        var t, n, r, i, o, u, c;
      }) : [function () {
        return !1;
      }];
      var o = void 0;
      r === G ? o = e.clone(!1, !1).select(function (e) {
        return i.every(function (t) {
          return t(e);
        });
      }, {
        saveChild: !1,
        mode: l.ALL
      }) : o = e.clone(!1, !1).select(function (e) {
        return i.some(function (t) {
          return t(e);
        });
      }, {
        mode: l.ALL,
        saveChild: !1
      });
      return o;
    },
        st = function st(e, t, n, r) {
      var a = e.clone(r.saveChild),
          i = ft(a._rowDiffset, a.getPartialFieldspace().fields, t, n, e);
      return a._rowDiffset = i, a.__calculateFieldspace().calculateFieldsConfig(), ct(a, L, {
        config: n
      }, t), a;
    },
        dt = function dt(e, t, n, r) {
      var a = e.clone(n.saveChild),
          i = t;
      return n.mode === l.INVERSE && (i = r.filter(function (e) {
        return -1 === t.indexOf(e);
      })), a._colIdentifier = i.join(","), a.__calculateFieldspace().calculateFieldsConfig(), ct(a, U, {
        projField: t,
        config: n,
        actualProjField: i
      }, null), a;
    },
        pt = function pt(e) {
      if ((e = _({}, e)).type || (e.type = f.DIMENSION), !e.subtype) switch (e.type) {
        case f.MEASURE:
          e.subtype = c.CONTINUOUS;
          break;

        default:
        case f.DIMENSION:
          e.subtype = u.CATEGORICAL;
      }
      return e;
    },
        ht = function ht(e, t, n, r) {
      n = function (e) {
        return e.map(function (e) {
          return pt(e);
        });
      }(n), r = Object.assign(Object.assign({}, Je), r);
      var i = a[r.dataFormat];
      if (!i || "function" != typeof i) throw new Error("No converter function found for " + r.dataFormat + " format");
      var u = i(t, r),
          c = at(u, 2),
          f = c[0],
          l = c[1],
          s = Be(l, n, f),
          d = N.createNamespace(s, r.name);
      return e._partialFieldspace = d, e._rowDiffset = l.length && l[0].length ? "0-" + (l[0].length - 1) : "", e._colIdentifier = n.map(function (e) {
        return e.name;
      }).join(), e._dataFormat = r.dataFormat === o.AUTO ? S(t) : r.dataFormat, e;
    },
        vt = function vt(e, t) {
      for (var n = 0; n < e.length; ++n) {
        if (t === e[n].name) return {
          type: e[n].subtype || e[n].type,
          index: n
        };
      }

      return null;
    },
        mt = function mt(e, t) {
      var n,
          r,
          a = function (e) {
        var t = e._derivation,
            n = [],
            r = void 0;
        if (t && 1 === t.length) switch (r = t[0].op) {
          case L:
            n = [t[0].criteria];
            break;

          case U:
            n = [t[0].meta.actualProjField];
            break;

          case V:
            r = "groupBy", n = [t[0].meta.groupByString.split(","), t[0].criteria];
        }
        return {
          operation: r,
          params: n
        };
      }(t),
          i = a.operation,
          o = a.params,
          u = e[0],
          c = e[1];

      i && o.length && (u = (n = e[0])[i].apply(n, it(o).concat([{
        saveChild: !1
      }])), c = (r = e[1])[i].apply(r, it(o).concat([{
        saveChild: !1
      }])));
      return [u, c];
    },
        yt = function e(t, n) {
      var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
          a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {},
          i = a.nonTraversingModel,
          o = a.excludeModels || [];
      t !== i && ((!o.length || -1 === o.indexOf(t)) && t.handlePropagation(n, r), t._children.forEach(function (t) {
        var i = mt(n, t),
            o = at(i, 2),
            u = o[0],
            c = o[1];
        e(t, [u, c], r, a);
      }));
    },
        gt = function gt(e) {
      for (var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []; e._parent;) {
        t.push(e), e = e._parent;
      }

      return t;
    },
        bt = function bt(e, t, n, r) {
      var a = void 0,
          i = void 0,
          o = n.propagationNameSpace,
          u = n.propagateToSource,
          c = n.sourceId,
          f = r.propagateInterpolatedValues,
          l = [];
      if (null === e && !0 !== r.persistent) l = [{
        criteria: []
      }];else {
        var s,
            d = Object.values(o.mutableActions);
        !1 !== u && (d = d.filter(function (e) {
          return e.config.sourceId !== c;
        }));
        var p = d.filter(function (e) {
          return (r.filterFn || function () {
            return !0;
          })(e, r);
        }).map(function (e) {
          return e.config.criteria;
        }),
            h = [];

        if (!1 !== u) {
          var v = Object.values(o.mutableActions);
          v.forEach(function (e) {
            var t = e.config;
            !1 === t.applyOnSource && t.action === r.action && t.sourceId !== c && (h.push(e.model), (a = v.filter(function (t) {
              return t !== e;
            }).map(function (e) {
              return e.config.criteria;
            })).length && l.push({
              criteria: a,
              models: e.model,
              path: gt(e.model)
            }));
          });
        }

        a = (s = []).concat.apply(s, [].concat(it(p), [e])).filter(function (e) {
          return null !== e;
        }), l.push({
          criteria: a,
          excludeModels: [].concat(h, it(r.excludeModels || []))
        });
      }
      var m = t.model,
          y = Object.assign({
        sourceIdentifiers: e,
        propagationSourceId: c
      }, r),
          g = t.groupByModel;
      f && g && (i = lt(g, a, {
        filterByMeasure: f
      }), yt(g, i, y)), l.forEach(function (e) {
        var t = lt(m, e.criteria),
            n = e.path;

        if (n) {
          var r = function (e, t) {
            for (var n = 0, r = t.length; n < r; n++) {
              var a = t[n];
              e = mt(e, a);
            }

            return e;
          }(t, n.reverse());

          e.models.handlePropagation(r, y);
        } else yt(m, t, y, {
          excludeModels: e.excludeModels,
          nonTraversingModel: f && g
        });
      });
    },
        wt = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var _t = function () {
      function e() {
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, e);
        var t = void 0;
        this._parent = null, this._derivation = [], this._children = [];

        for (var n = arguments.length, r = Array(n), a = 0; a < n; a++) {
          r[a] = arguments[a];
        }

        1 === r.length && (t = r[0]) instanceof e ? (this._colIdentifier = t._colIdentifier, this._rowDiffset = t._rowDiffset, this._dataFormat = t._dataFormat, this._parent = t, this._partialFieldspace = this._parent._partialFieldspace, this._fieldStoreName = E(), this.__calculateFieldspace().calculateFieldsConfig()) : (ht.apply(void 0, [this].concat(r)), this._fieldStoreName = this._partialFieldspace.name, this.__calculateFieldspace().calculateFieldsConfig(), this._propagationNameSpace = {
          mutableActions: {},
          immutableActions: {}
        });
      }

      return wt(e, [{
        key: "getSchema",
        value: function value() {
          return this.getFieldspace().fields.map(function (e) {
            return e.schema();
          });
        }
      }, {
        key: "getName",
        value: function value() {
          return this._fieldStoreName;
        }
      }, {
        key: "getFieldspace",
        value: function value() {
          return this._fieldspace;
        }
      }, {
        key: "__calculateFieldspace",
        value: function value() {
          return this._fieldspace = ut([this._rowDiffset, this._colIdentifier], this.getPartialFieldspace(), this._fieldStoreName), this;
        }
      }, {
        key: "getPartialFieldspace",
        value: function value() {
          return this._partialFieldspace;
        }
      }, {
        key: "join",
        value: function value(e, t) {
          return W(this, e, t);
        }
      }, {
        key: "naturalJoin",
        value: function value(e) {
          return W(this, e, pe(this, e), !0);
        }
      }, {
        key: "union",
        value: function value(e) {
          return he(this, e);
        }
      }, {
        key: "difference",
        value: function value(e) {
          return te(this, e);
        }
      }, {
        key: "select",
        value: function value(e, t) {
          var n = {
            mode: l.NORMAL,
            saveChild: !0
          },
              r = {
            saveChild: (t = Object.assign({}, n, t)).saveChild
          },
              a = void 0;
          t.mode === l.ALL ? a = [st(this, e, {
            mode: l.NORMAL
          }, r), st(this, e, {
            mode: l.INVERSE
          }, r)] : a = st(this, e, t, r);
          return a;
        }
      }, {
        key: "isEmpty",
        value: function value() {
          return !this._rowDiffset.length || !this._colIdentifier.length;
        }
      }, {
        key: "clone",
        value: function value() {
          var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0],
              t = void 0;

          if (!1 === (!(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1])) {
            var n = this.getData({
              getAllFields: !0
            }),
                r = n.data,
                a = n.schema,
                i = r.map(function (e) {
              var t = {};
              return a.forEach(function (n, r) {
                t[n.name] = e[r];
              }), t;
            });
            t = new this.constructor(i, a);
          } else t = new this.constructor(this);

          return e && this._children.push(t), t;
        }
      }, {
        key: "project",
        value: function value(e, t) {
          var n = {
            mode: l.NORMAL,
            saveChild: !0
          };
          t = Object.assign({}, n, t);
          var r = this.getFieldsConfig(),
              a = Object.keys(r),
              i = t.mode,
              o = e.reduce(function (e, t) {
            return "RegExp" === t.constructor.name ? e.push.apply(e, function (e) {
              if (Array.isArray(e)) {
                for (var t = 0, n = Array(e.length); t < e.length; t++) {
                  n[t] = e[t];
                }

                return n;
              }

              return Array.from(e);
            }(a.filter(function (e) {
              return -1 !== e.search(t);
            }))) : t in r && e.push(t), e;
          }, []);
          o = Array.from(new Set(o)).map(function (e) {
            return e.trim();
          });
          var u = void 0;
          i === l.ALL ? u = [dt(this, o, {
            mode: l.NORMAL,
            saveChild: t.saveChild
          }, a), dt(this, o, {
            mode: l.INVERSE,
            saveChild: t.saveChild
          }, a)] : u = dt(this, o, t, a);
          return u;
        }
      }, {
        key: "getFieldsConfig",
        value: function value() {
          return this._fieldConfig;
        }
      }, {
        key: "calculateFieldsConfig",
        value: function value() {
          return this._fieldConfig = this._fieldspace.fields.reduce(function (e, t, n) {
            return e[t.name()] = {
              index: n,
              def: {
                name: t.name(),
                type: t.type(),
                subtype: t.subtype()
              }
            }, e;
          }, {}), this;
        }
      }, {
        key: "dispose",
        value: function value() {
          this._parent.removeChild(this), this._parent = null;
        }
      }, {
        key: "removeChild",
        value: function value(e) {
          var t = this._children.findIndex(function (t) {
            return t === e;
          });

          -1 === t || this._children.splice(t, 1);
        }
      }, {
        key: "addParent",
        value: function value(e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [];
          ct(this, H, null, t), this._parent = e, e._children.push(this);
        }
      }, {
        key: "getParent",
        value: function value() {
          return this._parent;
        }
      }, {
        key: "getChildren",
        value: function value() {
          return this._children;
        }
      }, {
        key: "getDerivations",
        value: function value() {
          return this._derivation;
        }
      }]), e;
    }(),
        Ot = function () {
      return function (e, t) {
        if (Array.isArray(e)) return e;
        if (Symbol.iterator in Object(e)) return function (e, t) {
          var n = [],
              r = !0,
              a = !1,
              i = void 0;

          try {
            for (var o, u = e[Symbol.iterator](); !(r = (o = u.next()).done) && (n.push(o.value), !t || n.length !== t); r = !0) {
              ;
            }
          } catch (e) {
            a = !0, i = e;
          } finally {
            try {
              !r && u.return && u.return();
            } finally {
              if (a) throw i;
            }
          }

          return n;
        }(e, t);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }(),
        Et = function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
        }
      }

      return function (t, n, r) {
        return n && e(t.prototype, n), r && e(t, r), t;
      };
    }();

    var At = function (e) {
      function t() {
        var e;
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, t);

        for (var n = arguments.length, r = Array(n), a = 0; a < n; a++) {
          r[a] = arguments[a];
        }

        var i = function (e, t) {
          if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return !t || "object" != _typeof(t) && "function" != typeof t ? e : t;
        }(this, (e = t.__proto__ || Object.getPrototypeOf(t)).call.apply(e, [this].concat(r)));

        return i._onPropagation = [], i._sortingDetails = [], i;
      }

      return function (e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + _typeof(t));
        e.prototype = Object.create(t && t.prototype, {
          constructor: {
            value: e,
            enumerable: !1,
            writable: !0,
            configurable: !0
          }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
      }(t, _t), Et(t, [{
        key: "getData",
        value: function value(e) {
          e = Object.assign({}, {
            order: "row",
            formatter: null,
            withUid: !1,
            getAllFields: !1,
            sort: []
          }, e);
          var t = this.getPartialFieldspace().fields,
              n = ee.call(this, this.getPartialFieldspace().fields, this._rowDiffset, e.getAllFields ? t.map(function (e) {
            return e.name();
          }).join() : this._colIdentifier, e.sort, {
            columnWise: "column" === e.order,
            addUid: !!e.withUid
          });
          if (!e.formatter) return n;
          var r = e.formatter,
              a = n.data,
              i = n.schema,
              o = n.uids,
              u = i.map(function (e) {
            return e.name;
          }),
              c = Object.keys(r).reduce(function (e, t) {
            var n = u.indexOf(t);
            return -1 !== n && e.push([n, r[t]]), e;
          }, []);
          return "column" === e.order ? c.forEach(function (e) {
            var t = e[0],
                n = e[1];
            a[t].forEach(function (e, r) {
              a[t][r] = n.call(void 0, e, o[r], i[t]);
            });
          }) : a.forEach(function (e, t) {
            c.forEach(function (n) {
              var r = n[0],
                  a = n[1];
              e[r] = a.call(void 0, e[r], o[t], i[r]);
            });
          }), n;
        }
      }, {
        key: "groupBy",
        value: function value(e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
              n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {
            saveChild: !0
          },
              r = "" + e.join(),
              a = [this, e, t],
              i = de.apply(void 0, a);
          return ct(i, V, {
            fieldsArr: e,
            groupByString: r,
            defaultReducer: le.defaultReducer()
          }, t), n.saveChild && this._children.push(i), i._parent = this, i;
        }
      }, {
        key: "sort",
        value: function value(e) {
          var t = this.getData({
            order: "row",
            sort: e
          }),
              n = [t.schema.map(function (e) {
            return e.name;
          })].concat(t.data),
              r = new this.constructor(n, t.schema, {
            dataFormat: "DSVArr"
          });
          return r._sortingDetails = e, r;
        }
      }, {
        key: "serialize",
        value: function value(e, t) {
          e = e || this._dataFormat, t = Object.assign({}, {
            fieldSeparator: ","
          }, t);
          var n = this.getFieldspace().fields,
              r = n.map(function (e) {
            return e.formattedData();
          }),
              a = r[0].length,
              i = void 0,
              u = void 0,
              c = void 0;
          if (e === o.FLAT_JSON) for (i = [], u = 0; u < a; u++) {
            var f = {};

            for (c = 0; c < n.length; c++) {
              f[n[c].name()] = r[c][u];
            }

            i.push(f);
          } else if (e === o.DSV_STR) {
            for (i = [n.map(function (e) {
              return e.name();
            }).join(t.fieldSeparator)], u = 0; u < a; u++) {
              var l = [];

              for (c = 0; c < n.length; c++) {
                l.push(r[c][u]);
              }

              i.push(l.join(t.fieldSeparator));
            }

            i = i.join("\n");
          } else {
            if (e !== o.DSV_ARR) throw new Error("Data type " + e + " is not supported");

            for (i = [n.map(function (e) {
              return e.name();
            })], u = 0; u < a; u++) {
              var s = [];

              for (c = 0; c < n.length; c++) {
                s.push(r[c][u]);
              }

              i.push(s);
            }
          }
          return i;
        }
      }, {
        key: "addField",
        value: function value(e) {
          var t = e.name();
          this._colIdentifier += "," + t;
          var n = this._partialFieldspace;

          if (n.fieldsObj()[e.name()]) {
            var r = n.fields.findIndex(function (e) {
              return e.name() === t;
            });
            r >= 0 && (n.fields[r] = e);
          } else n.fields.push(e);

          return n._cachedFieldsObj = null, n._cachedDimension = null, n._cachedMeasure = null, this.__calculateFieldspace().calculateFieldsConfig(), this;
        }
      }, {
        key: "calculateVariable",
        value: function value(e, t, n) {
          var r = this;
          e = pt(e), n = Object.assign({}, {
            saveChild: !0,
            replaceVar: !1
          }, n);
          var a = this.getFieldsConfig(),
              i = t.slice(0, t.length - 1),
              o = t[t.length - 1];
          if (a[e.name] && !n.replaceVar) throw new Error(e.name + " field already exists in datamodel");

          var u = i.map(function (e) {
            var t = a[e];
            if (!t) throw new Error(e + " is not a valid column name.");
            return t.index;
          }),
              c = this.clone(),
              f = c.getFieldspace().fields,
              l = u.map(function (e) {
            return f[e];
          }),
              s = {},
              d = function d() {
            return r.detachedRoot();
          },
              p = [];

          D(c._rowDiffset, function (e) {
            var t = l.map(function (t) {
              return t.partialField.data[e];
            });
            p[e] = o.apply(void 0, function (e) {
              if (Array.isArray(e)) {
                for (var t = 0, n = Array(e.length); t < e.length; t++) {
                  n[t] = e[t];
                }

                return n;
              }

              return Array.from(e);
            }(t).concat([e, d, s]));
          });
          var h = Be([p], [e], [e.name]),
              v = Ot(h, 1)[0];
          return c.addField(v), ct(c, Y, {
            config: e,
            fields: i
          }, o), c;
        }
      }, {
        key: "propagate",
        value: function value(e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
              n = arguments[2],
              r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {},
              a = t.isMutableAction,
              i = t.sourceId,
              o = t.payload,
              u = function (e) {
            for (; e._parent;) {
              e = e._parent;
            }

            return e;
          }(this),
              c = u._propagationNameSpace,
              f = {
            groupByModel: function e(t) {
              return t._parent && t._derivation.find(function (e) {
                return "group" !== e.op;
              }) ? e(t._parent) : t;
            }(this),
            model: u
          };

          return n && function (e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                n = arguments[2],
                r = void 0,
                a = t.isMutableAction,
                i = t.criteria,
                o = t.action + "-" + t.sourceId;
            r = a ? e.mutableActions : e.immutableActions, null === i ? delete r[o] : r[o] = {
              model: n,
              config: t
            };
          }(c, t, this), bt(e, f, {
            propagationNameSpace: c,
            sourceId: i
          }, Object.assign({
            payload: o
          }, t)), a && function (e, t, n) {
            var r = e.immutableActions;

            for (var a in r) {
              var i = r[a].config,
                  o = n.config.sourceId,
                  u = !n.propConfig.filterImmutableAction || n.propConfig.filterImmutableAction(i, n.config);

              if (i.sourceId !== o && u) {
                var c = i.criteria;
                bt(c, t, {
                  propagationNameSpace: e,
                  propagateToSource: !1,
                  sourceId: o
                }, i);
              }
            }
          }(c, f, {
            config: t,
            propConfig: r
          }), this;
        }
      }, {
        key: "on",
        value: function value(e, t) {
          switch (e) {
            case "propagation":
              this._onPropagation.push(t);

          }

          return this;
        }
      }, {
        key: "unsubscribe",
        value: function value(e) {
          switch (e) {
            case "propagation":
              this._onPropagation = [];
          }

          return this;
        }
      }, {
        key: "handlePropagation",
        value: function value(e, t) {
          var n = this;

          this._onPropagation.forEach(function (r) {
            return r.call(n, e, t);
          });
        }
      }, {
        key: "bin",
        value: function value(e, t) {
          var n = this.getFieldsConfig();
          if (!n[e]) throw new Error("Field " + e + " doesn't exist");
          var r = t.name || e + "_binned";
          if (n[r]) throw new Error("Field " + r + " already exists");

          var a = function (e, t, n) {
            var r = n.buckets,
                a = n.binsCount,
                i = n.binSize,
                o = n.start,
                u = n.end,
                c = e.domain(),
                f = M(c, 2),
                l = f[0],
                s = f[1];
            r || (o = 0 !== o && (!o || o > l) ? l : o, u = 0 !== u && (!u || u < s) ? s + 1 : u, a && (i = Math.ceil(Math.abs(u - o) / a)), r = P(i, o, u)), r[0] > l && r.unshift(l), r[r.length - 1] <= s && r.push(s + 1);

            for (var d = [], p = 0; p < r.length - 1; p++) {
              d.push({
                start: r[p],
                end: r[p + 1]
              });
            }

            var h = [];
            return D(t, function (t) {
              var n = e.partialField.data[t];
              if (n instanceof I) h.push(n);else {
                var r = x(d, n);
                h.push(r.start + "-" + r.end);
              }
            }), {
              binnedData: h,
              bins: r
            };
          }(this.getFieldspace().fieldsObj()[e], this._rowDiffset, t),
              i = a.binnedData,
              o = a.bins,
              c = Be([i], [{
            name: r,
            type: f.DIMENSION,
            subtype: u.BINNED,
            bins: o
          }], [r])[0],
              l = this.clone();

          return l.addField(c), ct(l, B, {
            measureFieldName: e,
            config: t,
            binFieldName: r
          }, null), l;
        }
      }, {
        key: "detachedRoot",
        value: function value() {
          return new t(this.serialize(o.FLAT_JSON), this.getSchema());
        }
      }], [{
        key: "configureInvalidAwareTypes",
        value: function value(e) {
          return I.invalidAwareVals(e);
        }
      }, {
        key: "Reducers",
        get: function get() {
          return le;
        }
      }]), t;
    }(),
        jt = oe.sum,
        St = oe.avg,
        Nt = oe.min,
        kt = oe.max,
        Ft = oe.first,
        Dt = oe.last,
        Tt = oe.count,
        Rt = oe.std,
        It = n(0);

    At.Operators = {
      compose: function compose() {
        for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) {
          t[n] = arguments[n];
        }

        return function (e) {
          var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
            saveChild: !0
          },
              r = e,
              a = void 0,
              i = [],
              o = n.saveChild;
          return t.forEach(function (e) {
            r = e(r), i.push.apply(i, function (e) {
              if (Array.isArray(e)) {
                for (var t = 0, n = Array(e.length); t < e.length; t++) {
                  n[t] = e[t];
                }

                return n;
              }

              return Array.from(e);
            }(r._derivation)), a || (a = r);
          }), o && r.addParent(e, i), i.length > 1 && a.dispose(), r;
        };
      },
      bin: function bin() {
        for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) {
          t[n] = arguments[n];
        }

        return function (e) {
          return e.bin.apply(e, t);
        };
      },
      select: function select() {
        for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) {
          t[n] = arguments[n];
        }

        return function (e) {
          return e.select.apply(e, t);
        };
      },
      project: function project() {
        for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) {
          t[n] = arguments[n];
        }

        return function (e) {
          return e.project.apply(e, t);
        };
      },
      groupBy: function groupBy() {
        for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) {
          t[n] = arguments[n];
        }

        return function (e) {
          return e.groupBy.apply(e, t);
        };
      },
      calculateVariable: function calculateVariable() {
        for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) {
          t[n] = arguments[n];
        }

        return function (e) {
          return e.calculateVariable.apply(e, t);
        };
      },
      sort: function sort() {
        for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) {
          t[n] = arguments[n];
        }

        return function (e) {
          return e.sort.apply(e, t);
        };
      },
      crossProduct: W,
      difference: te,
      naturalJoin: function naturalJoin(e, t) {
        return W(e, t, pe(e, t), !0);
      },
      leftOuterJoin: ve,
      rightOuterJoin: me,
      fullOuterJoin: function fullOuterJoin(e, t, n) {
        return he(ve(e, t, n), me(e, t, n));
      },
      union: he
    }, At.Stats = i, Object.assign(At, r), At.DateTimeFormatter = p, At.DataFormat = o, At.FilteringMode = l, At.InvalidAwareTypes = I, At.version = It.version;
    var Mt = t.default = At;
  }]);
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../../node_modules/webpack/buildin/module.js */ "./node_modules/webpack/buildin/module.js")(module)))

/***/ }),

/***/ "./packages/muze-utils/node_modules/fusioncharts-smartlabel/lib/SmartlabelManager.js":
/*!*******************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/fusioncharts-smartlabel/lib/SmartlabelManager.js ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

Object.defineProperty(exports, '__esModule', {
  value: true
});

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    'default': obj
  };
}

var _lib = __webpack_require__(/*! ./lib */ "./packages/muze-utils/node_modules/fusioncharts-smartlabel/lib/lib.js");

var _lib2 = _interopRequireDefault(_lib);

var _containerManager = __webpack_require__(/*! ./container-manager */ "./packages/muze-utils/node_modules/fusioncharts-smartlabel/lib/container-manager.js");

var _containerManager2 = _interopRequireDefault(_containerManager);

var slLib = _lib2['default'].init(typeof window !== "undefined" ? window : undefined),
    doc = slLib.win.document,
    M = slLib.win.Math,
    max = M.max,
    round = M.round,
    BLANK = '',
    htmlSplCharSpace = {
  ' ': '&nbsp;'
},
    documentSupport = slLib.getDocumentSupport(),
    SVG_BBOX_CORRECTION = documentSupport.isWebKit ? 0 : 4.5;
/*
 * Create new instance of SmartLabelManager.
 *
 * SmartLabelManager controls the lifetime of the execution space where the text's metrics will be calculated.
 * This takes a string for a given style and returns the height, width.
 * If a bound box is defined it wraps the text and returns the wrapped height and width.
 * It allows to append ellipsis at the end if the text is truncated.
 *
 * @param {String | Number} id - Id of the instance. If the same id is passed, it disposes the old instance and
 *                              save the new one;
 * @param {String | HTMLElement} container - The id or the instance of the container where the intermediate dom
 *                              elements are to be attached. If not passed, it appends in div
 *
 * @param {Boolean} useEllipses - This decides if a ellipses to be appended if the text is truncated.
 * @param {Object} options - Control options
 *                          {
 *                              maxCacheLimit: No of letter to be cached. Default: 500.
 *                          }
 * @constructor
 */


function SmartLabelManager(id, container, useEllipses, options) {
  var wrapper,
      prop,
      max,
      prevInstance,
      isBrowserLess = false,
      store = SmartLabelManager.store;

  if (typeof id === 'undefined' || _typeof(id) === 'object') {
    return;
  }

  if (prevInstance = store[id]) {
    prevInstance.dispose();
  }

  store[id] = this;
  options = options || {};
  options.maxCacheLimit = isFinite(max = options.maxCacheLimit) ? max : slLib.maxDefaultCacheLimit;

  if (typeof container === 'string') {
    container = doc.getElementById(container);
  }

  wrapper = slLib.createContainer(container);
  wrapper.innerHTML = slLib.testStrAvg;

  if (documentSupport.isHeadLess || !documentSupport.isIE && !wrapper.offsetHeight && !wrapper.offsetWidth) {
    isBrowserLess = true;
  }

  wrapper.innerHTML = '';

  for (prop in slLib.parentContainerStyle) {
    wrapper.style[prop] = slLib.parentContainerStyle[prop];
  }

  this.id = id;
  this.parentContainer = wrapper;
  this._containerManager = new _containerManager2['default'](wrapper, isBrowserLess, 10);
  this._showNoEllipses = !useEllipses;
  this._init = true;
  this.style = {};
  this.options = options;
  this.setStyle();
}
/*
 * getSmartText returns the text separated by <br/> whenever a break is necessary. This is to recgonize one
 * generalized format independent of the implementation (canvas based solution, svg based solution). This method
 * converts the output of getSmartText().text to array of lines if the text is wrapped. It sets a named property
 * `lines` on the object passed as parameter.
 *
 * @param {Object} smartlabel - the object returned by getSmartText based on which line arr which to be formed.
 *
 * @return {Object} - The same object which was passed in the arguments. Also a named property `lines` is set.
 */


SmartLabelManager.textToLines = function (smartlabel) {
  smartlabel = smartlabel || {};

  if (!smartlabel.text) {
    smartlabel.text = '';
  } else if (typeof smartlabel.text !== 'string') {
    smartlabel.text = smartlabel.text.toString();
  }

  smartlabel.lines = smartlabel.text.split(/\n|<br\s*?\/?>/ig);
  return smartlabel;
}; // Saves all the instance created so far


SmartLabelManager.store = {}; // Calculates space taken by a character with an approximation value which is calculated by repeating the
// character by string length times.

SmartLabelManager.prototype._calCharDimWithCache = function (text, calculateDifference, length) {
  if (!this._init) {
    return false;
  }

  var size,
      csArr,
      tw,
      twi,
      cachedStyle,
      asymmetricDifference,
      maxAdvancedCacheLimit = this.options.maxCacheLimit,
      container = this._container,
      style = this.style || {},
      cache = this._advancedCache || (this._advancedCache = {}),
      advancedCacheKey = this._advancedCacheKey || (this._advancedCacheKey = []),
      cacheName = text + (style.fontSize || BLANK) + (style.fontFamily || BLANK) + (style.fontWeight || BLANK) + (style.fontStyle || BLANK),
      cacheInitName = text + 'init' + (style.fontSize || BLANK) + (style.fontFamily || BLANK) + (style.fontWeight || BLANK) + (style.fontStyle || BLANK);
  htmlSplCharSpace[text] && (text = htmlSplCharSpace[text]);

  if (!calculateDifference) {
    asymmetricDifference = 0;
  } else {
    if ((asymmetricDifference = cache[cacheInitName]) === undefined) {
      container.innerHTML = text.repeat ? text.repeat(length) : Array(length + 1).join(text); // jshint ignore:line

      tw = container.offsetWidth;
      container.innerHTML = text;
      twi = container.offsetWidth;
      asymmetricDifference = cache[cacheInitName] = (tw - length * twi) / (length + 1);
      advancedCacheKey.push(cacheInitName);

      if (advancedCacheKey.length > maxAdvancedCacheLimit) {
        delete cache[advancedCacheKey.shift()];
      }
    }
  }

  if (cachedStyle = cache[cacheName]) {
    csArr = cachedStyle.split(',');
    return {
      width: parseFloat(csArr[0], 10),
      height: parseFloat(csArr[1], 10)
    };
  }

  container.innerHTML = text;
  size = {
    height: container.offsetHeight,
    width: container.offsetWidth + asymmetricDifference
  };
  cache[cacheName] = size.width + ',' + size.height;
  advancedCacheKey.push(cacheName);

  if (advancedCacheKey.length > maxAdvancedCacheLimit) {
    delete cache[advancedCacheKey.shift()];
  }

  return size;
}; // Provide function to calculate the height and width based on the environment and available support from dom.


SmartLabelManager.prototype._getWidthFn = function () {
  var contObj = this._containerObj,
      container = this._container,
      svgText = contObj.svgText;

  if (svgText) {
    return function (str) {
      var bbox, width;
      svgText.textContent = str;
      bbox = svgText.getBBox();
      width = bbox.width - SVG_BBOX_CORRECTION;

      if (width < 1) {
        width = bbox.width;
      }

      return width;
    };
  } else {
    return function (str) {
      container.innerHTML = str;
      return container.offsetWidth;
    };
  }
};
/*
 * Sets the style based on which the text's metrics to be calculated.
 *
 * @param {Object} style - The style object which affects the text size
 *                      {
 *                          fontSize / 'font-size' : MUST BE FOLLOWED BY PX (10px, 11px)
 *                          fontFamily / 'font-family'
 *                          fontWeight / 'font-weight'
 *                          fontStyle / 'font-style'
 *                      }
 *
 * @return {SmartLabelManager} - Current instance of SmartLabelManager
 */


SmartLabelManager.prototype.setStyle = function (style) {
  if (!this._init) {
    return this;
  }

  var sCont;

  if (style === this.style && !this._styleNotSet) {
    return;
  }

  if (!style) {
    style = this.style;
  }

  slLib.setLineHeight(style);
  this.style = style;
  this._containerObj = sCont = this._containerManager.get(style);

  if (this._containerObj) {
    this._container = sCont.node;
    this._context = sCont.context;
    this._cache = sCont.charCache;
    this._lineHeight = sCont.lineHeight;
    this._styleNotSet = false;
  } else {
    this._styleNotSet = true;
  }

  return this;
};
/*
 * Decides whether ellipses to be shown if the node is truncated
 *
 * @param {Boolean} useEllipses - decides if a ellipses to be appended if the text is truncated. Default: false
 *
 * @return {SmartLabelManager} - Current instance of SmartLabelManager
 */


SmartLabelManager.prototype.useEllipsesOnOverflow = function (useEllipses) {
  if (!this._init) {
    return this;
  }

  this._showNoEllipses = !useEllipses;
  return this;
};
/*
 * Get wrapped or truncated text if a bound box is defined around it. The result text would be separated by <br/>
 * if wrapped
 *
 * @param {String} text - the subject text
 * @param {Number} maxWidth - width in px of the the bound box
 * @param {Number} maxHeight - height in px of the the bound box
 * @param {Boolean} noWrap - whether the text to be wrapped. Default false.
 *
 * @return {Object} - The metrics of the text bounded by the box
 *                  {
 *                      height : height of the wrapped text
 *                      width : width of the wrapped text
 *                      isTruncated : whether the text is truncated
 *                      maxHeight : Maximum height given
 *                      maxWidth : Maximum width given
 *                      oriText : Original text sent
 *                      oriTextHeight : Original text height
 *                      oriTextWidth : Original text width
 *                      text : SMART TEXT
 *                  }
 */


SmartLabelManager.prototype.getSmartText = function (text, maxWidth, maxHeight, noWrap) {
  if (!this._init) {
    return false;
  }

  if (text === undefined || text === null) {
    text = '';
  } else if (typeof text !== 'string') {
    text = text.toString();
  }

  var len,
      trimStr,
      tempArr,
      tmpText,
      maxWidthWithEll,
      toolText,
      oriWidth,
      oriHeight,
      newCharIndex,
      nearestChar,
      tempChar,
      getWidth,
      initialLeft,
      initialTop,
      getOriSizeImproveObj,
      spanArr,
      x,
      y,
      minWidth,
      elem,
      chr,
      elemRightMostPoint,
      elemLowestPoint,
      lastBR,
      removeFromIndex,
      removeFromIndexForEllipses,
      hasHTMLTag = false,
      maxStrWidth = 0,
      lastDash = -1,
      lastSpace = -1,
      lastIndexBroken = -1,
      strWidth = 0,
      strHeight = 0,
      oriTextArr = [],
      i = 0,
      ellipsesStr = this._showNoEllipses ? '' : '...',
      lineHeight = this._lineHeight,
      context = this._context,
      container = this._container,
      sCont = this._containerObj,
      ellipsesWidth = sCont.ellipsesWidth,
      dotWidth = sCont.dotWidth,
      characterArr = [],
      dashIndex = -1,
      spaceIndex = -1,
      lastLineBreak = -1,
      fastTrim = function fastTrim(str) {
    str = str.replace(/^\s\s*/, '');
    var ws = /\s/,
        i = str.length;

    while (ws.test(str.charAt(i -= 1))) {
      /* jshint noempty:false */
    }

    return str.slice(0, i + 1);
  },
      smartLabel = {
    text: text,
    maxWidth: maxWidth,
    maxHeight: maxHeight,
    width: null,
    height: null,
    oriTextWidth: null,
    oriTextHeight: null,
    oriText: text,
    isTruncated: false
  };

  getWidth = this._getWidthFn(); // In some browsers, offsetheight of a single-line text is getting little (1 px) heigher value of the
  // lineheight. As a result, smartLabel is unable to return single-line text.
  // To fix this, increase the maxHeight a little amount. Hence maxHeight =  lineHeight * 1.2

  if (maxHeight === lineHeight) {
    maxHeight *= 1.2;
  }

  if (container) {
    if (!documentSupport.isBrowserLess) {
      hasHTMLTag = slLib.xmlTagRegEx.test(text);

      if (!hasHTMLTag) {
        // Due to support of <,> for xml we convert &lt;, &gt; to <,> respectively so to get the correct
        // width it is required to convert the same before calculation for the new improve version of the
        // get text width.
        tmpText = text.replace(slLib.ltgtRegex, function (match) {
          return match === '&lt;' ? '<' : '>';
        });
        getOriSizeImproveObj = this.getOriSize(tmpText, true);
        smartLabel.oriTextWidth = oriWidth = getOriSizeImproveObj.width;
        smartLabel.oriTextHeight = oriHeight = getOriSizeImproveObj.height;
      } else {
        container.innerHTML = text;
        smartLabel.oriTextWidth = oriWidth = container.offsetWidth;
        smartLabel.oriTextHeight = oriHeight = container.offsetHeight;
      }

      if (oriHeight <= maxHeight && oriWidth <= maxWidth) {
        smartLabel.width = smartLabel.oriTextWidth = oriWidth;
        smartLabel.height = smartLabel.oriTextHeight = oriHeight;
        return smartLabel;
      }

      if (lineHeight > maxHeight) {
        smartLabel.text = '';
        smartLabel.width = smartLabel.oriTextWidth = 0;
        smartLabel.height = smartLabel.oriTextHeight = 0;
        return smartLabel;
      }
    } // Calculate width with ellipses


    text = fastTrim(text).replace(/(\s+)/g, ' ');
    maxWidthWithEll = this._showNoEllipses ? maxWidth : maxWidth - ellipsesWidth;

    if (!hasHTMLTag) {
      oriTextArr = text.split('');
      len = oriTextArr.length;
      trimStr = '', tempArr = [];
      tempChar = oriTextArr[0];

      if (this._cache[tempChar]) {
        minWidth = this._cache[tempChar].width;
      } else {
        minWidth = getWidth(tempChar);
        this._cache[tempChar] = {
          width: minWidth
        };
      }

      if (maxWidthWithEll > minWidth) {
        tempArr = text.substr(0, slLib.getNearestBreakIndex(text, maxWidthWithEll, this)).split('');
        i = tempArr.length;
      } else if (minWidth > maxWidth) {
        smartLabel.text = '';
        smartLabel.width = smartLabel.oriTextWidth = smartLabel.height = smartLabel.oriTextHeight = 0;
        return smartLabel;
      } else if (ellipsesStr) {
        maxWidthWithEll = maxWidth - 2 * dotWidth;

        if (maxWidthWithEll > minWidth) {
          ellipsesStr = '..';
        } else {
          maxWidthWithEll = maxWidth - dotWidth;

          if (maxWidthWithEll > minWidth) {
            ellipsesStr = '.';
          } else {
            maxWidthWithEll = 0;
            ellipsesStr = '';
          }
        }
      }

      strWidth = getWidth(tempArr.join(''));
      strHeight = this._lineHeight;

      if (noWrap) {
        for (; i < len; i += 1) {
          tempChar = tempArr[i] = oriTextArr[i];

          if (this._cache[tempChar]) {
            minWidth = this._cache[tempChar].width;
          } else {
            if (!getOriSizeImproveObj || !(minWidth = getOriSizeImproveObj.detailObj[tempChar])) {
              minWidth = getWidth(tempChar);
            }

            this._cache[tempChar] = {
              width: minWidth
            };
          }

          strWidth += minWidth;

          if (strWidth > maxWidthWithEll) {
            if (!trimStr) {
              trimStr = tempArr.slice(0, -1).join('');
            }

            if (strWidth > maxWidth) {
              smartLabel.text = fastTrim(trimStr) + ellipsesStr;
              smartLabel.tooltext = smartLabel.oriText;
              smartLabel.width = getWidth(smartLabel.text);
              smartLabel.height = this._lineHeight;
              return smartLabel;
            }
          }
        }

        smartLabel.text = tempArr.join('');
        smartLabel.width = strWidth;
        smartLabel.height = this._lineHeight;
        return smartLabel;
      } else {
        for (; i < len; i += 1) {
          tempChar = tempArr[i] = oriTextArr[i];

          if (tempChar === ' ' && !context) {
            tempChar = '&nbsp;';
          }

          if (this._cache[tempChar]) {
            minWidth = this._cache[tempChar].width;
          } else {
            if (!getOriSizeImproveObj || !(minWidth = getOriSizeImproveObj.detailObj[tempChar])) {
              minWidth = getWidth(tempChar);
            }

            this._cache[tempChar] = {
              width: minWidth
            };
          }

          strWidth += minWidth;

          if (strWidth > maxWidthWithEll) {
            if (!trimStr) {
              trimStr = tempArr.slice(0, -1).join('');
            }

            if (strWidth > maxWidth) {
              /** @todo use regular expressions for better performance. */
              lastSpace = text.substr(0, tempArr.length).lastIndexOf(' ');
              lastDash = text.substr(0, tempArr.length).lastIndexOf('-');

              if (lastSpace > lastIndexBroken) {
                strWidth = getWidth(tempArr.slice(lastIndexBroken + 1, lastSpace).join(''));
                tempArr.splice(lastSpace, 1, '<br/>');
                lastIndexBroken = lastSpace;
                newCharIndex = lastSpace + 1;
              } else if (lastDash > lastIndexBroken) {
                if (lastDash === tempArr.length - 1) {
                  strWidth = getWidth(tempArr.slice(lastIndexBroken + 1, lastSpace).join(''));
                  tempArr.splice(lastDash, 1, '<br/>-');
                } else {
                  strWidth = getWidth(tempArr.slice(lastIndexBroken + 1, lastSpace).join(''));
                  tempArr.splice(lastDash, 1, '-<br/>');
                }

                lastIndexBroken = lastDash;
                newCharIndex = lastDash + 1;
              } else {
                tempArr.splice(tempArr.length - 1, 1, '<br/>' + oriTextArr[i]);
                lastLineBreak = tempArr.length - 2;
                strWidth = getWidth(tempArr.slice(lastIndexBroken + 1, lastLineBreak + 1).join(''));
                lastIndexBroken = lastLineBreak;
                newCharIndex = i;
              }

              strHeight += this._lineHeight;

              if (strHeight > maxHeight) {
                smartLabel.text = fastTrim(trimStr) + ellipsesStr;
                smartLabel.tooltext = smartLabel.oriText; // The max width among all the lines will be the width of the string.

                smartLabel.width = maxWidth;
                smartLabel.height = strHeight - this._lineHeight;
                return smartLabel;
              } else {
                maxStrWidth = max(maxStrWidth, strWidth);
                trimStr = null;
                nearestChar = slLib.getNearestBreakIndex(text.substr(newCharIndex), maxWidthWithEll, this);
                strWidth = getWidth(text.substr(newCharIndex, nearestChar || 1));

                if (tempArr.length < newCharIndex + nearestChar) {
                  tempArr = tempArr.concat(text.substr(tempArr.length, newCharIndex + nearestChar - tempArr.length).split(''));
                  i = tempArr.length - 1;
                }
              }
            }
          }
        }

        maxStrWidth = max(maxStrWidth, strWidth);
        smartLabel.text = tempArr.join('');
        smartLabel.width = maxStrWidth;
        smartLabel.height = strHeight;
        return smartLabel;
      }
    } else {
      toolText = text.replace(slLib.spanAdditionRegx, '$2');
      text = text.replace(slLib.spanAdditionRegx, slLib.spanAdditionReplacer);
      text = text.replace(/(<br\s*\/*\>)/g, '<span class="' + [slLib.classNameWithTag, ' ', slLib.classNameWithTagBR].join('') + '">$1</span>');
      container.innerHTML = text;
      spanArr = container[documentSupport.childRetriverFn](documentSupport.childRetriverString);

      for (x = 0, y = spanArr.length; x < y; x += 1) {
        elem = spanArr[x]; //chech whether this span is temporary inserted span from it's class

        if (documentSupport.noClassTesting || slLib.classNameReg.test(elem.className)) {
          chr = elem.innerHTML;

          if (chr !== '') {
            if (chr === ' ') {
              spaceIndex = characterArr.length;
            } else if (chr === '-') {
              dashIndex = characterArr.length;
            }

            characterArr.push({
              spaceIdx: spaceIndex,
              dashIdx: dashIndex,
              elem: elem
            });
            oriTextArr.push(chr);
          }
        }
      }

      i = 0;
      len = characterArr.length;
      minWidth = characterArr[0].elem.offsetWidth;

      if (minWidth > maxWidth) {
        smartLabel.text = '';
        smartLabel.width = smartLabel.oriTextWidth = smartLabel.height = smartLabel.oriTextHeight = 0;
        return smartLabel;
      } else if (minWidth > maxWidthWithEll && !this._showNoEllipses) {
        maxWidthWithEll = maxWidth - 2 * dotWidth;

        if (maxWidthWithEll > minWidth) {
          ellipsesStr = '..';
        } else {
          maxWidthWithEll = maxWidth - dotWidth;

          if (maxWidthWithEll > minWidth) {
            ellipsesStr = '.';
          } else {
            maxWidthWithEll = 0;
            ellipsesStr = '';
          }
        }
      }

      initialLeft = characterArr[0].elem.offsetLeft;
      initialTop = characterArr[0].elem.offsetTop;

      if (noWrap) {
        for (; i < len; i += 1) {
          elem = characterArr[i].elem;
          elemRightMostPoint = elem.offsetLeft - initialLeft + elem.offsetWidth;

          if (elemRightMostPoint > maxWidthWithEll) {
            if (!removeFromIndexForEllipses) {
              removeFromIndexForEllipses = i;
            }

            if (container.offsetWidth > maxWidth) {
              removeFromIndex = i;
              i = len;
            }
          }
        }
      } else {
        for (; i < len; i += 1) {
          elem = characterArr[i].elem;
          elemLowestPoint = elem.offsetHeight + (elem.offsetTop - initialTop);
          elemRightMostPoint = elem.offsetLeft - initialLeft + elem.offsetWidth;
          lastBR = null;

          if (elemRightMostPoint > maxWidthWithEll) {
            if (!removeFromIndexForEllipses) {
              removeFromIndexForEllipses = i;
            }

            if (elemRightMostPoint > maxWidth) {
              lastSpace = characterArr[i].spaceIdx;
              lastDash = characterArr[i].dashIdx;

              if (lastSpace > lastIndexBroken) {
                characterArr[lastSpace].elem.innerHTML = '<br/>';
                lastIndexBroken = lastSpace;
              } else if (lastDash > lastIndexBroken) {
                if (lastDash === i) {
                  // in case the overflowing character itself is the '-'
                  characterArr[lastDash].elem.innerHTML = '<br/>-';
                } else {
                  characterArr[lastDash].elem.innerHTML = '-<br/>';
                }

                lastIndexBroken = lastDash;
              } else {
                elem.parentNode.insertBefore(lastBR = doc.createElement('br'), elem);
              } //check whether this break made current element outside the area height


              if (elem.offsetHeight + elem.offsetTop > maxHeight) {
                //remove the lastly inserted line break
                if (lastBR) {
                  lastBR.parentNode.removeChild(lastBR);
                } else if (lastIndexBroken === lastDash) {
                  characterArr[lastDash].elem.innerHTML = '-';
                } else {
                  characterArr[lastSpace].elem.innerHTML = ' ';
                }

                removeFromIndex = i; //break the looping condition

                i = len;
              } else {
                removeFromIndexForEllipses = null;
              }
            }
          } else {
            //check whether this break made current element outside the area height
            if (elemLowestPoint > maxHeight) {
              removeFromIndex = i;
              i = len;
            }
          }
        }
      }

      if (removeFromIndex < len) {
        //set the trancated property of the smartlabel
        smartLabel.isTruncated = true;
        /** @todo is this really needed? */

        removeFromIndexForEllipses = removeFromIndexForEllipses ? removeFromIndexForEllipses : removeFromIndex;

        for (i = len - 1; i >= removeFromIndexForEllipses; i -= 1) {
          elem = characterArr[i].elem; //chech whether this span is temporary inserted span from it's class

          elem.parentNode.removeChild(elem);
        }

        for (; i >= 0; i -= 1) {
          elem = characterArr[i].elem;

          if (slLib.classNameBrReg.test(elem.className)) {
            //chech whether this span is temporary inserted span from it's class
            elem.parentNode.removeChild(elem);
          } else {
            i = 0;
          }
        }
      } //get the smart text


      smartLabel.text = container.innerHTML.replace(slLib.spanRemovalRegx, '$1').replace(/\&amp\;/g, '&');

      if (smartLabel.isTruncated) {
        smartLabel.text += ellipsesStr;
        smartLabel.tooltext = toolText;
      }
    }

    smartLabel.height = container.offsetHeight;
    smartLabel.width = container.offsetWidth;
    return smartLabel;
  } else {
    smartLabel.error = new Error('Body Tag Missing!');
    return smartLabel;
  }
};
/*
 * Get the height and width of a text.
 *
 * @param {String} text - Text whose metrics to be measured
 * @param {Boolean} Optional detailedCalculationFlag - this flag if set it calculates per letter position
 *                          information and returns it. Ideally you dont need it unless you want to post process the
 *                          string. And its an EXPENSIVE OPERATION.
 *
 * @return {Object} - If detailedCalculationFlag is set to true the returned object would be
 *                  {
 *                      height: height of the text
 *                      width: width of the text
 *                      detailObj: detail calculation of letters in the format {lettername: width}
 *                  }
 *                  If detailedCalculationFlag is set to false the returned object wont have the detailObj prop.
 */


SmartLabelManager.prototype.getOriSize = function (text, detailedCalculationFlag) {
  if (!this._init) {
    return false;
  }

  var textArr,
      letter,
      lSize,
      i,
      l,
      cumulativeSize = 0,
      height = 0,
      indiSizeStore = {};

  if (!detailedCalculationFlag) {
    return this._calCharDimWithCache(text);
  } // Calculate the width of every letter with an approximation


  textArr = text.split('');

  for (i = 0, l = textArr.length; i < l; i++) {
    letter = textArr[i];
    lSize = this._calCharDimWithCache(letter, true, textArr.length);
    height = max(height, lSize.height);
    cumulativeSize += lSize.width;
    indiSizeStore[letter] = lSize.width;
  }

  return {
    width: round(cumulativeSize),
    height: height,
    detailObj: indiSizeStore
  };
};
/*
 * Dispose the container and object allocated by the smartlabel
 */


SmartLabelManager.prototype.dispose = function () {
  if (!this._init) {
    return this;
  }

  this._containerManager && this._containerManager.dispose && this._containerManager.dispose();
  delete this._container;
  delete this._context;
  delete this._cache;
  delete this._containerManager;
  delete this._containerObj;
  delete this.id;
  delete this.style;
  delete this.parentContainer;
  delete this._showNoEllipses;
  return this;
};

exports['default'] = SmartLabelManager;
module.exports = exports['default'];

/***/ }),

/***/ "./packages/muze-utils/node_modules/fusioncharts-smartlabel/lib/container-manager.js":
/*!*******************************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/fusioncharts-smartlabel/lib/container-manager.js ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    'default': obj
  };
}

var _lib = __webpack_require__(/*! ./lib */ "./packages/muze-utils/node_modules/fusioncharts-smartlabel/lib/lib.js");

var _lib2 = _interopRequireDefault(_lib);

var slLib = _lib2['default'].init(typeof window !== "undefined" ? window : undefined),
    doc = slLib.win.document,
    documentSupport = slLib.getDocumentSupport(),
    SVG_BBOX_CORRECTION = documentSupport.isWebKit ? 0 : 4.5;

function ContainerManager(parentContainer, isBrowserLess, maxContainers) {
  var svg;
  maxContainers = maxContainers > 5 ? maxContainers : 5;
  maxContainers = maxContainers < 20 ? maxContainers : 20;
  this.maxContainers = maxContainers;
  this.first = null;
  this.last = null;
  this.containers = {};
  this.length = 0;
  this.rootNode = parentContainer;

  if (isBrowserLess) {
    svg = doc.createElementNS('http://www.w3.org/2000/svg', 'svg');
    svg.setAttributeNS('http://www.w3.org/2000/svg', 'xlink', 'http://www.w3.org/1999/xlink');
    svg.setAttributeNS('http://www.w3.org/2000/svg', 'height', '0');
    svg.setAttributeNS('http://www.w3.org/2000/svg', 'width', '0');
    this.svgRoot = svg;
    this.rootNode.appendChild(svg);
  }
}

ContainerManager.prototype.get = function (style) {
  var diff,
      key,
      containerObj,
      containers = this.containers,
      len = this.length,
      max = this.maxContainers,
      keyStr = '';

  for (key in slLib.supportedStyle) {
    if (style[key] !== undefined) {
      keyStr += slLib.supportedStyle[key] + ':' + style[key] + ';';
    }
  }

  if (!keyStr) {
    return false;
  }

  if (containerObj = containers[keyStr]) {
    if (this.first !== containerObj) {
      containerObj.prev && (containerObj.prev.next = containerObj.next);
      containerObj.next && (containerObj.next.prev = containerObj.prev);
      containerObj.next = this.first;
      containerObj.next.prev = containerObj;
      this.last === containerObj && (this.last = containerObj.prev);
      containerObj.prev = null;
      this.first = containerObj;
    }
  } else {
    if (len >= max) {
      diff = len - max + 1; // +1 is to remove an extra entry to make space for the new container to be added.

      while (diff--) {
        this.removeContainer(this.last);
      }
    }

    containerObj = this.addContainer(keyStr);
  }

  return containerObj;
};

ContainerManager.prototype.addContainer = function (keyStr) {
  var node, container;
  this.containers[keyStr] = container = {
    next: null,
    prev: null,
    node: null,
    ellipsesWidth: 0,
    lineHeight: 0,
    dotWidth: 0,
    avgCharWidth: 4,
    keyStr: keyStr,
    charCache: {}
  }; // Since the container objects are arranged from most recent to least recent order, we need to add the new
  // object at the beginning of the list.

  container.next = this.first;
  container.next && (container.next.prev = container);
  this.first = container;

  if (!this.last) {
    this.last = container;
  }

  this.length += 1;
  node = container.node = doc.createElement('div');
  this.rootNode.appendChild(node);

  if (documentSupport.isIE && !documentSupport.hasSVG) {
    node.style.setAttribute('cssText', keyStr);
  } else {
    node.setAttribute('style', keyStr);
  }

  node.setAttribute('aria-hidden', 'true');
  node.setAttribute('role', 'presentation');
  node.style.display = 'inline-block';
  node.innerHTML = slLib.testStrAvg; // A test string.

  container.lineHeight = node.offsetHeight;
  container.avgCharWidth = node.offsetWidth / 3;

  if (documentSupport.isBrowserLess) {
    node = container.svgText = doc.createElementNS('http://www.w3.org/2000/svg', 'text');
    node.setAttribute('style', keyStr);
    this.svgRoot.appendChild(node);
    node.textContent = slLib.testStrAvg; // A test string.

    container.lineHeight = node.getBBox().height;
    container.avgCharWidth = (node.getBBox().width - SVG_BBOX_CORRECTION) / 3;
    node.textContent = '...';
    container.ellipsesWidth = node.getBBox().width - SVG_BBOX_CORRECTION;
    node.textContent = '.';
    container.dotWidth = node.getBBox().width - SVG_BBOX_CORRECTION;
  } else {
    node.innerHTML = '...';
    container.ellipsesWidth = node.offsetWidth;
    node.innerHTML = '.';
    container.dotWidth = node.offsetWidth;
    node.innerHTML = '';
  }

  return container;
};

ContainerManager.prototype.removeContainer = function (cObj) {
  var keyStr = cObj.keyStr;

  if (!keyStr || !this.length || !cObj) {
    return;
  }

  this.length -= 1;
  cObj.prev && (cObj.prev.next = cObj.next);
  cObj.next && (cObj.next.prev = cObj.prev);
  this.first === cObj && (this.first = cObj.next);
  this.last === cObj && (this.last = cObj.prev);
  cObj.node.parentNode.removeChild(cObj.node);
  delete this.containers[keyStr];
};

ContainerManager.prototype.dispose = function () {
  var key,
      containers = this.containers;
  this.maxContainers = null;

  for (key in containers) {
    this.removeContainer(containers[key]);
  }

  this.rootNode.parentNode.removeChild(this.rootNode);
  this.rootNode = null;
  this.first = null;
  this.last = null;
};

module.exports = ContainerManager;

/***/ }),

/***/ "./packages/muze-utils/node_modules/fusioncharts-smartlabel/lib/lib.js":
/*!*****************************************************************************!*\
  !*** ./packages/muze-utils/node_modules/fusioncharts-smartlabel/lib/lib.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, '__esModule', {
  value: true
});
var lib = {
  init: function init(win) {
    var doc = win.document,
        nav = win.navigator,
        userAgent = nav.userAgent,
        DIV = 'DIV',
        ceil = Math.ceil,
        floor = Math.floor,
        containerInstanceCount = 0,
        clsNameSpace = 'fusioncharts-smartlabel-',
        containerClass = clsNameSpace + 'container',
        classNameWithTag = clsNameSpace + 'tag',
        classNameWithTagBR = clsNameSpace + 'br';
    lib = {
      win: win,
      containerClass: containerClass,
      classNameWithTag: classNameWithTag,
      classNameWithTagBR: classNameWithTagBR,
      maxDefaultCacheLimit: 500,
      classNameReg: new RegExp('\b' + classNameWithTag + '\b'),
      classNameBrReg: new RegExp('\b' + classNameWithTagBR + '\b'),
      spanAdditionRegx: /(<[^<\>]+?\>)|(&(?:[a-z]+|#[0-9]+);|.)/ig,
      spanAdditionReplacer: '$1<span class="' + classNameWithTag + '">$2</span>',
      spanRemovalRegx: new RegExp('\\<span[^\\>]+?' + classNameWithTag + '[^\\>]{0,}\\>(.*?)\\<\\/span\\>', 'ig'),
      xmlTagRegEx: new RegExp('<[^>][^<]*[^>]+>', 'i'),
      ltgtRegex: /&lt;|&gt;/g,
      brReplaceRegex: /<br\/>/ig,
      testStrAvg: 'WgI',
      // This style is applied over the parent smartlabel container. The container is kept hidden from the viewport
      parentContainerStyle: {
        position: 'absolute',
        top: '-9999em',
        whiteSpace: 'nowrap',
        padding: '0px',
        width: '1px',
        height: '1px',
        overflow: 'hidden'
      },
      // All the style which might affect the text metrics
      supportedStyle: {
        font: 'font',
        fontFamily: 'font-family',
        'font-family': 'font-family',
        fontWeight: 'font-weight',
        'font-weight': 'font-weight',
        fontSize: 'font-size',
        'font-size': 'font-size',
        lineHeight: 'line-height',
        'line-height': 'line-height',
        fontStyle: 'font-style',
        'font-style': 'font-style'
      },
      // Get the support list for html the document where the text calcution is to be done.
      getDocumentSupport: function getDocumentSupport() {
        var childRetriverFn, childRetriverString, noClassTesting;

        if (doc.getElementsByClassName) {
          childRetriverFn = 'getElementsByClassName';
          childRetriverString = classNameWithTag;
          noClassTesting = true;
        } else {
          childRetriverFn = 'getElementsByTagName';
          childRetriverString = 'span';
          noClassTesting = false;
        }

        return {
          isIE: /msie/i.test(userAgent) && !win.opera,
          hasSVG: Boolean(win.SVGAngle || doc.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#BasicStructure', '1.1')),
          isHeadLess: new RegExp(' HtmlUnit').test(userAgent),
          isWebKit: new RegExp(' AppleWebKit/').test(userAgent),
          childRetriverFn: childRetriverFn,
          childRetriverString: childRetriverString,
          noClassTesting: noClassTesting
        };
      },

      /*
       * Create a html div element and attach it with a parent. All the subsequent operations are performed
       * by upding this dom tree only.
       *
       * @param {HTMLElement} - The html element where the newly created div is to be attached. If not passed,
       *                      the new div is appended on the body.
       */
      createContainer: function createContainer(containerParent) {
        var body, container;

        if (containerParent && (containerParent.offsetWidth || containerParent.offsetHeight)) {
          if (containerParent.appendChild) {
            containerParent.appendChild(container = doc.createElement(DIV));
            container.className = containerClass;
            container.setAttribute('aria-hidden', 'true');
            container.setAttribute('role', 'presentation');
            return container;
          }
        } else {
          body = doc.getElementsByTagName('body')[0];

          if (body && body.appendChild) {
            container = doc.createElement(DIV);
            container.className = containerClass;
            container.setAttribute('aria-hidden', 'true');
            container.setAttribute('role', 'presentation');
            containerInstanceCount += 1;
            body.appendChild(container);
            return container;
          }
        }
      },
      // Finds a approximate position where the text is to be broken
      getNearestBreakIndex: function getNearestBreakIndex(text, maxWidth, sl) {
        if (!text || !text.length) {
          return 0;
        }

        var difference,
            getWidth = sl._getWidthFn(),
            charLen = 0,
            increment = 0,
            oriWidth = getWidth(text),
            avgWidth = oriWidth / text.length;

        difference = maxWidth;
        charLen = ceil(maxWidth / avgWidth);

        if (oriWidth < maxWidth) {
          return text.length - 1;
        }

        if (charLen > text.length) {
          difference = maxWidth - oriWidth;
          charLen = text.length;
        }

        while (difference > 0) {
          difference = maxWidth - getWidth(text.substr(0, charLen));
          increment = floor(difference / avgWidth);

          if (increment) {
            charLen += increment;
          } else {
            return charLen;
          }
        }

        while (difference < 0) {
          difference = maxWidth - getWidth(text.substr(0, charLen));
          increment = floor(difference / avgWidth);

          if (increment) {
            charLen += increment;
          } else {
            return charLen;
          }
        }

        return charLen;
      },

      /*
       * Determine lineheight of a text for a given style. It adds propery lineHeight to the style passed
       *
       * @param {Object} - The style based on which the text's metric needs to be calculated. The calculation happens
       *                  based on fontSize property, if its not present a default font size is assumed.
       *
       * @return {Object} - The style that was passed with lineHeight as a named propery set on the object.
       */
      setLineHeight: function setLineHeight(styleObj) {
        var fSize = styleObj.fontSize = styleObj.fontSize || '12px';
        styleObj.lineHeight = styleObj.lineHeight || styleObj['line-height'] || parseInt(fSize, 10) * 1.2 + 'px';
        return styleObj;
      }
    };
    return lib;
  }
};
exports['default'] = lib;
module.exports = exports['default'];

/***/ }),

/***/ "./packages/muze-utils/node_modules/hyperdis/dist/hyperdis.js":
/*!********************************************************************!*\
  !*** ./packages/muze-utils/node_modules/hyperdis/dist/hyperdis.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

!function (e, t) {
  "object" == ( false ? undefined : _typeof(exports)) && "object" == ( false ? undefined : _typeof(module)) ? module.exports = t() :  true ? !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (t),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)) : undefined;
}(window, function () {
  return function (e) {
    var t = {};

    function r(n) {
      if (t[n]) return t[n].exports;
      var i = t[n] = {
        i: n,
        l: !1,
        exports: {}
      };
      return e[n].call(i.exports, i, i.exports, r), i.l = !0, i.exports;
    }

    return r.m = e, r.c = t, r.d = function (e, t, n) {
      r.o(e, t) || Object.defineProperty(e, t, {
        enumerable: !0,
        get: n
      });
    }, r.r = function (e) {
      "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
        value: "Module"
      }), Object.defineProperty(e, "__esModule", {
        value: !0
      });
    }, r.t = function (e, t) {
      if (1 & t && (e = r(e)), 8 & t) return e;
      if (4 & t && "object" == _typeof(e) && e && e.__esModule) return e;
      var n = Object.create(null);
      if (r.r(n), Object.defineProperty(n, "default", {
        enumerable: !0,
        value: e
      }), 2 & t && "string" != typeof e) for (var i in e) {
        r.d(n, i, function (t) {
          return e[t];
        }.bind(null, i));
      }
      return n;
    }, r.n = function (e) {
      var t = e && e.__esModule ? function () {
        return e.default;
      } : function () {
        return e;
      };
      return r.d(t, "a", t), t;
    }, r.o = function (e, t) {
      return Object.prototype.hasOwnProperty.call(e, t);
    }, r.p = "", r(r.s = 0);
  }([function (e, t, r) {
    "use strict";

    r.r(t);

    var n = function () {
      function e(e, t) {
        for (var r = 0; r < t.length; r++) {
          var n = t[r];
          n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);
        }
      }

      return function (t, r, n) {
        return r && e(t.prototype, r), n && e(t, n), t;
      };
    }();

    var i = function i(e, t) {
      e.forEach(function (e) {
        void 0 !== e && null !== e && (t[e] = 1);
      });
    },
        o = function () {
      function e(t) {
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, e), this._set = {}, i(t, this._set);
      }

      return n(e, [{
        key: "append",
        value: function value(e) {
          return i(e, this._set), this;
        }
      }, {
        key: "toArray",
        value: function value() {
          return Object.keys(this._set);
        }
      }], [{
        key: "difference",
        value: function value(t, r) {
          var n = void 0,
              i = [],
              o = t._set,
              u = r._set;

          for (n in o) {
            ({}).hasOwnProperty.call(o, n) && (n in u || i.push(n));
          }

          return new e(i);
        }
      }]), e;
    }(),
        u = function () {
      function e(e, t) {
        for (var r = 0; r < t.length; r++) {
          var n = t[r];
          n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);
        }
      }

      return function (t, r, n) {
        return r && e(t.prototype, r), n && e(t, n), t;
      };
    }(),
        a = "function" == typeof Symbol && "symbol" == _typeof(Symbol.iterator) ? function (e) {
      return _typeof(e);
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : _typeof(e);
    };

    function s(e) {
      if (Array.isArray(e)) {
        for (var t = 0, r = Array(e.length); t < e.length; t++) {
          r[t] = e[t];
        }

        return r;
      }

      return Array.from(e);
    }

    var l = function l(e) {
      if ("object" === (void 0 === e ? "undefined" : a(e))) {
        if (null === e) return !1;
        if ("[object Object]" === Object.prototype.toString.call(e)) return "Object" === (e.constructor.toString().match(/^function (.*)\(\)/m) || [])[1];
      }

      return !1;
    },
        c = "undefined" == typeof window ? {} : window,
        f = c.requestAnimationFrame || c.webkitRequestAnimationFrame || c.mozRequestAnimationFrame || c.oRequestAnimationFrame || c.msRequestAnimationFrame || function (e) {
      setTimeout(e, 16);
    },
        h = function e() {
      return e.__lastTime === new Date().getTime() ? e.__lastTime.toString() + (e.__id++).toString() : (e.__id = 0, (e.__lastTime = new Date().getTime()).toString() + (e.__id++).toString());
    },
        d = function d() {
      for (var e = arguments.length, t = Array(e), r = 0; r < e; r++) {
        t[r] = arguments[r];
      }

      var n = [];
      return t.forEach(function (e) {
        return n.push.apply(n, s(e));
      }), n;
    },
        p = function p(e) {
      var t = [],
          r = null;
      return e = e && "function" == typeof e && e || function () {}, function (n, i) {
        [].push.apply(t, n), null === r && (r = f(function () {
          var n = t.slice(0);
          t.length = 0, r = null, function (e) {
            return e.reduce(function (e, t) {
              return t.__id in e.map ? e : (e.map[t.__id] = 1, e.unique.push(t), e);
            }, {
              map: {},
              unique: []
            }).unique;
          }(n).forEach(function (e) {
            return e();
          }), e(i);
        }));
      };
    },
        v = function v(e) {
      return function () {
        for (var t = arguments.length, r = Array(t), n = 0; n < t; n++) {
          r[n] = arguments[n];
        }

        return r.map(function (t) {
          var r = e[t];
          return {
            name: r.name,
            qualifiedName: r.qualifiedName,
            value: r.seed
          };
        });
      };
    },
        y = function y() {
      for (var e = arguments.length, t = Array(e), r = 0; r < e; r++) {
        t[r] = arguments[r];
      }

      return {
        dependencies: t.slice(0, t.length - 1),
        fn: t[t.length - 1]
      };
    },
        g = function g(e) {
      var t = [],
          r = {};
      return e.forEach(function (e) {
        return r[e.qualifiedName] = -1;
      }), function e(n) {
        n.forEach(function (n) {
          var i,
              o = void 0,
              u = void 0,
              a = void 0;
          (i = n.qualifiedName) in r ? -1 !== (o = r[i]) && o !== t.length - 1 && (u = t.slice(0, o), a = t.slice(o + 1), t = u.concat(a), a.forEach(function (e, t) {
            return r[e.qualifiedName] = t + u.length;
          }), r[i] = t.push(n) - 1) : r[i] = t.push(n) - 1, e(n.outgoingEdges);
        });
      }(e), t;
    },
        m = {
      accumulate: function accumulate() {
        for (var e = arguments.length, t = Array(e), r = 0; r < e; r++) {
          t[r] = arguments[r];
        }

        var n = {};
        return t.forEach(function (e) {
          Object.assign(n, function (e, t, r) {
            return t in e ? Object.defineProperty(e, t, {
              value: r,
              enumerable: !0,
              configurable: !0,
              writable: !0
            }) : e[t] = r, e;
          }({}, e.name, e.value));
        }), n;
      },
      identity: function identity(e) {
        return e.value;
      }
    };

    var _ = function () {
      function e(t) {
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, e), this.fn = t, this.dep = [];
      }

      return u(e, [{
        key: "addDependencies",
        value: function value() {
          var e;
          return (e = this.dep).push.apply(e, arguments), this;
        }
      }, {
        key: "getDependencies",
        value: function value() {
          return this.dep;
        }
      }, {
        key: "get",
        value: function value() {
          return this.fn;
        }
      }]), e;
    }(),
        b = function () {
      function e(e, t) {
        for (var r = 0; r < t.length; r++) {
          var n = t[r];
          n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);
        }
      }

      return function (t, r, n) {
        return r && e(t.prototype, r), n && e(t, n), t;
      };
    }();

    function k(e) {
      if (Array.isArray(e)) {
        for (var t = 0, r = Array(e.length); t < e.length; t++) {
          r[t] = e[t];
        }

        return r;
      }

      return Array.from(e);
    }

    var w = function () {
      function e(t, r, n) {
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, e), n = n || {}, this.name = t, this.qualifiedName = r, this.edges = [], this.outgoingEdges = [], this._seed = null, this.requireResolve = !0, this.retriever = n.retriever, this.history = [], this.resolver = null, this.electricEdges = [];
      }

      return b(e, [{
        key: "addDependencies",
        value: function value() {
          for (var e, t = this, r = arguments.length, n = Array(r), i = 0; i < r; i++) {
            n[i] = arguments[i];
          }

          return (e = this.edges).push.apply(e, n), n.forEach(function (e) {
            return e.outgoingEdges.push(t);
          }), this;
        }
      }, {
        key: "addElectricNode",
        value: function value(e) {
          return this.electricEdges.push(e), this;
        }
      }, {
        key: "resolve",
        value: function value() {
          return this.seed = this.resolver.apply(this, k(this.retrieveDetails())), this.history.push(this.seed), this.requireResolve = !1, this;
        }
      }, {
        key: "retrieveDetails",
        value: function value() {
          return 0 === this.edges.length ? [{
            name: this.name,
            qualifiedName: this.qualifiedName,
            value: this.seed
          }] : this.retriever.apply(this, k(this.edges.map(function (e) {
            return e.qualifiedName;
          })));
        }
      }, {
        key: "repeatHead",
        value: function value() {
          var e = this.history,
              t = e[e.length - 1];
          return 0 === e.length ? this : (e.push(t), this);
        }
      }, {
        key: "flush",
        value: function value() {
          var e = this.history,
              t = e[e.length - 1];
          return e.length = 0, e.push(t), this;
        }
      }, {
        key: "isRoot",
        value: function value() {
          return null === this.name;
        }
      }, {
        key: "seed",
        get: function get() {
          return this._seed;
        },
        set: function set(e) {
          return this._seed = e, this.requireResolve = !0, this;
        }
      }]), e;
    }(),
        q = function () {
      function e(e, t) {
        for (var r = 0; r < t.length; r++) {
          var n = t[r];
          n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);
        }
      }

      return function (t, r, n) {
        return r && e(t.prototype, r), n && e(t, n), t;
      };
    }();

    var E = function () {
      function e() {
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, e), this.edges = [], this.listeners = {
          nextFrame: [],
          currentFrame: []
        };
      }

      return q(e, [{
        key: "addEdges",
        value: function value() {
          var e;
          return (e = this.edges).push.apply(e, arguments), this;
        }
      }, {
        key: "regListenerForCurrFrame",
        value: function value(e) {
          var t = this,
              r = this.listeners.currentFrame,
              n = r.push(function (e, t) {
            var r = function r() {
              t.apply(void 0, s(e.map(function (e) {
                var t = e.history,
                    r = t.length - 1;
                return [t[r - 1 < 0 ? 0 : r - 1], t[r]];
              })));
            };

            return r.__id = h(), r;
          }(this.edges, e)) - 1;
          return function () {
            t.listeners.currentFrame = r.filter(function (e, t) {
              return t !== n;
            });
          };
        }
      }, {
        key: "regListenerForNextFrame",
        value: function value(e) {
          var t = this,
              r = this.listeners.nextFrame,
              n = r.push(function (e, t) {
            var r = function r() {
              t.apply(void 0, s(e.map(function (e) {
                var t = e.history;
                return [t[0], t[t.length - 1]];
              })));
            };

            return r.__id = h(), r;
          }(this.edges, e)) - 1;
          return function () {
            t.listeners.nextFrame = r.filter(function (e, t) {
              return t !== n;
            });
          };
        }
      }, {
        key: "hasNextFrameListener",
        value: function value() {
          return !!this.listeners.nextFrame.length;
        }
      }]), e;
    }(),
        N = function () {
      function e(e, t) {
        for (var r = 0; r < t.length; r++) {
          var n = t[r];
          n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);
        }
      }

      return function (t, r, n) {
        return r && e(t.prototype, r), n && e(t, n), t;
      };
    }();

    function F(e) {
      if (Array.isArray(e)) {
        for (var t = 0, r = Array(e.length); t < e.length; t++) {
          r[t] = e[t];
        }

        return r;
      }

      return Array.from(e);
    }

    var O = function () {
      function e() {
        var t = this;
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, e), this.qualifiedNodeMap = {}, this.retriever = v(this.qualifiedNodeMap), this.root = new w(null, null, {
          retriever: this.retriever
        }), this.root.resolver = m.accumulate, this._wholeSet = null, this._propagate = !0, this.propagationOverride = {
          currentFrameListeners: !1,
          nextFrameListeners: !1
        }, this._schedule = p(function (e) {
          var r = void 0;

          for (r in e.flushTarget) {
            if (!{}.hasOwnProperty.call(t.qualifiedNodeMap, r)) return;
            t.qualifiedNodeMap[r].flush();
          }
        });
      }

      return N(e, [{
        key: "createNodesFrom",
        value: function value(e, t) {
          var r = void 0,
              n = void 0,
              i = this.qualifiedNodeMap,
              u = this.root,
              a = this.retriever;
          return function e(t, n, o) {
            var s = void 0,
                c = void 0,
                f = void 0,
                h = void 0;

            for (s in t) {
              if ({}.hasOwnProperty.call(t, s)) if (h = new w(s, c = "" + n + s, {
                retriever: a
              }), i[c] = h, void 0 !== (f = o.perv) ? f.addDependencies(h) : u.addDependencies(h), l(r = t[s])) e(r, "" + n + s + ".", {
                perv: h
              }), h.resolver = m.accumulate;else if (r instanceof _) {
                var d;
                h.resolver = r.get(), (d = h).addDependencies.apply(d, F(r.getDependencies().map(function (e) {
                  return i[e];
                })));
              } else h.resolver = m.identity, h.seed = r;
            }
          }(e, null === t ? "" : t + ".", {
            perv: i[t]
          }), this._wholeSet = new o(Object.keys(this.qualifiedNodeMap)), (n = this.constructor.getResolvedList(u).concat(u).filter(function (e) {
            return e.requireResolve;
          })).forEach(function (e) {
            return e.resolve();
          }), g(n).forEach(function (e) {
            return e.resolve();
          }), this;
        }
      }, {
        key: "getNodeValue",
        value: function value(e) {
          if (e in this.qualifiedNodeMap) return this.qualifiedNodeMap[e].seed;
        }
      }, {
        key: "createElectricNodeOf",
        value: function value(e, t) {
          var r,
              n = this,
              i = e.map(function (e) {
            return n.qualifiedNodeMap[e];
          }),
              o = (r = new E()).addEdges.apply(r, F(i));
          return i.forEach(function (e) {
            return e.addElectricNode(o);
          }), o["regListenerFor" + t.type](t.fn);
        }
      }, {
        key: "update",
        value: function value() {
          for (var e = void 0, t = void 0, r = arguments.length, n = Array(r), i = 0; i < r; i++) {
            n[i] = arguments[i];
          }

          var u = [],
              a = n.map(function (e) {
            return e[0].seed = e[1], e[0];
          });
          return a.forEach(function (e) {
            return e.resolve();
          }), u.push.apply(u, F(d.apply(void 0, F(a.map(function (e) {
            return e.electricEdges;
          }))))), e = new o(a.map(function (e) {
            return e.qualifiedName;
          })), this._propagate ? ((t = g(a)).forEach(function (e) {
            return e.resolve();
          }), e.append(t.map(function (e) {
            return e.qualifiedName;
          })), u.push.apply(u, F(d.apply(void 0, F(t.map(function (e) {
            return e.electricEdges;
          }))))), this.__execUniqueElectricEdges(Array.from(new Set(u)), e), this) : (this.__execUniqueElectricEdges(u), this._propagate = !0, this);
        }
      }, {
        key: "__execUniqueElectricEdges",
        value: function value(e, t) {
          var r = this,
              n = [],
              i = [];
          t && o.difference(this._wholeSet, t).toArray().forEach(function (e) {
            return r.qualifiedNodeMap[e].repeatHead();
          });
          return e.forEach(function (e) {
            n.push.apply(n, F(e.listeners.currentFrame));
          }), e.forEach(function (e) {
            i.push.apply(i, F(e.listeners.nextFrame));
          }), !this.propagationOverride.currentFrameListeners && n.forEach(function (e) {
            return e();
          }), !this.propagationOverride.nextFrameListeners && this._schedule(i, {
            flushTarget: t
          }), this.resetPropagationOverride(), this;
        }
      }, {
        key: "resetNodeValue",
        value: function value() {
          for (var e = this, t = arguments.length, r = Array(t), n = 0; n < t; n++) {
            r[n] = arguments[n];
          }

          var i = r.map(function (t) {
            return e.qualifiedNodeMap[t];
          }).map(function (e) {
            return [e, e.seed];
          });
          return this.update.apply(this, F(i)), this;
        }
      }, {
        key: "stopPropagation",
        value: function value() {
          return this._propagate = !1, this;
        }
      }, {
        key: "resetPropagationOverride",
        value: function value() {
          return this.propagationOverride.currentFrameListeners = !1, this.propagationOverride.nextFrameListeners = !1, this;
        }
      }, {
        key: "setPropagationOverride",
        value: function value(e) {
          return this.propagationOverride[e + "Listeners"] = !0, this;
        }
      }, {
        key: "getNodeFromQualifiedName",
        value: function value(e) {
          return this.qualifiedNodeMap[e];
        }
      }], [{
        key: "getResolvedList",
        value: function value(e) {
          var t = [];
          return function e(t, r, n) {
            var i = void 0;
            t.edges.forEach(function (t) {
              e(t, r, n);
            }), t.isRoot() || (i = t.qualifiedName) in n || (r.push(t), n[i] = 1);
          }(e, t, {}), t;
        }
      }]), e;
    }(),
        A = function () {
      function e(e, t) {
        for (var r = 0; r < t.length; r++) {
          var n = t[r];
          n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);
        }
      }

      return function (t, r, n) {
        return r && e(t.prototype, r), n && e(t, n), t;
      };
    }();

    function P(e) {
      if (Array.isArray(e)) {
        for (var t = 0, r = Array(e.length); t < e.length; t++) {
          r[t] = e[t];
        }

        return r;
      }

      return Array.from(e);
    }

    var j = function () {
      function e() {
        !function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        }(this, e), this._graph = new O(), this._lockFlag = !1, this._reqQ = [];
      }

      return A(e, [{
        key: "append",
        value: function value() {
          var e = void 0,
              t = void 0;
          return 1 === arguments.length ? (e = null, t = arguments.length <= 0 ? void 0 : arguments[0]) : (e = arguments.length <= 0 ? void 0 : arguments[0], t = arguments.length <= 1 ? void 0 : arguments[1]), this._addPropInModel(e, t), this;
        }
      }, {
        key: "calculatedProp",
        value: function value() {
          var e,
              t,
              r,
              n = void 0,
              i = void 0,
              o = void 0;
          return arguments.length > 2 ? (i = arguments.length <= 0 ? void 0 : arguments[0], n = arguments.length <= 1 ? void 0 : arguments[1], o = arguments.length <= 2 ? void 0 : arguments[2]) : (i = null, n = arguments.length <= 0 ? void 0 : arguments[0], o = arguments.length <= 1 ? void 0 : arguments[1]), t = o(y), (e = r = new _(t.fn)).addDependencies.apply(e, P(t.dependencies)), this._addPropInModel(i, function (e, t, r) {
            return t in e ? Object.defineProperty(e, t, {
              value: r,
              enumerable: !0,
              configurable: !0,
              writable: !0
            }) : e[t] = r, e;
          }({}, n, r)), this;
        }
      }, {
        key: "_addPropInModel",
        value: function value(e, t) {
          return this._graph.createNodesFrom(t, e), this;
        }
      }, {
        key: "on",
        value: function value(e, t, r) {
          var n,
              i = e instanceof Array ? e : [e],
              o = this._graph.createElectricNodeOf(i, {
            type: "CurrFrame",
            fn: t
          });

          r && (n = this._graph.stopPropagation().setPropagationOverride("nextFrame")).resetNodeValue.apply(n, P(e));
          return o;
        }
      }, {
        key: "next",
        value: function value(e, t, r) {
          var n,
              i = e instanceof Array ? e : [e],
              o = this._graph.createElectricNodeOf(i, {
            type: "NextFrame",
            fn: t
          });

          r && (n = this._graph.stopPropagation().setPropagationOverride("currentFrame")).resetNodeValue.apply(n, P(e));
          return o;
        }
      }, {
        key: "lock",
        value: function value() {
          return this._lockFlag = !0, this._reqQ.length = 0, this;
        }
      }, {
        key: "unlock",
        value: function value() {
          return this._lockFlag = !1, this.setProp.apply(this, P(this._reqQ)), this._reqQ.length = 0, this;
        }
      }, {
        key: "prop",
        value: function value() {
          var e,
              t = void 0,
              r = void 0;

          switch (e = arguments.length) {
            case 1:
              t = arguments.length <= 0 ? void 0 : arguments[0];
              break;

            case 2:
              t = arguments.length <= 0 ? void 0 : arguments[0], r = arguments.length <= 1 ? void 0 : arguments[1];
              break;

            default:
              return this;
          }

          return 2 === e ? (this._lockFlag ? this._reqQ.push([t, r]) : this.setProp([t, r]), this) : this._graph.getNodeValue(t);
        }
      }, {
        key: "setProp",
        value: function value() {
          for (var e, t = this, r = arguments.length, n = Array(r), i = 0; i < r; i++) {
            n[i] = arguments[i];
          }

          return 0 === n.length ? this : ((e = this._graph).update.apply(e, P(n.map(function (e) {
            return [t._graph.getNodeFromQualifiedName(e[0]), e[1]];
          }))), this);
        }
      }, {
        key: "graph",
        value: function value() {
          return this._graph;
        }
      }, {
        key: "serialize",
        value: function value() {
          return this._graph.root.seed;
        }
      }], [{
        key: "create",
        value: function value(t) {
          return new e()._addPropInModel(null, t);
        }
      }]), e;
    }();

    t.default = j;
  }]);
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../../node_modules/webpack/buildin/module.js */ "./node_modules/webpack/buildin/module.js")(module)))

/***/ }),

/***/ "./packages/muze-utils/src/DataSystem/data-object.js":
/*!***********************************************************!*\
  !*** ./packages/muze-utils/src/DataSystem/data-object.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index */ "./packages/muze-utils/src/index.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }


/**
 * Represents the base class that all objects that form
 * the data for a selection must inherit from.
 *
 * @class DataObject
 */

var DataObject =
/*#__PURE__*/
function () {
  /**
   * Creates an instance of DataObject.
   * @memberof DataObject
   */
  function DataObject() {
    _classCallCheck(this, DataObject);

    this._id = Object(_index__WEBPACK_IMPORTED_MODULE_0__["getUniqueId"])();
  }
  /**
   * Returns the id.
   *
   * @readonly
   * @memberof DataObject
   */


  _createClass(DataObject, [{
    key: "attr",

    /**
     * Sets the value corresponding to supplied key.
     *
     * @param {string} key The property name.
     * @param {any} value Value associated with prop.
     * @memberof DataObject
     */
    value: function attr(key, value) {
      this[key] = value;
    }
    /**
     * Clean up code to be executed by each object.
     *
     * @override
     * @memberof DataObject
     */

  }, {
    key: "remove",
    value: function remove() {// cleanup
    }
  }, {
    key: "id",
    get: function get() {
      return this._id;
    }
  }]);

  return DataObject;
}();

/* harmony default export */ __webpack_exports__["default"] = (DataObject);

/***/ }),

/***/ "./packages/muze-utils/src/DataSystem/dataSelect.js":
/*!**********************************************************!*\
  !*** ./packages/muze-utils/src/DataSystem/dataSelect.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return dataSelect; });
/* harmony import */ var _selection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./selection */ "./packages/muze-utils/src/DataSystem/selection.js");

/**
 * This function applies a selection operation on a data array.
 *
 * @export
 * @param {Array} [data=[]] The data array to be observed.
 * @return {Selection} Instance of a selection.
 */

function dataSelect() {
  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  return new _selection__WEBPACK_IMPORTED_MODULE_0__["default"](data);
}

/***/ }),

/***/ "./packages/muze-utils/src/DataSystem/index.js":
/*!*****************************************************!*\
  !*** ./packages/muze-utils/src/DataSystem/index.js ***!
  \*****************************************************/
/*! exports provided: dataSelect, DataObject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _dataSelect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dataSelect */ "./packages/muze-utils/src/DataSystem/dataSelect.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "dataSelect", function() { return _dataSelect__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _data_object__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data-object */ "./packages/muze-utils/src/DataSystem/data-object.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DataObject", function() { return _data_object__WEBPACK_IMPORTED_MODULE_1__["default"]; });





/***/ }),

/***/ "./packages/muze-utils/src/DataSystem/selection.js":
/*!*********************************************************!*\
  !*** ./packages/muze-utils/src/DataSystem/selection.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

/**
 * This class represents a selection applied on a data array.
 *
 * @class Selection
 */
var Selection =
/*#__PURE__*/
function () {
  /**
   * Creates an instance of Selection.
   * @param {Array<DataObject>} data Array of DataObjects.
   * @memberof Selection
   */
  function Selection() {
    _classCallCheck(this, Selection);

    this._data = []; // // map of id to data

    this._idMap = {};
    this._dataMap = {};
    this._mode = ''; // data.forEach((item, idx) => {
    //     const index = item.id || idx;
    //     this._idMap[index] = item;
    // });
    // // array to store data in enter phase

    this._enterdata = []; // // array to store data in exit phase

    this._exitdata = [];
  }
  /**
   *  Gets the object bound to a class
   *
   * @return {Object} current data set bound to the class
   * @memberof Selection
   */


  _createClass(Selection, [{
    key: "getObjects",
    value: function getObjects() {
      return Object.values(this._idMap);
    }
    /**
     * This method is used to supply seed data to a selection.
     *
     * @param {Array} newData Seed data to create the enter selection.
     * @param {Functon | undefined } idGetter This function is used to uniqely identify a data entry.
     * @return {Selection} Modified selection.
     * @memberof Selection
     */

  }, {
    key: "data",
    value: function data(newData, idGetter) {
      var _this = this;

      if (idGetter) {
        this._data = [];
        this._idGetter = idGetter;
        var tempMap = {};
        newData.forEach(function () {
          var index = idGetter.apply(void 0, arguments);
          tempMap[index] = arguments.length <= 0 ? undefined : arguments[0];
        }); // check if any data items have been removed

        var purgedIds = [];
        Object.keys(this._idMap).forEach(function (id) {
          if (!tempMap[id]) {
            purgedIds.push(id);
          }
        });
        Object.keys(tempMap).forEach(function (id) {
          if (!_this._idMap[id]) {
            _this._enterdata.push(tempMap[id]);
          } else {
            _this._idMap[id] = tempMap[id];

            _this._data.push(tempMap[id]);
          }
        }); // move the purged items to exit selection

        purgedIds.forEach(function (id) {
          var purged = _this._idMap[id];

          _this._exitdata.push(purged); // this._data = this._data.slice(id, 1);


          delete _this._idMap[id];
        }); // this._data = this._data.slice(temp, this._data.length);

        return this;
      } // no id getter supplied so use indices


      if (newData.length > this._data.length) {
        var startIdx = this._data.length;

        for (var i = startIdx; i < newData.length; i += 1) {
          this._enterdata.push(newData[i]);
        }
      } else {
        // push to exit selection
        var temp = newData.length;

        for (var _i = temp; _i < this._data.length; _i += 1) {
          var purged = this._data[_i];
          delete this._idMap[purged.id];

          this._exitdata.push(purged);
        }

        this._data = this._data.slice(temp, this._data.length);
      }

      return this;
    }
    /**
     * Applies the supplied callback to each data element
     * and returns a new selection.
     *
     * @param {Function} callback Callback to execute on each item.
     * @return {Selection} New selection with data created using callback.
     * @memberof EnterSelection
     */

  }, {
    key: "append",
    value: function append(callback) {
      var _this2 = this;

      this["_".concat(this._mode, "data")].forEach(function () {
        var data = arguments.length <= 0 ? undefined : arguments[0];
        var id = _this2._idGetter ? _this2._idGetter.apply(_this2, arguments) : data.id || (arguments.length <= 1 ? undefined : arguments[1]);
        _this2._idMap[id] = callback.apply(void 0, arguments);
        _this2._dataMap[id] = data;
      });
      this._mode = '';
      return this;
    }
    /**
     * This method returns an enter selection that
     * allows or update operations.
     *
     * @return {EnterSelection} Instance of enter selection.
     * @memberof Selection
     */

  }, {
    key: "enter",
    value: function enter() {
      this._mode = 'enter';
      return this; // return new EnterSelection(this._enterdata, this._idMap, this._idGetter);
    }
    /**
     * This method is used to set key value pairs
     * on data objects.
     *
     * @param {string} key Name of property.
     * @param {any} value Value of property.
     * @return {Selection} Modified selection.
     * @memberof Selection
     */

  }, {
    key: "attr",
    value: function attr(key, value) {
      this._data.forEach(function (item) {
        return item.attr(key, value);
      });

      return this;
    }
    /**
     * This method merges the data of one selection with another.
     *
     * @param {Selection} selection Instance of selection.
     * @return {Selection} Modified selection.
     * @memberof Selection
     */

  }, {
    key: "merge",
    value: function merge(selection) {
      var _this3 = this;

      selection._data.forEach(function () {
        for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
          params[_key] = arguments[_key];
        }

        var id = _this3._idGetter ? _this3._idGetter.apply(_this3, params) : params[0].id || params[1];
        _this3._idMap[id] = params[0];

        _this3._data.push(params[0]);
      }); // reset enter selection


      this._enterdata = [];
      return this;
    }
    /**
     * Returns a selection with exit data.
     *
     * @return {Selection} Instance of selection.
     * @memberof Selection
     */

  }, {
    key: "exit",
    value: function exit() {
      this._mode = 'exit'; // const exitdata = this._exitdata;
      // const exitSelection = new Selection(exitdata);
      // this._exitdata = [];

      return this;
    }
  }, {
    key: "each",
    value: function each(fn) {
      var _this4 = this;

      Object.keys(this._idMap).forEach(function (e, i) {
        fn(_this4._idMap[e], _this4._dataMap[e], i);
      });
      return this;
    }
  }, {
    key: "map",
    value: function map(fn) {
      var _this5 = this;

      Object.keys(this._idMap).forEach(function () {
        for (var _len2 = arguments.length, params = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
          params[_key2] = arguments[_key2];
        }

        var key = params[0];
        _this5._idMap[key] = fn.apply(void 0, [_this5._idMap[key]].concat(params, [_this5._dataMap[key]]));
      });
      return this;
    }
    /**
     * Executes the cleanup operation associated with data objets.
     *
     * @memberof Selection
     */

  }, {
    key: "remove",
    value: function remove() {
      // do cleanup on DDO's
      var data = this["_".concat(this._mode, "data")];
      data.forEach(function (item) {
        return item.remove();
      });

      if (this._mode === '') {
        this.each(function (e) {
          return e.remove();
        });
      }

      this["_".concat(this._mode, "data")] = [];
      this._mode = '';
    }
  }]);

  return Selection;
}();

/* harmony default export */ __webpack_exports__["default"] = (Selection);

/***/ }),

/***/ "./packages/muze-utils/src/color-schemes.js":
/*!**************************************************!*\
  !*** ./packages/muze-utils/src/color-schemes.js ***!
  \**************************************************/
/*! exports provided: schemeDark2, schemePaired, schemeAccent, schemePastel1, schemePastel2, schemeSet1, schemeSet2, schemeSet3, schemeBlues, schemeBrBG, schemePRGn, schemePiYG, interpolateBrBG, interpolatePRGn, interpolatePiYG, interpolatePuOr, interpolateRdBu, interpolateRdGy, interpolateRdYlBu, interpolateRdYlGn, interpolateSpectral, interpolateBlues, interpolateGreens, interpolateGreys, interpolateOranges, interpolatePurples, interpolateReds, interpolateViridis, interpolateInferno, interpolateMagma, interpolatePlasma, interpolateWarm, interpolateCool, interpolateCubehelixDefault, interpolateBuGn, interpolateBuPu, interpolateGnBu, interpolateOrRd, interpolatePuBuGn, interpolatePuBu, interpolatePuRd, interpolateRdPu, interpolateYlGnBu, interpolateYlGn, interpolateYlOrBr, interpolateYlOrRd, interpolateRainbow */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-scale-chromatic */ "./packages/muze-utils/node_modules/d3-scale-chromatic/src/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeDark2", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["schemeDark2"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePaired", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["schemePaired"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeAccent", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["schemeAccent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePastel1", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["schemePastel1"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePastel2", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["schemePastel2"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeSet1", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["schemeSet1"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeSet2", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["schemeSet2"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeSet3", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["schemeSet3"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeBlues", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["schemeBlues"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeBrBG", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["schemeBrBG"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePRGn", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["schemePRGn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemePiYG", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["schemePiYG"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateBrBG", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateBrBG"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePRGn", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolatePRGn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePiYG", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolatePiYG"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePuOr", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolatePuOr"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRdBu", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateRdBu"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRdGy", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateRdGy"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRdYlBu", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateRdYlBu"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRdYlGn", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateRdYlGn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateSpectral", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateSpectral"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateBlues", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateBlues"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateGreens", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateGreens"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateGreys", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateGreys"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateOranges", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateOranges"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePurples", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolatePurples"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateReds", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateReds"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateViridis", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateViridis"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateInferno", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateInferno"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateMagma", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateMagma"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePlasma", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolatePlasma"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateWarm", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateWarm"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateCool", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateCool"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateCubehelixDefault", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateCubehelixDefault"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateBuGn", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateBuGn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateBuPu", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateBuPu"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateGnBu", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateGnBu"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateOrRd", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateOrRd"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePuBuGn", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolatePuBuGn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePuBu", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolatePuBu"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolatePuRd", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolatePuRd"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRdPu", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateRdPu"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateYlGnBu", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateYlGnBu"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateYlGn", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateYlGn"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateYlOrBr", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateYlOrBr"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateYlOrRd", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateYlOrRd"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateRainbow", function() { return d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__["interpolateRainbow"]; });



/***/ }),

/***/ "./packages/muze-utils/src/common-utils.js":
/*!*************************************************!*\
  !*** ./packages/muze-utils/src/common-utils.js ***!
  \*************************************************/
/*! exports provided: getValueParser, require, Scales, Symbols, pathInterpolators, stack, nestCollection, getSymbol, transformColors, detectColor, hexToHsv, hslToRgb, rgbToHsv, hsvToRgb, concatModels, toArray, angleToRadian, escapeHTML, generateGetterSetters, getArraySum, interpolator, piecewiseInterpolator, getDataModelFromIdentifiers, getDataModelFromRange, colorInterpolator, numberInterpolator, ERROR_MSG, reqAnimFrame, nextAnimFrame, filterPropagationModel, transposeArray, cancelAnimFrame, getMax, getMin, getDomainFromData, getUniqueId, mergeRecursive, unionDomain, symbolFns, easeFns, clone, isEqual, interpolateArray, getMinPoint, defaultValue, getMaxPoint, getClosestIndexOf, Voronoi, checkExistence, sanitizeIP, getMinDiff, capitalizeFirst, getWindow, getQualifiedClassName, Store, getDependencyOrder, objectIterator, intSanitizer, transactor, enableChainedTransaction, isHTMLElem, isSimpleObject, nextFrame, registerListeners, replaceCSSPrefix, getObjProp, extendsClass, assembleModelFromIdentifiers, isValidValue, hslInterpolator, getSmallestDiff, getNearestValue, retrieveNearestGroupByReducers, createSelection, formatTemporal, temporalFields */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getValueParser", function() { return getValueParser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "require", function() { return require; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Scales", function() { return Scales; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Symbols", function() { return Symbols; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pathInterpolators", function() { return pathInterpolators; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stack", function() { return stack; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nestCollection", function() { return nestCollection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSymbol", function() { return getSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformColors", function() { return transformColors; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "detectColor", function() { return detectColor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hexToHsv", function() { return hexToHsv; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hslToRgb", function() { return hslToRgb; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rgbToHsv", function() { return rgbToHsv; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hsvToRgb", function() { return hsvToRgb; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "concatModels", function() { return concatModels; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toArray", function() { return toArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "angleToRadian", function() { return angleToRadian; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "escapeHTML", function() { return escapeHTML; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateGetterSetters", function() { return generateGetterSetters; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getArraySum", function() { return getArraySum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "interpolator", function() { return interpolator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "piecewiseInterpolator", function() { return piecewiseInterpolator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDataModelFromIdentifiers", function() { return getDataModelFromIdentifiers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDataModelFromRange", function() { return getDataModelFromRange; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "colorInterpolator", function() { return colorInterpolator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "numberInterpolator", function() { return numberInterpolator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ERROR_MSG", function() { return ERROR_MSG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reqAnimFrame", function() { return reqAnimFrame; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nextAnimFrame", function() { return nextAnimFrame; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "filterPropagationModel", function() { return filterPropagationModel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transposeArray", function() { return transposeArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cancelAnimFrame", function() { return cancelAnimFrame; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMax", function() { return getMax; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMin", function() { return getMin; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDomainFromData", function() { return getDomainFromData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUniqueId", function() { return getUniqueId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeRecursive", function() { return mergeRecursive; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unionDomain", function() { return unionDomain; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "symbolFns", function() { return symbolFns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "easeFns", function() { return easeFns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isEqual", function() { return isEqual; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "interpolateArray", function() { return interpolateArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMinPoint", function() { return getMinPoint; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultValue", function() { return defaultValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMaxPoint", function() { return getMaxPoint; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getClosestIndexOf", function() { return getClosestIndexOf; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Voronoi", function() { return Voronoi; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkExistence", function() { return checkExistence; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sanitizeIP", function() { return sanitizeIP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMinDiff", function() { return getMinDiff; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "capitalizeFirst", function() { return capitalizeFirst; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getWindow", function() { return getWindow; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getQualifiedClassName", function() { return getQualifiedClassName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Store", function() { return Store; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDependencyOrder", function() { return getDependencyOrder; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "objectIterator", function() { return objectIterator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "intSanitizer", function() { return intSanitizer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transactor", function() { return transactor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "enableChainedTransaction", function() { return enableChainedTransaction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isHTMLElem", function() { return isHTMLElem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isSimpleObject", function() { return isSimpleObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nextFrame", function() { return nextFrame; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerListeners", function() { return registerListeners; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "replaceCSSPrefix", function() { return replaceCSSPrefix; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getObjProp", function() { return getObjProp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extendsClass", function() { return extendsClass; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "assembleModelFromIdentifiers", function() { return assembleModelFromIdentifiers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isValidValue", function() { return isValidValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hslInterpolator", function() { return hslInterpolator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSmallestDiff", function() { return getSmallestDiff; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNearestValue", function() { return getNearestValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "retrieveNearestGroupByReducers", function() { return retrieveNearestGroupByReducers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createSelection", function() { return createSelection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatTemporal", function() { return formatTemporal; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "temporalFields", function() { return temporalFields; });
/* harmony import */ var datamodel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! datamodel */ "./packages/muze-utils/node_modules/datamodel/dist/datamodel.js");
/* harmony import */ var datamodel__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(datamodel__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var d3_axis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-axis */ "./packages/muze-utils/node_modules/d3-axis/index.js");
/* harmony import */ var d3_shape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! d3-shape */ "./packages/muze-utils/node_modules/d3-shape/src/index.js");
/* harmony import */ var d3_scale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! d3-scale */ "./packages/muze-utils/node_modules/d3-scale/index.js");
/* harmony import */ var d3_collection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! d3-collection */ "./packages/muze-utils/node_modules/d3-collection/index.js");
/* harmony import */ var d3_interpolate__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! d3-interpolate */ "./packages/muze-utils/node_modules/d3-interpolate/src/index.js");
/* harmony import */ var d3_ease__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! d3-ease */ "./packages/muze-utils/node_modules/d3-ease/src/index.js");
/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! d3-color */ "./packages/muze-utils/node_modules/d3-color/src/index.js");
/* harmony import */ var d3_voronoi__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! d3-voronoi */ "./packages/muze-utils/node_modules/d3-voronoi/src/index.js");
/* harmony import */ var hyperdis__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! hyperdis */ "./packages/muze-utils/node_modules/hyperdis/dist/hyperdis.js");
/* harmony import */ var hyperdis__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(hyperdis__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _DataSystem__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./DataSystem */ "./packages/muze-utils/src/DataSystem/index.js");
/* harmony import */ var _enums_stack_config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./enums/stack-config */ "./packages/muze-utils/src/enums/stack-config.js");
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./enums */ "./packages/muze-utils/src/enums/index.js");
var _stackOrders, _stackOffsets;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

/* global window, requestAnimationFrame, cancelAnimationFrame */













var InvalidAwareTypes = datamodel__WEBPACK_IMPORTED_MODULE_0___default.a.InvalidAwareTypes;
var HTMLElement = window.HTMLElement;

var isSimpleObject = function isSimpleObject(obj) {
  var token;

  if (_typeof(obj) === 'object') {
    if (obj === null) {
      return false;
    }

    token = Object.prototype.toString.call(obj);

    if (token === '[object Object]') {
      return (obj.constructor.toString().match(/^function (.*)\(\)/m) || [])[1] === 'Object';
    }
  }

  return false;
};
/**
 * Returns unique id
 * @return {string} Unique id string
 */


var getUniqueId = function getUniqueId() {
  return "id-".concat(new Date().getTime()).concat(Math.round(Math.random() * 10000));
};
/**
 * Deep copies an object and returns a new object.
 * @param {Object} o Object to clone
 * @return {Object} New Object.
 */


var clone = function clone(o) {
  var output = {};
  var v;

  for (var key in o) {
    if ({}.hasOwnProperty.call(o, key)) {
      v = o[key];
      output[key] = isSimpleObject(v) ? clone(v) : v;
    }
  }

  return output;
};
/**
* Checks the existence of keys in an object
* @param {Array} keys Set of keys which are to be checked
* @param {Object} obj whose keys are checked from the set of keys provided
* @return {Object} Error if the keys are absent, or the object itself
*/


var checkExistence = function checkExistence(keys, obj) {
  var nonExistentKeys = [];
  keys.forEach(function (key) {
    if (key in obj) {
      return;
    }

    nonExistentKeys.push(key);
  });
  return nonExistentKeys;
};

var sanitizeIP = {
  typeObj: function typeObj(keys, obj) {
    if (_typeof(obj) !== 'object') {
      return Error('Argument type object expected');
    }

    var nonExistentKeys = checkExistence(keys, obj);

    if (nonExistentKeys.length) {
      return Error("Missing keys from parameter ".concat(nonExistentKeys.join(', ')));
    }

    return obj;
  },

  /* istanbul ignore next */
  htmlElem: function htmlElem(elem) {
    if (!(elem instanceof HTMLElement)) {
      return Error('HTMLElement required');
    }

    return elem;
  }
};
/**
 * Gets the maximum value from an array of objects for a given property name
 * @param  {Array.<Object>} data   Array of objects
 * @param  {string} field Field name
 * @return {number} Maximum value
 */

var getMax = function getMax(data, field) {
  return Math.max.apply(Math, _toConsumableArray(data.map(function (d) {
    return d[field];
  })));
};
/**
 * Gets the minimum value from an array of objects for a given property name
 * @param  {Array.<Object>} data   Array of objects
 * @param  {string} field Field name
 * @return {number} Minimum value
 */


var getMin = function getMin(data, field) {
  return Math.min.apply(Math, _toConsumableArray(data.map(function (d) {
    return d[field];
  })));
};
/**
 * Gets the domain from the data based on the field name and type of field
 * @param  {Array.<Object> | Array.<Array>} data       Data Array
 * @param  {Array.<string>} fields    Array of fields from where the domain will be calculated
 * @param {string} fieldType Type of field - nominal, quantitiative, temporal.
 * @return {Array} Usually contains a min and max value if field is quantitative or
 * an array of values if field type is nominal or ordinal
 */


var getDomainFromData = function getDomainFromData(data, fields, fieldType) {
  var _ref;

  var domain;
  var domArr = [];
  data = data[0] instanceof Array ? data : [data];

  switch (fieldType) {
    case datamodel__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].CATEGORICAL:
      domain = (_ref = []).concat.apply(_ref, _toConsumableArray(data.map(function (arr) {
        return arr.map(function (d) {
          return d[fields[0]];
        }).filter(function (d) {
          return d !== undefined;
        });
      })));
      break;

    default:
      var _loop = function _loop(i, len) {
        var arr = data[i];

        var _fields = _slicedToArray(fields, 2),
            field0 = _fields[0],
            field1 = _fields[1];

        var arr0 = arr.filter(function (d) {
          return !isNaN(d[field0]);
        });
        var arr1 = arr.filter(function (d) {
          return !isNaN(d[field1]);
        });

        if (arr0.length || arr1.length) {
          var firstMin = getMin(arr0, field0);
          var secondMin = getMin(arr1, field1);
          var firstMax = getMax(arr0, field0);
          var secondMax = getMax(arr1, field1);
          domArr.push([Math.min(firstMin, secondMin), Math.max(firstMax, secondMax)]);
        }
      };

      for (var i = 0, len = data.length; i < len; i++) {
        _loop(i, len);
      }

      domain = domArr.length ? [Math.min.apply(Math, _toConsumableArray(domArr.map(function (d) {
        return d[0];
      }))), Math.max.apply(Math, _toConsumableArray(domArr.map(function (d) {
        return d[1];
      })))] : [];
      break;
  }

  return domain;
};
/**
 * Union Domain values
 * @param {Array.<Array>} domains Array of domain values
 * @param {string} fieldType type of field - dimension,measure or datetime.
 * @return {Array} Unioned domain of all domain values.
 */


var unionDomain = function unionDomain(domains, fieldType) {
  var domain = [];
  domains = domains.filter(function (dom) {
    return dom && dom.length;
  });

  if (domains.length) {
    if (fieldType === datamodel__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].CATEGORICAL) {
      var _ref2;

      domain = (_ref2 = []).concat.apply(_ref2, _toConsumableArray(domains));
    } else {
      domain = [Math.min.apply(Math, _toConsumableArray(domains.map(function (d) {
        return d[0];
      }))), Math.max.apply(Math, _toConsumableArray(domains.map(function (d) {
        return d[1];
      })))];
    }
  }

  return domain;
};

var symbolFns = {
  circle: d3_shape__WEBPACK_IMPORTED_MODULE_2__["symbolCircle"],
  cross: d3_shape__WEBPACK_IMPORTED_MODULE_2__["symbolCross"],
  diamond: d3_shape__WEBPACK_IMPORTED_MODULE_2__["symbolDiamond"],
  square: d3_shape__WEBPACK_IMPORTED_MODULE_2__["symbolSquare"],
  star: d3_shape__WEBPACK_IMPORTED_MODULE_2__["symbolStar"],
  wye: d3_shape__WEBPACK_IMPORTED_MODULE_2__["symbolWye"],
  triangle: d3_shape__WEBPACK_IMPORTED_MODULE_2__["symbolTriangle"]
};
var easeFns = {
  cubic: d3_ease__WEBPACK_IMPORTED_MODULE_6__["easeCubic"],
  bounce: d3_ease__WEBPACK_IMPORTED_MODULE_6__["easeBounce"],
  linear: d3_ease__WEBPACK_IMPORTED_MODULE_6__["easeLinear"],
  elastic: d3_ease__WEBPACK_IMPORTED_MODULE_6__["easeElastic"],
  back: d3_ease__WEBPACK_IMPORTED_MODULE_6__["easeBack"],
  poly: d3_ease__WEBPACK_IMPORTED_MODULE_6__["easePoly"],
  circle: d3_ease__WEBPACK_IMPORTED_MODULE_6__["easeCircle"]
};
/**
 * Returns the maximum or minimum points of a compare value from an array of objects.
 * @param {Array} points Array of objects
 * @param {string} compareValue Key in the object on which the comparing will be done.
 * @param {string} minOrMax minimum or maximum.
 * @return {Object} Minimum or maximum point.
 */

var getExtremePoint = function getExtremePoint(points, compareValue, minOrMax) {
  var extremePoint;
  var point;
  var len = points.length;
  var minOrMaxVal = minOrMax === 'max' ? -Infinity : Infinity;
  var val;

  for (var i = 0; i < len; i++) {
    point = points[i];
    val = point[compareValue];

    if (minOrMax === 'min' ? val < minOrMaxVal : val > minOrMaxVal) {
      minOrMaxVal = val;
      extremePoint = point;
    }
  }

  return extremePoint;
};
/**
 * Returns the minimum point of a compare value from an array of objects.
 * @param {Array} points Array of objects
 * @param {string} compareValue Key in the object on which the comparing will be done.
 * @return {Object} Minimum point.
 */


var getMinPoint = function getMinPoint(points, compareValue) {
  return getExtremePoint(points, compareValue, 'min');
};
/**
 * Returns the maximum point of a compare value from an array of objects.
 * @param {Array} points Array of objects
 * @param {string} compareValue Key in the object on which the comparing will be done.
 * @return {Object} Maximum point.
 */


var getMaxPoint = function getMaxPoint(points, compareValue) {
  return getExtremePoint(points, compareValue, 'max');
};
/**
 * Gets the index of the closest value of the given value from the array.
 * @param {Array} arr Array of values
 * @param {number} value Value from which the nearest value will be calculated.
 * @param {string} side side property.
 * @return {number} index of the closest value
 */

/* istanbul ignore next */


var getClosestIndexOf = function getClosestIndexOf(arr, value, side) {
  var low = 0;
  var arrLen = arr.length;
  var high = arrLen - 1;
  var mid;
  var d1;
  var d2;

  while (low < high) {
    mid = Math.floor((low + high) / 2);
    d1 = Math.abs(arr[mid] - value);
    d2 = Math.abs(arr[mid + 1] - value);

    if (d2 <= d1) {
      low = mid + 1;
    } else {
      high = mid;
    }
  }

  if (!side) {
    return high;
  }

  var highVal = arr[high];

  if (highVal === value) {
    return high;
  } else if (highVal > value) {
    if (high === 0) {
      return high;
    }

    return side === 'left' ? high - 1 : high;
  }

  if (high === arr.length - 1) {
    return high;
  }

  return side === 'left' ? high : high + 1;
};

var getNearestValue = function getNearestValue(data, key) {
  var filterData = data.filter(function (d) {
    return typeof d === 'number';
  });
  return filterData[getClosestIndexOf(filterData, key)];
};
/**
 * Returns the browser window object
 * @return {Window} Window object
*/


var getWindow = function getWindow() {
  return window;
};
/**
 * Returns the browser window object
 * @return {Window} Window object
*/


var reqAnimFrame = function () {
  return requestAnimationFrame;
}();

var cancelAnimFrame = function () {
  return cancelAnimationFrame;
}();
/**
 * Capitalizes the first letter of the word
 * @param {string} text word
 * @return {string} Capitalized word
 */


var capitalizeFirst = function capitalizeFirst(text) {
  text = text.toLowerCase();
  return text.replace(/\w\S*/g, function (txt) {
    return txt.charAt(0).toUpperCase() + txt.substr(1);
  });
};
/**
 *
 *
 * @param {*} arr
 */


var unique = function unique(arr) {
  return _toConsumableArray(new Set(arr));
};
/**
 * Gets the minimum difference between two consecutive numbers  in an array.
 * @param {Array} arr Array of numbers
 * @param {number} index index of the value
 * @return {number} minimum difference between values
 */

/* istanbul ignore next */


var getMinDiff = function getMinDiff(arr, index) {
  var diff;
  var uniqueVals;

  if (index !== undefined) {
    uniqueVals = unique(arr.map(function (d) {
      return d[index];
    }));
  } else {
    uniqueVals = unique(arr);
  }

  if (uniqueVals.length > 1) {
    diff = Math.abs(uniqueVals[1] - uniqueVals[0]);

    for (var i = 2, len = uniqueVals.length; i < len; i++) {
      diff = Math.min(diff, Math.abs(uniqueVals[i] - uniqueVals[i - 1]));
    }
  } else {
    diff = uniqueVals[0];
  }

  return diff;
};
/**
 * Returns the class name appended with a given id.
 * @param {string} cls class name
 * @param {string} id unique identifier
 * @param {string} prefix string needed to add before the classname
 * @return {string} qualified class name
 */

/* istanbul ignore next */


var getQualifiedClassName = function getQualifiedClassName(cls, id, prefix) {
  cls = cls.replace(/^\.*/, '');
  return ["".concat(prefix, "-").concat(cls), "".concat(prefix, "-").concat(cls, "-").concat(id)];
};
/**
 * This method is used to set the default value for variables
 * without sullying the code with conditional statements.
 *
 * @export
 * @param {any} param The parameter to test.
 * @param {any} value The default value to assign.
 * @return {any} The value.
 */

/* istanbul ignore next */


var defaultValue = function defaultValue(param, value) {
  if (typeof param === 'undefined' || _typeof(param) === 'object' && !param) {
    return value;
  }

  return param;
};
/**
 * DESCRIPTION TODO
 *
 * @export
 * @param {Object} graph graph whose dependency order has to be generated
 * @return {Object}
 */


var getDependencyOrder = function getDependencyOrder(graph) {
  var dependencyOrder = [];
  var visited = {};
  var keys = Object.keys(graph);
  /**
   * DESCRIPTION TODO
   *
   * @export
   * @param {Object} name
   * @return {Object}
   */

  var visit = function visit(name) {
    if (dependencyOrder.length === keys.length) {
      return true;
    }

    visited[name] = true;
    var edges = graph[name];

    for (var e = 0; e < edges.length; e++) {
      var dep = edges[e];

      if (!visited[dep]) {
        visit(dep);
      }
    }

    dependencyOrder.push(name);
    return false;
  };

  for (var i = 0; i < keys.length; i++) {
    if (visit(keys[i], i)) break;
  }

  return dependencyOrder;
};
/**
 * Iterates over the properties of an object and applies the function
 *
 * @param {any} obj object to be iterated upon
 * @param {any} fn  function to be applied on it
 */


var objectIterator = function objectIterator(obj, fn) {
  for (var key in obj) {
    if (Object.hasOwnProperty.call(obj, key)) {
      fn(key, obj);
    }
  }
};
/**
 * This class creates a d3 voronoi for retrieving the nearest neighbour of any point from a set of two
 * dimensional points
 * @class Voronoi
 */

/* istanbul ignore next */


var Voronoi =
/*#__PURE__*/
function () {
  /**
   * Initialize the voronoi with the data given.
   * @param {Array.<Object>} data Array of points.
   */
  function Voronoi() {
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

    _classCallCheck(this, Voronoi);

    this._voronoi = Object(d3_voronoi__WEBPACK_IMPORTED_MODULE_8__["voronoi"])().x(function (d) {
      return d.x;
    }).y(function (d) {
      return d.y;
    });
    this.data(data);
  }
  /**
   * Sets the data to voronoi
   * @param {Array.<Object>} data Array of objects.
   * @return {Voronoi} Instance of voronoi.
   */


  _createClass(Voronoi, [{
    key: "data",
    value: function data(_data) {
      if (_data) {
        this._voronoiFn = this._voronoi(_data);
      }

      return this;
    }
    /**
     * Finds the closest point to the x and y position given.
     * @param {number} x x value
     * @param {number} y y value
     * @param {number} radius search radius.
     * @return {Object} Details of the nearest point.
     */

  }, {
    key: "find",
    value: function find(x, y, radius) {
      return this._voronoiFn.find(x, y, radius);
    }
  }]);

  return Voronoi;
}();

var addListenerToNamespace = function addListenerToNamespace(namespaceInf, fn, context) {
  var key = namespaceInf.key;
  var namespace = namespaceInf.namespace;

  if (namespace) {
    !context._listeners[namespace] && (context._listeners[namespace] = []);

    if (!key) {
      key = Object.keys(context._listeners[namespace]).length;
    }

    context._listeners[namespace][key] = fn;
  } else {
    key = Object.keys(context._listeners).length;
    context._listeners[key] = fn;
  }
};
/**
 *
 *
 * @param {*} obj
 * @param {*} fields
 *
 */


var getObjProp = function getObjProp(obj) {
  if (obj === undefined || obj === null) {
    return obj;
  }

  var retObj = obj;

  for (var _len = arguments.length, fields = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    fields[_key - 1] = arguments[_key];
  }

  for (var i = 0, len = fields.length; i < len; i++) {
    retObj = retObj[fields[i]];

    if (retObj === undefined || retObj === null) {
      break;
    }
  }

  return retObj;
};
/**
 * Methods to handle changes to table configuration and reactivity are handled by this
 * class.
 */

/**
 *  Common store class
 *
 * @class Store
 */


var Store =
/*#__PURE__*/
function () {
  /**
   * Creates an instance of Store.
   * @param {Object} config The object to create the state store with.
   * @memberof Store
   */
  function Store(config) {
    _classCallCheck(this, Store);

    // create reactive model
    this.model = hyperdis__WEBPACK_IMPORTED_MODULE_9___default.a.create(config);
    this._listeners = {};
  }
  /**
   * This method returns a plain JSON object
   * with all the fields in the state store.
   *
   * @return {Object} Serialized representation of state store.
   * @memberof Store
   */


  _createClass(Store, [{
    key: "serialize",
    value: function serialize() {
      return this.model.serialize();
    }
    /**
     * This method is used to update the value of a property in the state store.
     *
     * @param {string} propName The name of the property.
     * @param {number} value The new value of the property.
     * @memberof Store
     */

  }, {
    key: "commit",
    value: function commit(propName, value) {
      // check if appropriate enum has been used
      this.model.prop(propName, value);
    }
    /**
     * This method is used to register a callbacl that will execute
     * when one or more properties change.
     *
     * @param {string | Array} propNames name of property or array of props.
     * @param {Function} callBack The callback to execute.
     * @memberof Store
     */

    /* istanbul ignore next */

  }, {
    key: "registerChangeListener",
    value: function registerChangeListener(propNames, callBack, instantCall) {
      var namespaceInf = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      var props = propNames;

      if (!Array.isArray(propNames)) {
        props = [propNames];
      }

      var fn = this.model.next(props, callBack, instantCall);
      addListenerToNamespace(namespaceInf, fn, this);
      return this;
    }
    /**
     * This method is used to register a callbacl that will execute
     * when one or more properties change.
     *
     * @param {string | Array} propNames name of property or array of props.
     * @param {Function} callBack The callback to execute.
     * @memberof Store
     */

    /* istanbul ignore next */

  }, {
    key: "registerImmediateListener",
    value: function registerImmediateListener(propNames, callBack, instantCall) {
      var namespaceInf = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      var props = propNames;

      if (!Array.isArray(propNames)) {
        props = [propNames];
      }

      var fn = this.model.on(props, callBack, instantCall);
      addListenerToNamespace(namespaceInf, fn, this);
      return this;
    }
    /**
     * This method is used to get the name of the property
     * from the state store.
     *
     * @param {string} propName The name of the field in state store.
     * @return {any} The value of the field.
     * @memberof Store
     */

  }, {
    key: "get",
    value: function get(propName) {
      return this.model.prop(propName);
    }
    /**
     * This method is used to register a computed property that is computed every time
     * the store value changes.
     *
     * @param {string} propName The name of the property to create.
     * @param {Function} callBack The function to execute when depemdent props change.
     * @memberof Store
     */

  }, {
    key: "computed",
    value: function computed(propName, callBack) {
      return this.model.calculatedProp(propName, callBack);
    }
  }, {
    key: "append",
    value: function append(propName, value) {
      this.model.append(propName, value);
      return this;
    }
  }, {
    key: "unsubscribeAll",
    value: function unsubscribeAll() {
      Object.values(this._listeners).forEach(function (fn) {
        return fn();
      });
      return this;
    }
  }, {
    key: "unsubscribe",
    value: function unsubscribe() {
      var namespaceInf = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var namespace = namespaceInf.namespace,
          key = namespaceInf.key;
      var listeners = this._listeners[namespace];

      if (key) {
        var fn = getObjProp(listeners, key);
        fn && fn();
      } else {
        Object.values(listeners).forEach(function (fn) {
          return fn();
        });
        this._listeners[namespace] = [];
      }

      return this;
    }
  }]);

  return Store;
}();
/**
 * Sanitize an input number / string mixed number. Currently dot in the no is not supported.
 *
 * @param {number | string} val pure number or string mixed number
 * @return {number | null}  Number if it can be extracted. Otherwise null
 */


var intSanitizer = function intSanitizer(val) {
  var arr = val.toString().match(/(\d+)(px)*/g);

  if (!arr) {
    // If only characters are passed
    return null;
  }

  return parseInt(arr[0], 10);
};
/**
 * Setter getter creator from config
 * Format
 *  PROPERTRY_NAME: {
 *      value: // default value of the property,
 *      meta: {
 *          typeCheck: // The setter value will be checked using this. If the value is function then the setter value
 *                     // is passed as args. (Optional)
 *          typeExpected: // The output of typecheck action will be tested against this. Truthy value will set the
 *                       // value to the setter
 *          sanitizaiton: // Need for sanitization before type is checked
 *      }
 *  }
 *
 * @param {Object} holder an empty object on which the getters and setters will be mounted
 * @param {Object} options options config based on which the getters and setters are determined.
 * @param {Hyperdis} model optional model to attach the property. If not sent new moel is created.
 * @return {Array}
 */


var transactor = function transactor(holder, options, model) {
  var namespaceInf = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
  var conf;
  var store = model && model instanceof hyperdis__WEBPACK_IMPORTED_MODULE_9___default.a ? model : hyperdis__WEBPACK_IMPORTED_MODULE_9___default.a.create({});
  var stateProps = {};

  for (var prop in options) {
    if ({}.hasOwnProperty.call(options, prop)) {
      conf = options[prop];
      var addAsMethod = conf.meta ? conf.meta.addAsMethod : true;
      var nameSpaceProp = void 0;
      var namespace = namespaceInf.namespace;

      if (namespace) {
        nameSpaceProp = "".concat(namespace, ".").concat(prop);
      } else {
        nameSpaceProp = prop;
      }

      if (!store.prop("".concat(nameSpaceProp))) {
        stateProps[prop] = conf.value;
      }

      if (addAsMethod !== false) {
        holder[prop] = function (context, meta, nsProp) {
          return function () {
            var val;
            var compareTo;

            for (var _len2 = arguments.length, params = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
              params[_key2] = arguments[_key2];
            }

            var paramsLen = params.length;
            var prevVal = store.prop(nsProp);

            if (paramsLen) {
              // If parameters are passed then it's a setter
              var spreadParams = meta && meta.spreadParams;
              val = params;
              var values = [];

              if (meta) {
                for (var i = 0; i < paramsLen; i++) {
                  val = params[i];
                  var sanitization = meta.sanitization && (spreadParams ? meta.sanitization[i] : meta.sanitization);
                  var typeCheck = meta.typeCheck && (spreadParams ? meta.typeCheck[i] : meta.typeCheck);

                  if (sanitization && typeof sanitization === 'function') {
                    // Sanitize if required
                    val = sanitization(val, prevVal, holder);
                  }

                  if (typeCheck) {
                    // Checking if a setter is valid
                    if (typeof typeCheck === 'function') {
                      var typeExpected = meta.typeExpected;

                      if (typeExpected && spreadParams) {
                        typeExpected = typeExpected[i];
                      }

                      if (typeExpected) {
                        compareTo = typeExpected;
                      } else {
                        compareTo = true;
                      }

                      if (typeCheck(val) === compareTo) {
                        values.push(val);
                      }
                    } else if (typeof typeCheck === 'string') {
                      if (typeCheck === 'constructor') {
                        var _typeExpected = spreadParams ? meta.typeExpected[i] : meta.typeExpected;

                        if (val && val.constructor.name === _typeExpected) {
                          values.push(val);
                        }
                      }
                    } else {
                      // context.prop(key, val);
                      values.push(val);
                    }
                  } else {
                    values.push(val);
                  }
                }

                var preset = meta.preset;
                var oldValues = context.prop(nsProp);
                preset && preset(values[0], holder);

                if (spreadParams) {
                  oldValues.forEach(function (value, i) {
                    if (values[i] === undefined) {
                      values[i] = value;
                    }
                  });
                }

                values.length && context.prop(nsProp, spreadParams ? values : values[0]);
              } else {
                context.prop(nsProp, spreadParams ? val : val[0]);
              }

              return holder;
            } // No parameters are passed hence its a getter


            return context.prop(nsProp);
          };
        }(store, conf.meta, nameSpaceProp);
      }
    }
  }

  if (namespaceInf.namespace === undefined) {
    store.append(stateProps);
  } else {
    var _namespace = namespaceInf.namespace;
    store.append(_namespace, stateProps);
  }

  return [holder, store];
};
/**
 *
 *
 * @param {*} context
 * @param {*} props
 */


var generateGetterSetters = function generateGetterSetters(context, props) {
  Object.entries(props).forEach(function (propInfo) {
    var prop = propInfo[0];
    var typeChecker = propInfo[1].typeChecker;
    var defVal = propInfo[1].defaultValue;
    var sanitization = propInfo[1].sanitization;
    var prototype = context.constructor.prototype;

    if (!Object.hasOwnProperty.call(prototype, prop)) {
      if (defVal) {
        context["_".concat(prop)] = defVal;
      }

      context[prop] = function () {
        if (arguments.length) {
          var value = arguments.length <= 0 ? undefined : arguments[0];

          if (sanitization) {
            value = sanitization(context, arguments.length <= 0 ? undefined : arguments[0]);
          }

          if (typeChecker && !typeChecker(value)) {
            return context["_".concat(prop)];
          }

          context["_".concat(prop)] = value;
          return context;
        }

        return context["_".concat(prop)];
      };
    }
  });
};
/**
 *
 *
 * @param {*} arr
 * @param {*} prop
 */


var getArraySum = function getArraySum(arr, prop) {
  return arr.reduce(function (total, elem) {
    total += prop ? elem[prop] : elem;
    return total;
  }, 0);
};
/**
 *
 *
 * @param {*} arr1
 * @param {*} arr2
 *
 */


var arraysEqual = function arraysEqual(arr1, arr2) {
  if (arr1.length !== arr2.length) {
    return false;
  }

  for (var i = arr1.length; i >= 0; i--) {
    if (arr1[i] !== arr2[i]) {
      return false;
    }
  }

  return true;
};
/* eslint valid-typeof:0 */

/**
 * Returns a validation function which can be used to validate variables against a type and value
 *
 * @param {any} type type of value that the object should have
 * @return {Object} validation function
 */


var isEqual = function isEqual(type) {
  return function (oldVal, newVal) {
    if (type === 'Array') {
      if (!oldVal) {
        return false;
      }

      return arraysEqual(oldVal, newVal);
    } else if (type === 'Object') {
      return Object.is(oldVal, newVal);
    }

    return oldVal === newVal;
  };
};
/**
 * Description @todo
 *
 * @param {any} transactionModel @todo
 * @param {any} transactionEndpoint @todo
 * @param {any} transactionItems @todo
 * @return {any} @todo
 */


var enableChainedTransaction = function enableChainedTransaction(transactionModel, transactionEndpoint, transactionItems) {
  return transactionItems.forEach(function (item) {
    return transactionModel.on(item, function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
          newVal = _ref4[1];

      return transactionEndpoint[item](newVal);
    });
  });
};
/**
 * Chceks if the element is istanceof HTMLElement
 *
 * @param {Object} elem any JS Object
 */


var isHTMLElem = function isHTMLElem(elem) {
  return elem instanceof HTMLElement;
};

var ERROR_MSG = {
  INTERFACE_IMPL: 'Method not implemented'
};
/**
 * Merges the sink object in the source by recursively iterating through the object properties
 * @param {Object} source Source Object
 * @param {Object} sink Sink Object
 * @return {Object} Merged object
 */

var mergeRecursive = function mergeRecursive(source, sink) {
  for (var prop in sink) {
    if (isSimpleObject(source[prop]) && isSimpleObject(sink[prop])) {
      mergeRecursive(source[prop], sink[prop]);
    } else if (sink[prop] instanceof Object && sink[prop].constructor === Object) {
      source[prop] = {};
      mergeRecursive(source[prop], sink[prop]);
    } else {
      source[prop] = sink[prop];
    }
  }

  return source;
};
/**
 * Creates a selection set from a data set with corresponding attributes
 *
 * @export
 * @param {Selection} sel contains previous selection
 * @param {Object} appendObj Object to be appended
 * @param {Array} data Data based on which the selection is entered/updated/removed
 * @param {Object} [attrs={}] Attributes to be set on the data
 * @return {Selection} Merged selection
 */


var createSelection = function createSelection(sel, appendObj, data, idFn) {
  var selection = sel || Object(_DataSystem__WEBPACK_IMPORTED_MODULE_10__["dataSelect"])([]);
  selection = selection.data(data, idFn);
  var enter = selection.enter().append(appendObj);
  var mergedSelection = enter.merge(selection);
  selection.exit() && selection.exit().remove();
  return mergedSelection;
};

var interpolateArray = function interpolateArray(data, fitCount) {
  var linearInterpolate = function linearInterpolate(before, after, atPoint) {
    return before + (after - before) * atPoint;
  };

  var newData = [];
  var springFactor = (data.length - 1) / (fitCount - 1);
  newData[0] = data[0]; // for new allocation

  for (var i = 1; i < fitCount - 1; i++) {
    var tmp = i * springFactor;
    var before = Math.floor(tmp).toFixed();
    var after = Math.ceil(tmp).toFixed();
    var atPoint = tmp - before;
    newData[i] = linearInterpolate(data[before], data[after], atPoint);
  }

  newData[fitCount - 1] = data[data.length - 1]; // for new allocation

  return newData;
};
/**
 *
 *
 * @param {*} fn
 */


var nextFrame = function nextFrame(fn) {
  setTimeout(function () {
    fn();
  }, 0);
};
/**
 *
 *
 * @param {*} angle
 */


var angleToRadian = function angleToRadian(angle) {
  return angle * Math.PI / 180;
};
/**
 *
 *
 * @param {*} newName
 * @param {*} oldName
 */


var replaceCSSPrefix = function replaceCSSPrefix() {// @todo
};
/**
 * Gets the  interpolator function from d3 color
 *
 */


var interpolator = function interpolator() {
  return d3_interpolate__WEBPACK_IMPORTED_MODULE_5__["interpolate"];
};
/**
 * Gets the number interpolator from d3 color
 *
 */


var numberInterpolator = function numberInterpolator() {
  return d3_interpolate__WEBPACK_IMPORTED_MODULE_5__["interpolateNumber"];
};
/**
 * Gets the rgb interpolator from d3 color
 *
 */


var colorInterpolator = function colorInterpolator() {
  return d3_interpolate__WEBPACK_IMPORTED_MODULE_5__["interpolateRgb"];
};
/**
 * Gets the hsl interpolator from d3 color
 *
 */


var hslInterpolator = function hslInterpolator() {
  return d3_interpolate__WEBPACK_IMPORTED_MODULE_5__["interpolateHslLong"];
};

var transformColors = function transformColors() {
  return {
    color: d3_color__WEBPACK_IMPORTED_MODULE_7__["color"],
    rgb: d3_color__WEBPACK_IMPORTED_MODULE_7__["rgb"],
    hsl: d3_color__WEBPACK_IMPORTED_MODULE_7__["hsl"]
  };
};
/**
 * Gets the piecewise interpolator from d3 color
 *
 */


var piecewiseInterpolator = function piecewiseInterpolator() {
  return d3_interpolate__WEBPACK_IMPORTED_MODULE_5__["piecewise"];
};

function hue2rgb(p, q, t) {
  if (t < 0) t += 1;
  if (t > 1) t -= 1;
  if (t < 1 / 6) return p + (q - p) * 6 * t;
  if (t < 1 / 2) return q;
  if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
  return p;
}
/**
 * Converts an HSL color value to RGB. Conversion formula
 * adapted from http://en.wikipedia.org/wiki/HSL_color_space.
 * Assumes h, s, and l are contained in the set [0, 1] and
 * returns r, g, and b in the set [0, 255].
 *
 * @param   Number  h       The hue
 * @param   Number  s       The saturation
 * @param   Number  l       The lightness
 * @return  Array           The RGB representation
 */


var hslToRgb = function hslToRgb(h, s, l) {
  var a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;
  var r;
  var g;
  var b;

  if (s === 0) {
    r = g = b = l; // achromatic
  } else {
    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
    var p = 2 * l - q;
    r = hue2rgb(p, q, h + 1 / 3);
    g = hue2rgb(p, q, h);
    b = hue2rgb(p, q, h - 1 / 3);
  }

  return [r * 255, g * 255, b * 255, a];
};
/**
 * Converts an RGB color value to HSV. Conversion formula
 * adapted from http://en.wikipedia.org/wiki/HSV_color_space.
 * Assumes r, g, and b are contained in the set [0, 255] and
 * returns h, s, and v in the set [0, 1].
 *
 * @param   Number  r       The red color value
 * @param   Number  g       The green color value
 * @param   Number  b       The blue color value
 * @return  Array           The HSV representation
 */


var rgbToHsv = function rgbToHsv(r, g, b) {
  var a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;
  r = +r;
  g = +g;
  b = +b;
  a = +a;
  r /= 255;
  g /= 255;
  b /= 255;
  var max = Math.max(r, g, b);
  var min = Math.min(r, g, b);
  var h;
  var s;
  var l = (max + min) / 2;

  if (max === min) {
    h = s = 0; // achromatic
  } else {
    var d = max - min;
    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

    switch (max) {
      case r:
        h = (g - b) / d + (g < b ? 6 : 0);
        break;

      case g:
        h = (b - r) / d + 2;
        break;

      case b:
        h = (r - g) / d + 4;
        break;

      default:
        break;
    }

    h /= 6;
  }

  return [h, s, l, a];
};
/**
 * Converts an HSV color value to RGB. Conversion formula
 * adapted from http://en.wikipedia.org/wiki/HSV_color_space.
 * Assumes h, s, and v are contained in the set [0, 1] and
 * returns r, g, and b in the set [0, 255].
 *
 * @param   Number  h       The hue
 * @param   Number  s       The saturation
 * @param   Number  v       The value
 * @return  Array           The RGB representation
 */


var hsvToRgb = function hsvToRgb(h, s, v) {
  var a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;
  var r;
  var g;
  var b;
  var i = Math.floor(h * 6);
  var f = h * 6 - i;
  var p = v * (1 - s);
  var q = v * (1 - f * s);
  var t = v * (1 - (1 - f) * s);

  switch (i % 6) {
    case 0:
      r = v;
      g = t;
      b = p;
      break;

    case 1:
      r = q;
      g = v;
      b = p;
      break;

    case 2:
      r = p;
      g = v;
      b = t;
      break;

    case 3:
      r = p;
      g = q;
      b = v;
      break;

    case 4:
      r = t;
      g = p;
      b = v;
      break;

    case 5:
      r = v;
      g = p;
      b = q;
      break;

    default:
      break;
  }

  return [r * 255, g * 255, b * 255, a];
};

var hexToHsv = function hexToHsv(hex) {
  var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  var r = parseInt(result[1], 16);
  var g = parseInt(result[2], 16);
  var b = parseInt(result[3], 16);
  var a = result[4] ? parseInt(result[4], 16) : 1;
  return rgbToHsv(r, g, b, a);
};

var detectColor = function detectColor(col) {
  var matchRgb = /rgb\((\d{1,3}), (\d{1,3}), (\d{1,3})\)/;
  var matchHsl = /hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g; // Source :  https://gist.github.com/sethlopezme/d072b945969a3cc2cc11
  // eslint-disable-next-line

  var matchRgba = /rgba?\(((25[0-5]|2[0-4]\d|1\d{1,2}|\d\d?)\s*,\s*?){2}(25[0-5]|2[0-4]\d|1\d{1,2}|\d\d?)\s*,?\s*([01]\.?\d*?)?\)/; // eslint-disable-next-line

  var matchHsla = /^hsla\((0|360|35\d|3[0-4]\d|[12]\d\d|0?\d?\d),(0|100|\d{1,2})%,(0|100|\d{1,2})%,(0?\.\d|1(\.0)?)\)$/;
  var matchHex = /^#([0-9a-f]{3}){1,2}$/i;

  if (matchRgb.test(col) || matchRgba.test(col)) {
    return 'rgb';
  } else if (matchHsl.test(col) || matchHsla.test(col)) {
    return 'hsl';
  } else if (matchHex.test(col)) {
    return 'hex';
  }

  return col;
};
/**
 *
 *
 * @param {*} model
 * @param {*} propModel
 *
 */


var filterPropagationModel = function filterPropagationModel(model, propModel, measures) {
  var _propModel$getData = propModel.getData(),
      data = _propModel$getData.data,
      schema = _propModel$getData.schema;

  var filteredModel;

  if (schema.length) {
    var fieldMap = model.getFieldsConfig();
    filteredModel = model.select(function (fields) {
      var include = data.some(function (row) {
        return schema.every(function (propField, idx) {
          if (!measures && (!(propField.name in fieldMap) || fieldMap[propField.name].def.type === datamodel__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE)) {
            return true;
          }

          return row[idx] === fields[propField.name].valueOf();
        });
      });
      return include;
    }, {
      saveChild: false
    });
  } else {
    filteredModel = propModel;
  }

  return filteredModel;
};

var assembleModelFromIdentifiers = function assembleModelFromIdentifiers(model, identifiers) {
  var schema = [];
  var data;
  var fieldMap = model.getFieldsConfig();

  if (identifiers.length) {
    (function () {
      var fields = identifiers[0];
      var len = fields.length;

      for (var i = 0; i < len; i++) {
        var field = fields[i];
        var fieldObj = fieldMap[field] && Object.assign({}, fieldMap[field].def);

        if (fieldObj) {
          schema.push(Object.assign(fieldObj));
        }
      }

      data = [];
      var header = identifiers[0];

      var _loop2 = function _loop2(_i2) {
        var vals = identifiers[_i2];
        var temp = {};
        vals.forEach(function (fieldVal, cIdx) {
          temp[header[cIdx]] = fieldVal;
        });
        data.push(temp);
      };

      for (var _i2 = 1; _i2 < identifiers.length; _i2 += 1) {
        _loop2(_i2);
      }
    })();
  } else {
    data = [];
    schema = [];
  }

  return new model.constructor(data, schema);
};
/**
 *
 *
 * @param {*} dataModel
 * @param {*} criteria
 *
 */


var getDataModelFromRange = function getDataModelFromRange(dataModel, criteria, mode) {
  if (criteria === null) {
    return null;
  }

  var selFields = Object.keys(criteria);

  var selFn = function selFn(fields) {
    return selFields.every(function (field) {
      var val = fields[field].value;
      var range = criteria[field][0] instanceof Array ? criteria[field][0] : criteria[field];

      if (typeof range[0] === 'string') {
        return range.find(function (d) {
          return d === val;
        }) !== undefined;
      }

      return range ? val >= range[0] && val <= range[1] : true;
    });
  };

  return dataModel.select(selFn, {
    saveChild: false,
    mode: mode
  });
};
/**
 *
 *
 * @param {*} dataModel
 * @param {*} identifiers
 *
 */


var getDataModelFromIdentifiers = function getDataModelFromIdentifiers(dataModel, identifiers, mode) {
  var filteredDataModel;

  if (identifiers instanceof Array) {
    var fieldsConfig = dataModel.getFieldsConfig();
    var dataArr = identifiers.slice(1, identifiers.length);

    if (identifiers instanceof Function) {
      filteredDataModel = identifiers(dataModel, {}, false);
    } else if (identifiers instanceof Array && identifiers[0].length) {
      var filteredSchema = identifiers[0].filter(function (d) {
        return d in fieldsConfig;
      });
      filteredDataModel = dataModel.select(function (fields) {
        var include = true;
        filteredSchema.forEach(function (propField, idx) {
          var value = fields[propField].valueOf();
          var index = dataArr.findIndex(function (d) {
            return d[idx] === value;
          });
          include = include && index !== -1;
        });
        return include;
      }, {
        saveChild: false,
        mode: mode
      });
    }
  } else {
    filteredDataModel = getDataModelFromRange(dataModel, identifiers, mode);
  }

  return filteredDataModel;
};
/**
 *
 *
 * @param {*} context
 * @param {*} listenerMap
 */


var registerListeners = function registerListeners(context, listenerMap) {
  for (var _len3 = arguments.length, params = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {
    params[_key3 - 2] = arguments[_key3];
  }

  var propListenerMap = listenerMap.apply(void 0, [context].concat(params));

  for (var key in propListenerMap) {
    if ({}.hasOwnProperty.call(propListenerMap, key)) {
      var namespace = params[0];
      var ns = null;

      if (namespace) {
        ns = namespace.local;
      }

      var mapObj = propListenerMap[key];
      var propType = mapObj.type;
      var props = mapObj.props;
      var listenerFn = mapObj.listener;
      context.store()[propType](props, listenerFn, false, {
        namespace: ns
      });
    }
  }
};

var isValidValue = function isValidValue(value) {
  return !isNaN(value) && value !== -Infinity && value !== Infinity;
};
/**
 *
 *
 * @param {*} str
 *
 */


var escapeHTML = function escapeHTML(str) {
  var htmlEscapes = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#x27;',
    '/': '&#x2F;'
  };
  var htmlEscaper = /[&<>"'/]/g;
  return "".concat(str).replace(htmlEscaper, function (match) {
    return htmlEscapes[match];
  });
};
/**
 *
 *
 * @param {*} arr
 */


var transposeArray = function transposeArray(arr) {
  return arr[0].map(function (col, i) {
    return arr.map(function (row) {
      return row[i];
    });
  });
};

var toArray = function toArray(arr) {
  return arr instanceof Array ? arr : [arr];
};

var extendsClass = function extendsClass(cls, extendsFrom, found) {
  if (!cls) {
    return false;
  }

  var prototype = cls.prototype;

  if (prototype instanceof extendsFrom) {
    found = true;
  } else {
    found = extendsClass(prototype, extendsFrom, found);
  }

  return found;
};
/**
 *
 * @param {*} dm1
 * @param {*} dm2
 */


var concatModels = function concatModels(dm1, dm2) {
  var dataObj1 = dm1.getData();
  var dataObj2 = dm2.getData();
  var data1 = dataObj1.data;
  var data2 = dataObj2.data;
  var schema1 = dataObj1.schema;
  var schema2 = dataObj2.schema;
  var tuples1 = {};
  var tuples2 = {};
  var commonTuples = {};

  for (var i = 0; i < data1.length; i++) {
    var _loop3 = function _loop3(ii) {
      var row1 = data1[i];
      var row2 = data2[ii];
      var dim1Values = row1.filter(function (d, idx) {
        return schema1[idx].type === datamodel__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
      });
      var dim2Values = row2.filter(function (d, idx) {
        return schema2[idx].type === datamodel__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
      });
      var allDimSame = dim1Values.every(function (value) {
        return dim2Values.indexOf(value) !== -1;
      });

      if (allDimSame) {
        var key = dim1Values.join();
        !commonTuples[key] && (commonTuples[key] = {});
        row1.forEach(function (value, idx) {
          commonTuples[key][schema1[idx].name] = value;
        });
        row2.forEach(function (value, idx) {
          commonTuples[key][schema2[idx].name] = value;
        });
      } else {
        var dm1Key = dim1Values.join();
        var dm2Key = dim2Values.join();

        if (!commonTuples[dm1Key] && !commonTuples[dm2Key]) {
          !tuples1[dm1Key] && (tuples1[dm1Key] = {});
          !tuples2[dm2Key] && (tuples2[dm2Key] = {});
          row1.forEach(function (value, idx) {
            tuples1[dm1Key][schema1[idx].name] = value;
          });
          row2.forEach(function (value, idx) {
            tuples2[dm2Key][schema2[idx].name] = value;
          });
        }
      }
    };

    for (var ii = 0; ii < data2.length; ii++) {
      _loop3(ii);
    }
  }

  var commonSchema = [].concat(_toConsumableArray(schema1), _toConsumableArray(schema2.filter(function (s2) {
    return schema1.findIndex(function (s1) {
      return s1.name === s2.name;
    }) === -1;
  })));
  var data = [].concat(_toConsumableArray(Object.values(tuples1)), _toConsumableArray(Object.values(tuples2)), _toConsumableArray(Object.values(commonTuples)));
  return [data, commonSchema];
};

var getSymbol = function getSymbol(type) {
  return Object(d3_shape__WEBPACK_IMPORTED_MODULE_2__["symbol"])().type(symbolFns[type]);
};

var stackOrders = (_stackOrders = {}, _defineProperty(_stackOrders, _enums_stack_config__WEBPACK_IMPORTED_MODULE_11__["ORDER_NONE"], d3_shape__WEBPACK_IMPORTED_MODULE_2__["stackOrderNone"]), _defineProperty(_stackOrders, _enums_stack_config__WEBPACK_IMPORTED_MODULE_11__["ORDER_ASCENDING"], d3_shape__WEBPACK_IMPORTED_MODULE_2__["stackOrderAscending"]), _defineProperty(_stackOrders, _enums_stack_config__WEBPACK_IMPORTED_MODULE_11__["ORDER_DESCENDING"], d3_shape__WEBPACK_IMPORTED_MODULE_2__["stackOrderDescending"]), _stackOrders);
var stackOffsets = (_stackOffsets = {}, _defineProperty(_stackOffsets, _enums_stack_config__WEBPACK_IMPORTED_MODULE_11__["OFFSET_DIVERGING"], d3_shape__WEBPACK_IMPORTED_MODULE_2__["stackOffsetDiverging"]), _defineProperty(_stackOffsets, _enums_stack_config__WEBPACK_IMPORTED_MODULE_11__["OFFSET_NONE"], d3_shape__WEBPACK_IMPORTED_MODULE_2__["stackOffsetNone"]), _defineProperty(_stackOffsets, _enums_stack_config__WEBPACK_IMPORTED_MODULE_11__["OFFSET_EXPAND"], d3_shape__WEBPACK_IMPORTED_MODULE_2__["stackOffsetExpand"]), _defineProperty(_stackOffsets, _enums_stack_config__WEBPACK_IMPORTED_MODULE_11__["OFFSET_WIGGLE"], d3_shape__WEBPACK_IMPORTED_MODULE_2__["stackOffsetWiggle"]), _stackOffsets); // eslint-disable-next-line require-jsdoc

var stack = function stack(params) {
  return Object(d3_shape__WEBPACK_IMPORTED_MODULE_2__["stack"])().keys(params.keys).offset(stackOffsets[params.offset]).order(stackOrders[params.order])(params.data);
};
/**
 * Groups the data into a hierarchical tree structure based on one or more fields.
 * @param { Object } params Configuration properties for nesting data
 * @param { Array.<Array> } params.data Data which needs to be grouped
 * @param { Array.<number> } params.keys Field indices by which the data will be grouped
 * @return { Array.<Object> } Grouped data array
 */


var nestCollection = function nestCollection(params) {
  var nestFn = Object(d3_collection__WEBPACK_IMPORTED_MODULE_4__["nest"])();
  params.keys.forEach(function (key) {
    return nestFn.key(function (d) {
      return d[key];
    });
  });
  return nestFn.entries(params.data);
};

var pathInterpolators = {
  curveLinear: d3_shape__WEBPACK_IMPORTED_MODULE_2__["curveLinear"],
  curveStepAfter: d3_shape__WEBPACK_IMPORTED_MODULE_2__["curveStepAfter"],
  curveStepBefore: d3_shape__WEBPACK_IMPORTED_MODULE_2__["curveStepBefore"],
  curveStep: d3_shape__WEBPACK_IMPORTED_MODULE_2__["curveStep"],
  curveCatmullRom: d3_shape__WEBPACK_IMPORTED_MODULE_2__["curveCatmullRom"],
  stepAfter: d3_shape__WEBPACK_IMPORTED_MODULE_2__["curveStepAfter"],
  catmullRom: d3_shape__WEBPACK_IMPORTED_MODULE_2__["curveCatmullRom"],
  step: d3_shape__WEBPACK_IMPORTED_MODULE_2__["curveStep"],
  stepBefore: d3_shape__WEBPACK_IMPORTED_MODULE_2__["curveStepBefore"],
  linear: d3_shape__WEBPACK_IMPORTED_MODULE_2__["curveLinear"]
};
var Symbols = {
  axisLeft: d3_axis__WEBPACK_IMPORTED_MODULE_1__["axisLeft"],
  axisRight: d3_axis__WEBPACK_IMPORTED_MODULE_1__["axisRight"],
  axisTop: d3_axis__WEBPACK_IMPORTED_MODULE_1__["axisTop"],
  axisBottom: d3_axis__WEBPACK_IMPORTED_MODULE_1__["axisBottom"],
  line: d3_shape__WEBPACK_IMPORTED_MODULE_2__["line"],
  area: d3_shape__WEBPACK_IMPORTED_MODULE_2__["area"],
  pie: d3_shape__WEBPACK_IMPORTED_MODULE_2__["pie"],
  arc: d3_shape__WEBPACK_IMPORTED_MODULE_2__["arc"],
  nest: d3_collection__WEBPACK_IMPORTED_MODULE_4__["nest"]
};
var Scales = {
  band: d3_scale__WEBPACK_IMPORTED_MODULE_3__["scaleBand"]
};

var getSmallestDiff = function getSmallestDiff(points) {
  points = points.sort(function (a, b) {
    return a - b;
  });
  var minDiff = points[1] - points[0];

  for (var i = 2; i < points.length; i++) {
    minDiff = Math.min(minDiff, points[i] - points[i - 1]);
  }

  return minDiff;
};

var timeFormats = {
  millisecond: '%A, %b %e, %H:%M:%S.%L',
  second: '%A, %b %e, %H:%M:%S',
  minute: '%A, %b %e, %H:%M',
  hour: '%A, %b %e, %H:%M',
  day: '%A, %b %e, %Y',
  month: '%B %Y',
  year: '%Y'
};
var timeDurations = [['millisecond', 'second', 'minute', 'hour', 'day', 'month', 'year'], [1, 1000, 60000, 3600000, 86400000, 2592000000, 31536000000]];

var getNearestInterval = function getNearestInterval(interval) {
  var index = getClosestIndexOf(timeDurations[1], interval);
  return timeDurations[0][index];
};

var formatTemporal = function formatTemporal(value, interval) {
  var nearestInterval = getNearestInterval(interval);
  return datamodel__WEBPACK_IMPORTED_MODULE_0__["DateTimeFormatter"].formatAs(value, timeFormats[nearestInterval]);
};

var temporalFields = function temporalFields(dataModel) {
  var filteredFields = {};
  Object.entries(dataModel.getFieldspace().getDimension()).forEach(function (_ref5) {
    var _ref6 = _slicedToArray(_ref5, 2),
        fieldName = _ref6[0],
        fieldObj = _ref6[1];

    if (fieldObj.subtype() === datamodel__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL) {
      filteredFields[fieldName] = fieldObj;
    }
  });
  return filteredFields;
};

var require = function require(lookupWhat, lookupDetails) {
  return {
    resolvable: function resolvable(store) {
      var lookupTarget = store[lookupWhat];
      var depArr = lookupDetails.slice(0, lookupDetails.length - 1);
      var fn = lookupDetails[lookupDetails.length - 1]; // fn

      var deps = depArr.map(function (str) {
        return lookupTarget[str];
      });
      return {
        fn: fn.apply(void 0, _toConsumableArray(deps)),
        depArr: depArr
      };
    }
  };
};

var nextAnimFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) {
  setTimeout(callback, 16);
};

var getValueParser = function getValueParser(config) {
  return function (val) {
    if (val instanceof InvalidAwareTypes) {
      return val in config ? config[val] : "".concat(val);
    }

    return val;
  };
};

var retrieveNearestGroupByReducers = function retrieveNearestGroupByReducers(dataModel) {
  var nearestReducers = {};
  var next = dataModel;

  do {
    var derivations = next.getDerivations();

    if (derivations) {
      var groupDerivation = derivations.reverse().find(function (derivation) {
        return derivation.op === _enums__WEBPACK_IMPORTED_MODULE_12__["DM_OPERATION_GROUP"];
      });

      if (groupDerivation) {
        nearestReducers = groupDerivation.criteria || {};
        break;
      }
    }
  } while (next = next.getParent());

  var filteredReducers = {};
  var measures = dataModel.getFieldspace().getMeasure();

  for (var _len4 = arguments.length, measureFieldNames = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
    measureFieldNames[_key4 - 1] = arguments[_key4];
  }

  measureFieldNames.forEach(function (measureName) {
    if (nearestReducers[measureName]) {
      filteredReducers[measureName] = nearestReducers[measureName];
    } else {
      var measureField = measures[measureName];

      if (measureField) {
        filteredReducers[measureName] = measureField.defAggFn();
      }
    }
  });
  return filteredReducers;
};



/***/ }),

/***/ "./packages/muze-utils/src/enums/common-props.js":
/*!*******************************************************!*\
  !*** ./packages/muze-utils/src/enums/common-props.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var CommonProps = {
  ACTION_INF: 'actionInf',
  ON_LAYER_DRAW: 'onLayerDraw',
  MATRIX_CREATED: 'matrixCreated'
};
/* harmony default export */ __webpack_exports__["default"] = (CommonProps);

/***/ }),

/***/ "./packages/muze-utils/src/enums/constants.js":
/*!****************************************************!*\
  !*** ./packages/muze-utils/src/enums/constants.js ***!
  \****************************************************/
/*! exports provided: DM_OPERATION_GROUP */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DM_OPERATION_GROUP", function() { return DM_OPERATION_GROUP; });
var DM_OPERATION_GROUP = 'group';

/***/ }),

/***/ "./packages/muze-utils/src/enums/index.js":
/*!************************************************!*\
  !*** ./packages/muze-utils/src/enums/index.js ***!
  \************************************************/
/*! exports provided: ReservedFields, CommonProps, DM_OPERATION_GROUP */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _reserved_fields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./reserved-fields */ "./packages/muze-utils/src/enums/reserved-fields.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReservedFields", function() { return _reserved_fields__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _common_props__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common-props */ "./packages/muze-utils/src/enums/common-props.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CommonProps", function() { return _common_props__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants */ "./packages/muze-utils/src/enums/constants.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DM_OPERATION_GROUP", function() { return _constants__WEBPACK_IMPORTED_MODULE_2__["DM_OPERATION_GROUP"]; });





/***/ }),

/***/ "./packages/muze-utils/src/enums/namespace.js":
/*!****************************************************!*\
  !*** ./packages/muze-utils/src/enums/namespace.js ***!
  \****************************************************/
/*! exports provided: UNIT_GLOBAL_NAMESPACE, UNIT_LOCAL_NAMESPACE, LAYER_LOCAL_NAMESPACE, LAYER_GLOBAL_NAMESPACE, GROUP_GLOBAL_NAMESPACE, GROUP_LOCAL_NAMESPACE, CANVAS_LOCAL_NAMESPACE, CANVAS_GLOBAL_NAMESPACE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UNIT_GLOBAL_NAMESPACE", function() { return UNIT_GLOBAL_NAMESPACE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UNIT_LOCAL_NAMESPACE", function() { return UNIT_LOCAL_NAMESPACE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAYER_LOCAL_NAMESPACE", function() { return LAYER_LOCAL_NAMESPACE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAYER_GLOBAL_NAMESPACE", function() { return LAYER_GLOBAL_NAMESPACE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GROUP_GLOBAL_NAMESPACE", function() { return GROUP_GLOBAL_NAMESPACE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GROUP_LOCAL_NAMESPACE", function() { return GROUP_LOCAL_NAMESPACE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CANVAS_LOCAL_NAMESPACE", function() { return CANVAS_LOCAL_NAMESPACE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CANVAS_GLOBAL_NAMESPACE", function() { return CANVAS_GLOBAL_NAMESPACE; });
var UNIT_GLOBAL_NAMESPACE = 'app.units';
var UNIT_LOCAL_NAMESPACE = 'local.units';
var LAYER_LOCAL_NAMESPACE = 'local.layers';
var LAYER_GLOBAL_NAMESPACE = 'app.layers';
var GROUP_GLOBAL_NAMESPACE = 'app.group';
var GROUP_LOCAL_NAMESPACE = 'local.group';
var CANVAS_LOCAL_NAMESPACE = 'local.canvas';
var CANVAS_GLOBAL_NAMESPACE = 'app.canvas';

/***/ }),

/***/ "./packages/muze-utils/src/enums/reserved-fields.js":
/*!**********************************************************!*\
  !*** ./packages/muze-utils/src/enums/reserved-fields.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var ReservedFields = {
  ROW_ID: '__id__'
};
/* harmony default export */ __webpack_exports__["default"] = (ReservedFields);

/***/ }),

/***/ "./packages/muze-utils/src/enums/stack-config.js":
/*!*******************************************************!*\
  !*** ./packages/muze-utils/src/enums/stack-config.js ***!
  \*******************************************************/
/*! exports provided: ORDER_ASCENDING, ORDER_DESCENDING, ORDER_NONE, OFFSET_DIVERGING, OFFSET_NONE, OFFSET_EXPAND, OFFSET_WIGGLE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ORDER_ASCENDING", function() { return ORDER_ASCENDING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ORDER_DESCENDING", function() { return ORDER_DESCENDING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ORDER_NONE", function() { return ORDER_NONE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OFFSET_DIVERGING", function() { return OFFSET_DIVERGING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OFFSET_NONE", function() { return OFFSET_NONE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OFFSET_EXPAND", function() { return OFFSET_EXPAND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OFFSET_WIGGLE", function() { return OFFSET_WIGGLE; });
var ORDER_ASCENDING = 'ascending';
var ORDER_DESCENDING = 'descending';
var ORDER_NONE = 'none';
var OFFSET_DIVERGING = 'diverging';
var OFFSET_NONE = 'none';
var OFFSET_EXPAND = 'expand';
var OFFSET_WIGGLE = 'wiggle';

/***/ }),

/***/ "./packages/muze-utils/src/index.js":
/*!******************************************!*\
  !*** ./packages/muze-utils/src/index.js ***!
  \******************************************/
/*! exports provided: InvalidAwareTypes, DataModel, ReservedFields, CommonProps, STATE_NAMESPACES, scales, colorSchemes, getNearestValue, getValueParser, transformColors, detectColor, hslToRgb, rgbToHsv, hexToHsv, hsvToRgb, escapeHTML, angleToRadian, generateGetterSetters, getArraySum, ERROR_MSG, interpolator, colorInterpolator, numberInterpolator, piecewiseInterpolator, reqAnimFrame, cancelAnimFrame, nextAnimFrame, getMax, getMin, getDomainFromData, getUniqueId, mergeRecursive, unionDomain, replaceCSSPrefix, symbolFns, defaultValue, easeFns, clone, interpolateArray, getMinPoint, getMaxPoint, getClosestIndexOf, registerListeners, Voronoi, checkExistence, sanitizeIP, getMinDiff, capitalizeFirst, getWindow, getQualifiedClassName, Store, getDependencyOrder, objectIterator, intSanitizer, transactor, enableChainedTransaction, isHTMLElem, isEqual, isSimpleObject, nextFrame, filterPropagationModel, getObjProp, getDataModelFromIdentifiers, getDataModelFromRange, transposeArray, toArray, extendsClass, concatModels, assembleModelFromIdentifiers, isValidValue, nestCollection, stack, getSymbol, Scales, Symbols, pathInterpolators, hslInterpolator, getSmallestDiff, require, formatTemporal, createSelection, temporalFields, retrieveNearestGroupByReducers, selectElement, makeElement, applyStyle, addClass, removeClass, appendElement, setAttrs, setStyles, createElement, createElements, clipElement, getElementsByClassName, getMousePos, getEvent, getD3Drag, getSmartComputedStyle, getClientPoint, hasTouch, Smartlabel, dataSelect, DataObject, LifeCycleManager, DimensionSubtype, FieldType, MeasureSubtype, DateTimeFormatter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InvalidAwareTypes", function() { return InvalidAwareTypes; });
/* harmony import */ var datamodel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! datamodel */ "./packages/muze-utils/node_modules/datamodel/dist/datamodel.js");
/* harmony import */ var datamodel__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(datamodel__WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (default from non-harmony) */ __webpack_require__.d(__webpack_exports__, "DataModel", function() { return datamodel__WEBPACK_IMPORTED_MODULE_0___default.a; });
/* harmony import */ var _scales__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scales */ "./packages/muze-utils/src/scales.js");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "scales", function() { return _scales__WEBPACK_IMPORTED_MODULE_1__; });
/* harmony import */ var _color_schemes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./color-schemes */ "./packages/muze-utils/src/color-schemes.js");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "colorSchemes", function() { return _color_schemes__WEBPACK_IMPORTED_MODULE_2__; });
/* harmony import */ var _enums_namespace__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./enums/namespace */ "./packages/muze-utils/src/enums/namespace.js");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "STATE_NAMESPACES", function() { return _enums_namespace__WEBPACK_IMPORTED_MODULE_3__; });
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./enums */ "./packages/muze-utils/src/enums/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReservedFields", function() { return _enums__WEBPACK_IMPORTED_MODULE_4__["ReservedFields"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CommonProps", function() { return _enums__WEBPACK_IMPORTED_MODULE_4__["CommonProps"]; });

/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./common-utils */ "./packages/muze-utils/src/common-utils.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getNearestValue", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getNearestValue"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getValueParser", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getValueParser"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "transformColors", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["transformColors"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "detectColor", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["detectColor"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hslToRgb", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["hslToRgb"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "rgbToHsv", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["rgbToHsv"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hexToHsv", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["hexToHsv"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hsvToRgb", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["hsvToRgb"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "escapeHTML", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["escapeHTML"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "angleToRadian", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["angleToRadian"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "generateGetterSetters", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["generateGetterSetters"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getArraySum", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getArraySum"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ERROR_MSG", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["ERROR_MSG"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolator", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["interpolator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "colorInterpolator", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["colorInterpolator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "numberInterpolator", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["numberInterpolator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "piecewiseInterpolator", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["piecewiseInterpolator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "reqAnimFrame", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["reqAnimFrame"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "cancelAnimFrame", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["cancelAnimFrame"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "nextAnimFrame", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["nextAnimFrame"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getMax", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getMax"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getMin", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getMin"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getDomainFromData", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getDomainFromData"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getUniqueId", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getUniqueId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mergeRecursive", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["mergeRecursive"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "unionDomain", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["unionDomain"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "replaceCSSPrefix", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["replaceCSSPrefix"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "symbolFns", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["symbolFns"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "defaultValue", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["defaultValue"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "easeFns", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["easeFns"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["clone"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "interpolateArray", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["interpolateArray"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getMinPoint", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getMinPoint"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getMaxPoint", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getMaxPoint"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getClosestIndexOf", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getClosestIndexOf"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "registerListeners", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["registerListeners"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Voronoi", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["Voronoi"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "checkExistence", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["checkExistence"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "sanitizeIP", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["sanitizeIP"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getMinDiff", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getMinDiff"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "capitalizeFirst", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["capitalizeFirst"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getWindow", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getWindow"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getQualifiedClassName", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getQualifiedClassName"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Store", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["Store"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getDependencyOrder", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getDependencyOrder"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "objectIterator", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["objectIterator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "intSanitizer", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["intSanitizer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "transactor", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["transactor"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "enableChainedTransaction", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["enableChainedTransaction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isHTMLElem", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["isHTMLElem"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isEqual", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["isEqual"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isSimpleObject", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["isSimpleObject"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "nextFrame", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["nextFrame"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "filterPropagationModel", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["filterPropagationModel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getObjProp", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getObjProp"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getDataModelFromIdentifiers", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getDataModelFromIdentifiers"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getDataModelFromRange", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getDataModelFromRange"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "transposeArray", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["transposeArray"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "toArray", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["toArray"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "extendsClass", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["extendsClass"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "concatModels", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["concatModels"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "assembleModelFromIdentifiers", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["assembleModelFromIdentifiers"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isValidValue", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["isValidValue"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "nestCollection", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["nestCollection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stack", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["stack"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getSymbol", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getSymbol"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Scales", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["Scales"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Symbols", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["Symbols"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "pathInterpolators", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["pathInterpolators"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hslInterpolator", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["hslInterpolator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getSmallestDiff", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["getSmallestDiff"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "require", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["require"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "formatTemporal", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["formatTemporal"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createSelection", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["createSelection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "temporalFields", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["temporalFields"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "retrieveNearestGroupByReducers", function() { return _common_utils__WEBPACK_IMPORTED_MODULE_5__["retrieveNearestGroupByReducers"]; });

/* harmony import */ var _renderer_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./renderer-utils */ "./packages/muze-utils/src/renderer-utils.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "selectElement", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["selectElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "makeElement", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["makeElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "applyStyle", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["applyStyle"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "addClass", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["addClass"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "removeClass", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["removeClass"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "appendElement", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["appendElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "setAttrs", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["setAttrs"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "setStyles", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["setStyles"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createElement", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["createElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createElements", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["createElements"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "clipElement", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["clipElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getElementsByClassName", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["getElementsByClassName"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getMousePos", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["getMousePos"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getEvent", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["getEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getD3Drag", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["getD3Drag"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getSmartComputedStyle", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["getSmartComputedStyle"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getClientPoint", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["getClientPoint"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasTouch", function() { return _renderer_utils__WEBPACK_IMPORTED_MODULE_6__["hasTouch"]; });

/* harmony import */ var fusioncharts_smartlabel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! fusioncharts-smartlabel */ "./packages/muze-utils/node_modules/fusioncharts-smartlabel/lib/SmartlabelManager.js");
/* harmony import */ var fusioncharts_smartlabel__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(fusioncharts_smartlabel__WEBPACK_IMPORTED_MODULE_7__);
/* harmony reexport (default from non-harmony) */ __webpack_require__.d(__webpack_exports__, "Smartlabel", function() { return fusioncharts_smartlabel__WEBPACK_IMPORTED_MODULE_7___default.a; });
/* harmony import */ var _DataSystem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./DataSystem */ "./packages/muze-utils/src/DataSystem/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "dataSelect", function() { return _DataSystem__WEBPACK_IMPORTED_MODULE_8__["dataSelect"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DataObject", function() { return _DataSystem__WEBPACK_IMPORTED_MODULE_8__["DataObject"]; });

/* harmony import */ var _lifecycle_manager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./lifecycle-manager */ "./packages/muze-utils/src/lifecycle-manager/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LifeCycleManager", function() { return _lifecycle_manager__WEBPACK_IMPORTED_MODULE_9__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DimensionSubtype", function() { return datamodel__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FieldType", function() { return datamodel__WEBPACK_IMPORTED_MODULE_0__["FieldType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MeasureSubtype", function() { return datamodel__WEBPACK_IMPORTED_MODULE_0__["MeasureSubtype"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DateTimeFormatter", function() { return datamodel__WEBPACK_IMPORTED_MODULE_0__["DateTimeFormatter"]; });





var InvalidAwareTypes = datamodel__WEBPACK_IMPORTED_MODULE_0___default.a.InvalidAwareTypes;











/***/ }),

/***/ "./packages/muze-utils/src/lifecycle-manager/event-list.js":
/*!*****************************************************************!*\
  !*** ./packages/muze-utils/src/lifecycle-manager/event-list.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var events = ['initialized', 'beforeupdate', 'updated', 'beforedraw', 'drawn', 'beforeremove', 'removed', 'animationend'];
var compositions = ['canvas', 'unit', 'layer', 'axis', 'facet-headers', 'legend', 'caption'];
var EVENT_LIST = [];
compositions.forEach(function (composition) {
  events.forEach(function (event) {
    EVENT_LIST.push("".concat(composition, ".").concat(event));
  });
});
/* harmony default export */ __webpack_exports__["default"] = (EVENT_LIST);

/***/ }),

/***/ "./packages/muze-utils/src/lifecycle-manager/helper.js":
/*!*************************************************************!*\
  !*** ./packages/muze-utils/src/lifecycle-manager/helper.js ***!
  \*************************************************************/
/*! exports provided: createPromise */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createPromise", function() { return createPromise; });
/**
 * Creates a new promise when the given promise is resolved. This needs to be done so that after the lifecycle event
 * is completed, then again when the event gets completed, then a new promise gets resolved.
 *
 * @param {Promise} promise Instance of promise
 * @param {string} eventName name of event
 * @param {LifeCycleManager} context Instance of lifecyclemanager
 */
var createPromise = function createPromise(promise, eventName, context) {
  promise.then(function () {
    var prm = context._makeNotifierPromise(eventName);

    context._promises.set(eventName, prm);

    createPromise(prm, eventName, context);
  });
};

/***/ }),

/***/ "./packages/muze-utils/src/lifecycle-manager/index.js":
/*!************************************************************!*\
  !*** ./packages/muze-utils/src/lifecycle-manager/index.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _lifecycle_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lifecycle-manager */ "./packages/muze-utils/src/lifecycle-manager/lifecycle-manager.js");

/* harmony default export */ __webpack_exports__["default"] = (_lifecycle_manager__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./packages/muze-utils/src/lifecycle-manager/lifecycle-manager.js":
/*!************************************************************************!*\
  !*** ./packages/muze-utils/src/lifecycle-manager/lifecycle-manager.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LifeCycleManager; });
/* harmony import */ var _event_list__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./event-list */ "./packages/muze-utils/src/lifecycle-manager/event-list.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./packages/muze-utils/src/lifecycle-manager/helper.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }



/**
 * At first call it accepts one function
 * calling it second time accepts notification object.
 * notification object then called with first accepted function
 *
 * @param {Function} resolveFn a promise's resolve function
 * @return {Function} a function to accept notification object
 */

var resolver = function resolver(resolveFn) {
  return function (notification) {
    return resolveFn(notification);
  };
};
/**
 * Checks if the property string is present in the source object
 *
 * @param {Object} source source object whom you want to check the property
 * @param {string} property key name that need to be checked
 * @return {boolean} returns true if the property found in the source object
 */


var hasOwn = function hasOwn(source, property) {
  return Object.prototype.hasOwnProperty.call(source, property);
};
/**
 * LifeCycleManager which goes as a dependendecy to a muze
 * it accepts notification from the entire library throughout
 * the exeecution life
 *
 * @export
 * @class LifeCycleManager
 */


var LifeCycleManager =
/*#__PURE__*/
function () {
  /**
   * Creates an instance of LifeCycleManager.
   * @memberof LifeCycleManager
   */
  function LifeCycleManager() {
    _classCallCheck(this, LifeCycleManager);

    this._eventList = _event_list__WEBPACK_IMPORTED_MODULE_0__["default"];
    this._promises = new Map();
    this._notifiers = {};
    this._lifeCycles = {};
    this._unreleasedLifeCycles = {};

    this._boot();
  }
  /**
   * Fills all the notifiers with resolver callback
   *
   * @memberof LifeCycleManager
   */


  _createClass(LifeCycleManager, [{
    key: "_boot",
    value: function _boot() {
      this._notifiers = this._eventList.reduce(function (acc, name) {
        acc[name] = resolver;
        return acc;
      }, {});

      this._preparePromises();
    }
    /**
     * Public method which gives the promise corresponding
     * to the event name
     *
     * @param {string} eventName name of the event like `canvas.drawn`
     * @return {promise} promise that is passed to the user
     * @memberof LifeCycleManager
     */

  }, {
    key: "retrieve",
    value: function retrieve(eventName) {
      return this._promises.get(eventName);
    }
    /**
     * Creates a promise that will be passed to user's callback
     *
     * @param {string} eventName name of the event like `canvas.drawn`
     * @return {promise} a pending promise waiting for resolve to be called
     * @memberof LifeCycleManager
     */

  }, {
    key: "_makeNotifierPromise",
    value: function _makeNotifierPromise(eventName) {
      var _this = this;

      return new Promise(function (resolve) {
        _this._notifiers[eventName] = resolver(resolve);
      });
    }
    /**
     * Prepares the promise map with pending promises
     * all the promises are in a pending state where their's
     * resolve function waiting to be called with notification object
     * @memberof LifeCycleManager
     */

  }, {
    key: "_preparePromises",
    value: function _preparePromises() {
      var _this2 = this;

      this._eventList.forEach(function (eventName) {
        var promise = _this2._makeNotifierPromise(eventName);

        _this2._promises.set(eventName, promise);

        Object(_helper__WEBPACK_IMPORTED_MODULE_1__["createPromise"])(promise, eventName, _this2);
      });
    }
    /**
     * Resolves the promise with notification object
     *
     * @param {string} eventName name of the event in the system
     * @param {Object} notification notification object
     * @param {string} notification.formalName name of the sender creating the notification
     * @param {Object} notification.client instance or array of instances sending the notification
     * @param {string} notification.action the stage name when the event happened like `beforedraw`
     *
     * @memberof LifeCycleManager
     */

  }, {
    key: "_resolvePromise",
    value: function _resolvePromise(eventName, notification) {
      this._notifiers[eventName](notification);
    }
    /**
     * Public method which is being called by different
     * subcompoents of the system at different execution atages
     * @param {Object} notification notification object
     * @param {string} notification.formalName name of the sender creating the notification
     * @param {Object} notification.client instance or array of instances sending the notification
     * @param {string} notification.action the stage name when the event happened like `beforedraw`
     * @memberof LifeCycleManager
     */

  }, {
    key: "notify",
    value: function notify(notification) {
      // get the composition name from notification
      // or from static formalName() method
      var composition = notification.formalName || notification.client.constructor.formalName();
      notification.formalName = composition;

      this._releasePromisesFromCache();

      this._notify(composition, notification);
    }
    /**
     * Notify user the with promsie in a callback
     * if callback not found then cache it
     *
     * @param {string} composition
     * @param {Object} notification notification object
     * @param {string} notification.formalName name of the sender creating the notification
     * @param {Object} notification.client instance or array of instances sending the notification
     * @param {string} notification.action the stage name when the event happened like `beforedraw`
     * @memberof LifeCycleManager
     */

  }, {
    key: "_notify",
    value: function _notify(composition, notification) {
      var stage = notification.action;
      var eventName = "".concat(composition, ".").concat(stage); // resolves promise with the notification object

      this._resolvePromise(eventName, notification); // get the promise from the promise map


      var promise = this.retrieve(eventName);

      if (this._lifeCycles[composition]) {
        if (this._lifeCycles[composition][stage]) {
          // if user given call back exists, then call with promise
          this._callLifeCycleCallback(composition, stage, promise);
        } else {
          // otherwise cache the promise
          this._cachePromise(composition, stage, promise);
        }
      } else {
        this._cachePromise(composition, stage, promise);
      }
    }
    /**
     * Calls the user's callback with callback
     *
     * @param {string} composition name of the compositon like `canvas`
     * @param {string} stage the stage name when the event happened like `beforedraw`
     * @param {promise} promise promise that is passed to the user
     * @memberof LifeCycleManager
     */

  }, {
    key: "_callLifeCycleCallback",
    value: function _callLifeCycleCallback(composition, stage, promise) {
      var eventName = "".concat(composition, ".").concat(stage);

      this._lifeCycles[composition][stage](promise);

      this._resetTargetPromise(eventName);
    }
    /**
     * Try to clear the cached promsies once we have
     * macthed callbacks from the user
     *
     * @memberof LifeCycleManager
     */

  }, {
    key: "_releasePromisesFromCache",
    value: function _releasePromisesFromCache() {
      var _this3 = this;

      var compositions = Object.keys(this._unreleasedLifeCycles);
      compositions.forEach(function (composition) {
        var stages = Object.keys(_this3._unreleasedLifeCycles[composition]);
        stages.forEach(function (stage) {
          if (_this3._lifeCycles[composition]) {
            if (_this3._lifeCycles[composition][stage]) {
              // take the promise from unreleased lifeCycles
              var promise = _this3._unreleasedLifeCycles[composition][stage]; // call the user given callback with that promise

              _this3._callLifeCycleCallback(composition, stage, promise); // delete promise from unreleased lifeCycles


              delete _this3._unreleasedLifeCycles[composition][stage];
            }
          }
        });
      });
    }
    /**
     * Cache the promise in the map. This cache
     * then get consumed if we get user callbacks
     * @param {string} composition name of the compositon like `canvas`
     * @param {string} stage the stage name when the event happened like `beforedraw`
     * @param {promise} promise promise that is passed to the user
     * @memberof LifeCycleManager
     */

  }, {
    key: "_cachePromise",
    value: function _cachePromise(composition, stage, promise) {
      if (!hasOwn(this._unreleasedLifeCycles, composition)) {
        this._unreleasedLifeCycles[composition] = {};
      }

      if (!hasOwn(this._unreleasedLifeCycles[composition], stage)) {
        this._unreleasedLifeCycles[composition][stage] = {};
      }

      this._unreleasedLifeCycles[composition][stage] = promise;
    }
    /**
     * It register's the callbacks gievn the user
     *
     * @param {Object} [lifeCycles={}] a object with list of callbacks
     * @memberof LifeCycleManager
     */

  }, {
    key: "register",
    value: function register() {
      var lifeCycles = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      this._lifeCycles = lifeCycles; // as we get all the callbacks, try to call them
      // from unreleased promise map

      this._releasePromisesFromCache();
    }
    /**
     * Reset the promise into pending state
     *
     * @param {string} eventName name of the event happening
     * @memberof LifeCycleManager
     */

  }, {
    key: "_resetTargetPromise",
    value: function _resetTargetPromise(eventName) {
      var _this4 = this;

      setTimeout(function () {
        _this4._notifiers[eventName] = resolver;

        _this4._promises.set(eventName, _this4._makeNotifierPromise(eventName));
      }, 0);
    }
  }]);

  return LifeCycleManager;
}();



/***/ }),

/***/ "./packages/muze-utils/src/renderer-utils.js":
/*!***************************************************!*\
  !*** ./packages/muze-utils/src/renderer-utils.js ***!
  \***************************************************/
/*! exports provided: hasTouch, selectElement, makeElement, applyStyle, addClass, removeClass, appendElement, setAttrs, setStyles, createElement, createElements, clipElement, getElementsByClassName, getMousePos, getEvent, getD3Drag, getSmartComputedStyle, getClientPoint */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasTouch", function() { return hasTouch; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectElement", function() { return selectElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeElement", function() { return makeElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyStyle", function() { return applyStyle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addClass", function() { return addClass; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeClass", function() { return removeClass; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "appendElement", function() { return appendElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setAttrs", function() { return setAttrs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setStyles", function() { return setStyles; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createElement", function() { return createElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createElements", function() { return createElements; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clipElement", function() { return clipElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getElementsByClassName", function() { return getElementsByClassName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMousePos", function() { return getMousePos; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEvent", function() { return getEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getD3Drag", function() { return getD3Drag; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSmartComputedStyle", function() { return getSmartComputedStyle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getClientPoint", function() { return getClientPoint; });
/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-selection */ "./packages/muze-utils/node_modules/d3-selection/src/index.js");
/* harmony import */ var d3_drag__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3-drag */ "./packages/muze-utils/node_modules/d3-drag/src/index.js");
/* harmony import */ var d3_transition__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! d3-transition */ "./packages/muze-utils/node_modules/d3-transition/src/index.js");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common-utils */ "./packages/muze-utils/src/common-utils.js");
var _this = undefined;

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }





/**
 * This function takes a raw DOM element or
 * a string and returns a d3 selection of that element.
 *
 * @param {HTMLElement | string} element The element to wrap in d3 selection.
 * @return {Selection} Instance of d3 selection.
 */

var selectElement = function selectElement(element) {
  return Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["select"])(element);
};
/**
 * It creates a new d3 element on the parent element
 * @param  {Selection} parent Element to which the element is to be appended
 * @param  {Object} elemType Type of the new element
 * @param  {Array} data Data for the new element
 * @param  {Object} selector classname/id/tagname for the element
 * @return {HTMLElement} Newly Created Element
 */


var makeElement = function makeElement(parent, elemType, data, selector) {
  var callbacks = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};
  var keyFn = arguments.length > 5 ? arguments[5] : undefined;

  if (parent instanceof HTMLElement || parent instanceof SVGElement) {
    parent = selectElement(parent);
  }

  var selectorVal = selector ? selector[0] : null;
  var selectorType = null;
  var actualSelector = null;
  var element = null;
  var enterSel = null;
  var mergeSel = null;
  var filter;

  if (selectorVal) {
    if (selectorVal === '#') {
      selectorType = 'id';
      actualSelector = selector;
    } else {
      selectorType = 'class';
      actualSelector = selector[0] === '.' ? selector : ".".concat(selector);
    }
  } else {
    actualSelector = elemType;
    filter = true;
  }

  element = parent.selectAll(actualSelector);
  filter && (element = element.filter(function () {
    return this.parentNode === parent.node();
  }));
  element = element.data(data, keyFn);
  enterSel = element.enter().append(elemType || 'div');
  callbacks.enter && enterSel.each(function () {
    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
      params[_key] = arguments[_key];
    }

    callbacks.enter.apply(callbacks, [selectElement(this)].concat(params));
  });
  mergeSel = enterSel.merge(element);
  callbacks.update && mergeSel.each(function () {
    for (var _len2 = arguments.length, params = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      params[_key2] = arguments[_key2];
    }

    callbacks.update.apply(callbacks, [selectElement(this)].concat(params));
  });

  if (selectorType === 'class') {
    mergeSel.classed(selectorVal === '.' ? selector.substring(1, selector.length) : selector, true);
  } else if (selectorType === 'id') {
    mergeSel.attr('id', selector.substring(1, selector.length));
  }

  var exitSel = element.exit();

  if (callbacks.exit) {
    exitSel.each(function () {
      for (var _len3 = arguments.length, params = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        params[_key3] = arguments[_key3];
      }

      callbacks.exit.apply(callbacks, [selectElement(this)].concat(params));
    });
  } else {
    exitSel.remove();
  }

  return mergeSel;
};
/**
 * This function applies styles to an element
 *  @param  {Object} elem Element Selection
 * @param  {Object} styleObj Style Object to be applied
 * @return {Element} Newly Created Element
*/


var applyStyle = function applyStyle(elem, styleObj) {
  Object.entries(styleObj).forEach(function (d) {
    elem.style(d[0], d[1]);
  }, _this);
  return elem;
};
/**
 * This function appends a dom element in another element.
 * @param {HTMLElement | SVGElement} element1 The element in which to append the second element
 * @param {HTMLElement | SVGElement} element2 The element which will be appended.
 */


var appendElement = function appendElement(element1, element2) {
  element1.appendChild(element2);
};
/**
 * Sets the attributes to the element.
 * @param {HTMLElement | SVGElement} element Element on which attributes will be applied
 * @param {Object} attrs Attributes which need to be applied
 */


var setElementAttrs = function setElementAttrs(element, attrs) {
  for (var key in attrs) {
    if ({}.hasOwnProperty.call(attrs, key)) {
      element.attr(key, attrs[key]);
    }
  }
};
/**
 * Sets attributes in the svg or html element
 * @param {SVGElement | HTMLElement} element The element on which attrs will be applied
 * @param {Array.<Object>} attrs Array of attributes
 * @param {string} className className of elements to select.
 * @return {SVGElement | HTMLElement} SVGElement or html element.
 */


var setAttrs = function setAttrs(element, attrs, className) {
  if (!(element instanceof d3_selection__WEBPACK_IMPORTED_MODULE_0__["selection"])) {
    element = selectElement(element);
  }

  className !== undefined ? element.selectAll(".".concat(className)).each(function () {
    setElementAttrs(Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["select"])(this), attrs);
  }) : setElementAttrs(element, attrs);
  return element;
};
/**
 * Adds a css class to elements which passes the filter function.If filter function is not given,
 * then all elements will be applied the class.
 * @param {HTMLElement | SVGElement} element element
 * @param {string} className css class
 * @param {string} selector css selector
 * @param {Function} filterFn filter method.
 */


var addClass = function addClass(element, className, selector, filterFn) {
  Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["select"])(element).selectAll(selector).each(function (data) {
    var elem = Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["select"])(this);
    filterFn ? filterFn(data) && elem.classed(className, true) : elem.classed(className, true);
  });
};
/**
 * Removes the css class from elements which passes the filter function.If filter function is not given,
 * then all elements will be applied the class.
 * @param {HTMLElement | SVGElement} element element
 * @param {string} className css class
 * @param {string} selector css selector
 * @param {Function} filterFn filter method.
 */


var removeClass = function removeClass(element, className, selector, filterFn) {
  Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["select"])(element).selectAll(selector).each(function (data) {
    var elem = Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["select"])(this);
    filterFn ? filterFn(data) && elem.classed(className, false) : elem.classed(className, false);
  });
};
/**
 * Sets styles in the svg or html element
 * @param {SVGElement | HTMLElement} element The element on which styles will be applied
 * @param {Array.<Object>} styles Array of style attributes
 * @return {SVGElement | HTMLElement} SVGElement or html element.
 */


var setStyles = function setStyles(element, styles) {
  if (!(element instanceof d3_selection__WEBPACK_IMPORTED_MODULE_0__["selection"])) {
    element = selectElement(element);
  }

  for (var key in styles) {
    if ({}.hasOwnProperty.call(styles, key)) {
      element.style(key, styles[key]);
    }
  }

  return element;
};
/**
 * Creates svg or html elements by binding data to the selection.Removes extra elements
 * on exit.
 * @param {Object} params Parameter object
 * @param {SVGElement | HTMLElement} params.container Container element where all elements will be appended
 * @param {string} params.selector Selector by which elements will be selected from dom
 * @param {string} params.append Append tag
 * @param {Function} params.each Function which will be executed for each data point and element.
 */


var createElements = function createElements(params) {
  var container = Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["select"])(params.container);
  var data;
  var sel;
  data = params.data;

  if (typeof data === 'number') {
    data = Array(data).fill().map(function (d, i) {
      return i;
    });
  }

  sel = container.selectAll(params.selector).data(data);
  sel = container.selectAll(params.selector).filter(function () {
    return this.parentNode === container.node();
  }).data(params.data);
  var selectionMerge = sel.enter().append(params.append).merge(sel).each(function (d, i) {
    params.each(d, Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["select"])(this), i);
  });
  selectionMerge.attr('class', params.className || '');
  sel.exit().remove();
};
/**
 * Clips an element with given measurement. Basically it is used to hide overflowing portions
 * of any element.
 * @param {SVGElement} container svg element which needs to be clipped.
 * @param {Object} measurement Dimensions of the clipped rectangle.
 * @param {string} id Unique id of the clip element
 */


var clipElement = function clipElement(container, measurement, id) {
  var clipPathElement = makeElement(Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["select"])(container), 'clipPath', [1], "#".concat(id));
  var clipPathRect = makeElement(clipPathElement, 'rect', [1]);
  clipPathRect.attr('x', measurement.x).attr('y', measurement.x).attr('width', measurement.width).attr('height', measurement.height);
  clipPathElement.attr('clip-path', "url(#".concat(id, ")"));
};
/**
 * Returns the element of the corresponding classname.
 * @param {HTMLElement | SVGElement} node html or svg node element.
 * @param {string} className css class to be applied.
 * @return {HTMLElement | SVGElement} html or svg element.
 */


var getElementsByClassName = function getElementsByClassName(node, className) {
  return Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["select"])(node).selectAll(className).nodes();
};
/**
 * Gets the mouse position relative to an svg type of element
 * @param {SVGElement} element Any svg element like rect, circle, etc.
 * @param {Event} event Event object.
 * @return {Object} x and y position relative to the container element passed.
 */


var getMousePos = function getMousePos(element, event) {
  var boundingClientRect = element.getBoundingClientRect();
  return {
    x: event.x - boundingClientRect.x,
    y: event.y - boundingClientRect.y
  };
};

var getClientPoint = function getClientPoint() {
  var pos = d3_selection__WEBPACK_IMPORTED_MODULE_0__["clientPoint"].apply(void 0, arguments);
  return {
    x: pos[0],
    y: pos[1]
  };
};
/** This function appends a dom element in another element.
 * @param {Object} tag The tag name of the element to append
 * @param {Object} mount Mount point fo the element
 * @return {Object} selection of the appended element
 */


var createElement = function createElement(tag, mount) {
  return Object(d3_selection__WEBPACK_IMPORTED_MODULE_0__["select"])(mount).append(tag).node();
};
/**
 * Gets the d3 event function
 * @return {Object} d3 event
 */


var getEvent = function getEvent() {
  return d3_selection__WEBPACK_IMPORTED_MODULE_0__["event"];
};
/**
 * Gets the d3 drag function
 * @return {Object} d3 drag
 */


var getD3Drag = function getD3Drag() {
  return d3_drag__WEBPACK_IMPORTED_MODULE_1__["drag"];
};

var getSmartComputedStyle = function getSmartComputedStyle(group, css) {
  var textEl;
  var testText = 'W';
  var mandatoryStyle = {
    'fill-opacity': 0
  };
  var className = typeof css === 'string' ? css : css instanceof Array ? css.join(' ') : undefined;

  if (group.node() instanceof HTMLElement) {
    textEl = group.append('div').html(testText);
  } else {
    textEl = group.append('text').text(testText);
  }

  if (className) {
    textEl.attr('class', className);
  } else if (_typeof(css) === 'object') {
    delete css['fill-opacity'];
    Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["mergeRecursive"])(mandatoryStyle, css);
  }

  textEl.style(mandatoryStyle);
  var computedStyle = window.getComputedStyle(textEl.node());
  var styleForSmartLabel = {
    fontSize: computedStyle.fontSize,
    fontFamily: computedStyle.fontFamily,
    fontWeight: computedStyle.fontWeight,
    fontStyle: computedStyle.fontStyle
  };
  textEl.remove();
  return styleForSmartLabel;
};

var hasTouch = function hasTouch() {
  return 'ontouchstart' in document.documentElement;
};



/***/ }),

/***/ "./packages/muze-utils/src/scales.js":
/*!*******************************************!*\
  !*** ./packages/muze-utils/src/scales.js ***!
  \*******************************************/
/*! exports provided: scaleLinear, scaleThreshold, scaleLog, scalePow, scaleIdentity, scaleOrdinal, scaleSequential, scaleQuantize, scaleQuantile, schemeCategory10, schemeCategory20, schemeCategory20b, scaleBand, scaleTime */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3_scale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-scale */ "./packages/muze-utils/node_modules/d3-scale/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleLinear", function() { return d3_scale__WEBPACK_IMPORTED_MODULE_0__["scaleLinear"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleThreshold", function() { return d3_scale__WEBPACK_IMPORTED_MODULE_0__["scaleThreshold"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleLog", function() { return d3_scale__WEBPACK_IMPORTED_MODULE_0__["scaleLog"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scalePow", function() { return d3_scale__WEBPACK_IMPORTED_MODULE_0__["scalePow"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleIdentity", function() { return d3_scale__WEBPACK_IMPORTED_MODULE_0__["scaleIdentity"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleOrdinal", function() { return d3_scale__WEBPACK_IMPORTED_MODULE_0__["scaleOrdinal"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleSequential", function() { return d3_scale__WEBPACK_IMPORTED_MODULE_0__["scaleSequential"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleQuantize", function() { return d3_scale__WEBPACK_IMPORTED_MODULE_0__["scaleQuantize"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleQuantile", function() { return d3_scale__WEBPACK_IMPORTED_MODULE_0__["scaleQuantile"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeCategory10", function() { return d3_scale__WEBPACK_IMPORTED_MODULE_0__["schemeCategory10"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeCategory20", function() { return d3_scale__WEBPACK_IMPORTED_MODULE_0__["schemeCategory20"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "schemeCategory20b", function() { return d3_scale__WEBPACK_IMPORTED_MODULE_0__["schemeCategory20b"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleBand", function() { return d3_scale__WEBPACK_IMPORTED_MODULE_0__["scaleBand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scaleTime", function() { return d3_scale__WEBPACK_IMPORTED_MODULE_0__["scaleTime"]; });

/**
 * This file exports functions to create or modify the scale of a plot.
 */


/***/ }),

/***/ "./packages/muze/package.json":
/*!************************************!*\
  !*** ./packages/muze/package.json ***!
  \************************************/
/*! exports provided: name, private, version, description, homepage, license, author, contributors, main, keywords, repository, dependencies, default */
/***/ (function(module) {

module.exports = {"name":"muze","private":true,"version":"1.1.0","description":"Composable visualisation library for web with a data-first approach","homepage":"https://www.charts.com/muze","license":"MIT","author":"Charts.com <support@charts.com>","contributors":[{"name":"Akash Ghoswami","email":"akash@charts.com"},{"name":"Ranajit Banerjee","email":"ranajit.banerjee@charts.com","url":"https://github.com/ranajitbanerjee"},{"name":"Mridul Meharia","email":"mridul@charts.com","url":"https://github.com/mridulmeh"},{"name":"Subhash Haldar","email":"subhash@charts.com"},{"name":"Sandeep Acharya","email":"sandeep@charts.com"},{"name":"Rousan Ali","email":"rousan@charts.com","url":"https://rousan.io"},{"name":"Ujjal Kumar Dutta","email":"ujjal@charts.com"}],"main":"src/index.js","keywords":["muze","svg","vector","graphics","data-visualization","visualization","renderer","fusioncharts","relational","algebra","relation"],"repository":{"type":"git","url":"https://github.com/chartshq/muze"},"dependencies":{"@chartshq/layout":"^1.0.0","@chartshq/muze-firebolt":"^1.0.0","@chartshq/muze-legend":"^1.0.0","muze-utils":"^1.0.0","@chartshq/visual-cell":"^1.0.0","@chartshq/visual-group":"^1.0.0","@chartshq/visual-layer":"^1.0.0","@chartshq/visual-unit":"^1.0.0"}};

/***/ }),

/***/ "./packages/muze/src/action-model.js":
/*!*******************************************!*\
  !*** ./packages/muze/src/action-model.js ***!
  \*******************************************/
/*! exports provided: actionModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "actionModel", function() { return actionModel; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }



var defaultPolicy = function defaultPolicy(registrableComponents) {
  var aliases = registrableComponents.map(function (comp) {
    return comp.alias();
  });
  return {
    behaviours: {
      '*': function _(propagationPayload) {
        var propagationCanvas = propagationPayload.sourceCanvas;
        return propagationCanvas ? aliases.indexOf(propagationCanvas) !== -1 : true;
      }
    }
  };
};

var listenerFn = function listenerFn(canvas, fn) {
  return function () {
    var valueMatrix = canvas.composition().visualGroup.matrixInstance().value;
    valueMatrix.each(function (cell) {
      return fn(cell.valueOf().firebolt());
    });
  };
};

var canvasIterator = function canvasIterator(canvases, iteratorFn, cFn) {
  canvases.forEach(function (canvas) {
    var matrix = canvas.composition().visualGroup.matrixInstance().value;
    matrix.each(function (cell) {
      return iteratorFn(cell.valueOf().firebolt());
    });
    cFn && cFn(canvas); // Also register actions on canvas update

    var throwback = canvas._throwback;
    throwback.registerImmediateListener([muze_utils__WEBPACK_IMPORTED_MODULE_0__["CommonProps"].MATRIX_CREATED], listenerFn(canvas, iteratorFn));
  });
};
/**
 * This class is initiated only once in lifecycle and is reponsible for regisration of physical and behavioural
 * actions and side effects and the mapping between them.
 *
 * To get the instance of action model
 * ```
 *  const ActionModel = muze.ActionModel;
 * ```
 *
 * @public
 * @module ActionModel
 */


var ActionModel =
/*#__PURE__*/
function () {
  function ActionModel() {
    _classCallCheck(this, ActionModel);

    this._registrableComponents = [];
  }
  /**
   * Takes an array of canvases on which the physical and behavioural actions will get registered.
   *
   * @public
   * @param  {Canvas} components Array of canvases
   *
   * @return {ActionModel} Instance of action model.
   */


  _createClass(ActionModel, [{
    key: "for",
    value: function _for() {
      for (var _len = arguments.length, components = new Array(_len), _key = 0; _key < _len; _key++) {
        components[_key] = arguments[_key];
      }

      this._registrableComponents = components;
      return this;
    }
    /**
     * Registers physical actions on the canvases. It takes an object with key as the name of action and value having
     * the definition of the action.
     *
     * To register a {@link PhysicalAction},
     * ```
     *  const ActionModel = muze.ActionModel;
     *  ActionModel
     *       // Physical actions will be registered on these canvases.
     *      .for(canvas)
     *      .registerPhysicalActions({
     *          // Key is the name of physical action.
     *          ctrlClick: (firebolt) => (targetEl, behaviours) => {
     *              targetEl.on('click', function (data) {
     *                  const event = utils.getEvent();
     *                  const pos = utils.getClientPoint(event, this);
     *                  // Get the data point nearest to the mouse position.
     *                  const nearestPoint = firebolt.context.getNearestPoint(pos, {
     *                      data
     *                  });
     *                  // Prepare the payload
     *                  const payload = {
     *                      criteria: nearestPoint.id
     *                  };
     *                  behaviours.forEach((behaviour) => firebolt.dispatchBehaviour(behaviour, payload));
     *              });
     *          }
     *      });
     * ```
     * @public
     *
     * @param {Object} action Names of physical actions and their definitions.
     *
     * @return {ActionModel} Instance of the action model.
     */

  }, {
    key: "registerPhysicalActions",
    value: function registerPhysicalActions(action) {
      canvasIterator(this._registrableComponents, function (firebolt) {
        firebolt.registerPhysicalActions(action);
      }, function (canvas) {
        canvas.firebolt().registerPhysicalActions(action);
      });
      return this;
    }
    /**
     * Registers behavioural actions on the canvases. It takes definitions of the behavioural actions and registers
     * them on the canvases. Every behavioural action must inherit the {@link GenericBehaviour} class.
     *
     * To register a behavioural action
     * ```
     *  // Define a new behavioural action
     *  class SingleSelectBehaviour extends GenericBehaviour {
     *      static formalName () {
     *          return 'singleSelect';
     *      }
     *
     *      setSelectionSet (addSet, selectionSet) {
     *          if (addSet === null) {
     *              selectionSet.reset();
     *          } else if (addSet.length) {
     *              const existingAddSet = selectionSet.getExistingEntrySet(addSet);
     *              if (existingAddSet.length){
     *                  selectionSet.reset();
     *              } else {
     *               selectionSet.add(addSet);
     *              }
     *          } else {
     *              selectionSet.reset();
     *          }
     *      }
     * }
     * muze.ActionModel.registerBehaviouralActions(SingleSelectBehaviour);
     * ```
     *
     * @public
     *
     * @param {GenericBehaviour} actions Definition of behavioural actions.
     *
     * @return {ActionModel} Instance of action model.
     */

  }, {
    key: "registerBehaviouralActions",
    value: function registerBehaviouralActions() {
      for (var _len2 = arguments.length, actions = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        actions[_key2] = arguments[_key2];
      }

      canvasIterator(this._registrableComponents, function (firebolt) {
        firebolt.registerBehaviouralActions(actions);
      }, function (canvas) {
        canvas.firebolt().registerBehaviouralActions(actions);
      });
      return this;
    }
    /**
     * Registers the mapping of physical and behavioural actions. This mapping is used to establish which behavioural
     * actions should be dispatched on any triggering of physical actions.
     *
     * To map physical actions with behavioural actions,
     * ```
     *  muze.ActionModel.registerPhysicalBehaviouralMap({
     *      ctrlClick: {
     *          behaviours: ['select'] // This array must be the formal names of the behavioural actions.
     *      }
     *  });
     * ```
     *
     * @public
     * @param {Object} map Contains the physical and behavioural action map.
     * ```
     *   {
     *      // Name of the physical action
     *      click: {
     *          // Target element selector. This is an optional field. If not passed, then by default takes the
     *          // container element of visual unit.
     *          target: '.muze-layers-area path',
     *          // Behaviours which should be dispatched on triggering of the mapped physical action.
     *          behaviours: ['select']
     *      }
     *   }
     * ```
     *
     * @return {ActionModel} Instance of action model.
     */

  }, {
    key: "registerPhysicalBehaviouralMap",
    value: function registerPhysicalBehaviouralMap(map) {
      canvasIterator(this._registrableComponents, function (firebolt) {
        firebolt.registerPhysicalBehaviouralMap(map);
      }, function (canvas) {
        canvas.firebolt().registerPhysicalBehaviouralMap(map);
      });
      return this;
    }
    /**
     * Registers what behaviour to propagate on dispatch of a certain behavioural action. By default, when any
     * behavioural action is dispatched, then the same behavioural action gets propagated to all the other canvases.
     * This can be changed using this api.
     *
     * To register what behaviour should be propagated on dispatch of any behavioural action,
     * ```
     *  ActionModel.for(canvas1, canvas2).registerPropagationBehaviourMap({
     *      select: 'filter',
     *      brush: 'filter'
     *  });
     * ```
     *
     * @public
     * @param {Object} map Propagation behaviour map.
     *
     * @return {ActionModel} Instance of action model.
     */

  }, {
    key: "registerPropagationBehaviourMap",
    value: function registerPropagationBehaviourMap(map) {
      canvasIterator(this._registrableComponents, function (firebolt) {
        firebolt.registerPropagationBehaviourMap(map);
      }, function (canvas) {
        canvas.firebolt().registerPropagationBehaviourMap(map);
      });
      return this;
    }
    /**
     * Registers the mapping of side effects and behavioural actions. It takes an object which contains key as the
     * name of behavioural action and the side effects which will be linked to it.
     *
     * To map side effects to select behaviour,
     * ```
     *  muze.ActionModel.mapSideEffects({
     *      select: ['infoBox'] // This array must be the formal names of the side effects
     *  });
     * ```
     *
     * To map side effects to select behaviour, but disable all the default side effects attached with this behaviour,
     * ```
     *  muze.ActionModel.mapSideEffects({
     *      select: {
     *          effects: ['infoBox'],
     *          preventDefaultActions: true
     *      }
     *  });
     * @public
     * @param {Object} map Mapping of behavioural actions and side effects.
     * ```
     *     {
     *          select: ['infoBox']
     *     }
     * ```
     * @return {ActionModel} Instance of action model.
     */

  }, {
    key: "mapSideEffects",
    value: function mapSideEffects(map) {
      canvasIterator(this._registrableComponents, function (firebolt) {
        firebolt.mapSideEffects(map);
      }, function (canvas) {
        canvas.firebolt().mapSideEffects(map);
      });
      return this;
    }
    /**
     * Registers the side effects on the registered canvases. It takes definitions of side effects and registers them
     * on the canvases. Every side effect must inherit the base class {@link GenericSideEffect} or
     * {@link SpawnableSideEffect} or {@link SurrogateSideEffect} class.
     *
     * ```
     * // Define a custom side effect
     *  class InfoBox extends SpawnableSideEffect {
     *      static formalName () {
     *          return 'infoBox';
     *      }
     *
     *      apply (selectionSet) {
     *      }
     *  }
     *  muze.ActionModel.registerSideEffects(InfoBox);
     * ```
     * @public
     * @param  {GenericSideEffect} sideEffects Definition of side effects.
     *
     * @return {ActionModel} Instance of action model.
     */

  }, {
    key: "registerSideEffects",
    value: function registerSideEffects() {
      for (var _len3 = arguments.length, sideEffects = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        sideEffects[_key3] = arguments[_key3];
      }

      canvasIterator(this._registrableComponents, function (firebolt) {
        firebolt.registerSideEffects(sideEffects);
      }, function (canvas) {
        canvas.firebolt().registerSideEffects(sideEffects);
      });
      return this;
    }
    /**
     * Breaks the link between behavioural actions and physical actions. It takes an array of behavioural action
     * and it's physical action.
     *
     * To dissociate behavioural actions from physical actions
     * ```
     *  muze.ActionModel.dissociateBehaviour(['select', 'click'], ['highlight', 'hover']);
     * ```
     * @public
     * @param  {Array} maps Array of behavioural action and physical action.
     *
     * @return {ActionModel} Instance of action model.
     */

  }, {
    key: "dissociateBehaviour",
    value: function dissociateBehaviour() {
      for (var _len4 = arguments.length, maps = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
        maps[_key4] = arguments[_key4];
      }

      canvasIterator(this._registrableComponents, function (firebolt) {
        maps.forEach(function (val) {
          return firebolt.dissociateBehaviour(val[0], val[1]);
        });
      }, function (canvas) {
        maps.forEach(function (val) {
          return canvas.firebolt().dissociateBehaviour(val[0], val[1]);
        });
      });
      return this;
    }
    /**
     * Breaks the link between side effects and behavioural actions. It takes an array of formal names of the side
     * effects and it's linked behavioural action.
     *
     * To dissociate side effects from behavioural actions
     * ```
     *  muze.ActionModel.dissociateSideEffect(['crossline', 'highlight'], ['selectionBox', 'brush']);
     * ```
     * @public
     * @param  {Array} maps Array of side effects and behavioural actions.
     *
     * @return {ActionModel} Instance of action model.
     */

  }, {
    key: "dissociateSideEffect",
    value: function dissociateSideEffect() {
      for (var _len5 = arguments.length, maps = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
        maps[_key5] = arguments[_key5];
      }

      canvasIterator(this._registrableComponents, function (firebolt) {
        maps.forEach(function (val) {
          return firebolt.dissociateSideEffect(val[0], val[1]);
        });
      }, function (canvas) {
        maps.forEach(function (val) {
          return canvas.firebolt().dissociateSideEffect(val[0], val[1]);
        });
      });
      return this;
    }
    /**
     * By default cross interactivity is disabled between canvases. This enables cross interaction between the canvases
     * so that any action happening in one canvas gets dispatched on other canvases as well. An optional policy can also
     * be passed in this method. The policy can be used to control on which canvases the behavioural actions and
     * side effects gets dispatched.
     *
     * To just enable cross interactivity between two canvases,
     * ```
     *  ActionModel.for(canvas1, canvas2)
     *      .enableCrossInteractivity();
     * ```
     *
     * To enable cross interactivity but enable any behavioural action only when it is triggered from canvas1.
     * ```
     *  ActionModel.for(canvas1, canvas2)
     *      .enableCrossInteractivity({
     *          behaviours: {
     *              // Here * stands for any behavioural action name. We can also give any name of behavioural action
     *              // in place of this.
     *              '*': (propPayload, context) => {
     *                  return propPayload.sourceCanvas === canvas1.alias();
     *              }
     *          }
     *      });
     * ```
     *
     * To enable cross interactivity but enable tooltip effect if the action is propagated from canvas1,
     * ```
     *  ActionModel.for(canvas1, canvas2)
     *      .enableCrossInteractivity({
     *          sideEffects: {
     *              tooltip: (propPayload, context) => {
     *                  return propPayload.sourceCanvas === canvas1.alias();
     *              }
     *          }
     *      });
     * ```
     * @public
     * @param {Object} policy Policy definition.
     *
     * @return {ActionModel} Instance of action model.
     */

  }, {
    key: "enableCrossInteractivity",
    value: function enableCrossInteractivity() {
      var policy = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var registrableComponents = this._registrableComponents;
      var mergedPolicy = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, defaultPolicy(registrableComponents)), policy);
      registrableComponents.forEach(function (canvas) {
        canvas.firebolt().crossInteractionPolicy(mergedPolicy);
      });
      return this;
    }
  }]);

  return ActionModel;
}();

var actionModel = function () {
  return new ActionModel();
}();

/***/ }),

/***/ "./packages/muze/src/canvas/app-state.js":
/*!***********************************************!*\
  !*** ./packages/muze/src/canvas/app-state.js ***!
  \***********************************************/
/*! exports provided: APP_INITIAL_STATE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "APP_INITIAL_STATE", function() { return APP_INITIAL_STATE; });
var APP_INITIAL_STATE = {
  app: {
    group: {},
    units: {},
    layers: {},
    canvas: {}
  },
  local: {
    canvas: {},
    group: {},
    units: {},
    layers: {}
  }
};

/***/ }),

/***/ "./packages/muze/src/canvas/canvas.js":
/*!********************************************!*\
  !*** ./packages/muze/src/canvas/canvas.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Canvas; });
/* harmony import */ var _chartshq_layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/layout */ "./packages/layout/src/index.js");
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @chartshq/muze-firebolt */ "./packages/muze-firebolt/src/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../constants */ "./packages/muze/src/constants.js");
/* harmony import */ var _transaction_support__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../transaction-support */ "./packages/muze/src/transaction-support.js");
/* harmony import */ var _layout_maker__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./layout-maker */ "./packages/muze/src/canvas/layout-maker.js");
/* harmony import */ var _local_options__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./local-options */ "./packages/muze/src/canvas/local-options.js");
/* harmony import */ var _firebolt__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./firebolt */ "./packages/muze/src/canvas/firebolt/index.js");
/* harmony import */ var _options__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../options */ "./packages/muze/src/options.js");
/* harmony import */ var _app_state__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./app-state */ "./packages/muze/src/canvas/app-state.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./helper */ "./packages/muze/src/canvas/helper.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }












/**
 * Canvas is a logical component which houses a visualization by taking multiple variable in different encoding channel.
 * Canvas manages lifecycle of many other logical component and exposes one consistent interface for creation of chart.
 * Canvas is intialized from environment with settings from environment and singleton dependencies.
 *
 * To create an instance of canvas
 * ```
 *  const env = Muze();
 *  const canvas = env.canvas()
 * ```
 *
 *
 * @class
 * @public
 * @module Canvas
 */

var Canvas =
/*#__PURE__*/
function (_TransactionSupport) {
  _inherits(Canvas, _TransactionSupport);

  /**
   * Creates reactive property accessors.
   * - data
   * - height
   * - width
   * - config
   * This configs are retrieved from options.
   */
  function Canvas(globalDependencies) {
    var _this;

    _classCallCheck(this, Canvas);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(Canvas).call(this));
    _this._allOptions = Object.assign({}, _options__WEBPACK_IMPORTED_MODULE_8__["default"], _local_options__WEBPACK_IMPORTED_MODULE_6__["localOptions"]);
    _this._registry = {};
    _this._composition = {};
    _this._cachedProps = {};
    _this._alias = null;
    _this._renderedResolve = null;
    _this._renderedPromise = new Promise(function (resolve) {
      _this._renderedResolve = resolve;
    });
    _this._composition.layout = new _chartshq_layout__WEBPACK_IMPORTED_MODULE_0__["GridLayout"]();
    _this._store = new muze_utils__WEBPACK_IMPORTED_MODULE_1__["Store"](_app_state__WEBPACK_IMPORTED_MODULE_9__["APP_INITIAL_STATE"]);
    _this._throwback = new muze_utils__WEBPACK_IMPORTED_MODULE_1__["Store"](_defineProperty({}, muze_utils__WEBPACK_IMPORTED_MODULE_1__["CommonProps"].MATRIX_CREATED, false)); // Setters and getters will be mounted on this. The object will be mutated.

    var namespace = muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].CANVAS_LOCAL_NAMESPACE;

    var _transactor = Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["transactor"])(_assertThisInitialized(_assertThisInitialized(_this)), _options__WEBPACK_IMPORTED_MODULE_8__["default"], _this._store.model, {
      namespace: namespace
    }),
        _transactor2 = _slicedToArray(_transactor, 2),
        store = _transactor2[1];

    Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["transactor"])(_assertThisInitialized(_assertThisInitialized(_this)), _local_options__WEBPACK_IMPORTED_MODULE_6__["localOptions"], store, {
      namespace: namespace
    });
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["transactor"])(_assertThisInitialized(_assertThisInitialized(_this)), _local_options__WEBPACK_IMPORTED_MODULE_6__["canvasOptions"], store, {
      namespace: namespace
    });

    _this.dependencies(Object.assign({}, globalDependencies, _this._dependencies));

    _this.firebolt(new _firebolt__WEBPACK_IMPORTED_MODULE_7__["default"](_assertThisInitialized(_assertThisInitialized(_this)), {
      behavioural: _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_2__["behaviouralActions"],
      physical: _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_2__["physicalActions"],
      physicalBehaviouralMap: {}
    }, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_2__["sideEffects"], _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_2__["behaviourEffectMap"]));

    _this.alias("canvas-".concat(Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["getUniqueId"])()));

    _this.title('', {});

    _this.subtitle('', {});

    _this.legend({});

    _this.color({});

    _this.shape({});

    _this.size({});

    Object(_helper__WEBPACK_IMPORTED_MODULE_10__["setupChangeListener"])(_assertThisInitialized(_assertThisInitialized(_this))); // init layoutManager

    _this._layoutManager = Object(_helper__WEBPACK_IMPORTED_MODULE_10__["createLayoutManager"])();
    return _this;
  }
  /**
   * Retrieves an instance of layout which is responsible for layouting. Layout is responsible for creating faceted
   * presentation using table layout.
   *
   * @public
   *
   * @return {GridLayout} Instance of layout attached to canvas.
   */


  _createClass(Canvas, [{
    key: "layout",
    value: function layout() {
      if (arguments.length) {
        return this;
      }

      return this.composition().layout;
    }
    /**
     * Retrieves the composition for a canvas
     *
     * @public
     *
     * @return {object} Instances of the components which canvas requires to draw the full visualization.
     *      ```
     *          {
     *              layout: // Instance of {@link GridLayout}
     *              legend: // Instance of {@link Legend}
     *              subtitle: // Instance of {@link TextCell} using which the title is rendered
     *              title: // Instance of {@link TextCell} using which the title is rendered
     *              visualGroup: // Instance of {@link visualGroup}
     *          }
     *      ```
     */

  }, {
    key: "composition",
    value: function composition() {
      if (arguments.length) {
        return this;
      }

      return this._composition;
    }
  }, {
    key: "done",
    value: function done() {
      return this._renderedPromise;
    }
    /**
     * Sets or gets the alias of the canvas. Alias is a name by which the canvas can be referred.
     *
     * When setter
     * @param {string} alias Name of the alias.
     *
     * @return {Canvas} Instance of the canvas.
     *
     * When getter
     *
     * @return {string} Alias of canvas.
     *
     * @public
     */

  }, {
    key: "alias",
    value: function alias() {
      if (arguments.length) {
        var visualGroup = this.composition().visualGroup;
        this._alias = arguments.length <= 0 ? undefined : arguments[0];
        visualGroup && visualGroup.alias(this.alias());
        return this;
      }

      return this._alias;
    }
    /**
     * Creates an instance initiated with given settings.
     *
     * @param {Object} initialSettings Initial settings to be populated in the model
     * @param {Object} regEntry newly created instance with the initial settings
     * @param {Object} globalDependencies dependencies which will be created only once in the page
     *
     * @return {Object} newly created instance with the initial settings
     */

  }, {
    key: "firebolt",

    /**
     * Returns the instance of firebolt associated with this canvas. The firebolt instance can be used to dispatch a
     * behaviour dynamically on the canvas. This firebolt does not handle any physical actions. It is just used to
     * propagate the action to all the visual units in it's composition.
     *
     * @public
     *
     * @return {GroupFireBolt} Instance of firebolt associated with canvas.
     */
    value: function firebolt() {
      if (arguments.length) {
        this._firebolt = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._firebolt;
    }
    /**
     * Registry peoperty accessor
     *
     * @param {Object} reg plain old javascript object keyvalue pairs. Key containing module name and value contains
     * module definition class. The reg object has to be flat object of level 1.
     */

  }, {
    key: "registry",
    value: function registry() {
      for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
        params[_key] = arguments[_key];
      }

      if (params.length) {
        var components = Object.assign({}, params[0].components);
        var componentSubRegistry = Object.assign({}, params[0].componentSubRegistry);
        this._registry = {
          components: components,
          componentSubRegistry: componentSubRegistry
        };
        var initedComponents = Object(_helper__WEBPACK_IMPORTED_MODULE_10__["initCanvas"])(this); // @todo is it okay to continue this tight behaviour? If not use a resolver to resolve diff component type.

        this._composition.visualGroup = initedComponents[0];
        Object(_helper__WEBPACK_IMPORTED_MODULE_10__["createGroupState"])(this);
        this.composition().visualGroup.alias(this.alias()).store(this._store);
        return this;
      }

      return this._registry;
    }
    /*
     * Prepare dependencies for top level elements
     */

  }, {
    key: "dependencies",
    value: function dependencies() {
      if (arguments.length) {
        this._dependencies = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      } // @todo prepare dependencies here.


      return this._dependencies;
    }
    /**
     *
     *
     * @param {*} lifeCycles
     *
     * @memberof Canvas
     */

  }, {
    key: "lifeCycle",
    value: function lifeCycle(lifeCycles) {
      var lifeCycleManager = this.dependencies().lifeCycleManager;

      if (lifeCycles) {
        lifeCycleManager.register(lifeCycles);
        return this;
      }

      return lifeCycleManager;
    }
    /**
     *
     *
     * @readonly
     * @memberof Canvas
     */

  }, {
    key: "legend",
    value: function legend() {
      if (arguments.length) {
        return this;
      }

      return this.composition().legend;
    }
    /**
     * Returns a promise for various {@link LifecycleEvents} of the various components of canvas. The promise gets
     * resolved once the particular event gets completed.
     *
     * To use this,
     * ```
     *      canvas.once('layer.drawn').then(() => {
     *          // Do any post drawing work here.
     *      });
     * ```
     * @public
     *
     * @param {string} eventName Name of the lifecycle event.
     *
     * @return {Promise} A pending promise waiting for resolve to be called.
     */

  }, {
    key: "once",
    value: function once(eventName) {
      var lifeCycleManager = this.dependencies().lifeCycleManager;
      return lifeCycleManager.retrieve(eventName);
    }
    /**
     * Internal function to trigger render, this method is cognizant of all the properties of the core modules and
     * establish a passive reactivity. Passive reactivity is not always a bad thing :)
     * @internal
     */

  }, {
    key: "render",
    value: function render() {
      var mount = this.mount(); // removeChild(mount);

      var lifeCycleManager = this.dependencies().lifeCycleManager; // Get render details including arrangement and measurement

      var renderDetails = Object(_layout_maker__WEBPACK_IMPORTED_MODULE_5__["getRenderDetails"])(this, mount);
      lifeCycleManager.notify({
        client: this,
        action: 'beforedraw'
      }); // Prepare the layout by triggering the matrix calculation

      Object(_layout_maker__WEBPACK_IMPORTED_MODULE_5__["prepareLayout"])(this.layout(), renderDetails);

      this._layoutManager.dimension({
        height: renderDetails.measurement.canvasHeight,
        width: renderDetails.measurement.canvasWidth
      });

      this._layoutManager.renderAt(mount); // Render each component


      Object(_layout_maker__WEBPACK_IMPORTED_MODULE_5__["renderLayout"])(this, renderDetails);
      Object(_helper__WEBPACK_IMPORTED_MODULE_10__["setLayoutInfForUnits"])(this); // setLabelRotation

      Object(_helper__WEBPACK_IMPORTED_MODULE_10__["setLabelRotationForAxes"])(this);
    }
    /**
     * Returns the instances of x axis of the canvas. It returns the instances in a two dimensional array form.
     *
     * ```
     *   // The first element in the sub array represents the top axis and the second element represents the bottom
     *   // axis.
     *   [
     *      [X1, X2],
     *      [X3, X4]
     *   ]
     * ```
     * @public
     *
     * @return {Array.<Array>} Instances of x axis.
     */

  }, {
    key: "xAxes",
    value: function xAxes() {
      return this.composition().visualGroup.getAxes('x');
    }
    /**
     * Returns the instances of y axis of the canvas. It returns the instances in a two dimensional array form.
     *
     * ```
     *   // The first element in the sub array represents the left axis and the second element represents the right
     *   // axis.
     *   [
     *      [Y1, Y2],
     *      [Y3, Y4]
     *   ]
     * ```
     * @public
     * @return {Array.<Array>} Instances of y axis.
     */

  }, {
    key: "yAxes",
    value: function yAxes() {
      return this.composition().visualGroup.getAxes('y');
    }
    /**
     * Returns all the retinal axis of the canvas. Color, shape and size axis are combinedly called retinal axis.
     *
     * @public
     * @return {Object} Instances of retinal axis.
     *          ```
     *              {
     *                  color: [ColorAxis], // Array of color axis.
     *                  shape: [ShapeAxis], // Array of shape axis.
     *                  size: [SizeAxis] // Array of size axis.
     *              }
     *          ```
     */

  }, {
    key: "getRetinalAxes",
    value: function getRetinalAxes() {
      var visualGroup = this.composition().visualGroup;
      return visualGroup.getAxes(_constants__WEBPACK_IMPORTED_MODULE_3__["RETINAL"]);
    }
  }, {
    key: "mount",
    value: function mount() {
      if (arguments.length) {
        var value = arguments.length <= 0 ? undefined : arguments[0];

        if (typeof (arguments.length <= 0 ? undefined : arguments[0]) === 'string') {
          value = Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["selectElement"])(arguments.length <= 0 ? undefined : arguments[0]).node();
        }

        this._mount = value;
        return this;
      }

      return this._mount;
    }
  }], [{
    key: "withSettings",
    value: function withSettings(initialSettings, regEntry, globalDependencies) {
      var instance = new Canvas(globalDependencies);

      for (var key in initialSettings) {
        instance[key](initialSettings[key]);
      } // set registry for instance


      instance.registry(regEntry);
      return instance;
    }
    /**
     *
     *
     * @static
     *
     * @memberof Canvas
     */

  }, {
    key: "formalName",
    value: function formalName() {
      return 'canvas';
    }
  }]);

  return Canvas;
}(_transaction_support__WEBPACK_IMPORTED_MODULE_4__["default"]);



/***/ }),

/***/ "./packages/muze/src/canvas/component-resolver.js":
/*!********************************************************!*\
  !*** ./packages/muze/src/canvas/component-resolver.js ***!
  \********************************************************/
/*! exports provided: arrangeComponents */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrangeComponents", function() { return arrangeComponents; });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants */ "./packages/muze/src/constants.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


/**
 *
 *
 * @param {*} context
 *
 */

var arrangeComponents = function arrangeComponents(context) {
  var _titleLayouts;

  var legendConfig = context.config().legend;
  var titleConfig = context.title()[1];
  var subtitleConfig = context.subtitle()[1];
  var titleLayouts = (_titleLayouts = {}, _defineProperty(_titleLayouts, "".concat(_constants__WEBPACK_IMPORTED_MODULE_0__["TOP"], "-").concat(_constants__WEBPACK_IMPORTED_MODULE_0__["TOP"]), [_constants__WEBPACK_IMPORTED_MODULE_0__["TITLE"], _constants__WEBPACK_IMPORTED_MODULE_0__["SUB_TITLE"], _constants__WEBPACK_IMPORTED_MODULE_0__["GROUP"]]), _defineProperty(_titleLayouts, "".concat(_constants__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"], "-").concat(_constants__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"]), [_constants__WEBPACK_IMPORTED_MODULE_0__["GROUP"], _constants__WEBPACK_IMPORTED_MODULE_0__["SUB_TITLE"], _constants__WEBPACK_IMPORTED_MODULE_0__["TITLE"]]), _defineProperty(_titleLayouts, "".concat(_constants__WEBPACK_IMPORTED_MODULE_0__["TOP"], "-").concat(_constants__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"]), [_constants__WEBPACK_IMPORTED_MODULE_0__["TITLE"], _constants__WEBPACK_IMPORTED_MODULE_0__["GROUP"], _constants__WEBPACK_IMPORTED_MODULE_0__["SUB_TITLE"]]), _defineProperty(_titleLayouts, "".concat(_constants__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"], "-").concat(_constants__WEBPACK_IMPORTED_MODULE_0__["TOP"]), [_constants__WEBPACK_IMPORTED_MODULE_0__["SUB_TITLE"], _constants__WEBPACK_IMPORTED_MODULE_0__["GROUP"], _constants__WEBPACK_IMPORTED_MODULE_0__["TITLE"]]), _titleLayouts);
  var legendLayouts = [[_constants__WEBPACK_IMPORTED_MODULE_0__["LEGEND"], _constants__WEBPACK_IMPORTED_MODULE_0__["LAYOUT"]], [_constants__WEBPACK_IMPORTED_MODULE_0__["LAYOUT"], _constants__WEBPACK_IMPORTED_MODULE_0__["LEGEND"]]];
  var titlePosition = titleConfig.position || _constants__WEBPACK_IMPORTED_MODULE_0__["TOP"];
  var subtitlePosition = subtitleConfig.position || _constants__WEBPACK_IMPORTED_MODULE_0__["TOP"];
  return {
    headers: titleLayouts["".concat(titlePosition, "-").concat(subtitlePosition)],
    legends: legendConfig.position === _constants__WEBPACK_IMPORTED_MODULE_0__["LEFT"] || legendConfig.position === _constants__WEBPACK_IMPORTED_MODULE_0__["TOP"] ? legendLayouts[0] : legendLayouts[1]
  };
};

/***/ }),

/***/ "./packages/muze/src/canvas/component-wrapper-maker.js":
/*!*************************************************************!*\
  !*** ./packages/muze/src/canvas/component-wrapper-maker.js ***!
  \*************************************************************/
/*! exports provided: componentWrapperMaker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "componentWrapperMaker", function() { return componentWrapperMaker; });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants */ "./packages/muze/src/constants.js");
/* harmony import */ var _components_headerComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/headerComponent */ "./packages/muze/src/canvas/components/headerComponent.js");
/* harmony import */ var _components_legendComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/legendComponent */ "./packages/muze/src/canvas/components/legendComponent.js");
/* harmony import */ var _components_scroll_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/scroll-component */ "./packages/muze/src/canvas/components/scroll-component.js");
/* harmony import */ var _components_grid_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/grid-component */ "./packages/muze/src/canvas/components/grid-component.js");
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./defaults */ "./packages/muze/src/canvas/defaults.js");
/* harmony import */ var _layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../layout/src/enums/constants */ "./packages/layout/src/enums/constants.js");
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }







 // Mapping between types of headers and their required configs for wrapper creation

var headerMap = {
  title: {
    headerCell: 'titleCell',
    configType: _defaults__WEBPACK_IMPORTED_MODULE_5__["TITLE_CONFIG"]
  },
  subtitle: {
    headerCell: 'subtitleCell',
    configType: _defaults__WEBPACK_IMPORTED_MODULE_5__["SUB_TITLE_CONFIG"]
  }
};
/**
 * Creates the wrapper for the header, i.e., title and subtitle to be used in the tree layout
 *
 *
 * @param {string} headerType type of header: title/subtite
 * @param {LayoutManager} layoutManager instance of Layout Manager which manages the layouting of the components
 * @param {Object} renderDetails Extra details required for rendering the headers
 * @return {Instance} Returns the respective wrappers
 */

var createHeaderWrapper = function createHeaderWrapper(headerType, layoutManager, renderDetails) {
  var wrapper = null;
  var components = renderDetails.components,
      layoutConfig = renderDetails.layoutConfig;
  var _headerMap$headerType = headerMap[headerType],
      headerCell = _headerMap$headerType.headerCell,
      configType = _headerMap$headerType.configType;
  var target = {
    target: _defaults__WEBPACK_IMPORTED_MODULE_5__["CANVAS"]
  };

  if (components.headers && components.headers[headerCell]) {
    var headerConfig = layoutConfig[headerType];
    var header = components.headers[headerCell];
    headerConfig = Object.assign({}, headerConfig, _objectSpread({
      classPrefix: layoutConfig.classPrefix
    }, target, {
      alignWith: "".concat(_layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_6__["ROW_MATRIX_INDEX"][0], "-").concat(_layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_6__["COLUMN_MATRIX_INDEX"][1]),
      alignment: _defaults__WEBPACK_IMPORTED_MODULE_5__["LAYOUT_ALIGN"].LEFT,
      className: configType.className
    }));

    if (headerConfig.align === _layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_6__["CENTER"]) {
      headerConfig.alignment = null;
      headerConfig.alignWith = null;
    }

    if (headerConfig.align === _constants__WEBPACK_IMPORTED_MODULE_0__["RIGHT"]) {
      headerConfig.alignment = _constants__WEBPACK_IMPORTED_MODULE_0__["RIGHT"];
    }

    var wrapperParams = {
      name: headerType,
      component: header,
      config: headerConfig
    };
    var existingComponent = layoutManager.getComponent(headerType);

    if (existingComponent) {
      wrapper = existingComponent.updateWrapper(wrapperParams);
    } else {
      wrapper = new _components_headerComponent__WEBPACK_IMPORTED_MODULE_1__["default"](wrapperParams);
    }
  }

  return wrapper;
}; // Mapping between types of scrollBars and their required configs for wrapper creation


var scrollBarMap = function scrollBarMap(config) {
  return {
    vertical: {
      componentName: 'verticalScrollBar',
      width: 'thickness',
      height: 'layoutBasedMeasure',
      layoutBasedMeasure: _constants__WEBPACK_IMPORTED_MODULE_0__["HEIGHT"],
      viewMeasure: 'viewHeight',
      rowAlign: 1,
      colAlign: config.align === 'right' ? 2 : 0,
      position: config.align,
      alignment: _constants__WEBPACK_IMPORTED_MODULE_0__["TOP"]
    },
    horizontal: {
      componentName: 'horizontalScrollBar',
      width: 'layoutBasedMeasure',
      layoutBasedMeasure: _constants__WEBPACK_IMPORTED_MODULE_0__["WIDTH"],
      viewMeasure: 'viewWidth',
      height: 'thickness',
      rowAlign: config.align === 'top' ? 0 : 2,
      colAlign: 1,
      position: config.align,
      alignment: _constants__WEBPACK_IMPORTED_MODULE_0__["LEFT"]
    }
  };
};
/**
 * Creates the wrapper for the scroller, i.e., horizontal and vertical to be used in the tree layout
 *
 *
 * @param {string} scrollBarType type of scrollbar: horizontal/vertical
 * @param {LayoutManager} layoutManager instance of Layout Manager which manages the layouting of the components
 * @param {Object} renderDetails Extra details required for rendering the headers
 * @param {GridLayout} grid Instance of the grid layout
 * @return {Instance} Returns the respective wrappers
 */


var createScrollBarWrapper = function createScrollBarWrapper(scrollBarType, layoutManager, renderDetails, grid) {
  var scrollBarWrapper = null;
  var layoutConfig = renderDetails.layoutConfig;
  var target = {
    target: _defaults__WEBPACK_IMPORTED_MODULE_5__["CANVAS"]
  };
  var scrollBar = layoutConfig.scrollBar;

  var _grid$viewInfo = grid.viewInfo(),
      layoutDimensions = _grid$viewInfo.layoutDimensions;

  var actualCenterMeasures = layoutDimensions.actualCenterMeasures,
      unitHeights = layoutDimensions.unitHeights,
      unitWidths = layoutDimensions.unitWidths;
  var _scrollBarMap$scrollB = scrollBarMap(scrollBar[scrollBarType])[scrollBarType],
      componentName = _scrollBarMap$scrollB.componentName,
      layoutBasedMeasure = _scrollBarMap$scrollB.layoutBasedMeasure,
      width = _scrollBarMap$scrollB.width,
      height = _scrollBarMap$scrollB.height,
      rowAlign = _scrollBarMap$scrollB.rowAlign,
      colAlign = _scrollBarMap$scrollB.colAlign,
      viewMeasure = _scrollBarMap$scrollB.viewMeasure,
      position = _scrollBarMap$scrollB.position,
      alignment = _scrollBarMap$scrollB.alignment;
  var dimensions = {
    thickness: scrollBar.thickness,
    layoutBasedMeasure: layoutDimensions[viewMeasure][1]
  };
  var isScroll = grid.scrollInfo()[scrollBarType];
  var totalLength = actualCenterMeasures[layoutBasedMeasure];
  var viewLength = layoutDimensions[viewMeasure][1];
  var scrollConfig = Object.assign({}, _objectSpread({
    classPrefix: layoutConfig.classPrefix
  }, target, {
    scrollBarComponentConfig: _objectSpread({}, scrollBar, {
      classPrefix: layoutConfig.classPrefix
    }),
    type: scrollBarType,
    alignWith: "".concat(_layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_6__["ROW_MATRIX_INDEX"][rowAlign], "-").concat(_layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_6__["COLUMN_MATRIX_INDEX"][colAlign]),
    alignment: alignment,
    position: position
  }));
  var wrapperParams = {
    name: componentName,
    config: scrollConfig,
    dimensions: {
      width: dimensions[width],
      height: dimensions[height],
      totalLength: totalLength,
      viewLength: viewLength,
      unitHeights: unitHeights,
      unitWidths: unitWidths
    }
  };
  var existingComponent = layoutManager.getComponent(componentName);

  if (!isScroll) {
    existingComponent && existingComponent.remove();
    return null;
  }

  if (existingComponent) {
    scrollBarWrapper = existingComponent.updateWrapper(wrapperParams);
  } else {
    scrollBarWrapper = new _components_scroll_component__WEBPACK_IMPORTED_MODULE_3__["default"](wrapperParams);
  }

  return scrollBarWrapper;
};
/**
 * Creates the wrapper for the legend to be used in the tree layout
 *
 *
 * @param {LayoutManager} layoutManager instance of Layout Manager which manages the layouting of the components
 * @param {Object} renderDetails Extra details required for rendering the headers
 * @return {Instance} Returns the respective wrappers
 */


var createLegendWrapper = function createLegendWrapper(layoutManager, renderDetails) {
  var legendWrapper = null;
  var components = renderDetails.components,
      layoutConfig = renderDetails.layoutConfig,
      measurement = renderDetails.measurement;
  var target = {
    target: _defaults__WEBPACK_IMPORTED_MODULE_5__["CANVAS"]
  };

  if (components.legends && components.legends.length) {
    var legendConfig = _objectSpread({}, layoutConfig.legend, target, {
      measurement: measurement
    });

    var wrapperParams = {
      name: _constants__WEBPACK_IMPORTED_MODULE_0__["LEGEND"],
      component: components.legends,
      config: legendConfig
    };
    var existingComponent = layoutManager.getComponent(_constants__WEBPACK_IMPORTED_MODULE_0__["LEGEND"]);

    if (existingComponent) {
      legendWrapper = existingComponent.updateWrapper(wrapperParams);
    } else {
      legendWrapper = new _components_legendComponent__WEBPACK_IMPORTED_MODULE_2__["default"](wrapperParams);
    }
  }

  return legendWrapper;
};
/**
 * Creates the wrapper for the grid layout to be used in the tree layout
 *
 *
 * @param {LayoutManager} layoutManager instance of Layout Manager which manages the layouting of the components
 * @param {Object} renderDetails Extra details required for rendering the headers
 * @param {GridLayout} grid Instance of the grid layout
 * @return {Instance} Returns the respective wrappers
 */


var gridLayoutWrapper = function gridLayoutWrapper(layoutManager, renderDetails, grid) {
  var gridWrapper = null;
  var target = {
    target: _defaults__WEBPACK_IMPORTED_MODULE_5__["CANVAS"]
  };
  var layoutConfig = renderDetails.layoutConfig;

  var config = _objectSpread({}, target, {
    pagination: layoutConfig.pagination,
    classPrefix: layoutConfig.classPrefix,
    dimensions: {
      height: 0,
      width: 0
    }
  });

  var wrapperParams = {
    name: _defaults__WEBPACK_IMPORTED_MODULE_5__["GRID"],
    component: grid,
    config: config
  };
  var existingComponent = layoutManager.getComponent(_defaults__WEBPACK_IMPORTED_MODULE_5__["GRID"]);

  if (existingComponent) {
    gridWrapper = existingComponent.updateWrapper(wrapperParams);
  } else {
    gridWrapper = new _components_grid_component__WEBPACK_IMPORTED_MODULE_4__["default"](wrapperParams);
  }

  return gridWrapper;
};
/**
 * Responsible for providing the wrapper creators for every component in Muze.
 * This function, when called, returns the set of components and their respective wrappers.
 *
 *
 *
 * @param {LayoutManager} layoutManager instance of Layout Manager which manages the layouting of the components
 * @param {GridLayout} grid Instance of the grid layout
 * @param {Object} renderDetails Extra details required for rendering the headers
 * @return {Instance} Returns the respective wrappers for each component
 */


var componentWrapperMaker = function componentWrapperMaker(layoutManager, grid, renderDetails) {
  return {
    title: createHeaderWrapper(_constants__WEBPACK_IMPORTED_MODULE_0__["TITLE"], layoutManager, renderDetails),
    subtitle: createHeaderWrapper(_constants__WEBPACK_IMPORTED_MODULE_0__["SUB_TITLE"], layoutManager, renderDetails),
    legend: createLegendWrapper(layoutManager, renderDetails),
    grid: gridLayoutWrapper(layoutManager, renderDetails, grid),
    verticalScrollBar: createScrollBarWrapper(_constants__WEBPACK_IMPORTED_MODULE_0__["VERTICAL"], layoutManager, renderDetails, grid),
    horizontalScrollBar: createScrollBarWrapper(_constants__WEBPACK_IMPORTED_MODULE_0__["HORIZONTAL"], layoutManager, renderDetails, grid)
  };
};

/***/ }),

/***/ "./packages/muze/src/canvas/components/grid-component.js":
/*!***************************************************************!*\
  !*** ./packages/muze/src/canvas/components/grid-component.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return GridComponent; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _muze_chart_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./muze-chart-component */ "./packages/muze/src/canvas/components/muze-chart-component.js");
/* harmony import */ var _matrix_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./matrix-component */ "./packages/muze/src/canvas/components/matrix-component.js");
/* harmony import */ var _layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../layout/src/enums/constants */ "./packages/layout/src/enums/constants.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





/**
 * Based on the type of scroll, it changes the scrollLeft/scrollTop property of the specific
 * elements based on the scroll distance provided
 *
 *
 */

var applyScrollAction = function applyScrollAction(elem, classPrefix, scollDistance, type) {
  Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(elem).selectAll(".".concat(classPrefix, "-grid")).property(type, scollDistance);
};
/**
 * Applies the action of the scroll by actually scrolling the respective matrices based on the
 * type of scroll. It returns a function which has both the scroll methods available
 *
 * @return {Object} contains the horizontal and vertical scroll actions on the grid component
 */


var scrollActionApplier = function scrollActionApplier(movement, context) {
  var classPrefix = context.params.config.classPrefix;
  return {
    horizontal: function horizontal() {
      [0, 1, 2].forEach(function (e) {
        return applyScrollAction("#".concat(context.component[e][1].renderAt()), classPrefix, movement, 'scrollLeft');
      });
    },
    vertical: function vertical() {
      [0, 1, 2].forEach(function (e) {
        return applyScrollAction("#".concat(context.component[1][e].renderAt()), classPrefix, movement, 'scrollTop');
      });
    }
  };
};

var GridComponent =
/*#__PURE__*/
function (_MuzeComponent) {
  _inherits(GridComponent, _MuzeComponent);

  function GridComponent(params) {
    var _this;

    _classCallCheck(this, GridComponent);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(GridComponent).call(this, params.name, params.config.dimensions, 0));
    _this.gridComponents = [];

    _this.setParams(params);

    return _this;
  }

  _createClass(GridComponent, [{
    key: "sanitizeGrid",
    value: function sanitizeGrid() {
      var height = 0;
      var width = 0;

      var _this$component$viewI = this.component.viewInfo(),
          viewMatricesInfo = _this$component$viewI.viewMatricesInfo,
          layoutDimensions = _this$component$viewI.layoutDimensions;

      var scrollInfo = this.component.scrollInfo();

      for (var i = 0; i < 3; i++) {
        if (!(this.gridComponents.length && this.gridComponents[i] instanceof Array)) {
          this.gridComponents[i] = [];
        }

        for (var j = 0; j < 3; j++) {
          var matrixDim = {
            height: layoutDimensions.viewHeight[i],
            width: layoutDimensions.viewWidth[j]
          };
          var matrix = viewMatricesInfo.matrices["".concat(_layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_3__["ROW_MATRIX_INDEX"][i])][j];
          var matrixName = "".concat(_layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_3__["ROW_MATRIX_INDEX"][i], "-").concat(_layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_3__["COLUMN_MATRIX_INDEX"][j]);
          var matrixConfig = {
            dimensions: matrixDim,
            border: layoutDimensions.border,
            classPrefix: this.params.config.classPrefix,
            scrollInfo: scrollInfo,
            row: _layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_3__["ROW_MATRIX_INDEX"][i],
            column: j
          };

          if (this.gridComponents[i][j] instanceof _muze_chart_component__WEBPACK_IMPORTED_MODULE_1__["default"]) {
            this.gridComponents[i][j].updateWrapper({
              name: matrixName,
              component: matrix,
              config: matrixConfig
            });
          } else {
            var matrixWrapper = new _matrix_component__WEBPACK_IMPORTED_MODULE_2__["default"]({
              name: matrixName,
              component: matrix,
              config: matrixConfig
            });
            this.gridComponents[i].push(matrixWrapper);
          }

          if (i === 0) {
            width += matrixDim.width;
          }

          if (j === 0) {
            height += matrixDim.height;
          }
        }
      }

      this.boundBox({
        height: height,
        width: width
      });
      this.component = this.gridComponents;
      this.allComponents = this.gridComponents;
    }
  }, {
    key: "scrollBarManager",
    value: function scrollBarManager() {
      if (arguments.length) {
        this._scrollBarManager = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._scrollBarManager;
    }
    /**
     * Attaches a mousewheel listener to the center matrix, based on which the scrolling can occur.
     * It uses the scroll component to change the position of the scroller, which ultimately scrolls the center matrix
     *
     *
     * @return {GridComponent} Instance of the GridComponent
     */

  }, {
    key: "attachScrollListener",
    value: function attachScrollListener() {
      var _this2 = this;

      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])("#".concat(this.component[1][1].renderAt())).on('wheel', function () {
        var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
        var wheelDeltaX = event.wheelDeltaX,
            wheelDeltaY = event.wheelDeltaY; // Prevent default behaviour and stop propagating

        event.preventDefault();
        event.stopPropagation(); // Scrolling horizontally

        if (wheelDeltaX !== 0 && Math.abs(wheelDeltaX) > Math.abs(wheelDeltaY)) {
          _this2.scrollBarManager().triggerScrollBarAction('horizontal', wheelDeltaX);
        } // Scrolling Vertically


        if (wheelDeltaY !== 0 && Math.abs(wheelDeltaX) < Math.abs(wheelDeltaY)) {
          _this2.scrollBarManager().triggerScrollBarAction('vertical', wheelDeltaY);
        }
      });
      return this;
    }
  }, {
    key: "performScrollAction",
    value: function performScrollAction(direction, movedView) {
      scrollActionApplier(movedView, this)[direction]();
      return this;
    }
  }, {
    key: "getBoundBox",
    value: function getBoundBox() {
      var _this$component$0$0$b = this.component[0][0].boundBox(),
          top = _this$component$0$0$b.top,
          left = _this$component$0$0$b.left;

      var _this$boundBox = this.boundBox(),
          height = _this$boundBox.height,
          width = _this$boundBox.width;

      return {
        top: top,
        left: left,
        height: height,
        width: width
      };
    }
  }, {
    key: "updateWrapper",
    value: function updateWrapper(params) {
      this.name(params.name);
      this.boundBox(params.config.dimensions);
      this.setParams(params);
      return this;
    }
  }, {
    key: "setParams",
    value: function setParams(params) {
      this.component = params.component;
      this.params = params;
      this.target(params.config.target);
      this.className(params.config.className);
      this.sanitizeGrid();
      return this;
    }
  }]);

  return GridComponent;
}(_muze_chart_component__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./packages/muze/src/canvas/components/headerComponent.js":
/*!****************************************************************!*\
  !*** ./packages/muze/src/canvas/components/headerComponent.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return HeaderComponent; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _muze_chart_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./muze-chart-component */ "./packages/muze/src/canvas/components/muze-chart-component.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../constants */ "./packages/muze/src/constants.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





var HeaderComponent =
/*#__PURE__*/
function (_MuzeComponent) {
  _inherits(HeaderComponent, _MuzeComponent);

  function HeaderComponent(params) {
    var _this;

    _classCallCheck(this, HeaderComponent);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(HeaderComponent).call(this, params.name, params.component.getLogicalSpace(), 0));

    _this.setParams(params);

    return _this;
  }

  _createClass(HeaderComponent, [{
    key: "renderHeader",
    value: function renderHeader(container) {
      var layoutConfig = this.params.config;
      container = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(container);
      var align = layoutConfig.align;
      var sel = container.selectAll(".".concat(layoutConfig.classPrefix, "-inner-container")).data([this.name]);
      sel.exit().remove();
      var selEnter = sel.enter().append('div');
      var cont = selEnter.merge(sel);
      cont.classed("".concat(layoutConfig.classPrefix, "-inner-container"), true);

      var _this$boundBox = this.boundBox(),
          height = _this$boundBox.height,
          width = _this$boundBox.width;

      this.component.setAvailableSpace(width, height);
      this.component && this.component.render(cont.node());
      cont.selectAll('div').classed("".concat(layoutConfig.classPrefix, "-inner-content"), true);
      cont.style('width', "".concat(100, "%"));

      if (layoutConfig && this.component) {
        cont.style('float', _constants__WEBPACK_IMPORTED_MODULE_2__["LEFT"]).style('text-align', align); // .style(`padding-${position === TOP ? BOTTOM : TOP}`, `${padding}px`);
      }
    }
  }, {
    key: "draw",
    value: function draw(container) {
      this.renderHeader(container || document.getElementById(this.renderAt()));
    }
  }, {
    key: "updateWrapper",
    value: function updateWrapper(params) {
      this.name(params.name);
      this.boundBox(params.component.getLogicalSpace());
      return this;
    }
  }, {
    key: "setParams",
    value: function setParams(params) {
      this.component = params.component;
      this.params = params;
      this.target(params.config.target);
      this.position(params.config.position);
      this.className(params.config.className);
      this.alignWith(params.config.alignWith);
      this.alignment(params.config.alignment);
    }
  }, {
    key: "setSpatialConfig",
    value: function setSpatialConfig(conf) {
      this.boundBox({
        top: conf.y,
        left: conf.x,
        width: conf.width,
        height: conf.height
      });
      this.renderAt(conf.renderAt);
    }
  }]);

  return HeaderComponent;
}(_muze_chart_component__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./packages/muze/src/canvas/components/legendComponent.js":
/*!****************************************************************!*\
  !*** ./packages/muze/src/canvas/components/legendComponent.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LegendComponent; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _muze_chart_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./muze-chart-component */ "./packages/muze/src/canvas/components/muze-chart-component.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../constants */ "./packages/muze/src/constants.js");
/* harmony import */ var _layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../layout/src/enums/constants */ "./packages/layout/src/enums/constants.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }






function defaultAlignmentHelper(position) {
  var alignment = null;
  var alignWith = "".concat(_layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_3__["ROW_MATRIX_INDEX"][1], "-").concat(_layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_3__["COLUMN_MATRIX_INDEX"][1]);

  switch (position) {
    case _constants__WEBPACK_IMPORTED_MODULE_2__["TOP"]:
    case _constants__WEBPACK_IMPORTED_MODULE_2__["BOTTOM"]:
      alignment = _constants__WEBPACK_IMPORTED_MODULE_2__["HORIZONTAL_CENTER"];
      break;

    case _constants__WEBPACK_IMPORTED_MODULE_2__["LEFT"]:
    case _constants__WEBPACK_IMPORTED_MODULE_2__["RIGHT"]:
      alignment = _constants__WEBPACK_IMPORTED_MODULE_2__["VERTICAL_CENTER"];
      break;

    default:
      alignment = _constants__WEBPACK_IMPORTED_MODULE_2__["VERTICAL_CENTER"];
  }

  return {
    alignment: alignment,
    alignWith: alignWith
  };
}

var LegendComponent =
/*#__PURE__*/
function (_MuzeComponent) {
  _inherits(LegendComponent, _MuzeComponent);

  function LegendComponent(params) {
    var _this;

    _classCallCheck(this, LegendComponent);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(LegendComponent).call(this, params.name, params.config.measurement.legendSpace, 0));

    _this.setParams(params);

    return _this;
  }

  _createClass(LegendComponent, [{
    key: "renderLegend",
    value: function renderLegend(container) {
      container = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(container);
      var sectionComponents = [];
      var _this$params$config = this.params.config,
          position = _this$params$config.position,
          classPrefix = _this$params$config.classPrefix;
      var legendMount = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'div', [this.components], "".concat(classPrefix, "-inner-content"), {}, function (d) {
        return d;
      });
      legendMount.classed("".concat(classPrefix, "-legend"), true);
      var align = position === _constants__WEBPACK_IMPORTED_MODULE_2__["LEFT"] || position === _constants__WEBPACK_IMPORTED_MODULE_2__["RIGHT"] ? _constants__WEBPACK_IMPORTED_MODULE_2__["VERTICAL"] : _constants__WEBPACK_IMPORTED_MODULE_2__["HORIZONTAL"];
      var legWidth = this.newDimensions.width;
      var legHeight = this.newDimensions.height;
      [container, legendMount].forEach(function (elem) {
        elem.style('width', "".concat(Math.floor(legWidth), "px")).style('height', "".concat(legHeight, "px")).style('float', _constants__WEBPACK_IMPORTED_MODULE_2__["LEFT"]);
      });

      if (align === _constants__WEBPACK_IMPORTED_MODULE_2__["VERTICAL"]) {
        var sections = -1;
        var currHeight = legHeight;
        var currWidth = 0;
        this.components.forEach(function (legendInfo) {
          var leg = legendInfo.legend;

          if (leg.measurement().height > currHeight) {
            sections++;
            currWidth = 0;
            currHeight = legHeight;
          } else {
            sections < 0 && sections++;
          }

          sectionComponents[sections] = sectionComponents[sections] || [];
          currHeight -= Math.min(leg.measurement().height, currHeight);
          currWidth = Math.max(Math.min(leg.measurement().width, leg.measurement().maxWidth), currWidth);
          sectionComponents[sections].push({
            legend: leg,
            legendHeight: legHeight,
            legendWidth: currWidth
          });
        });
        var mount = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(legendMount, ['div'], sectionComponents, "".concat(classPrefix, "-legend-section")); // mount.each((d, i) => selectElement(this).classed(`${classPrefix}-legend-section-${i}`, true));

        mount.classed("".concat(classPrefix, "-legend-vertical-section"), true).style('width', function (d) {
          return "".concat(d[0].legendWidth, "px");
        });
        Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(mount, ['div'], function (d) {
          return d;
        }, "".concat(classPrefix, "-legend-components"), {}, function (d) {
          return d.legend.id();
        }).each(function (d) {
          d.legend.mount(this);
        }).style('width', function (d) {
          return "".concat(d.legendWidth, "px");
        });
      } else {
        var _mount = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(legendMount, 'div', [1], "".concat(classPrefix, "-legend-section"));

        _mount.classed("".concat(classPrefix, "-legend-horizontal-section"), true);

        _mount.classed("".concat(classPrefix, "-legend-section-", 0), true).style('width', "".concat(legWidth, "px"));

        Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(_mount, 'div', this.components, "".concat(classPrefix, "-legend-components"), {}, function (d) {
          return d.legend.id();
        }).each(function (d) {
          d.legend.mount(this);
        }).style('width', function (d) {
          return "".concat(d.legend.measurement().width, "px");
        });
      }
    }
  }, {
    key: "draw",
    value: function draw(container) {
      this.renderLegend(container || document.getElementById(this.renderAt()));
    }
  }, {
    key: "updateWrapper",
    value: function updateWrapper(params) {
      this.name(params.name);
      this.boundBox(params.config.measurement.legendSpace);
      this.setParams(params);
      return this;
    }
  }, {
    key: "setParams",
    value: function setParams(params) {
      this.components = params.component;
      this.params = params;
      this.target(params.config.target);
      this.position(params.config.position);

      var _defaultAlignmentHelp = defaultAlignmentHelper(params.config.position),
          alignWith = _defaultAlignmentHelp.alignWith,
          alignment = _defaultAlignmentHelp.alignment;

      this.className(params.config.className);
      this.alignWith(params.config.alignWith || alignWith);
      this.alignment(params.config.alignment || alignment);
    }
  }]);

  return LegendComponent;
}(_muze_chart_component__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./packages/muze/src/canvas/components/matrix-component.js":
/*!*****************************************************************!*\
  !*** ./packages/muze/src/canvas/components/matrix-component.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MatrixComponent; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _layout_src_grid_layout_span_maker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../layout/src/grid-layout/span-maker */ "./packages/layout/src/grid-layout/span-maker.js");
/* harmony import */ var _layout_src_grid_layout_border_helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../layout/src/grid-layout/border-helper */ "./packages/layout/src/grid-layout/border-helper.js");
/* harmony import */ var _layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../layout/src/enums/constants */ "./packages/layout/src/enums/constants.js");
/* harmony import */ var _muze_chart_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./muze-chart-component */ "./packages/muze/src/canvas/components/muze-chart-component.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../constants */ "./packages/muze/src/constants.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }








var renderPlaceholders = function renderPlaceholders(cells) {
  // Rendering content within placeholders
  cells.each(function (cell) {
    cell.placeholder.render(this);
  });
};

var MatrixComponent =
/*#__PURE__*/
function (_MuzeComponent) {
  _inherits(MatrixComponent, _MuzeComponent);

  function MatrixComponent(params) {
    var _this;

    _classCallCheck(this, MatrixComponent);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(MatrixComponent).call(this, params.name, params.config.dimensions, 0));

    _this.setParams(params);

    _this.className(params.config.className);

    return _this;
  }

  _createClass(MatrixComponent, [{
    key: "applyScroll",
    value: function applyScroll(container) {
      var row = this.params.config.row;
      var column = this.params.config.column;
      var _this$params$config$s = this.params.config.scrollInfo,
          horizontal = _this$params$config$s.horizontal,
          vertical = _this$params$config$s.vertical;
      container.style(_constants__WEBPACK_IMPORTED_MODULE_5__["OVERFLOW"], _constants__WEBPACK_IMPORTED_MODULE_5__["VISIBLE"]);
      container.style(_constants__WEBPACK_IMPORTED_MODULE_5__["WIDTH"], _constants__WEBPACK_IMPORTED_MODULE_5__["AUTO"]);
      container.style(_constants__WEBPACK_IMPORTED_MODULE_5__["HEIGHT"], _constants__WEBPACK_IMPORTED_MODULE_5__["AUTO"]);

      if (horizontal && column === 1) {
        container.style(_constants__WEBPACK_IMPORTED_MODULE_5__["OVERFLOW"], _constants__WEBPACK_IMPORTED_MODULE_5__["HIDDEN"]);
        container.style(_constants__WEBPACK_IMPORTED_MODULE_5__["WIDTH"], '100%');
      }

      if (vertical && row === _layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_3__["CENTER"]) {
        container.style(_constants__WEBPACK_IMPORTED_MODULE_5__["OVERFLOW"], _constants__WEBPACK_IMPORTED_MODULE_5__["HIDDEN"]);
        container.style(_constants__WEBPACK_IMPORTED_MODULE_5__["HEIGHT"], '100%');
      }
    }
  }, {
    key: "renderMatrix",
    value: function renderMatrix(mountPoint) {
      // Creating containers for each matrix individually
      var classPrefix = this.params.config.classPrefix;
      var row = this.params.config.row;
      var column = this.params.config.column;
      var dimensions = this.params.config.dimensions;
      var border = this.params.config.border; // Creating containers for each matrix individually

      var containerForMatrix = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(mountPoint, 'div', [1], "".concat(classPrefix, "-grid-").concat(row, "-").concat(column + 1)).classed("".concat(classPrefix, "-grid-").concat(row), true).classed("".concat(classPrefix, "-grid"), true);
      this.applyScroll(containerForMatrix);

      var _cellSpanMaker = Object(_layout_src_grid_layout_span_maker__WEBPACK_IMPORTED_MODULE_1__["cellSpanMaker"])(this.component, row, column),
          viewMatrix = _cellSpanMaker.viewMatrix,
          spans = _cellSpanMaker.spans; // Rendering the table components


      var _this$renderTable = this.renderTable(containerForMatrix, "".concat(classPrefix, "-grid"), viewMatrix),
          cells = _this$renderTable.cells;

      Object(_layout_src_grid_layout_span_maker__WEBPACK_IMPORTED_MODULE_1__["applySpans"])(cells, spans, {
        dimensions: dimensions,
        border: border
      }, "".concat(row, "-").concat(column));
      renderPlaceholders(cells);
      cells.exit().each(function (cell) {
        cell.placeholder.remove();
      });
      Object(_layout_src_grid_layout_border_helper__WEBPACK_IMPORTED_MODULE_2__["applyBorders"])(cells, border, row, column);
    }
  }, {
    key: "renderTable",
    value: function renderTable(mount, className, rowData) {
      var table = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(mount, 'table', ['layout'], "".concat(className, "-table"));
      var body = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(table, 'tbody', ['layout'], "".concat(className, "-body"));
      var rows = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(body, 'tr', rowData, "".concat(className, "-tr"));
      var cells = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(rows, 'td', function (d, i) {
        return d.filter(function (e) {
          return e !== null;
        }).map(function (e) {
          return {
            placeholder: e,
            rowIndex: i
          };
        });
      }, "".concat(className, "-td"), {}, function (key) {
        return key.placeholder.id;
      });
      return {
        table: table,
        body: body,
        rows: rows,
        cells: cells
      };
    }
  }, {
    key: "draw",
    value: function draw(container) {
      this.renderMatrix(container || document.getElementById(this.renderAt()));
    }
  }, {
    key: "updateWrapper",
    value: function updateWrapper(params) {
      this.name(params.name);
      this.boundBox(params.config.dimensions);
      this.setParams(params);
      return this;
    }
  }, {
    key: "setParams",
    value: function setParams(params) {
      this.component = params.component;
      this.params = params;
      this.target(params.config.target);
      this.position(_layout_src_enums_constants__WEBPACK_IMPORTED_MODULE_3__["TOP"]);
      this.className(params.config.className);
    }
  }]);

  return MatrixComponent;
}(_muze_chart_component__WEBPACK_IMPORTED_MODULE_4__["default"]);



/***/ }),

/***/ "./packages/muze/src/canvas/components/muze-chart-component.js":
/*!*********************************************************************!*\
  !*** ./packages/muze/src/canvas/components/muze-chart-component.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MuzeComponent; });
/* harmony import */ var _layout_src_tree_layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../layout/src/tree-layout */ "./packages/layout/src/tree-layout/index.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



var MuzeComponent =
/*#__PURE__*/
function (_LayoutComponent) {
  _inherits(MuzeComponent, _LayoutComponent);

  function MuzeComponent() {
    _classCallCheck(this, MuzeComponent);

    return _possibleConstructorReturn(this, _getPrototypeOf(MuzeComponent).apply(this, arguments));
  }

  _createClass(MuzeComponent, [{
    key: "getLogicalSpace",
    value: function getLogicalSpace() {
      var _this$boundBox = this.boundBox(),
          width = _this$boundBox.width,
          height = _this$boundBox.height;

      return {
        width: width,
        height: height
      };
    }
  }, {
    key: "setSpatialConfig",
    value: function setSpatialConfig(conf) {
      this.boundBox({
        top: conf.y,
        left: conf.x
      });
      this.newDimensions = {
        width: conf.width,
        height: conf.height
      };
      this.renderAt(conf.renderAt);
    }
  }, {
    key: "getBoundBox",
    value: function getBoundBox() {
      return this.boundBox();
    }
  }, {
    key: "updateWrapper",
    value: function updateWrapper() {
      throw Error('Update is not implemented');
    }
  }, {
    key: "setParams",
    value: function setParams() {
      throw Error('set params is not implemented');
    }
  }]);

  return MuzeComponent;
}(_layout_src_tree_layout__WEBPACK_IMPORTED_MODULE_0__["LayoutComponent"]);



/***/ }),

/***/ "./packages/muze/src/canvas/components/scroll-bar-maker/helper.js":
/*!************************************************************************!*\
  !*** ./packages/muze/src/canvas/components/scroll-bar-maker/helper.js ***!
  \************************************************************************/
/*! exports provided: getUnitPositions, createScrollBarArrow, createScrollBarRect, applyRectClick, registerListeners, scrollContainerHelper */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUnitPositions", function() { return getUnitPositions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createScrollBarArrow", function() { return createScrollBarArrow; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createScrollBarRect", function() { return createScrollBarRect; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyRectClick", function() { return applyRectClick; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerListeners", function() { return registerListeners; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scrollContainerHelper", function() { return scrollContainerHelper; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _scroll_bar_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scroll-bar.scss */ "./packages/muze/src/canvas/components/scroll-bar-maker/scroll-bar.scss");
/* harmony import */ var _scroll_bar_scss__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_scroll_bar_scss__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../constants */ "./packages/muze/src/constants.js");



var d3Drag = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getD3Drag"])();
var arrowSizeMap = {
  left: _constants__WEBPACK_IMPORTED_MODULE_2__["WIDTH"],
  right: _constants__WEBPACK_IMPORTED_MODULE_2__["WIDTH"],
  top: _constants__WEBPACK_IMPORTED_MODULE_2__["HEIGHT"],
  bottom: _constants__WEBPACK_IMPORTED_MODULE_2__["HEIGHT"]
};
var getUnitPositions = function getUnitPositions(unitMeasures, totalLength, viewLength) {
  var currentLen = 0;
  var measures = unitMeasures.primary && unitMeasures.primary.length ? unitMeasures.primary : unitMeasures.secondary;
  return measures.map(function (e) {
    var unitPosition = currentLen * 100 / (totalLength - viewLength);
    currentLen += e;
    return unitPosition;
  });
};
var createScrollBarArrow = function createScrollBarArrow(mount, type, config) {
  var classPrefix = config.classPrefix,
      thickness = config.thickness;
  var arrow = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(mount, 'div', [type], "".concat(classPrefix, "-scroll-arrow-").concat(type));
  arrow.classed("".concat(classPrefix, "-scroll-arrow"), true);
  arrow.style(arrowSizeMap[type], "".concat(thickness, "px"));
  var chevron = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(arrow, 'div', [1], "".concat(classPrefix, "-scroll-arrow-chevron"));
  chevron.attr('id', "".concat(classPrefix, "-scroll-arrow-chevron-").concat(type));
  return arrow;
};
var createScrollBarRect = function createScrollBarRect(mount, config) {
  var classPrefix = config.classPrefix;
  var rect = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(mount, 'div', [1], "".concat(classPrefix, "-scroll-rect"));
  var mover = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(rect, 'div', [1], "".concat(classPrefix, "-scroll-mover"));
  return {
    rect: rect,
    mover: mover
  };
};
var applyRectClick = function applyRectClick(scrollMaker, moverRect) {
  var rect = moverRect.rect;
  rect.on('click', function () {
    var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
    scrollMaker.emptyScrollAreaClick(event);
  });
};

var applyMoverDrag = function applyMoverDrag(scrollMaker, moverRect) {
  var startPos = {};
  var moverStartPos = 0;
  var endPos = {};
  var mover = moverRect.mover,
      rect = moverRect.rect;
  var rectStartPos = rect.node().getBoundingClientRect();
  mover.call(d3Drag().on('start', function () {
    var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
    moverStartPos = mover.node().getBoundingClientRect();
    startPos = {
      x: event.x,
      y: event.y
    };
  }).on('drag', function () {
    var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
    var window = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getWindow"])();
    endPos = {
      x: event.x,
      y: event.y
    };
    var distanceMoved = {
      x: endPos.x - startPos.x,
      y: endPos.y - startPos.y
    };
    var actualPosition = {
      x: moverStartPos.x + distanceMoved.x - rectStartPos.x + window.pageXOffset,
      y: moverStartPos.y + distanceMoved.y - rectStartPos.y + window.pageYOffset
    };
    scrollMaker.changeMoverPosition(actualPosition);
  }));
};

var applyScrollMouseDownAction = function applyScrollMouseDownAction(moverRect, scrollMaker, speed) {
  var mover = moverRect.mover,
      rect = moverRect.rect;

  var _mover$node$getBoundi = mover.node().getBoundingClientRect(),
      x = _mover$node$getBoundi.x,
      y = _mover$node$getBoundi.y;

  var _rect$node$getBoundin = rect.node().getBoundingClientRect(),
      rectX = _rect$node$getBoundin.x,
      rectY = _rect$node$getBoundin.y;

  scrollMaker.changeMoverPosition({
    x: x - rectX + speed,
    y: y - rectY + speed
  });
};

var registerListenerOnArrow = function registerListenerOnArrow(scrollMaker, moverRect, arrowType, speed) {
  var timer = '';
  var arrow = scrollMaker._components[arrowType];
  var isTouchDevice = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["hasTouch"])();
  arrow.on(isTouchDevice ? 'touchstart' : 'mousedown', function () {
    var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
    event.preventDefault();
    timer = setInterval(function () {
      applyScrollMouseDownAction(moverRect, scrollMaker, speed);
    }, 100);
  }).on(isTouchDevice ? 'touchend' : 'mouseup', function () {
    var event = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"])();
    event.preventDefault();
    clearInterval(timer);
  }).on('click', function () {
    applyScrollMouseDownAction(moverRect, scrollMaker, speed);
  });
};

var registerListeners = function registerListeners(scrollMaker) {
  var moverRect = scrollMaker._components.moverRect;
  var speed = scrollMaker.config().speed;
  registerListenerOnArrow(scrollMaker, moverRect, 'prevArrow', -speed);
  applyMoverDrag(scrollMaker, moverRect);
  applyRectClick(scrollMaker, moverRect);
  registerListenerOnArrow(scrollMaker, moverRect, 'nextArrow', speed);
};
var scrollContainerHelper = function scrollContainerHelper(mountPoint, config, dimensions, type) {
  var classPrefix = config.classPrefix;
  var scrollBarContainer = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(mountPoint), 'div', [1], "#".concat(classPrefix, "-scroll-bar-").concat(type));
  scrollBarContainer.classed("".concat(classPrefix, "-scroll-bar"), true);
  scrollBarContainer.style(_constants__WEBPACK_IMPORTED_MODULE_2__["WIDTH"], "".concat(dimensions.width, "px"));
  scrollBarContainer.style(_constants__WEBPACK_IMPORTED_MODULE_2__["HEIGHT"], "".concat(dimensions.height, "px"));
  return scrollBarContainer;
};

/***/ }),

/***/ "./packages/muze/src/canvas/components/scroll-bar-maker/horizontal-scroll-maker.js":
/*!*****************************************************************************************!*\
  !*** ./packages/muze/src/canvas/components/scroll-bar-maker/horizontal-scroll-maker.js ***!
  \*****************************************************************************************/
/*! exports provided: HorizontalScrollMaker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HorizontalScrollMaker", function() { return HorizontalScrollMaker; });
/* harmony import */ var _scroll_maker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scroll-maker */ "./packages/muze/src/canvas/components/scroll-bar-maker/scroll-maker.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./packages/muze/src/canvas/components/scroll-bar-maker/helper.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../constants */ "./packages/muze/src/constants.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var HorizontalScrollMaker =
/*#__PURE__*/
function (_ScrollMaker) {
  _inherits(HorizontalScrollMaker, _ScrollMaker);

  function HorizontalScrollMaker() {
    _classCallCheck(this, HorizontalScrollMaker);

    return _possibleConstructorReturn(this, _getPrototypeOf(HorizontalScrollMaker).apply(this, arguments));
  }

  _createClass(HorizontalScrollMaker, [{
    key: "createScroll",
    value: function createScroll(mountPoint) {
      var dimensions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.logicalSpace();
      var config = this.config();

      var _get$call = _get(_getPrototypeOf(HorizontalScrollMaker.prototype), "createScroll", this).call(this, mountPoint, config, dimensions),
          scrollBarContainer = _get$call.scrollBarContainer;

      var prevArrow = Object(_helper__WEBPACK_IMPORTED_MODULE_1__["createScrollBarArrow"])(scrollBarContainer, 'left', config);
      var moverRect = Object(_helper__WEBPACK_IMPORTED_MODULE_1__["createScrollBarRect"])(scrollBarContainer, config);
      var nextArrow = Object(_helper__WEBPACK_IMPORTED_MODULE_1__["createScrollBarArrow"])(scrollBarContainer, 'right', config);
      var mover = moverRect.mover,
          rect = moverRect.rect;

      var _this$logicalSpace = this.logicalSpace(),
          height = _this$logicalSpace.height,
          width = _this$logicalSpace.width,
          totalLength = _this$logicalSpace.totalLength,
          viewLength = _this$logicalSpace.viewLength,
          unitWidths = _this$logicalSpace.unitWidths;

      var scrollBarWithouArrowLength = width - height * 2;
      rect.style(_constants__WEBPACK_IMPORTED_MODULE_2__["WIDTH"], "".concat(dimensions.width - height * 2, "px"));
      rect.style(_constants__WEBPACK_IMPORTED_MODULE_2__["HEIGHT"], "".concat(100, "%"));
      mover.style(_constants__WEBPACK_IMPORTED_MODULE_2__["WIDTH"], "".concat(viewLength * scrollBarWithouArrowLength / totalLength, "px"));
      mover.style(_constants__WEBPACK_IMPORTED_MODULE_2__["HEIGHT"], "".concat(100, "%"));
      mover.style(_constants__WEBPACK_IMPORTED_MODULE_2__["LEFT"], "".concat(0, "px"));
      this._components = {
        prevArrow: prevArrow,
        nextArrow: nextArrow,
        moverRect: moverRect,
        scrollBarContainer: scrollBarContainer
      };
      this._scrollBarWithouArrowLength = scrollBarWithouArrowLength;
      this.unitPositions(Object(_helper__WEBPACK_IMPORTED_MODULE_1__["getUnitPositions"])(unitWidths, totalLength, viewLength));
      this.registerListeners();
    }
  }, {
    key: "emptyScrollAreaClick",
    value: function emptyScrollAreaClick(event) {
      var _this$_components$mov = this._components.moverRect,
          mover = _this$_components$mov.mover,
          rect = _this$_components$mov.rect;
      var speed = this.config().speed;

      var _mover$node$getBoundi = mover.node().getBoundingClientRect(),
          x = _mover$node$getBoundi.x,
          y = _mover$node$getBoundi.y;

      var _rect$node$getBoundin = rect.node().getBoundingClientRect(),
          rectX = _rect$node$getBoundin.x,
          rectY = _rect$node$getBoundin.y;

      var positionAdjuster = speed * 10;

      if (event.x < x) {
        positionAdjuster = -speed * 10;
      }

      this.changeMoverPosition({
        x: x - rectX + positionAdjuster,
        y: y - rectY + positionAdjuster
      });
    }
  }, {
    key: "changeMoverPosition",
    value: function changeMoverPosition(newPosition) {
      var currentPos;
      var _this$_components$mov2 = this._components.moverRect,
          mover = _this$_components$mov2.mover,
          rect = _this$_components$mov2.rect;
      var rectStartPos = rect.node().getBoundingClientRect();
      var moverPos = mover.node().getBoundingClientRect();

      var _this$logicalSpace2 = this.logicalSpace(),
          totalLength = _this$logicalSpace2.totalLength;

      if (newPosition.x < 0) {
        currentPos = 0;
      } else if (newPosition.x + moverPos.width > rectStartPos.width) {
        currentPos = rectStartPos.width - moverPos.width;
      } else {
        currentPos = newPosition.x;
      }

      mover.style(_constants__WEBPACK_IMPORTED_MODULE_2__["LEFT"], "".concat(currentPos, "px"));
      var totalDistance = this._scrollBarWithouArrowLength;
      var movedViewLength = currentPos * totalLength / totalDistance;
      this.manager().performAttachedScrollFunction(this.constructor.type(), movedViewLength);
    }
  }, {
    key: "scrollDeltaTo",
    value: function scrollDeltaTo(delta) {
      var _this$_components$mov3 = this._components.moverRect,
          mover = _this$_components$mov3.mover,
          rect = _this$_components$mov3.rect;
      var moverPos = mover.node().getBoundingClientRect();
      var rectStartPos = rect.node().getBoundingClientRect();
      this.changeMoverPosition({
        y: 0,
        x: moverPos.x - rectStartPos.x - delta
      });
      return this;
    }
    /**
     * Scrolls to the specific point in the page. The input is provided as a percentage (0 - 100)
     *
     * @public
     *
     * @param {number} scrollPercentage Its the percentage based on which the scroll action will occur
     * @return {HorizontalScrollMaker} Instance of the HorizontalScrollMaker
     */

  }, {
    key: "scrollTo",
    value: function scrollTo(scrollPercentage) {
      var mover = this._components.moverRect.mover;
      var moverPos = mover.node().getBoundingClientRect();
      var movement = scrollPercentage * (this._scrollBarWithouArrowLength - moverPos.width) / 100;
      this.changeMoverPosition({
        y: 0,
        x: movement
      });
      return this;
    }
  }], [{
    key: "type",

    /**
     * Describes the type of the ScrollMaker
     *
     * @public
     *
     * @return {String} Returns the type of scroll maker: horizontal
     */
    value: function type() {
      return _constants__WEBPACK_IMPORTED_MODULE_2__["HORIZONTAL"];
    }
  }]);

  return HorizontalScrollMaker;
}(_scroll_maker__WEBPACK_IMPORTED_MODULE_0__["ScrollMaker"]);

/***/ }),

/***/ "./packages/muze/src/canvas/components/scroll-bar-maker/props.js":
/*!***********************************************************************!*\
  !*** ./packages/muze/src/canvas/components/scroll-bar-maker/props.js ***!
  \***********************************************************************/
/*! exports provided: PROPS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PROPS", function() { return PROPS; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");

var PROPS = {
  config: {
    sanitization: function sanitization(context, value) {
      value = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(context._config, value);
      return value;
    }
  },
  manager: {},
  unitPositions: {},
  logicalSpace: {}
};

/***/ }),

/***/ "./packages/muze/src/canvas/components/scroll-bar-maker/scroll-bar.scss":
/*!******************************************************************************!*\
  !*** ./packages/muze/src/canvas/components/scroll-bar-maker/scroll-bar.scss ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/muze/src/canvas/components/scroll-bar-maker/scroll-maker.js":
/*!******************************************************************************!*\
  !*** ./packages/muze/src/canvas/components/scroll-bar-maker/scroll-maker.js ***!
  \******************************************************************************/
/*! exports provided: ScrollMaker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScrollMaker", function() { return ScrollMaker; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./packages/muze/src/canvas/components/scroll-bar-maker/helper.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./props */ "./packages/muze/src/canvas/components/scroll-bar-maker/props.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }




var ScrollMaker =
/*#__PURE__*/
function () {
  function ScrollMaker() {
    _classCallCheck(this, ScrollMaker);

    this._components = {};
    this._logicalSpace = {};

    this._attachedScrollAction = function () {};

    this._config = {
      thickness: 10,
      speed: 2
    };
    this._unitPositions = null;
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(this, _props__WEBPACK_IMPORTED_MODULE_2__["PROPS"]);
  }

  _createClass(ScrollMaker, [{
    key: "emptyScrollAreaClick",
    value: function emptyScrollAreaClick() {
      throw new muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"]('Method not implemented');
    }
  }, {
    key: "changeMoverPosition",
    value: function changeMoverPosition() {
      throw new muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"]('Method not implemented');
    }
  }, {
    key: "scrollTo",
    value: function scrollTo() {
      throw new muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"]('Method not implemented');
    }
  }, {
    key: "scrollDeltaTo",
    value: function scrollDeltaTo() {
      throw new muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"]('Method not implemented');
    }
  }, {
    key: "createScroll",
    value: function createScroll(mountPoint) {
      var config = this.config();
      return {
        scrollBarContainer: Object(_helper__WEBPACK_IMPORTED_MODULE_1__["scrollContainerHelper"])(mountPoint, config, this.logicalSpace(), this.constructor.type())
      };
    }
  }, {
    key: "attachScrollAction",
    value: function attachScrollAction(externalScrollAction) {
      this._attachedScrollAction = externalScrollAction;
      return this;
    }
  }, {
    key: "detachScrollAction",
    value: function detachScrollAction() {
      this._attachedScrollAction = function () {};

      return this;
    }
  }, {
    key: "getLogicalSpace",
    value: function getLogicalSpace() {
      return this.logicalSpace();
    }
  }, {
    key: "registerListeners",
    value: function registerListeners() {
      Object(_helper__WEBPACK_IMPORTED_MODULE_1__["registerListeners"])(this);

      return this;
    }
  }, {
    key: "remove",
    value: function remove() {
      this._components.scrollBarContainer.remove();

      return this;
    }
  }], [{
    key: "type",
    value: function type() {
      throw new muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"]('Method not implemented');
    }
  }]);

  return ScrollMaker;
}();

/***/ }),

/***/ "./packages/muze/src/canvas/components/scroll-bar-maker/vertical-scroll-maker.js":
/*!***************************************************************************************!*\
  !*** ./packages/muze/src/canvas/components/scroll-bar-maker/vertical-scroll-maker.js ***!
  \***************************************************************************************/
/*! exports provided: VerticalScrollMaker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VerticalScrollMaker", function() { return VerticalScrollMaker; });
/* harmony import */ var _scroll_maker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scroll-maker */ "./packages/muze/src/canvas/components/scroll-bar-maker/scroll-maker.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper */ "./packages/muze/src/canvas/components/scroll-bar-maker/helper.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../constants */ "./packages/muze/src/constants.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var VerticalScrollMaker =
/*#__PURE__*/
function (_ScrollMaker) {
  _inherits(VerticalScrollMaker, _ScrollMaker);

  function VerticalScrollMaker() {
    _classCallCheck(this, VerticalScrollMaker);

    return _possibleConstructorReturn(this, _getPrototypeOf(VerticalScrollMaker).apply(this, arguments));
  }

  _createClass(VerticalScrollMaker, [{
    key: "createScroll",
    value: function createScroll(mountPoint) {
      var dimensions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.logicalSpace();
      var config = this.config();

      var _get$call = _get(_getPrototypeOf(VerticalScrollMaker.prototype), "createScroll", this).call(this, mountPoint, dimensions),
          scrollBarContainer = _get$call.scrollBarContainer;

      var prevArrow = Object(_helper__WEBPACK_IMPORTED_MODULE_1__["createScrollBarArrow"])(scrollBarContainer, 'top', config);
      var moverRect = Object(_helper__WEBPACK_IMPORTED_MODULE_1__["createScrollBarRect"])(scrollBarContainer, config);
      var nextArrow = Object(_helper__WEBPACK_IMPORTED_MODULE_1__["createScrollBarArrow"])(scrollBarContainer, 'bottom', config);
      var mover = moverRect.mover,
          rect = moverRect.rect;

      var _this$logicalSpace = this.logicalSpace(),
          height = _this$logicalSpace.height,
          width = _this$logicalSpace.width,
          totalLength = _this$logicalSpace.totalLength,
          viewLength = _this$logicalSpace.viewLength,
          unitHeights = _this$logicalSpace.unitHeights;

      var scrollBarWithouArrowLength = height - width * 2;
      rect.style(_constants__WEBPACK_IMPORTED_MODULE_2__["HEIGHT"], "".concat(scrollBarWithouArrowLength, "px"));
      rect.style(_constants__WEBPACK_IMPORTED_MODULE_2__["WIDTH"], "".concat(100, "%"));
      mover.style(_constants__WEBPACK_IMPORTED_MODULE_2__["WIDTH"], "".concat(100, "%"));
      mover.style(_constants__WEBPACK_IMPORTED_MODULE_2__["HEIGHT"], "".concat(viewLength * scrollBarWithouArrowLength / totalLength, "px"));
      mover.style(_constants__WEBPACK_IMPORTED_MODULE_2__["TOP"], "".concat(0, "px"));
      this._components = {
        prevArrow: prevArrow,
        nextArrow: nextArrow,
        moverRect: moverRect,
        scrollBarContainer: scrollBarContainer
      };
      this._scrollBarWithouArrowLength = scrollBarWithouArrowLength;
      this.unitPositions(Object(_helper__WEBPACK_IMPORTED_MODULE_1__["getUnitPositions"])(unitHeights, totalLength, viewLength));
      this.registerListeners();
    }
  }, {
    key: "emptyScrollAreaClick",
    value: function emptyScrollAreaClick(event) {
      var _this$_components$mov = this._components.moverRect,
          mover = _this$_components$mov.mover,
          rect = _this$_components$mov.rect;
      var speed = this.config().speed;

      var _mover$node$getBoundi = mover.node().getBoundingClientRect(),
          x = _mover$node$getBoundi.x,
          y = _mover$node$getBoundi.y;

      var _rect$node$getBoundin = rect.node().getBoundingClientRect(),
          rectX = _rect$node$getBoundin.x,
          rectY = _rect$node$getBoundin.y;

      var positionAdjuster = speed * 10;

      if (event.y < y) {
        positionAdjuster = -speed * 10;
      }

      this.changeMoverPosition({
        x: x - rectX + positionAdjuster,
        y: y - rectY + positionAdjuster
      });
    }
  }, {
    key: "changeMoverPosition",
    value: function changeMoverPosition(newPosition) {
      var currentPos;
      var _this$_components$mov2 = this._components.moverRect,
          mover = _this$_components$mov2.mover,
          rect = _this$_components$mov2.rect;

      var _this$logicalSpace2 = this.logicalSpace(),
          totalLength = _this$logicalSpace2.totalLength;

      var rectStartPos = rect.node().getBoundingClientRect();
      var moverPos = mover.node().getBoundingClientRect();

      if (newPosition.y < 0) {
        currentPos = 0;
      } else if (newPosition.y + moverPos.height > rectStartPos.height) {
        currentPos = rectStartPos.height - moverPos.height;
      } else {
        currentPos = newPosition.y;
      }

      mover.style(_constants__WEBPACK_IMPORTED_MODULE_2__["TOP"], "".concat(currentPos, "px"));
      var totalDistance = this._scrollBarWithouArrowLength;
      var movedViewLength = currentPos * totalLength / totalDistance;
      this.manager().performAttachedScrollFunction(this.constructor.type(), movedViewLength);
    }
    /**
     * Scrolls based on the actual pixel value provided. Since it's a delta change, the input will be
     * a delta between (-Infinity, Infinity), based on which the scroll will occur. Only a delta movement in
     * scroll occurs
     *
     * @public
     *
     * @param {number} delta Based on which the scroll will have a delta change in position
     * @return {VerticalScrollMaker} Instance of the VerticalScrollMaker
     */

  }, {
    key: "scrollDeltaTo",
    value: function scrollDeltaTo(delta) {
      var _this$_components$mov3 = this._components.moverRect,
          mover = _this$_components$mov3.mover,
          rect = _this$_components$mov3.rect;
      var moverPos = mover.node().getBoundingClientRect();
      var rectStartPos = rect.node().getBoundingClientRect();
      this.changeMoverPosition({
        y: moverPos.y - rectStartPos.y - delta,
        x: 0
      });
      return this;
    }
    /**
     * Scrolls to the specific point in the page. The input is provided as a percentage (0 - 100)
     *
     * @public
     *
     * @param {number} scrollPercentage Its the percentage based on which the scroll action will occur
     * @return {VerticalScrollMaker} Instance of the VerticalScrollMaker
     */

  }, {
    key: "scrollTo",
    value: function scrollTo(scrollPercentage) {
      var mover = this._components.moverRect.mover;
      var moverPos = mover.node().getBoundingClientRect();
      var movement = scrollPercentage * (this._scrollBarWithouArrowLength - moverPos.height) / 100;
      this.changeMoverPosition({
        x: 0,
        y: movement
      });
      return this;
    }
  }], [{
    key: "type",

    /**
     * Describes the type of the ScrollMaker
     *
     * @public
     *
     * @return {String} Returns the type of scroll maker: vertical
     */
    value: function type() {
      return _constants__WEBPACK_IMPORTED_MODULE_2__["VERTICAL"];
    }
  }]);

  return VerticalScrollMaker;
}(_scroll_maker__WEBPACK_IMPORTED_MODULE_0__["ScrollMaker"]);

/***/ }),

/***/ "./packages/muze/src/canvas/components/scroll-component.js":
/*!*****************************************************************!*\
  !*** ./packages/muze/src/canvas/components/scroll-component.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ScrollComponent; });
/* harmony import */ var _muze_chart_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./muze-chart-component */ "./packages/muze/src/canvas/components/muze-chart-component.js");
/* harmony import */ var _scroll_bar_maker_horizontal_scroll_maker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scroll-bar-maker/horizontal-scroll-maker */ "./packages/muze/src/canvas/components/scroll-bar-maker/horizontal-scroll-maker.js");
/* harmony import */ var _scroll_bar_maker_vertical_scroll_maker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scroll-bar-maker/vertical-scroll-maker */ "./packages/muze/src/canvas/components/scroll-bar-maker/vertical-scroll-maker.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var scrollMakerMap = {
  horizontal: _scroll_bar_maker_horizontal_scroll_maker__WEBPACK_IMPORTED_MODULE_1__["HorizontalScrollMaker"],
  vertical: _scroll_bar_maker_vertical_scroll_maker__WEBPACK_IMPORTED_MODULE_2__["VerticalScrollMaker"]
};
/**
 * Scroll Component acts as a wrapper over the scoll bars created using the respective Scroll Makers
 * This provides a consistent API for layouting using the tree layout system.
 *
 *
 * @class
 * @public
 * @module ScrollComponent
 */

var ScrollComponent =
/*#__PURE__*/
function (_MuzeComponent) {
  _inherits(ScrollComponent, _MuzeComponent);

  function ScrollComponent(params) {
    var _this;

    _classCallCheck(this, ScrollComponent);

    var ScrollMaker = scrollMakerMap[params.config.type];
    params.component = new ScrollMaker();
    params.component.config(params.config.scrollBarComponentConfig);
    params.component.logicalSpace(params.dimensions);
    _this = _possibleConstructorReturn(this, _getPrototypeOf(ScrollComponent).call(this, params.name, params.component.getLogicalSpace(), 0));

    _this.setParams(params);

    return _this;
  }

  _createClass(ScrollComponent, [{
    key: "manager",
    value: function manager() {
      if (arguments.length) {
        this.component.manager(arguments.length <= 0 ? undefined : arguments[0]);
        return this;
      }

      return this.component.manager();
    }
    /**
     * Scrolls based on the actual pixel value provided. Since it's a delta change, the input will be
     * a delta between (-Infinity, Infinity), based on which the scroll will occur. Only a delta movement in
     * scroll occurs
     *
     * @public
     *
     * @param {number} delta Based on which the scroll will have a delta change in position
     * @return {ScrollComponent} Instance of the ScrollComponent
     */

  }, {
    key: "scrollDeltaTo",
    value: function scrollDeltaTo(delta) {
      this.component.scrollDeltaTo(delta);
      return this;
    }
    /**
     * Scrolls to the specific point in the page. The input is provided as a percentage (0 - 100)
     *
     * @public
     *
     * @param {number} scrollPercentage Its the percentage based on which the scroll action will occur
     * @return {ScrollComponent} Instance of the ScrollComponent
     */

  }, {
    key: "scrollTo",
    value: function scrollTo(scrollPercentage) {
      this.component.scrollTo(scrollPercentage);
      return this;
    }
    /**
     * Scrolls to the specific point in the page based on the unit index.
     * The input is provided as a number represting the index for the unit.
     * For vertical scroll, it's the row index that will be required.
     * For horizontal scroll, it's the column index that will be required
     *
     * @public
     *
     * @param {number} unitIndex Index of the unit appearing in the grid
     * @return {ScrollComponent} Instance of the ScrollComponent
     */

  }, {
    key: "scrollToUnitIndex",
    value: function scrollToUnitIndex(unitIndex) {
      var unitPositions = this.component.unitPositions();
      var sanitizedUnitIndex = Math.min(Math.max(0, unitIndex), unitPositions.length - 1);
      this.component.scrollTo(unitPositions[sanitizedUnitIndex]);
      return this;
    }
    /**
     * Provides the positions of the units(either horizontal or vertical based on the type
     * of scroll bar it wraps) relative to it's container. The position of the first unit starts at 0
     *
     *
     * @public
     *
     * @return {Array} Positions of units either horizontal or vertical
     */

  }, {
    key: "getScrollPositionsForUnits",
    value: function getScrollPositionsForUnits() {
      return this.component.unitPositions();
    }
  }, {
    key: "draw",
    value: function draw(container) {
      this.component.createScroll(container || document.getElementById(this.renderAt()));
      return this;
    }
    /**
     * Can be used to attach a scroll action whenever scrolling occurs in the canvas
     *
     * @public
     * @param {number} externalAction Action to be attached during scroll
     * @return {ScrollComponent} Instance of the ScrollComponent
     */

  }, {
    key: "attachScrollAction",
    value: function attachScrollAction(externalAction) {
      this.component.attachScrollAction(externalAction);
      return this;
    }
    /**
     * Can be used to detach the scroll action already bound to the scroll bar
     *
     * @public
     * @return {ScrollComponent} Instance of the ScrollComponent
     */

  }, {
    key: "detachScrollAction",
    value: function detachScrollAction() {
      this.component.detachScrollAction();
      return this;
    }
  }, {
    key: "updateWrapper",
    value: function updateWrapper(params) {
      this.name(params.name);
      this.component.config(params.config.scrollBarComponentConfig);
      this.component.logicalSpace(params.dimensions);
      this.boundBox(this.component.getLogicalSpace());
      this.setParams(params);
      return this;
    }
  }, {
    key: "setParams",
    value: function setParams(params) {
      this.component = params.component || this.component;
      this.params = params;
      this.target(params.config.target);
      this.position(params.config.position);
      this.className(params.config.className);
      this.alignWith(params.config.alignWith);
      this.alignment(params.config.alignment);
    }
  }, {
    key: "remove",
    value: function remove() {
      this.component.remove();
    }
  }]);

  return ScrollComponent;
}(_muze_chart_component__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/muze/src/canvas/defaults.js":
/*!**********************************************!*\
  !*** ./packages/muze/src/canvas/defaults.js ***!
  \**********************************************/
/*! exports provided: TITLE_CONFIG, SUB_TITLE_CONFIG, GRID, CANVAS, LAYOUT_ALIGN */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TITLE_CONFIG", function() { return TITLE_CONFIG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUB_TITLE_CONFIG", function() { return SUB_TITLE_CONFIG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GRID", function() { return GRID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CANVAS", function() { return CANVAS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAYOUT_ALIGN", function() { return LAYOUT_ALIGN; });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants */ "./packages/muze/src/constants.js");

var TITLE_CONFIG = {
  position: 'top',
  align: 'left',
  padding: 4,
  className: "".concat(_constants__WEBPACK_IMPORTED_MODULE_0__["MUZE_PREFIX"], "-title-container")
};
var SUB_TITLE_CONFIG = {
  position: 'top',
  align: 'left',
  padding: 16,
  maxLines: 2,
  className: "".concat(_constants__WEBPACK_IMPORTED_MODULE_0__["MUZE_PREFIX"], "-subtitle-container")
};
var GRID = 'grid';
var CANVAS = 'canvas';
var LAYOUT_ALIGN = {
  TOP: 'top',
  LEFT: 'left',
  RIGHT: 'right',
  BOTTOM: 'bottom'
};

/***/ }),

/***/ "./packages/muze/src/canvas/firebolt/group-firebolt.js":
/*!*************************************************************!*\
  !*** ./packages/muze/src/canvas/firebolt/group-firebolt.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return GroupFireBolt; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @chartshq/muze-firebolt */ "./packages/muze-firebolt/src/index.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helper */ "./packages/muze/src/canvas/helper.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }





var _defaultInteractionPolicy = function defaultInteractionPolicy(valueMatrix, firebolt) {
  var _ref, _ref2;

  var isMeasure = function isMeasure(field) {
    return field.type() === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE;
  };

  var canvas = firebolt.context;
  var visualGroup = canvas.composition().visualGroup;

  var xFields = (_ref = []).concat.apply(_ref, _toConsumableArray(visualGroup.getFieldsFromChannel('x')));

  var yFields = (_ref2 = []).concat.apply(_ref2, _toConsumableArray(visualGroup.getFieldsFromChannel('y')));

  var colDim = xFields.every(function (field) {
    return field.type() === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
  });
  var fieldInf = visualGroup.resolver().getAllFields();
  var rowFacets = fieldInf.rowFacets;
  var colFacets = fieldInf.colFacets;
  valueMatrix.each(function (cell) {
    var unitFireBolt = cell.valueOf().firebolt();

    if (!(xFields.every(isMeasure) && yFields.every(isMeasure))) {
      var facetFields = cell.valueOf().facetByFields()[0];
      var unitColFacets = facetFields.filter(function (d) {
        return colFacets.findIndex(function (v) {
          return v.equals(d);
        }) !== -1;
      });
      var unitRowFacets = facetFields.filter(function (d) {
        return rowFacets.findIndex(function (v) {
          return v.equals(d);
        }) !== -1;
      });
      var propFields;

      if (colDim) {
        propFields = unitColFacets.map(function (d) {
          return "".concat(d);
        });
      } else {
        propFields = unitRowFacets.map(function (d) {
          return "".concat(d);
        });
      }

      unitFireBolt.propagateWith('*', propFields, true);
    }
  });
};

var _defaultCrossInteractionPolicy = {
  behaviours: {
    '*': function _(propagationPayload, context) {
      var propagationCanvasAlias = propagationPayload.sourceCanvas;
      var canvasAlias = context.parentAlias();
      return propagationCanvasAlias ? canvasAlias === propagationCanvasAlias : true;
    }
  },
  sideEffects: {
    tooltip: function tooltip(propagationPayload, context) {
      var propagationUnit = propagationPayload.sourceUnit;
      var propagationCanvas = propagationPayload.sourceCanvas;
      var unitId = context.id();
      var canvasAlias = context.parentAlias();

      if (propagationCanvas) {
        return propagationCanvas !== canvasAlias ? true : unitId === propagationUnit;
      }

      return true;
    }
  }
};
/**
 * This class is responsible for dispatching any behavioural action to all the visual units housed by the canvas.
 * It is created by {@link Canvas}. This class does not handle any physical actions. Physical actions get triggered
 * in {@link VisualUnit} which is managed by it's own firebolt instance. The firebolt instance of canvas only
 * propagates the action to all the visual units in it's composition.
 *
 * To get the firebolt instance of {@link Canvas}
 * ```
 *  const firebolt = canvas.firebolt();
 * ```
 *
 * @class GroupFireBolt
 * @public
 */

var GroupFireBolt =
/*#__PURE__*/
function (_Firebolt) {
  _inherits(GroupFireBolt, _Firebolt);

  function GroupFireBolt() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, GroupFireBolt);

    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
      params[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(GroupFireBolt)).call.apply(_getPrototypeOf2, [this].concat(params)));
    _this._interactionPolicy = _this.constructor.defaultInteractionPolicy();

    _this.crossInteractionPolicy(_this.constructor.defaultCrossInteractionPolicy());

    return _this;
  }

  _createClass(GroupFireBolt, [{
    key: "interactionPolicy",
    value: function interactionPolicy() {
      if (arguments.length) {
        this._interactionPolicy = (arguments.length <= 0 ? undefined : arguments[0]) || this.constructor.defaultInteractionPolicy();
        return this;
      }

      return this._interactionPolicy;
    }
  }, {
    key: "crossInteractionPolicy",
    value: function crossInteractionPolicy() {
      var _this2 = this;

      if (arguments.length) {
        this._crossInteractionPolicy = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, this.constructor.defaultCrossInteractionPolicy()), (arguments.length <= 0 ? undefined : arguments[0]) || {});
        var context = this.context;
        Object(_helper__WEBPACK_IMPORTED_MODULE_2__["applyInteractionPolicy"])(this);

        context._throwback.registerImmediateListener([muze_utils__WEBPACK_IMPORTED_MODULE_0__["CommonProps"].MATRIX_CREATED], function () {
          Object(_helper__WEBPACK_IMPORTED_MODULE_2__["applyInteractionPolicy"])(_this2);
        });

        return this;
      }

      return this._crossInteractionPolicy;
    }
    /**
     * Dispatches a behavioural action with a payload. It takes the name of the behavioural action and a payload
     * object which contains the criteria aend an array of side effects which determines what side effects are
     * going to be shown in each visual unit of the canvas. It prepares the datamodel from the given criteria
     * and initiates a propagation from the datamodel of canvas. Then all the visual units of canvas which listens
     * to the propagation gets informed on which rows got selected and dispatches the behavioural action sent during
     * propagation.
     *
     * To dispatch a behavioural action on the canvas
     * ```
     *  // Get the firebolt instance of the canvas
     *  const firebolt = canvas.firebolt();
     *  // Dispatch a brush behaviour
     *  firebolt.dispatchBehaviour('brush', {
     *      // Selects all the rows with Horsepower having range between 100 and 200.
     *      criteria: {
     *          Horsepower: [100, 200]
     *      }
     *  });
     * // On dispatch of this behavioural action, a selection box gets created and plots gets faded out which are the
     * // default side effects mapped to this behavioural action.
     * ```
     *
     * ```
     * Additionally, it can also be passed an array of side effects in the payload.
     *  // Dispatch a select behaviour with only crossline as side effect.
     *  firebolt.dispatchBehaviour('select', {
     *      criteria: {
     *          Cylinders: ['8']
     *      },
     *      sideEffects: ['crossline']
     *  });
     * ```
     *
     * @public
     *
     * @param {string} behaviour Name of the behavioural action
     * @param {Object} payload Object which contains the interaction information.
     * @param {Object | Array.<Array>} payload.criteria Identifiers by which the selection happens.
     * @param {Array.<string|Object>} payload.sideEffects Side effects which needs to be shown.
     *
     * @return {GroupFireBolt} Instance of firebolt.
     */

  }, {
    key: "dispatchBehaviour",
    value: function dispatchBehaviour(behaviour, payload) {
      var propPayload = Object.assign(payload);
      var criteria = propPayload.criteria;
      var data = this.context.composition().visualGroup.getGroupByData();
      var fieldsConfig = data.getFieldsConfig();
      var model = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getDataModelFromIdentifiers"])(data, criteria);
      var behaviouralAction = this._actions.behavioural[behaviour];

      if (behaviouralAction) {
        var fields = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["isSimpleObject"])(criteria) ? Object.keys(criteria) : criteria ? criteria[0] : [];
        var validFields = fields.filter(function (field) {
          return field in fieldsConfig;
        });
        var mutates = behaviouralAction.constructor.mutates();
        var propConfig = {
          payload: propPayload,
          action: behaviour,
          criteria: model,
          sourceId: this.context.alias(),
          isMutableAction: mutates,
          propagateInterpolatedValues: validFields.every(function (field) {
            return fieldsConfig[field].def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE;
          })
        };
        data.propagate(model, propConfig, true);
      }

      return this;
    }
  }, {
    key: "registerSideEffects",
    value: function registerSideEffects(sideEffects) {
      for (var key in sideEffects) {
        this._sideEffectDefinitions[sideEffects[key].formalName()] = sideEffects[key];
      }

      return this;
    }
  }], [{
    key: "defaultInteractionPolicy",
    value: function defaultInteractionPolicy() {
      return _defaultInteractionPolicy;
    }
  }, {
    key: "defaultCrossInteractionPolicy",
    value: function defaultCrossInteractionPolicy() {
      return _defaultCrossInteractionPolicy;
    }
  }]);

  return GroupFireBolt;
}(_chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__["Firebolt"]);



/***/ }),

/***/ "./packages/muze/src/canvas/firebolt/index.js":
/*!****************************************************!*\
  !*** ./packages/muze/src/canvas/firebolt/index.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _group_firebolt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./group-firebolt */ "./packages/muze/src/canvas/firebolt/group-firebolt.js");

/* harmony default export */ __webpack_exports__["default"] = (_group_firebolt__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./packages/muze/src/canvas/helper.js":
/*!********************************************!*\
  !*** ./packages/muze/src/canvas/helper.js ***!
  \********************************************/
/*! exports provided: initCanvas, fixScrollBarConfig, setLayoutInfForUnits, dispatchProps, notifyAnimationEnd, setupChangeListener, applyInteractionPolicy, setLabelRotationForAxes, createGroupState, removeChild, createLayoutManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initCanvas", function() { return initCanvas; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fixScrollBarConfig", function() { return fixScrollBarConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setLayoutInfForUnits", function() { return setLayoutInfForUnits; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dispatchProps", function() { return dispatchProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "notifyAnimationEnd", function() { return notifyAnimationEnd; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setupChangeListener", function() { return setupChangeListener; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyInteractionPolicy", function() { return applyInteractionPolicy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setLabelRotationForAxes", function() { return setLabelRotationForAxes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createGroupState", function() { return createGroupState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeChild", function() { return removeChild; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createLayoutManager", function() { return createLayoutManager; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_visual_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @chartshq/visual-group */ "./packages/visual-group/src/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants */ "./packages/muze/src/constants.js");
/* harmony import */ var _local_options__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./local-options */ "./packages/muze/src/canvas/local-options.js");
/* harmony import */ var _layout_src_tree_layout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../layout/src/tree-layout */ "./packages/layout/src/tree-layout/index.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }






/**
 * Instantiate high level components. Canvas knows what all high level component it has.
 * @nice-to-have dynamic high level components.
 *  - Is it even required ?
 *  - Reactive to source (canvas) streaming ?
 * @param {*} context Canvas instance
 * @return {Object.<Array>} Arrays of Title, visualGroup, Legend
 */

var initCanvas = function initCanvas(context) {
  var reg = context._registry.components;
  return [new reg.VisualGroup(context._registry, Object.assign({
    throwback: context._throwback
  }, context.dependencies()))];
};
var fixScrollBarConfig = function fixScrollBarConfig(config) {
  config.scrollBar.thickness = Math.min(50, Math.max(10, config.scrollBar.thickness));
  return config;
};
var setLayoutInfForUnits = function setLayoutInfForUnits(context) {
  var layoutManager = context._layoutManager;
  var boundBox = layoutManager.getComponent('grid').getBoundBox();
  var valueMatrix = context.composition().visualGroup.matrixInstance().value;
  var parentContainer = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])("#".concat(layoutManager.getRootNodeId())).node();
  valueMatrix.each(function (cell) {
    cell.valueOf().parentContainerInf({
      el: parentContainer,
      dimensions: boundBox
    });
  });
};
/**
 *
 *
 * @memberof Canvas
 */

var dispatchProps = function dispatchProps(context) {
  var lifeCycleManager = context.dependencies().lifeCycleManager;
  lifeCycleManager.notify({
    client: context,
    action: 'beforeupdate'
  });
  var visualGroup = context.composition().visualGroup;
  var allOptions = context._allOptions;

  for (var key in allOptions) {
    var value = context[key]();

    if (value !== null) {
      visualGroup[key] && visualGroup[key](value);
    }
  }

  var _context$config = context.config(),
      invalidValues = _context$config.invalidValues;

  visualGroup.valueParser(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getValueParser"])(invalidValues));
  visualGroup.createMatrices();
  context._cachedProps = {};
  lifeCycleManager.notify({
    client: context,
    action: 'initialized'
  });
  lifeCycleManager.notify({
    client: context,
    action: 'updated'
  });
};

var equalityChecker = function equalityChecker(props, params) {
  var checker = function checker() {
    return false;
  };

  return !props.every(function (option, i) {
    switch (option) {
      case _constants__WEBPACK_IMPORTED_MODULE_2__["ROWS"]:
      case _constants__WEBPACK_IMPORTED_MODULE_2__["COLUMNS"]:
      case _constants__WEBPACK_IMPORTED_MODULE_2__["DETAIL"]:
        checker = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["isEqual"])('Array');
        break;

      case _constants__WEBPACK_IMPORTED_MODULE_2__["SHAPE"]:
      case _constants__WEBPACK_IMPORTED_MODULE_2__["SIZE"]:
      case _constants__WEBPACK_IMPORTED_MODULE_2__["COLOR"]:
      case _constants__WEBPACK_IMPORTED_MODULE_2__["DATA"]:
      case _constants__WEBPACK_IMPORTED_MODULE_2__["CONFIG"]:
        checker = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["isEqual"])('Object');
        break;

      default:
        checker = function checker() {
          return true;
        };

        break;
    }

    var oldVal = params[i][0];
    var newVal = params[i][1];
    return checker(oldVal, newVal);
  });
};

var updateChecker = function updateChecker(props, params) {
  return props.every(function (option, i) {
    var val = params[i][1];

    switch (option) {
      case _constants__WEBPACK_IMPORTED_MODULE_2__["ROWS"]:
      case _constants__WEBPACK_IMPORTED_MODULE_2__["COLUMNS"]:
        return val !== null;

      case _constants__WEBPACK_IMPORTED_MODULE_2__["DATA"]:
        return val && !val.isEmpty();

      default:
        return true;
    }
  });
};

var notifyAnimationEnd = function notifyAnimationEnd(context) {
  var centerMatrix = context.layout().viewInfo().viewMatricesInfo.matrices.center[1] || [];
  var promises = [];
  centerMatrix.forEach(function (cellArr) {
    cellArr.forEach(function (cell) {
      promises.push(cell.valueOf().done());
    });
  });
  var lifeCycleManager = context.lifeCycle();

  if (promises.length) {
    Promise.all(promises).then(function () {
      // Update life cycle
      lifeCycleManager.notify({
        client: context,
        action: 'drawn'
      });
      var animDonePromises = [];
      centerMatrix.forEach(function (cellArr) {
        cellArr.forEach(function (cell) {
          cell.valueOf().layers().forEach(function (layer) {
            animDonePromises.push(layer.animationDone());
          });
        });
      });
      [context.xAxes(), context.yAxes()].forEach(function (axisArr) {
        axisArr = axisArr || [];
        axisArr.forEach(function (axes) {
          axes.forEach(function (axisInst) {
            animDonePromises.push(axisInst.animationDone());
          });
        });
      });
      Promise.all(animDonePromises).then(function () {
        lifeCycleManager.notify({
          client: context,
          action: 'animationend'
        });
      });
    });
  } else {
    lifeCycleManager.notify({
      client: context,
      action: 'animationend'
    });
  }
};
var setupChangeListener = function setupChangeListener(context) {
  var store = context._store;
  var allOptions = Object.keys(context._allOptions);
  var props = [].concat(_toConsumableArray(allOptions), _toConsumableArray(Object.keys(_local_options__WEBPACK_IMPORTED_MODULE_3__["canvasOptions"])));
  var nameSpaceProps = [].concat(_toConsumableArray(allOptions), _toConsumableArray(Object.keys(_local_options__WEBPACK_IMPORTED_MODULE_3__["canvasOptions"]))).map(function (prop) {
    return "".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].CANVAS_LOCAL_NAMESPACE, ".").concat(prop);
  });
  store.registerChangeListener(nameSpaceProps, function () {
    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
      params[_key] = arguments[_key];
    }

    var updateProps = equalityChecker(props, params);
    updateProps = updateChecker(props, params); // inform attached board to rerender

    if (updateProps && context.mount()) {
      dispatchProps(context);
      context.render();
    }

    notifyAnimationEnd(context);
  }, true);
};
var applyInteractionPolicy = function applyInteractionPolicy(firebolt) {
  var canvas = firebolt.context;
  var visualGroup = canvas.composition().visualGroup;

  if (visualGroup) {
    var valueMatrix = visualGroup.matrixInstance().value;
    var interactionPolicy = firebolt._interactionPolicy;
    interactionPolicy(valueMatrix, firebolt);
    var crossInteractionPolicy = firebolt._crossInteractionPolicy;
    var behaviours = crossInteractionPolicy.behaviours;
    var sideEffects = crossInteractionPolicy.sideEffects;
    valueMatrix.each(function (cell) {
      var unitFireBolt = cell.valueOf().firebolt();

      for (var key in behaviours) {
        unitFireBolt.changeBehaviourStateOnPropagation(key, behaviours[key]);
      }

      for (var _key2 in sideEffects) {
        unitFireBolt.changeSideEffectStateOnPropagation(_key2, sideEffects[_key2]);
      }
    });
  }
};
/**
 * Sets the rotation for all x axes if any axis has the rotation config set in the
 * entire view
 *
 * @param {Array} columns Column cells that contain the axes cells
 */

var setLabelRotationForAxes = function setLabelRotationForAxes(context) {
  var rotation = 0;
  var xAxes = context.xAxes() || [];

  (function () {
    for (var i = 0; i < xAxes.length; i++) {
      for (var j = 0; j < xAxes[i].length; j++) {
        var rotationVal = xAxes[i][j].renderConfig().labels.rotation;

        if (rotationVal && rotationVal !== 0) {
          rotation = rotationVal;
          return;
        }
      }
    }
  })();

  if (rotation) {
    xAxes.forEach(function (axes) {
      axes.forEach(function (axis) {
        axis.renderConfig({
          labels: {
            rotation: rotation
          }
        });
        axis.smartTicks(axis.setTickConfig());
      });
    });
  }
};
var createGroupState = function createGroupState(context) {
  var _VisualGroup$getState = _chartshq_visual_group__WEBPACK_IMPORTED_MODULE_1__["VisualGroup"].getState(),
      _VisualGroup$getState2 = _slicedToArray(_VisualGroup$getState, 2),
      globalState = _VisualGroup$getState2[0],
      localState = _VisualGroup$getState2[1];

  var store = context._store;
  store.append('app.group', globalState);
  store.append('local.group', localState);
};
var removeChild = function removeChild(mount) {
  while (mount.firstChild) {
    mount.removeChild(mount.firstChild);
  }
};
var createLayoutManager = function createLayoutManager() {
  var layoutManager = new _layout_src_tree_layout__WEBPACK_IMPORTED_MODULE_4__["LayoutManager"]({
    className: 'muze-group-container'
  });
  return layoutManager;
};

/***/ }),

/***/ "./packages/muze/src/canvas/index.js":
/*!*******************************************!*\
  !*** ./packages/muze/src/canvas/index.js ***!
  \*******************************************/
/*! exports provided: Canvas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _canvas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./canvas */ "./packages/muze/src/canvas/canvas.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Canvas", function() { return _canvas__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/muze/src/canvas/layout-maker.js":
/*!**************************************************!*\
  !*** ./packages/muze/src/canvas/layout-maker.js ***!
  \**************************************************/
/*! exports provided: prepareLayout, getRenderDetails, renderLayout */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prepareLayout", function() { return prepareLayout; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRenderDetails", function() { return getRenderDetails; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "renderLayout", function() { return renderLayout; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _component_resolver__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./component-resolver */ "./packages/muze/src/canvas/component-resolver.js");
/* harmony import */ var _title_maker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./title-maker */ "./packages/muze/src/canvas/title-maker.js");
/* harmony import */ var _legend_maker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./legend-maker */ "./packages/muze/src/canvas/legend-maker.js");
/* harmony import */ var _component_wrapper_maker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./component-wrapper-maker */ "./packages/muze/src/canvas/component-wrapper-maker.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../constants */ "./packages/muze/src/constants.js");
/* harmony import */ var _scroll_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./scroll-manager */ "./packages/muze/src/canvas/scroll-manager.js");







/**
 *
 *
 * @param {*} context
 *
 */

var prepareLayout = function prepareLayout(layout, renderDetails) {
  var components = renderDetails.components,
      layoutConfig = renderDetails.layoutConfig,
      measurement = renderDetails.measurement;
  var rows = components.rows,
      columns = components.columns,
      values = components.values,
      cornerMatrices = components.cornerMatrices;
  var topLeft = cornerMatrices.topLeft,
      topRight = cornerMatrices.topRight,
      bottomLeft = cornerMatrices.bottomLeft,
      bottomRight = cornerMatrices.bottomRight;

  if (rows && columns) {
    layout.measurement(measurement).config(layoutConfig).matrices({
      top: [topLeft, columns[0], topRight],
      center: [rows[0], values, rows[1]],
      bottom: [bottomLeft, columns[1], bottomRight]
    }).triggerReflow();
  }
};
/**
 *
 *
 * @param {*} context
 * @param {*} mount
 *
 */

var getRenderDetails = function getRenderDetails(context, mount) {
  var layoutConfig = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, context.config()); // Get height width of the mount point

  var _mount$getBoundingCli = mount.getBoundingClientRect(),
      height = _mount$getBoundingCli.height,
      width = _mount$getBoundingCli.width;

  var heightAttr = context.height();
  var widthAttr = context.width();
  var visGroup = context.composition().visualGroup;

  var _visGroup$placeholder = visGroup.placeholderInfo(),
      isColumnSizeEqual = _visGroup$placeholder.isColumnSizeEqual,
      isRowSizeEqual = _visGroup$placeholder.isRowSizeEqual,
      priority = _visGroup$placeholder.priority,
      rows = _visGroup$placeholder.rows,
      columns = _visGroup$placeholder.columns,
      values = _visGroup$placeholder.values;

  var _context$config = context.config(),
      minWidth = _context$config.minWidth,
      minHeight = _context$config.minHeight,
      classPrefix = _context$config.classPrefix,
      showHeaders = _context$config.showHeaders,
      legend = _context$config.legend,
      pagination = _context$config.pagination,
      scrollBar = _context$config.scrollBar; // Get title configuration


  var titleConfig = context.title()[1]; // Get subtitle configuration

  var subtitleConfig = context.subtitle()[1]; // Get legend position

  var legendPosition = legend.position; // Arrange components according to config

  var layoutArrangement = Object(_component_resolver__WEBPACK_IMPORTED_MODULE_1__["arrangeComponents"])(context);
  height = Math.floor(height);
  width = Math.floor(width);
  var availableHeightForCanvas = Math.max(heightAttr > 0 ? heightAttr : height, minHeight);
  var availableWidthForCanvas = Math.max(widthAttr > 0 ? widthAttr : width, minWidth); // Create headers and determine header height

  var _createHeaders = Object(_title_maker__WEBPACK_IMPORTED_MODULE_2__["createHeaders"])(context, availableHeightForCanvas, availableWidthForCanvas),
      headers = _createHeaders.headers,
      headerHeight = _createHeaders.headerHeight; // Create legends and determine legend space


  var legends = Object(_legend_maker__WEBPACK_IMPORTED_MODULE_3__["createLegend"])(context, headerHeight, availableHeightForCanvas, availableWidthForCanvas);
  context._composition.legend = {};
  legends.forEach(function (e) {
    context._composition.legend[e.scaleType] = e.legend;
  });
  var legendSpace = Object(_legend_maker__WEBPACK_IMPORTED_MODULE_3__["getLegendSpace"])(legends, legend, availableHeightForCanvas, availableWidthForCanvas);
  var legendWidth = legendPosition === _constants__WEBPACK_IMPORTED_MODULE_5__["LEFT"] || legendPosition === _constants__WEBPACK_IMPORTED_MODULE_5__["RIGHT"] ? legendSpace.width : 0;
  var legendHeight = legendPosition === _constants__WEBPACK_IMPORTED_MODULE_5__["TOP"] || legendPosition === _constants__WEBPACK_IMPORTED_MODULE_5__["BOTTOM"] ? legendSpace.height : 0; // Set components for layouting

  var components = {
    headers: headers,
    legends: legends,
    canvases: [context],
    rows: rows,
    columns: columns,
    values: values,
    cornerMatrices: visGroup.cornerMatrices()
  };
  var measurement = {
    mountSpace: {
      height: height,
      width: width
    },
    headerHeight: headerHeight,
    legendSpace: legendSpace,
    canvasWidth: availableWidthForCanvas,
    canvasHeight: availableHeightForCanvas,
    width: availableWidthForCanvas - legendWidth,
    height: availableHeightForCanvas - headerHeight - legendHeight,
    minUnitHeight: context.minUnitHeight(),
    minUnitWidth: context.minUnitWidth()
  };
  layoutConfig = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(layoutConfig, {
    classPrefix: classPrefix,
    showHeaders: showHeaders,
    border: Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(visGroup.metaData().border, context.config().border),
    layoutArrangement: layoutArrangement,
    legend: legend,
    buffer: scrollBar.thickness,
    pagination: pagination,
    title: titleConfig,
    subtitle: subtitleConfig,
    isColumnSizeEqual: isColumnSizeEqual,
    isRowSizeEqual: isRowSizeEqual,
    mount: mount,
    priority: priority
  });
  return {
    layoutConfig: layoutConfig,
    components: components,
    measurement: measurement
  };
};
var componentIndexes = {
  title: 0,
  subtitle: 1,
  legend: 2,
  verticalScrollBar: 3,
  horizontalScrollBar: 4,
  grid: 5
};
/**
 * Responsible for creating a scroll manager that manages interactions between the grid
 * component and the scroll bar components
 *
 * @param {Array} componentWrappers Contains the wrappers for all the components
 * @param {Canvas} canvas Instance of the current canvas
 * @return {Array} Positions of units either horizontal or vertical
 */

var createScrollManager = function createScrollManager(componentWrappers, canvas) {
  var horizontalScrollBar = componentIndexes.horizontalScrollBar,
      verticalScrollBar = componentIndexes.verticalScrollBar,
      grid = componentIndexes.grid;
  var horizontalScrollWrapper = componentWrappers[horizontalScrollBar];
  var verticalScrollWrapper = componentWrappers[verticalScrollBar];
  var gridWrapper = componentWrappers[grid];
  var scrollBarManager = new _scroll_manager__WEBPACK_IMPORTED_MODULE_6__["ScrollManager"]();
  var scrollBarComponents = {};
  verticalScrollWrapper && (scrollBarComponents.vertical = verticalScrollWrapper);
  horizontalScrollWrapper && (scrollBarComponents.horizontal = horizontalScrollWrapper);
  scrollBarManager.scrollBarComponents(scrollBarComponents).attachedComponents({
    grid: gridWrapper
  });
  canvas.composition().hScrollBar = horizontalScrollWrapper;
  canvas.composition().vScrollBar = verticalScrollWrapper;
  [horizontalScrollWrapper, verticalScrollWrapper].forEach(function (wrapper) {
    wrapper && wrapper.manager(scrollBarManager);
  });
  gridWrapper.scrollBarManager(scrollBarManager);
};

var renderLayout = function renderLayout(canvas, renderDetails) {
  var layoutManager = canvas._layoutManager;
  var gridLayout = canvas.layout();
  var grid = componentIndexes.grid; // Get the component wrappers

  var compWrappers = Object(_component_wrapper_maker__WEBPACK_IMPORTED_MODULE_4__["componentWrapperMaker"])(layoutManager, gridLayout, renderDetails);
  var componentWrappers = Object.keys(componentIndexes).map(function (e) {
    return compWrappers[e];
  });
  var gridWrapper = componentWrappers[grid];
  createScrollManager(componentWrappers, canvas);
  layoutManager.registerComponents(componentWrappers).compute();
  gridWrapper.attachScrollListener();
};

/***/ }),

/***/ "./packages/muze/src/canvas/legend-maker.js":
/*!**************************************************!*\
  !*** ./packages/muze/src/canvas/legend-maker.js ***!
  \**************************************************/
/*! exports provided: legendCreator, legendInitializer, getLegendSpace, createLegend */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "legendCreator", function() { return legendCreator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "legendInitializer", function() { return legendInitializer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLegendSpace", function() { return getLegendSpace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createLegend", function() { return createLegend; });
/* harmony import */ var _chartshq_visual_cell__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/visual-cell */ "./packages/visual-cell/src/index.js");
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants */ "./packages/muze/src/constants.js");



/**
 *
 *
 * @param {*} legendConfig
 * @param {*} canvases
 *
 */

var legendCreator = function legendCreator(canvas) {
  var LegendCls;
  var dataset = [];
  var axes = canvas.getRetinalAxes();
  Object.entries(axes).forEach(function (axisInfo) {
    var scale = axisInfo[1][0];
    var scaleType = axisInfo[0];
    var scaleProps = canvas[scaleType]();

    if (scaleProps.field && scale) {
      var _scale$config = scale.config(),
          type = _scale$config.type,
          step = _scale$config.step;

      var stepMapper = typeof step === 'boolean' ? step : false;
      LegendCls = _constants__WEBPACK_IMPORTED_MODULE_2__["LEGEND_TYPE_MAP"]["".concat(type, "-").concat(stepMapper, "-").concat(scaleType)];
      dataset.push({
        scale: scale,
        canvas: canvas,
        fieldName: scaleProps.field,
        LegendCls: LegendCls,
        scaleType: scaleType
      });
    }
  });
  return dataset;
};
/**
 *
 *
 * @param {*} legendConfig
 * @param {*} canvases
 * @param {*} measurement
 * @param {*} prevLegends
 *
 */

var legendInitializer = function legendInitializer(legendConfig, canvas, measurement, prevLegends) {
  var legends = [];
  var height = measurement.height,
      width = measurement.width,
      headerHeight = measurement.headerHeight;
  var position = legendConfig.position,
      align = legendConfig.align;
  var legendInfo = legendCreator(canvas);

  var _canvas$config = canvas.config(),
      invalidValues = _canvas$config.invalidValues;

  var parser = Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["getValueParser"])(invalidValues);
  legendInfo.forEach(function (dataInfo, index) {
    var legend = {};
    var legendMeasures = {};
    var LegendCls = dataInfo.LegendCls,
        scale = dataInfo.scale,
        fieldName = dataInfo.fieldName,
        scaleType = dataInfo.scaleType;
    var config = legendConfig[scaleType] || {};
    var title = config.title || {};
    title.text = title.text || fieldName;

    if (config.show) {
      config.position = position;
      config.align = align;

      if (prevLegends[index]) {
        legend = prevLegends[index].legend;
      } else {
        legend = LegendCls.create({
          labelManager: canvas._dependencies.smartlabel,
          cells: {
            AxisCell: _chartshq_visual_cell__WEBPACK_IMPORTED_MODULE_0__["AxisCell"],
            TextCell: _chartshq_visual_cell__WEBPACK_IMPORTED_MODULE_0__["TextCell"]
          }
        });
      }

      legendMeasures.maxHeight = align === _constants__WEBPACK_IMPORTED_MODULE_2__["VERTICAL"] ? height - headerHeight : height * 0.2;
      legendMeasures.maxWidth = align === _constants__WEBPACK_IMPORTED_MODULE_2__["HORIZONTAL"] ? width : width * 0.2;
      legendMeasures.width = Math.min(legendMeasures.maxWidth, config.width);
      legendMeasures.height = Math.min(legendMeasures.maxHeight, config.height);
      [_constants__WEBPACK_IMPORTED_MODULE_2__["PADDING"], _constants__WEBPACK_IMPORTED_MODULE_2__["BORDER"], _constants__WEBPACK_IMPORTED_MODULE_2__["MARGIN"]].forEach(function (e) {
        legendMeasures[e] = config[e];
      });
      legend.scale(scale).valueParser(parser).title(title).fieldName(fieldName).config(config).metaData(canvas.composition().visualGroup.getGroupByData().project([fieldName])).measurement(legendMeasures).canvasAlias(canvas.alias()).setLegendMeasures();
      legends.push({
        canvas: canvas,
        legend: legend,
        scaleType: scaleType
      });
    }
  });
  return legends;
};
/**
 *
 *
 * @param {*} legends
 * @param {*} legendConfig
 * @param {*} availableHeight
 * @param {*} availableWidth
 *
 */

var getLegendSpace = function getLegendSpace(legends, legendConfig, availableHeight, availableWidth) {
  var legendMeasures = legends.map(function (legendInfo) {
    return legendInfo.legend.measurement();
  });
  var legendSpace = {
    width: 0,
    height: 0
  };
  legendMeasures.forEach(function (space) {
    var height = 0;
    var width = 0;
    width = Math.min(space.width, space.maxWidth);
    height = Math.min(space.height, space.maxHeight);

    if (legendConfig.align === _constants__WEBPACK_IMPORTED_MODULE_2__["HORIZONTAL"]) {
      if (legendSpace.width + width > availableWidth) {
        legendSpace.width = availableWidth;
        legendSpace.height += height;
      } else {
        legendSpace.width += width;
        legendSpace.height = Math.max(legendSpace.height, height);
      }
    } else if (legendSpace.height + height > availableHeight) {
      legendSpace.height = height;
      legendSpace.width += width;
    } else {
      legendSpace.height += height;
      legendSpace.width = Math.max(legendSpace.width, width);
    }
  });

  if (legendConfig.align === _constants__WEBPACK_IMPORTED_MODULE_2__["HORIZONTAL"]) {
    legendSpace.width = availableWidth;
  }

  return legendSpace;
};
/**
 *
 *
 * @param {*} context
 * @param {*} headerHeight
 *
 */

var createLegend = function createLegend(context, headerHeight, height, width) {
  var measurement = {
    height: height,
    width: width,
    headerHeight: headerHeight
  };

  var _context$config = context.config(),
      legend = _context$config.legend;

  var show = legend.show,
      position = legend.position;
  legend.classPrefix = context.config().classPrefix;
  var align = position === _constants__WEBPACK_IMPORTED_MODULE_2__["LEFT"] || position === _constants__WEBPACK_IMPORTED_MODULE_2__["RIGHT"] ? _constants__WEBPACK_IMPORTED_MODULE_2__["VERTICAL"] : _constants__WEBPACK_IMPORTED_MODULE_2__["HORIZONTAL"];
  legend.show = show ? align === _constants__WEBPACK_IMPORTED_MODULE_2__["VERTICAL"] && width > 200 || align === _constants__WEBPACK_IMPORTED_MODULE_2__["HORIZONTAL"] && height > 200 : show;
  legend.align = align;
  return legendInitializer(legend, context, measurement, context.legends || []);
};

/***/ }),

/***/ "./packages/muze/src/canvas/local-options.js":
/*!***************************************************!*\
  !*** ./packages/muze/src/canvas/local-options.js ***!
  \***************************************************/
/*! exports provided: localOptions, canvasOptions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "localOptions", function() { return localOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "canvasOptions", function() { return canvasOptions; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants */ "./packages/muze/src/constants.js");
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./defaults */ "./packages/muze/src/canvas/defaults.js");
var _localOptions, _canvasOptions;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




/**
 * This is the local options semantics based on which setters getters are created and reactivity is initiated.
 * This local object is only valid for Canvas.
 * Canvas merges global and local object both to the model
 *
 * Format
 *  PROPERTRY_NAME: {
 *      value: // default value of the property,
 *      meta: {
 *          typeCheck: // The setter value will be checked using this. If the value is function then the setter value
 *                     // is passed as args.
 *          typeExpected: // The output of typecheck action will be tested against this. Truthy value will set the
 *                       // value to the setter
 *          sanitizaiton: // Need for sanitization before type is checked
 *      }
 *  }
 *
 * @module LocalOptions
 */

var localOptions = (_localOptions = {}, _defineProperty(_localOptions, _constants__WEBPACK_IMPORTED_MODULE_1__["ROWS"], {
  value: null,
  meta: {
    typeCheck: 'constructor',
    typeExpected: 'Array'
  }
}), _defineProperty(_localOptions, _constants__WEBPACK_IMPORTED_MODULE_1__["COLUMNS"], {
  value: null,
  meta: {
    typeCheck: 'constructor',
    typeExpected: 'Array'
  }
}), _defineProperty(_localOptions, _constants__WEBPACK_IMPORTED_MODULE_1__["COLOR"], {
  value: null,
  meta: {
    typeCheck: 'constructor',
    typeExpected: 'Object',
    sanitization: function sanitization(config) {
      if (typeof config === 'string' || config === null) {
        return {
          field: config
        };
      }

      return config;
    }
  }
}), _defineProperty(_localOptions, _constants__WEBPACK_IMPORTED_MODULE_1__["SHAPE"], {
  value: null,
  meta: {
    typeCheck: 'constructor',
    typeExpected: 'Object',
    sanitization: function sanitization(config) {
      if (typeof config === 'string' || config === null) {
        return {
          field: config
        };
      }

      return config;
    }
  }
}), _defineProperty(_localOptions, _constants__WEBPACK_IMPORTED_MODULE_1__["SIZE"], {
  value: null,
  meta: {
    typeCheck: 'constructor',
    typeExpected: 'Object',
    sanitization: function sanitization(config) {
      if (typeof config === 'string' || config === null) {
        return {
          field: config
        };
      }

      return config;
    }
  }
}), _defineProperty(_localOptions, _constants__WEBPACK_IMPORTED_MODULE_1__["DETAIL"], {
  value: [],
  meta: {
    typeCheck: 'constructor',
    typeExpected: 'Array'
  }
}), _defineProperty(_localOptions, _constants__WEBPACK_IMPORTED_MODULE_1__["LAYERS"], {
  value: [],
  meta: {
    typeCheck: 'constructor',
    typeExpected: 'Array'
  }
}), _defineProperty(_localOptions, _constants__WEBPACK_IMPORTED_MODULE_1__["TRANSFORM"], {
  value: null,
  meta: {
    typeCheck: 'constructor',
    typeExpected: 'Object'
  }
}), _localOptions);
var canvasOptions = (_canvasOptions = {}, _defineProperty(_canvasOptions, _constants__WEBPACK_IMPORTED_MODULE_1__["TITLE"], {
  value: [null, null],
  meta: {
    typeCheck: ['constructor', 'constructor'],
    typeExpected: ['Function', 'Object'],
    spreadParams: true,
    sanitization: [function (title) {
      if (typeof title === 'string') {
        var t = function t() {
          return title;
        };

        t._sanitized = true;
        return t;
      }

      return title;
    }, function (titleConfig) {
      var defConfig = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, _defaults__WEBPACK_IMPORTED_MODULE_2__["TITLE_CONFIG"]);
      return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(defConfig, titleConfig);
    }]
  }
}), _defineProperty(_canvasOptions, _constants__WEBPACK_IMPORTED_MODULE_1__["SUB_TITLE"], {
  value: [null, null],
  meta: {
    typeCheck: ['constructor', 'constructor'],
    typeExpected: ['Function', 'Object'],
    spreadParams: true,
    sanitization: [function (subtitle) {
      if (typeof subtitle === 'string') {
        var sub = function sub() {
          return subtitle;
        };

        sub._sanitized = true;
        return sub;
      }

      return subtitle;
    }, function (subtitleConfig) {
      var defConfig = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, _defaults__WEBPACK_IMPORTED_MODULE_2__["SUB_TITLE_CONFIG"]);
      return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(defConfig, subtitleConfig);
    }]
  }
}), _canvasOptions);

/***/ }),

/***/ "./packages/muze/src/canvas/scroll-manager.js":
/*!****************************************************!*\
  !*** ./packages/muze/src/canvas/scroll-manager.js ***!
  \****************************************************/
/*! exports provided: ScrollManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScrollManager", function() { return ScrollManager; });
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var ScrollManager =
/*#__PURE__*/
function () {
  function ScrollManager() {
    _classCallCheck(this, ScrollManager);

    this._scrollBarComponents = {};
    this._attachedComponents = {};
  }

  _createClass(ScrollManager, [{
    key: "scrollBarComponents",
    value: function scrollBarComponents() {
      if (arguments.length) {
        this._scrollBarComponents = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._scrollBarComponents;
    }
  }, {
    key: "attachedComponents",
    value: function attachedComponents() {
      if (arguments.length) {
        this._attachedComponents = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._attachedComponents;
    }
  }, {
    key: "performAttachedScrollFunction",
    value: function performAttachedScrollFunction(type, movedViewLength) {
      Object.values(this.attachedComponents()).forEach(function (e) {
        e.performScrollAction(type, movedViewLength);
      });
    }
  }, {
    key: "triggerScrollBarAction",
    value: function triggerScrollBarAction(type, delta) {
      this.scrollBarComponents()[type] && this.scrollBarComponents()[type].scrollDeltaTo(delta);
    }
  }]);

  return ScrollManager;
}();

/***/ }),

/***/ "./packages/muze/src/canvas/title-maker.js":
/*!*************************************************!*\
  !*** ./packages/muze/src/canvas/title-maker.js ***!
  \*************************************************/
/*! exports provided: createHeaders */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createHeaders", function() { return createHeaders; });
/* harmony import */ var _chartshq_visual_cell__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/visual-cell */ "./packages/visual-cell/src/index.js");
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants */ "./packages/muze/src/constants.js");



/**
 *
 *
 * @param {*} rawContent
 *
 */

var resolveTitleSubTitleContent = function resolveTitleSubTitleContent(rawContent) {
  if (typeof rawContent === 'function' && !rawContent._sanitize) {
    return rawContent();
  }

  return Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["escapeHTML"])(rawContent());
};
/**
 *
 *
 * @param {*} config
 * @param {*} cellType
 * @param {*} labelManager
 * @param {*} prevCell
 *
 */


var headerCreator = function headerCreator(config, cellType, labelManager, prevCell) {
  var margin = {};
  var content = config.content,
      classPrefix = config.classPrefix,
      maxLines = config.maxLines;
  var cell = prevCell || new _chartshq_visual_cell__WEBPACK_IMPORTED_MODULE_0__["TextCell"]({
    type: cellType === 'title' ? 'header' : 'text',
    className: "".concat(classPrefix, "-").concat(cellType, "-cell")
  }, {
    labelManager: labelManager
  }).config({
    maxLines: maxLines
  }).minSpacing({
    width: 0,
    height: 0
  });
  cell.source(content);
  cell._minTickDiff = {
    height: 0,
    width: 0
  };

  if (config.position === _constants__WEBPACK_IMPORTED_MODULE_2__["TOP"]) {
    margin = {
      top: 0,
      bottom: config.padding
    };
  } else {
    margin = {
      top: config.padding,
      bottom: 0
    };
  }

  cell.config({
    margin: margin
  });
  return {
    height: cell.getLogicalSpace().height,
    cell: cell
  };
};
/**
 *
 *
 * @param {*} config
 * @param {*} type
 * @param {*} labelManager
 * @param {*} cell
 *
 */


var createHeading = function createHeading(config, type, labelManager, prevCell) {
  if (!config) {
    return '';
  }

  return headerCreator(config, type, labelManager, prevCell);
};
/**
 *
 *
 * @param {*} context
 */


var createHeaders = function createHeaders(context, canvasHeight, canvasWidth) {
  var headerHeight = 0;
  var headers = {};
  var subtitle = context.subtitle();
  var isSubtitle = resolveTitleSubTitleContent(subtitle[0]);
  canvasHeight >= 200 && canvasWidth >= 200 && ['title', 'subtitle'].forEach(function (type) {
    var headerOptions = context[type]();
    var content = resolveTitleSubTitleContent(headerOptions[0]);

    if (content.length) {
      var config = headerOptions[1];
      config.width = context.width();
      config.height = context.height();
      config.classPrefix = context.config().classPrefix;
      config.content = content;
      config.padding = type === 'title' && !isSubtitle.length ? subtitle[1].padding : config.padding;

      var _createHeading = createHeading(config, type, context.dependencies().smartlabel, context["".concat(type, "Cell")]),
          height = _createHeading.height,
          cell = _createHeading.cell;

      headers["".concat(type, "Cell")] = cell;
      context._composition[type] = cell;
      headerHeight += height;
    }
  });
  return {
    headerHeight: headerHeight,
    headers: headers
  };
};

/***/ }),

/***/ "./packages/muze/src/constants.js":
/*!****************************************!*\
  !*** ./packages/muze/src/constants.js ***!
  \****************************************/
/*! exports provided: ROWS, COLUMNS, DATA, COLOR, SHAPE, SIZE, DETAIL, LAYERS, TRANSFORM, INITIALIZED, SOURCE, WIDTH, HEIGHT, PADDING, BORDER, MARGIN, CONFIG, MOUNT, CANVAS_UPDATED, CLASSPREFIX, POLICIES, LEGEND, TITLE, SUB_TITLE, RESOLVE, DISCRETE, STEP_COLOR, GRADIENT, LINEAR, ORDINAL, MUZE_PREFIX, TITLE_TEMPLATE_NOT_ALLOWED_TAGS, LEGEND_TYPE_MAP, LEFT, RIGHT, BOTTOM, TOP, GROUP, LAYOUT, RETINAL, DIMENSION, MEASURE, VERTICAL, HORIZONTAL, HORIZONTAL_CENTER, VERTICAL_CENTER, HIDDEN, OVERFLOW, OVERFLOW_X, OVERFLOW_Y, AUTO, VISIBLE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROWS", function() { return ROWS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLUMNS", function() { return COLUMNS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DATA", function() { return DATA; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLOR", function() { return COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SHAPE", function() { return SHAPE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SIZE", function() { return SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DETAIL", function() { return DETAIL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAYERS", function() { return LAYERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TRANSFORM", function() { return TRANSFORM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "INITIALIZED", function() { return INITIALIZED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SOURCE", function() { return SOURCE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WIDTH", function() { return WIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HEIGHT", function() { return HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PADDING", function() { return PADDING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BORDER", function() { return BORDER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARGIN", function() { return MARGIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CONFIG", function() { return CONFIG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MOUNT", function() { return MOUNT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CANVAS_UPDATED", function() { return CANVAS_UPDATED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLASSPREFIX", function() { return CLASSPREFIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POLICIES", function() { return POLICIES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LEGEND", function() { return LEGEND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TITLE", function() { return TITLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUB_TITLE", function() { return SUB_TITLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RESOLVE", function() { return RESOLVE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DISCRETE", function() { return DISCRETE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "STEP_COLOR", function() { return STEP_COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GRADIENT", function() { return GRADIENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINEAR", function() { return LINEAR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ORDINAL", function() { return ORDINAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MUZE_PREFIX", function() { return MUZE_PREFIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TITLE_TEMPLATE_NOT_ALLOWED_TAGS", function() { return TITLE_TEMPLATE_NOT_ALLOWED_TAGS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LEGEND_TYPE_MAP", function() { return LEGEND_TYPE_MAP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LEFT", function() { return LEFT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RIGHT", function() { return RIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BOTTOM", function() { return BOTTOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOP", function() { return TOP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GROUP", function() { return GROUP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAYOUT", function() { return LAYOUT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RETINAL", function() { return RETINAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DIMENSION", function() { return DIMENSION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MEASURE", function() { return MEASURE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VERTICAL", function() { return VERTICAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HORIZONTAL", function() { return HORIZONTAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HORIZONTAL_CENTER", function() { return HORIZONTAL_CENTER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VERTICAL_CENTER", function() { return VERTICAL_CENTER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HIDDEN", function() { return HIDDEN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OVERFLOW", function() { return OVERFLOW; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OVERFLOW_X", function() { return OVERFLOW_X; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OVERFLOW_Y", function() { return OVERFLOW_Y; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AUTO", function() { return AUTO; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VISIBLE", function() { return VISIBLE; });
/* harmony import */ var _chartshq_muze_legend__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/muze-legend */ "./packages/muze-legend/src/index.js");
var _LEGEND_TYPE_MAP;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


/**
 * Contants to be used as attr
 */

var ROWS = 'rows';
var COLUMNS = 'columns';
var DATA = 'data';
var COLOR = 'color';
var SHAPE = 'shape';
var SIZE = 'size';
var DETAIL = 'detail';
var LAYERS = 'layers';
var TRANSFORM = 'transform';
var INITIALIZED = 'isInitialized';
var SOURCE = 'source';
var WIDTH = 'width';
var HEIGHT = 'height';
var PADDING = 'padding';
var BORDER = 'border';
var MARGIN = 'margin';
var CONFIG = 'config';
var MOUNT = 'mount';
var CANVAS_UPDATED = 'canvasUpdated';
var CLASSPREFIX = 'classPrefix';
var POLICIES = '_policies';
var LEGEND = 'legend';
var TITLE = 'title';
var SUB_TITLE = 'subtitle';
var RESOLVE = 'resolve';
var DISCRETE = 'discrete';
var STEP_COLOR = 'step-color';
var GRADIENT = 'gradient';
var LINEAR = 'linear';
var ORDINAL = 'ordinal';
var MUZE_PREFIX = 'muze';
var TITLE_TEMPLATE_NOT_ALLOWED_TAGS = ['script', 'style'];
var LEGEND_TYPE_MAP = (_LEGEND_TYPE_MAP = {}, _defineProperty(_LEGEND_TYPE_MAP, "".concat(ORDINAL, "-", true, "-").concat(COLOR), _chartshq_muze_legend__WEBPACK_IMPORTED_MODULE_0__["DiscreteLegend"]), _defineProperty(_LEGEND_TYPE_MAP, "".concat(ORDINAL, "-", true, "-").concat(SIZE), _chartshq_muze_legend__WEBPACK_IMPORTED_MODULE_0__["DiscreteLegend"]), _defineProperty(_LEGEND_TYPE_MAP, "".concat(ORDINAL, "-", true, "-").concat(SHAPE), _chartshq_muze_legend__WEBPACK_IMPORTED_MODULE_0__["DiscreteLegend"]), _defineProperty(_LEGEND_TYPE_MAP, "".concat(ORDINAL, "-", false, "-").concat(COLOR), _chartshq_muze_legend__WEBPACK_IMPORTED_MODULE_0__["DiscreteLegend"]), _defineProperty(_LEGEND_TYPE_MAP, "".concat(ORDINAL, "-", false, "-").concat(SHAPE), _chartshq_muze_legend__WEBPACK_IMPORTED_MODULE_0__["DiscreteLegend"]), _defineProperty(_LEGEND_TYPE_MAP, "".concat(ORDINAL, "-", false, "-").concat(SIZE), _chartshq_muze_legend__WEBPACK_IMPORTED_MODULE_0__["DiscreteLegend"]), _defineProperty(_LEGEND_TYPE_MAP, "".concat(LINEAR, "-", false, "-").concat(SIZE), _chartshq_muze_legend__WEBPACK_IMPORTED_MODULE_0__["DiscreteLegend"]), _defineProperty(_LEGEND_TYPE_MAP, "".concat(LINEAR, "-", true, "-").concat(SIZE), _chartshq_muze_legend__WEBPACK_IMPORTED_MODULE_0__["DiscreteLegend"]), _defineProperty(_LEGEND_TYPE_MAP, "".concat(LINEAR, "-", false, "-").concat(SHAPE), _chartshq_muze_legend__WEBPACK_IMPORTED_MODULE_0__["DiscreteLegend"]), _defineProperty(_LEGEND_TYPE_MAP, "".concat(LINEAR, "-", true, "-").concat(COLOR), _chartshq_muze_legend__WEBPACK_IMPORTED_MODULE_0__["StepLegend"]), _defineProperty(_LEGEND_TYPE_MAP, "".concat(LINEAR, "-", false, "-").concat(COLOR), _chartshq_muze_legend__WEBPACK_IMPORTED_MODULE_0__["GradientLegend"]), _LEGEND_TYPE_MAP);
var LEFT = 'left';
var RIGHT = 'right';
var BOTTOM = 'bottom';
var TOP = 'top';
var GROUP = 'group';
var LAYOUT = 'layout';
var RETINAL = 'retinal';
var DIMENSION = 'dimension';
var MEASURE = 'measure';
var VERTICAL = 'vertical';
var HORIZONTAL = 'horizontal';
var HORIZONTAL_CENTER = 'h-center';
var VERTICAL_CENTER = 'v-center';
var HIDDEN = 'hidden';
var OVERFLOW = 'overflow';
var OVERFLOW_X = 'overflow-x';
var OVERFLOW_Y = 'overflow-y';
var AUTO = 'auto';
var VISIBLE = 'visible';

/***/ }),

/***/ "./packages/muze/src/default-registry.js":
/*!***********************************************!*\
  !*** ./packages/muze/src/default-registry.js ***!
  \***********************************************/
/*! exports provided: COMPONENTS, SUBREGISTRIES, INTERFACES */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COMPONENTS", function() { return COMPONENTS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUBREGISTRIES", function() { return SUBREGISTRIES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "INTERFACES", function() { return INTERFACES; });
/* harmony import */ var _chartshq_visual_cell__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/visual-cell */ "./packages/visual-cell/src/index.js");
/* harmony import */ var _chartshq_visual_unit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @chartshq/visual-unit */ "./packages/visual-unit/src/index.js");
/* harmony import */ var _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @chartshq/visual-layer */ "./packages/visual-layer/src/index.js");
/* harmony import */ var _chartshq_visual_group__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @chartshq/visual-group */ "./packages/visual-group/src/index.js");




var COMPONENTS = {
  VisualGroup: _chartshq_visual_group__WEBPACK_IMPORTED_MODULE_3__["VisualGroup"],
  VisualUnit: _chartshq_visual_unit__WEBPACK_IMPORTED_MODULE_1__["VisualUnit"]
};
var SUBREGISTRIES = {
  cellRegistry: _chartshq_visual_cell__WEBPACK_IMPORTED_MODULE_0__["cellRegistry"],
  layerRegistry: _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_2__["layerRegistry"]
};
var INTERFACES = {
  SimpleGroup: _chartshq_visual_group__WEBPACK_IMPORTED_MODULE_3__["SimpleGroup"],
  SimpleCell: _chartshq_visual_cell__WEBPACK_IMPORTED_MODULE_0__["SimpleCell"]
};

/***/ }),

/***/ "./packages/muze/src/defaults.js":
/*!***************************************!*\
  !*** ./packages/muze/src/defaults.js ***!
  \***************************************/
/*! exports provided: DEFAULT_CONFIG */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_CONFIG", function() { return DEFAULT_CONFIG; });
var DEFAULT_CONFIG = {
  classPrefix: 'muze',
  interaction: {
    sideEffect: 'individual'
  },
  pagination: 'scroll',
  scrollBar: {
    thickness: 10,
    speed: 2,
    vertical: {
      align: 'right'
    },
    horizontal: {
      align: 'bottom'
    }
  },
  legend: {
    position: 'right',
    color: {
      show: true,
      padding: 1,
      margin: 3,
      border: 1,
      height: 20,
      width: 20
    },
    shape: {
      show: true,
      padding: 1,
      margin: 3,
      border: 1,
      height: 20,
      width: 20
    },
    size: {
      show: true,
      padding: 1,
      margin: 3,
      border: 1,
      height: 20,
      width: 20
    }
  },
  showHeaders: false,
  minWidth: 100,
  minHeight: 100,
  facet: {
    rows: {
      minCharacters: 3
    },
    columns: {
      maxLines: 2,
      verticalAlign: 'middle',
      minCharacters: 1
    }
  },
  border: {
    style: 'solid',
    color: '#d6d6d6',
    width: 2,
    collapse: true,
    spacing: 0
  },
  autoGroupBy: {
    disabled: false
  },
  invalidValues: {}
};

/***/ }),

/***/ "./packages/muze/src/index.js":
/*!************************************!*\
  !*** ./packages/muze/src/index.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var Muze = __webpack_require__(/*! ./muze */ "./packages/muze/src/muze.js");

module.exports = Muze.default ? Muze.default : Muze;

/***/ }),

/***/ "./packages/muze/src/muze.js":
/*!***********************************!*\
  !*** ./packages/muze/src/muze.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @chartshq/muze-firebolt */ "./packages/muze-firebolt/src/index.js");
/* harmony import */ var _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @chartshq/visual-layer */ "./packages/visual-layer/src/index.js");
/* harmony import */ var _package_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../package.json */ "./packages/muze/package.json");
var _package_json__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../package.json */ "./packages/muze/package.json", 1);
/* harmony import */ var _operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./operators */ "./packages/muze/src/operators.js");
/* harmony import */ var _action_model__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./action-model */ "./packages/muze/src/action-model.js");
/* harmony import */ var _options__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./options */ "./packages/muze/src/options.js");
/* harmony import */ var _canvas__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./canvas */ "./packages/muze/src/canvas/index.js");
/* harmony import */ var _default_registry__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./default-registry */ "./packages/muze/src/default-registry.js");
/* harmony import */ var _muze_scss__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./muze.scss */ "./packages/muze/src/muze.scss");
/* harmony import */ var _muze_scss__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_muze_scss__WEBPACK_IMPORTED_MODULE_9__);
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }










 // Cache singleton instances which should be included only once in a page

var globalCache = {};
var defaultRegistry = _default_registry__WEBPACK_IMPORTED_MODULE_8__["COMPONENTS"];

var overrideRegistryDefinitions = function overrideRegistryDefinitions(overrideRegistry, registry) {
  for (var prop in overrideRegistry) {
    registry.set(prop, overrideRegistry[prop]);
  }
};
/**
 * Entry point to renderer. Initializes an environment with settings and registries for canvas. This is a simple wrapper
 * over {@link Canvas} which enables common configuration passing to multiple such canvases.
 *
 * Everytime `muze()` is called it creates an environment. These environment supports subset of APIs of Canvas. If
 * common configuration is used to render multiple canvases then it can be set directly in the env. Like if data is
 * common across all the visulization then its better to set the data in env. When a canvas is created it receives all
 * those configuration from env.
 *
 * ```
 *  // Creates an environment
 *  const env = muze()
 *  // Set data property in environment, so that all the canvas created from the same environment gets this data
 *  // automatically
 *  env.data(dm);
 *  // Creates canvas, by default env pushes data to canvas instance
 *  const canvas = env.canvas();
 * ```
 *
 * If a property is set on both environment and canvas instance, property set on canvas instance gets more priority.
 *
 * @public
 * @module muze
 * @namespace Muze
 *
 * @return {Env} Instance of an environment
 */


var muze = function muze() {
  // Setters and getters will be mounted on this. Object will be mutated.
  var _transactor = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["transactor"])({}, _options__WEBPACK_IMPORTED_MODULE_6__["default"]),
      _transactor2 = _slicedToArray(_transactor, 2),
      env = _transactor2[0],
      globalStore = _transactor2[1];

  var components = Object.assign({}, _default_registry__WEBPACK_IMPORTED_MODULE_8__["COMPONENTS"]);
  var componentSubRegistryDef = Object.assign(_default_registry__WEBPACK_IMPORTED_MODULE_8__["SUBREGISTRIES"]);
  var componentSubRegistry = {};

  for (var prop in componentSubRegistryDef) {
    componentSubRegistry[prop] = componentSubRegistryDef[prop]();
  } // Apart form the setter getter, an instance method is injected to create real renderer instances


  env.canvas = function () {
    // Create a canvas instance with this settings
    var settings = globalStore.serialize();
    var canvas = _canvas__WEBPACK_IMPORTED_MODULE_7__["Canvas"].withSettings(settings, {
      /* registry */
      components: components,
      componentSubRegistry: componentSubRegistry
    }, env.globalDependencies()); // Whenever settings is changed canvas is updated

    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["enableChainedTransaction"])(globalStore, canvas, Object.keys(settings));
    return canvas;
  }; // Global dependencies for for compositions. Only one copy of the same should be in the page


  env.globalDependencies = function () {
    if (!globalCache.smartlabel) {
      globalCache.smartlabel = new muze_utils__WEBPACK_IMPORTED_MODULE_0__["Smartlabel"](1, 'body');
    }

    return {
      smartlabel: globalCache.smartlabel,
      lifeCycleManager: new muze_utils__WEBPACK_IMPORTED_MODULE_0__["LifeCycleManager"]()
    };
  }; // Retrieves global settings. This getter is readonly so that user can't change this as change should happen
  // only from setter to avoid unwanted sync issues.


  env.settings = function () {
    return globalStore.serialize();
  };

  env.registry = function () {
    for (var _len = arguments.length, overrideRegistry = new Array(_len), _key = 0; _key < _len; _key++) {
      overrideRegistry[_key] = arguments[_key];
    }

    // Selectively copy the properties from COMPONENTS
    if (overrideRegistry.length) {
      for (var _prop in overrideRegistry) {
        if (_prop in defaultRegistry) {
          components[_prop] = overrideRegistry[_prop];
        }
      }

      return env;
    }

    return components;
  };

  env.cellRegistry = function () {
    var cellRegistry = componentSubRegistry.cellRegistry;

    if (arguments.length) {
      overrideRegistryDefinitions(arguments.length <= 0 ? undefined : arguments[0], cellRegistry);
      return env;
    }

    return cellRegistry.get();
  };

  env.layerRegistry = function () {
    var layerRegistry = componentSubRegistry.layerRegistry;

    if (arguments.length) {
      overrideRegistryDefinitions(arguments.length <= 0 ? undefined : arguments[0], layerRegistry);
      return env;
    }

    return layerRegistry.get();
  };

  return env;
};

var SideEffects = {
  sideEffects: _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__["sideEffects"],
  standards: {
    SurrogateSideEffect: _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__["SurrogateSideEffect"],
    SpawnableSideEffect: _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__["SpawnableSideEffect"],
    GenericSideEffect: _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__["GenericSideEffect"]
  }
};
var Behaviours = {
  behaviouralActions: _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__["behaviouralActions"],
  standards: {
    GenericBehaviour: _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__["GenericBehaviour"],
    PersistentBehaviour: _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__["PersistentBehaviour"],
    VolatileBehaviour: _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__["VolatileBehaviour"]
  }
};
muze.DataModel = muze_utils__WEBPACK_IMPORTED_MODULE_0__["DataModel"];
muze.version = _package_json__WEBPACK_IMPORTED_MODULE_3__.version;
muze.SideEffects = SideEffects;
muze.ActionModel = _action_model__WEBPACK_IMPORTED_MODULE_5__["actionModel"];
muze.layerFactory = _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_2__["layerFactory"];
muze.Operators = _operators__WEBPACK_IMPORTED_MODULE_4__;
muze.Behaviours = Behaviours;
muze.utils = {
  getClientPoint: muze_utils__WEBPACK_IMPORTED_MODULE_0__["getClientPoint"],
  getEvent: muze_utils__WEBPACK_IMPORTED_MODULE_0__["getEvent"],
  makeElement: muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"],
  selectElement: muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"],
  DateTimeFormatter: muze_utils__WEBPACK_IMPORTED_MODULE_0__["DateTimeFormatter"],
  require: muze_utils__WEBPACK_IMPORTED_MODULE_0__["require"]
};
/* harmony default export */ __webpack_exports__["default"] = (muze);

/***/ }),

/***/ "./packages/muze/src/muze.scss":
/*!*************************************!*\
  !*** ./packages/muze/src/muze.scss ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/muze/src/operators.js":
/*!****************************************!*\
  !*** ./packages/muze/src/operators.js ***!
  \****************************************/
/*! exports provided: share, html */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "share", function() { return share; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "html", function() { return html; });
/* harmony import */ var _chartshq_visual_group__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/visual-group */ "./packages/visual-group/src/index.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ "./packages/muze/src/constants.js");
function isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }



/**
 * This method creates a new composed variable instance from multiple variables. This is required when we have multiple
 * variables on a single axis and the union of domain of all the variables needs to be set on the axis.
 *
 * To create a new composed variable from multiple fields,
 * ```
 *  const sharedVar = share('open', 'high', 'low', 'close');
 *  canvas.rows([sharedVar])
 *      .columns(['date']);
 * ```
 *
 * @module Operators
 * @public
 * @function share
 * @param {Array} vars Variable names.
 *
 * @return {ComposedVars} Instance of composed variable
 */

var share = function share() {
  for (var _len = arguments.length, vars = new Array(_len), _key = 0; _key < _len; _key++) {
    vars[_key] = arguments[_key];
  }

  return _construct(_chartshq_visual_group__WEBPACK_IMPORTED_MODULE_0__["ComposedVars"], _toConsumableArray(vars.map(function (variable) {
    return new _chartshq_visual_group__WEBPACK_IMPORTED_MODULE_0__["SimpleVariable"](variable);
  })));
};
/**
 *
 *
 * @param {*} node
 *
 */

function treeShakeNode(node) {
  if (node.nodeType !== Node.ELEMENT_NODE) {
    return;
  }

  if (_constants__WEBPACK_IMPORTED_MODULE_1__["TITLE_TEMPLATE_NOT_ALLOWED_TAGS"].indexOf(node.tagName.toLowerCase()) !== -1) {
    node.parentNode.removeChild(node);
  } else {
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = node.childNodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        var childNode = _step.value;
        treeShakeNode(childNode);
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator.return != null) {
          _iterator.return();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }
  }
}
/**
 * A string template tagged function which sanitizes input html formatted string according to the allowed html tags.
 * This is used to render html in canvas components like title and tooltip.
 *
 * To render html in canvas components,
 * ```
 *     canvas.title(html`<span style=font-size:20px;>TITLE</span>`);
 * ```
 *
 * @public
 * @module Operators
 * @function html
 * @param {Array.<string>} strings - The string parts of the template.
 * @param {Array} exps - The list of evaluated expression values.
 *
 * @return {Function} Returns a function which returns the sanitized html string.
 */


function html(strings) {
  var htmlCode = '';
  var expLn = arguments.length <= 1 ? 0 : arguments.length - 1;
  var i = 0;

  for (; i < expLn; ++i) {
    htmlCode += strings[i] + (i + 1 < 1 || arguments.length <= i + 1 ? undefined : arguments[i + 1]);
  }

  htmlCode += strings[i];
  var frag = document.createDocumentFragment();
  var wrapper = document.createElement('div');
  frag.appendChild(wrapper);
  wrapper.innerHTML = htmlCode;
  treeShakeNode(wrapper);
  var innerHTML = wrapper.innerHTML;
  return function () {
    return innerHTML;
  };
}

/***/ }),

/***/ "./packages/muze/src/options.js":
/*!**************************************!*\
  !*** ./packages/muze/src/options.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _canvas_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./canvas/helper */ "./packages/muze/src/canvas/helper.js");
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./defaults */ "./packages/muze/src/defaults.js");
/**
 * This is the global options semantics based on which setters getters are created and reactivity is initiated.
 * Format
 *  PROPERTRY_NAME: {
 *      value: // default value of the property,
 *      meta: {
 *          typeCheck: // The setter value will be checked using this. If the value is function then the setter value
 *                     // is passed as args.
 *          typeExpected: // The output of typecheck action will be tested against this. Truthy value will set the
 *                       // value to the setter
 *          sanitizaiton: // Need for sanitization before type is checked
 *      }
 *  }
 * @module GlobalOptions
 */



/* harmony default export */ __webpack_exports__["default"] = ({
  data: {
    value: null,
    meta: {
      typeCheck: function typeCheck(d) {
        return d instanceof muze_utils__WEBPACK_IMPORTED_MODULE_0__["DataModel"];
      }
    }
  },
  width: {
    value: 0,
    meta: {
      sanitization: muze_utils__WEBPACK_IMPORTED_MODULE_0__["intSanitizer"],
      typeCheck: Number.isInteger
    }
  },
  height: {
    value: 0,
    meta: {
      sanitization: muze_utils__WEBPACK_IMPORTED_MODULE_0__["intSanitizer"],
      typeCheck: Number.isInteger
    }
  },
  minUnitWidth: {
    value: 50,
    meta: {
      sanitization: muze_utils__WEBPACK_IMPORTED_MODULE_0__["intSanitizer"],
      typeCheck: Number.isInteger
    }
  },
  minUnitHeight: {
    value: 50,
    meta: {
      sanitization: muze_utils__WEBPACK_IMPORTED_MODULE_0__["intSanitizer"],
      typeCheck: Number.isInteger
    }
  },
  config: {
    value: null,
    meta: {
      typeCheck: 'constructor',
      typeExpected: 'Object',
      sanitization: function sanitization(config, oldConfig) {
        // Reset the configuration when null is passed
        var oldConf = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, config === null ? {} : oldConfig);
        var defConfig = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(oldConf, _defaults__WEBPACK_IMPORTED_MODULE_2__["DEFAULT_CONFIG"]);
        var newConf = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(defConfig, config);
        newConf = Object(_canvas_helper__WEBPACK_IMPORTED_MODULE_1__["fixScrollBarConfig"])(newConf);
        return newConf;
      }
    }
  }
});

/***/ }),

/***/ "./packages/muze/src/transaction-support.js":
/*!**************************************************!*\
  !*** ./packages/muze/src/transaction-support.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return TransactionSupport; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }


/**
 * An Interface to be implemented if the transaction support is necessary. This class ensures reactivity to
 * global properties.
 */

var TransactionSupport =
/*#__PURE__*/
function () {
  function TransactionSupport() {
    _classCallCheck(this, TransactionSupport);
  }

  _createClass(TransactionSupport, [{
    key: "data",

    /**
     * Property accessor for data member of the class. Data is passed to the system by calling this method.
     */
    value: function data() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPl);
    }
    /**
     * Property accessor for width of the class. Width is passed as an integer.
     */

  }, {
    key: "width",
    value: function width() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPl);
    }
    /**
     * Property accessor for height of the class. Height is passed as an integer.
     */

  }, {
    key: "height",
    value: function height() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPl);
    }
    /**
     * Property accessor for config of the class. Config is passed as an object.
     */

  }, {
    key: "config",
    value: function config() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPl);
    }
  }]);

  return TransactionSupport;
}();



/***/ }),

/***/ "./packages/transform/src/enums/transform-type.js":
/*!********************************************************!*\
  !*** ./packages/transform/src/enums/transform-type.js ***!
  \********************************************************/
/*! exports provided: IDENTITY, GROUP, STACK, FRACTURE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDENTITY", function() { return IDENTITY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GROUP", function() { return GROUP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "STACK", function() { return STACK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FRACTURE", function() { return FRACTURE; });
/**
 * @module Transform
 * This module exports constants that are used to reference transforms in
 * a consistent manner throughout the project.
 */

/* eslint one-var: 0 */
var IDENTITY = 'identity';
var GROUP = 'group';
var STACK = 'stack';
var FRACTURE = 'fracture';

/***/ }),

/***/ "./packages/transform/src/group-transform/index.js":
/*!*********************************************************!*\
  !*** ./packages/transform/src/group-transform/index.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");

/**
 * Create multiple datasets from a single dataset by grouping the data using
 * a dimensional field.
 * @param {Array} schema Name and type of fields are stored in schema
 * @param {Array} data Data array
 * @param {Object} config Configuration object
 * @return {Array} Grouped data array
 */

/* harmony default export */ __webpack_exports__["default"] = (function (schema, data, config) {
  var groupBy = config.groupBy instanceof Array ? config.groupBy : [config.groupBy];
  var groupByIndices = groupBy.map(function (fieldName) {
    return schema.findIndex(function (d) {
      return d.name === fieldName;
    });
  });

  if (groupByIndices.find(function (d) {
    return d === -1;
  }) !== undefined) {
    throw new Error("Groupby field ".concat(groupBy, " not found in schema"));
  }

  var groupedData = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["nestCollection"])({
    keys: groupByIndices,
    data: data
  });
  groupedData.forEach(function (d) {
    var key = d.key;

    if (muze_utils__WEBPACK_IMPORTED_MODULE_0__["InvalidAwareTypes"].isInvalid(key)) {
      d.key = muze_utils__WEBPACK_IMPORTED_MODULE_0__["InvalidAwareTypes"].getInvalidType(key);
    }
  });
  return groupedData;
});

/***/ }),

/***/ "./packages/transform/src/identity-transform/index.js":
/*!************************************************************!*\
  !*** ./packages/transform/src/identity-transform/index.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * @module Transform
 * This file exports a function that is used to implement
 * the identity transform
 */

/* eslint no-unused-vars: 0 */

/**
 * This function accepts data and returns the data unchanged.
 * @param {Object} schema The schema.
 * @param {Array} data The data array.
 * @param {Object} config The config object.
 * @return {Array} The unchanged data.
 */
function identityTransform(schema, data, config) {
  return data;
}

/* harmony default export */ __webpack_exports__["default"] = (identityTransform);

/***/ }),

/***/ "./packages/transform/src/index.js":
/*!*****************************************!*\
  !*** ./packages/transform/src/index.js ***!
  \*****************************************/
/*! exports provided: identityTransform, stackTransform, groupTransform, transformFactory, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _stack_transform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./stack-transform */ "./packages/transform/src/stack-transform/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stackTransform", function() { return _stack_transform__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _group_transform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./group-transform */ "./packages/transform/src/group-transform/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "groupTransform", function() { return _group_transform__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _identity_transform__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./identity-transform */ "./packages/transform/src/identity-transform/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "identityTransform", function() { return _identity_transform__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _transform_factory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./transform-factory */ "./packages/transform/src/transform-factory/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "transformFactory", function() { return _transform_factory__WEBPACK_IMPORTED_MODULE_3__["default"]; });






/* harmony default export */ __webpack_exports__["default"] = ({
  version: '1.0.0'
});

/***/ }),

/***/ "./packages/transform/src/stack-transform/index.js":
/*!*********************************************************!*\
  !*** ./packages/transform/src/stack-transform/index.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _group_transform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../group-transform */ "./packages/transform/src/group-transform/index.js");


/*
    Normalize the data to a form which can be given to d3 stack for stacking the data
    ['Product', 'Sales', 'Region'],
    0 ['A', 2000, 'North'],
    1 ['A', 3000, 'South'],
    2 ['B', 3000, 'South'],
    3 ['B', 2000, 'North'],
    4 ['C', 3000, 'South'],
    5 ['C', 2000, 'North']
            |
            |
    ['Product', 'North', 'South'],
    ['A', 2000, 3000],
    ['B', 2000, 3000],
    ['C', 2000, 3000]
*/
// eslint-disable-next-line require-jsdoc

var normalizeData = function normalizeData(data, schema, valueField, uniqueField, groupBy) {
  var groupedData = Object(_group_transform__WEBPACK_IMPORTED_MODULE_1__["default"])(schema, data, {
    groupBy: uniqueField
  });
  var uniqueFieldIndex = schema.findIndex(function (d) {
    return d.name === uniqueField;
  });
  var valueFieldIndex = schema.findIndex(function (d) {
    return d.name === valueField;
  });
  var seriesKeyIndex = schema.findIndex(function (d) {
    return d.name === groupBy;
  });
  var seriesKeys = data.map(function (d) {
    return d[seriesKeyIndex];
  }).filter(function (item, pos, arr) {
    return arr.indexOf(item) === pos;
  }).sort();
  var fieldNames = schema.reduce(function (acc, obj, i) {
    acc[i] = obj.name;
    return acc;
  }, {});
  var dataArr = groupedData.map(function (arr) {
    var tuples = {};
    var rowObj = arr.values.reduce(function (acc, row) {
      acc = row.reduce(function (obj, value, i) {
        if (i === seriesKeyIndex) {
          obj[value] = row[valueFieldIndex];
          tuples[value] = row;
        } else if (i !== valueFieldIndex) {
          obj[fieldNames[i]] = value;
        }

        return obj;
      }, acc);
      return acc;
    }, {});
    rowObj._tuple = tuples; // Set missing values field to zero value

    seriesKeys.forEach(function (seriesKey) {
      if (rowObj[seriesKey] === undefined) {
        rowObj[seriesKey] = 0;
        var newArr = new Array(arr.values[0].length);
        newArr[uniqueFieldIndex] = arr.key;
        newArr[seriesKeyIndex] = seriesKey;
        rowObj._tuple[seriesKey] = newArr;
      }
    });
    return rowObj;
  });
  return {
    data: dataArr,
    keys: seriesKeys
  };
};
/**
 * Generate a stacked representation of data
 * @param {Array} schema schema Array
 * @param {Array} data data array
 * @param {Object} config Configuration object
 * @return {Array} stacked data
 */


/* harmony default export */ __webpack_exports__["default"] = (function (schema, data, config) {
  var uniqueField = config.uniqueField;
  var valueField = config.value;
  var groupBy = config.groupBy;
  var sort = config.sort || 'descending';
  var normalizedData = normalizeData(data, schema, valueField, uniqueField, groupBy);
  var keys = normalizedData.keys;
  var map = {};
  var orderBy = config.orderBy;
  var orderIndex = schema.findIndex(function (d) {
    return d.name === orderBy;
  });
  var groupByIndex = schema.findIndex(function (d) {
    return d.name === groupBy;
  });

  if (orderIndex !== -1) {
    keys.forEach(function (key) {
      var name = data.find(function (d) {
        return d[groupByIndex] === key;
      });
      map[key] = name[orderIndex];
    });
    normalizedData.keys.sort(function (a, b) {
      return map[a].localeCompare(map[b]);
    });
  }

  var stackData = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["stack"])({
    keys: normalizedData.keys,
    offset: config.offset || 'diverging',
    order: sort,
    data: normalizedData.data
  });
  stackData.forEach(function (seriesData) {
    seriesData.forEach(function (dataObj) {
      dataObj.data = dataObj.data._tuple[seriesData.key];
    });
  });
  return stackData;
});

/***/ }),

/***/ "./packages/transform/src/transform-factory/index.js":
/*!***********************************************************!*\
  !*** ./packages/transform/src/transform-factory/index.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _enums_transform_type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums/transform-type */ "./packages/transform/src/enums/transform-type.js");
/* harmony import */ var _identity_transform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../identity-transform */ "./packages/transform/src/identity-transform/index.js");
/* harmony import */ var _group_transform__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../group-transform */ "./packages/transform/src/group-transform/index.js");
/* harmony import */ var _stack_transform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../stack-transform */ "./packages/transform/src/stack-transform/index.js");
var _transformMap;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/**
 * @module Transform
 * This file exports the transform factory.
 */




/* istanbul ignore next */

var transformMap = (_transformMap = {}, _defineProperty(_transformMap, _enums_transform_type__WEBPACK_IMPORTED_MODULE_0__["IDENTITY"], _identity_transform__WEBPACK_IMPORTED_MODULE_1__["default"]), _defineProperty(_transformMap, _enums_transform_type__WEBPACK_IMPORTED_MODULE_0__["GROUP"], _group_transform__WEBPACK_IMPORTED_MODULE_2__["default"]), _defineProperty(_transformMap, _enums_transform_type__WEBPACK_IMPORTED_MODULE_0__["STACK"], _stack_transform__WEBPACK_IMPORTED_MODULE_3__["default"]), _transformMap);
/**
 * This function is used to retirn a transform associated
 * with the given type.
 *
 * @param {string} type The type of the transform.
 * @return {Function} The transform function.
 */

function transformFactory(type) {
  var transform = transformMap[type];

  if (typeof transform !== 'function') {
    throw new Error('Invalid transform type supplied.');
  }

  return transform;
}

/* harmony default export */ __webpack_exports__["default"] = (transformFactory);

/***/ }),

/***/ "./packages/visual-cell/src/axis-cell.js":
/*!***********************************************!*\
  !*** ./packages/visual-cell/src/axis-cell.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enums/constants */ "./packages/visual-cell/src/enums/constants.js");
/* harmony import */ var _simple_cell__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./simple-cell */ "./packages/visual-cell/src/simple-cell.js");
/* harmony import */ var _enums_defaults__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./enums/defaults */ "./packages/visual-cell/src/enums/defaults.js");
/* harmony import */ var _enums_cell_type__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./enums/cell-type */ "./packages/visual-cell/src/enums/cell-type.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./props */ "./packages/visual-cell/src/props.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

/**
 * This file declares a class that represents a table cell
 * used to house an axis.
 * @module VisualCell
 */






/**
 * Computes the logical space of the an axis instance within an axis cell
 *
 * @param {Object} context Required to get the needed parameters to compute axis space
 * @return {Object} Returns the logical space for axis
 */

var computeAxisSpace = function computeAxisSpace(context) {
  var logicalWidth;
  var logicalHeight;
  var axis = context.source();

  var _context$config = context.config(),
      spaceFixer = _context$config.spaceFixer,
      margin = _context$config.margin;

  var _axis$getLogicalSpace = axis.getLogicalSpace(),
      width = _axis$getLogicalSpace.width,
      height = _axis$getLogicalSpace.height;

  var _axis$config = axis.config(),
      show = _axis$config.show;

  if (show === true) {
    logicalHeight = Math.floor(height + margin.top + margin.bottom + spaceFixer);
    logicalWidth = Math.floor(width + margin.left + margin.right + spaceFixer);
  } else {
    logicalWidth = width;
    logicalHeight = height;
  }

  return {
    width: logicalWidth,
    height: logicalHeight
  };
};
/**
 * Represents an axis cell.
 *
 * @class Axis
 */


var AxisCell =
/*#__PURE__*/
function (_SimpleCell) {
  _inherits(AxisCell, _SimpleCell);

  /**
   * Creates an instance of AxisCell.
   *
   * @param {Object} config The input config.
   * @memberof AxisCell
   */
  function AxisCell(config) {
    var _this;

    _classCallCheck(this, AxisCell);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(AxisCell).call(this, config));
    _this._axis = null;
    _this._availHeight = null;
    _this._availWidth = null;
    _this._logicalSpace = null;
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(_assertThisInitialized(_assertThisInitialized(_this)), _props__WEBPACK_IMPORTED_MODULE_5__["PROPS"][_enums_cell_type__WEBPACK_IMPORTED_MODULE_4__["AXIS"]]);
    return _this;
  }
  /**
   * return the type pf SimpleCell cell.
   *
   * @readonly
   * @memberof AxisCell
   */


  _createClass(AxisCell, [{
    key: "valueOf",

    /**
     * This method return the value conatined by this SimpleCell.
     *
     * @return {SimpleAxis | ColorAxis} Instance of SimpleAxis or ColorAxis.
     * @memberof AxisCell
     */
    value: function valueOf() {
      return this.source().id;
    }
    /**
     * This method return the unique identififer of the axis
     *
     * @return {string} Id of the axis.
     * @memberof AxisCell
     */

  }, {
    key: "serialize",

    /**
     * Retrns the serialized representation of this cell.
     *
     * @return {Object}Object with serializable props.
     * @memberof AxisCell
     */
    value: function serialize() {
      return {
        type: _enums_cell_type__WEBPACK_IMPORTED_MODULE_4__["AXIS"],
        axis: this.source().serialize()
      };
    }
    /**
     * return the default configuration for the text cell
     *
     * @static
     * @return {Object} Default configuration of the cell
     * @memberof AxisCell
     */

  }, {
    key: "getLogicalSpace",

    /**
     * return the space taken up by an axis element in the dom.
     *
     * @return {Object} Object with width and height fields.
     * @memberof AxisCell
     */
    value: function getLogicalSpace() {
      if (!this.logicalSpace()) {
        this.logicalSpace(computeAxisSpace(this));
      }

      return this.logicalSpace();
    }
    /**
     * This method is used to set the space availiable to render
     * the SimpleCell.
     *
     * @param {number} width The width of SimpleCell.
     * @param {number} height The height of SimpleCell.
     * @return {Instance} Returns current Instance
     * @memberof AxisCell
     */

  }, {
    key: "setAvailableSpace",
    value: function setAvailableSpace(width, height) {
      this.availWidth(width);
      this.availHeight(height);

      var _this$config = this.config(),
          margin = _this$config.margin,
          isOffset = _this$config.isOffset;

      if (width || height) {
        this.source().setAvailableSpace(width, height, margin, isOffset);
        this.source().logicalSpace(null);
      } else {
        this.source().resetLogicalSpace();
      }

      this.logicalSpace(null);
      return this;
    }
    /**
     * This method is used to render the axis inside the axis cell.
     *
     * @param {HTMLElement} mount The mount point.
     * @return {Selection} node where axis mounted
     * @memberof AxisCell
     */

    /* istanbul ignore next */

  }, {
    key: "render",
    value: function render(mount) {
      if (!mount) {
        return this;
      }

      var axis = this.source();
      var availHeight = this.availHeight();
      var availWidth = this.availWidth();

      var _this$config2 = this.config(),
          margin = _this$config2.margin;

      var top = margin.top,
          bottom = margin.bottom,
          left = margin.left,
          right = margin.right;

      var _axis$config2 = axis.config(),
          show = _axis$config2.show,
          orientation = _axis$config2.orientation;

      var wrapperDiv = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(mount), 'div', [this], "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CLASSPREFIX"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["AXIS_CELL"]));
      var selection = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(wrapperDiv, 'svg', [1], "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CLASSPREFIX"], "-axis-container"));
      selection.classed("".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["CLASSPREFIX"], "-axis-container-").concat(orientation), true);
      this.mount(mount);

      if (!availWidth) {
        selection.attr(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["WIDTH"], "".concat(0, "px"));
      }

      if (!availHeight) {
        selection.attr(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["HEIGHT"], "".concat(0, "px"));
      }

      wrapperDiv.style(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["WIDTH"], "".concat(show ? Math.floor(availWidth) : 0, "px")).style(_enums_constants__WEBPACK_IMPORTED_MODULE_1__["HEIGHT"], "".concat(show ? Math.floor(availHeight) : 0, "px")).style('margin-top', top).style('margin-bottom', bottom).style('margin-left', left).style('margin-right', right);
      axis.mount(selection.node());
      return selection;
    }
    /**
     * Disposes the cell
     *
     * @return {Instance} Current instance of AxisCell
     * @memberof AxisCell
     */

  }, {
    key: "remove",
    value: function remove() {
      this.source() && this.source().remove();
      this.mount() && this.mount().remove();
      return this;
    }
  }, {
    key: "type",
    get: function get() {
      return _enums_cell_type__WEBPACK_IMPORTED_MODULE_4__["AXIS"];
    }
  }, {
    key: "id",
    get: function get() {
      return this._id;
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return _enums_defaults__WEBPACK_IMPORTED_MODULE_3__["DEFAULT_CONFIG"];
    }
  }]);

  return AxisCell;
}(_simple_cell__WEBPACK_IMPORTED_MODULE_2__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (AxisCell);

/***/ }),

/***/ "./packages/visual-cell/src/blank-cell.js":
/*!************************************************!*\
  !*** ./packages/visual-cell/src/blank-cell.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _simple_cell__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./simple-cell */ "./packages/visual-cell/src/simple-cell.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./enums/constants */ "./packages/visual-cell/src/enums/constants.js");
/* harmony import */ var _enums_cell_type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./enums/cell-type */ "./packages/visual-cell/src/enums/cell-type.js");
/* harmony import */ var _enums_defaults__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./enums/defaults */ "./packages/visual-cell/src/enums/defaults.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./props */ "./packages/visual-cell/src/props.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

/**
 * This file declares a class that represents a BLANK element in a  table.
 * @module VisualCell
 */






/**
 * Represents a table haeder.
 *
 * @class BLANK
 */

var BlankCell =
/*#__PURE__*/
function (_SimpleCell) {
  _inherits(BlankCell, _SimpleCell);

  /**
   * Creates an instance of BLANK.
   * @param {Object} config The input configuration.
   * @memberof BLANK
   */
  function BlankCell(config) {
    var _this;

    _classCallCheck(this, BlankCell);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(BlankCell).call(this, config));
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(_assertThisInitialized(_assertThisInitialized(_this)), _props__WEBPACK_IMPORTED_MODULE_5__["PROPS"][_enums_cell_type__WEBPACK_IMPORTED_MODULE_3__["BLANK"]]);
    return _this;
  }
  /**
   * return the type pf SimpleCell cell.
   *
   * @readonly
   * @memberof BlankCell
   */


  _createClass(BlankCell, [{
    key: "valueOf",

    /**
     * This method return the value contained by this SimpleCell.
     *
     * @return {string} The text value contained by this cell.
     * @memberof BlankCell
     */
    value: function valueOf() {
      return this.id;
    }
    /**
     * return the default configuration for the text cell
     *
     * @static
     * @return {Object} Default configuration of the cell
     * @memberof BlankCell
     */

  }, {
    key: "serialize",

    /**
     * This method is used to obtain a serialized representation of this instance.
     *
     * @return {Object} Object with serilizable props.
     * @memberof BLANK
     */
    value: function serialize() {
      return {
        type: _enums_cell_type__WEBPACK_IMPORTED_MODULE_3__["BLANK"]
      };
    }
    /**
     * This method return the space taken up
     * by the text with the style applied.
     *
     * @return {Object} width and height taken up by the text.
     * @memberof BLANK
     */

  }, {
    key: "getLogicalSpace",
    value: function getLogicalSpace() {
      if (!this.logicalSpace()) {
        return {
          width: this.width || 0,
          height: this.height || 0
        };
      }

      return this.logicalSpace();
    }
    /**
     * This method is used to set the available space.
     *
     * @param {number} width The available width.
     * @param {number} height The available height.
     * @return {Instance} Returns current Instance
     * @memberof BlankCell
     */

  }, {
    key: "setAvailableSpace",
    value: function setAvailableSpace(width, height) {
      this.availWidth(width);
      this.availHeight(height);
      this.logicalSpace(null);
      return this;
    }
    /**
     * This method is used to render the BLANK cell inside
     * the provided mount point.
     *
     * @param {HTMLElement} mount The mount point for this cell.
     * @return {Instance} Returns current Instance
     * @memberof BLANK
     */

    /* istanbul ignore next */

  }, {
    key: "render",
    value: function render(mount) {
      if (mount) {
        var _this$config = this.config(),
            style = _this$config.style; // append span element to mount point


        this.mount(mount);
        var container = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(mount);
        var elem = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'div', [this.id]);
        elem.classed("".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_2__["CLASSPREFIX"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_2__["BLANK_CELL"]), true);
        elem.style('width', "".concat(this.availWidth(), "px"));
        elem.style('height', "".concat(this.availHeight(), "px"));
        elem.html(''); // apply style on the returned element

        if (style) {
          Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["applyStyle"])(elem, style);
        }
      }

      return this;
    }
    /**
     * Removes the cell(Disposal)
     *
     * @return {Instance} Returns current Instance
     * @memberof BlankCell
     */

  }, {
    key: "remove",
    value: function remove() {
      this.mount() && this.mount().remove();
      return this;
    }
  }, {
    key: "type",
    get: function get() {
      return _enums_cell_type__WEBPACK_IMPORTED_MODULE_3__["BLANK"];
    }
  }, {
    key: "id",

    /**
     * This method is used to return a unique identifier for
     * the BLANK cell.
     *
     * @return {string} The unique identifier for the BLANK.
     * @memberof BlankCell
     */
    get: function get() {
      return this._id;
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return _enums_defaults__WEBPACK_IMPORTED_MODULE_4__["DEFAULT_CONFIG"];
    }
  }]);

  return BlankCell;
}(_simple_cell__WEBPACK_IMPORTED_MODULE_1__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (BlankCell);

/***/ }),

/***/ "./packages/visual-cell/src/cell-registry.js":
/*!***************************************************!*\
  !*** ./packages/visual-cell/src/cell-registry.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaults */ "./packages/visual-cell/src/defaults.js");

/**
 * Creates a registry for the cells, which can be used for
 * setting a new cell or getting the registered cells
 *
 * @return {Object} Setters and getters for registered cells
 */

var cellRegistry = function cellRegistry() {
  var reg = _defaults__WEBPACK_IMPORTED_MODULE_0__["DEFAULT_PLACEHOLDERS"];
  return {
    set: function set(key, def) {
      if (key in reg) {
        reg[key] = def;
      }

      return cellRegistry;
    },
    get: function get() {
      return reg;
    }
  };
};

/* harmony default export */ __webpack_exports__["default"] = (cellRegistry);

/***/ }),

/***/ "./packages/visual-cell/src/constants.js":
/*!***********************************************!*\
  !*** ./packages/visual-cell/src/constants.js ***!
  \***********************************************/
/*! exports provided: SIMPLE_CELL, TEXT_CELL, AXIS_CELL, BLANK_CELL, GEOM_CELL */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SIMPLE_CELL", function() { return SIMPLE_CELL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TEXT_CELL", function() { return TEXT_CELL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AXIS_CELL", function() { return AXIS_CELL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BLANK_CELL", function() { return BLANK_CELL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GEOM_CELL", function() { return GEOM_CELL; });
var SIMPLE_CELL = 'SimpleCell';
var TEXT_CELL = 'TextCell';
var AXIS_CELL = 'AxisCell';
var BLANK_CELL = 'BlankCell';
var GEOM_CELL = 'GeomCell';

/***/ }),

/***/ "./packages/visual-cell/src/defaults.js":
/*!**********************************************!*\
  !*** ./packages/visual-cell/src/defaults.js ***!
  \**********************************************/
/*! exports provided: DEFAULT_PLACEHOLDERS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_PLACEHOLDERS", function() { return DEFAULT_PLACEHOLDERS; });
/* harmony import */ var _axis_cell__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./axis-cell */ "./packages/visual-cell/src/axis-cell.js");
/* harmony import */ var _blank_cell__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./blank-cell */ "./packages/visual-cell/src/blank-cell.js");
/* harmony import */ var _text_cell__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./text-cell */ "./packages/visual-cell/src/text-cell.js");
/* harmony import */ var _geom_cell__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./geom-cell */ "./packages/visual-cell/src/geom-cell.js");
/* harmony import */ var _simple_cell__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./simple-cell */ "./packages/visual-cell/src/simple-cell.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./constants */ "./packages/visual-cell/src/constants.js");
var _DEFAULT_PLACEHOLDERS;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }







var DEFAULT_PLACEHOLDERS = (_DEFAULT_PLACEHOLDERS = {}, _defineProperty(_DEFAULT_PLACEHOLDERS, _constants__WEBPACK_IMPORTED_MODULE_5__["SIMPLE_CELL"], _simple_cell__WEBPACK_IMPORTED_MODULE_4__["default"]), _defineProperty(_DEFAULT_PLACEHOLDERS, _constants__WEBPACK_IMPORTED_MODULE_5__["TEXT_CELL"], _text_cell__WEBPACK_IMPORTED_MODULE_2__["default"]), _defineProperty(_DEFAULT_PLACEHOLDERS, _constants__WEBPACK_IMPORTED_MODULE_5__["AXIS_CELL"], _axis_cell__WEBPACK_IMPORTED_MODULE_0__["default"]), _defineProperty(_DEFAULT_PLACEHOLDERS, _constants__WEBPACK_IMPORTED_MODULE_5__["GEOM_CELL"], _geom_cell__WEBPACK_IMPORTED_MODULE_3__["default"]), _defineProperty(_DEFAULT_PLACEHOLDERS, _constants__WEBPACK_IMPORTED_MODULE_5__["BLANK_CELL"], _blank_cell__WEBPACK_IMPORTED_MODULE_1__["default"]), _DEFAULT_PLACEHOLDERS);

/***/ }),

/***/ "./packages/visual-cell/src/enums/cell-type.js":
/*!*****************************************************!*\
  !*** ./packages/visual-cell/src/enums/cell-type.js ***!
  \*****************************************************/
/*! exports provided: SIMPLE, TEXT, AXIS, GEOM, BLANK */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SIMPLE", function() { return SIMPLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TEXT", function() { return TEXT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AXIS", function() { return AXIS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GEOM", function() { return GEOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BLANK", function() { return BLANK; });
// eneum to refer to simple cell
var SIMPLE = 'simple'; // eneum to refer to header cell

var TEXT = 'text'; // enum to refer to axis cell

var AXIS = 'axis'; // enum to refer to visual cell

var GEOM = 'geom'; // enum to refer blank cell

var BLANK = 'blank';

/***/ }),

/***/ "./packages/visual-cell/src/enums/constants.js":
/*!*****************************************************!*\
  !*** ./packages/visual-cell/src/enums/constants.js ***!
  \*****************************************************/
/*! exports provided: MARGIN, LEFT, RIGHT, BOTTOM, TOP, SPACE_FIXER, CLASSPREFIX, VERTICAL_ALIGN, TEXT_ALIGN, IS_OFFSET, MIDDLE, BASELINE, SHOW, CENTER, TEXT, HEADER, HEIGHT, WIDTH, DATA, AXES, FACET_BY_FIELDS, FIELDS, TRANSFORM, LAYER_DEF, CONFIG, DETAIL_FIELDS, MAX_LINES, MIN_CHARS, ROTATION, TEXT_CELL, AXIS_CELL, GEOM_CELL, BLANK_CELL */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MARGIN", function() { return MARGIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LEFT", function() { return LEFT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RIGHT", function() { return RIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BOTTOM", function() { return BOTTOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOP", function() { return TOP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SPACE_FIXER", function() { return SPACE_FIXER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLASSPREFIX", function() { return CLASSPREFIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VERTICAL_ALIGN", function() { return VERTICAL_ALIGN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TEXT_ALIGN", function() { return TEXT_ALIGN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IS_OFFSET", function() { return IS_OFFSET; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MIDDLE", function() { return MIDDLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BASELINE", function() { return BASELINE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SHOW", function() { return SHOW; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CENTER", function() { return CENTER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TEXT", function() { return TEXT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HEADER", function() { return HEADER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HEIGHT", function() { return HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WIDTH", function() { return WIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DATA", function() { return DATA; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AXES", function() { return AXES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FACET_BY_FIELDS", function() { return FACET_BY_FIELDS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FIELDS", function() { return FIELDS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TRANSFORM", function() { return TRANSFORM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAYER_DEF", function() { return LAYER_DEF; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CONFIG", function() { return CONFIG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DETAIL_FIELDS", function() { return DETAIL_FIELDS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MAX_LINES", function() { return MAX_LINES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MIN_CHARS", function() { return MIN_CHARS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROTATION", function() { return ROTATION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TEXT_CELL", function() { return TEXT_CELL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AXIS_CELL", function() { return AXIS_CELL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GEOM_CELL", function() { return GEOM_CELL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BLANK_CELL", function() { return BLANK_CELL; });
/**
 * Flag to specify whether direction is vertical.
 */
var MARGIN = 'margin';
var LEFT = 'left';
var RIGHT = 'right';
var BOTTOM = 'bottom';
var TOP = 'top';
var SPACE_FIXER = 'spaceFixer';
var CLASSPREFIX = 'muze';
var VERTICAL_ALIGN = 'verticalAlign';
var TEXT_ALIGN = 'textAlign';
var IS_OFFSET = 'isOffset';
var MIDDLE = 'middle';
var BASELINE = 'baseline';
var SHOW = 'show';
var CENTER = 'center';
var TEXT = 'text';
var HEADER = 'header';
var HEIGHT = 'height';
var WIDTH = 'width';
var DATA = 'data';
var AXES = 'axes';
var FACET_BY_FIELDS = 'facetByFields';
var FIELDS = 'fields';
var TRANSFORM = 'transform';
var LAYER_DEF = 'layerDef';
var CONFIG = 'config';
var DETAIL_FIELDS = 'detailFields';
var MAX_LINES = 'maxLines';
var MIN_CHARS = 'minCharacters';
var ROTATION = 'rotation';
var TEXT_CELL = 'text-cell';
var AXIS_CELL = 'axis-cell';
var GEOM_CELL = 'geom-cell';
var BLANK_CELL = 'blank-cell';

/***/ }),

/***/ "./packages/visual-cell/src/enums/defaults.js":
/*!****************************************************!*\
  !*** ./packages/visual-cell/src/enums/defaults.js ***!
  \****************************************************/
/*! exports provided: DEFAULT_CONFIG */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_CONFIG", function() { return DEFAULT_CONFIG; });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "./packages/visual-cell/src/enums/constants.js");
var _CONSTANTS$MARGIN, _DEFAULT_CONFIG;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/**
 * This file exports variables that are used as defaults for
 * the placeholders
 */

/**
* Default Configuration for the cells
* @return {Object} Default configuration
*/

var DEFAULT_CONFIG = (_DEFAULT_CONFIG = {}, _defineProperty(_DEFAULT_CONFIG, _constants__WEBPACK_IMPORTED_MODULE_0__["MARGIN"], (_CONSTANTS$MARGIN = {}, _defineProperty(_CONSTANTS$MARGIN, _constants__WEBPACK_IMPORTED_MODULE_0__["LEFT"], 0), _defineProperty(_CONSTANTS$MARGIN, _constants__WEBPACK_IMPORTED_MODULE_0__["RIGHT"], 0), _defineProperty(_CONSTANTS$MARGIN, _constants__WEBPACK_IMPORTED_MODULE_0__["TOP"], 0), _defineProperty(_CONSTANTS$MARGIN, _constants__WEBPACK_IMPORTED_MODULE_0__["BOTTOM"], 0), _CONSTANTS$MARGIN)), _defineProperty(_DEFAULT_CONFIG, _constants__WEBPACK_IMPORTED_MODULE_0__["SPACE_FIXER"], 2), _defineProperty(_DEFAULT_CONFIG, _constants__WEBPACK_IMPORTED_MODULE_0__["IS_OFFSET"], false), _defineProperty(_DEFAULT_CONFIG, _constants__WEBPACK_IMPORTED_MODULE_0__["VERTICAL_ALIGN"], null), _defineProperty(_DEFAULT_CONFIG, _constants__WEBPACK_IMPORTED_MODULE_0__["TEXT_ALIGN"], _constants__WEBPACK_IMPORTED_MODULE_0__["CENTER"]), _defineProperty(_DEFAULT_CONFIG, _constants__WEBPACK_IMPORTED_MODULE_0__["SHOW"], true), _defineProperty(_DEFAULT_CONFIG, _constants__WEBPACK_IMPORTED_MODULE_0__["MAX_LINES"], 0), _defineProperty(_DEFAULT_CONFIG, _constants__WEBPACK_IMPORTED_MODULE_0__["MIN_CHARS"], 0), _defineProperty(_DEFAULT_CONFIG, _constants__WEBPACK_IMPORTED_MODULE_0__["ROTATION"], null), _DEFAULT_CONFIG);

/***/ }),

/***/ "./packages/visual-cell/src/geom-cell.js":
/*!***********************************************!*\
  !*** ./packages/visual-cell/src/geom-cell.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _simple_cell__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./simple-cell */ "./packages/visual-cell/src/simple-cell.js");
/* harmony import */ var _enums_cell_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./enums/cell-type */ "./packages/visual-cell/src/enums/cell-type.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./props */ "./packages/visual-cell/src/props.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./enums/constants */ "./packages/visual-cell/src/enums/constants.js");
/* harmony import */ var _enums_defaults__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./enums/defaults */ "./packages/visual-cell/src/enums/defaults.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

/**
 * This file declares a class that is used to represent a table cell
 * that houses a visual unit.
 * @module VisualCell
 */






/**
 * Calculates the logical space of the cell
 *
 * @param {Object} context Required to get the needed parameters to compute unit space
 * @return {Object} Logical space taken up by the unit
 * @memberof GeomCell
 */

var computeGeomSpace = function computeGeomSpace(context) {
  var config = context.source().config();
  var width = config.width,
      height = config.height;
  return {
    width: Math.ceil(width),
    height: Math.ceil(height + context.getCaptionSpace().height)
  };
};
/**
* This class represents a SimpleCell for visual unit.
*
* @class GeomCell
*/


var GeomCell =
/*#__PURE__*/
function (_SimpleCell) {
  _inherits(GeomCell, _SimpleCell);

  /**
   * Creates an instance of GeomCell.
   * @param {Object} config The input configuration.
   * @memberof GeomCell
   */
  function GeomCell(config) {
    var _this;

    _classCallCheck(this, GeomCell);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(GeomCell).call(this, config));
    _this._unit = null;
    _this._layers = null;
    _this._axes = {};
    _this._datamodel = {};
    _this._facetByFields = {};
    _this._fields = null;
    _this._transform = null;
    _this._caption = null;
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(_assertThisInitialized(_assertThisInitialized(_this)), _props__WEBPACK_IMPORTED_MODULE_3__["PROPS"][_enums_cell_type__WEBPACK_IMPORTED_MODULE_2__["GEOM"]]);
    return _this;
  }
  /**
   * return the type pf SimpleCell cell.
   *
   * @readonly
   * @memberof GeomCell
   */


  _createClass(GeomCell, [{
    key: "valueOf",

    /**
     * This method return the value contained by this cell.
     *
     * @return {VisualUnit} Instance of visual unit contained by visual unit.
     * @memberof GeomCell
     */
    value: function valueOf() {
      return this.source();
    }
    /**
     * This method is used to return the id of the
     * visual unit housed by this cell.
     *
     * @return {string} The unique id of the visual unit.
     * @memberof GeomCell
     */

  }, {
    key: "serialize",

    /**
     * This method return a serialized representation of
     * this instance.
     *
     * @return {Object} Object with serializable props.
     * @memberof GeomCell
     */
    value: function serialize() {
      return {
        type: _enums_cell_type__WEBPACK_IMPORTED_MODULE_2__["GEOM"],
        unit: this.source().serialize(),
        caption: this.caption()
      };
    }
    /**
     * return the default configuration for the geom cell
     *
     * @static
     * @return {Object} Default configuration of the cell
     * @memberof GeomCell
     */

  }, {
    key: "updateModel",

    /**
     * Updates the model based on the changed parameters
     *
     * @return {Instance} return instance
     * @memberof GeomCell
     */
    value: function updateModel() {
      var _this2 = this;

      var unit = this.source();
      unit.lockModel();
      [_enums_constants__WEBPACK_IMPORTED_MODULE_4__["LAYER_DEF"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["TRANSFORM"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["AXES"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["FIELDS"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["CONFIG"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["DATA"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["AXES"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["FACET_BY_FIELDS"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["DETAIL_FIELDS"]].forEach(function (prop) {
        _this2[prop]() && unit[prop](_this2[prop]());
      });
      unit.unlockModel();
      return this;
    }
    /**
     * It gives the space taken by the caption of the unit
     *
     * @return {Object} return the space taken by caption
     * @memberof GeomCell
     */

  }, {
    key: "getCaptionSpace",
    value: function getCaptionSpace() {
      var caption = this.caption();
      var captionSpace = {
        width: 0,
        height: 0
      };

      if (caption) {
        captionSpace = caption.getLogicalSpace();
      }

      return captionSpace;
    }
    /**
     * return the space taken up by the element in the dom.
     *
     * @return {Object} Object with width and height fields.
     * @memberof GeomCell
     */

  }, {
    key: "getLogicalSpace",
    value: function getLogicalSpace() {
      if (!this.logicalSpace()) {
        this.logicalSpace(computeGeomSpace(this));
      }

      return this.logicalSpace();
    }
    /**
     * This method is used to set the space available to
     * render the SimpleCell.
     *
     * @param {number} width The available width.
     * @param {number} height The available height.
     * @return {Instance} Returns current Instance
     * @memberof GeomCell
     */

  }, {
    key: "setAvailableSpace",
    value: function setAvailableSpace(width, height) {
      var unit = this.source();
      this.availWidth(width);
      this.availHeight(height);
      unit.lockModel();
      unit.width(width).height(height - this.getCaptionSpace().height);
      unit.unlockModel();
      this.logicalSpace(null);
      return this;
    }
    /**
     * his method is used to render the visual unit inside the provided cell.
     *
     * @param {HTMLElement} mount The mountpoint in the table.
     * @return {Instance} Returns current Instance
     * @memberof GeomCell
     */

  }, {
    key: "render",
    value: function render(mount) {
      if (mount) {
        this.mount(mount);
        var availHeight = this.availHeight();
        var availWidth = this.availWidth();
        var caption = this.caption();
        var wrapperDiv = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(mount), 'div', [1], "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_4__["CLASSPREFIX"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_4__["GEOM_CELL"]));

        if (caption) {
          var captionDom = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(wrapperDiv, 'div', [caption], "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_4__["CLASSPREFIX"], "-unit-caption")).node();
          caption.render(captionDom);
        }

        var selection = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(wrapperDiv, 'div', [1], "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_4__["CLASSPREFIX"], "-unit"));
        wrapperDiv.style(_enums_constants__WEBPACK_IMPORTED_MODULE_4__["WIDTH"], "".concat(availWidth, "px")).style(_enums_constants__WEBPACK_IMPORTED_MODULE_4__["HEIGHT"], "".concat(availHeight, "px"));
        selection.style(_enums_constants__WEBPACK_IMPORTED_MODULE_4__["WIDTH"], "".concat(availWidth, "px")).style(_enums_constants__WEBPACK_IMPORTED_MODULE_4__["HEIGHT"], "".concat(availHeight - this.getCaptionSpace().height, "px"));
        this.source().mount(selection.node());
      }

      return this;
    }
    /**
     * Disposes the cell
     *
     * @return {Object} Current instance
     * @memberof GeomCell
     */

  }, {
    key: "remove",
    value: function remove() {
      this.mount() && this.mount().remove();
      this.source().remove();
      return this;
    }
  }, {
    key: "type",
    get: function get() {
      return _enums_cell_type__WEBPACK_IMPORTED_MODULE_2__["GEOM"];
    }
  }, {
    key: "id",
    get: function get() {
      return this.source().id();
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return _enums_defaults__WEBPACK_IMPORTED_MODULE_5__["DEFAULT_CONFIG"];
    }
  }]);

  return GeomCell;
}(_simple_cell__WEBPACK_IMPORTED_MODULE_1__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (GeomCell);

/***/ }),

/***/ "./packages/visual-cell/src/index.js":
/*!*******************************************!*\
  !*** ./packages/visual-cell/src/index.js ***!
  \*******************************************/
/*! exports provided: AxisCell, BlankCell, TextCell, GeomCell, SimpleCell, cellRegistry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _axis_cell__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./axis-cell */ "./packages/visual-cell/src/axis-cell.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AxisCell", function() { return _axis_cell__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _blank_cell__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./blank-cell */ "./packages/visual-cell/src/blank-cell.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BlankCell", function() { return _blank_cell__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _text_cell__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./text-cell */ "./packages/visual-cell/src/text-cell.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TextCell", function() { return _text_cell__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _geom_cell__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./geom-cell */ "./packages/visual-cell/src/geom-cell.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GeomCell", function() { return _geom_cell__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _simple_cell__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./simple-cell */ "./packages/visual-cell/src/simple-cell.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleCell", function() { return _simple_cell__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _cell_registry__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./cell-registry */ "./packages/visual-cell/src/cell-registry.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "cellRegistry", function() { return _cell_registry__WEBPACK_IMPORTED_MODULE_5__["default"]; });









/***/ }),

/***/ "./packages/visual-cell/src/props.js":
/*!*******************************************!*\
  !*** ./packages/visual-cell/src/props.js ***!
  \*******************************************/
/*! exports provided: PROPS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PROPS", function() { return PROPS; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_cell_type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enums/cell-type */ "./packages/visual-cell/src/enums/cell-type.js");
var _PROPS;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



var DEFAULT_PROPS = {
  mount: {},
  availHeight: {},
  availWidth: {},
  config: {
    sanitization: function sanitization(context, value) {
      return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(context._config, value);
    }
  },
  logicalSpace: {},
  minSpacing: {},
  source: {}
};
var geomProps = {
  data: {},
  caption: {},
  config: {},
  axes: {
    sanitization: function sanitization(context, value) {
      return Object.assign(context._axes, value);
    }
  },
  facetByFields: {},
  fields: {},
  transform: {},
  layerDef: {},
  detailFields: {}
};
var textProps = {
  smartText: {}
};
var PROPS = (_PROPS = {}, _defineProperty(_PROPS, _enums_cell_type__WEBPACK_IMPORTED_MODULE_1__["GEOM"], Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(geomProps, DEFAULT_PROPS)), _defineProperty(_PROPS, _enums_cell_type__WEBPACK_IMPORTED_MODULE_1__["TEXT"], Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(textProps, DEFAULT_PROPS)), _defineProperty(_PROPS, _enums_cell_type__WEBPACK_IMPORTED_MODULE_1__["AXIS"], DEFAULT_PROPS), _defineProperty(_PROPS, _enums_cell_type__WEBPACK_IMPORTED_MODULE_1__["BLANK"], DEFAULT_PROPS), _PROPS);

/***/ }),

/***/ "./packages/visual-cell/src/simple-cell.js":
/*!*************************************************!*\
  !*** ./packages/visual-cell/src/simple-cell.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_cell_type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enums/cell-type */ "./packages/visual-cell/src/enums/cell-type.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }



/**
 * This file declares a class that is used as an interface to create new
 * SimpleCell elements.
 * @module SimpleCell
 */

/**
 * Base class for all table cells.
 *
 * @interface
 * @class SimpleCell
 */

var SimpleCell =
/*#__PURE__*/
function () {
  /**
   * Creates an instance of SimpleCell.
   *
   * @param {*} config The input configuration.
   * @memberof SimpleCell
   */
  function SimpleCell(config) {
    _classCallCheck(this, SimpleCell);

    this._id = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getUniqueId"])();
    var defConfig = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, this.constructor.defaultConfig());
    this._config = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(defConfig, config || {});
    this._mount = null;
  }
  /**
   * Returns the type of the placehlder.
   *
   * @readonly
   * @memberof SimpleCell
   */


  _createClass(SimpleCell, [{
    key: "valueOf",

    /**
     * Returns the value contained by the SimpleCell.
     *
     * @memberof SimpleCell
     */
    value: function valueOf() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Returns a unique identifier for the instance used
     * to control selective rendering.
     *
     * @memberof SimpleCell
     */

  }, {
    key: "id",
    value: function id() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Returns a serialized representation of the instance.
     *
     * @memberof SimpleCell
     */

  }, {
    key: "serialize",
    value: function serialize() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Returns an object with width and height fields
     * specifying the space taken up by this metod.
     *
     * @memberof SimpleCell
     */

  }, {
    key: "getLogicalSpace",
    value: function getLogicalSpace() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Method used to set the space available to render the SimpleCell
     *
     * @param {number} width The available width.
     * @param {number} height The available height.
     * @memberof SimpleCell
     */

  }, {
    key: "setAvailableSpace",
    value: function setAvailableSpace() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Render the SimpleCell inthe supplied mount point.
     *
     * @param {HTMLElement} mount The mount point to render in.
     * @memberof SimpleCell
     */

  }, {
    key: "render",
    value: function render() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Render the SimpleCell inthe supplied mount point.
     *
     * @param {HTMLElement} mount The mount point to render in.
     * @memberof SimpleCell
     */

  }, {
    key: "remove",
    value: function remove() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }, {
    key: "type",
    get: function get() {
      return _enums_cell_type__WEBPACK_IMPORTED_MODULE_1__["SIMPLE"];
    }
    /**
     * Returns the type of the placehlder.
     *
     * @readonly
     * @memberof SimpleCell
     * @return {Object} Default config for the placeholder
     */

  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return {};
    }
  }]);

  return SimpleCell;
}();

/* harmony default export */ __webpack_exports__["default"] = (SimpleCell);

/***/ }),

/***/ "./packages/visual-cell/src/text-cell.js":
/*!***********************************************!*\
  !*** ./packages/visual-cell/src/text-cell.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _simple_cell__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./simple-cell */ "./packages/visual-cell/src/simple-cell.js");
/* harmony import */ var _enums_cell_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./enums/cell-type */ "./packages/visual-cell/src/enums/cell-type.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./props */ "./packages/visual-cell/src/props.js");
/* harmony import */ var _enums_defaults__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./enums/defaults */ "./packages/visual-cell/src/enums/defaults.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./enums/constants */ "./packages/visual-cell/src/enums/constants.js");
/* harmony import */ var _text_cell_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./text-cell.scss */ "./packages/visual-cell/src/text-cell.scss");
/* harmony import */ var _text_cell_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_text_cell_scss__WEBPACK_IMPORTED_MODULE_6__);
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

/**
 * This file declares a class that represents a Text element in a  table.
 * @module VisualCell
 */








var setSmartText = function setSmartText(context) {
  var source = context.source();

  var _context$minSpacing = context.minSpacing(),
      minHeightSpace = _context$minSpacing.height,
      minWidthSpace = _context$minSpacing.width;

  var _context$config = context.config(),
      margin = _context$config.margin,
      rotation = _context$config.rotation;

  var left = margin.left,
      right = margin.right,
      top = margin.top,
      bottom = margin.bottom;
  var paddedHeight = top + bottom + minHeightSpace;
  var paddedWidth = left + right + minWidthSpace;
  var availHeight = context.availHeight() - paddedHeight;
  var availWidth = context.availWidth() - paddedWidth;
  var labelManager = context.dependencies().labelManager;
  labelManager.setStyle(context._computedStyle);
  !rotation && context.smartText(labelManager.getSmartText(source, availWidth, availHeight, false));
  rotation && context.smartText(labelManager.getSmartText(source, availHeight, availWidth, true));
  return context;
};
/**
* Computes the Logical Space for the text
*
* @param {Object} context Required to get the needed parameters to compute text space
* @return {Object} Logical space taken up by text
* @memberof TextCell
*/


var computeTextSpace = function computeTextSpace(context) {
  var _context$dependencies = context.dependencies(),
      labelManager = _context$dependencies.labelManager;

  var _context$minSpacing2 = context.minSpacing(),
      minHeightSpace = _context$minSpacing2.height,
      minWidthSpace = _context$minSpacing2.width;

  var _context$config2 = context.config(),
      margin = _context$config2.margin,
      show = _context$config2.show,
      maxLines = _context$config2.maxLines,
      minCharacters = _context$config2.minCharacters;

  var left = margin.left,
      right = margin.right,
      top = margin.top,
      bottom = margin.bottom;
  var paddedHeight = top + bottom + minHeightSpace;
  var paddedWidth = left + right + minWidthSpace;
  var availHeight = context.availHeight() - paddedHeight;
  var availWidth = context.availWidth() - paddedWidth;
  var source = context.source();
  var space = context.smartText();
  var minText = new Array(minCharacters).fill('W').join('');

  var _minTextSpace = labelManager.getOriSize(minText);

  context.config({
    rotation: false
  });

  if (space.width > (availWidth || 0) && maxLines) {
    space.height = space.oriTextHeight * maxLines;
  }

  if (availWidth && availWidth < space.width) {
    space.width = _minTextSpace.width;
  }

  if (availWidth && availWidth < Math.min(_minTextSpace.width, space.oriTextWidth)) {
    var smartSpace = labelManager.getSmartText(source, availHeight, _minTextSpace.height, true);
    space.width = smartSpace.height;
    space.height = smartSpace.width;
    context.config({
      rotation: true
    });
    context.smartText(smartSpace);
  }

  if (show) {
    return {
      width: Math.ceil(space.width) + paddedWidth,
      height: Math.ceil(space.height) + paddedHeight
    };
  }

  return {
    width: 0,
    height: 0
  };
};
/**
 * Represents a table haeder.
 *
 * @class Text
 */


var TextCell =
/*#__PURE__*/
function (_SimpleCell) {
  _inherits(TextCell, _SimpleCell);

  /**
   * Creates an instance of Text.
   * @param {Object} config The input configuration.
   * @param {string} dependencies Dependencies for the class(labelManager)
   * @memberof Text
   */
  function TextCell(config, dependencies) {
    var _this;

    _classCallCheck(this, TextCell);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(TextCell).call(this, config));
    _this._dependencies = dependencies;
    _this._className = _this._config.className || (_this._config.type === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["HEADER"] ? "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_5__["CLASSPREFIX"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_5__["HEADER"], "-cell") : "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_5__["CLASSPREFIX"], "-").concat(_enums_cell_type__WEBPACK_IMPORTED_MODULE_2__["TEXT"], "-cell"));
    _this._computedStyle = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getSmartComputedStyle"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])('body'), _this._className);

    _this._dependencies.labelManager.setStyle(_this._computedStyle);

    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(_assertThisInitialized(_assertThisInitialized(_this)), _props__WEBPACK_IMPORTED_MODULE_3__["PROPS"][_enums_cell_type__WEBPACK_IMPORTED_MODULE_2__["TEXT"]]);

    var space = _this._dependencies.labelManager.getOriSize('w');

    _this.minSpacing({
      width: Math.floor(space.width * 3 / 4),
      height: Math.floor(space.height / 2)
    });

    setSmartText(_assertThisInitialized(_assertThisInitialized(_this)));
    return _this;
  }
  /**
   * return the type pf SimpleCell cell.
   *
   * @readonly
   * @memberof TextCell
   */


  _createClass(TextCell, [{
    key: "valueOf",

    /**
     * This method return the value contained by this SimpleCell.
     *
     * @return {string} The text value contained by this cell.
     * @memberof TextCell
     */
    value: function valueOf() {
      return this.source();
    }
    /**
     * This method is used to return a unique identifier for
     * the Text cell.
     *
     * @return {string} The unique identifier for the Text.
     * @memberof TextCell
     */

  }, {
    key: "dependencies",

    /**
     * Returns the dependencies of the instance
     *
     * @return {Object} Dependencies needed by the class
     * @memberof TextCell
     */
    value: function dependencies() {
      return this._dependencies;
    }
    /**
     * This method is used to obtain a serialized representation of this instance.
     *
     * @return {Object} Object with serilizable props.
     * @memberof TextCell
     */

  }, {
    key: "serialize",
    value: function serialize() {
      return {
        text: this.source(),
        type: _enums_cell_type__WEBPACK_IMPORTED_MODULE_2__["TEXT"]
      };
    }
    /**
     * return the default configuration for the text cell
     *
     * @static
     * @return {Object} Default configuration of the cell
     * @memberof TextCell
     */

  }, {
    key: "getLogicalSpace",

    /**
     * This method return the space taken up
     * by the text with the style applied.
     *
     * @return {Object} width and height taken up by the text.
     * @memberof Text
     */
    value: function getLogicalSpace() {
      if (!this.logicalSpace()) {
        this.logicalSpace(computeTextSpace(this));
      }

      return this.logicalSpace();
    }
    /**
     * This method is used to set the available space.
     *
     * @param {number} width The available width.
     * @param {number} height The available height.
     * @return {Instance} Returns current Instance
     * @memberof TextCell
     */

  }, {
    key: "setAvailableSpace",
    value: function setAvailableSpace(width, height) {
      this.availWidth(width);
      this.availHeight(height);
      setSmartText(this);
      this.logicalSpace(null);
      return this;
    }
    /**
     * This method is used to render the Text cell inside
     * the provided mount point.
     *
     * @param {HTMLElement} mount The mount point for this cell.
     * @return {Instance} Returns current Instance
     * @memberof Text
     */

  }, {
    key: "render",
    value: function render(mount) {
      var availWidth = this.availWidth();
      var availHeight = this.availHeight();

      var _this$config = this.config(),
          margin = _this$config.margin,
          show = _this$config.show,
          verticalAlign = _this$config.verticalAlign,
          textAlign = _this$config.textAlign,
          rotation = _this$config.rotation;

      this.mount(mount);

      if (show) {
        var container = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(mount);
        var elem = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'div', [this.id], "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_5__["CLASSPREFIX"], "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_5__["TEXT_CELL"]));
        var vAlign = verticalAlign || rotation ? 'middle' : 'top';

        var _this$smartText = this.smartText(),
            width = _this$smartText.width,
            height = _this$smartText.height;

        var _this$minSpacing = this.minSpacing(),
            minHeightSpace = _this$minSpacing.height;

        var translation = {
          top: width + minHeightSpace / 2,
          middle: width / 2 + minHeightSpace,
          bottom: minHeightSpace
        };
        container.style('vertical-align', vAlign); // Set class name

        elem.classed(this._className, true); // Apply styles

        elem.style('text-align', textAlign);
        elem.style('display', 'inline');
        elem.style('transform', rotation ? "translate(".concat(height / 2, "px,\n                ").concat(translation[vAlign], "px) rotate(-90deg)") : '');
        elem.style(_enums_constants__WEBPACK_IMPORTED_MODULE_5__["WIDTH"], availWidth ? "".concat(availWidth, "px") : '100%');
        [_enums_constants__WEBPACK_IMPORTED_MODULE_5__["TOP"], _enums_constants__WEBPACK_IMPORTED_MODULE_5__["BOTTOM"], _enums_constants__WEBPACK_IMPORTED_MODULE_5__["LEFT"], _enums_constants__WEBPACK_IMPORTED_MODULE_5__["RIGHT"]].forEach(function (type) {
          container.style("margin-".concat(type), "".concat(margin[type], "px"));
        });
        elem.style('text-align', textAlign);
        elem.style('display', 'inline'); // set the text as the innerHTML

        this._dependencies.labelManager.setStyle(this._computedStyle);

        elem.html(this._dependencies.labelManager.getSmartText(this.source(), availWidth, availHeight, true).text);
      }

      return this;
    }
    /**
     * Disposes the cell
     *
     * @return {Instance} Returns current Instance
     * @memberof TextCell
     */

  }, {
    key: "remove",
    value: function remove() {
      this.mount() && this.mount().remove();
      return this;
    }
  }, {
    key: "type",
    get: function get() {
      return _enums_cell_type__WEBPACK_IMPORTED_MODULE_2__["TEXT"];
    }
  }, {
    key: "id",
    get: function get() {
      return this._id;
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return _enums_defaults__WEBPACK_IMPORTED_MODULE_4__["DEFAULT_CONFIG"];
    }
  }]);

  return TextCell;
}(_simple_cell__WEBPACK_IMPORTED_MODULE_1__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (TextCell);

/***/ }),

/***/ "./packages/visual-cell/src/text-cell.scss":
/*!*************************************************!*\
  !*** ./packages/visual-cell/src/text-cell.scss ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/visual-group/src/data-type-scale-map.js":
/*!**********************************************************!*\
  !*** ./packages/visual-group/src/data-type-scale-map.js ***!
  \**********************************************************/
/*! exports provided: dataTypeScaleMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dataTypeScaleMap", function() { return dataTypeScaleMap; });
/* harmony import */ var _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/muze-axis */ "./packages/muze-axis/src/index.js");

/**
 * Map of DataModel types to associated field types.
 */

var dataTypeScaleMap = {
  dimension: _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__["ScaleType"].BAND,
  categorical: _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__["ScaleType"].BAND,
  temporal: _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__["ScaleType"].TIME,
  measure: _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__["ScaleType"].LINEAR,
  continuous: _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__["ScaleType"].LINEAR
};

/***/ }),

/***/ "./packages/visual-group/src/encoders/field-sanitizer.js":
/*!***************************************************************!*\
  !*** ./packages/visual-group/src/encoders/field-sanitizer.js ***!
  \***************************************************************/
/*! exports provided: transformFields */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformFields", function() { return transformFields; });
/* harmony import */ var _variable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../variable */ "./packages/visual-group/src/variable/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/constants */ "./packages/visual-group/src/enums/constants.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }



/**
 * Gets the list of fields in a sorted order by measurement and dimension
 *
 * @param {Array} fieldList List of fields in the view
 * @param {Object} fieldMap Mapping of fields in the datamodel
 * @return {Array} fields sorted by measurement and dimensions
 */

var orderFields = function orderFields(fieldArray, type) {
  var dimensionArr = [[], []];
  var measureArr = [[], []];
  var temporalArr = [[], []];
  var categoricalArr = [[], []];
  fieldArray.forEach(function (fieldList, index) {
    fieldList.forEach(function (field) {
      if (field.type() === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["DIMENSION"]) {
        dimensionArr[index].push(field);
        field.subtype() === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["TEMPORAL"] ? temporalArr[index].push(field) : categoricalArr[index].push(field);
      } else {
        measureArr[index].push(field);
      }
    });
  });
  var numOfMeasures = measureArr[0].length + (measureArr[1] ? measureArr[1].length : 0); // Single array of fields

  if (!fieldArray[1]) {
    // Push measures to bottom
    measureArr[1] = type === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLUMNS"] ? measureArr[0] : []; // Push measures to left

    measureArr[0] = type !== _enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLUMNS"] ? measureArr[0] : []; // Bottom and right dimensions empty

    dimensionArr[1] = []; // Left and top filled with dimensions

    dimensionArr[0] = dimensionArr[0];

    if (numOfMeasures === 0) {
      var allDimensions = [].concat(_toConsumableArray(dimensionArr[0]), _toConsumableArray(dimensionArr[1]));

      if (type === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLUMNS"]) {
        dimensionArr[1] = allDimensions[allDimensions.length - 1] ? [allDimensions[allDimensions.length - 1]] : [];
        allDimensions.splice(-1, 1);
      } else {
        dimensionArr[1] = [];
      }

      dimensionArr[0] = _toConsumableArray(allDimensions);
    }
  }

  if (dimensionArr[0].length && dimensionArr[1].length && numOfMeasures > 0) {
    dimensionArr[0] = [].concat(_toConsumableArray(dimensionArr[0]), _toConsumableArray(dimensionArr[1]));
    dimensionArr[1] = [];
  }

  return {
    fields: dimensionArr.map(function (list, i) {
      return i === 1 ? measureArr[i].concat(dimensionArr[i]) : dimensionArr[i].concat(measureArr[i]);
    }),
    dimensions: [].concat(_toConsumableArray(dimensionArr[0]), _toConsumableArray(dimensionArr[1])),
    measures: [].concat(_toConsumableArray(measureArr[0]), _toConsumableArray(measureArr[1])),
    temporal: [].concat(_toConsumableArray(temporalArr[0]), _toConsumableArray(temporalArr[1])),
    categorical: [].concat(_toConsumableArray(categoricalArr[0]), _toConsumableArray(categoricalArr[1]))
  };
};
/**
 * Gets the list of normalized fields
 *
 * @param {Array} fields List of fields in the view
 * @param {Object} fieldMap Mapping of fields in the datamodel
 * @return {Array} fields normalized by measurement and dimensions
 */


var normalizeFields = function normalizeFields(config, type) {
  var fieldsArr = [];
  var fields = config[type];

  if (!(fields[0] instanceof Array)) {
    fieldsArr[0] = fields;
  } else {
    fieldsArr[0] = fields[0] || [];
    fieldsArr[1] = fields[1] || [];
  }

  return fieldsArr;
};
/**
 *
 *
 * @param {*} fields
 * @param {*} datamodel
 *
 */


var convertToVar = function convertToVar(datamodel, fields) {
  var vars = [];
  fields && fields.forEach(function (field) {
    if (field instanceof _variable__WEBPACK_IMPORTED_MODULE_0__["ComposedVars"]) {
      vars.push(field);
      field.data(datamodel);
    } else {
      vars.push(new _variable__WEBPACK_IMPORTED_MODULE_0__["SimpleVariable"](field).data(datamodel));
    }
  });
  return vars;
};
/**
 *
 *
 * @param {*} rows
 * @param {*} columns
 * @param {*} datamodel
 *
 */


var transformFields = function transformFields(datamodel, config) {
  var _map = [_enums_constants__WEBPACK_IMPORTED_MODULE_1__["ROWS"], _enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLUMNS"]].map(function (fields) {
    var normalizedFields = normalizeFields(config, fields);
    var norFields = [convertToVar(datamodel, normalizedFields[0])];

    if (normalizedFields[1]) {
      norFields[1] = convertToVar(datamodel, normalizedFields[1]);
    }

    return orderFields(norFields, fields);
  }),
      _map2 = _slicedToArray(_map, 2),
      rowsInfo = _map2[0],
      columnsInfo = _map2[1];

  var rows = rowsInfo.fields,
      rowDimensions = rowsInfo.dimensions,
      rowMeasures = rowsInfo.measures,
      rowTemporalFields = rowsInfo.temporal,
      rowCategoricalFields = rowsInfo.categorical;
  var columns = columnsInfo.fields,
      columnDimensions = columnsInfo.dimensions,
      columnMeasures = columnsInfo.measures,
      columnTemporalFields = columnsInfo.temporal,
      columnCategoricalFields = columnsInfo.categorical;
  return {
    rows: rows,
    rowDimensions: rowDimensions,
    rowMeasures: rowMeasures,
    rowTemporalFields: rowTemporalFields,
    rowCategoricalFields: rowCategoricalFields,
    columns: columns,
    columnTemporalFields: columnTemporalFields,
    columnCategoricalFields: columnCategoricalFields,
    columnDimensions: columnDimensions,
    columnMeasures: columnMeasures
  };
};

/***/ }),

/***/ "./packages/visual-group/src/encoders/index.js":
/*!*****************************************************!*\
  !*** ./packages/visual-group/src/encoders/index.js ***!
  \*****************************************************/
/*! exports provided: RetinalEncoder, RetinalEncoderForCartesianPlane, RetinalEncoderForPolarPlane, PlanarEncoder, CartesianEncoder, PolarEncoder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _retinalEncoder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./retinalEncoder */ "./packages/visual-group/src/encoders/retinalEncoder/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RetinalEncoder", function() { return _retinalEncoder__WEBPACK_IMPORTED_MODULE_0__["RetinalEncoder"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RetinalEncoderForCartesianPlane", function() { return _retinalEncoder__WEBPACK_IMPORTED_MODULE_0__["RetinalEncoderForCartesianPlane"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RetinalEncoderForPolarPlane", function() { return _retinalEncoder__WEBPACK_IMPORTED_MODULE_0__["RetinalEncoderForPolarPlane"]; });

/* harmony import */ var _planarEncoder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./planarEncoder */ "./packages/visual-group/src/encoders/planarEncoder/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PlanarEncoder", function() { return _planarEncoder__WEBPACK_IMPORTED_MODULE_1__["PlanarEncoder"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CartesianEncoder", function() { return _planarEncoder__WEBPACK_IMPORTED_MODULE_1__["CartesianEncoder"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PolarEncoder", function() { return _planarEncoder__WEBPACK_IMPORTED_MODULE_1__["PolarEncoder"]; });

// export { default as VisualEncoder } from './visual-encoder';
// export { default as CartesianEncoder } from './cartesian-encoder';
// export { default as PolarEncoder } from './polar-encoder';
// export { default as RetinalEncoder } from './retinal-encoder';




/***/ }),

/***/ "./packages/visual-group/src/encoders/planarEncoder/cartesian-encoder.js":
/*!*******************************************************************************!*\
  !*** ./packages/visual-group/src/encoders/planarEncoder/cartesian-encoder.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CartesianEncoder; });
/* harmony import */ var _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/visual-layer */ "./packages/visual-layer/src/index.js");
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _planar_encoder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./planar-encoder */ "./packages/visual-group/src/encoders/planarEncoder/planar-encoder.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helper */ "./packages/visual-group/src/encoders/planarEncoder/helper.js");
/* harmony import */ var _group_helper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../group-helper */ "./packages/visual-group/src/group-helper/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-group/src/enums/constants.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }







/**
 *
 *
 * @export
 * @class CartesianEncoder
 * @extends {VisualEncoder}
 */

var CartesianEncoder =
/*#__PURE__*/
function (_PlanarEncoder) {
  _inherits(CartesianEncoder, _PlanarEncoder);

  function CartesianEncoder() {
    _classCallCheck(this, CartesianEncoder);

    return _possibleConstructorReturn(this, _getPrototypeOf(CartesianEncoder).apply(this, arguments));
  }

  _createClass(CartesianEncoder, [{
    key: "createAxis",

    /**
     *
     *
     * @param {*} axesCreators
     * @param {*} fieldInfo
     *
     * @memberof CartesianEncoder
     */
    value: function createAxis(axesCreators, fieldInfo, context) {
      var _this = this;

      var geomCellAxes = {};
      var axes = axesCreators.axes;
      var projections = fieldInfo.projections,
          indices = fieldInfo.indices;
      var rowFields = projections.rowFields,
          columnFields = projections.columnFields;
      var rowIndex = indices.rowIndex,
          columnIndex = indices.columnIndex;
      var axisFields = [{
        fields: rowFields,
        index: rowIndex
      }, {
        fields: columnFields,
        index: columnIndex
      }];
      var xAxes = axes.x || [];
      var yAxes = axes.y || [];
      [rowFields, columnFields].forEach(function (fields, i) {
        var type = i === 0 ? _enums_constants__WEBPACK_IMPORTED_MODULE_5__["ROW"] : _enums_constants__WEBPACK_IMPORTED_MODULE_5__["COLUMN"];
        var axis = i === 0 ? _enums_constants__WEBPACK_IMPORTED_MODULE_5__["Y"] : _enums_constants__WEBPACK_IMPORTED_MODULE_5__["X"];

        if (fields.length > 1) {
          axesCreators.position = _enums_constants__WEBPACK_IMPORTED_MODULE_5__["BOTH"];
        } else {
          axesCreators.position = _this.axisFrom()[type];
        }

        geomCellAxes[axis] = Object(_helper__WEBPACK_IMPORTED_MODULE_3__["generateAxisFromMap"])(axis, axisFields[i], axesCreators, {
          groupAxes: axis === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["X"] ? xAxes : yAxes,
          valueParser: context.resolver.valueParser()
        });
      });
      return geomCellAxes;
    }
  }, {
    key: "updateDomains",
    value: function updateDomains(store, axes) {
      var xAxes = axes.x;
      var yAxes = axes.y;
      store.model.lock();

      for (var i = 0; i < xAxes.length; i++) {
        for (var j = 0; j < xAxes[i].length; j++) {
          store.commit("".concat(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].GROUP_GLOBAL_NAMESPACE, ".domain.x.", 0).concat(i, "0"), xAxes[i][j].domain());
        }
      }

      for (var _i = 0; _i < yAxes.length; _i++) {
        for (var _j = 0; _j < yAxes[_i].length; _j++) {
          store.commit("".concat(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].GROUP_GLOBAL_NAMESPACE, ".domain.y.").concat(_i, 0, "0"), yAxes[_i][_j].domain());
          yAxes[_i][_j]._domainLock = false;
        }
      }

      store.model.unlock();
    }
  }, {
    key: "unionUnitDomains",
    value: function unionUnitDomains(context) {
      var store = context.store();
      var unitDomains = store.get("".concat(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].UNIT_GLOBAL_NAMESPACE, ".domain"));
      var resolver = context.resolver();
      var units = resolver.units();
      var domains = {
        0: {},
        1: {}
      };

      var _loop = function _loop(rIdx, len) {
        var unitsArr = units[rIdx];

        var _loop2 = function _loop2(cIdx, len2) {
          var unit = unitsArr[cIdx];
          var axisFields = unit.fields();
          [axisFields.x, axisFields.y].forEach(function (fieldArr, axisType) {
            fieldArr.forEach(function (field, axisIndex) {
              var key = !axisType ? "0".concat(cIdx).concat(axisIndex) : "".concat(rIdx, "0").concat(axisIndex);
              var dom = unitDomains["".concat(rIdx).concat(cIdx)];

              if (dom && Object.keys(dom).length !== 0) {
                domains[axisType][key] = Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["unionDomain"])([domains[axisType] && domains[axisType][key] || [], dom["".concat(field)]], field.subtype());
              }
            });
          });
        };

        for (var cIdx = 0, len2 = unitsArr.length; cIdx < len2; cIdx++) {
          _loop2(cIdx, len2);
        }
      };

      for (var rIdx = 0, len = units.length; rIdx < len; rIdx++) {
        _loop(rIdx, len);
      }

      var _resolver$axes = resolver.axes(),
          xAxes = _resolver$axes.x,
          yAxes = _resolver$axes.y;

      store.model.lock();
      [xAxes, yAxes].forEach(function (axesArr, axisType) {
        axesArr.forEach(function (axes, idx) {
          var min = [];
          var max = [];
          var domain = [];
          var adjustedDomain = [];

          if (axes.length > 1 && axes[0].constructor.type() === 'linear' && axes[0].config().alignZeroLine) {
            axes.forEach(function (axis, i) {
              var key = !axisType ? "0".concat(idx).concat(i) : "".concat(idx, "0").concat(i);
              domain = domains[axisType][key];
              min[i] = domain[0];
              max[i] = domain[1];
            });
            adjustedDomain = Object(_helper__WEBPACK_IMPORTED_MODULE_3__["getAdjustedDomain"])(max, min);
          }

          axes.forEach(function (axis, index) {
            var key = !axisType ? "0".concat(idx).concat(index) : "".concat(idx, "0").concat(index);
            domain = adjustedDomain[index] || domains[axisType][key];
            axis.domain(domain);
            var type = !axisType ? 'x' : 'y';
            store.commit("".concat(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].GROUP_GLOBAL_NAMESPACE, ".domain.").concat(type, ".").concat(idx).concat(index), domain);
          });
        });
      });
      store.model.unlock();
    }
    /**
     *
     *
     * @param {*} fields
     *
     * @memberof CartesianEncoder
     */

  }, {
    key: "getFacetsAndProjections",
    value: function getFacetsAndProjections(fields, type) {
      var facets = [];
      var projections = [];
      var counter = 0;
      var primaryFacets = [];
      var secondaryFacets = [];
      var primaryFields = fields[0];
      var secondaryFields = fields[1];
      var primaryLen = primaryFields.length;
      var secondaryLen = secondaryFields.length;
      var axisFrom = this.axisFrom();

      for (var i = 0; i < primaryLen; i++) {
        var projArr = [primaryFields[i]];
        var primaryField = primaryFields[i];

        if (primaryField.type() === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["MEASURE"]) {
          var secondaryField = secondaryFields[counter];

          if (secondaryField && secondaryField.type() === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["MEASURE"]) {
            counter++;
            projArr = [primaryField, secondaryField];
          }

          projections.push(projArr);
        } else {
          facets.push(primaryField);
          primaryFacets.push(primaryField);
        }
      }

      if (secondaryLen > counter) {
        for (var _i2 = counter; _i2 < secondaryLen; _i2++) {
          var _secondaryField = secondaryFields[_i2];
          var _projArr = [_secondaryField];

          if (_secondaryField.type() === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["MEASURE"]) {
            projections.push(_projArr);
          } else {
            facets.push(_secondaryField);
            secondaryFacets.push(_secondaryField);
          }
        }
      }

      if ((primaryFacets.length || secondaryFacets.length) && !projections.length) {
        type = type === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["COL"] ? _enums_constants__WEBPACK_IMPORTED_MODULE_5__["COLUMN"] : type;

        if ((axisFrom[type] === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["LEFT"] || axisFrom[type] === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["TOP"]) && primaryFacets.length) {
          var axisFromIndex = primaryFacets.length - 1;
          var facet = primaryFacets[axisFromIndex];
          projections = [[facet]];
          var existIndex = Object(_helper__WEBPACK_IMPORTED_MODULE_3__["getIndex"])(secondaryFacets, facet);

          if (existIndex > -1) {
            projections = [[facet, facet]];
            secondaryFacets.splice(existIndex, 1);
          }

          primaryFacets.splice(axisFromIndex, 1);
        } else {
          var _axisFromIndex = 0;
          var _facet = secondaryFacets[_axisFromIndex];
          projections = [[_facet]];

          var _existIndex = Object(_helper__WEBPACK_IMPORTED_MODULE_3__["getIndex"])(primaryFacets, _facet);

          if (_existIndex > -1) {
            projections = [[_facet, _facet]];
            primaryFacets.splice(_existIndex, 1);
          }

          secondaryFacets.splice(_axisFromIndex, 1);
        }
      }

      facets = [].concat(primaryFacets, secondaryFacets);
      facets = facets.filter(function (el, index, self) {
        return index === self.findIndex(function (t) {
          return t.toString() === el.toString();
        });
      });
      return {
        facets: facets,
        projections: projections
      };
    }
    /**
     *
     *
     * @param {*} datamodel
     * @param {*} config
     *
     * @memberof CartesianEncoder
     */

  }, {
    key: "fieldSanitizer",
    value: function fieldSanitizer(datamodel, config) {
      return _get(_getPrototypeOf(CartesianEncoder.prototype), "fieldSanitizer", this).call(this, datamodel, config);
    }
    /**
     *
     *
     * @param {*} datamodel
     *
     * @memberof CartesianEncoder
     */

  }, {
    key: "getRetinalFieldsDomain",
    value: function getRetinalFieldsDomain(dataModels, encoding) {
      var groupedModel = dataModels.groupedModel;
      var domains = {};

      for (var key in encoding) {
        if ({}.hasOwnProperty.call(encoding, key)) {
          var encodingObj = encoding[key];
          var field = encodingObj.field;

          if (!encodingObj.domain && field) {
            var domain = Object(_group_helper__WEBPACK_IMPORTED_MODULE_4__["retriveDomainFromData"])(groupedModel, field);
            domains[field] = domain;
          }
        }
      }

      return domains;
    }
    /**
     *
     *
     * @param {*} layerArray
     * @memberof CartesianEncoder
     */

  }, {
    key: "serializeLayerConfig",
    value: function serializeLayerConfig(layerArray) {
      var serializedLayers = [];
      layerArray.length && layerArray.forEach(function (layer, i) {
        var def = _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_0__["layerFactory"].sanitizeLayerConfig(layer);
        def.order = i;
        serializedLayers.push(def);
      });
      return serializedLayers;
    }
    /**
     *
     *
     * @param {*} fields
     * @param {*} userLayerConfig
     *
     * @memberof CartesianEncoder
     */

  }, {
    key: "getLayerConfig",
    value: function getLayerConfig(fields, userLayerConfig) {
      var layerConfig = [];
      var columnFields = fields.columnFields,
          rowFields = fields.rowFields; // let currentLayerIndex = 0;

      columnFields.forEach(function (colField) {
        var colFieldName = colField.toString();
        rowFields.forEach(function (rowField) {
          var configs = [];
          var rowFieldName = rowField.toString();
          var encoding = {
            x: {
              field: colFieldName
            },
            y: {
              field: rowFieldName
            }
          };
          var rowFieldType = rowField.subtype();
          var colFieldType = colField.subtype();
          var mark = Object(_helper__WEBPACK_IMPORTED_MODULE_3__["getDefaultMark"])(colFieldType, rowFieldType);
          var defConfigs = [{
            mark: mark,
            def: {
              mark: mark,
              encoding: encoding
            }
          }];
          var layerConfigs = Object(_helper__WEBPACK_IMPORTED_MODULE_3__["getLayerConfFromFields"])(colField.getMembers(), rowField.getMembers(), userLayerConfig || []);

          if (layerConfigs.length) {
            configs = layerConfigs.map(function (layerConf) {
              var mergedLayerConf = Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["mergeRecursive"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["mergeRecursive"])({}, defConfigs[0].def), layerConf);
              var serializedLayerConfig = _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_0__["layerFactory"].getSerializedConf(mergedLayerConf.mark, mergedLayerConf);
              return {
                mark: mergedLayerConf.mark,
                order: mergedLayerConf.order,
                def: serializedLayerConfig
              };
            });
          } else {
            configs = defConfigs;
          }

          layerConfig.push.apply(layerConfig, _toConsumableArray(configs));
        });
      });
      this.layers(layerConfig);
      return layerConfig;
    }
  }], [{
    key: "type",

    /**
     *
     *
     *
     * @memberof CartesianEncoder
     */
    value: function type() {
      return _enums_constants__WEBPACK_IMPORTED_MODULE_5__["CARTESIAN"];
    }
  }]);

  return CartesianEncoder;
}(_planar_encoder__WEBPACK_IMPORTED_MODULE_2__["default"]);



/***/ }),

/***/ "./packages/visual-group/src/encoders/planarEncoder/helper.js":
/*!********************************************************************!*\
  !*** ./packages/visual-group/src/encoders/planarEncoder/helper.js ***!
  \********************************************************************/
/*! exports provided: getAdjustedDomain, generateAxisFromMap, mutateAxesFromMap, getDefaultMark, createRetinalAxis, getIndex, getLayerConfFromFields */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAdjustedDomain", function() { return getAdjustedDomain; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateAxisFromMap", function() { return generateAxisFromMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mutateAxesFromMap", function() { return mutateAxesFromMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDefaultMark", function() { return getDefaultMark; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createRetinalAxis", function() { return createRetinalAxis; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getIndex", function() { return getIndex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLayerConfFromFields", function() { return getLayerConfFromFields; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @chartshq/muze-axis */ "./packages/muze-axis/src/index.js");
/* harmony import */ var _enums_scale_maps__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../enums/scale-maps */ "./packages/visual-group/src/enums/scale-maps.js");
/* harmony import */ var _group_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../group-helper */ "./packages/visual-group/src/group-helper/index.js");
/* harmony import */ var _data_type_scale_map__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../data-type-scale-map */ "./packages/visual-group/src/data-type-scale-map.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-group/src/enums/constants.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }







/**
 *
 *
 * @param {*} axisInfo
 * @param {*} field
 * @param {*} axesCreators
 *
 */

var getAxisConfig = function getAxisConfig(axisInfo, field, axesCreators) {
  var axisOrientation;
  var index = axisInfo.index,
      axisIndex = axisInfo.axisIndex,
      axisType = axisInfo.axisType;
  var config = axesCreators.config,
      position = axesCreators.position;
  var userAxisConfig = config.axes ? config.axes[axisType] || {} : {};
  var LEFT = _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_1__["AxisOrientation"].LEFT,
      RIGHT = _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_1__["AxisOrientation"].RIGHT,
      TOP = _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_1__["AxisOrientation"].TOP,
      BOTTOM = _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_1__["AxisOrientation"].BOTTOM;
  var allOrientations = axisType === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["Y"] ? [LEFT, RIGHT] : [TOP, BOTTOM];

  if (position === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["BOTH"]) {
    axisOrientation = allOrientations[axisIndex];
  } else {
    axisOrientation = position;
  }

  var axisConfig = {
    id: "".concat(axisType, "-").concat(index, "-").concat(axisIndex),
    name: field.toString(),
    field: field.toString(),
    numberFormat: field.numberFormat(),
    orientation: axisOrientation,
    showAxisName: true,
    show: true,
    type: _data_type_scale_map__WEBPACK_IMPORTED_MODULE_4__["dataTypeScaleMap"][field.subtype()]
  };
  userAxisConfig.tickValues = field.format(userAxisConfig.tickValues);
  userAxisConfig.domain = field.format(userAxisConfig.domain);
  return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(axisConfig, userAxisConfig);
};
/**
 *
 *
 * @param {*} axisInfo
 * @param {*} field
 * @param {*} axesCreators
 *
 */


var createSimpleAxis = function createSimpleAxis(axisConfig, field, axesCreators) {
  var labelManager = axesCreators.labelManager;
  var Cls = _enums_scale_maps__WEBPACK_IMPORTED_MODULE_2__["scaleMaps"][_data_type_scale_map__WEBPACK_IMPORTED_MODULE_4__["dataTypeScaleMap"][field.subtype()]];
  var simpleAxis = new Cls(axisConfig, {
    labelManager: labelManager
  });
  return simpleAxis;
};

var getAdjustedDomain = function getAdjustedDomain(max, min) {
  var y1ratio = max[0] / (max[0] - min[0]);
  var y2ratio = max[1] / (max[1] - min[1]); // adjust min/max values for positive negative values zero line etc

  var allSameSign = false; // if all numbers are positive set floor to zero

  if (min[0] > 0 && min[1] > 0 && min[1] > 0 && max[1] > 0) {
    allSameSign = true;
    min[0] = 0;
    min[1] = 0;
  } // if all numbers are negative set ceiling to zero


  if (min[0] < 0 && min[1] < 0 && min[1] < 0 && max[1] < 0) {
    allSameSign = true;
    max[0] = 0;
    max[1] = 0;
  } // align zero line if necessary


  if (!allSameSign && y1ratio !== y2ratio) {
    if (y1ratio < y2ratio) {
      // adjust min[1]
      min[1] = min[0] / max[0] * max[1];
    } else {
      // adjust min[0]
      min[0] = min[1] / max[1] * max[0];
    }
  }

  return [[min[0], max[0]], [min[1], max[1]]];
};
/**
 *
 *
 * @param {*} axisType
 * @param {*} fieldInfo
 * @param {*} axesCreators
 * @param {*} groupAxes
 *
 */

var generateAxisFromMap = function generateAxisFromMap(axisType, fieldInfo, axesCreators, axesInfo) {
  var axisKey;
  var groupAxes = axesInfo.groupAxes,
      valueParser = axesInfo.valueParser;
  var currentAxes = [];
  var fields = fieldInfo.fields,
      index = fieldInfo.index;
  var cacheMaps = axesCreators.cacheMaps;
  var map = cacheMaps["".concat(axisType, "AxesMap")];
  var commonAxisKey = Object(_group_helper__WEBPACK_IMPORTED_MODULE_3__["getAxisKey"])(axisType, index);
  fields.forEach(function (field, axisIndex) {
    axisKey = Object(_group_helper__WEBPACK_IMPORTED_MODULE_3__["getAxisKey"])(axisType, index, axisIndex, _data_type_scale_map__WEBPACK_IMPORTED_MODULE_4__["dataTypeScaleMap"][field.subtype()]);
    var axisConfig = getAxisConfig({
      index: index,
      axisIndex: axisIndex,
      axisType: axisType
    }, field, axesCreators);
    var axis;

    if (!map.has(axisKey)) {
      axis = createSimpleAxis(axisConfig, field, axesCreators);
    } else {
      axis = map.get(axisKey);
      axis._rotationLock = false;
      axis.config(axisConfig);
      axisConfig.domain ? axis.domain(axisConfig.domain) : axis.resetDomain();
    }

    axis.valueParser(valueParser);
    currentAxes.push(axis);
    map.set(axisKey, axis);
  });

  if (currentAxes.length) {
    map.set(commonAxisKey, currentAxes);
    groupAxes.add(commonAxisKey);
  }

  return currentAxes;
};
/**
 *
 *
 * @memberof MatrixResolver
 */

var mutateAxesFromMap = function mutateAxesFromMap(cacheMaps, axes) {
  var xAxesMap = cacheMaps.xAxesMap,
      yAxesMap = cacheMaps.yAxesMap;
  var xAxisSet = axes.x,
      yAxisSet = axes.y;
  var xAxes = [];
  var yAxes = [];
  xAxisSet.forEach(function (axisId) {
    var xAxis = xAxesMap.get(axisId);
    xAxes.push(xAxis);
  });
  yAxisSet.forEach(function (axisId) {
    var yAxis = yAxesMap.get(axisId);
    yAxes.push(yAxis);
  });
  return {
    xAxes: xAxes,
    yAxes: yAxes
  };
};
/**
 * return a default mark based on predefined set of rules of type and subtype of the fields
 *
 * @param {string} colFieldType dimension/measure - temporal/ordinal/nominal
 * @param {string} rowFieldType dimension/measure - temporal/ordinal/nominal
 * @return {Object} return mark type
 */

var getDefaultMark = function getDefaultMark(colFieldType, rowFieldType) {
  var mark;

  if (colFieldType === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["CATEGORICAL"] || rowFieldType === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["CATEGORICAL"]) {
    mark = _enums_constants__WEBPACK_IMPORTED_MODULE_5__["BAR"];
  } else if (colFieldType === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["TEMPORAL"] || rowFieldType === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["TEMPORAL"]) {
    mark = _enums_constants__WEBPACK_IMPORTED_MODULE_5__["LINE"];
  } else {
    mark = _enums_constants__WEBPACK_IMPORTED_MODULE_5__["POINT"];
  }

  return mark;
};
/**
 *
 *
 * @param {*} axesCreators
 * @param {*} [fieldInfo=[]]
 *
 */

var createRetinalAxis = function createRetinalAxis(axesCreators) {
  var fieldProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var axisType = axesCreators.axisType,
      fieldsConfig = axesCreators.fieldsConfig;
  var field = fieldProps.field;
  var axis = [];
  var Cls = _enums_scale_maps__WEBPACK_IMPORTED_MODULE_2__["scaleMaps"][axisType];
  fieldProps.type = fieldProps.type ? fieldProps.type : Object(_group_helper__WEBPACK_IMPORTED_MODULE_3__["getAxisType"])(fieldsConfig, field || null);
  axis.push(new Cls(fieldProps));
  return axis;
};
/**
 *
 *
 * @param {*} arr
 * @param {*} val
 *
 */

var getIndex = function getIndex(arr, val) {
  var i = 0;
  var arrIndex = -1;

  while (arrIndex === -1 && i < arr.length) {
    if (arr[i].toString() === val.toString()) {
      arrIndex = i;
    }

    i++;
  }

  return arrIndex;
};
/**
 *
 *
 * @param {*} colFields
 * @param {*} rowFields
 * @param {*} userLayerConfig
 *
 * @memberof CartesianEncoder
 */

var getLayerConfFromFields = function getLayerConfFromFields(colFields, rowFields, userLayerConfig) {
  return userLayerConfig.filter(function (conf) {
    var _ref, _ref2, _ref3;

    var userConf = conf instanceof Array ? conf : [conf];

    var encodingArr = (_ref = []).concat.apply(_ref, _toConsumableArray(userConf.map(function (d) {
      return d.encoding;
    }).filter(function (d) {
      return d !== undefined;
    })));

    if (!encodingArr.length) {
      return true;
    }

    var xFields = (_ref2 = []).concat.apply(_ref2, _toConsumableArray(encodingArr.map(function (d) {
      return [d.x && d.x.field, d.x0 && d.x0.field];
    }))).filter(function (d) {
      return d !== undefined && d !== null;
    });

    var yFields = (_ref3 = []).concat.apply(_ref3, _toConsumableArray(encodingArr.map(function (d) {
      return [d.y && d.y.field, d.y0 && d.y0.field];
    }))).filter(function (d) {
      return d !== undefined && d !== null;
    });

    if (!xFields.length && !yFields.length) {
      return true;
    }

    var colFieldExist = xFields.length ? xFields.every(function (d) {
      return colFields.indexOf(d) !== -1;
    }) : false;
    var rowFieldExist = yFields.length ? yFields.every(function (d) {
      return rowFields.indexOf(d) !== -1;
    }) : false;

    if (xFields.length && yFields.length) {
      return colFieldExist && rowFieldExist;
    }

    return colFieldExist || rowFieldExist;
  });
};

/***/ }),

/***/ "./packages/visual-group/src/encoders/planarEncoder/index.js":
/*!*******************************************************************!*\
  !*** ./packages/visual-group/src/encoders/planarEncoder/index.js ***!
  \*******************************************************************/
/*! exports provided: PlanarEncoder, CartesianEncoder, PolarEncoder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _planar_encoder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./planar-encoder */ "./packages/visual-group/src/encoders/planarEncoder/planar-encoder.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PlanarEncoder", function() { return _planar_encoder__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _cartesian_encoder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cartesian-encoder */ "./packages/visual-group/src/encoders/planarEncoder/cartesian-encoder.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CartesianEncoder", function() { return _cartesian_encoder__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _polar_encoder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./polar-encoder */ "./packages/visual-group/src/encoders/planarEncoder/polar-encoder.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PolarEncoder", function() { return _polar_encoder__WEBPACK_IMPORTED_MODULE_2__["default"]; });





/***/ }),

/***/ "./packages/visual-group/src/encoders/planarEncoder/planar-encoder.js":
/*!****************************************************************************!*\
  !*** ./packages/visual-group/src/encoders/planarEncoder/planar-encoder.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return PlanarEncoder; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _field_sanitizer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../field-sanitizer */ "./packages/visual-group/src/encoders/field-sanitizer.js");
/* harmony import */ var _visual_encoder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../visual-encoder */ "./packages/visual-group/src/encoders/visual-encoder.js");
/* harmony import */ var _group_helper_group_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../group-helper/group-utils */ "./packages/visual-group/src/group-helper/group-utils.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-group/src/enums/constants.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }






/**
 *
 *
 * @export
 * @class PlanarEncoder
 */

var PlanarEncoder =
/*#__PURE__*/
function (_VisualEncoder) {
  _inherits(PlanarEncoder, _VisualEncoder);

  function PlanarEncoder() {
    _classCallCheck(this, PlanarEncoder);

    return _possibleConstructorReturn(this, _getPrototypeOf(PlanarEncoder).apply(this, arguments));
  }

  _createClass(PlanarEncoder, [{
    key: "serializeLayerConfig",
    value: function serializeLayerConfig() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }, {
    key: "sanitizeFields",
    value: function sanitizeFields(datamodel, config) {
      this.fieldInfo(Object(_field_sanitizer__WEBPACK_IMPORTED_MODULE_1__["transformFields"])(datamodel, config));
      return this.fieldInfo();
    }
  }, {
    key: "getRetinalFieldsDomain",
    value: function getRetinalFieldsDomain() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }, {
    key: "getFacetsAndProjections",
    value: function getFacetsAndProjections() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }, {
    key: "fieldInfo",
    value: function fieldInfo() {
      if (arguments.length) {
        this._fieldInfo = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(this._fieldInfo || {}, arguments.length <= 0 ? undefined : arguments[0]);
        return this;
      }

      return this._fieldInfo;
    }
    /**
     *
     *
     * @param {*} datamodel
     * @param {*} config
     *
     * @memberof VisualEncoder
     */

  }, {
    key: "fieldSanitizer",
    value: function fieldSanitizer(datamodel, config) {
      this.fieldInfo(Object(_field_sanitizer__WEBPACK_IMPORTED_MODULE_1__["transformFields"])(datamodel, config));
      return this.fieldInfo();
    }
    /**
     *
     *
     * @param {*} params
     *
     * @memberof VisualEncoder
     */

  }, {
    key: "axisFrom",
    value: function axisFrom() {
      if (arguments.length) {
        this._axisFrom = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._axisFrom;
    }
    /**
     *
     *
     * @param {*} params
     *
     * @memberof VisualEncoder
     */

  }, {
    key: "headerFrom",
    value: function headerFrom() {
      if (arguments.length) {
        this._headerFrom = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this.__headerFrom;
    }
    /**
     *
     *
     * @param {*} axisFrom
     *
     * @memberof CartesianEncoder
     */

  }, {
    key: "setAxisAndHeaders",
    value: function setAxisAndHeaders() {
      var axisFrom = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var fields = arguments.length > 1 ? arguments[1] : undefined;

      var _getHeaderAxisFrom = Object(_group_helper_group_utils__WEBPACK_IMPORTED_MODULE_3__["getHeaderAxisFrom"])(_enums_constants__WEBPACK_IMPORTED_MODULE_4__["ROW"], fields.rows, axisFrom),
          _getHeaderAxisFrom2 = _slicedToArray(_getHeaderAxisFrom, 2),
          rowHeader = _getHeaderAxisFrom2[0],
          rowAxis = _getHeaderAxisFrom2[1];

      var _getHeaderAxisFrom3 = Object(_group_helper_group_utils__WEBPACK_IMPORTED_MODULE_3__["getHeaderAxisFrom"])(_enums_constants__WEBPACK_IMPORTED_MODULE_4__["COLUMN"], fields.columns, axisFrom),
          _getHeaderAxisFrom4 = _slicedToArray(_getHeaderAxisFrom3, 2),
          colHeader = _getHeaderAxisFrom4[0],
          colAxis = _getHeaderAxisFrom4[1];

      this.axisFrom({
        row: rowAxis,
        column: colAxis
      });
      this.headerFrom({
        row: rowHeader,
        column: colHeader
      });
      return this;
    }
  }]);

  return PlanarEncoder;
}(_visual_encoder__WEBPACK_IMPORTED_MODULE_2__["default"]);



/***/ }),

/***/ "./packages/visual-group/src/encoders/planarEncoder/polar-encoder.js":
/*!***************************************************************************!*\
  !*** ./packages/visual-group/src/encoders/planarEncoder/polar-encoder.js ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return PolarEncoder; });
/* harmony import */ var _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/visual-layer */ "./packages/visual-layer/src/index.js");
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _planar_encoder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./planar-encoder */ "./packages/visual-group/src/encoders/planarEncoder/planar-encoder.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-group/src/enums/constants.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




 // import VisualEncoder from './visual-encoder';
// import { RADIUS, ANGLE, SIZE, MEASURE, ARC, POLAR, COLOR } from '../enums/constants';

/**
 *
 *
 * @export
 * @class PolarEncoder
 * @extends {VisualEncoder}
 */

var PolarEncoder =
/*#__PURE__*/
function (_PlanarEncoder) {
  _inherits(PolarEncoder, _PlanarEncoder);

  function PolarEncoder() {
    _classCallCheck(this, PolarEncoder);

    return _possibleConstructorReturn(this, _getPrototypeOf(PolarEncoder).apply(this, arguments));
  }

  _createClass(PolarEncoder, [{
    key: "createAxis",

    /**
     *
     *
     * @param {*} axesCreators
     * @param {*} fieldInfo
     *
     * @memberof PolarEncoder
     */
    value: function createAxis(axesCreators, fieldInfo) {
      var axes = axesCreators.axes;
      var geomCellAxes = axes;
      var indices = fieldInfo.indices;
      var rowIndex = indices.rowIndex,
          columnIndex = indices.columnIndex; // Dummy axes for polar, to create blank cells

      var pieAxes = geomCellAxes.pie || [];
      pieAxes[rowIndex] = pieAxes[rowIndex] || [];
      pieAxes[rowIndex][columnIndex] = [];
      geomCellAxes.pie = pieAxes;
      geomCellAxes.x = null;
      geomCellAxes.y = null;
      return geomCellAxes;
    }
    /**
     *
     *
     * @param {*} fields
     *
     * @memberof CartesianEncoder
     */

  }, {
    key: "getFacetsAndProjections",
    value: function getFacetsAndProjections(fields) {
      var counter = 0;
      var facets = [];
      var projections = [];
      var primaryFields = fields[0];
      var secondaryFields = fields[1];
      var primaryLen = primaryFields.length;
      var secondaryLen = secondaryFields.length;

      for (var i = 0; i < primaryLen; i++) {
        var primaryField = primaryFields[i];

        if (primaryField.type() === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["MEASURE"]) {
          var secondaryField = secondaryFields[counter++];
          var projArr = secondaryField ? [primaryField, secondaryField] : [primaryField];
          projections.push(projArr);
        } else {
          facets.push(primaryField);
        }
      }

      if (secondaryLen > counter) {
        for (var _i = counter; _i < secondaryLen; _i++) {
          var _secondaryField = secondaryFields[_i];
          var _projArr = [_secondaryField];

          if (_secondaryField.type() === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["MEASURE"]) {
            projections.push(_projArr);
          } else {
            facets.push(_secondaryField);
          }
        }
      }

      return {
        facets: facets,
        projections: projections
      };
    }
  }, {
    key: "unionUnitDomains",
    value: function unionUnitDomains(context) {
      var store = context.store();
      var domains = store.get("".concat(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].UNIT_GLOBAL_NAMESPACE, ".domain"));
      var domainProps = {
        radius: [Infinity, -Infinity]
      };
      Object.values(domains).forEach(function (domainVal) {
        for (var key in domainVal) {
          domainProps[key] = [Math.min(domainVal[key][0], domainProps[key][0]), Math.min(domainVal[key][1], domainProps[key][1])];
        }
      });
      store.commit("".concat(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].GROUP_GLOBAL_NAMESPACE, ".domain.radius"), domainProps.radius);
    }
    /**
     *
     *
     *
     * @memberof PolarEncoder
     */

  }, {
    key: "setCommonDomain",
    value: function setCommonDomain() {
      // No domain to be set
      return this;
    }
  }, {
    key: "layers",
    value: function layers() {
      if (arguments.length) {
        this._layers = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._layers;
    }
    /**
     *
     *
     * @param {*} datamodel
     * @param {*} config
     * @memberof PolarEncoder
     */

  }, {
    key: "sanitizeFields",
    value: function sanitizeFields(datamodel, config) {
      var sanitizedRows = [[], []];
      var sanitizedColumns = [[], []];

      var fields = _get(_getPrototypeOf(PolarEncoder.prototype), "sanitizeFields", this).call(this, datamodel, config);

      var layers = config.layers;
      var rows = fields.rows,
          columns = fields.columns;
      var layer = layers[0];
      var encoding = layer.encoding;
      var radius = encoding && encoding.radius ? encoding.radius.field : null;
      var angle = encoding && encoding.angle ? encoding.angle.field : null;
      var sanitizedFields = [sanitizedRows, sanitizedColumns];
      [rows, columns].forEach(function (fieldType, typeIndex) {
        fieldType.forEach(function (fieldSet, i) {
          return fieldSet.forEach(function (field) {
            if (field.toString() !== radius && field.toString() !== angle && field.type() !== _enums_constants__WEBPACK_IMPORTED_MODULE_3__["MEASURE"]) {
              sanitizedFields[typeIndex][i].push(field);
            }
          });
        });
      });
      sanitizedColumns = _toConsumableArray(new Set(sanitizedColumns));
      sanitizedRows = _toConsumableArray(new Set(sanitizedRows));
      this.fieldInfo({
        rows: sanitizedRows,
        columns: sanitizedColumns
      });
      return this.fieldInfo();
    }
  }, {
    key: "getRetinalFieldsDomain",
    value: function getRetinalFieldsDomain(dataModels, encoding, facetFields, groupBy) {
      var sizeField;
      var colorField;
      var fields = [];
      var layers = this.layers();
      var dataModel = dataModels.groupedModel;
      var fieldsConfig = dataModel.getFieldsConfig();
      var domains = {};

      if (layers && layers[0]) {
        var layer = layers[0];
        var layerEncoding = layer.def.encoding || {};
        [_enums_constants__WEBPACK_IMPORTED_MODULE_3__["RADIUS"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ANGLE"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["SIZE"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["COLOR"]].forEach(function (encType) {
          var field = layerEncoding[encType] ? layerEncoding[encType].field : '';
          var measureField = fieldsConfig[field] && fieldsConfig[field].def.type === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["MEASURE"];

          if (encType === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["SIZE"] && measureField) {
            sizeField = field;
          }

          if (encType === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["COLOR"]) {
            colorField = field;
          }

          fieldsConfig[field] && !measureField && fields.push(field);
        });
      }

      if (sizeField) {
        domains[sizeField] = dataModel.groupBy(facetFields, _defineProperty({}, sizeField, 'sum')).getFieldspace().fieldsObj()[sizeField].domain();
      }

      if (colorField) {
        var dm = dataModel.groupBy([].concat(_toConsumableArray(facetFields), fields), groupBy.measures);
        domains[colorField] = dm.getFieldspace().fieldsObj()[colorField].domain();
      }

      return domains;
    }
    /**
     *
     *
     * @param {*} fields
     * @param {*} userLayerConfig
     *
     * @memberof PolarEncoder
     */

  }, {
    key: "getLayerConfig",
    value: function getLayerConfig(fields, userLayerConfig) {
      var layerConfig = [];
      var columnFields = fields.columnFields,
          rowFields = fields.rowFields;
      var allFields = [].concat(_toConsumableArray(columnFields), _toConsumableArray(rowFields));
      allFields.forEach(function () {
        var encoding = {};
        var config = {
          mark: _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ARC"],
          def: {
            encoding: encoding
          }
        };

        if (userLayerConfig && userLayerConfig.length > 0) {
          config = Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["mergeRecursive"])(config, userLayerConfig[0]);
        }

        layerConfig.push(config);
      });

      if (layerConfig.length === 0) {
        layerConfig = userLayerConfig;
      }

      this.layers(layerConfig);
      return layerConfig;
    }
    /**
     *
     *
     * @param {*} layerArray
     *
     * @memberof PolarEncoder
     */

  }, {
    key: "serializeLayerConfig",
    value: function serializeLayerConfig(layerArray) {
      var serializedLayers = [];
      layerArray.length && layerArray.forEach(function (layer) {
        var def = _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_0__["layerFactory"].getSerializedConf(layer.mark, layer);
        serializedLayers.push({
          mark: layer.mark,
          def: def
        });
      });
      return serializedLayers;
    }
  }], [{
    key: "type",

    /**
     *
     *
     * @return
     * @memberof PolarEncoder
     */
    value: function type() {
      return _enums_constants__WEBPACK_IMPORTED_MODULE_3__["POLAR"];
    }
  }]);

  return PolarEncoder;
}(_planar_encoder__WEBPACK_IMPORTED_MODULE_2__["default"]);



/***/ }),

/***/ "./packages/visual-group/src/encoders/retinalEncoder/cartesian-plane-encoder.js":
/*!**************************************************************************************!*\
  !*** ./packages/visual-group/src/encoders/retinalEncoder/cartesian-plane-encoder.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return RetinalEncoderForCartesianPlane; });
/* harmony import */ var _retinal_encoder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./retinal-encoder */ "./packages/visual-group/src/encoders/retinalEncoder/retinal-encoder.js");
/* harmony import */ var _group_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../group-helper */ "./packages/visual-group/src/group-helper/index.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var RetinalEncoderForCartesianPlane =
/*#__PURE__*/
function (_RetinalEncoder) {
  _inherits(RetinalEncoderForCartesianPlane, _RetinalEncoder);

  function RetinalEncoderForCartesianPlane() {
    _classCallCheck(this, RetinalEncoderForCartesianPlane);

    return _possibleConstructorReturn(this, _getPrototypeOf(RetinalEncoderForCartesianPlane).apply(this, arguments));
  }

  _createClass(RetinalEncoderForCartesianPlane, [{
    key: "getFieldsDomain",

    /**
     *
     *
     * @param {*} datamodel
     * @return
     * @memberof CartesianEncoder
     */
    value: function getFieldsDomain(dataModels, encoding) {
      var groupedModel = dataModels.groupedModel;
      var domains = {};

      for (var key in encoding) {
        if ({}.hasOwnProperty.call(encoding, key)) {
          var encodingObj = encoding[key];
          var field = encodingObj.field;

          if (!encodingObj.domain && field) {
            var domain = Object(_group_helper__WEBPACK_IMPORTED_MODULE_1__["retriveDomainFromData"])(groupedModel, field);
            domains[field] = domain;
          }
        }
      }

      return domains;
    }
  }]);

  return RetinalEncoderForCartesianPlane;
}(_retinal_encoder__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/visual-group/src/encoders/retinalEncoder/helper.js":
/*!*********************************************************************!*\
  !*** ./packages/visual-group/src/encoders/retinalEncoder/helper.js ***!
  \*********************************************************************/
/*! exports provided: createRetinalAxis */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createRetinalAxis", function() { return createRetinalAxis; });
/* harmony import */ var _enums_scale_maps__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../enums/scale-maps */ "./packages/visual-group/src/enums/scale-maps.js");
/* harmony import */ var _group_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../group-helper */ "./packages/visual-group/src/group-helper/index.js");


/**
 *
 *
 * @param {*} axesCreators
 * @param {*} [fieldInfo=[]]
 * @return
 */

var createRetinalAxis = function createRetinalAxis(axesCreators) {
  var fieldProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var axisType = axesCreators.axisType,
      fieldsConfig = axesCreators.fieldsConfig;
  var field = fieldProps.field;
  var axis = [];
  var Cls = _enums_scale_maps__WEBPACK_IMPORTED_MODULE_0__["scaleMaps"][axisType];
  fieldProps.type = fieldProps.type ? fieldProps.type : Object(_group_helper__WEBPACK_IMPORTED_MODULE_1__["getAxisType"])(fieldsConfig, field || null);
  axis.push(new Cls(fieldProps));
  return axis;
};

/***/ }),

/***/ "./packages/visual-group/src/encoders/retinalEncoder/index.js":
/*!********************************************************************!*\
  !*** ./packages/visual-group/src/encoders/retinalEncoder/index.js ***!
  \********************************************************************/
/*! exports provided: RetinalEncoder, RetinalEncoderForCartesianPlane, RetinalEncoderForPolarPlane */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _retinal_encoder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./retinal-encoder */ "./packages/visual-group/src/encoders/retinalEncoder/retinal-encoder.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RetinalEncoder", function() { return _retinal_encoder__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _cartesian_plane_encoder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cartesian-plane-encoder */ "./packages/visual-group/src/encoders/retinalEncoder/cartesian-plane-encoder.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RetinalEncoderForCartesianPlane", function() { return _cartesian_plane_encoder__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _polar_plane_encoder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./polar-plane-encoder */ "./packages/visual-group/src/encoders/retinalEncoder/polar-plane-encoder.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RetinalEncoderForPolarPlane", function() { return _polar_plane_encoder__WEBPACK_IMPORTED_MODULE_2__["default"]; });





/***/ }),

/***/ "./packages/visual-group/src/encoders/retinalEncoder/polar-plane-encoder.js":
/*!**********************************************************************************!*\
  !*** ./packages/visual-group/src/encoders/retinalEncoder/polar-plane-encoder.js ***!
  \**********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return RetinalEncoderForPolarPlane; });
/* harmony import */ var _retinal_encoder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./retinal-encoder */ "./packages/visual-group/src/encoders/retinalEncoder/retinal-encoder.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-group/src/enums/constants.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var RetinalEncoderForPolarPlane =
/*#__PURE__*/
function (_RetinalEncoder) {
  _inherits(RetinalEncoderForPolarPlane, _RetinalEncoder);

  function RetinalEncoderForPolarPlane() {
    _classCallCheck(this, RetinalEncoderForPolarPlane);

    return _possibleConstructorReturn(this, _getPrototypeOf(RetinalEncoderForPolarPlane).apply(this, arguments));
  }

  _createClass(RetinalEncoderForPolarPlane, [{
    key: "getFieldsDomain",
    value: function getFieldsDomain(dataModels, encoding, facetFields, groupBy) {
      var sizeField;
      var colorField;
      var fields = [];
      var layers = this.layers();
      var dataModel = dataModels.parentModel;
      var fieldsConfig = dataModel.getFieldsConfig();
      var domains = {};

      if (layers && layers[0]) {
        var layer = layers[0];
        var layerEncoding = layer.def.encoding || {};
        [_enums_constants__WEBPACK_IMPORTED_MODULE_1__["RADIUS"], _enums_constants__WEBPACK_IMPORTED_MODULE_1__["ANGLE"], _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SIZE"], _enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLOR"]].forEach(function (encType) {
          var field = layerEncoding[encType] ? layerEncoding[encType].field : '';
          var measureField = fieldsConfig[field] && fieldsConfig[field].def.type === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["MEASURE"];

          if (encType === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SIZE"] && measureField) {
            sizeField = field;
          }

          if (encType === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLOR"]) {
            colorField = field;
          }

          fieldsConfig[field] && !measureField && fields.push(field);
        });
      }

      if (sizeField) {
        domains[sizeField] = dataModel.groupBy(facetFields, _defineProperty({}, sizeField, 'sum')).getFieldspace().fieldsObj()[sizeField].domain();
      }

      if (colorField) {
        var dm = dataModel.groupBy([].concat(_toConsumableArray(facetFields), fields), groupBy.measures);
        domains[colorField] = dm.getFieldspace().fieldsObj()[colorField].domain();
      }

      return domains;
    }
  }]);

  return RetinalEncoderForPolarPlane;
}(_retinal_encoder__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./packages/visual-group/src/encoders/retinalEncoder/retinal-encoder.js":
/*!******************************************************************************!*\
  !*** ./packages/visual-group/src/encoders/retinalEncoder/retinal-encoder.js ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return RetinalEncoder; });
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helper */ "./packages/visual-group/src/encoders/retinalEncoder/helper.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-group/src/enums/constants.js");
/* harmony import */ var _visual_encoder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../visual-encoder */ "./packages/visual-group/src/encoders/visual-encoder.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




/**
 *
 *
 * @export
 * @class RetinalEncoder
 * @extends {VisualEncoder}
 */

var RetinalEncoder =
/*#__PURE__*/
function (_VisualEncoder) {
  _inherits(RetinalEncoder, _VisualEncoder);

  function RetinalEncoder() {
    _classCallCheck(this, RetinalEncoder);

    return _possibleConstructorReturn(this, _getPrototypeOf(RetinalEncoder).apply(this, arguments));
  }

  _createClass(RetinalEncoder, [{
    key: "createAxis",

    /**
     *
     *
     * @param {*} axesCreators
     *
     * @memberof RetinalEncoder
     */
    value: function createAxis(axesCreators) {
      var fieldsConfig = axesCreators.fieldsConfig,
          config = axesCreators.config;
      var newAxes = {};
      [_enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLOR"], _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SHAPE"], _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SIZE"]].forEach(function (axisType) {
        newAxes["".concat(axisType)] = Object(_helper__WEBPACK_IMPORTED_MODULE_0__["createRetinalAxis"])({
          axisType: axisType,
          fieldsConfig: fieldsConfig
        }, config[axisType]);
      });
      return newAxes;
    }
    /**
     *
     *
     * @static
     *
     * @memberof RetinalEncoder
     */

  }, {
    key: "getLayerConfig",

    /**
     *
     *
     * @param {*} fields
     * @param {*} userLayerConfig
     *
     * @memberof RetinalEncoder
     */
    value: function getLayerConfig(fields, userLayerConfig) {
      var layerConfig = [];
      userLayerConfig.forEach(function (e) {
        var config = e;
        [_enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLOR"], _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SHAPE"], _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SIZE"]].forEach(function (axis) {
          if (fields[axis] && fields[axis].field) {
            var def = config.def;

            if (config.def instanceof Array) {
              def.forEach(function (conf) {
                conf.encoding = conf.encoding || {};
                !conf.encoding[axis] && (conf.encoding[axis] = {});
                conf.encoding[axis].field = fields[axis].field;
              });
            } else {
              def.encoding = def.encoding || {};
              !def.encoding[axis] && (def.encoding[axis] = {});
              def.encoding[axis].field = fields[axis].field;
            }
          }
        });
        layerConfig.push(config);
      });
      this.layers(layerConfig);
      return layerConfig;
    }
    /**
     *
     *
     * @param {*} context
     *
     * @memberof RetinalEncoder
     */

  }, {
    key: "setCommonDomain",
    value: function setCommonDomain(context) {
      var domains = context.domains,
          axes = context.axes,
          encoding = context.encoding;
      Object.entries(encoding).forEach(function (enc) {
        if (enc[1] && enc[1].field) {
          var encType = enc[0];
          var field = enc[1].field;

          if (field) {
            axes[encType].forEach(function (axis) {
              var domain = domains[field];
              !enc[1].domain && axis.updateDomain(domain);
            });
          }
        }
      });
      return this;
    }
  }], [{
    key: "type",
    value: function type() {
      return 'retinal';
    }
  }]);

  return RetinalEncoder;
}(_visual_encoder__WEBPACK_IMPORTED_MODULE_2__["default"]);



/***/ }),

/***/ "./packages/visual-group/src/encoders/visual-encoder.js":
/*!**************************************************************!*\
  !*** ./packages/visual-group/src/encoders/visual-encoder.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return VisualEncoder; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }


/**
 *
 *
 * @export
 * @class VisualEncoder
 */

var VisualEncoder =
/*#__PURE__*/
function () {
  function VisualEncoder() {
    _classCallCheck(this, VisualEncoder);
  }

  _createClass(VisualEncoder, [{
    key: "createAxis",

    /**
     *
     *
     * @memberof VisualEncoder
     */
    value: function createAxis() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     *
     *
     * @memberof VisualEncoder
     */

  }, {
    key: "getLayerConfig",
    value: function getLayerConfig() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }, {
    key: "layers",
    value: function layers() {
      if (arguments.length) {
        this._layers = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._layers;
    }
  }]);

  return VisualEncoder;
}();



/***/ }),

/***/ "./packages/visual-group/src/enums/constants.js":
/*!******************************************************!*\
  !*** ./packages/visual-group/src/enums/constants.js ***!
  \******************************************************/
/*! exports provided: X, Y, WIDTH, HEIGHT, MEASUREMENT, CONFIG, MIN_UNIT_WIDTH, MIN_UNIT_HEIGHT, DIMENSIONS, MEASURES, DIMENSION, MEASURE, PIVOT, FORMAT, MOUNT, HAS_DATA_UPDATED, ROWS, COLUMNS, COL, ROW, COLUMN, COLOR, SHAPE, SIZE, DETAIL, LAYERS, TRANSFORM, ORDINAL, LINEAR, LEFT, RIGHT, TOP, BOTTOM, RETINAL, CELL, X_AXES, Y_AXES, ENTRY_CELLS, INITIALIZED, EXIT_CELLS, AXIS, UNIT, UPDATED, BEFORE_UPDATE, VALUE_MATRIX, FACET_HEADERS, RADIUS, ANGLE, ARC, CARTESIAN, POLAR, CATEGORICAL, TEMPORAL, BAR, LINE, POINT, PRIMARY, SECONDARY, BOTH, INTERACTION, GRID_LINES, GRID_BANDS, HEADER, FACET */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "X", function() { return X; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Y", function() { return Y; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WIDTH", function() { return WIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HEIGHT", function() { return HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MEASUREMENT", function() { return MEASUREMENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CONFIG", function() { return CONFIG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MIN_UNIT_WIDTH", function() { return MIN_UNIT_WIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MIN_UNIT_HEIGHT", function() { return MIN_UNIT_HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DIMENSIONS", function() { return DIMENSIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MEASURES", function() { return MEASURES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DIMENSION", function() { return DIMENSION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MEASURE", function() { return MEASURE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PIVOT", function() { return PIVOT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FORMAT", function() { return FORMAT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MOUNT", function() { return MOUNT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HAS_DATA_UPDATED", function() { return HAS_DATA_UPDATED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROWS", function() { return ROWS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLUMNS", function() { return COLUMNS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COL", function() { return COL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROW", function() { return ROW; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLUMN", function() { return COLUMN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLOR", function() { return COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SHAPE", function() { return SHAPE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SIZE", function() { return SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DETAIL", function() { return DETAIL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAYERS", function() { return LAYERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TRANSFORM", function() { return TRANSFORM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ORDINAL", function() { return ORDINAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINEAR", function() { return LINEAR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LEFT", function() { return LEFT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RIGHT", function() { return RIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TOP", function() { return TOP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BOTTOM", function() { return BOTTOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RETINAL", function() { return RETINAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CELL", function() { return CELL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "X_AXES", function() { return X_AXES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Y_AXES", function() { return Y_AXES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ENTRY_CELLS", function() { return ENTRY_CELLS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "INITIALIZED", function() { return INITIALIZED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EXIT_CELLS", function() { return EXIT_CELLS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AXIS", function() { return AXIS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UNIT", function() { return UNIT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UPDATED", function() { return UPDATED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BEFORE_UPDATE", function() { return BEFORE_UPDATE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VALUE_MATRIX", function() { return VALUE_MATRIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FACET_HEADERS", function() { return FACET_HEADERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RADIUS", function() { return RADIUS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ANGLE", function() { return ANGLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ARC", function() { return ARC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CARTESIAN", function() { return CARTESIAN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POLAR", function() { return POLAR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CATEGORICAL", function() { return CATEGORICAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TEMPORAL", function() { return TEMPORAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BAR", function() { return BAR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINE", function() { return LINE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POINT", function() { return POINT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRIMARY", function() { return PRIMARY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SECONDARY", function() { return SECONDARY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BOTH", function() { return BOTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "INTERACTION", function() { return INTERACTION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GRID_LINES", function() { return GRID_LINES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GRID_BANDS", function() { return GRID_BANDS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HEADER", function() { return HEADER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FACET", function() { return FACET; });
/**
 * This file exports constants that are used as enums in the
 *  crosstab group implementation.
 */

/**
 * Width of the crosstab.
 */
var X = 'x';
/**
 * Width of the crosstab.
 */

var Y = 'y';
/**
 * Width of the crosstab.
 */

var WIDTH = 'width';
/**
 * Height of the crosstab.
 */

var HEIGHT = 'height';
/**
 * Field referring to object storing measurement configuration.
 */

var MEASUREMENT = 'measurement';
/**
 * Field referring to object storing configuration properties.
 */

var CONFIG = 'config';
/**
 * Width of visual unit in crosstab.
 */

var MIN_UNIT_WIDTH = 'minUnitWidth';
/**
 * Height of visual unit.
 */

var MIN_UNIT_HEIGHT = 'minUnitHeight';
/**
 * Field to store the array of dimensions to facet by.
 */

var DIMENSIONS = 'dimensions';
/**
 * Field to store array of measures to use as x axis.
 */

var MEASURES = 'measures';
/**
 * Field to store the array of dimensions to facet by.
 */

var DIMENSION = 'dimension';
/**
 * Field to store array of measures to use as x axis.
 */

var MEASURE = 'measure';
/**
 * Flag to specify if model should be pivoted.
 */

var PIVOT = 'pivot';
/**
 * Flag to specify format
 */

var FORMAT = 'format';
/**
 * Mount point where the variable will be hosted
 */

var MOUNT = 'mount';
/**
 * Data update flag
 */

var HAS_DATA_UPDATED = 'hasDataUpdated';
/**
 * Field referring to object storing set of rows
 */

var ROWS = 'rows';
/**
 * Field referring to object storing set of columns
 */

var COLUMNS = 'columns';
/**
 * Field referring to object storing set of columns
 */

var COL = 'col';
/**
 * Field referring to object storing set of rows
 */

var ROW = 'row';
/**
 * Field referring to object storing set of columns
 */

var COLUMN = 'column';
/**
 * Field referring to object storing color field
 */

var COLOR = 'color';
/**
 * Field referring to object storing shape field
 */

var SHAPE = 'shape';
/**
 * Field referring to object storing size field
 */

var SIZE = 'size';
/**
 * Field referring to object storing detail field
 */

var DETAIL = 'detail';
/**
 * Field referring to object storing set of layers
 */

var LAYERS = 'layers';
/**
 * Field referring to object storing the transforms
 */

var TRANSFORM = 'transform';
/**
 * Field referring to object storing the transforms
 */

var ORDINAL = 'ordinal';
/**
 * Field referring to object storing the transforms
 */

var LINEAR = 'linear';
/**
 * Field referring to object storing the transforms
 */

var LEFT = 'left';
/**
 * Field referring to object storing the transforms
 */

var RIGHT = 'right';
/**
 * Field referring to object storing the transforms
 */

var TOP = 'top';
/**
 * Field referring to object storing the transforms
 */

var BOTTOM = 'bottom';
/**
 * Field referring to object storing the transforms
 */

var RETINAL = 'retinal';
/**
 * Field referring to object storing the transforms
 */

var CELL = 'cell';
/**
 * Field referring to object storing the transforms
 */

var X_AXES = 'xAxes';
/**
 * Field referring to object storing the transforms
 */

var Y_AXES = 'yAxes';
/**
 * Field referring to object storing the transforms
 */

var ENTRY_CELLS = 'entryCell';
/**
 * Field referring to object storing the transforms
 */

var INITIALIZED = 'initialized';
/**
 * Field referring to object storing the transforms
 */

var EXIT_CELLS = 'exitCell';
/**
 * Field referring to object storing the transforms
 */

var AXIS = 'axis';
/**
 * Field referring to object storing the transforms
 */

var UNIT = 'unit';
/**
 * Field referring to object storing the transforms
 */

var UPDATED = 'updated';
/**
 * Field referring to object storing the transforms
 */

var BEFORE_UPDATE = 'beforeupdate';
/**
 * Field referring to object storing the transforms
 */

var VALUE_MATRIX = 'valueMatrix';
/**
 * Field referring to object storing the transforms
 */

var FACET_HEADERS = 'facet-headers';
/**
 * Field referring to object storing the transforms
 */

var RADIUS = 'radius';
/**
 * Field referring to object storing the transforms
 */

var ANGLE = 'angle';
/**
 * Field referring to object storing the transforms
 */

var ARC = 'arc';
/**
 * Field referring to object storing the transforms
 */

var CARTESIAN = 'cartesian';
/**
 * Field referring to object storing the transforms
 */

var POLAR = 'polar';
/**
 * Field referring to object storing the transforms
 */

var CATEGORICAL = 'categorical';
/**
 * Field referring to object storing the transforms
 */

var TEMPORAL = 'temporal';
/**
 * Field referring to object storing the transforms
 */

var BAR = 'bar';
/**
 * Field referring to object storing the transforms
 */

var LINE = 'line';
/**
 * Field referring to object storing the transforms
 */

var POINT = 'point';
/**
 * Field referring to object storing the transforms
 */

var PRIMARY = 'Primary';
/**
 * Field referring to object storing the transforms
 */

var SECONDARY = 'Secondary';
/**
 * Field referring to object storing the transforms
 */

var BOTH = 'both';
/**
 * Field referring to object storing the transforms
 */

var INTERACTION = 'interaction';
/**
 * Field referring to object storing the transforms
 */

var GRID_LINES = 'gridLines';
/**
 * Field referring to object storing the transforms
 */

var GRID_BANDS = 'gridBands';
/**
 * Field referring to object storing the transforms
 */

var HEADER = 'header';
/**
 * Field referring to object storing the transforms
 */

var FACET = 'facet';

/***/ }),

/***/ "./packages/visual-group/src/enums/defaults.js":
/*!*****************************************************!*\
  !*** ./packages/visual-group/src/enums/defaults.js ***!
  \*****************************************************/
/*! exports provided: DATA_UPDATE_COUNTER, DEFAULT_LAYER_TYPE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DATA_UPDATE_COUNTER", function() { return DATA_UPDATE_COUNTER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_LAYER_TYPE", function() { return DEFAULT_LAYER_TYPE; });
/**
 * This file exports variables that are used as defaults for the crosstab group.
 */
var DATA_UPDATE_COUNTER = 0;
var DEFAULT_LAYER_TYPE = 'cartesian';

/***/ }),

/***/ "./packages/visual-group/src/enums/encoder-maps.js":
/*!*********************************************************!*\
  !*** ./packages/visual-group/src/enums/encoder-maps.js ***!
  \*********************************************************/
/*! exports provided: planarEncoderMap, retinalEncoderMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "planarEncoderMap", function() { return planarEncoderMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "retinalEncoderMap", function() { return retinalEncoderMap; });
/* harmony import */ var _encoders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../encoders */ "./packages/visual-group/src/encoders/index.js");

var planarEncoderMap = {
  cartesian: _encoders__WEBPACK_IMPORTED_MODULE_0__["CartesianEncoder"],
  polar: _encoders__WEBPACK_IMPORTED_MODULE_0__["PolarEncoder"]
};
var retinalEncoderMap = {
  cartesian: _encoders__WEBPACK_IMPORTED_MODULE_0__["RetinalEncoderForCartesianPlane"],
  polar: _encoders__WEBPACK_IMPORTED_MODULE_0__["RetinalEncoderForPolarPlane"]
};

/***/ }),

/***/ "./packages/visual-group/src/enums/scale-maps.js":
/*!*******************************************************!*\
  !*** ./packages/visual-group/src/enums/scale-maps.js ***!
  \*******************************************************/
/*! exports provided: scaleMaps */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scaleMaps", function() { return scaleMaps; });
/* harmony import */ var _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/muze-axis */ "./packages/muze-axis/src/index.js");

var scaleMaps = {
  linear: _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__["NumericAxis"],
  band: _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__["BandAxis"],
  temporal: _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__["TimeAxis"],
  size: _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__["SizeAxis"],
  color: _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__["ColorAxis"],
  shape: _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__["ShapeAxis"]
};

/***/ }),

/***/ "./packages/visual-group/src/group-helper/cell-creator.js":
/*!****************************************************************!*\
  !*** ./packages/visual-group/src/group-helper/cell-creator.js ***!
  \****************************************************************/
/*! exports provided: createValueCells, generateMatrices, computeMatrices */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createValueCells", function() { return createValueCells; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateMatrices", function() { return generateMatrices; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeMatrices", function() { return computeMatrices; });
/* harmony import */ var _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/muze-axis */ "./packages/muze-axis/src/index.js");
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _matrix_model__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./matrix-model */ "./packages/visual-group/src/group-helper/matrix-model.js");
/* harmony import */ var _group_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./group-utils */ "./packages/visual-group/src/group-helper/group-utils.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../enums/constants */ "./packages/visual-group/src/enums/constants.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }






/**
 * Updates row and column cells with the geom cell corresponding to the facet keys
 *
 * @param {*} resolver
 * @param {*} facets
 */

var updateCells = function updateCells(resolver, facets, geomCell) {
  [_enums_constants__WEBPACK_IMPORTED_MODULE_4__["ROW"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["COL"]].forEach(function (field) {
    var cells = resolver["".concat(field, "Cells")]();
    var facetKey = facets["".concat(field, "Facets")][1].join();
    !cells[facetKey] && (cells[facetKey] = []);
    cells[facetKey].push(geomCell);
    resolver["".concat(field, "Cells")](cells);
  });
};
/**
 *
 *
 * @param {*} context
 * @param {*} datamodel
 * @param {*} fieldInfo
 * @param {*} facets
 *
 */


var createValueCells = function createValueCells(context, datamodel, fieldInfo, facets) {
  var projections = fieldInfo.projections,
      indices = fieldInfo.indices;
  var rowFields = projections.rowFields,
      columnFields = projections.columnFields;
  var rowIndex = indices.rowIndex,
      columnIndex = indices.columnIndex;
  var suppliedLayers = context.suppliedLayers,
      GeomCell = context.cell,
      resolver = context.resolver,
      config = context.config,
      encoder = context.encoder,
      detailFields = context.detailFields;
  var axes = resolver.axes();
  var cacheMaps = resolver.cacheMaps();
  var matrixLayers = resolver.matrixLayers();
  var labelManager = resolver.dependencies().smartlabel;
  var horizontalAxis = resolver.horizontalAxis();
  var verticalAxis = resolver.verticalAxis();
  var datamodelTransform = resolver.datamodelTransform();
  var entryCellMap = cacheMaps.entryCellMap,
      exitCellMap = cacheMaps.exitCellMap;
  var layerConfigArr = encoder.getLayerConfig({
    columnFields: columnFields,
    rowFields: rowFields
  }, suppliedLayers || []);
  var axesCreators = {
    config: config,
    labelManager: labelManager,
    axes: axes,
    cacheMaps: cacheMaps
  };
  fieldInfo.normalizedColumns = verticalAxis.fields;
  fieldInfo.normalizedRows = horizontalAxis.fields;
  var groupAxes = encoder.createAxis(axesCreators, fieldInfo, context);
  matrixLayers[rowIndex] = matrixLayers[rowIndex] ? matrixLayers[rowIndex] : [];
  matrixLayers[rowIndex][columnIndex] = layerConfigArr; // return from map if already there otherwise create and put in map

  var geomCellKey = Object(_group_utils__WEBPACK_IMPORTED_MODULE_3__["getCellKey"])(rowIndex, columnIndex);
  var fields = {
    y: rowFields,
    x: columnFields
  };
  var allFacets = [[].concat(_toConsumableArray(facets.rowFacets[0]), _toConsumableArray(facets.colFacets[0])), [].concat(_toConsumableArray(facets.rowFacets[1]), _toConsumableArray(facets.colFacets[1]))];
  var geomCell = !exitCellMap.has(geomCellKey) ? new GeomCell() : exitCellMap.get(geomCellKey);
  geomCell.data(datamodel).axes(groupAxes).fields(fields).transform(datamodelTransform).detailFields(detailFields).facetByFields(allFacets);
  entryCellMap.set(geomCellKey, geomCell);
  exitCellMap.delete(geomCellKey);
  updateCells(resolver, facets, geomCell);
  return entryCellMap.get(geomCellKey);
};
/**
 * Creates axis cells based on the set of axes
 *
 * @param {Selection} selection Contains a selection of the axis units
 * @param {Array} axes Actual axis units
 * @param {number} axisIndex 0-> primary axis, 1-> secondary axis(when dual axis is made)
 * @param {Object} cells Contains a collection of the cells
 * @return {Object} return either set of axis/blank cells depending on the config
 */

var createAxisCells = function createAxisCells(selection, axes, axisIndex, cells) {
  return Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["createSelection"])(selection, function (axis) {
    return axis;
  }, axes, function (item, i) {
    return i + item.reduce(function (e, n) {
      var id = n.id + axisIndex;
      return e + id;
    }, '');
  }).map(function (axis) {
    if (axis && axis[axisIndex]) {
      var axisInst = axis[axisIndex];

      var _axisInst$config = axisInst.config(),
          orientation = _axisInst$config.orientation,
          show = _axisInst$config.show;

      return new cells.AxisCell().source(axisInst).config({
        isOffset: orientation === _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__["AxisOrientation"].LEFT || orientation === _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_0__["AxisOrientation"].TOP,
        show: show
      });
    }

    return new cells.BlankCell().config({
      show: false
    });
  });
};
/**
 *
 *
 * @param {*} context
 * @param {*} selectionObj
 * @param {*} cells
 * @retur
 */


var axisPlaceholderGn = function axisPlaceholderGn(context, selObj, cells) {
  var matrices = context.matrices;
  var axesMatrix = matrices.axesMatrix;
  return function (type, axisFrom) {
    var axes = axesMatrix["".concat(type)];

    if (axes && axes.length) {
      if (type === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["X"] || type === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["Y"]) {
        var fieldNames = type === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["Y"] ? _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ROWS"] : _enums_constants__WEBPACK_IMPORTED_MODULE_4__["COLUMNS"];
        [_enums_constants__WEBPACK_IMPORTED_MODULE_4__["PRIMARY"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["SECONDARY"]].forEach(function (fieldType, index) {
          var selObjProp = "".concat(fieldNames).concat(fieldType);
          var axisIndex = index;
          var axesForDraw = axes;

          if (axisFrom === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["RIGHT"] || axisFrom === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["BOTTOM"]) {
            axisIndex = 1 - axisIndex;
          }

          if (!Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["getObjProp"])(axes, 0, axisIndex)) {
            axesForDraw = [];
          }

          selObj[selObjProp] = createAxisCells(selObj[selObjProp], axesForDraw, axisIndex, cells);
        });
      } else {
        selObj.rowsPrimary = createAxisCells(selObj.rowPrime, axes.map(function () {
          return [];
        }), 0, cells);
        selObj.columnsPrimary = createAxisCells(selObj.colPrime, axes[0], 0, cells);
      }
    }

    return selObj;
  };
};
/**
 * Creates header cells based on the set of headers
 *
 * @param {Object} selection Contains a selection of the header units
 * @param {string} headers Contains a list of the headers
 * @param {Object} cells Contains a collection of the cells
 * @param {Object} labelManager smart label instance
 * @return {Object} return either set of header cells depending on the config
 */


var createTextCells = function createTextCells(selection, headers, cells, labelManager) {
  return Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["createSelection"])(selection, function (label) {
    return new cells.TextCell({}, {
      labelManager: labelManager
    }).source(label);
  }, headers, function (key, i) {
    return key + i;
  });
};
/**
 *
 *
 * @param {*} context
 * @param {*} selectionObj
 * @param {*} cells
 * @param {*} labelManager
 *
 */


var headerPlaceholderGn = function headerPlaceholderGn(context, selectionObj, cells, labelManager) {
  var axis = context.axis,
      keys = context.keys,
      type = context.type,
      facet = context.facet;
  var counter = axis.length / keys.length;
  var selectionKeys = keys.length ? axis.map(function (d, i) {
    return keys[Math.floor(i / counter)];
  }) : [];
  return Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["createSelection"])(selectionObj["".concat(type, "Headers")], function (keySet) {
    return keySet;
  }, selectionKeys, function (keySet, i) {
    return "".concat(keySet.join(','), "-").concat(i);
  }).map(function (keySet) {
    return createTextCells(null, keySet, cells, labelManager).map(function (cell, k, i) {
      return cell.source(keySet[i]).config(facet);
    });
  });
};
/**
 * Creates a set of placeholders as a part of selection object
 *
 * @param {Array} normalizedOptions contains normalized rows and columns
 * @param {Array} matrices contains axis and value matrices
 * @param {aArrayny} projections contains set of row and column projections
 * @param {Object} cells Contains a collection of the cells
 * @param {Object} labelManager smart label instance
 * @return {Object} Creates a set of placeholders as a part of selections
 */


var generatePlaceholders = function generatePlaceholders(context, cells, labelManager) {
  var selectionObj;
  var matrices = context.matrices,
      fields = context.fields,
      facetsAndProjections = context.facetsAndProjections,
      selection = context.selection,
      facet = context.facet,
      encoders = context.encoders,
      resolver = context.resolver;
  var rows = fields.rows,
      columns = fields.columns;
  var valuesMatrix = matrices.valuesMatrix;
  var rowProjections = facetsAndProjections.rowProjections,
      colProjections = facetsAndProjections.colProjections;
  var rowKeys = valuesMatrix.rowKeys,
      columnKeys = valuesMatrix.columnKeys;
  var takeAxisFrom = encoders.planarEncoder._axisFrom;
  var takeHeaderFrom = encoders.planarEncoder._headerFrom;
  selectionObj = selection || {};
  ['pie', _enums_constants__WEBPACK_IMPORTED_MODULE_4__["X"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["Y"]].forEach(function (axis) {
    var axisFrom = axis === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["X"] ? takeAxisFrom.column : takeAxisFrom.row;
    selectionObj = axisPlaceholderGn(context, selectionObj, cells)(axis, axisFrom);
  });
  var _selectionObj = selectionObj,
      rowsPrimary = _selectionObj.rowsPrimary,
      rowsSecondary = _selectionObj.rowsSecondary,
      columnsPrimary = _selectionObj.columnsPrimary,
      columnsSecondary = _selectionObj.columnsSecondary;
  var rowAxis = rowsPrimary && rowsPrimary.getObjects().length ? rowsPrimary.getObjects() : rowsSecondary && rowsSecondary.getObjects().length ? rowsSecondary.getObjects() : [];
  var colAxis = columnsPrimary && columnsPrimary.getObjects().length ? columnsPrimary.getObjects() : columnsSecondary && columnsSecondary.getObjects().length ? columnsSecondary.getObjects() : [];
  var headerConfig = [{
    type: _enums_constants__WEBPACK_IMPORTED_MODULE_4__["LEFT"],
    section: rows[0],
    axis: rowAxis,
    headerFrom: takeHeaderFrom.row
  }, {
    type: _enums_constants__WEBPACK_IMPORTED_MODULE_4__["RIGHT"],
    section: rows[1],
    axis: rowAxis,
    headerFrom: takeHeaderFrom.row
  }, {
    type: _enums_constants__WEBPACK_IMPORTED_MODULE_4__["TOP"],
    section: columns[0],
    axis: colAxis,
    headerFrom: takeHeaderFrom.column
  }, {
    type: _enums_constants__WEBPACK_IMPORTED_MODULE_4__["BOTTOM"],
    section: columns[1],
    axis: colAxis,
    headerFrom: takeHeaderFrom.column
  }];
  headerConfig.forEach(function (config, index) {
    var keys;
    var length;
    var type = config.type,
        section = config.section,
        axis = config.axis,
        headerFrom = config.headerFrom;

    if (index < 2) {
      keys = rowKeys;
      length = rowProjections.length > 0 ? rowProjections.length : 1;
    } else {
      keys = columnKeys;
      length = colProjections.length > 0 ? colProjections.length : 1;
    }

    keys = keys.map(function (arr) {
      return arr.map(function (val) {
        return resolver.valueParser()(val);
      });
    });

    if (section.length && headerFrom === type && axis && keys.length) {
      var hContext = {
        axis: axis,
        length: length,
        type: type
      };
      var headers = [];

      if (index < 2) {
        hContext.keys = keys;
        hContext.facet = facet.rows;
        headers = headerPlaceholderGn(hContext, selectionObj, cells, labelManager);
      } else {
        hContext.facet = facet.columns;
        hContext.keys = keys[0].map(function (key, i) {
          return keys.map(function (e) {
            return e[i];
          });
        });
        headers = headerPlaceholderGn(hContext, selectionObj, cells, labelManager);
      }

      selectionObj["".concat(type, "Headers")] = headers;
    } else {
      selectionObj["".concat(type, "Headers")] = null;
    }
  });
  return selectionObj;
};
/**
 * Generates matrices
 *
 * @param {Object} config Configuration to generate matrices
 * @param {Array} matrices Matrices containing the set of visual units and axes units
 * @param {Object} cells Contains a collection of the cells
 * @param {Object} labelManager smart label instance
 * @return {Object} contains a collection of matrices
 */


var generateMatrices = function generateMatrices(context, matrices, cells, labelManager) {
  var unitHeight = context.unitHeight,
      unitWidth = context.unitWidth,
      facetsAndProjections = context.facetsAndProjections,
      normalizedRows = context.normalizedRows,
      normalizedColumns = context.normalizedColumns,
      selection = context.selection,
      axisFrom = context.axisFrom,
      facet = context.facet,
      encoders = context.encoders,
      resolver = context.resolver;
  var placeholderContext = {
    fields: {
      rows: normalizedRows,
      columns: normalizedColumns
    },
    matrices: matrices,
    facetsAndProjections: facetsAndProjections,
    selection: selection,
    axisFrom: axisFrom,
    facet: facet,
    encoders: encoders,
    resolver: resolver
  }; // Generate placeholders for all matrices

  var selectionObj = generatePlaceholders(placeholderContext, cells, labelManager);
  var columnsPrimary = selectionObj.columnsPrimary,
      columnsSecondary = selectionObj.columnsSecondary,
      rowsPrimary = selectionObj.rowsPrimary,
      rowsSecondary = selectionObj.rowsSecondary,
      leftHeaders = selectionObj.leftHeaders,
      topHeaders = selectionObj.topHeaders,
      bottomHeaders = selectionObj.bottomHeaders,
      rightHeaders = selectionObj.rightHeaders;

  var _map = [rowsPrimary, rowsSecondary, columnsPrimary, columnsSecondary].map(function (d) {
    return d ? d.getObjects() : [];
  }),
      _map2 = _slicedToArray(_map, 4),
      rowPrime = _map2[0],
      rowSec = _map2[1],
      colPrime = _map2[2],
      colSec = _map2[3];

  var _map3 = [leftHeaders, rightHeaders].map(function (e) {
    return e ? e.getObjects().map(function (f) {
      return f.getObjects();
    }) : [];
  }),
      _map4 = _slicedToArray(_map3, 2),
      leftFacets = _map4[0],
      rightFacets = _map4[1];

  var rowPriority = rowSec.length ? 1 : -1;
  rowPrime.length && rowPriority++;
  var colPriority = colSec.length ? 1 : -1;
  colPrime.length && colPriority++; // Compute left matrix using left headers and the axes on the rows

  var leftMatrix = leftFacets.length ? leftFacets.map(function (d, i) {
    rowPrime[i] = rowPrime[i] ? [rowPrime[i]] : [];
    return [].concat(_toConsumableArray(d), _toConsumableArray(rowPrime[i]));
  }) : rowPrime ? rowPrime.map(function (d) {
    return [d];
  }) : []; // Compute right matrix using right headers and the axes on the rows

  var rightMatrix = rowSec.length ? rowSec.map(function (d, i) {
    return [d].concat(_toConsumableArray(rightFacets[i] || []));
  }) : rightFacets.length ? rightFacets.map(function (d) {
    return _toConsumableArray(d);
  }) : [];
  var topMatrix = [];

  if (topHeaders) {
    var headers = topHeaders.getObjects();
    headers.forEach(function (e) {
      var innerHeaders = e.getObjects();
      innerHeaders.forEach(function (x, i) {
        topMatrix[i] = topMatrix[i] || [];
        topMatrix[i].push(x);
      });
    });
  } // Compute top matrix using the top headers and axes on the columns


  if (colPrime.length) {
    topMatrix.push(colPrime);
  } // Bottom and right matrices are prepared using the user config.


  var bottomMatrix = [];

  if (colSec.length) {
    bottomMatrix.push(colSec);
  }

  var currentBottomLength = bottomMatrix.length;

  if (bottomHeaders) {
    var _headers = bottomHeaders.getObjects();

    _headers.forEach(function (e) {
      var innerHeaders = e.getObjects();
      innerHeaders.forEach(function (x, i) {
        bottomMatrix[i + currentBottomLength] = bottomMatrix[i + currentBottomLength] || [];
        bottomMatrix[i + currentBottomLength].push(x);
      });
    });
  }

  if (!leftMatrix.length && !rightMatrix.length) {
    var cell = new cells.BlankCell();
    cell.setAvailableSpace(unitWidth, unitHeight);
    leftMatrix = [[cell]];
  }

  if (!topMatrix.length && (!bottomMatrix.length || !bottomMatrix[0].length)) {
    var _cell = new cells.BlankCell();

    _cell.setAvailableSpace(unitWidth, unitHeight);

    bottomMatrix = [[_cell]];
  }

  return {
    rows: [leftMatrix, rightMatrix],
    columns: [topMatrix, bottomMatrix],
    selectionObj: selectionObj,
    colPriority: colPriority,
    rowPriority: rowPriority
  };
};
/**
 * Computes matrices for a group
 *
 * @param {Object} datamodel on which the matrices are to be computed
 * @param {Object} config configuration of the matrices
 * @param {Object} layerRegistry contains the registered layers
 * @return {Object} conputed matrices
 * @memberof MatrixResolver
 */

var computeMatrices = function computeMatrices(context, config) {
  var resolver = context.resolver,
      datamodel = context.datamodel,
      componentRegistry = context.componentRegistry,
      encoders = context.encoders;
  var globalConfig = config.globalConfig,
      selection = config.selection,
      transform = config.transform;
  var groupBy = globalConfig.autoGroupBy;

  var _resolver$dependencie = resolver.dependencies(),
      labelManager = _resolver$dependencie.smartlabel;

  var fieldMap = datamodel.getFieldsConfig();
  var layerConfig = resolver.layerConfig();
  var registry = resolver.registry();

  var _resolver$horizontalA = resolver.horizontalAxis(),
      normalizedRows = _resolver$horizontalA.fields;

  var _resolver$verticalAxi = resolver.verticalAxis(),
      normalizedColumns = _resolver$verticalAxi.fields;

  var otherEncodings = resolver.optionalProjections(config, layerConfig);
  var facetsAndProjections = resolver.getAllFields();
  var matrixGnContext = {
    // Configuration to be passed to generate the  different matrices.
    // A common config is used for both value matrices and other matrices
    normalizedColumns: normalizedColumns,
    normalizedRows: normalizedRows,
    facetsAndProjections: facetsAndProjections,
    layers: layerConfig,
    fieldMap: fieldMap,
    otherEncodings: otherEncodings,
    encoders: encoders,
    facet: globalConfig.facet || {},
    axisFrom: globalConfig.axisFrom || {},
    selection: selection,
    resolver: resolver
  };
  var cells = {
    GeomCell: resolver.getCellDef(registry.GeomCell),
    AxisCell: resolver.getCellDef(registry.AxisCell),
    BlankCell: resolver.getCellDef(registry.BlankCell),
    TextCell: resolver.getCellDef(registry.TextCell)
  };
  var isRowSizeEqual = Object(_group_utils__WEBPACK_IMPORTED_MODULE_3__["isDistributionEqual"])(normalizedRows);
  var isColumnSizeEqual = Object(_group_utils__WEBPACK_IMPORTED_MODULE_3__["isDistributionEqual"])(normalizedColumns);
  resolver.colCells({});
  resolver.rowCells({});
  resolver.datamodelTransform(transform || {}); // Cell creation begins here

  resolver.resetSimpleAxes();

  var _resolver$cacheMaps = resolver.cacheMaps(),
      entryCellMap = _resolver$cacheMaps.entryCellMap;

  var newCacheMap = {
    exitCellMap: entryCellMap,
    entryCellMap: new Map()
  };
  resolver.cacheMaps(newCacheMap);
  var valueCellContext = {
    config: globalConfig,
    suppliedLayers: encoders.planarEncoder.serializeLayerConfig(resolver.layerConfig()),
    resolver: resolver,
    cell: cells.GeomCell,
    encoder: encoders.planarEncoder,
    newCacheMap: newCacheMap,
    detailFields: config.detail
  };
  var fieldsConfig = datamodel.getFieldsConfig();
  var groupedModel = datamodel;

  if (!groupBy.disabled) {
    var fields = Object(_group_utils__WEBPACK_IMPORTED_MODULE_3__["getFieldsFromSuppliedLayers"])(valueCellContext.suppliedLayers, datamodel.getFieldsConfig());
    var allFields = Object(_group_utils__WEBPACK_IMPORTED_MODULE_3__["extractFields"])(facetsAndProjections, fields);
    var dimensions = allFields.filter(function (field) {
      return fieldsConfig[field] && fieldsConfig[field].def.type === muze_utils__WEBPACK_IMPORTED_MODULE_1__["FieldType"].DIMENSION;
    });
    var aggregationFns = groupBy.measures;
    var measureNames = Object.keys(datamodel.getFieldspace().getMeasure());
    var nearestAggFns = muze_utils__WEBPACK_IMPORTED_MODULE_1__["retrieveNearestGroupByReducers"].apply(void 0, [datamodel].concat(_toConsumableArray(measureNames)));
    var resolvedAggFns = Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["mergeRecursive"])(nearestAggFns, aggregationFns);
    groupedModel = datamodel.groupBy(dimensions.length ? dimensions : [''], resolvedAggFns).project(allFields);
  } // return a callback function to create the cells from the matrix


  var cellCreator = resolver.valueCellsCreator(valueCellContext); // Creates value matrices from the datamodel and configs

  var valueMatrixInfo = Object(_matrix_model__WEBPACK_IMPORTED_MODULE_2__["getMatrixModel"])(groupedModel, facetsAndProjections, cellCreator);
  resolver.cacheMaps().exitCellMap.forEach(function (placeholder) {
    placeholder.remove();
  });
  resolver.cacheMaps().exitCellMap.clear();
  resolver.valueMatrix(valueMatrixInfo.matrix);

  var _mutateAxesFromMap = Object(_group_utils__WEBPACK_IMPORTED_MODULE_3__["mutateAxesFromMap"])(resolver.cacheMaps(), resolver.axes()),
      xAxes = _mutateAxesFromMap.xAxes,
      yAxes = _mutateAxesFromMap.yAxes;

  resolver.axes({
    x: xAxes,
    y: yAxes
  });
  var store = resolver.store();
  [xAxes, yAxes].forEach(function (axesArr, type) {
    var stateProps = {};
    axesArr = axesArr || [];
    axesArr.forEach(function (axes, idx) {
      axes.forEach(function (axis, axisIndex) {
        stateProps["".concat(idx).concat(axisIndex)] = null;
      });
    });
    store.append("".concat(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].GROUP_GLOBAL_NAMESPACE, ".domain.").concat(type ? 'y' : 'x'), stateProps);
  });
  resolver.createUnits(componentRegistry, config);
  var matrices = {
    valuesMatrix: valueMatrixInfo,
    axesMatrix: resolver.axes()
  }; // Create all matrices

  var _generateMatrices = generateMatrices(matrixGnContext, matrices, cells, labelManager),
      rows = _generateMatrices.rows,
      columns = _generateMatrices.columns,
      selectionObj = _generateMatrices.selectionObj,
      rowPriority = _generateMatrices.rowPriority,
      colPriority = _generateMatrices.colPriority;

  resolver.rowMatrix(rows);
  resolver.columnMatrix(columns);
  return {
    rows: resolver.rowMatrix(),
    columns: resolver.columnMatrix(),
    values: resolver.valueMatrix(),
    isColumnSizeEqual: isColumnSizeEqual,
    isRowSizeEqual: isRowSizeEqual,
    priority: {
      row: rowPriority,
      col: colPriority
    },
    selection: selectionObj,
    dataModels: {
      groupedModel: groupedModel,
      parentModel: datamodel
    }
  };
};

/***/ }),

/***/ "./packages/visual-group/src/group-helper/group-utils.js":
/*!***************************************************************!*\
  !*** ./packages/visual-group/src/group-helper/group-utils.js ***!
  \***************************************************************/
/*! exports provided: initStore, isDistributionEqual, initializeCacheMaps, getAxisKey, getCellKey, extractUnitConfig, getHeaderText, headerCreator, findInGroup, getAxisType, retriveDomainFromData, mutateAxesFromMap, getEncoders, getHeaderAxisFrom, setFacetsAndProjections, getBorders, getFieldsFromSuppliedLayers, extractFields */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initStore", function() { return initStore; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isDistributionEqual", function() { return isDistributionEqual; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initializeCacheMaps", function() { return initializeCacheMaps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAxisKey", function() { return getAxisKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCellKey", function() { return getCellKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extractUnitConfig", function() { return extractUnitConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getHeaderText", function() { return getHeaderText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "headerCreator", function() { return headerCreator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findInGroup", function() { return findInGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAxisType", function() { return getAxisType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "retriveDomainFromData", function() { return retriveDomainFromData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mutateAxesFromMap", function() { return mutateAxesFromMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEncoders", function() { return getEncoders; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getHeaderAxisFrom", function() { return getHeaderAxisFrom; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setFacetsAndProjections", function() { return setFacetsAndProjections; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBorders", function() { return getBorders; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFieldsFromSuppliedLayers", function() { return getFieldsFromSuppliedLayers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extractFields", function() { return extractFields; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_defaults__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/defaults */ "./packages/visual-group/src/enums/defaults.js");
/* harmony import */ var _variable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../variable */ "./packages/visual-group/src/variable/index.js");
/* harmony import */ var _enums_encoder_maps__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/encoder-maps */ "./packages/visual-group/src/enums/encoder-maps.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../enums/constants */ "./packages/visual-group/src/enums/constants.js");
var _this = undefined;

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }






/**
 * Creates an instance of a store which contains the arguments to make the class reactive
 *
 * @return {Object} instance of store
 * @memberof VisualGroup
 */

var initStore = function initStore() {
  return new muze_utils__WEBPACK_IMPORTED_MODULE_0__["Store"](_defineProperty({}, _enums_defaults__WEBPACK_IMPORTED_MODULE_1__["DATA_UPDATE_COUNTER"], _enums_defaults__WEBPACK_IMPORTED_MODULE_1__["DATA_UPDATE_COUNTER"]));
};
/**
 *
 *
 * @param {*} arr
 */

var isDistributionEqual = function isDistributionEqual(arr) {
  return [].concat(_toConsumableArray(arr[0]), _toConsumableArray(arr[1])).reduce(function (isEqual, row) {
    var rowType = row.type();

    if (rowType === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["MEASURE"] || rowType === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["TEMPORAL"]) {
      isEqual = true;
    }

    return isEqual;
  }, false);
};
/**
 *
 *
 */

var initializeCacheMaps = function initializeCacheMaps() {
  return {
    cellMap: new Map(),
    xAxesMap: new Map(),
    yAxesMap: new Map(),
    entryCellMap: new Map(),
    exitCellMap: new Map()
  };
};
/**
 *
 *
 * @param {*} axisName
 * @param {*} id
 */

var getAxisKey = function getAxisKey(axisName) {
  for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    params[_key - 1] = arguments[_key];
  }

  return "".concat(axisName, "-axis-").concat(params.join('-'));
};
/**
 *
 *
 * @param {*} rowId
 * @param {*} columnId
 */

var getCellKey = function getCellKey(rowId, columnId) {
  return "cell-".concat(rowId, "-").concat(columnId);
};
/**
 *
 *
 * @param {*} config
 *
 */

var extractUnitConfig = function extractUnitConfig(config) {
  var unitConfig = {};
  var attrNames = [_enums_constants__WEBPACK_IMPORTED_MODULE_4__["INTERACTION"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["GRID_LINES"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["GRID_BANDS"]];
  attrNames.forEach(function (attr) {
    if (config[attr] !== undefined) {
      unitConfig[attr] = config[attr];
    }
  });
  return unitConfig;
};
/**
 *
 *
 * @param {*} headers
 * @param {*} index
 * @param {*} rowLength
 *
 * @memberof MatrixResolver
 */

var getHeaderText = function getHeaderText(headers, index, rowLength) {
  var header = '';

  if (index === rowLength - 1 && headers.length > rowLength) {
    for (var i = index; i < headers.length - 1; i++) {
      header += "".concat(headers[i].toString(), " / ");
    }

    header += headers[headers.length - 1].toString();
    return header;
  } else if (headers[index]) {
    return headers[index].toString();
  }

  return '';
};
/**
 *
 *
 * @param {*} fields
 * @param {*} fieldHeaders
 * @param {*} TextCell
 * @param {*} labelManager
 *
 */

var headerCreator = function headerCreator(fields, fieldHeaders, TextCell, _ref2) {
  var classPrefix = _ref2.classPrefix,
      labelManager = _ref2.labelManager;
  var headers = fields.length > 0 ? fields[0].map(function (cell, i) {
    return new TextCell({
      type: _enums_constants__WEBPACK_IMPORTED_MODULE_4__["HEADER"],
      className: "".concat(classPrefix, "-grid-headers")
    }, {
      labelManager: labelManager
    }).source(getHeaderText(fieldHeaders, i, fields[0].length)).config({
      show: cell.config().show
    });
  }) : [];
  return headers;
};
/**
 *
 *
 * @param {*} variable
 * @param {*} allFields
 *
 */

var findInGroup = function findInGroup(variable, allFields) {
  var channel = null;
  [_enums_constants__WEBPACK_IMPORTED_MODULE_4__["COLOR"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["SIZE"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["SHAPE"]].forEach(function (e) {
    if (_this.store.get(e) && variable === _this.store.get(e)[0]) {
      channel = e;
    }
  });

  if (channel) {
    return {
      channel: channel
    };
  }

  [_enums_constants__WEBPACK_IMPORTED_MODULE_4__["ROW"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["COL"]].forEach(function (facetType) {
    allFields["".concat(facetType, "Facets")].forEach(function (e) {
      if (e.toString() === variable) {
        channel = {
          channel: _enums_constants__WEBPACK_IMPORTED_MODULE_4__["FACET"],
          type: facetType === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["COL"] ? _enums_constants__WEBPACK_IMPORTED_MODULE_4__["COLUMN"] : _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ROW"]
        };
      }
    });
  });

  if (channel) {
    return channel;
  }

  [_enums_constants__WEBPACK_IMPORTED_MODULE_4__["ROW"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["COL"]].forEach(function (projType) {
    allFields["".concat(projType, "Projections")].forEach(function (e) {
      e.forEach(function (m) {
        if (m.toString() === variable) {
          channel = projType === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["COL"] ? _enums_constants__WEBPACK_IMPORTED_MODULE_4__["X"] : _enums_constants__WEBPACK_IMPORTED_MODULE_4__["Y"];
        }
      });
    });
  });

  if (channel) {
    return {
      channel: channel
    };
  }

  return null;
};
/**
 *
 *
 * @param {*} datamodel
 * @param {*} field
 */

var getAxisType = function getAxisType(fieldsConfig, field) {
  var fieldType = _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ORDINAL"];

  if (field && fieldsConfig[field].def.type !== _enums_constants__WEBPACK_IMPORTED_MODULE_4__["DIMENSION"]) {
    fieldType = _enums_constants__WEBPACK_IMPORTED_MODULE_4__["LINEAR"];
  }

  return fieldType;
};
/**
 *
 *
 * @param {*} datamodel
 * @param {*} fieldName
 *
 */

var retriveDomainFromData = function retriveDomainFromData(datamodel, fieldName) {
  var field = datamodel.getFieldspace().fields.find(function (d) {
    return d.name() === fieldName.toString();
  });
  return field.domain();
};
/**
 *
 *
 * @memberof MatrixResolver
 */

var mutateAxesFromMap = function mutateAxesFromMap(cacheMaps, axes) {
  var xAxes = null;
  var yAxes = null;
  var xAxesMap = cacheMaps.xAxesMap,
      yAxesMap = cacheMaps.yAxesMap;
  var xAxisSet = axes.x,
      yAxisSet = axes.y;
  xAxisSet && xAxisSet.forEach(function (axisId) {
    var xAxis = xAxesMap.get(axisId);
    xAxes = xAxes || [];
    xAxes.push(xAxis);
  });
  yAxisSet && yAxisSet.forEach(function (axisId) {
    var yAxis = yAxesMap.get(axisId);
    yAxes = yAxes || [];
    yAxes.push(yAxis);
  });
  return {
    xAxes: xAxes,
    yAxes: yAxes
  };
};
/**
 *
 *
 * @param {*} layers
 *
 */

var getEncoders = function getEncoders(layers) {
  var encoderType = 'cartesian'; //  new CartesianEncoder();

  if (layers.length) {
    // Figuring out the kind of layers the group will have
    encoderType = layers.every(function (e) {
      return e.mark === 'arc';
    }) ? 'polar' : encoderType;
  }

  return {
    planarEncoder: new _enums_encoder_maps__WEBPACK_IMPORTED_MODULE_3__["planarEncoderMap"][encoderType](),
    retinalEncoder: new _enums_encoder_maps__WEBPACK_IMPORTED_MODULE_3__["retinalEncoderMap"][encoderType]()
  };
};
/**
 *
 *
 * @param {*} type
 * @param {*} fields
 * @param {*} userAxisFromConfig
 *
 */

var getHeaderAxisFrom = function getHeaderAxisFrom(type, fields, userAxisFromConfig) {
  var axisFrom = userAxisFromConfig[type];
  var headerFrom = '';
  var options = type === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ROW"] ? [_enums_constants__WEBPACK_IMPORTED_MODULE_4__["LEFT"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["RIGHT"]] : [_enums_constants__WEBPACK_IMPORTED_MODULE_4__["BOTTOM"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["TOP"]];

  var _fields = _slicedToArray(fields, 2),
      firstField = _fields[0],
      secondField = _fields[1];

  var firstFieldType = function firstFieldType(i) {
    return firstField.length ? firstField[i].type() : null;
  };

  var secondFieldType = function secondFieldType(i) {
    return secondField.length ? secondField[i].type() : null;
  };

  if (firstFieldType(firstField.length - 1) === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["DIMENSION"] && secondFieldType(0) === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["DIMENSION"]) {
    headerFrom = axisFrom ? options[1 - options.indexOf(axisFrom)] : options[1];

    if (type === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["COLUMN"] && firstField[firstField.length - 1].toString() === secondField[0].toString()) {
      axisFrom = _enums_constants__WEBPACK_IMPORTED_MODULE_4__["TOP"];
    } else {
      axisFrom = axisFrom || options[0];
    }
  } else if (secondFieldType(secondField.length - 1) === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["DIMENSION"]) {
    headerFrom = type === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ROW"] ? _enums_constants__WEBPACK_IMPORTED_MODULE_4__["RIGHT"] : _enums_constants__WEBPACK_IMPORTED_MODULE_4__["BOTTOM"];
    axisFrom = type === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ROW"] ? _enums_constants__WEBPACK_IMPORTED_MODULE_4__["RIGHT"] : _enums_constants__WEBPACK_IMPORTED_MODULE_4__["BOTTOM"];
  } else {
    headerFrom = type === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ROW"] ? _enums_constants__WEBPACK_IMPORTED_MODULE_4__["LEFT"] : _enums_constants__WEBPACK_IMPORTED_MODULE_4__["TOP"];
    axisFrom = type === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ROW"] ? _enums_constants__WEBPACK_IMPORTED_MODULE_4__["LEFT"] : _enums_constants__WEBPACK_IMPORTED_MODULE_4__["TOP"];
  }

  if (firstFieldType(firstField.length - 1) === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["MEASURE"] && secondFieldType(0) === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["MEASURE"]) {
    axisFrom = type === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ROW"] ? _enums_constants__WEBPACK_IMPORTED_MODULE_4__["LEFT"] : _enums_constants__WEBPACK_IMPORTED_MODULE_4__["TOP"];
  } else if (secondFieldType(0) === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["MEASURE"]) {
    axisFrom = type === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ROW"] ? _enums_constants__WEBPACK_IMPORTED_MODULE_4__["RIGHT"] : _enums_constants__WEBPACK_IMPORTED_MODULE_4__["BOTTOM"];
  } else if (firstFieldType(firstField.length - 1) === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["MEASURE"]) {
    axisFrom = type === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ROW"] ? _enums_constants__WEBPACK_IMPORTED_MODULE_4__["LEFT"] : _enums_constants__WEBPACK_IMPORTED_MODULE_4__["TOP"];
  }

  return [headerFrom, axisFrom];
};
/**
 *
 *
 * @param {*} type
 * @param {*} fields
 * @param {*} layers
 *
 * @memberof MatrixResolver
 */

var setFacetsAndProjections = function setFacetsAndProjections(context, fieldInfo, encoder) {
  var fields = fieldInfo.fields,
      type = fieldInfo.type;

  var _encoder$planarEncode = encoder.planarEncoder.getFacetsAndProjections(fields, type),
      facets = _encoder$planarEncode.facets,
      projections = _encoder$planarEncode.projections;

  context.facets(_defineProperty({}, "".concat(type, "Facets"), facets));
  context.projections(_defineProperty({}, "".concat(type, "Projections"), projections));
  return {
    facets: facets,
    projections: projections,
    fields: fields
  };
};

var getRowBorders = function getRowBorders(left, right) {
  var borders = {};
  borders.top = false;
  borders.bottom = false;

  if (left.length > 1 || right.length > 1) {
    borders.top = true;
    borders.bottom = true;
  }

  return borders;
};

var getColumnsBorders = function getColumnsBorders(top, bottom) {
  var borders = {};
  borders.left = false;
  borders.right = false;

  if (top.length || bottom.length) {
    if (top[0] && top[0].length > 1 || bottom[0] && bottom[0].length > 1) {
      borders.left = true;
      borders.right = true;
    }
  }

  return borders;
};

var getValueBorders = function getValueBorders(rows, columns) {
  var borders = {
    top: true,
    left: true,
    bottom: true,
    right: true
  };
  var borderTypeRow = [_enums_constants__WEBPACK_IMPORTED_MODULE_4__["LEFT"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["RIGHT"]];
  var borderTypeCol = [_enums_constants__WEBPACK_IMPORTED_MODULE_4__["TOP"], _enums_constants__WEBPACK_IMPORTED_MODULE_4__["BOTTOM"]];
  rows.forEach(function (e, i) {
    if (e[0] && e[0].length) {
      borders[borderTypeRow[i]] = true;
    } else {
      borders[borderTypeRow[i]] = false;
    }
  });
  columns.forEach(function (e, i) {
    if (e.length) {
      borders[borderTypeCol[i]] = true;
    } else {
      borders[borderTypeCol[i]] = false;
    }
  });
  return borders;
};

var getBorders = function getBorders(matrices, encoder) {
  var showRowBorders = {
    top: false,
    bottom: false
  };
  var showColBorders = {
    left: false,
    right: false
  };
  var showValueBorders = {
    top: false,
    bottom: false,
    left: false,
    right: false
  };
  var rows = matrices.rows,
      columns = matrices.columns,
      valueMatrix = matrices.values;

  var _rows = _slicedToArray(rows, 2),
      leftRows = _rows[0],
      rightRows = _rows[1];

  var _columns = _slicedToArray(columns, 2),
      topColumns = _columns[0],
      bottomColumns = _columns[1];

  var _encoder$fieldInfo = encoder.fieldInfo(),
      rowDimensions = _encoder$fieldInfo.rowDimensions,
      columnDimensions = _encoder$fieldInfo.columnDimensions,
      rowTemporalFields = _encoder$fieldInfo.rowTemporalFields,
      columnTemporalFields = _encoder$fieldInfo.columnTemporalFields,
      columnMeasures = _encoder$fieldInfo.columnMeasures,
      rowMeasures = _encoder$fieldInfo.rowMeasures;

  var allDimensionLength = rowDimensions.length + columnDimensions.length;
  var allMeasuresLength = rowMeasures.length + columnMeasures.length;
  var allTemporalFieldsLength = rowTemporalFields.length + columnTemporalFields.length;

  if (encoder.constructor.type() === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["POLAR"]) {
    if (!allDimensionLength) {
      return {
        showRowBorders: showRowBorders,
        showColBorders: showColBorders,
        showValueBorders: showValueBorders
      };
    }
  } else if (!allMeasuresLength && !allTemporalFieldsLength && allDimensionLength <= 2) {
    return {
      showRowBorders: showRowBorders,
      showColBorders: showColBorders,
      showValueBorders: showValueBorders
    };
  }

  showRowBorders = getRowBorders(leftRows, rightRows);
  showColBorders = getColumnsBorders(topColumns, bottomColumns);
  showValueBorders = getValueBorders([leftRows, rightRows], [topColumns, bottomColumns]);

  if (valueMatrix.length > 1) {
    showValueBorders.top = true;
    showValueBorders.bottom = true;
  }

  if (valueMatrix.length && valueMatrix[0].length > 1) {
    showValueBorders.left = true;
    showValueBorders.right = true;
  }

  return {
    showRowBorders: showRowBorders,
    showColBorders: showColBorders,
    showValueBorders: showValueBorders
  };
};
var getFieldsFromSuppliedLayers = function getFieldsFromSuppliedLayers(suppliedLayerConfig, fieldsConfig) {
  var _ref3;

  var fields = [];
  var encodingArr = suppliedLayerConfig.map(function (conf) {
    return conf.encoding || {};
  });
  fields = [].concat(_toConsumableArray(fields), [(_ref3 = []).concat.apply(_ref3, _toConsumableArray(encodingArr.map(function (enc) {
    return Object.values(enc).map(function (d) {
      return d.field;
    });
  })))]);
  fields = fields.filter(function (field) {
    return fieldsConfig[field] && fieldsConfig[field].def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
  });
  return fields;
};
var extractFields = function extractFields(facetsAndProjections, layerFields) {
  var _ref6;

  var fields = Object.values(facetsAndProjections).map(function (arr) {
    var _ref4, _ref5;

    var flattenArray = (_ref4 = []).concat.apply(_ref4, _toConsumableArray(arr));

    return (_ref5 = []).concat.apply(_ref5, _toConsumableArray(flattenArray.map(function (field) {
      if (field instanceof _variable__WEBPACK_IMPORTED_MODULE_2__["Variable"]) {
        return field.getMembers();
      }

      return field;
    })));
  });
  return (_ref6 = []).concat.apply(_ref6, _toConsumableArray(fields).concat(_toConsumableArray(layerFields)));
};

/***/ }),

/***/ "./packages/visual-group/src/group-helper/index.js":
/*!*********************************************************!*\
  !*** ./packages/visual-group/src/group-helper/index.js ***!
  \*********************************************************/
/*! exports provided: initStore, findInGroup, getEncoders, getAxisType, getAxisKey, retriveDomainFromData, getBorders, MatrixResolver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _group_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./group-utils */ "./packages/visual-group/src/group-helper/group-utils.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "initStore", function() { return _group_utils__WEBPACK_IMPORTED_MODULE_0__["initStore"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "findInGroup", function() { return _group_utils__WEBPACK_IMPORTED_MODULE_0__["findInGroup"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getEncoders", function() { return _group_utils__WEBPACK_IMPORTED_MODULE_0__["getEncoders"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getAxisType", function() { return _group_utils__WEBPACK_IMPORTED_MODULE_0__["getAxisType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getAxisKey", function() { return _group_utils__WEBPACK_IMPORTED_MODULE_0__["getAxisKey"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "retriveDomainFromData", function() { return _group_utils__WEBPACK_IMPORTED_MODULE_0__["retriveDomainFromData"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getBorders", function() { return _group_utils__WEBPACK_IMPORTED_MODULE_0__["getBorders"]; });

/* harmony import */ var _matrix_resolver__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrix-resolver */ "./packages/visual-group/src/group-helper/matrix-resolver.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MatrixResolver", function() { return _matrix_resolver__WEBPACK_IMPORTED_MODULE_1__["default"]; });




/***/ }),

/***/ "./packages/visual-group/src/group-helper/matrix-model.js":
/*!****************************************************************!*\
  !*** ./packages/visual-group/src/group-helper/matrix-model.js ***!
  \****************************************************************/
/*! exports provided: getMatrixModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMatrixModel", function() { return getMatrixModel; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _group_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./group-utils */ "./packages/visual-group/src/group-helper/group-utils.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }



/**
 * Gets name of fields form the variables
 *
 * @param {*} fields1
 * @param {*} [fields2=[]]
 *
 */

var getFieldNames = function getFieldNames(fields1) {
  var fields2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
  return [fields1, fields2].map(function (fields) {
    return fields.reduce(function (acc, d) {
      acc = [].concat(_toConsumableArray(acc), _toConsumableArray(d.getMembers()));
      return acc;
    }, []);
  });
};
/**
 * Creates a selected datamodel from a parent datamodel and a set of field names
 *
 * @param {Object} datamodel provided as input
 * @param {Array} fieldNames schema  names
 * @param {Array} fieldValues values of those schema names to be selected
 * @return {Object} creates a new selected datamodel
 */


var createSelectedDataModel = function createSelectedDataModel(datamodel, fieldNames, fieldValues) {
  return datamodel.select(function (fields) {
    return fieldNames.every(function (field, k) {
      return fields[field].value === fieldValues[k];
    });
  });
};
/**
 *
 *
 * @param {*} facets
 * @param {*} keyArray
 *
 */


var uniqueKeyGenerator = function uniqueKeyGenerator(keyArray, context) {
  var depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
  var val = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];
  var facets = context.facets,
      dataModel = context.dataModel,
      uniqueValues = context.uniqueValues; // Get unique keys for the next depth recursively if required

  if (facets[depth + 1]) {
    var field = facets[depth];
    uniqueValues.forEach(function (value) {
      var newDm = dataModel.select(function (fields) {
        return fields[field].value === value;
      });
      var nextDepthUniqueValues = Object(_group_utils__WEBPACK_IMPORTED_MODULE_1__["retriveDomainFromData"])(newDm, facets[depth + 1]);
      var newContext = {
        facets: facets,
        dataModel: newDm,
        uniqueValues: nextDepthUniqueValues
      };
      uniqueKeyGenerator(keyArray, newContext, depth + 1, [].concat(_toConsumableArray(val), [value]));
    });
  } else {
    uniqueValues.forEach(function (value) {
      keyArray.push([].concat(_toConsumableArray(val), [value]));
    });
  }
};
/**
 * projects row model based on the set of row and/or column and other projection fields
 *
 * @param {Object} datamodel provided as input
 * @return {Object} Projected datamodel
 */


var projectRows = function projectRows(datamodel, projections) {
  var allColumnProjections = projections.allColumnProjections,
      rowProjections = projections.rowProjections,
      optionalProjections = projections.optionalProjections;

  if (rowProjections.length > 0) {
    return rowProjections.map(function (projectFields) {
      var _getFieldNames = getFieldNames(projectFields, allColumnProjections),
          _getFieldNames2 = _slicedToArray(_getFieldNames, 2),
          projFieldNames = _getFieldNames2[0],
          colProjFieldNames = _getFieldNames2[1];

      return datamodel.project([].concat(_toConsumableArray(projFieldNames), _toConsumableArray(colProjFieldNames), _toConsumableArray(optionalProjections)));
    });
  }

  return [datamodel];
};
/**
 * Adds the datamodels to current row index based on column fields
 *
 * @param {Array} context current context
 * @param {Array} valueCellCreator List of facets applied to the current datamodel
 */


var pushToMatrix = function pushToMatrix(context, valueCellCreator) {
  var _matrix$rowIndex;

  var cells = [];
  var matrix = context.matrix,
      datamodel = context.datamodel,
      facetInfo = context.facetInfo,
      fieldInfo = context.fieldInfo; // Get projected fields for current row

  var rowProjections = fieldInfo.rowProjections,
      colProjections = fieldInfo.colProjections,
      optionalProjections = fieldInfo.optionalProjections;
  var rowIndex = facetInfo.rowIndex,
      columnIndex = facetInfo.columnIndex;
  var rowProj = rowProjections[rowIndex % rowProjections.length] || []; // Get the cells for the matrix from the return function of the callback on the datamodel.
  // callback function -> (datamodel, {projections, indices}, facets)

  if (colProjections.length > 0) {
    cells = colProjections.map(function (projectFields, projIdx) {
      var _getFieldNames3 = getFieldNames(projectFields, rowProj),
          _getFieldNames4 = _slicedToArray(_getFieldNames3, 2),
          colProjFieldNames = _getFieldNames4[0],
          rowProjFieldNames = _getFieldNames4[1];

      var projectedDm = datamodel.project([].concat(_toConsumableArray(colProjFieldNames), _toConsumableArray(rowProjFieldNames), _toConsumableArray(optionalProjections)));
      var projections = {
        rowFields: rowProj,
        columnFields: projectFields
      };
      var indices = {
        rowIndex: rowIndex,
        columnIndex: columnIndex * colProjections.length + projIdx
      };
      return valueCellCreator(projectedDm, {
        projections: projections,
        indices: indices
      }, facetInfo);
    });
  } else {
    var projections = {
      rowFields: rowProj,
      columnFields: []
    };
    var indices = {
      rowIndex: rowIndex,
      columnIndex: columnIndex
    };
    cells = [valueCellCreator(datamodel, {
      projections: projections,
      indices: indices
    }, facetInfo)];
  }

  matrix[rowIndex] = matrix[rowIndex] || [];

  (_matrix$rowIndex = matrix[rowIndex]).push.apply(_matrix$rowIndex, _toConsumableArray(cells));
};
/**
 * Gets Matrixes for corresponding datamodel, facets and projections
 *
 * @param {Object} dataModel input datamodel
 * @param {Object} fieldMap corresponding fieldmap
 * @param {Array} facetsAndProjections contains the set of facets and projections for the matrices
 * @param {Function} valueCellCreator Callback executed after datamodels are prepared after sel/proj
 * @return {Object} set of matrices with the corresponding row and column keys
 */


var getMatrixModel = function getMatrixModel(dataModel, facetsAndProjections, valueCellCreator) {
  var rowDataModels = [];
  var rowKeys = [];
  var columnKeys = [];
  var allColumnProjections = [];
  var matrix = [];
  var facetInfo = [];
  var fieldInfo = Object.assign({}, facetsAndProjections);
  var rowFacets = fieldInfo.rowFacets,
      colFacets = fieldInfo.colFacets,
      colProjections = fieldInfo.colProjections;
  colProjections.forEach(function (colProj) {
    allColumnProjections.push.apply(allColumnProjections, _toConsumableArray(colProj));
  });
  fieldInfo.allColumnProjections = allColumnProjections; // Performing row selection and projection

  if (rowFacets.length > 0) {
    // Get unique values for the root level of facet
    var field = rowFacets[0].toString();
    var firstLevelRowKeys = Object(_group_utils__WEBPACK_IMPORTED_MODULE_1__["retriveDomainFromData"])(dataModel, field); // Get unique keys in the form of an array of arrays for each row

    uniqueKeyGenerator(rowKeys, {
      facets: rowFacets,
      dataModel: dataModel,
      uniqueValues: firstLevelRowKeys
    }); // Apply selection -> projection -> row datamodels

    rowKeys.forEach(function (val) {
      var _rowDataModels;

      // Create faceted datamodel
      var _getFieldNames5 = getFieldNames(rowFacets),
          _getFieldNames6 = _slicedToArray(_getFieldNames5, 1),
          rowFacetFieldNames = _getFieldNames6[0];

      var selectedDataModel = createSelectedDataModel(dataModel, rowFacetFieldNames, val); // Project the datamodel based on the number of projections (based on last levels)

      var newProjectedDataModels = projectRows(selectedDataModel, fieldInfo);

      (_rowDataModels = rowDataModels).push.apply(_rowDataModels, _toConsumableArray(newProjectedDataModels));

      newProjectedDataModels.forEach(function () {
        facetInfo.push([rowFacets, val]);
      });
    });
  } else {
    var _rowDataModels2;

    // No row facets, hence only row projection
    (_rowDataModels2 = rowDataModels).push.apply(_rowDataModels2, _toConsumableArray(projectRows(dataModel, fieldInfo)));
  } // Maintaining set of row datamodels for column resolution


  rowDataModels = rowDataModels.length > 0 ? rowDataModels : [[]]; // Performing column selection and projection

  if (colFacets.length > 0) {
    var colFacetNames = colFacets.map(function (d) {
      return "".concat(d);
    }); // Get unique values for the root level of facet

    var _field = colFacetNames[0];
    var firstLevelColumnKeys = Object(_group_utils__WEBPACK_IMPORTED_MODULE_1__["retriveDomainFromData"])(dataModel, _field); // Get unique keys to create faceted datamodels: this time for columns

    uniqueKeyGenerator(columnKeys, {
      facets: colFacetNames,
      dataModel: dataModel,
      uniqueValues: firstLevelColumnKeys
    }); // For each row in the datamodel, apply selection -> projection -> push the projection to matri

    rowDataModels.forEach(function (dme, rIndex) {
      facetInfo[rIndex] = facetInfo[rIndex] || [[], []];
      columnKeys.forEach(function (val, cIndex) {
        matrix[rIndex] = matrix[rIndex] || []; // If datamodel is not present in current row, choose parent datamodel

        var datamodel = dme instanceof muze_utils__WEBPACK_IMPORTED_MODULE_0__["DataModel"] ? dme : dataModel; // Selection is made on the datamodel for the current row

        var selectedDataModel = createSelectedDataModel(datamodel, colFacetNames, val);
        var context = {
          matrix: matrix,
          datamodel: selectedDataModel,
          facetInfo: {
            rowFacets: facetInfo[rIndex],
            colFacets: [colFacets, val],
            rowIndex: rIndex,
            columnIndex: cIndex
          },
          fieldInfo: fieldInfo
        };
        pushToMatrix(context, valueCellCreator);
      });
    });
  } else {
    // No column facets, hence only row projection
    rowDataModels.forEach(function (dme, rIndex) {
      facetInfo[rIndex] = facetInfo[rIndex] || [[], []];
      var context = {
        matrix: matrix,
        datamodel: dme || dataModel,
        facetInfo: {
          rowFacets: facetInfo[rIndex],
          colFacets: [[], []],
          rowIndex: rIndex,
          columnIndex: 0
        },
        fieldInfo: fieldInfo
      };
      pushToMatrix(context, valueCellCreator);
    });
  } // Getting column keys


  var transposedColKeys = columnKeys.length > 0 ? columnKeys[0].map(function (col, i) {
    return columnKeys.map(function (row) {
      return row[i];
    });
  }) : columnKeys;
  return {
    matrix: matrix,
    rowKeys: rowKeys,
    columnKeys: transposedColKeys
  };
};

/***/ }),

/***/ "./packages/visual-group/src/group-helper/matrix-resolver.js":
/*!*******************************************************************!*\
  !*** ./packages/visual-group/src/group-helper/matrix-resolver.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MatrixResolver; });
/* harmony import */ var _chartshq_visual_unit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/visual-unit */ "./packages/visual-unit/src/index.js");
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _group_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./group-utils */ "./packages/visual-group/src/group-helper/group-utils.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/constants */ "./packages/visual-group/src/enums/constants.js");
/* harmony import */ var _cell_creator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cell-creator */ "./packages/visual-group/src/group-helper/cell-creator.js");
/* harmony import */ var _resolver_props__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./resolver-props */ "./packages/visual-group/src/group-helper/resolver-props.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }







/**
 * Resolves the matrices from configuration provided
 *
 * @export
 * @class MatrixResolver
 */

var MatrixResolver =
/*#__PURE__*/
function () {
  /**
   * Creates an instance of MatrixResolver.
   * @param {Object} dependencies needed to run the resolver
   * @memberof MatrixResolver
   */
  function MatrixResolver(dependencies) {
    _classCallCheck(this, MatrixResolver);

    this._registry = {};
    this._layerConfig = [];
    this._matrixLayers = [];
    this._dependencies = dependencies;
    this._rowMatrix = [];
    this._columnMatrix = [];
    this._valueMatrix = [];
    this._facets = {
      rowFacets: [],
      colFacets: []
    };
    this._projections = {
      rowProjections: [],
      colProjections: []
    };
    this._datamodelTransform = {};
    this._units = [];
    this._cacheMaps = {};
    this._axes = {
      x: {},
      y: {},
      color: [],
      size: [],
      shape: []
    };
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["generateGetterSetters"])(this, _resolver_props__WEBPACK_IMPORTED_MODULE_5__["RESOLVER_PROPS"]);
    this.cacheMaps(Object(_group_utils__WEBPACK_IMPORTED_MODULE_2__["initializeCacheMaps"])());
  }
  /**
   * Set:  Registers placeholders, Get: return {Object} those placeholders
   *
   * @param {Object} placeholders cells that will construct the group
   * @return {Object} Either current instance or the set of placeholders
   * @memberof MatrixResolver
   */


  _createClass(MatrixResolver, [{
    key: "registry",
    value: function registry() {
      var _this = this;

      if (arguments.length) {
        Object.entries(arguments.length <= 0 ? undefined : arguments[0]).forEach(function (val) {
          _this._registry[val[0]] = val[1];
        });
        return this;
      }

      return this._registry;
    }
    /**
     * Used to set the layer config from outside or get current layer info
     *
     * @param {Object} type configuration of layer provided externally
     * @return {Object} either the layer or current instance
     * @memberof MatrixResolver
     */

  }, {
    key: "cacheMaps",
    value: function cacheMaps() {
      var _this2 = this;

      for (var _len = arguments.length, maps = new Array(_len), _key = 0; _key < _len; _key++) {
        maps[_key] = arguments[_key];
      }

      if (maps.length) {
        [_enums_constants__WEBPACK_IMPORTED_MODULE_3__["CELL"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["X_AXES"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["Y_AXES"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ENTRY_CELLS"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["EXIT_CELLS"]].forEach(function (e) {
          _this2._cacheMaps["".concat(e, "Map")] = maps[0]["".concat(e, "Map")] || _this2._cacheMaps["".concat(e, "Map")];
        });
        return this;
      }

      return this._cacheMaps;
    }
    /**
     * Used to set the layer config from outside or get current layer info
     *
     * @param {Object} type configuration of layer provided externally
     * @return {Object} either the layer or current instance
     * @memberof MatrixResolver
     */

  }, {
    key: "axes",
    value: function axes() {
      if (arguments.length) {
        this._axes = Object.assign({}, this._axes, arguments.length <= 0 ? undefined : arguments[0]);
        return this;
      }

      return this._axes;
    }
    /**
     *
     *
     * @param {*} facets
     *
     * @memberof MatrixResolver
     */

  }, {
    key: "facets",
    value: function facets() {
      var _this3 = this;

      if (arguments.length) {
        Object.entries(arguments.length <= 0 ? undefined : arguments[0]).forEach(function (e) {
          _this3._facets[e[0]] = e[1];
        });
        return this;
      }

      return this._facets;
    }
    /**
     *
     *
     * @param {*} projections
     *
     * @memberof MatrixResolver
     */

  }, {
    key: "projections",
    value: function projections() {
      var _this4 = this;

      if (arguments.length) {
        Object.entries(arguments.length <= 0 ? undefined : arguments[0]).forEach(function (e) {
          _this4._projections[e[0]] = e[1];
        });
        return this;
      }

      return this._projections;
    }
    /**
     *
     *
     * @param {*} config
     * @param {*} layerConfig
     *
     * @memberof MatrixResolver
     */

  }, {
    key: "optionalProjections",
    value: function optionalProjections(config, layerConfig) {
      var otherEncodings = {};
      var optionalProjections = [];
      var otherEncodingTypes = [_enums_constants__WEBPACK_IMPORTED_MODULE_3__["SIZE"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["COLOR"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["SHAPE"]];
      otherEncodingTypes.forEach(function (type) {
        if (config[type] && config[type].field) {
          var enc = config[type];
          otherEncodings[type] = enc.field;
          optionalProjections.push(enc.field);
        }
      });

      if (config[_enums_constants__WEBPACK_IMPORTED_MODULE_3__["DETAIL"]]) {
        optionalProjections.push.apply(optionalProjections, _toConsumableArray(config.detail));
      }

      if (layerConfig.length) {
        layerConfig.forEach(function (layer) {
          if (layer.encoding) {
            Object.values(layer.encoding).forEach(function (enc) {
              if (enc && optionalProjections.indexOf(enc.field) === -1) {
                optionalProjections.push(enc.field ? enc.field : enc);
              }
            });
          }
        });
      }

      this.projections({
        optionalProjections: optionalProjections
      });
      return otherEncodings;
    }
    /**
     * return the normalized set of rows and facets and projections
     *
     * @param {Object} rows parameters needed to set horizontal axis consisiting of rows
     * @return {Object} facets, projections and normalized rows
     * @memberof MatrixResolver
     */

  }, {
    key: "horizontalAxis",
    value: function horizontalAxis(rows, encoder) {
      if (rows) {
        this._horizontalAxis = Object(_group_utils__WEBPACK_IMPORTED_MODULE_2__["setFacetsAndProjections"])(this, {
          type: _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ROW"],
          fields: rows
        }, encoder);
        return this;
      }

      return this._horizontalAxis;
    }
    /**
     * return the normalized set of columns and facets and projections
     *
     * @param {Object} columns parameters needed to set vertical axis consisiting of columns
     * @return {Object} facets, projections and normalized columns
     * @memberof MatrixResolver
     */

  }, {
    key: "verticalAxis",
    value: function verticalAxis(columns, encoder) {
      if (columns) {
        this._verticalAxis = Object(_group_utils__WEBPACK_IMPORTED_MODULE_2__["setFacetsAndProjections"])(this, {
          type: _enums_constants__WEBPACK_IMPORTED_MODULE_3__["COL"],
          fields: columns
        }, encoder);
        return this;
      }

      return this._verticalAxis;
    }
    /**
     * Gets the class definition of a particular cell type(if the particular type has been extended, that particular
     * definition is returned)
     *
     * @param {Object} cell cell whose class definition is to be retrieved
     * @return {Object} cell definition
     * @memberof MatrixResolver
     */

  }, {
    key: "getCellDef",
    value: function getCellDef(cell) {
      var registry = this.registry();
      Object.values(registry).forEach(function (e) {
        if (e.prototype instanceof cell) {
          cell = e;
        }
      });
      return cell;
    }
    /**
     * return a visual cell creator along with its axis information to be injected to the datamodel creation
     * function
     *
     * @param {Object} GeomCell Type of cell to be created
     * @return {Object} Created cell
     * @memberof MatrixResolver
     */

  }, {
    key: "valueCellsCreator",
    value: function valueCellsCreator(context) {
      // reset matrix layers
      this.matrixLayers([]);
      return function (datamodel, fieldInfo, facets) {
        return Object(_cell_creator__WEBPACK_IMPORTED_MODULE_4__["createValueCells"])(context, datamodel, fieldInfo, facets);
      };
    }
    /**
     * Callback to be applied on each cell of a matrix of a particular type
     *
     * @param {string} matrixType type of matrix on which callback is to be applied
     * @param {Function} callback function to be applied to each cell
     * @memberof MatrixResolver
     */

  }, {
    key: "forEach",
    value: function forEach(matrixType, callback) {
      this[matrixType]().forEach(function (row, rIndex) {
        row.forEach(function (col, cIndex) {
          callback(rIndex, cIndex, col);
        });
      });
    }
    /**
     *
     *
     *
     * @memberof MatrixResolver
     */

  }, {
    key: "getAllFields",
    value: function getAllFields() {
      var retObj = this.projections();
      Object.entries(this.facets()).forEach(function (e) {
        retObj[e[0]] = e[1];
      });
      return retObj;
    }
    /**
     *
     *
     * @memberof MatrixResolver
     */

  }, {
    key: "resetSimpleAxes",
    value: function resetSimpleAxes() {
      return this.axes({
        x: new Set(),
        y: new Set()
      });
    }
    /**
     *
     *
     * @param {*} componentRegistry
     * @param {*} config
     * @memberof MatrixResolver
     */

  }, {
    key: "createUnits",
    value: function createUnits(componentRegistry, config) {
      var _this5 = this;

      var globalConfig = config.globalConfig,
          alias = config.alias;
      var layerRegistry = componentRegistry.layerRegistry,
          sideEffectRegistry = componentRegistry.sideEffectRegistry;

      var _this$dependencies = this.dependencies(),
          smartLabel = _this$dependencies.smartlabel,
          lifeCycleManager = _this$dependencies.lifeCycleManager; // Provide the source for the matrix


      var units = [[]]; // Setting unit configuration

      var unitConfig = Object(_group_utils__WEBPACK_IMPORTED_MODULE_2__["extractUnitConfig"])(globalConfig || {});
      var globalState = _chartshq_visual_unit__WEBPACK_IMPORTED_MODULE_0__["VisualUnit"].getState()[0];
      var globalStates = {};
      var store = this.store();
      this.forEach(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["VALUE_MATRIX"], function (i, j, el) {
        var unit = el.source();

        if (!unit) {
          var namespace = "".concat(i).concat(j);
          unit = _chartshq_visual_unit__WEBPACK_IMPORTED_MODULE_0__["VisualUnit"].create({
            layerRegistry: layerRegistry,
            sideEffectRegistry: sideEffectRegistry
          }, {
            smartLabel: smartLabel,
            lifeCycleManager: lifeCycleManager
          });
          globalStates[namespace] = null;
          unit.metaInf({
            rowIndex: i,
            colIndex: j,
            namespace: namespace
          });
          unit.store(store);
          el.source(unit);
        }

        !units[i] && (units[i] = []);
        units[i][j] = unit;
        unit.parentAlias(alias);
        unit.valueParser(_this5.valueParser());
        el.config(unitConfig);
      });

      for (var key in globalState) {
        store.append("".concat(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].UNIT_GLOBAL_NAMESPACE, ".").concat(key), globalStates);
      }

      lifeCycleManager.notify({
        client: units,
        action: _enums_constants__WEBPACK_IMPORTED_MODULE_3__["INITIALIZED"],
        formalName: _enums_constants__WEBPACK_IMPORTED_MODULE_3__["UNIT"]
      });
      return this.units(units);
    }
    /**
     *
     *
     * @param {*} config
     * @memberof MatrixResolver
     */

  }, {
    key: "setDomains",
    value: function setDomains(config, datamodel, encoders) {
      var color = config.color,
          shape = config.shape,
          size = config.size,
          globalConfig = config.globalConfig;
      var groupBy = globalConfig.autoGroupBy;

      var _this$getAllFields = this.getAllFields(),
          rowFacets = _this$getAllFields.rowFacets,
          colFacets = _this$getAllFields.colFacets;

      var encoding = {
        color: color,
        shape: shape,
        size: size
      };
      var facetFields = [].concat(_toConsumableArray(rowFacets.map(function (e) {
        return e.toString();
      })), _toConsumableArray(colFacets.map(function (e) {
        return e.toString();
      })));
      encoders.retinalEncoder.layers(encoders.planarEncoder.layers());
      var retContext = {
        domains: encoders.retinalEncoder.getFieldsDomain(datamodel, encoding, facetFields, groupBy),
        axes: this.axes(),
        encoding: encoding
      };
      encoders.retinalEncoder.setCommonDomain(retContext);
      return this;
    }
  }, {
    key: "resetFacetsAndProjections",
    value: function resetFacetsAndProjections() {
      this._facets = {};
      this._projections = {};
      return this;
    }
    /**
     *
     *
     *
     * @memberof MatrixResolver
     */

  }, {
    key: "getRetinalAxes",
    value: function getRetinalAxes() {
      var _this$axes = this.axes(),
          color = _this$axes.color,
          shape = _this$axes.shape,
          size = _this$axes.size;

      return {
        color: _toConsumableArray(color),
        shape: _toConsumableArray(shape),
        size: _toConsumableArray(size)
      };
    }
    /**
     *
     *
     * @param {*} type
     *
     * @memberof MatrixResolver
     */

  }, {
    key: "getSimpleAxes",
    value: function getSimpleAxes(type) {
      return this.axes()["".concat(type)];
    }
    /**
     *
     *
     * @param {*} datamodel
     * @param {*} config
     * @memberof MatrixResolver
     */

  }, {
    key: "createRetinalAxes",
    value: function createRetinalAxes(fieldsConfig, config, encoders) {
      var _this6 = this;

      var layerConfig = this.layerConfig();
      this.optionalProjections(config, layerConfig);
      var retinalAxes = encoders.retinalEncoder.createAxis({
        fieldsConfig: fieldsConfig,
        config: config,
        axes: this.axes()
      });

      var _this$dependencies2 = this.dependencies(),
          lifeCycleManager = _this$dependencies2.lifeCycleManager;

      [_enums_constants__WEBPACK_IMPORTED_MODULE_3__["COLOR"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["SHAPE"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["SIZE"]].forEach(function (e) {
        _this6.axes()[e] = retinalAxes[e];
      });
      lifeCycleManager.notify({
        client: this.axes(),
        action: _enums_constants__WEBPACK_IMPORTED_MODULE_3__["INITIALIZED"],
        formalName: _enums_constants__WEBPACK_IMPORTED_MODULE_3__["AXIS"]
      });
      lifeCycleManager.notify({
        client: this.units(),
        action: _enums_constants__WEBPACK_IMPORTED_MODULE_3__["BEFORE_UPDATE"],
        formalName: _enums_constants__WEBPACK_IMPORTED_MODULE_3__["UNIT"]
      });
      var units = [];
      var matrixLayers = this.matrixLayers();
      this.forEach(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["VALUE_MATRIX"], function (i, j, el) {
        el.axes(retinalAxes);
        el.source() && el.source().retinalFields(config);
        el.layerDef(encoders.retinalEncoder.getLayerConfig(config, matrixLayers[i][j]));
        el.updateModel();
        units.push(el.source());
      });
      lifeCycleManager.notify({
        client: units,
        action: _enums_constants__WEBPACK_IMPORTED_MODULE_3__["UPDATED"],
        formalName: _enums_constants__WEBPACK_IMPORTED_MODULE_3__["UNIT"]
      });
      return this;
    }
    /**
     *
     *
     * @param {*} placeholders
     * @param {*} fieldNames
     *
     * @memberof MatrixResolver
     */

  }, {
    key: "createHeaders",
    value: function createHeaders(placeholders, fieldNames, config) {
      var bottomLeft = [];
      var bottomRight = [];
      var rows = placeholders.rows,
          columns = placeholders.columns;

      var _this$dependencies3 = this.dependencies(),
          labelManager = _this$dependencies3.smartlabel,
          lifeCycleManager = _this$dependencies3.lifeCycleManager;

      var showHeaders = config.showHeaders,
          classPrefix = config.classPrefix;
      var TextCell = this.getCellDef(this.registry().TextCell);
      var BlankCell = this.getCellDef(this.registry().BlankCell);

      var _rows = _slicedToArray(rows, 2),
          leftRows = _rows[0],
          rightRows = _rows[1];

      var _columns = _slicedToArray(columns, 2),
          topCols = _columns[0],
          bottomCols = _columns[1];

      var rowHeaders = fieldNames.rows;

      var blankCellCreator = function blankCellCreator(cell) {
        return new BlankCell().config({
          show: cell.config().show
        });
      }; // Headers and footers are created based on the rows. Thereafter, using the column information
      // they are tabularized into the current structure


      var headers = {
        left: Object(_group_utils__WEBPACK_IMPORTED_MODULE_2__["headerCreator"])(leftRows, rowHeaders[0], showHeaders ? TextCell : BlankCell, {
          classPrefix: classPrefix,
          labelManager: labelManager
        }),
        right: Object(_group_utils__WEBPACK_IMPORTED_MODULE_2__["headerCreator"])(rightRows, rowHeaders[1], showHeaders ? TextCell : BlankCell, {
          classPrefix: classPrefix,
          labelManager: labelManager
        })
      };
      var footers = {
        left: leftRows.length > 0 ? leftRows[0].map(blankCellCreator) : [],
        right: rightRows.length > 0 ? rightRows[0].map(blankCellCreator) : []
      };

      var _map = [_enums_constants__WEBPACK_IMPORTED_MODULE_3__["LEFT"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["RIGHT"]].map(function (type) {
        return topCols.map(function (col, i) {
          if (i === topCols.length - 1) {
            return headers[type];
          }

          return footers[type];
        });
      }),
          _map2 = _slicedToArray(_map, 2),
          topLeft = _map2[0],
          topRight = _map2[1]; // Creating only bottom matrices if there is no information on the top


      if (topCols.length === 0) {
        var _map3 = [_enums_constants__WEBPACK_IMPORTED_MODULE_3__["LEFT"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["RIGHT"]].map(function (type) {
          return bottomCols.map(function (col, i) {
            if (i === 0) {
              return headers[type];
            }

            return footers[type];
          });
        });

        var _map4 = _slicedToArray(_map3, 2);

        bottomLeft = _map4[0];
        bottomRight = _map4[1];
      } else {
        bottomLeft = bottomCols.map(function () {
          return leftRows.length > 0 ? leftRows[0].map(blankCellCreator) : [];
        });
        bottomRight = bottomCols.map(function () {
          return rightRows.length > 0 ? rightRows[0].map(blankCellCreator) : [];
        });
      }

      lifeCycleManager.notify({
        client: [topLeft, topRight, bottomLeft, bottomRight],
        action: _enums_constants__WEBPACK_IMPORTED_MODULE_3__["INITIALIZED"],
        formalName: _enums_constants__WEBPACK_IMPORTED_MODULE_3__["FACET_HEADERS"]
      });
      return {
        topLeft: topLeft,
        topRight: topRight,
        bottomLeft: bottomLeft,
        bottomRight: bottomRight
      };
    }
    /**
     *
     *
     * @param {*} datamodel
     * @param {*} config
     * @param {*} componentRegistry
     * @param {*} encoders
     *
     * @memberof MatrixResolver
     */

  }, {
    key: "getMatrices",
    value: function getMatrices(datamodel, config, componentRegistry, encoders) {
      var context = {
        datamodel: datamodel,
        componentRegistry: componentRegistry,
        encoders: encoders,
        resolver: this
      };
      return Object(_cell_creator__WEBPACK_IMPORTED_MODULE_4__["computeMatrices"])(context, config);
    }
  }, {
    key: "store",
    value: function store() {
      if (arguments.length) {
        this._store = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._store;
    }
  }]);

  return MatrixResolver;
}();



/***/ }),

/***/ "./packages/visual-group/src/group-helper/resolver-props.js":
/*!******************************************************************!*\
  !*** ./packages/visual-group/src/group-helper/resolver-props.js ***!
  \******************************************************************/
/*! exports provided: RESOLVER_PROPS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RESOLVER_PROPS", function() { return RESOLVER_PROPS; });
var RESOLVER_PROPS = {
  dependencies: {},
  units: {},
  datamodelTransform: {},
  layerConfig: {},
  matrixLayers: {},
  colCells: {},
  rowCells: {},
  rowMatrix: {},
  columnMatrix: {},
  valueMatrix: {},
  encoder: {},
  valueParser: {}
};

/***/ }),

/***/ "./packages/visual-group/src/index.js":
/*!********************************************!*\
  !*** ./packages/visual-group/src/index.js ***!
  \********************************************/
/*! exports provided: VisualGroup, SimpleGroup, ComposedVars, SimpleVariable, ValueMatrix */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _visual_group__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./visual-group */ "./packages/visual-group/src/visual-group/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VisualGroup", function() { return _visual_group__WEBPACK_IMPORTED_MODULE_0__["VisualGroup"]; });

/* harmony import */ var _simple_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./simple-group */ "./packages/visual-group/src/simple-group/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleGroup", function() { return _simple_group__WEBPACK_IMPORTED_MODULE_1__["SimpleGroup"]; });

/* harmony import */ var _variable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./variable */ "./packages/visual-group/src/variable/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ComposedVars", function() { return _variable__WEBPACK_IMPORTED_MODULE_2__["ComposedVars"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleVariable", function() { return _variable__WEBPACK_IMPORTED_MODULE_2__["SimpleVariable"]; });

/* harmony import */ var _visual_group_value_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./visual-group/value-matrix */ "./packages/visual-group/src/visual-group/value-matrix.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ValueMatrix", function() { return _visual_group_value_matrix__WEBPACK_IMPORTED_MODULE_3__["default"]; });






/***/ }),

/***/ "./packages/visual-group/src/simple-group/index.js":
/*!*********************************************************!*\
  !*** ./packages/visual-group/src/simple-group/index.js ***!
  \*********************************************************/
/*! exports provided: SimpleGroup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _simple_group__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./simple-group */ "./packages/visual-group/src/simple-group/simple-group.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleGroup", function() { return _simple_group__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/visual-group/src/simple-group/simple-group.js":
/*!****************************************************************!*\
  !*** ./packages/visual-group/src/simple-group/simple-group.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }


/**
 * Interfaces for VisualGroup. Any new VisualGroup has to implement this class.
 * @class  SimpleGroup
 */

var SimpleGroup =
/*#__PURE__*/
function () {
  function SimpleGroup() {
    _classCallCheck(this, SimpleGroup);
  }

  _createClass(SimpleGroup, [{
    key: "data",

    /**
     * This method is used to set or get the DataModel instance.
     *
     * @param {DataModel | undefined} dataModel Instance of datamodel.
      * @memberof  SimpleGroup
     */
    value: function data() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * This method is used to set or get the group specific configuration
     * properties
     *
     * @param {Object | undefined} configObj The input configuration.
     *                                or instance of visual group.
     * @memberof  SimpleGroup
     */

  }, {
    key: "config",
    value: function config() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * This method is used to return a serialized representation of the
     * instance's properties.
     *
     * @memberof  SimpleGroup
     */

  }, {
    key: "serialize",
    value: function serialize() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * This method is used to get or set the measurement object which houses
     * layout properties like width and height.
     *
     * @param {Object  | undefined} mObj The measurement properties.
     * @memberof  SimpleGroup
     */

  }, {
    key: "measurement",
    value: function measurement() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }]);

  return SimpleGroup;
}();

/* harmony default export */ __webpack_exports__["default"] = (SimpleGroup);

/***/ }),

/***/ "./packages/visual-group/src/variable/composed-vars.js":
/*!*************************************************************!*\
  !*** ./packages/visual-group/src/variable/composed-vars.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _variable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./variable */ "./packages/visual-group/src/variable/variable.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }


/**
 * This is a wrapper on top of multiple variables which are of same type but they are shown in the same axis.This is
 * required in case of range plots or ohlc plots where one plot is mapped to multiple measure fields. At that time,
 * we need to create a composed variable from multiple variables. This class just wraps them into one variable instance
 * and provides methods to get the type and other common functionalities which can be performed on a simple variable
 * instance.
 *
 * @public
 * @class ComposeVars
 */

var ComposedVars =
/*#__PURE__*/
function (_Variable) {
  _inherits(ComposedVars, _Variable);

  /**
   * Creates an instance of ComposeVars.
   *
   * @param {Array} texts Array of field names
   */
  function ComposedVars() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, ComposedVars);

    for (var _len = arguments.length, texts = new Array(_len), _key = 0; _key < _len; _key++) {
      texts[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ComposedVars)).call.apply(_getPrototypeOf2, [this].concat(texts)));

    _this.vars(texts);

    return _this;
  }

  _createClass(ComposedVars, [{
    key: "vars",
    value: function vars() {
      if (arguments.length) {
        this._vars = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._vars;
    }
  }, {
    key: "data",
    value: function data() {
      for (var _len2 = arguments.length, dm = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        dm[_key2] = arguments[_key2];
      }

      if (dm.length) {
        this.vars().forEach(function (d) {
          return d.data(dm[0]);
        });
        return this;
      }

      return this._data;
    }
    /**
     * Get all the field names from composed variable instance.
     *
     * @public
     * @return {Array} Array of field names.
     */

  }, {
    key: "getMembers",
    value: function getMembers() {
      var vars = this.vars();
      return vars.map(function (member) {
        return member.getMembers()[0];
      });
    }
    /**
     * Type of field associated with this composed variable.
     *
     * @return {string} Type of variable (Measure/Dimension).
     */

  }, {
    key: "type",
    value: function type() {
      return this.vars()[0].type();
    }
  }, {
    key: "toString",
    value: function toString() {
      return this.vars().map(function (d) {
        return d.toString();
      }).join(',');
    }
    /**
     * Returns the number formatter function of the variable.
     *
     * @return {Function} Number formatter function of the variable.
     */

  }, {
    key: "numberFormat",
    value: function numberFormat() {
      return this.vars()[0].numberFormat();
    }
  }, {
    key: "format",
    value: function format(values) {
      return this.vars()[0].format(values);
    }
    /**
     * Returns the subtype of the fields associated with this variable instance.
     *
     * @public
     * @return {string} Subtype of the variable.
     */

  }, {
    key: "subtype",
    value: function subtype() {
      return this.vars()[0].subtype();
    }
    /**
     * Returns the consecutive minimum difference of the field values.
     *
     * @public
     * @return {number} Minimum consecutive difference.
     */

  }, {
    key: "getMinDiff",
    value: function getMinDiff() {
      return this.vars()[0].getMinDiff();
    }
  }]);

  return ComposedVars;
}(_variable__WEBPACK_IMPORTED_MODULE_0__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (ComposedVars);

/***/ }),

/***/ "./packages/visual-group/src/variable/index.js":
/*!*****************************************************!*\
  !*** ./packages/visual-group/src/variable/index.js ***!
  \*****************************************************/
/*! exports provided: ComposedVars, SimpleVariable, Variable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _composed_vars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./composed-vars */ "./packages/visual-group/src/variable/composed-vars.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ComposedVars", function() { return _composed_vars__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _simple_var__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./simple-var */ "./packages/visual-group/src/variable/simple-var.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleVariable", function() { return _simple_var__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _variable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./variable */ "./packages/visual-group/src/variable/variable.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Variable", function() { return _variable__WEBPACK_IMPORTED_MODULE_2__["default"]; });





/***/ }),

/***/ "./packages/visual-group/src/variable/simple-var.js":
/*!**********************************************************!*\
  !*** ./packages/visual-group/src/variable/simple-var.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SimpleVariable; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _variable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./variable */ "./packages/visual-group/src/variable/variable.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



/**
 * This is a wrapper on top of fields passed in rows or columns in canvas. This is used to get the type of field or
 * get min difference from the field values.
 *
 * @public
 * @class SimpleVariable
 */

var SimpleVariable =
/*#__PURE__*/
function (_Variable) {
  _inherits(SimpleVariable, _Variable);

  /**
   * Creates an instance of simple variable instance.
   *
   * @param {string} text Field name.
   */
  function SimpleVariable(text) {
    var _this;

    _classCallCheck(this, SimpleVariable);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(SimpleVariable).call(this));

    _this.oneVar(text);

    return _this;
  }
  /**
   * Gets the field name associated with this variable instance.
   *
   * @public
   * @return {string} Name of the field.
   */


  _createClass(SimpleVariable, [{
    key: "oneVar",
    value: function oneVar() {
      if (arguments.length) {
        this._oneVar = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._oneVar;
    }
  }, {
    key: "data",
    value: function data() {
      if (arguments.length) {
        this._data = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._data;
    }
  }, {
    key: "toString",
    value: function toString() {
      return this.oneVar();
    }
    /**
     * Gets the number formatter function of this variable.
     *
     * @public
     * @return {Function} Number formatter function.
     */

  }, {
    key: "numberFormat",
    value: function numberFormat() {
      if (this.type() === 'measure') {
        var formatter = this.data().getFieldspace().getMeasure()[this.oneVar()];
        return formatter.numberFormat();
      }

      return function (val) {
        return val;
      };
    }
  }, {
    key: "format",
    value: function format(values) {
      if (values && this.subtype() === 'temporal') {
        var formatter = this.data().getFieldspace().getDimension()[this.oneVar()].schema().format;
        var dtFormat = new muze_utils__WEBPACK_IMPORTED_MODULE_0__["DateTimeFormatter"](formatter);
        values = values.map(function (e) {
          return dtFormat.getNativeDate(e);
        });
      }

      return values;
    }
    /**
     * Return the field names associated with this variable instance.
     *
     * @public
     * @return {Array} Array of fields.
     */

  }, {
    key: "getMembers",
    value: function getMembers() {
      return [this.oneVar()];
    }
    /**
     * Returns the type of the variable. Whether it is measure or dimension.
     *
     * @public
     * @return {string} Type of variable.
     */

  }, {
    key: "type",
    value: function type() {
      var fieldDef = this.data().getFieldsConfig()[this.oneVar()].def;
      return fieldDef.type;
    }
    /**
     * Returns the subtype of the variable. Subtype can be categorical or temporal. If no subtype is found, then it
     * returns the type of the variable.
     *
     * @public
     * @return {string} Subtype of variable.
     */

  }, {
    key: "subtype",
    value: function subtype() {
      var fieldDef = this.data().getFieldsConfig()[this.oneVar()].def;
      return fieldDef.subtype || fieldDef.type;
    }
    /**
     * Returns the minimum consecutive difference between the data values of this variable.
     *
     * @return {number} Minimum consecutive difference.
     */

  }, {
    key: "getMinDiff",
    value: function getMinDiff() {
      var fieldSpace = this.data().getFieldspace();
      return fieldSpace.fieldsObj()[this.oneVar()].minimumConsecutiveDifference();
    }
    /**
     * Returns true if two variable instances are same.If both variable has the same field names, they are equal.
     *
     * @return {Boolean} Whether two variable instances are same.
     */

  }, {
    key: "equals",
    value: function equals(varInst) {
      return this.oneVar() === varInst.oneVar();
    }
  }]);

  return SimpleVariable;
}(_variable__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./packages/visual-group/src/variable/variable.js":
/*!********************************************************!*\
  !*** ./packages/visual-group/src/variable/variable.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Variable; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }


/**
 *
 *
 * @export
 * @class Variable
 */

var Variable =
/*#__PURE__*/
function () {
  function Variable() {
    _classCallCheck(this, Variable);
  }

  _createClass(Variable, [{
    key: "type",

    /**
     *
     *
     * @memberof Variable
     */
    value: function type() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     *
     *
     * @memberof Variable
     */

  }, {
    key: "toString",
    value: function toString() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }]);

  return Variable;
}();



/***/ }),

/***/ "./packages/visual-group/src/visual-group/change-listener.js":
/*!*******************************************************************!*\
  !*** ./packages/visual-group/src/visual-group/change-listener.js ***!
  \*******************************************************************/
/*! exports provided: setupChangeListeners, registerDomainChangeListener, unsubscribeChangeListeners */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setupChangeListeners", function() { return setupChangeListeners; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerDomainChangeListener", function() { return registerDomainChangeListener; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unsubscribeChangeListeners", function() { return unsubscribeChangeListeners; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");

var setupChangeListeners = function setupChangeListeners(context) {
  var store = context.store();
  store.registerChangeListener(["".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].GROUP_GLOBAL_NAMESPACE, ".domain.x")], function () {
    var groupAxes = context.resolver().axes();
    groupAxes.x.forEach(function (axes) {
      return axes.forEach(function (axis) {
        axis.render();
      });
    });
  });
  store.registerChangeListener(["".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].GROUP_GLOBAL_NAMESPACE, ".domain.y")], function () {
    var groupAxes = context.resolver().axes();
    groupAxes.y.forEach(function (axes) {
      return axes.forEach(function (axis) {
        axis.render();
      });
    });
  });
};
var registerDomainChangeListener = function registerDomainChangeListener(context) {
  var store = context.store();
  store.registerChangeListener(["".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].UNIT_GLOBAL_NAMESPACE, ".domain")], function () {
    context.resolver().encoder().unionUnitDomains(context);
  }, false, {
    namespace: 'group',
    key: 'unionDomain'
  });
};
var unsubscribeChangeListeners = function unsubscribeChangeListeners(context) {
  context.store().unsubscribe({
    namespace: 'group',
    key: 'unionDomain'
  });
};

/***/ }),

/***/ "./packages/visual-group/src/visual-group/helper.js":
/*!**********************************************************!*\
  !*** ./packages/visual-group/src/visual-group/helper.js ***!
  \**********************************************************/
/*! exports provided: createUnitState, initializeGlobalState, createLayerState, setMatrixInstances, createMatrices */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createUnitState", function() { return createUnitState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initializeGlobalState", function() { return initializeGlobalState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createLayerState", function() { return createLayerState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setMatrixInstances", function() { return setMatrixInstances; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createMatrices", function() { return createMatrices; });
/* harmony import */ var _chartshq_visual_unit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/visual-unit */ "./packages/visual-unit/src/index.js");
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @chartshq/visual-layer */ "./packages/visual-layer/src/index.js");
/* harmony import */ var _group_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../group-helper */ "./packages/visual-group/src/group-helper/index.js");
/* harmony import */ var _change_listener__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./change-listener */ "./packages/visual-group/src/visual-group/change-listener.js");
/* harmony import */ var _value_matrix__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./value-matrix */ "./packages/visual-group/src/visual-group/value-matrix.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }







var createUnitState = function createUnitState(context) {
  var _VisualUnit$getState = _chartshq_visual_unit__WEBPACK_IMPORTED_MODULE_0__["VisualUnit"].getState(),
      _VisualUnit$getState2 = _slicedToArray(_VisualUnit$getState, 1),
      globalState = _VisualUnit$getState2[0];

  var store = context.store();
  store.append(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].UNIT_GLOBAL_NAMESPACE, globalState);
};
var initializeGlobalState = function initializeGlobalState(context) {
  var globalState = context.constructor.getState()[0];
  var store = context.store();
  store.append(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].GROUP_GLOBAL_NAMESPACE, globalState);
};
var createLayerState = function createLayerState(context) {
  var _BaseLayer$getState = _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_2__["BaseLayer"].getState(),
      _BaseLayer$getState2 = _slicedToArray(_BaseLayer$getState, 1),
      globalState = _BaseLayer$getState2[0];

  context.store().append(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].LAYER_GLOBAL_NAMESPACE, globalState);
};

var sanitizeRetinalConfig = function sanitizeRetinalConfig(retinalConf) {
  var conf = {};

  for (var key in retinalConf) {
    var confValue = retinalConf[key];

    if (typeof confValue === 'string' || !confValue) {
      conf[key] = {
        field: retinalConf[key]
      };
    } else {
      conf[key] = confValue;
    }
  }

  return conf;
};

var setMatrixInstances = function setMatrixInstances(context, placeholder) {
  var values = placeholder.values,
      rows = placeholder.rows,
      columns = placeholder.columns;
  values = values || [];
  rows = rows || [];
  columns = columns || [];
  context._composition.matrices = {
    value: new _value_matrix__WEBPACK_IMPORTED_MODULE_5__["default"](values),
    left: new _value_matrix__WEBPACK_IMPORTED_MODULE_5__["default"](rows[0]),
    right: new _value_matrix__WEBPACK_IMPORTED_MODULE_5__["default"](rows[1]),
    top: new _value_matrix__WEBPACK_IMPORTED_MODULE_5__["default"](columns[0]),
    bottom: new _value_matrix__WEBPACK_IMPORTED_MODULE_5__["default"](columns[1])
  };

  context._dependencies.throwback.commit(muze_utils__WEBPACK_IMPORTED_MODULE_1__["CommonProps"].MATRIX_CREATED, true);

  return context;
};
var createMatrices = function createMatrices(context) {
  var rows = context.rows();
  var columns = context.columns();
  var color = context.color();
  var datamodel = context.data();
  var size = context.size();
  var detail = context.detail();
  var layers = context.layers();
  var transform = context.transform();
  var config = context.config();
  var shape = context.shape(); // Get the resolver for the matrices

  var resolver = context.resolver();
  resolver.store(context.store());
  resolver.valueParser(context.valueParser()); // Prepare configuration for matrix preparation

  var matrixConfig = {
    selection: context.selection(),
    alias: context.alias(),
    globalConfig: config || {},
    rows: rows,
    columns: columns,
    detail: detail,
    layers: layers,
    transform: transform
  };
  Object(_change_listener__WEBPACK_IMPORTED_MODULE_4__["unsubscribeChangeListeners"])(context);
  var retinalConfig = sanitizeRetinalConfig({
    color: color,
    shape: shape,
    size: size
  });
  matrixConfig = Object.assign(matrixConfig, retinalConfig); // Create the encoders for the group

  var encoders = Object(_group_helper__WEBPACK_IMPORTED_MODULE_3__["getEncoders"])(layers);
  resolver.encoder(encoders.planarEncoder); // Set the group type

  context.groupType(encoders.planarEncoder.constructor.type()); // Get sanitized fields as instances of the Vars Class

  var fields = encoders.planarEncoder.fieldSanitizer(datamodel, matrixConfig);
  encoders.planarEncoder.setAxisAndHeaders(config ? config.axisFrom : {}, fields); // Setting layers for the code

  layers && resolver.layerConfig(layers); // Set the row and column axes

  resolver.horizontalAxis(fields.rows, encoders).verticalAxis(fields.columns, encoders); // Getting the placeholders

  var placeholderInfo = resolver.getMatrices(datamodel, matrixConfig, context.registry(), encoders);
  context._groupedDataModel = placeholderInfo.dataModels.groupedModel; // Set the selection object

  context.selection(placeholderInfo.selection); // Create retinal axes

  resolver.createRetinalAxes(placeholderInfo.dataModels.parentModel.getFieldsConfig(), retinalConfig, encoders); // Domains are evaluated for each of the axes for commonality

  resolver.setDomains(matrixConfig, placeholderInfo.dataModels, encoders); // Create matrix instances

  setMatrixInstances(context, placeholderInfo); // Prepare corner matrices

  context.cornerMatrices(resolver.createHeaders(placeholderInfo, fields, config)); // Set placeholder information

  context.placeholderInfo(placeholderInfo);
  context._composition.axes = resolver.axes();
  context.metaData({
    border: Object(_group_helper__WEBPACK_IMPORTED_MODULE_3__["getBorders"])(placeholderInfo, encoders.planarEncoder)
  });
  resolver.encoder().unionUnitDomains(context);
  Object(_change_listener__WEBPACK_IMPORTED_MODULE_4__["registerDomainChangeListener"])(context);
  return context;
};

/***/ }),

/***/ "./packages/visual-group/src/visual-group/index.js":
/*!*********************************************************!*\
  !*** ./packages/visual-group/src/visual-group/index.js ***!
  \*********************************************************/
/*! exports provided: VisualGroup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _visual_group__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./visual-group */ "./packages/visual-group/src/visual-group/visual-group.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VisualGroup", function() { return _visual_group__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/visual-group/src/visual-group/local-options.js":
/*!*****************************************************************!*\
  !*** ./packages/visual-group/src/visual-group/local-options.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums/constants */ "./packages/visual-group/src/enums/constants.js");
var _CONFIG$ROWS$COLUMNS$;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


/**
 * This is the local options semantics based on which setters getters are created and reactivity is initiated.
 * This local object is only valid for Artboard.
 * Artboard merges global and local object both to the model
 *
 * Format
 *  PROPERTRY_NAME: {
 *      value: // default value of the property,
 *      meta: {
 *          typeCheck: // The setter value will be checked using this. If the value is function then the setter value
 *                     // is passed as args.
 *          typeExpected: // The output of typecheck action will be tested against this. Truthy value will set the
 *                       // value to the setter
 *          sanitizaiton: // Need for sanitization before type is checked
 *      }
 *  }
 *
 * @module
 */

/* harmony default export */ __webpack_exports__["default"] = (_CONFIG$ROWS$COLUMNS$ = {}, _defineProperty(_CONFIG$ROWS$COLUMNS$, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CONFIG"], {}), _defineProperty(_CONFIG$ROWS$COLUMNS$, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["ROWS"], {}), _defineProperty(_CONFIG$ROWS$COLUMNS$, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["COLUMNS"], {}), _defineProperty(_CONFIG$ROWS$COLUMNS$, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["COLOR"], {}), _defineProperty(_CONFIG$ROWS$COLUMNS$, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["SHAPE"], {}), _defineProperty(_CONFIG$ROWS$COLUMNS$, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["SIZE"], {}), _defineProperty(_CONFIG$ROWS$COLUMNS$, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["DETAIL"], {}), _defineProperty(_CONFIG$ROWS$COLUMNS$, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["LAYERS"], {}), _defineProperty(_CONFIG$ROWS$COLUMNS$, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["TRANSFORM"], {}), _CONFIG$ROWS$COLUMNS$);

/***/ }),

/***/ "./packages/visual-group/src/visual-group/props.js":
/*!*********************************************************!*\
  !*** ./packages/visual-group/src/visual-group/props.js ***!
  \*********************************************************/
/*! exports provided: PROPS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PROPS", function() { return PROPS; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums/constants */ "./packages/visual-group/src/enums/constants.js");
var _PROPS;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


var PROPS = (_PROPS = {
  alias: {},
  data: {},
  cornerMatrices: {
    defaultValue: {
      topLeft: [],
      topRight: [],
      bottomLeft: [],
      bottomRight: []
    }
  },
  groupType: {},
  metaData: {
    defaultValue: {
      border: {}
    }
  },
  placeholderInfo: {
    defaultValue: {}
  },
  resolver: {},
  valueParser: {
    defaultValue: function defaultValue(val) {
      return val;
    }
  },
  registry: {
    sanitization: function sanitization(context, value) {
      if (context.resolver) {
        context.resolver().registry(value.cellRegistry);
      }

      return value;
    }
  },
  selection: {}
}, _defineProperty(_PROPS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CONFIG"], {}), _defineProperty(_PROPS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["ROWS"], {}), _defineProperty(_PROPS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["COLUMNS"], {}), _defineProperty(_PROPS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["COLOR"], {}), _defineProperty(_PROPS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["SHAPE"], {}), _defineProperty(_PROPS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["SIZE"], {}), _defineProperty(_PROPS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["DETAIL"], {}), _defineProperty(_PROPS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["LAYERS"], {}), _defineProperty(_PROPS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["TRANSFORM"], {}), _PROPS);

/***/ }),

/***/ "./packages/visual-group/src/visual-group/value-matrix.js":
/*!****************************************************************!*\
  !*** ./packages/visual-group/src/visual-group/value-matrix.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

/**
 * This is a wrapper class over the matrix of cells which gets created in visual group. Visual Group creates left,
 * right, bottom and top and center matrices and wraps them using this class.
 *
 * @public
 * @class ValueMatrix
 */
var ValueMatrix =
/*#__PURE__*/
function () {
  /**
   * Creates an instance of ValueMatrix.
   *
   * @param {Array} matrixArr Matrix array.
   */
  function ValueMatrix(matrixArr) {
    _classCallCheck(this, ValueMatrix);

    var instancesById = {};
    this.matrix(matrixArr || []);
    this.filter(function () {
      return true;
    });
    this.each(function (el, rIdx, cIdx) {
      var cellValue = el.valueOf();

      if (cellValue && cellValue.id) {
        var id = cellValue.id();
        instancesById[id] = {
          instance: cellValue,
          rowIndex: rIdx,
          colIndex: cIdx
        };
      }
    });
    this.instancesById(instancesById);
  }

  _createClass(ValueMatrix, [{
    key: "instancesById",
    value: function instancesById() {
      if (arguments.length) {
        this._instancesById = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._instancesById;
    }
    /**
     * Returns the array of matrices contained in this instance.
     *
     * @public
     * @return {Array} Array of matrices.
     */

  }, {
    key: "matrix",
    value: function matrix() {
      if (arguments.length) {
        this._matrix = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._matrix;
    }
    /**
     * Sets a filter criteria. This filter criteria gets applied when each function is called.
     *
     * @public
     * @param {Function} fn Filter function.
     *
     * @return {ValueMatrix} Instance of value matrix.
     */

  }, {
    key: "filter",
    value: function filter() {
      if (arguments.length) {
        this._filterFn = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._filterFn;
    }
    /**
     * Returns the total width occupied by all the cells of the matrix.
     *
     * @return {Number} Width of the matrix.
     */

  }, {
    key: "width",
    value: function width() {
      var rowWidth = 0;
      this.matrix().forEach(function (row) {
        var currentRowWidth = 0;
        row.forEach(function (cell) {
          currentRowWidth += cell.getLogicalSpace().width;
        });
        rowWidth = Math.max(rowWidth, currentRowWidth);
      });
      return rowWidth;
    }
    /**
     * Returns the total width occupied by all the cells of the matrix.
     *
     * @return {Number} Width of the matrix.
     */

  }, {
    key: "height",
    value: function height() {
      var rowHeight = 0;
      this.matrix().forEach(function (row) {
        var currentRowHeight = 0;
        row.forEach(function (cell) {
          currentRowHeight = Math.max(currentRowHeight, cell.getLogicalSpace().height);
        });
        rowHeight += currentRowHeight;
      });
      return rowHeight;
    }
    /**
     * Iterates through the two dimensional matrix array and calls the given callback function with the cell instance,
     * row index, column index and the matrix array.
     *
     * @param {Function} fn Callback function which will get called for every cell.
     * @return {ValueMatrix} Instance of the value matrix.
     */

  }, {
    key: "each",
    value: function each(fn) {
      var matrix = this.matrix();
      var filterFn = this.filter();
      matrix.forEach(function (row, rIndex) {
        row.forEach(function (col, cIndex) {
          if (filterFn(col)) {
            fn(col, rIndex, cIndex, matrix);
          }
        });
      });
      return this;
    }
  }, {
    key: "findPlaceHolderById",
    value: function findPlaceHolderById(id) {
      return this.instancesById()[id];
    }
  }]);

  return ValueMatrix;
}();

/* harmony default export */ __webpack_exports__["default"] = (ValueMatrix);

/***/ }),

/***/ "./packages/visual-group/src/visual-group/visual-group.js":
/*!****************************************************************!*\
  !*** ./packages/visual-group/src/visual-group/visual-group.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _local_options__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./local-options */ "./packages/visual-group/src/visual-group/local-options.js");
/* harmony import */ var _simple_group__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../simple-group */ "./packages/visual-group/src/simple-group/index.js");
/* harmony import */ var _group_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../group-helper */ "./packages/visual-group/src/group-helper/index.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helper */ "./packages/visual-group/src/visual-group/helper.js");
/* harmony import */ var _change_listener__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./change-listener */ "./packages/visual-group/src/visual-group/change-listener.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./props */ "./packages/visual-group/src/visual-group/props.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../enums/constants */ "./packages/visual-group/src/enums/constants.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }









/**
 * VisualGroup is instantiated by canvas for creating {@link VisualUnit} and axes instances.It creates the
 * the matrix of visual units and axes. It also creates the layout instance which manages the allocation
 * of space of matrices.
 *
 * To get instance of visual group,
 * ```
 *      const visualGroup = canvas.composition().visualGroup;
 * ```
 * @public
 *
 * @class VisualGroup
 */

var VisualGroup =
/*#__PURE__*/
function (_SimpleGroup) {
  _inherits(VisualGroup, _SimpleGroup);

  /**
   * Creates an instance of VisualGroup. Requires dependencies and other registry options for placeholders
   * and layers that create individual units.
   *
   * @param {Object} registry Key value pair of compostions for the group
   * @param {Object} dependencies Dependencies needed to run the group
   * @memberof VisualGroup
   */
  function VisualGroup(registry, dependencies) {
    var _this;

    _classCallCheck(this, VisualGroup);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(VisualGroup).call(this));
    var componentSubRegistry = registry.componentSubRegistry;
    _this._dependencies = dependencies; // Generate getter/setter methods for all properties of the class
    // One can get each property by calling the method and can set it
    // by passing paramaters for the same. Thus, one can chain setter
    // getter methods.

    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(_assertThisInitialized(_assertThisInitialized(_this)), _props__WEBPACK_IMPORTED_MODULE_6__["PROPS"]);
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(_assertThisInitialized(_assertThisInitialized(_this)), _local_options__WEBPACK_IMPORTED_MODULE_1__["default"]); // Populate the store with default values
    // initialize group compositions

    _this._composition = {}; // store reference to data

    _this._data = []; // store reference to mountpoint

    _this._mount = null; // selection object that takes care of updating of components

    _this._selection = {}; // Create instance of matrix resolver

    _this.resolver(new _group_helper__WEBPACK_IMPORTED_MODULE_3__["MatrixResolver"](_this._dependencies)); // matrix instance store each of the matrices


    Object(_helper__WEBPACK_IMPORTED_MODULE_4__["setMatrixInstances"])(_assertThisInitialized(_assertThisInitialized(_this)), {}); // Getting indiviual registered items

    _this.registry({
      layerRegistry: componentSubRegistry.layerRegistry.get(),
      cellRegistry: componentSubRegistry.cellRegistry.get()
    });

    return _this;
  }

  _createClass(VisualGroup, [{
    key: "store",
    value: function store() {
      if (arguments.length) {
        this._store = arguments.length <= 0 ? undefined : arguments[0];
        Object(_helper__WEBPACK_IMPORTED_MODULE_4__["initializeGlobalState"])(this);
        Object(_helper__WEBPACK_IMPORTED_MODULE_4__["createUnitState"])(this);
        Object(_helper__WEBPACK_IMPORTED_MODULE_4__["createLayerState"])(this); // Register listeners

        Object(_change_listener__WEBPACK_IMPORTED_MODULE_5__["setupChangeListeners"])(this);
        return this;
      }

      return this._store;
    }
    /**
     * Return the instances of matrices created by the visual group.
     *
     * @return {Object} Instance of matrices.
     */

  }, {
    key: "matrixInstance",
    value: function matrixInstance() {
      if (arguments.length) {
        return this;
      }

      return this.composition().matrices;
    }
    /**
     * Returns the composition of visual group.
     *
     * @public
     *
     * @return {Object} Composition of visual group. It contains instance of matrices {@link ValueMatrix}
     * and instances of axis.
     * ```
     *          {
     *              matrices: {
     *                  value: // Instance of center value matrix.
     *                  left: // Instance of left value matrix
     *                  right: // Instance of right value matrix
     *                  bottom: // Instance of bottom value matrix
     *                  top: // Instance of top value matrix.
     *              },
     *              axes: {
     *                  x: // Array of x axis.
     *                  y: // Array of y axis
     *                  color: // Array of color axis
     *                  shape: // Array of shape axis
     *                  size: // Array of size axis.
     *              }
     *          }
     * ```
     */

  }, {
    key: "composition",
    value: function composition() {
      if (arguments.length) {
        return this;
      }

      return this._composition;
    }
    /**
     * Locks the model to prevent change listeners to be triggered until unlocked
     *
     * @return {Object} Instance of class VisualGroup
     * @memberof VisualGroup
     */

  }, {
    key: "lockModel",
    value: function lockModel() {
      this.store().model.lock();
      return this;
    }
    /**
     * Unlocks the model so that all change listeners can be triggered
     *
     * @return {Object} Instance of class VisualGroup
     */

  }, {
    key: "unlockModel",
    value: function unlockModel() {
      this.store().model.unlock();
      return this;
    }
    /**
     * Returns the channel name of the variable. Channels are rows, columns, color, shape and size.
     *
     * @public
     * @param {string} variable Name of the variable.
     *
     * @return {string} Name of the channel.
     */

  }, {
    key: "where",
    value: function where(variable) {
      return Object(_group_helper__WEBPACK_IMPORTED_MODULE_3__["findInGroup"])(variable, this.resolver().getAllFields());
    }
    /**
     * Gets the axis instances of the visual group based on the given axis type.
     *
     * @public
     * @param {string} type Type of axis. X,Y or retinal axes.
     *
     * @return {Array} Array of axis instances.
     */

  }, {
    key: "getAxes",
    value: function getAxes(type) {
      if (type === _enums_constants__WEBPACK_IMPORTED_MODULE_7__["RETINAL"]) {
        return this.resolver().getRetinalAxes();
      }

      return this.resolver().getSimpleAxes(type);
    }
    /**
     * Returns the instances of cells based on the given type. Type can be given as `row' or `col`.
     *
     * @public
     * @return {Array} Two dimensional array of cells.
     */

  }, {
    key: "getCells",
    value: function getCells(type) {
      return this.resolver()["".concat(type, "Cells")]();
    }
  }, {
    key: "getFieldsFromChannel",
    value: function getFieldsFromChannel(channel) {
      var _this$resolver$getAll = this.resolver().getAllFields(),
          rowProjections = _this$resolver$getAll.rowProjections,
          colProjections = _this$resolver$getAll.colProjections;

      return channel === _enums_constants__WEBPACK_IMPORTED_MODULE_7__["Y"] ? rowProjections : colProjections;
    }
  }, {
    key: "getCellsByFacetKey",
    value: function getCellsByFacetKey(facetKey) {
      var resolver = this.resolver();
      var cells = resolver.rowCells()[facetKey] || resolver.colCells()[facetKey] || [];
      return cells;
    }
  }, {
    key: "getAxesByFacetKey",
    value: function getAxesByFacetKey(axisType, facetKey) {
      var resolver = this.resolver();
      var cells = resolver.rowCells()[facetKey] || resolver.colCells()[facetKey];
      var axes = cells[0].valueOf().axes()[axisType] || [];
      return axes;
    }
    /**
     * This method is used to return a serialized representation of the instance's properties.
     *
     * @return {Object} Object with config proprties.
     * @memberof VisualGroup
     */

  }, {
    key: "serialize",
    value: function serialize() {
      var _ref;

      var store = this.store();
      return _ref = {}, _defineProperty(_ref, _enums_constants__WEBPACK_IMPORTED_MODULE_7__["CONFIG"], store.get(_enums_constants__WEBPACK_IMPORTED_MODULE_7__["CONFIG"])), _defineProperty(_ref, _enums_constants__WEBPACK_IMPORTED_MODULE_7__["MOUNT"], store.get(_enums_constants__WEBPACK_IMPORTED_MODULE_7__["MOUNT"])), _ref;
    }
    /**
     * Returns the grouped datamodel prepared by visual group. If there is no group by performed, then it returns the
     * original data model passed to visual group.
     *
     * @return {DataModel} Grouped data model.
     */

  }, {
    key: "getGroupByData",
    value: function getGroupByData() {
      return this._groupedDataModel;
    }
  }, {
    key: "createMatrices",
    value: function createMatrices() {
      Object(_helper__WEBPACK_IMPORTED_MODULE_4__["createMatrices"])(this);
    }
  }], [{
    key: "getState",
    value: function getState() {
      return [{
        domain: {
          x: {},
          y: {},
          radius: {}
        }
      }, {}];
    }
  }]);

  return VisualGroup;
}(_simple_group__WEBPACK_IMPORTED_MODULE_2__["SimpleGroup"]);

/* harmony default export */ __webpack_exports__["default"] = (VisualGroup);

/***/ }),

/***/ "./packages/visual-layer/src/base-layer/base-layer.js":
/*!************************************************************!*\
  !*** ./packages/visual-layer/src/base-layer/base-layer.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return BaseLayer; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _simple_layer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../simple-layer */ "./packages/visual-layer/src/simple-layer/index.js");
/* harmony import */ var _enums_props__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/props */ "./packages/visual-layer/src/enums/props.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./props */ "./packages/visual-layer/src/base-layer/props.js");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../helpers */ "./packages/visual-layer/src/helpers/index.js");
/* harmony import */ var _listener_map__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./listener-map */ "./packages/visual-layer/src/base-layer/listener-map.js");
/* harmony import */ var _default_options__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./default-options */ "./packages/visual-layer/src/base-layer/default-options.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }








/**
 * An abstract class which gives definition of common layer functionality like
 * - transforming data for various modes. Supported modes: identity, group and stack.
 * - calculating data domain
 * - linking dependent layers
 * - merging policy of configuration
 * - interaction sideffect helpers
 * - retrieving dom elements from data using id
 * - retrieving the physical dimensions of marks
 * - disposing layer
 *
 * Every layer has to extend base layer and give concrete definition.
 * This layer does not have any default visual. A new layer has to define the logic of `render` for rendering the
 * visuals
 *
 * @public
 * @class
 * @module BaseLayer
 */

var BaseLayer =
/*#__PURE__*/
function (_SimpleLayer) {
  _inherits(BaseLayer, _SimpleLayer);

  /**
   * Creates a layer using a configuration and data.
   *
   * @public
   * @constructor
   * @param {DataModel} data Instance of DataModel to be used. This DataModel instance serves as the data for a layer.
   * @param {Object} axes Axes instances to be used for rendering the layer. Axes are used for mapping data from
   *      value to px.
   * @param {SimpleAxis} axes.x X axis of the layer. Based on the type of variable it gets instance of BandAxis,
   *      TimeAxis, ContinuousAxis
   * @param {SimpleAxis} axes.y X axis of the layer. Based on the type of variable it gets instance of BandAxis,
   *      TimeAxis, ContinuousAxis
   * @param {ColorAxis} axes.color Axis for coloring a layer using color interpolators
   * @param {ShapeAxis} axes.shape Axis for providing a shape
   * @param {SizeAxis} axes.size Axis for determining size of a mark using size interpolator
   * @param {LayerConfig} config Configuration of the layer
   * @param {Object} dependencies Dependencies of the layer
   * @param {SmartLabel} dependencies.smartLabel Smartlabel singleton instance
   */
  function BaseLayer(data, axes, config) {
    var _this;

    var dependencies = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

    _classCallCheck(this, BaseLayer);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(BaseLayer).call(this));
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["generateGetterSetters"])(_assertThisInitialized(_assertThisInitialized(_this)), _props__WEBPACK_IMPORTED_MODULE_3__["props"]);

    _this.data(data);

    _this.axes(axes);

    _this.config(config);

    _this.alias(_this.constructor.formalName() + Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getUniqueId"])());

    _this.dependencies(dependencies);

    _this._points = [];
    _this._cachedData = [];
    _this._id = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getUniqueId"])();
    _this._measurement = {};
    _this._animationDonePromises = [];
    _this._customConfig = null;
    return _this;
  }

  _createClass(BaseLayer, [{
    key: "store",
    value: function store() {
      if (arguments.length) {
        this._store = arguments.length <= 0 ? undefined : arguments[0];
        var metaInf = this.metaInf();
        var localNs = "".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].LAYER_LOCAL_NAMESPACE, ".").concat(metaInf.namespace);
        Object(_helpers__WEBPACK_IMPORTED_MODULE_4__["initializeGlobalState"])(this);
        var store = this.store();
        store.append("".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].LAYER_LOCAL_NAMESPACE), _defineProperty({}, metaInf.namespace, null));
        Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["transactor"])(this, _default_options__WEBPACK_IMPORTED_MODULE_6__["defaultOptions"], store.model, {
          namespace: localNs
        });
        Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["registerListeners"])(this, _listener_map__WEBPACK_IMPORTED_MODULE_5__["listenerMap"], {
          local: localNs,
          global: muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].LAYER_GLOBAL_NAMESPACE
        }, {
          unitRowIndex: metaInf.unitRowIndex,
          unitColIndex: metaInf.unitColIndex
        });
        return this;
      }

      return this._store;
    }
  }, {
    key: "domain",
    value: function domain() {
      var prop = "".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].LAYER_GLOBAL_NAMESPACE, ".").concat(_enums_props__WEBPACK_IMPORTED_MODULE_2__["DOMAIN"], ".").concat(this.metaInf().namespace);

      if (arguments.length) {
        this.store().commit(prop, arguments.length <= 0 ? undefined : arguments[0]);
        return this;
      }

      return this.store().get(prop);
    }
    /**
     * Creates a layer instance
     * @return {BaseLayer} Instance of a layer
     */

  }, {
    key: "encodingFieldsInf",
    value: function encodingFieldsInf() {
      if (arguments.length) {
        this._encodingFieldsInf = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._encodingFieldsInf;
    }
  }, {
    key: "encodingTransform",
    value: function encodingTransform() {
      if (arguments.length) {
        this._encodingTransform = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._encodingTransform;
    }
    /**
     * Provides a alias for a layer. Like it's possible to have same layer (like bar) multiple times, but among multiple
     * layers of same type if one layer has to be referred, alias is used. If no alias is given then `formalName` is set
     * as the alias name.
     *
     *
     * If used as setter
     * @param  {string} alias Name of the alias
     * @return {BaseLayer} Instance of current base layer
     *
     * If used as getter
     * @return {string} Alias of the current layer
     *
     * @public
     */

  }, {
    key: "alias",
    value: function alias() {
      if (arguments.length) {
        this._alias = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._alias || this.constructor.formalName();
    }
  }, {
    key: "dependencies",
    value: function dependencies() {
      if (arguments.length) {
        this._dependencies = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._dependencies;
    }
  }, {
    key: "enableCaching",
    value: function enableCaching() {
      this._cacheEnabled = true;
      return this;
    }
  }, {
    key: "clearCaching",
    value: function clearCaching() {
      this._cacheEnabled = false;
      return this.data(this._cachedData[0]);
    }
    /**
     * Serialize the schema. Merge config is used for serialization.
     *
     * @public
     *
     * @return {LayerConfig} Serialized schema
     */

  }, {
    key: "serialize",
    value: function serialize() {
      return this.config();
    }
    /**
     * Returns the unique identifier of this layer. Id is auto generated during the creation proceess of a schema.
     *
     * @public
     *
     * @return {string} id of the layer
     */

  }, {
    key: "id",
    value: function id() {
      return this._id;
    }
    /**
     * Returns the transformed data based on given transform type.
     * It first gets the transform method from transform factory based on type of transform. It then calls the
     * transform method with the data and passes the configuration parameters of transform such as
     * groupBy, value field, etc.
     *
     * @param {DataModel} dataModel Instance of DataModel
     * @param {Object} config Configuration for transforming data
     * @return {Array.<Array>} Transformed data.
     */

  }, {
    key: "getTransformedData",
    value: function getTransformedData(dataModel, config, transformType, encodingFieldsInf) {
      return Object(_helpers__WEBPACK_IMPORTED_MODULE_4__["transformData"])(dataModel, config, transformType, encodingFieldsInf);
    }
    /**
     * Calculates the domain from the data.
     * It checks the type of field and calculates the domain based on that. For example, if it
     * is a quantitative or temporal field, then it calculates the min and max from the data or
     * if it is a categorical field then it gets all the values from the data of that field.
     * @param {Array} data DataArray
     * @param {Object} fieldsConfig Configuration of fields
     * @return {Array} Domain values array.
     */

  }, {
    key: "calculateDomainFromData",
    value: function calculateDomainFromData(data) {
      var domains = {};
      var isEmpty = this.data().isEmpty();

      if (!isEmpty) {
        domains = Object(_helpers__WEBPACK_IMPORTED_MODULE_4__["calculateDomainFromData"])(data, this.encodingFieldsInf(), this.transformType());
      }

      return domains;
    }
  }, {
    key: "getDataDomain",

    /**
     * Returns the domain for the axis.
     *
     * @param {string} encodingType type of encoding x, y, etc.
     * @return {Object} Axis domains
     */
    value: function getDataDomain(encodingType) {
      var domains = this.store().get("".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].LAYER_GLOBAL_NAMESPACE, ".").concat(_enums_props__WEBPACK_IMPORTED_MODULE_2__["DOMAIN"], ".").concat(this.metaInf().namespace));
      return encodingType !== undefined ? domains[encodingType] || [] : domains;
    }
    /**
     * Normalizes the transformed data and returns it.
     *
     * @param {string} encodingType type of encoding x, y, etc.
     * @return {Object} Axis domains
     */

  }, {
    key: "getNormalizedData",
    value: function getNormalizedData(transformedData, fieldsConfig) {
      return Object(_helpers__WEBPACK_IMPORTED_MODULE_4__["getNormalizedData"])(transformedData, fieldsConfig, this.encodingFieldsInf(), this.transformType());
    }
    /**
     * Gets the nearest point closest to the given x and y coordinate. If no nearest point is found, then it returns
     * null.
     *
     * @public
     *
     * @param {number} x X Coordinate.
     * @param {number} y Y Coordinate.
     *
     * @return {Object} Information of the nearest point.
     * ```
     *      {
     *          // id property contains the field names and their corresponding values in a 2d array. This is the data
     *          // associated with the nearest point.
     *          id: // Example data: [['Origin'], ['USA']],
     *          dimensions: // Physical dimensions of the point.
     *          layerId: // Id of the layer instance.
     *      }
     * ```
     */

  }, {
    key: "getNearestPoint",
    value: function getNearestPoint() {
      return null;
    }
  }, {
    key: "applyInteractionStyle",
    value: function applyInteractionStyle(interactionType, selectionSet, apply, styles) {
      var interactionConfig = this.config().interaction || {};
      var interactionStyles = interactionConfig[interactionType];
      interactionStyles = styles || interactionStyles;

      if (interactionStyles) {
        Object(_helpers__WEBPACK_IMPORTED_MODULE_4__["applyInteractionStyle"])(this, selectionSet, interactionStyles, {
          apply: apply,
          interactionType: interactionType
        });
      }
    }
  }, {
    key: "disableUpdate",
    value: function disableUpdate() {
      this._updateLock = true;
      return this;
    }
  }, {
    key: "enableUpdate",
    value: function enableUpdate() {
      this._updateLock = false;
      return this;
    }
  }, {
    key: "resolveTransformType",
    value: function resolveTransformType() {
      this._transformType = Object(_helpers__WEBPACK_IMPORTED_MODULE_4__["getValidTransform"])(this);
    }
  }, {
    key: "transformType",
    value: function transformType() {
      return this._transformType;
    }
    /**
     * Renders the layer
     * @return {BaseLayer} Instance of the layer.
     */

  }, {
    key: "render",
    value: function render() {
      return this;
    }
    /**
     *
     *
     *
     * @memberof BaseLayer
     */

  }, {
    key: "elemType",
    value: function elemType() {
      return 'g';
    }
    /**
     * Disposes the entire layer.
     *
     * @return {BaseLayer} Instance of layer.
     */

  }, {
    key: "remove",
    value: function remove() {
      this.store().unsubscribe({
        namespace: "".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].LAYER_LOCAL_NAMESPACE, ".").concat(this.metaInf().namespace)
      });
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this.mount()).remove();
      return this;
    }
    /**
     * Stores point in an object with key as the categorical value or temporal value
     *
     * @param {string} key categorical value or temporal value
     * @param {Object} data Information of the data point
     * @return {BarLayer} Instance of bar layer
     */

  }, {
    key: "cachePoint",
    value: function cachePoint(key, data) {
      if (key === null) {
        return this;
      }

      var pointMap = this._pointMap;
      !pointMap[key] && (pointMap[key] = []);
      pointMap[key].push(data);
      return this;
    }
    /**
     *
     *
     * @param {*} dataProps
     *
     * @memberof BaseLayer
     */

  }, {
    key: "dataProps",
    value: function dataProps() {
      if (arguments.length) {
        this._dataProps = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._dataProps;
    }
    /**
     *
     *
     * @param {*} data
     * @param {*} id
     *
     * @memberof BaseLayer
     */

  }, {
    key: "getIdentifiersFromData",
    value: function getIdentifiersFromData(data) {
      var schema = this.data().getData().schema;
      var fieldsConfig = this.data().getFieldsConfig();
      var identifiers = [[], []];

      var _this$encodingFieldsI = this.encodingFieldsInf(),
          xFieldType = _this$encodingFieldsI.xFieldType,
          yFieldType = _this$encodingFieldsI.yFieldType,
          xField = _this$encodingFieldsI.xField,
          yField = _this$encodingFieldsI.yField;

      var _map = [xFieldType, yFieldType].map(function (type) {
        return type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE;
      }),
          _map2 = _slicedToArray(_map, 2),
          xMeasure = _map2[0],
          yMeasure = _map2[1];

      schema.forEach(function (d, i) {
        var name = d.name;

        if (fieldsConfig[name].def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION) {
          identifiers[0].push(name);
          identifiers[1].push(data[i]);
        }
      });

      if (xMeasure && yMeasure) {
        var _identifiers$, _identifiers$2;

        var xMeasureIndex = fieldsConfig[xField].index;
        var yMeasureIndex = fieldsConfig[yField].index;

        (_identifiers$ = identifiers[0]).push.apply(_identifiers$, [xField, yField]);

        (_identifiers$2 = identifiers[1]).push.apply(_identifiers$2, [data[xMeasureIndex], data[yMeasureIndex]]);
      }

      return identifiers;
    }
  }, {
    key: "getPlotSpan",
    value: function getPlotSpan() {
      return {
        x: 0,
        y: 0
      };
    }
  }, {
    key: "getPlotPadding",
    value: function getPlotPadding() {
      return {
        x: 0,
        y: 0
      };
    }
    /**
     * Returns the information of the marks corresponding to the supplied identifiers. Identifiers are a set of field
     * names and their corresponding values in an array. It can also be an instance of datamodel.
     *
     * For example,
     * ```
     *  const identifiers = [
     *      ['Origin', 'Cylinders'],
     *      ['USA', '8']
     *  ];
     *  const points = barLayer.getPointsFromIdentifiers(identifiers);
     * ```
     * @public
     * @param {Array|DataModel} identifiers Identifiers of the marks.
     * @param {Object} config Optional configuration which describes how to get the information.
     * @param {boolean} config.getAllAttrs If true, then returns all the information of the points, else returns only
     * the positions of the points.
     * @param {boolean} config.getBBox If true, then returns the bounding box of all the marks.
     *
     * @return {Array} Array of points contains
     */

  }, {
    key: "getPointsFromIdentifiers",
    value: function getPointsFromIdentifiers(identifiers) {
      var _ref;

      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var getAllAttrs = config.getAllAttrs;
      var getBBox = config.getBBox;

      if (!this.data()) {
        return [];
      }

      var fieldNames;
      var values;

      if (identifiers instanceof muze_utils__WEBPACK_IMPORTED_MODULE_0__["DataModel"]) {
        var dataObj = identifiers.getData();
        fieldNames = dataObj.schema.map(function (d) {
          return d.name;
        });
        values = dataObj.data;
      } else {
        fieldNames = identifiers[0];
        values = identifiers.slice(1, identifiers.length);
      }

      var points = this._points;
      var fieldsConfig = this.data().getFieldsConfig();

      var filteredPoints = (_ref = []).concat.apply(_ref, _toConsumableArray(points)).filter(function (point) {
        var _data = point._data,
            _id = point._id;
        return fieldNames.every(function (field, idx) {
          if (field in fieldsConfig && fieldsConfig[field].def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION) {
            return values.findIndex(function (d) {
              return d[idx] === _data[fieldsConfig[field].index];
            }) !== -1;
          } else if (field === muze_utils__WEBPACK_IMPORTED_MODULE_0__["ReservedFields"].ROW_ID) {
            return values.findIndex(function (d) {
              return d[idx] === _id;
            }) !== -1;
          }

          return true;
        });
      });

      return getAllAttrs ? filteredPoints : filteredPoints.map(function (d) {
        var obj = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["clone"])(d);

        if (getBBox) {
          var update = obj.update || obj;

          if (obj.size !== undefined) {
            var sizeVal = Math.sqrt(obj.size / Math.PI) * 2;
            update.width = sizeVal;
            update.height = sizeVal;
            update.x -= sizeVal / 2;
            update.y -= sizeVal / 2;
          } else {
            if (update.width === undefined) {
              update.width = 2;
            }

            if (update.height === undefined) {
              update.height = 2;
            }
          }
        }

        return obj.update || obj;
      }).sort(function (a, b) {
        return a.y - b.y;
      });
    }
  }, {
    key: "getTransformedDataFromIdentifiers",
    value: function getTransformedDataFromIdentifiers(identifiers) {
      var _identifiers$getData = identifiers.getData(),
          identifierData = _identifiers$getData.data,
          identifierSchema = _identifiers$getData.schema;

      var normalizedData = this._normalizedData;
      var fieldsConfig = this.data().getFieldsConfig();

      var _this$encodingFieldsI2 = this.encodingFieldsInf(),
          yField = _this$encodingFieldsI2.yField,
          xField = _this$encodingFieldsI2.xField,
          yFieldType = _this$encodingFieldsI2.yFieldType,
          xFieldType = _this$encodingFieldsI2.xFieldType;

      var measureIndex;
      var enc;

      if (xFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE) {
        measureIndex = fieldsConfig[xField].index;
        enc = 'x';
      } else if (yFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE) {
        measureIndex = fieldsConfig[yField].index;
        enc = 'y';
      }

      var transformedData = [];
      normalizedData.forEach(function (dataArr) {
        dataArr.forEach(function (dataObj) {
          var tupleArr = dataObj._data;
          var exist = identifierSchema.every(function (obj, i) {
            return identifierData.findIndex(function (d) {
              return tupleArr[fieldsConfig[obj.name].index] === d[i];
            }) !== -1;
          });

          if (exist) {
            var transformedVal = dataObj[enc];
            var row = dataObj._data;
            var tuple = {};

            for (var key in fieldsConfig) {
              var index = fieldsConfig[key].index;
              tuple[key] = row[index];

              if (index === measureIndex) {
                tuple[key] = transformedVal;
              }
            }

            transformedData.push(tuple);
          }
        });
      });
      return [transformedData, this.data().getData().schema];
    }
    /**
     * Returns the dom elements associated with the supplied set of row ids.
     * Each element in the layer is mapped with a row of the datamodel. When given an array of row ids, it returns all
     * the elements which is mapped with those row ids.
     *
     * @public
     * @param {Array} set Array of row ids
     *
     * @return {Selection} D3 Selection of dom elements.
     */

  }, {
    key: "getPlotElementsFromSet",
    value: function getPlotElementsFromSet(set) {
      return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this.mount()).selectAll(this.elemType()).filter(function (data) {
        return data ? set.indexOf(data._id) !== -1 : false;
      });
    }
    /**
     * Notifies when all animations/transitions of the layer are completed.
     *
     * @public
     * @return {Promise} Returns a promise to notify the animation completion.
     */

  }, {
    key: "animationDone",
    value: function animationDone() {
      return Promise.all(this._animationDonePromises);
    }
  }, {
    key: "registerAnimationDoneHook",
    value: function registerAnimationDoneHook() {
      var resolveFn;
      var promise = new Promise(function (resolve) {
        resolveFn = resolve;
      });

      this._animationDonePromises.push(promise);

      return function () {
        resolveFn();
      };
    }
  }, {
    key: "getRenderProps",
    value: function getRenderProps() {
      var metaInf = this.metaInf();
      return ["".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].GROUP_GLOBAL_NAMESPACE, ".domain.y.").concat(metaInf.unitRowIndex, "0"), "".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].GROUP_GLOBAL_NAMESPACE, ".domain.x.").concat(metaInf.unitColIndex, "0")];
    }
  }], [{
    key: "getState",
    value: function getState() {
      return [{
        domain: {}
      }, {
        config: {},
        data: {}
      }];
    }
  }, {
    key: "create",
    value: function create() {
      for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
        params[_key] = arguments[_key];
      }

      return _construct(this, params);
    }
    /**
     * Default configuration of the layer. This configuration gets merged to the user passed configuration using a
     * plolicy. Base layer only returns part of configuraion, any layer overridding base layer should return its own
     * configuration.
     *
     * @public
     * @static
     *
     * @return {Object} Default configuration
     */

  }, {
    key: "defaultConfig",
    value: function defaultConfig() {
      return {
        transform: {
          type: 'identity'
        }
      };
    }
    /**
     * Policy defines how user config gets merged to default config. The default policy here does a deep copy
     * operation.
     * Any policy which does more than deep copying should define the policy as a static member.
     *
     * @static
     * @public
     *
     * @param {LayerConfig} conf Configuration with which the user config will be merged
     * @param {LayerConfig} userConf Configuration given by the user
     *
     * @return {LayerConfig} Merged layer configuration
     */

  }, {
    key: "defaultPolicy",
    value: function defaultPolicy(conf, userConf) {
      return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(conf, userConf);
    }
    /**
     * Determines a name for a layer. This name of the layer is used in the input data to refer to this layer.
     * ```
     *  .layers([
     *      mark: 'bar',
     *      encoding: { ... }
     *  ])
     * ```
     *
     * @static
     * @public
     *
     * @return {string} name of layer
     */

  }, {
    key: "formalName",
    value: function formalName() {
      return 'base';
    }
  }, {
    key: "shouldDrawAnchors",
    value: function shouldDrawAnchors() {
      return false;
    }
  }]);

  return BaseLayer;
}(_simple_layer__WEBPACK_IMPORTED_MODULE_1__["SimpleLayer"]);



/***/ }),

/***/ "./packages/visual-layer/src/base-layer/default-options.js":
/*!*****************************************************************!*\
  !*** ./packages/visual-layer/src/base-layer/default-options.js ***!
  \*****************************************************************/
/*! exports provided: defaultOptions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultOptions", function() { return defaultOptions; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_props__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums/props */ "./packages/visual-layer/src/enums/props.js");
var _defaultOptions;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



var defaultOptions = (_defaultOptions = {}, _defineProperty(_defaultOptions, _enums_props__WEBPACK_IMPORTED_MODULE_1__["CONFIG"], {
  value: null,
  meta: {
    sanitization: function sanitization(config, oldConfig, context) {
      context._customConfig = config;
      var constructor = context.constructor;
      var newConf = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, constructor.defaultConfig());
      return constructor.defaultPolicy(newConf, config);
    }
  }
}), _defineProperty(_defaultOptions, _enums_props__WEBPACK_IMPORTED_MODULE_1__["DATA"], {
  value: null,
  meta: {
    preset: function preset(data, context) {
      if (context._cacheEnabled) {
        context._cachedData.push(data);
      } else {
        context._cachedData = [data];
      }
    }
  } // [PROPS.MOUNT]: {
  //     value: null
  // },
  // [PROPS.AXES]: {
  //     value: null
  // },
  // [PROPS.MEASUREMENT]: {
  //     value: null
  // }

}), _defaultOptions);

/***/ }),

/***/ "./packages/visual-layer/src/base-layer/index.js":
/*!*******************************************************!*\
  !*** ./packages/visual-layer/src/base-layer/index.js ***!
  \*******************************************************/
/*! exports provided: BaseLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base_layer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base-layer */ "./packages/visual-layer/src/base-layer/base-layer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseLayer", function() { return _base_layer__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/visual-layer/src/base-layer/listener-map.js":
/*!**************************************************************!*\
  !*** ./packages/visual-layer/src/base-layer/listener-map.js ***!
  \**************************************************************/
/*! exports provided: listenerMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "listenerMap", function() { return listenerMap; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers */ "./packages/visual-layer/src/helpers/index.js");
/* harmony import */ var _enums_props__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/props */ "./packages/visual-layer/src/enums/props.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }





var renderLayer = function renderLayer(context) {
  var mount = context.mount();

  if (mount) {
    context.render(mount);
    context.dependencies().throwback.commit(muze_utils__WEBPACK_IMPORTED_MODULE_0__["CommonProps"].ON_LAYER_DRAW, true);
  }
};

var listenerMap = function listenerMap(context, ns) {
  return [{
    props: ["".concat(ns.local, ".").concat(_enums_props__WEBPACK_IMPORTED_MODULE_2__["DATA"])],
    listener: function listener(_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
          data = _ref2[1];

      var config = context.config();
      var encodingValue = config.encoding;

      if (data && encodingValue) {
        var fieldsConfig = data.getFieldsConfig();
        var encodingFieldsInf = Object(_helpers__WEBPACK_IMPORTED_MODULE_1__["getEncodingFieldInf"])(encodingValue, fieldsConfig);
        context.encodingFieldsInf(encodingFieldsInf);
        context.resolveTransformType();
        context._transformedData = context.getTransformedData(data, config, context.transformType(), encodingFieldsInf);
        context._normalizedData = context.getNormalizedData(context._transformedData, fieldsConfig);
        var domain = context.calculateDomainFromData(context._normalizedData, context.encodingFieldsInf(), context.data().getFieldsConfig());
        context._domain = domain;
        !context._updateLock && context.domain(domain);
      }
    },
    type: 'registerImmediateListener'
  }, {
    props: ["".concat(ns.local, ".").concat(_enums_props__WEBPACK_IMPORTED_MODULE_2__["CONFIG"])],
    listener: function listener(_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
          config = _ref4[1];

      var calculateDomain = config.calculateDomain;
      var props = context.getRenderProps();
      var store = context.store();
      var namespaceInf = {
        namespace: "".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].LAYER_LOCAL_NAMESPACE, ".").concat(context.metaInf().namespace),
        key: 'renderListener'
      };
      store.unsubscribe(namespaceInf);

      if (calculateDomain === false) {
        props.push("".concat(ns.local, ".").concat(_enums_props__WEBPACK_IMPORTED_MODULE_2__["DATA"]));
      }

      store.registerChangeListener(props, function () {
        renderLayer(context);
      }, false, namespaceInf);
    },
    type: 'registerImmediateListener'
  }];
};

/***/ }),

/***/ "./packages/visual-layer/src/base-layer/props.js":
/*!*******************************************************!*\
  !*** ./packages/visual-layer/src/base-layer/props.js ***!
  \*******************************************************/
/*! exports provided: props */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "props", function() { return props; });
var props = {
  axes: {},
  mount: {},
  measurement: {},
  metaInf: {},
  data: {},
  config: {},
  valueParser: {
    defaultValue: function defaultValue(val) {
      return val;
    }
  }
};

/***/ }),

/***/ "./packages/visual-layer/src/defaults.js":
/*!***********************************************!*\
  !*** ./packages/visual-layer/src/defaults.js ***!
  \***********************************************/
/*! exports provided: DEFAULT_LAYERS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_LAYERS", function() { return DEFAULT_LAYERS; });
/* harmony import */ var _layers_area__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layers/area */ "./packages/visual-layer/src/layers/area/index.js");
/* harmony import */ var _layers_arc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./layers/arc */ "./packages/visual-layer/src/layers/arc/index.js");
/* harmony import */ var _layers_line__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layers/line */ "./packages/visual-layer/src/layers/line/index.js");
/* harmony import */ var _layers_text__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./layers/text */ "./packages/visual-layer/src/layers/text/index.js");
/* harmony import */ var _layers_point__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./layers/point */ "./packages/visual-layer/src/layers/point/index.js");
/* harmony import */ var _layers_bar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./layers/bar */ "./packages/visual-layer/src/layers/bar/index.js");
/* harmony import */ var _base_layer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./base-layer */ "./packages/visual-layer/src/base-layer/index.js");
/* harmony import */ var _enums_layer_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./enums/layer-types */ "./packages/visual-layer/src/enums/layer-types.js");
/* harmony import */ var _layers_tick__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./layers/tick */ "./packages/visual-layer/src/layers/tick/index.js");
var _DEFAULT_LAYERS;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }










var DEFAULT_LAYERS = (_DEFAULT_LAYERS = {}, _defineProperty(_DEFAULT_LAYERS, _enums_layer_types__WEBPACK_IMPORTED_MODULE_7__["AREA_LAYER"], _layers_area__WEBPACK_IMPORTED_MODULE_0__["AreaLayer"]), _defineProperty(_DEFAULT_LAYERS, _enums_layer_types__WEBPACK_IMPORTED_MODULE_7__["ARC_LAYER"], _layers_arc__WEBPACK_IMPORTED_MODULE_1__["ArcLayer"]), _defineProperty(_DEFAULT_LAYERS, _enums_layer_types__WEBPACK_IMPORTED_MODULE_7__["LINE_LAYER"], _layers_line__WEBPACK_IMPORTED_MODULE_2__["LineLayer"]), _defineProperty(_DEFAULT_LAYERS, _enums_layer_types__WEBPACK_IMPORTED_MODULE_7__["TEXT_LAYER"], _layers_text__WEBPACK_IMPORTED_MODULE_3__["TextLayer"]), _defineProperty(_DEFAULT_LAYERS, _enums_layer_types__WEBPACK_IMPORTED_MODULE_7__["POINT_LAYER"], _layers_point__WEBPACK_IMPORTED_MODULE_4__["PointLayer"]), _defineProperty(_DEFAULT_LAYERS, _enums_layer_types__WEBPACK_IMPORTED_MODULE_7__["TICK_LAYER"], _layers_tick__WEBPACK_IMPORTED_MODULE_8__["TickLayer"]), _defineProperty(_DEFAULT_LAYERS, _enums_layer_types__WEBPACK_IMPORTED_MODULE_7__["BAR_LAYER"], _layers_bar__WEBPACK_IMPORTED_MODULE_5__["BarLayer"]), _defineProperty(_DEFAULT_LAYERS, _enums_layer_types__WEBPACK_IMPORTED_MODULE_7__["BASE_LAYER"], _base_layer__WEBPACK_IMPORTED_MODULE_6__["BaseLayer"]), _DEFAULT_LAYERS);

/***/ }),

/***/ "./packages/visual-layer/src/enums/constants.js":
/*!******************************************************!*\
  !*** ./packages/visual-layer/src/enums/constants.js ***!
  \******************************************************/
/*! exports provided: CLASSPREFIX, STACK, GROUP, IDENTITY, ANGLE, RADIUS, SIZE, COLOR, SHAPE, OUTER_RADIUS_VALUE, TEXT_ANCHOR_MIDDLE, ENCODING, ASCENDING, AGG_FN_SUM, AREA_LAYER, ARC_LAYER, LINE_LAYER, TEXT_LAYER, POINT_LAYER, BAR_LAYER, TICK_LAYER, SIMPLE_LAYER, BASE_LAYER */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLASSPREFIX", function() { return CLASSPREFIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "STACK", function() { return STACK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GROUP", function() { return GROUP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDENTITY", function() { return IDENTITY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ANGLE", function() { return ANGLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RADIUS", function() { return RADIUS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SIZE", function() { return SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COLOR", function() { return COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SHAPE", function() { return SHAPE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OUTER_RADIUS_VALUE", function() { return OUTER_RADIUS_VALUE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TEXT_ANCHOR_MIDDLE", function() { return TEXT_ANCHOR_MIDDLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ENCODING", function() { return ENCODING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ASCENDING", function() { return ASCENDING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AGG_FN_SUM", function() { return AGG_FN_SUM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AREA_LAYER", function() { return AREA_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ARC_LAYER", function() { return ARC_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINE_LAYER", function() { return LINE_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TEXT_LAYER", function() { return TEXT_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POINT_LAYER", function() { return POINT_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BAR_LAYER", function() { return BAR_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TICK_LAYER", function() { return TICK_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SIMPLE_LAYER", function() { return SIMPLE_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BASE_LAYER", function() { return BASE_LAYER; });
var CLASSPREFIX = 'muze';
var STACK = 'stack';
var GROUP = 'group';
var IDENTITY = 'identity';
var ANGLE = 'angle';
var RADIUS = 'radius';
var SIZE = 'size';
var COLOR = 'color';
var SHAPE = 'shape';
var OUTER_RADIUS_VALUE = 'outerRadiusValue';
var TEXT_ANCHOR_MIDDLE = 'middle';
var ENCODING = {
  X: 'x',
  Y: 'y',
  X0: 'x0',
  Y0: 'y0'
};
var ASCENDING = 'asc';
var AGG_FN_SUM = 'sum';
var AREA_LAYER = 'area';
var ARC_LAYER = 'arc';
var LINE_LAYER = 'line';
var TEXT_LAYER = 'text';
var POINT_LAYER = 'point';
var BAR_LAYER = 'bar';
var TICK_LAYER = 'tick';
var SIMPLE_LAYER = 'simple';
var BASE_LAYER = 'base';

/***/ }),

/***/ "./packages/visual-layer/src/enums/layer-types.js":
/*!********************************************************!*\
  !*** ./packages/visual-layer/src/enums/layer-types.js ***!
  \********************************************************/
/*! exports provided: AREA_LAYER, ARC_LAYER, LINE_LAYER, TEXT_LAYER, POINT_LAYER, BAR_LAYER, TICK_LAYER, SIMPLE_LAYER, BASE_LAYER */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AREA_LAYER", function() { return AREA_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ARC_LAYER", function() { return ARC_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LINE_LAYER", function() { return LINE_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TEXT_LAYER", function() { return TEXT_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "POINT_LAYER", function() { return POINT_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BAR_LAYER", function() { return BAR_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TICK_LAYER", function() { return TICK_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SIMPLE_LAYER", function() { return SIMPLE_LAYER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BASE_LAYER", function() { return BASE_LAYER; });
var AREA_LAYER = 'area';
var ARC_LAYER = 'arc';
var LINE_LAYER = 'line';
var TEXT_LAYER = 'text';
var POINT_LAYER = 'point';
var BAR_LAYER = 'bar';
var TICK_LAYER = 'tick';
var SIMPLE_LAYER = 'simple';
var BASE_LAYER = 'base';

/***/ }),

/***/ "./packages/visual-layer/src/enums/props.js":
/*!**************************************************!*\
  !*** ./packages/visual-layer/src/enums/props.js ***!
  \**************************************************/
/*! exports provided: DATA, CONFIG, MEASUREMENT, DOMAIN, MOUNT */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DATA", function() { return DATA; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CONFIG", function() { return CONFIG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MEASUREMENT", function() { return MEASUREMENT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DOMAIN", function() { return DOMAIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MOUNT", function() { return MOUNT; });
var DATA = 'data';
var CONFIG = 'config';
var MEASUREMENT = 'measurement';
var DOMAIN = 'domain';
var MOUNT = 'mount';

/***/ }),

/***/ "./packages/visual-layer/src/helpers/index.js":
/*!****************************************************!*\
  !*** ./packages/visual-layer/src/helpers/index.js ***!
  \****************************************************/
/*! exports provided: getLayerColor, applyInteractionStyle, fadeUnfadeSelection, focusUnfocusSelection, getAxesScales, getEncodingFieldInf, transformData, getIndividualClassName, getNormalizedData, calculateDomainFromData, attachDataToVoronoi, updateStyle, animateGroup, positionPoints, getGroupSpan, getPlotMeasurement, initializeGlobalState, resolveInvalidTransformType, getValidTransform, getValidTransformForAggFn, getMarkId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLayerColor", function() { return getLayerColor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyInteractionStyle", function() { return applyInteractionStyle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fadeUnfadeSelection", function() { return fadeUnfadeSelection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "focusUnfocusSelection", function() { return focusUnfocusSelection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAxesScales", function() { return getAxesScales; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEncodingFieldInf", function() { return getEncodingFieldInf; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformData", function() { return transformData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getIndividualClassName", function() { return getIndividualClassName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNormalizedData", function() { return getNormalizedData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calculateDomainFromData", function() { return calculateDomainFromData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "attachDataToVoronoi", function() { return attachDataToVoronoi; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateStyle", function() { return updateStyle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "animateGroup", function() { return animateGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "positionPoints", function() { return positionPoints; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getGroupSpan", function() { return getGroupSpan; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getPlotMeasurement", function() { return getPlotMeasurement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initializeGlobalState", function() { return initializeGlobalState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resolveInvalidTransformType", function() { return resolveInvalidTransformType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getValidTransform", function() { return getValidTransform; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getValidTransformForAggFn", function() { return getValidTransformForAggFn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMarkId", function() { return getMarkId; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @chartshq/muze-axis */ "./packages/muze-axis/src/index.js");
/* harmony import */ var _chartshq_transform__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @chartshq/transform */ "./packages/transform/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/constants */ "./packages/visual-layer/src/enums/constants.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }





var BAND = _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_1__["ScaleType"].BAND;
var getLayerColor = function getLayerColor(_ref, _ref2) {
  var datum = _ref.datum,
      index = _ref.index;
  var colorEncoding = _ref2.colorEncoding,
      colorAxis = _ref2.colorAxis,
      colorFieldIndex = _ref2.colorFieldIndex;
  var rawColor = '';
  var color = '';

  if (colorEncoding && colorEncoding.value instanceof Function) {
    color = colorEncoding.value(datum, index);
    rawColor = colorEncoding.value(datum, index);
  } else {
    rawColor = colorAxis.getRawColor(datum._data[colorFieldIndex]);
    color = colorAxis.getHslString(rawColor);
  }

  return {
    color: color,
    rawColor: rawColor
  };
};

var transfromColor = function transfromColor(colorAxis, datum, styleType, intensity) {
  datum.meta.stateColor[styleType] = datum.meta.stateColor[styleType] || datum.meta.originalColor;
  var fillColorInfo = colorAxis.transformColor(datum.meta.stateColor[styleType], intensity);
  datum.meta.stateColor[styleType] = fillColorInfo.hsla;
  return fillColorInfo;
};

var applyInteractionStyle = function applyInteractionStyle(context, selectionSet, interactionStyles, config) {
  var elements = context.getPlotElementsFromSet(selectionSet);
  var axes = context.axes();
  var colorAxis = axes.color;
  var apply = config.apply;
  var interactionType = config.interactionType;
  interactionStyles.forEach(function (style) {
    var styleType = style.type;
    elements.style(styleType, function (d) {
      var _d$meta = d.meta,
          colorTransform = _d$meta.colorTransform,
          stateColor = _d$meta.stateColor,
          originalColor = _d$meta.originalColor;
      colorTransform[interactionType] = colorTransform[interactionType] || {};

      if (apply && !colorTransform[interactionType][styleType]) {
        // fade selections
        colorTransform[interactionType][styleType] = style.intensity;
        var color = transfromColor(colorAxis, d, styleType, style.intensity).color;
        return color;
      }

      if (!apply && colorTransform[interactionType][styleType]) {
        // unfade selections
        colorTransform[interactionType][styleType] = null;
        return transfromColor(colorAxis, d, styleType, style.intensity.map(function (e) {
          return -e;
        })).color;
      }

      var _ref3 = stateColor[styleType] ? stateColor[styleType] : originalColor,
          _ref4 = _slicedToArray(_ref3, 4),
          h = _ref4[0],
          s = _ref4[1],
          l = _ref4[2],
          a = _ref4[3];

      return "hsla(".concat(h * 360, ",").concat(s * 100, "%,").concat(l * 100, "%, ").concat(a || 1, ")");
    });
  });
};
/**
 *
 *
 * @param {*} selectionSet
 * @param {*} className
 * @param {*} hasFaded
 */

var fadeUnfadeSelection = function fadeUnfadeSelection(context, selectionSet, hasFaded, interaction) {
  var interactionConfig = {
    interaction: interaction,
    apply: hasFaded
  };
  applyInteractionStyle(context, selectionSet, 'fade', interactionConfig);
};
/**
 *
 *
 * @param {*} selectionSet
 * @param {*} className
 * @param {*} hasFaded
 */

var focusUnfocusSelection = function focusUnfocusSelection(context, selectionSet, isFocussed, interaction) {
  var interactionConfig = {
    interaction: interaction,
    apply: isFocussed
  };
  applyInteractionStyle(context, selectionSet, 'focus', interactionConfig);
};
/**
 *
 *
 * @param {*} axes
 *
 */

var getAxesScales = function getAxesScales(axes) {
  var _map = [_enums_constants__WEBPACK_IMPORTED_MODULE_3__["ENCODING"].X, _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ENCODING"].Y].map(function (e) {
    return axes[e];
  }),
      _map2 = _slicedToArray(_map, 2),
      xAxis = _map2[0],
      yAxis = _map2[1];

  var _map3 = [xAxis, yAxis].map(function (e) {
    return e && e.scale();
  }),
      _map4 = _slicedToArray(_map3, 2),
      xScale = _map4[0],
      yScale = _map4[1];

  return {
    xAxis: xAxis,
    yAxis: yAxis,
    xScale: xScale,
    yScale: yScale
  };
};
/**
 *
 *
 * @param {*} encoding
 * @param {*} fieldsConfig
 *
 */

var getEncodingFieldInf = function getEncodingFieldInf(encoding, fieldsConfig) {
  var _map5 = [_enums_constants__WEBPACK_IMPORTED_MODULE_3__["ENCODING"].X, _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ENCODING"].Y, _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ENCODING"].X0, _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ENCODING"].Y0, _enums_constants__WEBPACK_IMPORTED_MODULE_3__["COLOR"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["SHAPE"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["SIZE"]].map(function (e) {
    return encoding[e] && encoding[e].field;
  }),
      _map6 = _slicedToArray(_map5, 7),
      xField = _map6[0],
      yField = _map6[1],
      x0Field = _map6[2],
      y0Field = _map6[3],
      colorField = _map6[4],
      shapeField = _map6[5],
      sizeField = _map6[6];

  var _map7 = [xField, yField, x0Field, y0Field].map(function (e) {
    return fieldsConfig[e] && fieldsConfig[e].def.type;
  }),
      _map8 = _slicedToArray(_map7, 2),
      xFieldType = _map8[0],
      yFieldType = _map8[1];

  var _map9 = [xField, yField].map(function (e) {
    return fieldsConfig[e] && (fieldsConfig[e].def.subtype || fieldsConfig[e].def.type);
  }),
      _map10 = _slicedToArray(_map9, 2),
      xFieldSubType = _map10[0],
      yFieldSubType = _map10[1];

  var _map11 = [xField, yField, x0Field, y0Field].map(function (e) {
    return fieldsConfig[e] && fieldsConfig[e].index;
  }),
      _map12 = _slicedToArray(_map11, 4),
      xFieldIndex = _map12[0],
      yFieldIndex = _map12[1],
      x0FieldIndex = _map12[2],
      y0FieldIndex = _map12[3];

  return {
    xField: xField,
    yField: yField,
    colorField: colorField,
    shapeField: shapeField,
    sizeField: sizeField,
    x0Field: x0Field,
    y0Field: y0Field,
    xFieldType: xFieldType,
    yFieldType: yFieldType,
    xFieldSubType: xFieldSubType,
    yFieldSubType: yFieldSubType,
    xFieldIndex: xFieldIndex,
    yFieldIndex: yFieldIndex,
    x0FieldIndex: x0FieldIndex,
    y0FieldIndex: y0FieldIndex
  };
};
/**
 *
 *
 * @param {*} dataModel
 * @param {*} config
 * @param {*} transformType
 *
 */

var transformData = function transformData(dataModel, config, transformType, encodingFieldInf) {
  var data = dataModel.getData({
    withUid: true
  });
  var schema = data.schema;
  var transform = config.transform;
  var xField = encodingFieldInf.xField,
      yField = encodingFieldInf.yField,
      xFieldType = encodingFieldInf.xFieldType,
      yFieldType = encodingFieldInf.yFieldType;
  var uniqueField = xFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE ? yField : xField;
  return Object(_chartshq_transform__WEBPACK_IMPORTED_MODULE_2__["transformFactory"])(transformType)(schema, data.data, {
    groupBy: transform.groupBy,
    uniqueField: uniqueField,
    sort: transform.sort || 'none',
    offset: transform.offset,
    orderBy: transform.orderBy,
    value: yFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE ? yField : xField
  }, data.uids);
};
var getIndividualClassName = function getIndividualClassName(d, i, data, context) {
  var className = context.config().individualClassName;
  var classNameStr = '';

  if (className instanceof Function) {
    classNameStr = className(d, i, data, context);
  }

  return classNameStr;
};
/*
 * This method resolves the x, y, x0 and y0 values from the transformed data.
 * It also checks the type of transformed data for example, if it is a stacked data
 * then it fetches the y and y0 values from the stacked data.
 * @param {Array.<Array>} transformedData transformed data
 * @param {Object} fieldsConfig field definitions
 * @param {string} transformType type of transformed data - stack, group or identity.
 * @return {Array.<Object>} Normalized data
*/

var getNormalizedData = function getNormalizedData(transformedData, fieldsConfig, encodingFieldInf, transformType) {
  var transformedDataArr = transformType === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["IDENTITY"] ? [transformedData] : transformedData;
  var xFieldType = encodingFieldInf.xFieldType,
      xFieldIndex = encodingFieldInf.xFieldIndex,
      yFieldIndex = encodingFieldInf.yFieldIndex,
      x0FieldIndex = encodingFieldInf.x0FieldIndex,
      y0FieldIndex = encodingFieldInf.y0FieldIndex;
  var fieldsLen = Object.keys(fieldsConfig).length;
  /**
   * Returns normalized data from transformed data. It recursively traverses through
   * the transformed data if there it is nested.
   */

  return transformedDataArr.map(function (data) {
    var values = transformType === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["GROUP"] ? data.values : data;
    return values.map(function (d) {
      var pointObj = {};
      var tuple;

      if (transformType === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["STACK"]) {
        tuple = d.data || [];
        var y;
        var y0;
        var x;
        var x0;

        if (d[1] >= d[0]) {
          y = x0 = d[1];
          x = y0 = d[0];
        } else {
          y = x0 = d[0];
          x = y0 = d[1];
        }

        pointObj = xFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE ? {
          x: x,
          x0: x0,
          y: tuple[yFieldIndex],
          y0: tuple[yFieldIndex]
        } : {
          x: tuple[xFieldIndex],
          x0: tuple[xFieldIndex],
          y: y,
          y0: y0
        };
        pointObj._data = tuple;
        pointObj._id = tuple[fieldsLen];
      } else {
        pointObj = {
          x: d[xFieldIndex],
          y: d[yFieldIndex],
          x0: d[x0FieldIndex],
          y0: d[y0FieldIndex]
        };
        pointObj._data = d;
        pointObj._id = d[fieldsLen];
      }

      return pointObj;
    });
  }).filter(function (d) {
    return d.length;
  });
};
var calculateDomainFromData = function calculateDomainFromData(data, encodingFieldInf, transformType) {
  var xFieldSubType = encodingFieldInf.xFieldSubType,
      yFieldSubType = encodingFieldInf.yFieldSubType,
      xField = encodingFieldInf.xField,
      yField = encodingFieldInf.yField,
      x0Field = encodingFieldInf.x0Field,
      y0Field = encodingFieldInf.y0Field;
  var domains = {};
  var yEnc = _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ENCODING"].Y;
  var xEnc = _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ENCODING"].X;

  if (xField) {
    domains.x = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getDomainFromData"])(data, x0Field || transformType === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["STACK"] ? [xEnc, _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ENCODING"].X0] : [xEnc, xEnc], xFieldSubType);
  }

  if (yField) {
    domains.y = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getDomainFromData"])(data, y0Field || transformType === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["STACK"] ? [_enums_constants__WEBPACK_IMPORTED_MODULE_3__["ENCODING"].Y0, _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ENCODING"].Y] : [yEnc, yEnc], yFieldSubType);
  }

  return domains;
};
var attachDataToVoronoi = function attachDataToVoronoi(voronoi, points) {
  var _ref5;

  voronoi.data((_ref5 = []).concat.apply(_ref5, _toConsumableArray(points)).filter(function (d) {
    return d._id !== undefined;
  }).map(function (d) {
    var point = d.update;
    return {
      x: point.x,
      y: point.y,
      data: d
    };
  }));
};
/**
 *
 *
 * @param {*} target
 * @param {*} styles
 * @param {*} remove
 */

var updateStyle = function updateStyle(target, styles, remove) {
  for (var key in styles) {
    if ({}.hasOwnProperty.call(styles, key)) {
      target.style(key, remove ? null : styles[key]);
    }
  }
};
/**
 *
 *
 * @param {*} mount
 * @param {*} context
 */

var animateGroup = function animateGroup(mount, context) {
  var groupTransition;
  var update;
  var transition = context.transition,
      groupAnimateStyle = context.groupAnimateStyle;
  var duration = transition.duration,
      effect = transition.effect,
      disabled = transition.disabled;

  if (groupAnimateStyle) {
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setStyles"])(mount.node(), groupAnimateStyle.enter);
    update = groupAnimateStyle.update;

    if (!disabled) {
      groupTransition = mount.transition().ease(muze_utils__WEBPACK_IMPORTED_MODULE_0__["easeFns"][effect]).duration(duration).on('end', function () {
        updateStyle(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this), update, true);
      });
    } else {
      groupTransition = mount;
    }

    updateStyle(groupTransition, update);
  }
};
var positionPoints = function positionPoints(context, points) {
  var positioner = context.encodingTransform();

  if (positioner) {
    return positioner(points, context, {
      smartLabel: context._dependencies.smartLabel
    });
  }

  return points;
};
/**
  * Gets the width of each group. It gets the width from axis if it is available for
  * example when the scale is nominal else it calculates the width from the
  * range of the axis and number of data points.
  *
  * @param {SimpleAxis} axis instance of axis
  * @param {number} minDiff Minimum difference between data points
  * @return {number} width of each bar
  * @private
*/

var getGroupSpan = function getGroupSpan(axis, minDiff) {
  var groupSpan;
  var width = axis.getUnitWidth();
  var scale = axis.scale();
  var range = scale.range();
  var domain = scale.domain();
  !width ? groupSpan = Math.abs(range[1] - range[0]) / Math.abs(domain[1] - domain[0]) * minDiff : groupSpan = width;
  return groupSpan;
};
var getPlotMeasurement = function getPlotMeasurement(context, dimensionalValues) {
  var fieldInfo = context.encodingFieldsInf();
  var axes = context.axes();
  var transformType = context.transformType();
  var config = context.config();
  var bandScale = context._bandScale;
  return ['x', 'y'].map(function (type) {
    var span = 0;
    var groupSpan = 0;
    var padding = 0;
    var offsetValues = [];

    if (fieldInfo["".concat(type, "FieldType")] === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION) {
      var actualGroupWidth;
      var isTemporal = fieldInfo["".concat(type, "FieldSubType")] === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL;
      var timeDiff = isTemporal ? context.dataProps().timeDiffs[type] : 0;
      var axis = axes[type];
      var pad = config["pad".concat(type.toUpperCase())];
      var innerPadding = config.innerPadding;
      var keys = dimensionalValues;
      var scale = axis.scale();
      groupSpan = getGroupSpan(axis, timeDiff);
      var isAxisBandScale = axis.constructor.type() === BAND;
      var axisPadding = axis.config().padding; // If it is a grouped bar then the width of each bar in a grouping is retrieved from
      // a band scale. The band scale will have range equal to width of one group of bars and
      // the domain is set to series keys.

      if (transformType === 'group') {
        var groupPadding = isAxisBandScale ? 0 : axisPadding * groupSpan / 2;
        bandScale.range([groupPadding, groupSpan - groupPadding]).domain(keys).paddingInner(innerPadding);
        span = bandScale.bandwidth();
        actualGroupWidth = groupSpan - (isAxisBandScale ? 0 : axisPadding * groupSpan);
        offsetValues = keys.map(function (key) {
          return bandScale(key) - (isAxisBandScale ? 0 : groupSpan / 2);
        });
      } else if (pad !== undefined) {
        var offset;

        if (isAxisBandScale) {
          var step = scale.step();
          offset = scale.padding() * step;
          span = scale.bandwidth() + offset;
        } else {
          span = groupSpan;
        }

        offsetValues = keys.map(function () {
          return isAxisBandScale ? -(offset / 2) : -(span / 2);
        });
      } else {
        padding = isAxisBandScale ? 0 : axisPadding * groupSpan;
        span = groupSpan - padding;
        actualGroupWidth = span;
        offsetValues = keys.map(function () {
          return isAxisBandScale ? 0 : -(span / 2);
        });
      }

      groupSpan = actualGroupWidth;
      padding = isAxisBandScale ? axisPadding * axis.scale().step() : axisPadding * groupSpan;
    }

    return {
      span: span,
      offsetValues: offsetValues,
      groupSpan: groupSpan,
      padding: padding
    };
  });
};
var initializeGlobalState = function initializeGlobalState(context) {
  var store = context.store();
  var globalState = context.constructor.getState()[0];
  var namespace = context.metaInf().namespace;

  for (var prop in globalState) {
    store.append("".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].LAYER_GLOBAL_NAMESPACE, ".").concat(prop), _defineProperty({}, namespace, null));
  }
};
var resolveInvalidTransformType = function resolveInvalidTransformType(context) {
  var _context$encodingFiel = context.encodingFieldsInf(),
      xField = _context$encodingFiel.xField,
      yField = _context$encodingFiel.yField,
      xFieldType = _context$encodingFiel.xFieldType,
      yFieldType = _context$encodingFiel.yFieldType;

  var groupByField = context.config().transform.groupBy;
  var fieldsConfig = context.data().getFieldsConfig();
  var groupByFieldMeasure = fieldsConfig[groupByField] && fieldsConfig[groupByField].def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE;

  if (!xField || !yField || groupByFieldMeasure || !groupByField || xFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION && yFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION) {
    return _enums_constants__WEBPACK_IMPORTED_MODULE_3__["IDENTITY"];
  }

  return null;
};
var getValidTransform = function getValidTransform(context) {
  return resolveInvalidTransformType(context) || context.config().transform.type;
};
var getValidTransformForAggFn = function getValidTransformForAggFn(context) {
  var resolvedInvalidTransformType = resolveInvalidTransformType(context);

  if (resolvedInvalidTransformType) {
    return resolvedInvalidTransformType;
  }

  var _context$encodingFiel2 = context.encodingFieldsInf(),
      xField = _context$encodingFiel2.xField,
      yField = _context$encodingFiel2.yField,
      xFieldType = _context$encodingFiel2.xFieldType,
      yFieldType = _context$encodingFiel2.yFieldType;

  var groupByField = context.config().transform.groupBy;
  var isCustomTransformTypeProvided = !!Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getObjProp"])(context._customConfig, 'transform', 'type');
  var transformType = context.config().transform.type;

  if (!isCustomTransformTypeProvided && groupByField && xFieldType !== yFieldType) {
    var measureField = xFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE ? xField : yField;

    var _retrieveNearestGroup = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["retrieveNearestGroupByReducers"])(context.data(), measureField),
        aggFn = _retrieveNearestGroup[measureField];

    transformType = aggFn === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["AGG_FN_SUM"] ? _enums_constants__WEBPACK_IMPORTED_MODULE_3__["STACK"] : _enums_constants__WEBPACK_IMPORTED_MODULE_3__["GROUP"];
  }

  return transformType;
};
var getMarkId = function getMarkId(source, schema) {
  return source.filter(function (val, i) {
    return schema[i] && schema[i].type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
  }).join();
};

/***/ }),

/***/ "./packages/visual-layer/src/index.js":
/*!********************************************!*\
  !*** ./packages/visual-layer/src/index.js ***!
  \********************************************/
/*! exports provided: BaseLayer, BarLayer, LineLayer, AreaLayer, PointLayer, ArcLayer, TextLayer, TickLayer, layerFactory, SimpleLayer, layerRegistry, LAYER_TYPES */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _layers_area__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layers/area */ "./packages/visual-layer/src/layers/area/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AreaLayer", function() { return _layers_area__WEBPACK_IMPORTED_MODULE_0__["AreaLayer"]; });

/* harmony import */ var _layers_arc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./layers/arc */ "./packages/visual-layer/src/layers/arc/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ArcLayer", function() { return _layers_arc__WEBPACK_IMPORTED_MODULE_1__["ArcLayer"]; });

/* harmony import */ var _layers_line__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layers/line */ "./packages/visual-layer/src/layers/line/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LineLayer", function() { return _layers_line__WEBPACK_IMPORTED_MODULE_2__["LineLayer"]; });

/* harmony import */ var _layers_text__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./layers/text */ "./packages/visual-layer/src/layers/text/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TextLayer", function() { return _layers_text__WEBPACK_IMPORTED_MODULE_3__["TextLayer"]; });

/* harmony import */ var _layers_point__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./layers/point */ "./packages/visual-layer/src/layers/point/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PointLayer", function() { return _layers_point__WEBPACK_IMPORTED_MODULE_4__["PointLayer"]; });

/* harmony import */ var _layers_bar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./layers/bar */ "./packages/visual-layer/src/layers/bar/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BarLayer", function() { return _layers_bar__WEBPACK_IMPORTED_MODULE_5__["BarLayer"]; });

/* harmony import */ var _layers_tick__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./layers/tick */ "./packages/visual-layer/src/layers/tick/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TickLayer", function() { return _layers_tick__WEBPACK_IMPORTED_MODULE_6__["TickLayer"]; });

/* harmony import */ var _simple_layer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./simple-layer */ "./packages/visual-layer/src/simple-layer/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleLayer", function() { return _simple_layer__WEBPACK_IMPORTED_MODULE_7__["SimpleLayer"]; });

/* harmony import */ var _base_layer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./base-layer */ "./packages/visual-layer/src/base-layer/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseLayer", function() { return _base_layer__WEBPACK_IMPORTED_MODULE_8__["BaseLayer"]; });

/* harmony import */ var _enums_layer_types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./enums/layer-types */ "./packages/visual-layer/src/enums/layer-types.js");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "LAYER_TYPES", function() { return _enums_layer_types__WEBPACK_IMPORTED_MODULE_9__; });
/* harmony import */ var _layer_factory__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./layer-factory */ "./packages/visual-layer/src/layer-factory/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "layerFactory", function() { return _layer_factory__WEBPACK_IMPORTED_MODULE_10__["default"]; });

/* harmony import */ var _layer_registry__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./layer-registry */ "./packages/visual-layer/src/layer-registry.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "layerRegistry", function() { return _layer_registry__WEBPACK_IMPORTED_MODULE_11__["default"]; });















/***/ }),

/***/ "./packages/visual-layer/src/layer-factory/index.js":
/*!**********************************************************!*\
  !*** ./packages/visual-layer/src/layer-factory/index.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _layer_factory__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layer-factory */ "./packages/visual-layer/src/layer-factory/layer-factory.js");

/* harmony default export */ __webpack_exports__["default"] = (_layer_factory__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "./packages/visual-layer/src/layer-factory/layer-factory.js":
/*!******************************************************************!*\
  !*** ./packages/visual-layer/src/layer-factory/layer-factory.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }



var parseLayerDefinition = function parseLayerDefinition(sink, definition, layerDef, layerType) {
  for (var key in definition) {
    if (Object.hasOwnProperty.call(definition, key)) {
      var strs = void 0;
      var propValue = void 0;
      var def = definition[key];

      if (Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["isSimpleObject"])(def)) {
        sink[key] = {};
        parseLayerDefinition(sink[key], def, layerDef, layerType);
      } else if (typeof def === 'string' && (strs = def.split('.')) && strs[0] === layerType) {
        propValue = muze_utils__WEBPACK_IMPORTED_MODULE_0__["getObjProp"].apply(void 0, [layerDef].concat(_toConsumableArray(strs.slice(1, strs.length))));

        if (propValue !== undefined) {
          sink[key] = propValue;
        }
      } else {
        sink[key] = def;
      }
    }
  }
};

var sanitizeEncoding = function sanitizeEncoding(encoding) {
  // Create object for each encoding value if encoding value is a string
  for (var key in encoding) {
    if (typeof encoding[key] === 'string') {
      encoding[key] = {
        field: encoding[key]
      };
    }
  }
};
/**
 * Layer Factory creates layers based on the layer type. All types of layers needs to register in
 * the layer factory. For getting a layer instance, getLayer method needs to invoked with the
 * layerType and other arguments. It also registers the definition of composite layers.
 *
 * @public
 *
 * @module LayerFactory
 */


var layerFactory = function () {
  var compositeLayers = {};
  var factoryObj = {
    setLayerRegistry: function setLayerRegistry(reg) {
      factoryObj._layerRegistry = reg;
    },
    getSerializedConf: function getSerializedConf(mark, layerDef) {
      var serializedDefs;
      var defs = compositeLayers[mark];
      var newConf = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, layerDef); // If it is a composite layer then resolve all the definitions of each unit layer

      if (defs) {
        serializedDefs = defs.map(function (unitLayerDef) {
          var sDef = {};
          parseLayerDefinition(sDef, unitLayerDef, newConf, mark);
          sanitizeEncoding(sDef.encoding);
          return sDef;
        });
      } else {
        var encoding = newConf.encoding; // Create object for each encoding value if encoding value is a string

        sanitizeEncoding(encoding);
        serializedDefs = newConf;
      }

      return serializedDefs;
    },
    getLayerInstance: function getLayerInstance(layerDef) {
      for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        params[_key - 1] = arguments[_key];
      }

      var layerRegistry = factoryObj._layerRegistry;
      layerDef = !(layerDef instanceof Array) ? [layerDef] : layerDef;
      var instances = layerDef.map(function (layerObj) {
        var layerConstructor = layerRegistry[layerObj.mark];
        return layerConstructor.create.apply(layerConstructor, params);
      });
      return instances.length === 1 ? instances[0] : instances;
    },
    getLayerClass: function getLayerClass(mark) {
      return factoryObj._layerRegistry[mark];
    },

    /**
     * Registers a new composite layer definition in the layer factory.
     *
     * @public
     *
     * @param {string} layerType Mark type of the new composite layer.
     * @param {Array} layerDefs Layer definitions of the composite layer.
     */
    composeLayers: function composeLayers(layerType, layerDefs) {
      compositeLayers[layerType] = layerDefs;
    },
    sanitizeLayerConfig: function sanitizeLayerConfig(layerDef) {
      var newConf = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, layerDef);
      sanitizeEncoding(newConf.encoding);
      return newConf;
    }
  };
  return factoryObj;
}();

/* harmony default export */ __webpack_exports__["default"] = (layerFactory);

/***/ }),

/***/ "./packages/visual-layer/src/layer-registry.js":
/*!*****************************************************!*\
  !*** ./packages/visual-layer/src/layer-registry.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _defaults__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaults */ "./packages/visual-layer/src/defaults.js");

/* harmony default export */ __webpack_exports__["default"] = (function () {
  var reg = _defaults__WEBPACK_IMPORTED_MODULE_0__["DEFAULT_LAYERS"];
  var regObj = {
    set: function set(key, def) {
      reg[key] = def;
      return regObj;
    },
    get: function get() {
      return reg;
    }
  };
  return regObj;
});

/***/ }),

/***/ "./packages/visual-layer/src/layers/arc/arc-helper.js":
/*!************************************************************!*\
  !*** ./packages/visual-layer/src/layers/arc/arc-helper.js ***!
  \************************************************************/
/*! exports provided: getRangeValue, getRadiusRange, getPreviousPoint, tweenPie, tweenExitPie, getFieldIndices */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRangeValue", function() { return getRangeValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRadiusRange", function() { return getRadiusRange; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getPreviousPoint", function() { return getPreviousPoint; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tweenPie", function() { return tweenPie; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tweenExitPie", function() { return tweenExitPie; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFieldIndices", function() { return getFieldIndices; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }



/**
 * Returns the range value from a value inside the domain
 *
 * @param {Object} domainValue Value whose range has to be returned
 * @return {number} range value
 * @memberof ArcLayer
 */

var getRangeValue = function getRangeValue(datum, range, domain, defaultRadius, sizeAxis) {
  var domainMultiplier = 1;
  var outerRadiusValue = datum.outerRadiusValue,
      sizeVal = datum.sizeVal;
  var sizeAxisDomain = sizeAxis.domain();
  var sizeMultiplier = sizeAxis.getSize(sizeVal) / (sizeAxisDomain ? sizeAxis.range()[1] : sizeAxis.config().value);
  domainMultiplier *= (range[1] - range[0]) / (domain[1] - domain[0]);
  var rangeVal = range[0] + (outerRadiusValue - domain[0]) * domainMultiplier;
  return (rangeVal || defaultRadius) * sizeMultiplier;
};
/**
 *
 *
 * @memberof ArcLayer
 */

var getRadiusRange = function getRadiusRange(width, height, config) {
  var minOuterRadius = config.minOuterRadius,
      innerRadius = config.innerRadius,
      outerRadius = config.outerRadius,
      innerRadiusFixer = config.innerRadiusFixer;
  return [Math.max(innerRadius + innerRadiusFixer || 0, minOuterRadius), outerRadius || Math.min(height, width) / 2];
};
var getPreviousPoint = function getPreviousPoint(prevData, currIndex, config) {
  var prevArc = prevData[currIndex - 1];
  var nextArc = prevData[currIndex];

  if (prevArc && nextArc) {
    return {
      startAngle: prevArc.endAngle,
      endAngle: nextArc.startAngle
    };
  } else if (!nextArc) {
    return {
      startAngle: config.endAngle * Math.PI * 2 / 360,
      endAngle: config.endAngle * Math.PI * 2 / 360
    };
  }

  return {
    startAngle: config.startAngle * Math.PI * 2 / 360,
    endAngle: config.startAngle * Math.PI * 2 / 360
  };
};
/**
 *
 *
 * @param {*} path
 * @param {*} b
 *
 * @memberof ArcLayer
 */

var tweenPie = function tweenPie(path, rangeValueGetter, b) {
  var datum = b[0].datum;
  var outerRadius = rangeValueGetter(datum);
  datum.outerRadius = outerRadius;
  datum._previousInfo.outerRadius = datum._previousInfo.outerRadius || outerRadius;
  return function (t) {
    return path(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["interpolator"])()(datum._previousInfo, datum)(t));
  };
};
/**
 *
 *
 * @param {*} path
 * @param {*} b
 *
 * @memberof ArcLayer
 */

var tweenExitPie = function tweenExitPie(consecutiveExits, transition, rangeValueGetter, path) {
  if (consecutiveExits.length > 0) {
    consecutiveExits.forEach(function (consecutiveExitArr) {
      var startAngle = consecutiveExitArr[0].datum.startAngle;
      var endAngle = consecutiveExitArr[consecutiveExitArr.length - 1].datum.endAngle;
      var mid = Math.PI * 2 * startAngle / (Math.PI * 2 + startAngle - endAngle);
      consecutiveExitArr.forEach(function (e) {
        var elem = e.elem,
            datum = e.datum;
        elem.each(function () {
          var gElem = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this);
          gElem.selectAll('path').transition().duration(transition.duration).attrTween('d', function () {
            return function (t) {
              var outerRadius = rangeValueGetter(datum);
              datum.outerRadius = outerRadius;
              return path(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["interpolator"])()(datum, {
                startAngle: mid,
                endAngle: mid,
                outerRadius: outerRadius
              })(t));
            };
          }).remove();
          gElem.remove();
        });
      });
    });
  }
};
var getFieldIndices = function getFieldIndices(encoding, fieldsConfig) {
  var _map = [_enums_constants__WEBPACK_IMPORTED_MODULE_1__["ANGLE"], _enums_constants__WEBPACK_IMPORTED_MODULE_1__["RADIUS"], _enums_constants__WEBPACK_IMPORTED_MODULE_1__["COLOR"], _enums_constants__WEBPACK_IMPORTED_MODULE_1__["SIZE"]].map(function (e) {
    return encoding[e].field;
  }),
      _map2 = _slicedToArray(_map, 4),
      angleField = _map2[0],
      radiusField = _map2[1],
      colorField = _map2[2],
      sizeField = _map2[3];

  var _map3 = [angleField, sizeField, radiusField].map(function (e) {
    var conf = fieldsConfig[e];

    if (conf && conf.def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE) {
      return conf.index;
    }

    return null;
  }),
      _map4 = _slicedToArray(_map3, 3),
      angleIndex = _map4[0],
      sizeIndex = _map4[1],
      radiusIndex = _map4[2];

  var colorIndex = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getObjProp"])(fieldsConfig, colorField, 'index');
  return {
    angleIndex: angleIndex,
    sizeIndex: sizeIndex,
    radiusIndex: radiusIndex,
    colorIndex: colorIndex
  };
};

/***/ }),

/***/ "./packages/visual-layer/src/layers/arc/arc.js":
/*!*****************************************************!*\
  !*** ./packages/visual-layer/src/layers/arc/arc.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ArcLayer; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _default_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./default-config */ "./packages/visual-layer/src/layers/arc/default-config.js");
/* harmony import */ var _base_layer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../base-layer */ "./packages/visual-layer/src/base-layer/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../helpers */ "./packages/visual-layer/src/helpers/index.js");
/* harmony import */ var _arc_helper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./arc-helper */ "./packages/visual-layer/src/layers/arc/arc-helper.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./styles.scss */ "./packages/visual-layer/src/layers/arc/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_6__);
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }








var pie = muze_utils__WEBPACK_IMPORTED_MODULE_0__["Symbols"].pie;
var arc = muze_utils__WEBPACK_IMPORTED_MODULE_0__["Symbols"].arc;
/**
 * Arc Layer creates a plot with polar coordinates.
 *
 * @public
 *
 * @class
 * @module ArcLayer
 * @extends BaseLayer
 */

var ArcLayer =
/*#__PURE__*/
function (_BaseLayer) {
  _inherits(ArcLayer, _BaseLayer);

  function ArcLayer(data, axes, config, dependencies) {
    var _this;

    _classCallCheck(this, ArcLayer);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(ArcLayer).call(this, data, axes, config, dependencies));
    _this._prevPieData = {};
    return _this;
  }
  /**
   * returns the default configuration of the layer
   *
   * @static
   * @return {Object} Default configuration for arc layer
   * @memberof ArcLayer
   */


  _createClass(ArcLayer, [{
    key: "elemType",

    /**
     *
     *
     *
     * @memberof ArcLayer
     */
    value: function elemType() {
      return 'path';
    }
    /**
     * Transforms data in the appropriate data structure to be consumed by the layer for rendering
     *
     * @param {Object} data data model associated with the layer
     * @param {Object} config configuration of the layer that contains encoding and other parameters
     * @return {Object} Transformed pie data
     * @memberof ArcLayer
     */

  }, {
    key: "getTransformedData",
    value: function getTransformedData(dataModel, config) {
      var _this2 = this;

      var pieData = [];
      var pieIndex = {};
      var startAngle = config.startAngle,
          endAngle = config.endAngle,
          encoding = config.encoding,
          sort = config.sort,
          minOuterRadius = config.minOuterRadius;
      var prevData = this._transformedData || [];
      var fieldsConfig = this.data().getFieldsConfig();

      var _getFieldIndices = Object(_arc_helper__WEBPACK_IMPORTED_MODULE_5__["getFieldIndices"])(encoding, fieldsConfig),
          angleIndex = _getFieldIndices.angleIndex,
          sizeIndex = _getFieldIndices.sizeIndex,
          radiusIndex = _getFieldIndices.radiusIndex,
          colorIndex = _getFieldIndices.colorIndex;

      var dataVal = dataModel.getData();
      var data = dataVal.data;
      var uids = dataVal.uids;
      this._prevPieData = {};
      prevData.forEach(function (e, index) {
        _this2._prevPieData[e.uid] = [e, index];
        pieIndex[e.index] = e;
      }); // Creating pie data using angle field provided. If the angle field is a dimension,
      // all the angles will be equal(360/number of dimensions)

      pieData = pie().startAngle(startAngle / 180 * Math.PI).endAngle(Math.PI * endAngle / 180).value(function (d) {
        return d[angleIndex] || 1;
      }).sortValues(null);
      sort.length && radiusIndex && pieData.sort(function (a, b) {
        if (sort === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ASCENDING"]) {
          return a[radiusIndex] - b[radiusIndex];
        }

        return b[radiusIndex] - a[radiusIndex];
      });
      var sizeVal = data.reduce(function (acc, d) {
        return acc + (d[sizeIndex] || 0);
      }, 1); // Adding the radius field values to each data point in pie data

      pieData = pieData(data).map(function (d, i) {
        d.outerRadiusValue = data[i][radiusIndex] || minOuterRadius;
        d.innerRadius = config.innerRadius;
        d.colorVal = data[i][colorIndex];
        d.angleVal = data[i][angleIndex];
        d.sizeVal = sizeVal;
        d.uid = uids[i];
        d.rowId = d.uid;
        d.source = data[i];
        d._previousInfo = _this2._prevPieData[d.uid] ? _this2._prevPieData[d.uid][0] : Object(_arc_helper__WEBPACK_IMPORTED_MODULE_5__["getPreviousPoint"])(pieIndex, d.index, config);
        return d;
      });
      return pieData;
    }
    /**
     * Returns normalized data after transformation (it is the same in the case of pie layer)
     *
     * @param {Object} data transformed data
     * @return {Object} normalized data
     * @memberof ArcLayer
     */

  }, {
    key: "getNormalizedData",
    value: function getNormalizedData(data) {
      return data;
    }
    /**
     *
     *
     * @param {Object} data
     * @return {}
     * @memberof ArcLayer
     */

  }, {
    key: "calculateDomainFromData",
    value: function calculateDomainFromData(data) {
      var domainKey = _enums_constants__WEBPACK_IMPORTED_MODULE_3__["OUTER_RADIUS_VALUE"];
      return {
        radius: Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getDomainFromData"])([data], [domainKey, domainKey])
      };
    }
    /**
     *
     *
     * @param {Object} x
     * @param {Object} y
     * @return {}
     * @memberof ArcLayer
     */

  }, {
    key: "getNearestPoint",
    value: function getNearestPoint(x, y) {
      var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var dataPoint = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(config.event.target).data()[0];

      if (Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["isSimpleObject"])(dataPoint)) {
        var _dataPoint$datum = dataPoint.datum,
            data = _dataPoint$datum.data,
            uid = _dataPoint$datum.uid;
        return {
          id: this.getIdentifiersFromData(data, uid),
          layerId: this.id()
        };
      }

      return null;
    }
    /**
     *
     *
     * @param {*} set
     *
     * @memberof ArcLayer
     */

  }, {
    key: "getPlotElementsFromSet",
    value: function getPlotElementsFromSet(set) {
      return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this.mount()).selectAll(this.elemType()).filter(function (d) {
        return set.indexOf(d.datum.uid) !== -1;
      });
    }
    /**
     *
     *
     * @param {Object} container
     * @return {}
     * @memberof ArcLayer
     */

  }, {
    key: "render",
    value: function render(container) {
      var _this3 = this;

      var _this$measurement = this.measurement(),
          height = _this$measurement.height,
          width = _this$measurement.width;

      var _this$config = this.config(),
          classPrefix = _this$config.classPrefix,
          defClassName = _this$config.defClassName,
          minOuterRadius = _this$config.minOuterRadius,
          innerRadius = _this$config.innerRadius,
          outerRadius = _this$config.outerRadius,
          cornerRadius = _this$config.cornerRadius,
          padAngle = _this$config.padAngle,
          padRadius = _this$config.padRadius,
          padding = _this$config.padding,
          transition = _this$config.transition,
          innerRadiusFixer = _this$config.innerRadiusFixer;

      var sizeAxis = this.axes().size;
      var transformedData = this._transformedData;
      var chartHeight = height - padding.top - padding.bottom;
      var chartWidth = width - padding.left - padding.right;
      var qualClassName = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getQualifiedClassName"])(defClassName, this.id(), classPrefix); // Sets range for radius

      var range = Object(_arc_helper__WEBPACK_IMPORTED_MODULE_5__["getRadiusRange"])(chartWidth, chartHeight, {
        minOuterRadius: minOuterRadius,
        innerRadius: innerRadius,
        outerRadius: outerRadius,
        innerRadiusFixer: innerRadiusFixer
      });
      var colorAxis = this.axes().color;
      var defaultRadius = outerRadius || Math.min(chartHeight, chartWidth) / 2;
      var radiusDomain = this.domain().radius;

      var rangeValueGetter = function rangeValueGetter(d) {
        return Object(_arc_helper__WEBPACK_IMPORTED_MODULE_5__["getRangeValue"])(d, range, radiusDomain, defaultRadius, sizeAxis);
      }; // This returns a function that generates the arc path based on the datum provided


      var path = arc() // .outerRadius(d => rangeValueGetter(d))
      .innerRadius(innerRadius ? Math.min(chartHeight / 2, chartWidth / 2, innerRadius) : 0).cornerRadius(cornerRadius).padAngle(padAngle).padRadius(padRadius);
      this._chartWidth = chartWidth;
      this._chartHeight = chartHeight; // Creating the group that holds all the arcs

      var g = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(container), 'g', [1], "".concat(qualClassName[0], "-group")).classed("".concat(qualClassName[1], "-group"), true).attr('transform', "translate(".concat(chartWidth / 2, ",").concat(chartHeight / 2, ")"));

      var tween = function tween(elem) {
        Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(elem, 'path', function (d, i) {
          return [{
            datum: d,
            index: i,
            arcFn: path,
            meta: {
              originalColor: colorAxis.getRawColor(d.colorVal),
              stateColor: {},
              colorTransform: {}
            }
          }];
        }, "".concat(qualClassName[0], "-path")).style('fill', function (d) {
          return colorAxis.getColor(d.datum.colorVal);
        }).transition().duration(transition.duration).on('end', _this3.registerAnimationDoneHook()).attrTween('d', function () {
          for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
            params[_key] = arguments[_key];
          }

          return Object(_arc_helper__WEBPACK_IMPORTED_MODULE_5__["tweenPie"])(path, rangeValueGetter, params);
        }).attr('class', function (d, i) {
          var individualClass = Object(_helpers__WEBPACK_IMPORTED_MODULE_4__["getIndividualClassName"])(d, i, transformedData, _this3);
          return "".concat(qualClassName[0], "-path ").concat(qualClassName[1], "-path-").concat(d.index, "\n                                    ").concat(individualClass);
        });
      };

      var consecutiveExits = [];
      var exitCounter = 0;

      var tweenExit = function tweenExit(elem, d) {
        var exitArr = consecutiveExits[exitCounter];
        var oldExitCounter = exitCounter;

        if (!exitArr) {
          exitArr = [{
            elem: elem,
            datum: d
          }];
        } else if (exitArr[exitArr.length - 1].datum.index === d.index - 1) {
          exitArr.push({
            elem: elem,
            datum: d
          });
        } else {
          exitCounter++;
        }

        consecutiveExits[oldExitCounter] = exitArr;
      }; // Creating groups for all the arcs present individually


      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(g, 'g', transformedData, "".concat(qualClassName[0]), {
        update: tween,
        exit: tweenExit
      }).attr('class', function (d, i) {
        return "".concat(qualClassName[0], " ").concat(qualClassName[1], "-").concat(i);
      });
      Object(_arc_helper__WEBPACK_IMPORTED_MODULE_5__["tweenExitPie"])(consecutiveExits, transition, rangeValueGetter, path);
      return this;
    }
    /**
     *
     *
     * @param {*} identifiers
     *
     * @memberof BaseLayer
     */

  }, {
    key: "getPointsFromIdentifiers",
    value: function getPointsFromIdentifiers(identifiers) {
      if (!this.data()) {
        return [];
      }

      var fieldNames = identifiers[0];
      var values = identifiers.slice(1, identifiers.length);
      var pieSlices = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this.mount()).selectAll('path').data();
      var fieldsConfig = this.data().getFieldsConfig();
      var filteredPies = pieSlices.filter(function (tData) {
        var data = tData.datum.data;
        var uid = tData.datum.uid;
        return fieldNames.every(function (field, idx) {
          if (field in fieldsConfig && fieldsConfig[field].def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION) {
            return values.findIndex(function (d) {
              return d[idx] === data[fieldsConfig[field].index];
            }) !== -1;
          } else if (field === muze_utils__WEBPACK_IMPORTED_MODULE_0__["ReservedFields"].ROW_ID) {
            return values.findIndex(function (d) {
              return d[idx] === uid;
            }) !== -1;
          }

          return true;
        });
      });
      var pieSliceInf = filteredPies[0];

      if (pieSliceInf) {
        var centroid = pieSliceInf.arcFn.centroid(pieSliceInf.datum);
        return [{
          x: centroid[0] + this._chartWidth / 2,
          y: centroid[1] + this._chartHeight / 2,
          width: 2,
          height: 2
        }];
      }

      return [];
    }
  }, {
    key: "getRenderProps",
    value: function getRenderProps() {
      return ["".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].GROUP_GLOBAL_NAMESPACE, ".domain.radius")];
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return _default_config__WEBPACK_IMPORTED_MODULE_1__["defaultConfig"];
    }
    /**
     *
     *
     * @static
     *
     * @memberof ArcLayer
     */

  }, {
    key: "formalName",
    value: function formalName() {
      return 'arc';
    }
  }]);

  return ArcLayer;
}(_base_layer__WEBPACK_IMPORTED_MODULE_2__["BaseLayer"]);



/***/ }),

/***/ "./packages/visual-layer/src/layers/arc/default-config.js":
/*!****************************************************************!*\
  !*** ./packages/visual-layer/src/layers/arc/default-config.js ***!
  \****************************************************************/
/*! exports provided: defaultConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultConfig", function() { return defaultConfig; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");

var defaultConfig = {
  classPrefix: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"],
  defClassName: 'layer-arc',
  padding: {
    top: 1,
    bottom: 1,
    left: 1,
    right: 1
  },
  className: '',
  minOuterRadius: 10,
  interaction: {
    highlight: [{
      type: 'fill',
      intensity: [0, 0, -15, 0]
    }],
    fade: [{
      type: 'fill',
      intensity: [0, 0, +15, 0]
    }],
    focus: [{
      type: 'fill',
      intensity: [0, 0, +15, 0]
    }]
  },
  height: 100,
  width: 100,
  sort: '',
  cornerRadius: 0,
  padAngle: 0,
  padRadius: 0,
  startAngle: 0,
  endAngle: 360,
  colors: ['#F44336', 'blue', 'green', 'yellow', 'orange', 'purple'],
  transform: {
    type: 'identity'
  },
  encoding: {
    'stroke-width': {
      value: '2px'
    },
    'stroke-linejoin': {
      value: 'round'
    },
    angle: {
      value: '1'
    },
    radius: {
      value: '1'
    },
    opacity: {
      value: '1'
    },
    color: {
      value: '1'
    },
    shape: {
      value: '1'
    },
    size: {
      value: '1'
    }
  },
  innerRadiusFixer: 10,
  transition: {
    effect: 'cubic',
    duration: 500
  },
  states: {
    highlight: {
      className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"], "-layer-arc-highlight")
    },
    fadeout: {
      className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"], "-layer-arc-fadeout")
    },
    selected: {
      className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"], "-layer-arc-selected")
    }
  }
};

/***/ }),

/***/ "./packages/visual-layer/src/layers/arc/index.js":
/*!*******************************************************!*\
  !*** ./packages/visual-layer/src/layers/arc/index.js ***!
  \*******************************************************/
/*! exports provided: ArcLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _arc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arc */ "./packages/visual-layer/src/layers/arc/arc.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ArcLayer", function() { return _arc__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/visual-layer/src/layers/arc/styles.scss":
/*!**********************************************************!*\
  !*** ./packages/visual-layer/src/layers/arc/styles.scss ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/visual-layer/src/layers/area/area.js":
/*!*******************************************************!*\
  !*** ./packages/visual-layer/src/layers/area/area.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return AreaLayer; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _default_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./default-config */ "./packages/visual-layer/src/layers/area/default-config.js");
/* harmony import */ var _line__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../line */ "./packages/visual-layer/src/layers/line/index.js");
/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./renderer */ "./packages/visual-layer/src/layers/area/renderer.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./styles.scss */ "./packages/visual-layer/src/layers/area/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../helpers */ "./packages/visual-layer/src/helpers/index.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }








/**
 * Area layer renders a closed path. The mark type of this layer is ```area```. This layer can be used
 * to create stacked or multi-series areas and vertical range area plots by using the encoding properties.
 *
 * To create this layer using layer configuration from canvas,
 * ```
 *      canvas.layers([{
 *          mark: 'area',
 *          transform: {
 *              type: 'stack' // Produces a stacked area.
 *          }
 *      }]);
 * ```
 *
 * @public
 *
 * @class
 * @module AreaLayer
 * @extends LineLayer
 */

var AreaLayer =
/*#__PURE__*/
function (_LineLayer) {
  _inherits(AreaLayer, _LineLayer);

  function AreaLayer() {
    _classCallCheck(this, AreaLayer);

    return _possibleConstructorReturn(this, _getPrototypeOf(AreaLayer).apply(this, arguments));
  }

  _createClass(AreaLayer, [{
    key: "calculateDomainFromData",

    /**
     * Calculates the domain from data. It calls its parent class's method which is line layer
     * to get the domain and overwrites the domain according to its need.
     * @return {Array} Domain values
     */
    value: function calculateDomainFromData(data, encodingFieldsInf, fieldsConfig) {
      var domains = _get(_getPrototypeOf(AreaLayer.prototype), "calculateDomainFromData", this).call(this, data, fieldsConfig);

      [_enums_constants__WEBPACK_IMPORTED_MODULE_5__["ENCODING"].X, _enums_constants__WEBPACK_IMPORTED_MODULE_5__["ENCODING"].Y].forEach(function (type) {
        var fieldType = encodingFieldsInf["".concat(type, "FieldType")];

        if (fieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE && domains[type] !== undefined) {
          domains[type][0] = Math.min(domains[type][0], 0);
        }
      });
      return domains;
    }
    /**
     * Returns the drawing method of this layer
     * @return {Function} Draw method
     */

  }, {
    key: "getDrawFn",
    value: function getDrawFn() {
      return _renderer__WEBPACK_IMPORTED_MODULE_3__["default"];
    }
    /**
     * Generates the x and y positions for each point
     * @param {Array} data Data Array
     * @param {Object} encoding Visual Encodings of the layer
     * @param {Object} axes Contains the axis
     * @return {Array} Array of points
     */

  }, {
    key: "translatePoints",
    value: function translatePoints(data, encodingFieldsInf, axes) {
      var _this = this;

      var points = [];
      var transformType = this.transformType();
      var colorAxis = axes.color;
      var config = this.config();
      var encoding = config.encoding;
      var colorEncoding = encoding.color;
      var colorField = colorEncoding.field;
      var fieldsConfig = this.data().getFieldsConfig();
      var colorFieldIndex = colorField && fieldsConfig[colorField].index;
      var xField = encodingFieldsInf.xField,
          yField = encodingFieldsInf.yField,
          y0Field = encodingFieldsInf.y0Field;

      var _getAxesScales = Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["getAxesScales"])(axes),
          xAxis = _getAxesScales.xAxis,
          yAxis = _getAxesScales.yAxis;

      var classNameFn = config.individualClassName;
      var isXDim = fieldsConfig[xField] && fieldsConfig[xField].def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
      var isYDim = fieldsConfig[yField] && fieldsConfig[yField].def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
      var key = isXDim ? 'x' : isYDim ? 'y' : null;
      points = data.map(function (d, i) {
        var xPx = xAxis.getScaleValue(d.x) + xAxis.getUnitWidth() / 2;
        var yPx = yAxis.getScaleValue(d.y);
        var y0Px = y0Field || transformType === _enums_constants__WEBPACK_IMPORTED_MODULE_5__["STACK"] ? yAxis.getScaleValue(d.y0) : yAxis.getScaleValue(0);

        var _getLayerColor = Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["getLayerColor"])({
          datum: d,
          index: i
        }, {
          colorEncoding: colorEncoding,
          colorAxis: colorAxis,
          colorFieldIndex: colorFieldIndex
        }),
            color = _getLayerColor.color,
            rawColor = _getLayerColor.rawColor;

        var style = {};
        var meta = {};
        style.fill = color; // style['fill-opacity'] = 0;

        meta.stateColor = {};
        meta.originalColor = rawColor;
        meta.colorTransform = {};
        var invalidY = d.y instanceof muze_utils__WEBPACK_IMPORTED_MODULE_0__["InvalidAwareTypes"];
        var invalidY0 = d.y0 instanceof muze_utils__WEBPACK_IMPORTED_MODULE_0__["InvalidAwareTypes"];
        var point = {
          enter: {
            x: xPx,
            y: invalidY ? null : yAxis.getScaleValue(0),
            y0: invalidY0 ? null : yAxis.getScaleValue(0)
          },
          update: {
            x: xPx,
            y: invalidY ? null : yPx,
            y0: invalidY0 ? null : y0Px
          },
          _id: d._id,
          _data: d._data,
          source: d._data,
          rowId: d._id,
          className: classNameFn ? classNameFn(d, i, data, _this) : '',
          style: style,
          meta: meta
        };
        point.className = Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["getIndividualClassName"])(d, i, data, _this);

        _this.cachePoint(d[key], point);

        return point;
      });
      points = Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["positionPoints"])(this, points);
      return points;
    }
  }, {
    key: "resolveTransformType",
    value: function resolveTransformType() {
      this._transformType = Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["getValidTransformForAggFn"])(this);
    }
    /**
     * Get the css styles need to be applied on the line path
     * @param {string} color Color value
     * @return {Object} Path styles
     */

  }, {
    key: "getPathStyle",
    value: function getPathStyle(color) {
      return {
        fill: color
      };
    }
  }], [{
    key: "defaultConfig",

    /** oation of line layer
     * @return {Object} Default configuration of layer
     */
    value: function defaultConfig() {
      return _default_config__WEBPACK_IMPORTED_MODULE_1__["defaultConfig"];
    }
    /**
     *
     *
     * @static
     *
     * @memberof AreaLayer
     */

  }, {
    key: "formalName",
    value: function formalName() {
      return 'area';
    }
  }]);

  return AreaLayer;
}(_line__WEBPACK_IMPORTED_MODULE_2__["LineLayer"]);



/***/ }),

/***/ "./packages/visual-layer/src/layers/area/default-config.js":
/*!*****************************************************************!*\
  !*** ./packages/visual-layer/src/layers/area/default-config.js ***!
  \*****************************************************************/
/*! exports provided: defaultConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultConfig", function() { return defaultConfig; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");

var defaultConfig = {
  classPrefix: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"],
  defClassName: 'layer-area',
  className: '',
  interpolate: 'linear',
  transform: {
    type: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["STACK"]
  },
  interaction: {},
  nearestPointThreshold: 10,
  encoding: {
    color: {},
    x: {},
    y: {},
    y0: {},
    strokeOpacity: {
      value: 1
    }
  },
  transition: {
    effect: 'cubic',
    duration: 1000
  },
  connectNullData: false
};

/***/ }),

/***/ "./packages/visual-layer/src/layers/area/index.js":
/*!********************************************************!*\
  !*** ./packages/visual-layer/src/layers/area/index.js ***!
  \********************************************************/
/*! exports provided: AreaLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _area__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./area */ "./packages/visual-layer/src/layers/area/area.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AreaLayer", function() { return _area__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/visual-layer/src/layers/area/renderer.js":
/*!***********************************************************!*\
  !*** ./packages/visual-layer/src/layers/area/renderer.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }


var area = muze_utils__WEBPACK_IMPORTED_MODULE_0__["Symbols"].area;
/**
 * Draws a line from the points
 * Generates a svg path string
 * @param {Object} params Contains container, points and interpolate attribute.
 */

var
/* istanbul ignore next */
drawArea = function drawArea(params) {
  var filteredPoints;
  var layer = params.layer,
      container = params.container,
      points = params.points,
      style = params.style,
      transition = params.transition,
      className = params.className,
      connectNullData = params.connectNullData,
      interpolate = params.interpolate;
  var easeEffect = transition.effect,
      duration = transition.duration;
  var mount = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(container);
  var curveInterpolatorFn = muze_utils__WEBPACK_IMPORTED_MODULE_0__["pathInterpolators"][interpolate];
  var selection = mount.selectAll('path').data([params.points]);

  var _map = ['enter', 'update'].map(function (e) {
    return area().curve(curveInterpolatorFn).x(function (d) {
      return d[e].x;
    }).y1(function (d) {
      return d[e].y;
    }).y0(function (d) {
      return d[e].y0;
    }).defined(function (d) {
      return d[e].y !== null;
    });
  }),
      _map2 = _slicedToArray(_map, 2),
      enterAreaPath = _map2[0],
      updateAreaPath = _map2[1];

  filteredPoints = points;
  mount.attr('class', className);

  if (connectNullData) {
    filteredPoints = points.filter(function (d) {
      return d.update.y !== null;
    });
  }

  var selectionEnter = selection.enter().append('path').attr('d', enterAreaPath(filteredPoints));
  selection.merge(selectionEnter).transition().ease(muze_utils__WEBPACK_IMPORTED_MODULE_0__["easeFns"][easeEffect]).duration(duration).on('end', layer.registerAnimationDoneHook()).attr('d', updateAreaPath(filteredPoints)).each(function (d) {
    var element = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this);
    element.classed(d[0].className, true);
    Object.keys(style).forEach(function (key) {
      return element.style(key, style[key]);
    });
  });
};

/* harmony default export */ __webpack_exports__["default"] = (drawArea);

/***/ }),

/***/ "./packages/visual-layer/src/layers/area/styles.scss":
/*!***********************************************************!*\
  !*** ./packages/visual-layer/src/layers/area/styles.scss ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/visual-layer/src/layers/bar/bar-helper.js":
/*!************************************************************!*\
  !*** ./packages/visual-layer/src/layers/bar/bar-helper.js ***!
  \************************************************************/
/*! exports provided: getTranslatedPoints */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTranslatedPoints", function() { return getTranslatedPoints; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../helpers */ "./packages/visual-layer/src/helpers/index.js");



/**
 *
 *
 * @param {*} type
 * @param {*} fieldInfo
 * @param {*} config
 * @param {*} data
 *
 */

var resolveDimByField = function resolveDimByField(type, axesInfo, config, data) {
  var spaceType = type === 'x' ? 'width' : 'height';
  var _ref = [config["".concat(type, "FieldType")], axesInfo["".concat(type, "Axis")]],
      fieldType = _ref[0],
      axis = _ref[1];
  var transformType = config.transformType,
      sizeEncoding = config.sizeEncoding,
      sizeConfig = config.sizeConfig,
      measurement = config.measurement;
  var sizeValue = sizeEncoding.value;
  var enter = 0;
  var pos;
  var space = 0;
  var enterSpace = 0;

  if (fieldType !== undefined) {
    if (config["".concat(type, "0Field")]) {
      var minVal = data[type];
      var maxVal = data["".concat(type, "0")];
      var min;
      var max;

      if (minVal === null || maxVal === null) {
        return {
          enterSpace: undefined,
          enter: undefined,
          pos: undefined,
          space: undefined
        };
      } else if (fieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["MeasureSubtype"].CONTINUOUS || fieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL) {
        min = Math.min(minVal, maxVal);
        max = Math.max(minVal, maxVal);
      } else {
        min = minVal;
        max = maxVal;
      }

      var scales = type === 'x' ? [min, max] : [max, min];
      pos = axis.getScaleValue(scales[0]) + axis.getUnitWidth() / 2;
      space = Math.abs(axis.getScaleValue(scales[1]) - pos) + axis.getUnitWidth() / 2;
      enter = pos;
      enterSpace = 0;
    } else if (fieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].CATEGORICAL || fieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL) {
      pos = axis.getScaleValue(data[type]) + (sizeConfig[type === 'x' ? 'barWidthOffset' : 'barHeightOffset'] || 0);
      space = sizeConfig[type === 'x' ? 'barWidth' : 'barHeight'];

      if (sizeValue !== undefined) {
        var diffPx = sizeValue * space;
        space -= diffPx;
        pos += diffPx / 2;
      }

      enter = pos;
      enterSpace = space;
    } else {
      var zeroPos = axis.getScaleValue(0);
      var axisType = axis.getScaleValue(data[type]);
      var axisType0 = axis.getScaleValue(data["".concat(type, "0")]);
      enterSpace = 0;

      if (type === 'x') {
        pos = data[type] < 0 || transformType === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["STACK"] ? axisType : zeroPos;
        space = Math.abs(pos - (transformType === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["STACK"] ? axisType0 : data[type] >= 0 ? axisType : zeroPos));
      } else {
        pos = transformType === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["STACK"] || data[type] >= 0 ? axisType : zeroPos;
        space = Math.abs(pos - (transformType === _enums_constants__WEBPACK_IMPORTED_MODULE_1__["STACK"] ? axisType0 : data[type] >= 0 ? zeroPos : axisType));
      }

      enter = zeroPos;
    }
  } else {
    pos = 0;
    space = measurement[spaceType];
  }

  return {
    enterSpace: enterSpace,
    enter: enter,
    pos: pos,
    space: space
  };
};
/**
 *
 *
 * @param {*} data
 * @param {*} config
 * @param {*} axes
 *
 */


var resolveDimensions = function resolveDimensions(data, config, axes) {
  var axesInfo = {
    xAxis: axes.x,
    yAxis: axes.y
  };

  var _resolveDimByField = resolveDimByField('x', axesInfo, config, data),
      enterWidth = _resolveDimByField.enterSpace,
      enterX = _resolveDimByField.enter,
      xPos = _resolveDimByField.pos,
      width = _resolveDimByField.space;

  var _resolveDimByField2 = resolveDimByField('y', axesInfo, config, data),
      enterHeight = _resolveDimByField2.enterSpace,
      enterY = _resolveDimByField2.enter,
      yPos = _resolveDimByField2.pos,
      height = _resolveDimByField2.space;

  return {
    enter: {
      x: enterX,
      y: enterY,
      width: enterWidth,
      height: enterHeight
    },
    update: {
      x: xPos,
      y: yPos,
      width: width,
      height: height
    }
  };
};
/**
 * Generates an array of objects containing x, y, width and height of the bars from the data
 * @param  {Array.<Array>} data Data Array
 * @param  {Object} encoding  Config
 * @param  {Object} axes     Axes object
 * @param {Object} conf config object for point generation
 * @return {Array.<Object>}  Array of points
 */


var getTranslatedPoints = function getTranslatedPoints(context, data, sizeConfig) {
  var points = [];
  var encoding = context.config().encoding;
  var axes = context.axes();
  var colorAxis = axes.color;
  var fieldsConfig = context.data().getFieldsConfig();
  var colorEncoding = encoding.color;
  var colorField = colorEncoding.field;
  var sizeEncoding = encoding.size || {};

  var _context$encodingFiel = context.encodingFieldsInf(),
      x0Field = _context$encodingFiel.x0Field,
      y0Field = _context$encodingFiel.y0Field,
      xFieldSubType = _context$encodingFiel.xFieldSubType,
      yFieldSubType = _context$encodingFiel.yFieldSubType;

  var measurement = context.measurement();
  var isXDim = xFieldSubType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].CATEGORICAL || xFieldSubType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL;
  var isYDim = yFieldSubType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].CATEGORICAL || yFieldSubType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL;
  var key = isXDim ? 'x' : isYDim ? 'y' : null;
  var transformType = context.transformType();
  var colorFieldIndex = colorField && fieldsConfig[colorField] && fieldsConfig[colorField].index;

  for (var i = 0, len = data.length; i < len; i++) {
    var d = data[i];
    var style = {};
    var meta = {};
    var dimensions = resolveDimensions(d, {
      xFieldType: xFieldSubType,
      yFieldType: yFieldSubType,
      x0Field: x0Field,
      y0Field: y0Field,
      transformType: transformType,
      measurement: measurement,
      sizeConfig: sizeConfig,
      sizeEncoding: sizeEncoding
    }, axes);

    var _getLayerColor = Object(_helpers__WEBPACK_IMPORTED_MODULE_2__["getLayerColor"])({
      datum: d,
      index: i
    }, {
      colorEncoding: colorEncoding,
      colorAxis: colorAxis,
      colorFieldIndex: colorFieldIndex
    }),
        color = _getLayerColor.color,
        rawColor = _getLayerColor.rawColor;

    style.fill = color;
    meta.stateColor = {};
    meta.originalColor = rawColor;
    meta.colorTransform = {};
    var update = dimensions.update;

    if (!isNaN(update.x) && !isNaN(update.y) && d._id !== undefined) {
      var point = null;
      point = {
        enter: dimensions.enter,
        update: update,
        style: style,
        _data: d._data,
        _id: d._id,
        source: d._data,
        rowId: d._id,
        meta: meta
      };
      point.className = Object(_helpers__WEBPACK_IMPORTED_MODULE_2__["getIndividualClassName"])(d, i, data, context);
      points.push(point); // Store each point in a hashmap with key as the dimensional or temporal field value

      context.cachePoint(d[key], point);
    }
  }

  points = Object(_helpers__WEBPACK_IMPORTED_MODULE_2__["positionPoints"])(context, points);
  return points;
};

/***/ }),

/***/ "./packages/visual-layer/src/layers/bar/bar.js":
/*!*****************************************************!*\
  !*** ./packages/visual-layer/src/layers/bar/bar.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return BarLayer; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _base_layer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../base-layer */ "./packages/visual-layer/src/base-layer/index.js");
/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./renderer */ "./packages/visual-layer/src/layers/bar/renderer.js");
/* harmony import */ var _default_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./default-config */ "./packages/visual-layer/src/layers/bar/default-config.js");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../helpers */ "./packages/visual-layer/src/helpers/index.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./styles.scss */ "./packages/visual-layer/src/layers/bar/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _bar_helper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./bar-helper */ "./packages/visual-layer/src/layers/bar/bar-helper.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }








var MEASURE = muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE;
var scaleBand = muze_utils__WEBPACK_IMPORTED_MODULE_0__["Scales"].band;
/**
 * Bar layer creates rectangle marks. The mark type of this layer is ```bar```. This layer can be used
 * to create stacked or grouped bars, range bars, heatmap plots and also reference bands by using
 * the encoding properties.
 *
 * @public
 *
 * @class
 * @module BarLayer
 * @extends BaseLayer
 */

var BarLayer =
/*#__PURE__*/
function (_BaseLayer) {
  _inherits(BarLayer, _BaseLayer);

  /**
   * Creates an instance of bar layer
   */
  function BarLayer() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, BarLayer);

    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
      params[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BarLayer)).call.apply(_getPrototypeOf2, [this].concat(params)));
    _this._bandScale = scaleBand();
    _this._plotPadding = {
      x: 0,
      y: 0
    };
    _this._plotSpan = {
      x: 0,
      y: 0
    };
    _this._pointMap = {};
    return _this;
  }
  /**
   *
   *
   *
   * @memberof BarLayer
   */


  _createClass(BarLayer, [{
    key: "elemType",
    value: function elemType() {
      return 'rect';
    }
    /**
     *
     *
     * @static
     *
     * @memberof BarLayer
     */

  }, {
    key: "calculateDomainFromData",

    /**
     *
     *
     * @param {*} data
     * @param {*} fieldsConfig
     *
     * @memberof BarLayer
     */
    value: function calculateDomainFromData(data, encodingFieldInf, fieldsConfig) {
      var domain = _get(_getPrototypeOf(BarLayer.prototype), "calculateDomainFromData", this).call(this, data, encodingFieldInf, fieldsConfig);

      ['x', 'y'].forEach(function (d) {
        if (encodingFieldInf["".concat(d, "FieldType")] === MEASURE && domain[d]) {
          encodingFieldInf["".concat(d, "0Field}")] ? domain[d] = domain[d].sort(function (a, b) {
            return a - b;
          }) : domain[d][0] = Math.min(domain[d][0], 0);
        }
      });
      return domain;
    }
    /**
     * Generates an array of objects containing x, y, width and height of the bars from the data
     * @param  {Array.<Array>} data Data Array
     * @param  {Object} encoding  Config
     * @param  {Object} axes     Axes object
     * @param {Object} conf config object for point generation
     * @return {Array.<Object>}  Array of points
     */

  }, {
    key: "translatePoints",
    value: function translatePoints(data, sizeConfig) {
      return Object(_bar_helper__WEBPACK_IMPORTED_MODULE_6__["getTranslatedPoints"])(this, data, sizeConfig);
    }
    /**
     * Renders the plot in the given container
     * @param  {SVGGroup} container SVGGroup where plot will be rendered.
     * @return {BarLayer} Instance of bar layer.
     */

  }, {
    key: "render",
    value: function render(container) {
      var _this2 = this;

      var config = this.config();
      var transition = config.transition;
      var normalizedDataArr = this._normalizedData;
      var transformedData = this._transformedData;
      var keys = transformedData.map(function (d) {
        return d.key;
      });
      var fieldsConfig = this.data().getFieldsConfig();
      var axes = this.axes();
      var height = axes.y && axes.y.scale().range()[0];
      var width = axes.x && axes.x.scale().range()[1];
      var defClassName = config.defClassName;
      var qualifiedClassName = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getQualifiedClassName"])(defClassName, this.id(), config.classPrefix);
      var className = config.className;
      var containerSelection = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(container);
      var dimensions = Object.values(fieldsConfig).filter(function (e) {
        return e.def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
      }).map(function (e) {
        return e.index;
      });
      containerSelection.classed(qualifiedClassName.join(' '), true);
      containerSelection.classed(className, true);
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["clipElement"])(container, {
        x: 0,
        y: 0,
        width: width,
        height: height
      }, "id-".concat(this.id()));
      this._points = this.generateDataPoints(normalizedDataArr, keys);
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["createElements"])({
        data: this._points,
        container: container,
        selector: 'g',
        append: 'g',
        each: function each(points, group, i) {
          var seriesClassName = "".concat(qualifiedClassName[0], "-").concat(keys[i] || i).toLowerCase();
          group.style('display', 'block');
          Object(_renderer__WEBPACK_IMPORTED_MODULE_2__["drawRects"])({
            layer: _this2,
            container: group.node(),
            points: points,
            className: seriesClassName,
            transition: transition,
            style: {},
            keyFn: function keyFn(d) {
              return dimensions.map(function (key) {
                return d._data[key];
              }).join('-');
            }
          });
        }
      });
      return this;
    }
    /**
     *
     *
     * @param {*} normalizedData
     * @param {*} keys
     *
     * @memberof BarLayer
     */

  }, {
    key: "generateDataPoints",
    value: function generateDataPoints(normalizedData, keys) {
      var _this3 = this;

      var _getPlotMeasurement = Object(_helpers__WEBPACK_IMPORTED_MODULE_4__["getPlotMeasurement"])(this, keys),
          _getPlotMeasurement2 = _slicedToArray(_getPlotMeasurement, 2),
          barWidthMetrics = _getPlotMeasurement2[0],
          barHeightMetrics = _getPlotMeasurement2[1];

      var barWidthOffsets = barWidthMetrics.offsetValues || [];
      var barHeightOffsets = barHeightMetrics.offsetValues || [];
      this._plotSpan = {
        x: barWidthMetrics.groupSpan || 0,
        y: barHeightMetrics.groupSpan || 0
      };
      this._plotPadding = {
        x: barWidthMetrics.padding || 0,
        y: barHeightMetrics.padding || 0
      };
      this._pointMap = {};
      return normalizedData.map(function (data, i) {
        return _this3.translatePoints(data, {
          barWidth: barWidthMetrics.span,
          barWidthOffset: barWidthOffsets[i] || 0,
          barHeight: barHeightMetrics.span,
          barHeightOffset: barHeightOffsets[i] || 0
        });
      });
    }
  }, {
    key: "getPlotPadding",
    value: function getPlotPadding() {
      return this._plotPadding;
    }
  }, {
    key: "resolveTransformType",
    value: function resolveTransformType() {
      this._transformType = Object(_helpers__WEBPACK_IMPORTED_MODULE_4__["getValidTransformForAggFn"])(this);
    }
    /**
     * Gets the nearest point of the position passed.
     * @param {number} x x position
     * @param {number} y y position
     * @return {Object} Nearest point.
     */

  }, {
    key: "getNearestPoint",
    value: function getNearestPoint(x, y) {
      if (!this.data()) {
        return null;
      }

      var axis;
      var value;
      var points;
      var uniqueFieldType;
      var uniqueFieldIndex;
      var filterData;
      var identifiers;
      var pointFound = null;
      var dataModel = this.data();
      var dataObj = dataModel.getData();
      var fieldsConfig = dataModel.getFieldsConfig();
      var axes = this.axes();
      var data = dataObj.data;
      var pointMap = this._pointMap;

      var _this$encodingFieldsI = this.encodingFieldsInf(),
          xField = _this$encodingFieldsI.xField,
          yField = _this$encodingFieldsI.yField,
          xFieldSubType = _this$encodingFieldsI.xFieldSubType,
          yFieldSubType = _this$encodingFieldsI.yFieldSubType;

      if (xFieldSubType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["MeasureSubtype"].CONTINUOUS) {
        axis = axes.y;
        value = axis.invert(y);
        uniqueFieldIndex = fieldsConfig[yField].index;
        uniqueFieldType = yFieldSubType;
      } else {
        axis = axes.x;
        value = axis.invert(x);
        uniqueFieldIndex = fieldsConfig[xField].index;
        uniqueFieldType = xFieldSubType;
      }

      if (uniqueFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].CATEGORICAL) {
        points = pointMap[value];
      }

      if (uniqueFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL) {
        filterData = _toConsumableArray(new Set(data.map(function (d) {
          return d[uniqueFieldIndex];
        })));
        value = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getNearestValue"])(filterData, value);
        points = pointMap[value];
      }

      var len = points && points.length;
      points && points.sort(function (p1, p2) {
        return p1.update.y - p2.update.y;
      });

      for (var i = 0; i < len; i++) {
        var point = points[i];
        var update = point.update;

        if (x >= update.x && x <= update.width + update.x && y >= update.y && y <= update.height + update.y) {
          pointFound = point;
          break;
        }

        pointFound = null;
      }

      var values = pointFound && pointFound._data;

      if (values) {
        identifiers = this.getIdentifiersFromData(values, pointFound._id);
      }

      return pointFound ? {
        dimensions: [pointFound.update],
        id: identifiers,
        layerId: this.id()
      } : pointFound;
    }
  }, {
    key: "getPlotSpan",
    value: function getPlotSpan() {
      return this._plotSpan;
    }
  }], [{
    key: "formalName",
    value: function formalName() {
      return 'bar';
    }
    /**
     * Returns the default configuration of the bar layer
     * @return {Object} Default configuration of the bar layer
     */

  }, {
    key: "defaultConfig",
    value: function defaultConfig() {
      return _default_config__WEBPACK_IMPORTED_MODULE_3__["defaultConfig"];
    }
    /**
     *
     *
     * @static
     * @param {*} conf
     * @param {*} userConf
     *
     * @memberof BarLayer
     */

  }, {
    key: "defaultPolicy",
    value: function defaultPolicy(conf, userConf) {
      var config = _base_layer__WEBPACK_IMPORTED_MODULE_1__["BaseLayer"].defaultPolicy(conf, userConf);
      var encoding = config.encoding;
      var colorField = encoding.color.field;
      var transform = config.transform;

      if (colorField) {
        transform.groupBy = colorField;
      }

      return config;
    }
  }]);

  return BarLayer;
}(_base_layer__WEBPACK_IMPORTED_MODULE_1__["BaseLayer"]);



/***/ }),

/***/ "./packages/visual-layer/src/layers/bar/default-config.js":
/*!****************************************************************!*\
  !*** ./packages/visual-layer/src/layers/bar/default-config.js ***!
  \****************************************************************/
/*! exports provided: defaultConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultConfig", function() { return defaultConfig; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");

var defaultConfig = {
  classPrefix: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"],
  defClassName: 'layer-bar',
  className: '',
  interaction: {
    highlight: [{
      type: 'fill',
      intensity: [0, 0, -15, 0]
    }],
    fade: [{
      type: 'fill',
      intensity: [0, 0, +15, 0]
    }],
    focus: [{
      type: 'fill',
      intensity: [0, 0, +15, 0]
    }]
  },
  transform: {
    type: 'stack'
  },
  transition: {
    effect: 'cubic',
    duration: 1000
  },
  innerPadding: 0.1,
  encoding: {
    color: {},
    x: {},
    y: {},
    x0: {},
    y0: {}
  },
  states: {
    highlight: {
      className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"], "-layer-bar-highlight")
    },
    fadeout: {
      className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"], "-layer-bar-fadeout")
    },
    selected: {
      className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"], "-layer-bar-selected")
    }
  }
};

/***/ }),

/***/ "./packages/visual-layer/src/layers/bar/index.js":
/*!*******************************************************!*\
  !*** ./packages/visual-layer/src/layers/bar/index.js ***!
  \*******************************************************/
/*! exports provided: BarLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _bar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bar */ "./packages/visual-layer/src/layers/bar/bar.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BarLayer", function() { return _bar__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/visual-layer/src/layers/bar/renderer.js":
/*!**********************************************************!*\
  !*** ./packages/visual-layer/src/layers/bar/renderer.js ***!
  \**********************************************************/
/*! exports provided: drawRects */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "drawRects", function() { return drawRects; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");

/**
 *
 *
 * @param {*} elem
 * @param {*} datum
 * @param {*} index
 * @param {*} context
 */

var transitionBars = function transitionBars(layer, elem, datum, index, context) {
  var transition = context.transition;
  var duration = transition.duration,
      disabled = transition.disabled,
      effect = transition.effect;
  var selection = elem;
  var selTransition = disabled ? selection : selection.transition().duration(duration).ease(muze_utils__WEBPACK_IMPORTED_MODULE_0__["easeFns"][effect]).on('end', layer.registerAnimationDoneHook());
  var update = datum.update || datum;
  var updateStyle = datum.style || {};
  datum.className && selection.classed(datum.className, true);
  Object.entries(update).forEach(function (attr) {
    return !isNaN(attr[1]) && selTransition.attr(attr[0], attr[1]);
  });
  Object.entries(updateStyle).forEach(function (styleObj) {
    return selection.style(styleObj[0], styleObj[1]);
  });
};
/**
 *
 *
 * @param {*} elem
 * @param {*} d
 */


var barEnterFn = function barEnterFn(elem, d) {
  var selection = elem;
  var enter = d.enter || {};
  Object.entries(enter).forEach(function (attr) {
    return !isNaN(attr[1]) && selection.attr(attr[0], attr[1]);
  });
};
/**
 * Draws rectangles by using d3 selection
 * @param  {Object} params Contains container element and points
 * @return {Selection} Bar Selection
 */

/* istanbul ignore next */


var drawRects = function drawRects(params) {
  var layer = params.layer,
      points = params.points,
      container = params.container,
      keyFn = params.keyFn;
  var updateFns = {
    enter: function enter(elem, d) {
      barEnterFn(elem, d);
    },
    update: function update(elem, d, i) {
      transitionBars(layer, elem, d, i, params);
    }
  };
  return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'rect', points, null, updateFns, keyFn);
};

/***/ }),

/***/ "./packages/visual-layer/src/layers/bar/styles.scss":
/*!**********************************************************!*\
  !*** ./packages/visual-layer/src/layers/bar/styles.scss ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/visual-layer/src/layers/line/default-config.js":
/*!*****************************************************************!*\
  !*** ./packages/visual-layer/src/layers/line/default-config.js ***!
  \*****************************************************************/
/*! exports provided: defaultConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultConfig", function() { return defaultConfig; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");

var defaultConfig = {
  classPrefix: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"],
  defClassName: 'layer-line',
  className: '',
  interpolate: 'linear',
  transform: {
    type: 'group'
  },
  interaction: {
    highlight: [{
      type: 'stroke',
      intensity: [0, 0, -15, 0]
    }],
    fade: [{
      type: 'stroke',
      intensity: [0, 0, +15, 0]
    }],
    focus: [{
      type: 'stroke',
      intensity: [0, 0, +15, 0]
    }]
  },
  nearestPointThreshold: 20,
  encoding: {
    color: {},
    x: {},
    y: {},
    strokeOpacity: {
      value: 1
    }
  },
  transition: {
    effect: 'cubic',
    duration: 1000
  },
  connectNullData: false
};

/***/ }),

/***/ "./packages/visual-layer/src/layers/line/index.js":
/*!********************************************************!*\
  !*** ./packages/visual-layer/src/layers/line/index.js ***!
  \********************************************************/
/*! exports provided: LineLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _line__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./line */ "./packages/visual-layer/src/layers/line/line.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LineLayer", function() { return _line__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/visual-layer/src/layers/line/line.js":
/*!*******************************************************!*\
  !*** ./packages/visual-layer/src/layers/line/line.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LineLayer; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _base_layer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../base-layer */ "./packages/visual-layer/src/base-layer/index.js");
/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./renderer */ "./packages/visual-layer/src/layers/line/renderer.js");
/* harmony import */ var _default_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./default-config */ "./packages/visual-layer/src/layers/line/default-config.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../helpers */ "./packages/visual-layer/src/helpers/index.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./styles.scss */ "./packages/visual-layer/src/layers/line/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_6__);
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }








/**
 * This layer is used to render straight or smoothed line paths. The mark type of this layer is ```line```.
 *
 * @public
 *
 * @class
 * @module LineLayer
 * @extends BaseLayer
 */

var LineLayer =
/*#__PURE__*/
function (_BaseLayer) {
  _inherits(LineLayer, _BaseLayer);

  /**
   * Creates an instance of LineLayer.
   * @param {*} args
   * @memberof LineLayer
   */
  function LineLayer() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, LineLayer);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LineLayer)).call.apply(_getPrototypeOf2, [this].concat(args)));
    _this._voronoi = new muze_utils__WEBPACK_IMPORTED_MODULE_0__["Voronoi"]();
    return _this;
  }
  /**
   *
   *
   * @static
   *
   * @memberof LineLayer
   */


  _createClass(LineLayer, [{
    key: "elemType",

    /**
     *
     *
     *
     * @memberof LineLayer
     */
    value: function elemType() {
      return 'path';
    }
    /**
     * Default configuration of line layer
     * @return {Object} Default configuration of layer
     */

  }, {
    key: "getDrawFn",

    /**
     * Returns the draw method for line
     * @return {Function} Draw method of line layer
     */
    value: function getDrawFn() {
      return _renderer__WEBPACK_IMPORTED_MODULE_2__["drawLine"];
    }
  }, {
    key: "translatePoints",

    /**
     * Generates the x and y positions for each point
     * @param {Array} data Data Array
     * @param {Object} encoding Visual Encodings of the layer
     * @param {Object} axes Contains the axis
     * @param {number} seriesIndex index of series
     * @return {Array} Array of points
     */
    value: function translatePoints(data, encodingFieldsInf, axes) {
      var _this2 = this;

      var points = [];
      var xAxis = axes.x;
      var yAxis = axes.y;
      var colorAxis = axes.color;
      var encoding = this.config().encoding;
      var xFieldType = encodingFieldsInf.xFieldType,
          yFieldType = encodingFieldsInf.yFieldType;
      var isXDim = xFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
      var isYDim = yFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
      var key = isXDim ? _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ENCODING"].X : isYDim ? _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ENCODING"].Y : null;
      var colorEncoding = encoding.color;
      var colorField = colorEncoding.field;
      var fieldsConfig = this.data().getFieldsConfig();
      var colorFieldIndex = colorField && fieldsConfig[colorField].index;
      var style = {};
      var meta = {};
      points = data.map(function (d, i) {
        var xPx = xAxis.getScaleValue(d.x) + xAxis.getUnitWidth() / 2;
        var yPx = yAxis.getScaleValue(d.y) + yAxis.getUnitWidth() / 2;

        var _getLayerColor = Object(_helpers__WEBPACK_IMPORTED_MODULE_5__["getLayerColor"])({
          datum: d,
          index: i
        }, {
          colorEncoding: colorEncoding,
          colorAxis: colorAxis,
          colorFieldIndex: colorFieldIndex
        }),
            color = _getLayerColor.color,
            rawColor = _getLayerColor.rawColor;

        style.stroke = color;
        style['fill-opacity'] = 0;
        meta.stateColor = {};
        meta.originalColor = rawColor;
        meta.colorTransform = {};
        var point = {
          enter: {},
          update: {
            x: d.x instanceof muze_utils__WEBPACK_IMPORTED_MODULE_0__["InvalidAwareTypes"] ? null : xPx,
            y: d.y instanceof muze_utils__WEBPACK_IMPORTED_MODULE_0__["InvalidAwareTypes"] ? null : yPx
          },
          style: style,
          _data: d._data,
          _id: d._id,
          rowId: d._id,
          source: d._data,
          meta: meta
        };
        point.className = Object(_helpers__WEBPACK_IMPORTED_MODULE_5__["getIndividualClassName"])(d, i, data, _this2);

        _this2.cachePoint(d[key], point);

        return point;
      });
      points = Object(_helpers__WEBPACK_IMPORTED_MODULE_5__["positionPoints"])(this, points);
      return points;
    }
    /**
     * Renders the line plot
     * @param {SVGElement} container svg element
     * @return {LineLayer} instance of line layer
     */

  }, {
    key: "render",
    value: function render(container) {
      var _this3 = this;

      var points;
      var seriesClassName;
      var style;
      var config = this.config();
      var encoding = config.encoding,
          interpolate = config.interpolate,
          className = config.className,
          defClassName = config.defClassName,
          transition = config.transition;
      var normalizedData = this._normalizedData;
      var transformedData = this._transformedData;
      var fieldsConfig = this.data().getFieldsConfig();
      var axes = this.axes();
      var keys = transformedData.map(function (d) {
        return d.key;
      });
      var qualifiedClassName = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getQualifiedClassName"])(defClassName, this.id(), config.classPrefix);
      var containerSelection = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(container);
      var colorField = encoding.color.field;
      var colorFieldIndex = fieldsConfig[colorField] && fieldsConfig[colorField].index;
      this._points = [];
      this._pointMap = {};
      containerSelection.classed(qualifiedClassName.join(' '), true);
      containerSelection.classed(className, true);
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'g', normalizedData, null, {
        enter: function enter(group) {
          Object(_helpers__WEBPACK_IMPORTED_MODULE_5__["animateGroup"])(group, {
            transition: transition,
            groupAnimateStyle: {
              enter: {
                'stroke-opacity': 0,
                'fill-opacity': _this3.getPathStyle()['fill-opacity']
              },
              update: {
                'stroke-opacity': encoding.strokeOpacity.value
              }
            }
          });
        },
        update: function update(group, dataArr, i) {
          points = _this3.translatePoints(dataArr, _this3.encodingFieldsInf(), axes, i);

          _this3._points.push(points);

          seriesClassName = "".concat(qualifiedClassName[0], "-").concat(keys[i] || i).toLowerCase();
          var color;
          var colorValFn = encoding.color.value;
          var colorVal = points.find(function (d) {
            return d._data[colorFieldIndex] !== null && d._data[colorFieldIndex] !== undefined;
          });

          if (colorValFn) {
            color = colorValFn(dataArr, i, normalizedData);
          } else {
            color = axes.color.getColor(colorVal && colorVal._data[colorFieldIndex]);
          }

          style = _this3.getPathStyle(color);

          _this3.getDrawFn()({
            layer: _this3,
            container: group.node(),
            interpolate: interpolate,
            points: points,
            className: seriesClassName,
            transition: transition,
            style: style || {},
            connectNullData: config.connectNullData
          });
        }
      }, function (d) {
        return d[0]._data[colorFieldIndex] || d[0]._id;
      });
      Object(_helpers__WEBPACK_IMPORTED_MODULE_5__["attachDataToVoronoi"])(this._voronoi, this._points);
      return this;
    }
    /**
     * Get the css styles need to be applied on the line path
     * @param {string} color Color value
     * @return {Object} Path styles
     */

  }, {
    key: "getPathStyle",
    value: function getPathStyle(color) {
      return {
        stroke: color,
        'fill-opacity': '0'
      };
    }
    /**
     * Gets the nearest point closest to the given position
     * @param {number} x x position
     * @param {number} y y position
     * @return {Object} Nearest point information
     */

  }, {
    key: "getNearestPoint",
    value: function getNearestPoint(x, y, config) {
      var searchRadius = config.searchRadius;
      var data = this.data();

      if (!data || data && data.isEmpty()) {
        return null;
      }

      searchRadius = searchRadius !== undefined ? searchRadius : this.config().nearestPointThreshold;

      var point = this._voronoi.find(x, y, searchRadius);

      var dimensions = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getObjProp"])(point, 'data', 'data', 'update');

      if (point) {
        var _point$data$data = point.data.data,
            _data = _point$data$data._data,
            _id = _point$data$data._id;
        var identifiers = this.getIdentifiersFromData(_data, _id);
        return {
          id: identifiers,
          dimensions: [{
            x: dimensions.x,
            y: dimensions.y,
            width: 2,
            height: 2
          }],
          layerId: this.id()
        };
      }

      return null;
    }
  }], [{
    key: "formalName",
    value: function formalName() {
      return 'line';
    }
  }, {
    key: "defaultConfig",
    value: function defaultConfig() {
      return _default_config__WEBPACK_IMPORTED_MODULE_3__["defaultConfig"];
    }
    /**
     *
     *
     * @static
     * @param {*} conf
     * @param {*} userConf
     *
     * @memberof LineLayer
     */

  }, {
    key: "defaultPolicy",
    value: function defaultPolicy(conf, userConf) {
      var config = _base_layer__WEBPACK_IMPORTED_MODULE_1__["BaseLayer"].defaultPolicy(conf, userConf);
      var encoding = config.encoding;
      var transform = config.transform;
      var colorField = encoding.color && encoding.color.field;

      if (colorField && !transform.groupBy) {
        transform.groupBy = colorField;
      }

      return config;
    }
  }, {
    key: "shouldDrawAnchors",
    value: function shouldDrawAnchors() {
      return true;
    }
  }]);

  return LineLayer;
}(_base_layer__WEBPACK_IMPORTED_MODULE_1__["BaseLayer"]);



/***/ }),

/***/ "./packages/visual-layer/src/layers/line/renderer.js":
/*!***********************************************************!*\
  !*** ./packages/visual-layer/src/layers/line/renderer.js ***!
  \***********************************************************/
/*! exports provided: drawLine */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "drawLine", function() { return drawLine; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../helpers */ "./packages/visual-layer/src/helpers/index.js");


var line = muze_utils__WEBPACK_IMPORTED_MODULE_0__["Symbols"].line;

var filterFn = function filterFn(d) {
  var update = d.update;
  return update.y !== null && update.x !== null;
};
/**
 * Draws a line from the points
 * Generates a svg path string
 * @param {Object} params Contains container, points and interpolate attribute.
 */


var drawLine = function drawLine(context) {
  var filteredPoints;
  var layer = context.layer,
      container = context.container,
      points = context.points,
      interpolate = context.interpolate,
      connectNullData = context.connectNullData,
      className = context.className,
      style = context.style,
      transition = context.transition;
  var mount = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(container).attr('class', className);
  var curveInterpolatorFn = muze_utils__WEBPACK_IMPORTED_MODULE_0__["pathInterpolators"][interpolate];
  var linepath = line().curve(curveInterpolatorFn).x(function (d) {
    return d.update.x;
  }).y(function (d) {
    return d.update.y;
  }).defined(filterFn);
  filteredPoints = points;

  if (connectNullData) {
    filteredPoints = points.filter(filterFn);
  }

  Object(_helpers__WEBPACK_IMPORTED_MODULE_1__["updateStyle"])(mount, style);
  var element = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(mount, 'path', [1]);
  element.classed(points[0].className, true);

  if (!transition.disabled) {
    element = element.transition().duration(transition.duration).on('end', layer.registerAnimationDoneHook());
  }

  element.attr('d', linepath(filteredPoints)).style('fill-opacity', 0);
  return element;
};

/***/ }),

/***/ "./packages/visual-layer/src/layers/line/styles.scss":
/*!***********************************************************!*\
  !*** ./packages/visual-layer/src/layers/line/styles.scss ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/visual-layer/src/layers/point/default-config.js":
/*!******************************************************************!*\
  !*** ./packages/visual-layer/src/layers/point/default-config.js ***!
  \******************************************************************/
/*! exports provided: defaultConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultConfig", function() { return defaultConfig; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");

var defaultConfig = {
  defClassName: 'layer-point',
  className: '',
  classPrefix: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"],
  defColorStyle: 'stroke',
  interaction: {
    highlight: [{
      type: 'fill',
      intensity: [0, 0, -20, 0]
    }],
    fade: [{
      type: 'fill',
      intensity: [0, 0, +20, 0]
    }],
    focus: [{
      type: 'fill',
      intensity: [0, 0, +20, 0]
    }]
  },
  innerPadding: 0.1,
  nearestPointThreshold: 10,
  transform: {
    type: 'identity'
  },
  transition: {
    effect: 'cubic',
    duration: 1000
  },
  encoding: {
    size: {
      value: 30
    },
    color: {},
    shape: {
      value: 'circle'
    },
    x: {},
    y: {},
    strokeOpacity: {
      value: 0.5
    },
    fillOpacity: {
      value: 0.5
    }
  },
  shapes: ['circle', 'cross', 'diamond', 'square', 'star', 'wye', 'triangle'],
  sizes: [20, 30, 40, 50, 60, 70]
};

/***/ }),

/***/ "./packages/visual-layer/src/layers/point/index.js":
/*!*********************************************************!*\
  !*** ./packages/visual-layer/src/layers/point/index.js ***!
  \*********************************************************/
/*! exports provided: PointLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./point */ "./packages/visual-layer/src/layers/point/point.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PointLayer", function() { return _point__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/visual-layer/src/layers/point/point.js":
/*!*********************************************************!*\
  !*** ./packages/visual-layer/src/layers/point/point.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return PointLayer; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _base_layer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../base-layer */ "./packages/visual-layer/src/base-layer/index.js");
/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./renderer */ "./packages/visual-layer/src/layers/point/renderer.js");
/* harmony import */ var _default_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./default-config */ "./packages/visual-layer/src/layers/point/default-config.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../helpers */ "./packages/visual-layer/src/helpers/index.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./styles.scss */ "./packages/visual-layer/src/layers/point/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_6__);
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }








/**
 * This layer is used to create various symbols for each data point. This is commonly used in
 * scatterplot visualizations. The mark type of this layer is ```point```.
 *
 * @public
 *
 * @class
 * @module PointLayer
 * @extends BaseLayer
 */

var PointLayer =
/*#__PURE__*/
function (_BaseLayer) {
  _inherits(PointLayer, _BaseLayer);

  /**
   * Creates an instance of PointLayer.
   * @param {*} args
   * @memberof PointLayer
   */
  function PointLayer() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, PointLayer);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PointLayer)).call.apply(_getPrototypeOf2, [this].concat(args)));
    _this._voronoi = new muze_utils__WEBPACK_IMPORTED_MODULE_0__["Voronoi"]();
    _this._bandScale = muze_utils__WEBPACK_IMPORTED_MODULE_0__["Scales"].band();
    return _this;
  }
  /**
   *
   *
   *
   * @memberof PointLayer
   */


  _createClass(PointLayer, [{
    key: "elemType",
    value: function elemType() {
      return 'g';
    }
    /**
     * Returns the default configuration of the point layer
     * @return {Object} Default configuration of the point layer
     */

  }, {
    key: "translatePoints",

    /**
     * Generates an array of objects containing x, y, width and height of the points from the data
     * @param  {Array.<Array>} data Data Array
     * @param  {Object} encoding  Config
     * @param  {Object} axes     Axes object
     * @return {Array.<Object>}  Array of points
     */
    value: function translatePoints(data, encoding, axes) {
      var _this2 = this;

      var config = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      var points = [];
      var sizeEncoding = encoding.size,
          shapeEncoding = encoding.shape,
          colorEncoding = encoding.color,
          x = encoding.x,
          y = encoding.y;
      var sizeField = sizeEncoding.field;
      var sizeValue = sizeEncoding.value;
      var shapeField = shapeEncoding.field;
      var xField = x.field;
      var yField = y.field;
      var sizeAxis = axes.size,
          shapeAxis = axes.shape;
      var fieldsConfig = this.data().getFieldsConfig();
      var isXDim = fieldsConfig[xField] && fieldsConfig[xField].def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
      var isYDim = fieldsConfig[yField] && fieldsConfig[yField].def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
      var key = isXDim ? _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ENCODING"].X : isYDim ? _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ENCODING"].Y : null;
      var colorField = colorEncoding && colorEncoding.field;
      var colorFieldIndex = fieldsConfig[colorField] && fieldsConfig[colorField].index;
      var measurement = this.measurement();
      var shapeFieldIndex = fieldsConfig[shapeField] && fieldsConfig[shapeField].index;
      var sizeFieldIndex = fieldsConfig[sizeField] && fieldsConfig[sizeField].index;
      var colorAxis = axes.color;
      var _config$offset = config.offset,
          offsetX = _config$offset.x,
          offsetY = _config$offset.y;

      var _loop = function _loop(i, len) {
        var d = data[i];
        var row = d._data;
        var size = sizeValue instanceof Function ? sizeValue(d, i) : sizeAxis.getSize(row[sizeFieldIndex]);
        var shape = shapeAxis.getShape(row[shapeFieldIndex]);

        var _map = [_enums_constants__WEBPACK_IMPORTED_MODULE_4__["ENCODING"].X, _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ENCODING"].Y].map(function (type) {
          var value = d[type] === null ? undefined : d[type];
          var measure = type === _enums_constants__WEBPACK_IMPORTED_MODULE_4__["ENCODING"].X ? measurement.width : measurement.height;
          return !encoding[type].field ? measure / 2 : axes[type].getScaleValue(value);
        }),
            _map2 = _slicedToArray(_map, 2),
            xPx = _map2[0],
            yPx = _map2[1];

        xPx += offsetX;
        yPx += offsetY;

        var _getLayerColor = Object(_helpers__WEBPACK_IMPORTED_MODULE_5__["getLayerColor"])({
          datum: d,
          index: i
        }, {
          colorEncoding: colorEncoding,
          colorAxis: colorAxis,
          colorFieldIndex: colorFieldIndex
        }),
            color = _getLayerColor.color,
            rawColor = _getLayerColor.rawColor;

        var style = {
          fill: color,
          stroke: color
        };

        if (!isNaN(xPx) && !isNaN(yPx)) {
          var point = {
            enter: {
              x: xPx,
              y: yPx
            },
            update: {
              x: xPx,
              y: yPx
            },
            shape: shape,
            size: Math.abs(size),
            meta: {
              stateColor: {},
              originalColor: rawColor,
              colorTransform: {}
            },
            style: style,
            _data: row,
            _id: d._id,
            source: d._data,
            rowId: d._id
          };
          point.className = Object(_helpers__WEBPACK_IMPORTED_MODULE_5__["getIndividualClassName"])(d, i, data, _this2);
          points.push(point);

          _this2.cachePoint(d[key], point);
        }
      };

      for (var i = 0, len = data.length; i < len; i++) {
        _loop(i, len);
      }

      points = Object(_helpers__WEBPACK_IMPORTED_MODULE_5__["positionPoints"])(this, points);
      return points;
    }
    /**
     * Renders the plot in the given container.
     *
     * @param  {SVGElement} container SVGElement which will hold the plot
     * @return {BarLayer} Instance of bar layer
     */

  }, {
    key: "render",
    value: function render(container) {
      var _this3 = this;

      var maxSize = 0;
      var seriesClassName;
      var config = this.config();

      var keys = this._transformedData.map(function (d) {
        return d.key;
      });

      var transition = config.transition,
          className = config.className,
          defClassName = config.defClassName,
          classPrefix = config.classPrefix;
      var normalizedData = this._normalizedData;
      var containerSelection = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(container);
      var qualifiedClassName = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getQualifiedClassName"])(defClassName, this.id(), classPrefix);
      this._points = [];
      this._pointMap = {};
      containerSelection.classed(qualifiedClassName.join(' '), true).classed(className, true);
      this._points = this.generateDataPoints(normalizedData, keys);
      var schema = this.data().getSchema();
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'g', this._points, null, {
        update: function update(group, points) {
          maxSize = Math.max.apply(Math, [maxSize].concat(_toConsumableArray(points.map(function (d) {
            return d.size;
          }))));
          seriesClassName = "".concat(qualifiedClassName[0]);

          _this3.constructor.drawFn()({
            layer: _this3,
            container: group.node(),
            points: points,
            className: seriesClassName,
            transition: transition,
            keyFn: function keyFn(v) {
              return Object(_helpers__WEBPACK_IMPORTED_MODULE_5__["getMarkId"])(v.source, schema);
            }
          });
        }
      }, function (data) {
        return data[0]._id;
      });
      this._maxSize = Math.sqrt(maxSize / Math.PI) * 2;
      Object(_helpers__WEBPACK_IMPORTED_MODULE_5__["attachDataToVoronoi"])(this._voronoi, this._points);
      return this;
    }
  }, {
    key: "generateDataPoints",
    value: function generateDataPoints(normalizedData, keys) {
      var _this4 = this;

      var encoding = this.config().encoding;
      var axes = this.axes();

      var _getPlotMeasurement = Object(_helpers__WEBPACK_IMPORTED_MODULE_5__["getPlotMeasurement"])(this, keys),
          _getPlotMeasurement2 = _slicedToArray(_getPlotMeasurement, 2),
          widthMetrics = _getPlotMeasurement2[0],
          heightMetrics = _getPlotMeasurement2[1];

      var offsetXValues = widthMetrics.offsetValues || [];
      var offsetYValues = heightMetrics.offsetValues || [];
      return normalizedData.map(function (dataArr, i) {
        var measurementConf = _this4.getMeasurementConfig(offsetXValues[i], offsetYValues[i], widthMetrics.span, heightMetrics.span);

        return _this4.translatePoints(dataArr, encoding, axes, measurementConf);
      }).filter(function (d) {
        return d.length;
      });
    }
  }, {
    key: "getMeasurementConfig",
    value: function getMeasurementConfig(offsetX, offsetY, widthSpan, heightSpan) {
      return {
        offset: {
          x: (offsetX || 0) + widthSpan / 2,
          y: (offsetY || 0) + heightSpan / 2
        },
        span: {
          x: widthSpan,
          y: heightSpan
        }
      };
    }
    /**
     * Gets the nearest point from a position.
     * @param {number} x x position
     * @param {number} y y position
     * @return {Object} Point details
     */

  }, {
    key: "getNearestPoint",
    value: function getNearestPoint(x, y) {
      var distanceLimit = Math.max(this._maxSize, this.config().nearestPointThreshold);

      if (!this.data()) {
        return null;
      }

      var point = this._voronoi.find(x, y, distanceLimit);

      var dimensions = point && point.data.data.update;
      var radius = point ? Math.sqrt(point.data.data.size / Math.PI) : 0;

      if (point) {
        var _point$data$data = point.data.data,
            _data = _point$data$data._data,
            _id = _point$data$data._id;
        var identifiers = this.getIdentifiersFromData(_data, _id);
        return {
          id: identifiers,
          dimensions: [{
            x: dimensions.x,
            y: dimensions.y,
            width: radius,
            height: radius
          }],
          layerId: this.id()
        };
      }

      return null;
    }
  }], [{
    key: "defaultConfig",
    value: function defaultConfig() {
      return _default_config__WEBPACK_IMPORTED_MODULE_3__["defaultConfig"];
    }
  }, {
    key: "defaultPolicy",
    value: function defaultPolicy(conf, userConf) {
      var config = _base_layer__WEBPACK_IMPORTED_MODULE_1__["BaseLayer"].defaultPolicy(conf, userConf);
      var encoding = config.encoding;
      var transform = config.transform;
      var colorField = encoding.color && encoding.color.field;

      if (colorField) {
        transform.groupBy = colorField;
      }

      return config;
    }
    /**
     *
     *
     * @static
     *
     * @memberof PointLayer
     */

  }, {
    key: "formalName",
    value: function formalName() {
      return 'point';
    }
    /**
     *
     *
     * @static
     *
     * @memberof PointLayer
     */

  }, {
    key: "drawFn",
    value: function drawFn() {
      return _renderer__WEBPACK_IMPORTED_MODULE_2__["default"];
    }
  }]);

  return PointLayer;
}(_base_layer__WEBPACK_IMPORTED_MODULE_1__["BaseLayer"]);



/***/ }),

/***/ "./packages/visual-layer/src/layers/point/renderer.js":
/*!************************************************************!*\
  !*** ./packages/visual-layer/src/layers/point/renderer.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* global Element, document  */

/**
 *
 *
 * @param {*} str
 *
 */

var checkPath = function checkPath(str) {
  if (/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(str) && /[\dz]$/i.test(str) && str.length > 4) {
    return true;
  }

  return false;
};
/**
 *
 *
 * @param {*} d
 * @param {*} elem
 */


var createShape = function createShape(d, groupElement) {
  var shape = d.shape,
      size = d.size,
      update = d.update;

  if (shape instanceof Promise) {
    shape.then(function (res) {
      d.shape = res;
      createShape(d, groupElement);
    });
  } else if (shape instanceof Element) {
    var newShape = shape.cloneNode(true);

    if (newShape.nodeName.toLowerCase() === 'img') {
      var src = newShape.src || newShape.href;
      newShape = document.createElementNS('http://www.w3.org/2000/svg', 'image');
      newShape.setAttribute('href', src);
    }

    var shapeElement = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(newShape);

    if (newShape.nodeName === 'path' || newShape.nodeName === 'image') {
      shapeElement.attr('transform', "scale(".concat(size / 100, ")"));
    } else {
      shapeElement.attr('height', size);
      shapeElement.attr('width', size);
    }

    shapeElement.attr('x', -size / 2);
    shapeElement.attr('y', -size / 2);
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(groupElement, function () {
      return newShape;
    }, [1]);
  } else if (typeof shape === 'string') {
    var pathStr;

    if (checkPath(shape)) {
      pathStr = shape;
    } else {
      pathStr = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getSymbol"])(shape).size(size)(update);
    }

    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(groupElement, 'path', function (data) {
      return [data];
    }).attr('d', pathStr);
  } else {
    d.shape = 'circle';
    createShape(d, groupElement);
  }
};
/**
 * Draws symbols using d3 symbol api
 * @param {Object} params Contains the svg container, points and other symbol related attributes.
 */

/* istanbul ignore next */


var drawSymbols = function drawSymbols(params) {
  var layer = params.layer,
      container = params.container,
      points = params.points,
      transition = params.transition,
      className = params.className;
  var duration = transition.duration,
      effect = transition.effect,
      disabled = transition.disabled;
  var mount = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(container);
  mount.attr('class', className);
  return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(mount, 'g', points, null, {
    enter: function enter(group, d) {
      var enter = d.enter;
      group.attr('transform', "translate(".concat(enter.x, ",").concat(enter.y, ")"));
    },
    update: function update(group, d) {
      createShape(d, group);
      var update = d.update,
          style = d.style;
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["objectIterator"])(style, function (key) {
        return group.style(key, style[key]);
      });
      group.attr('class', className);
      group.classed(d.className, true);

      if (!disabled) {
        group = group.transition().duration(transition.duration).on('end', layer.registerAnimationDoneHook());
      }

      group.attr('transform', "translate(".concat(update.x, ",").concat(update.y, ")"));
    },
    exit: function exit(exitGroup) {
      if (!disabled) {
        exitGroup.transition().ease(muze_utils__WEBPACK_IMPORTED_MODULE_0__["easeFns"][effect]).duration(duration).on('end', function () {
          return exitGroup.remove();
        }).style('fill-opacity', 0).style('stroke-opacity', 0);
      } else {
        exitGroup.remove();
      }
    }
  }, params.keyFn);
};

/* harmony default export */ __webpack_exports__["default"] = (drawSymbols);

/***/ }),

/***/ "./packages/visual-layer/src/layers/point/styles.scss":
/*!************************************************************!*\
  !*** ./packages/visual-layer/src/layers/point/styles.scss ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/visual-layer/src/layers/text/default-config.js":
/*!*****************************************************************!*\
  !*** ./packages/visual-layer/src/layers/text/default-config.js ***!
  \*****************************************************************/
/*! exports provided: defaultConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultConfig", function() { return defaultConfig; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");

var defaultConfig = {
  defClassName: 'layer-text',
  classPrefix: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"],
  className: '',
  transform: {
    type: 'identity'
  },
  interaction: {
    highlight: [{
      type: 'fill',
      intensity: [0, 0, -15, 0]
    }],
    fade: [{
      type: 'fill',
      intensity: [0, 0, +15, 0]
    }],
    focus: [{
      type: 'fill',
      intensity: [0, 0, +15, 0]
    }]
  },
  transition: {
    effect: 'cubic',
    duration: 1000
  },
  encoding: {
    color: {},
    text: {
      value: '',
      formatter: function formatter(val, i, data, context) {
        var valueParser = context.valueParser();
        return valueParser(val);
      },
      background: {
        padding: 10
      }
    }
  },
  states: {
    highlight: {
      className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"], "-layer-text-highlight")
    },
    fadeout: {
      className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"], "-layer-text-fadeout")
    },
    selected: {
      className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"], "-layer-text-selected")
    }
  }
};

/***/ }),

/***/ "./packages/visual-layer/src/layers/text/index.js":
/*!********************************************************!*\
  !*** ./packages/visual-layer/src/layers/text/index.js ***!
  \********************************************************/
/*! exports provided: TextLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _text__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./text */ "./packages/visual-layer/src/layers/text/text.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TextLayer", function() { return _text__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/visual-layer/src/layers/text/renderer.js":
/*!***********************************************************!*\
  !*** ./packages/visual-layer/src/layers/text/renderer.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");

/**
 * Draws svg text in the specified container.
 * @param {SVGElement} container Container where labels will be appended.
 * @param {Array.<Object>} data Data of the elements.
 * @return {Selection} d3 selection of the elements.
 */

var drawText = function drawText(container, data, config, smartLabel) {
  var selection = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(container).selectAll('g').data(data);
  var selectionMerge = selection.enter().append('g').each(function (dataObj) {
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setAttrs"])(this, dataObj.enter);
  }).merge(selection);
  var style = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getSmartComputedStyle"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(container), config.className);
  var fontSize = parseInt(style.fontSize, 10);
  smartLabel.setStyle(style);
  selectionMerge.each(function (dataObj) {
    var element = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this);
    var update = dataObj.update,
        text = dataObj.text,
        color = dataObj.color,
        textanchor = dataObj.textanchor,
        textStyle = dataObj.style;
    var background = dataObj.background;
    var backgroundVal;

    if (backgroundVal = background.value) {
      var backgroundPadding = background.padding;
      var diff;

      var _smartLabel$getOriSiz = smartLabel.getOriSize(dataObj.text),
          width = _smartLabel$getOriSiz.width,
          height = _smartLabel$getOriSiz.height;

      var backgroundEl = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(element, 'rect', [1]);

      if (textanchor === 'end') {
        diff = width;
      } else if (textanchor === 'start') {
        diff = 0;
      } else {
        diff = width / 2;
      }

      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setAttrs"])(backgroundEl.node(), {
        x: update.x - diff - backgroundPadding / 2,
        y: update.y - fontSize - backgroundPadding / 2,
        width: width + backgroundPadding,
        height: height + backgroundPadding
      });
      background && Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setStyles"])(backgroundEl, {
        background: backgroundVal
      });
    }

    var textEl = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(element, 'text', function (d) {
      return [d];
    }).text(text);
    var textNode = textEl.node();
    textStyle && Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setStyles"])(textNode, textStyle);
    color && Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setStyles"])(textNode, {
      fill: color
    });
    dataObj.className && textEl.classed(dataObj.className, true);
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setAttrs"])(textNode, update);
    textEl.attr('text-anchor', textanchor);
  });
  selection.exit().remove();
  return selection;
};

/* harmony default export */ __webpack_exports__["default"] = (drawText);

/***/ }),

/***/ "./packages/visual-layer/src/layers/text/styles.scss":
/*!***********************************************************!*\
  !*** ./packages/visual-layer/src/layers/text/styles.scss ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/visual-layer/src/layers/text/text.js":
/*!*******************************************************!*\
  !*** ./packages/visual-layer/src/layers/text/text.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return TextLayer; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _base_layer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../base-layer */ "./packages/visual-layer/src/base-layer/index.js");
/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./renderer */ "./packages/visual-layer/src/layers/text/renderer.js");
/* harmony import */ var _default_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./default-config */ "./packages/visual-layer/src/layers/text/default-config.js");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../helpers */ "./packages/visual-layer/src/helpers/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./styles.scss */ "./packages/visual-layer/src/layers/text/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_6__);
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }








/**
 * This layer is used to create labels for each data point. It has an encoding property ```text```
 * which determines from which field's data the value of the label will be taken. The text encoding
 * property is necessary for the layer to render the text.The mark type of this layer is ```text```.
 *
 * @public
 *
 * @class
 * @module TextLayer
 * @extends BaseLayer
 */

var TextLayer =
/*#__PURE__*/
function (_BaseLayer) {
  _inherits(TextLayer, _BaseLayer);

  function TextLayer() {
    _classCallCheck(this, TextLayer);

    return _possibleConstructorReturn(this, _getPrototypeOf(TextLayer).apply(this, arguments));
  }

  _createClass(TextLayer, [{
    key: "elemType",
    value: function elemType() {
      return 'text';
    }
    /**
     * Generates an array of objects containing x, y, width and height of the points from the data
     * @param  {Array.<Array>} data Data Array
     * @param  {Object} encoding  Config
     * @param  {Object} axes     Axes object
     * @return {Array.<Object>}  Array of points
     */

  }, {
    key: "translatePoints",
    value: function translatePoints(data, encoding, axes) {
      var _this = this;

      var points = [];
      var colorAxis = axes.color;
      var textEncoding = encoding.text;
      var textField = textEncoding.field,
          value = textEncoding.value,
          textFormatter = textEncoding.formatter;
      var colorEncoding = encoding.color;
      var colorField = colorEncoding && colorEncoding.field;
      var fieldsConfig = this.data().getFieldsConfig();
      var backgroundEncoding = encoding.text.background;
      var backgroundPadding = backgroundEncoding.padding;
      var backgroundValue = backgroundEncoding.value;
      var colorFieldIndex = fieldsConfig[colorField] ? fieldsConfig[colorField].index : -1;
      var textFieldIndex = textField ? fieldsConfig[textField] && fieldsConfig[textField].index : -1;
      var xEnc = _enums_constants__WEBPACK_IMPORTED_MODULE_5__["ENCODING"].X;
      var yEnc = _enums_constants__WEBPACK_IMPORTED_MODULE_5__["ENCODING"].Y;

      var _loop = function _loop(i, len) {
        var d = data[i];
        var row = d._data;
        var textValue = textField ? row[textFieldIndex] : value;

        var _map = [xEnc, yEnc].map(function (type) {
          return axes[type] ? axes[type].getScaleValue(d[type]) + axes[type].getUnitWidth() / 2 : 0;
        }),
            _map2 = _slicedToArray(_map, 2),
            xPx = _map2[0],
            yPx = _map2[1];

        var _getLayerColor = Object(_helpers__WEBPACK_IMPORTED_MODULE_4__["getLayerColor"])({
          datum: d,
          index: i
        }, {
          colorEncoding: colorEncoding,
          colorAxis: colorAxis,
          colorFieldIndex: colorFieldIndex
        }),
            color = _getLayerColor.color,
            rawColor = _getLayerColor.rawColor;

        var point = {
          enter: {},
          update: {
            x: xPx,
            y: yPx
          },
          text: textFormatter(textValue, i, data, _this),
          color: color,
          background: {
            value: backgroundValue instanceof Function ? backgroundValue(d, i, data, _this) : null,
            padding: backgroundPadding
          },
          meta: {
            stateColor: {},
            originalColor: rawColor,
            colorTransform: {}
          },
          style: {},
          _data: row,
          _id: d._id,
          source: d._data,
          rowId: d._id
        };
        point.className = Object(_helpers__WEBPACK_IMPORTED_MODULE_4__["getIndividualClassName"])(d, i, data, _this);
        points.push(point);
      };

      for (var i = 0, len = data.length; i < len; i++) {
        _loop(i, len);
      }

      points = Object(_helpers__WEBPACK_IMPORTED_MODULE_4__["positionPoints"])(this, points);
      points = points.filter(function (d) {
        var update = d.update;
        return !isNaN(update.x) && !isNaN(update.y);
      });
      return points;
    }
    /**
     * Renders the plot in the given container
     * @param  {SVGElement} container SVGElement which will hold the plot
     * @return {textLayer} Instance of text layer
     */

  }, {
    key: "render",
    value: function render(container) {
      var _this2 = this;

      var points;
      var config = this.config();
      var encoding = config.encoding;
      var normalizedData = this._normalizedData;
      var className = config.className;
      var qualifiedClassName = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getQualifiedClassName"])(config.defClassName, this.id(), config.classPrefix);
      var axes = this.axes();
      var containerSelection = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(container);
      containerSelection.classed("".concat(qualifiedClassName.join(' '), " ").concat(className), true);
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["createElements"])({
        data: normalizedData,
        append: 'g',
        selector: 'g',
        container: container,
        each: function each(dataArr, group, i) {
          var node = group.node();
          points = _this2.translatePoints(dataArr, encoding, axes, i);
          Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["setStyles"])(node, {
            'text-anchor': _enums_constants__WEBPACK_IMPORTED_MODULE_5__["TEXT_ANCHOR_MIDDLE"]
          });
          Object(_renderer__WEBPACK_IMPORTED_MODULE_2__["default"])(node, points, {
            className: qualifiedClassName[0]
          }, _this2._dependencies.smartLabel);
        }
      });
      return this;
    }
  }], [{
    key: "defaultConfig",

    /**
     * Returns the default configuration of the text layer
     * @return {Object} Default configuration of the text layer
     */
    value: function defaultConfig() {
      return _default_config__WEBPACK_IMPORTED_MODULE_3__["defaultConfig"];
    }
  }, {
    key: "formalName",
    value: function formalName() {
      return 'text';
    }
  }]);

  return TextLayer;
}(_base_layer__WEBPACK_IMPORTED_MODULE_1__["BaseLayer"]);



/***/ }),

/***/ "./packages/visual-layer/src/layers/tick/default-config.js":
/*!*****************************************************************!*\
  !*** ./packages/visual-layer/src/layers/tick/default-config.js ***!
  \*****************************************************************/
/*! exports provided: defaultConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultConfig", function() { return defaultConfig; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");

var defaultConfig = {
  defClassName: 'layer-tick',
  className: '',
  classPrefix: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"],
  interaction: {
    highlight: [{
      type: 'stroke',
      intensity: [0, 0, -15, 0]
    }],
    fade: [{
      type: 'stroke',
      intensity: [0, 0, 15, 0]
    }],
    focus: [{
      type: 'stroke',
      intensity: [0, 0, 15, 0]
    }]
  },
  innerPadding: 0.1,
  transform: {
    type: 'identity'
  },
  transition: {
    effect: 'cubic',
    duration: 1000
  },
  encoding: {
    color: {},
    x: {},
    y: {},
    x0: {},
    y0: {},
    strokeOpacity: {
      value: 0.5
    },
    fillOpacity: {
      value: 0.5
    }
  },
  states: {
    highlight: {
      className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"], "-layer-tick-highlight")
    },
    fadeout: {
      className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"], "-layer-tick-fadeout")
    },
    selected: {
      className: "".concat(_enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"], "-layer-tick-selected")
    }
  }
};

/***/ }),

/***/ "./packages/visual-layer/src/layers/tick/index.js":
/*!********************************************************!*\
  !*** ./packages/visual-layer/src/layers/tick/index.js ***!
  \********************************************************/
/*! exports provided: TickLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tick__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tick */ "./packages/visual-layer/src/layers/tick/tick.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TickLayer", function() { return _tick__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/visual-layer/src/layers/tick/renderer.js":
/*!***********************************************************!*\
  !*** ./packages/visual-layer/src/layers/tick/renderer.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");

/**
 * Draws ticks by using d3 selection
 * @param  {Object} params Contains container element and points
 * @return {Selection} Ticks Selection
 */

/* harmony default export */ __webpack_exports__["default"] = (/* istanbul ignore next */function (params) {
  var points = params.points,
      container = params.container,
      keyFn = params.keyFn,
      className = params.className;
  var mount = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(container);
  var ticks = mount.selectAll('path').data(points, keyFn);
  var ticksEnter = ticks.enter().append('path');
  mount.attr('class', className || '');
  ticksEnter.each(function (d) {
    var selection = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this);
    var enter = d.enter || {};
    Object.entries(enter).forEach(function (attr) {
      return !isNaN(attr[1]) && selection.attr(attr[0], attr[1]);
    });
  });
  ticks.exit().remove();
  return ticks.merge(ticksEnter).each(function (d) {
    var selection = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["selectElement"])(this);
    var update = d.update;
    var updateStyle = d.style || {};
    var x0 = update.x0 !== undefined ? update.x0 : update.x;
    var y0 = update.y0 !== undefined ? update.y0 : update.y;
    var path = "M ".concat(update.x, " ").concat(update.y, " L ").concat(x0, " ").concat(y0);
    d.className && selection.classed(d.className, true);
    selection.attr('d', path);
    Object.entries(updateStyle).forEach(function (styleObj) {
      return selection.style(styleObj[0], styleObj[1]);
    });
  });
});

/***/ }),

/***/ "./packages/visual-layer/src/layers/tick/styles.scss":
/*!***********************************************************!*\
  !*** ./packages/visual-layer/src/layers/tick/styles.scss ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/visual-layer/src/layers/tick/tick.js":
/*!*******************************************************!*\
  !*** ./packages/visual-layer/src/layers/tick/tick.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return TickLayer; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../point */ "./packages/visual-layer/src/layers/point/index.js");
/* harmony import */ var _default_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./default-config */ "./packages/visual-layer/src/layers/tick/default-config.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../enums/constants */ "./packages/visual-layer/src/enums/constants.js");
/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./renderer */ "./packages/visual-layer/src/layers/tick/renderer.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./styles.scss */ "./packages/visual-layer/src/layers/tick/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../helpers */ "./packages/visual-layer/src/helpers/index.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }








/**
 * This layer is used to create small lines. The orientation of the line is determined by the positional
 * encoding properties x0 and y0. The mark type of the layer is ```tick```.
 *
 * @public
 *
 * @class
 * @module TickLayer
 * @extends BaseLayer
 */

var TickLayer =
/*#__PURE__*/
function (_PointLayer) {
  _inherits(TickLayer, _PointLayer);

  function TickLayer() {
    _classCallCheck(this, TickLayer);

    return _possibleConstructorReturn(this, _getPrototypeOf(TickLayer).apply(this, arguments));
  }

  _createClass(TickLayer, [{
    key: "elemType",

    /**
     *
     *
     *
     * @memberof TickLayer
     */
    value: function elemType() {
      return 'path';
    }
    /**
     * Generates an array of objects containing x, y, width and height of the points from the data
     * @param  {Array.<Array>} data Data Array
     * @param  {Object} encoding  Config
     * @param  {Object} axes     Axes object
     * @return {Array.<Object>}  Array of points
     */

  }, {
    key: "translatePoints",
    value: function translatePoints(data, encoding, axes) {
      var config = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      var points = [];

      var _getAxesScales = Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["getAxesScales"])(axes),
          xAxis = _getAxesScales.xAxis,
          yAxis = _getAxesScales.yAxis;

      var fieldsConfig = this.data().getFieldsConfig();

      var _this$encodingFieldsI = this.encodingFieldsInf(),
          xField = _this$encodingFieldsI.xField,
          yField = _this$encodingFieldsI.yField,
          x0Field = _this$encodingFieldsI.x0Field,
          y0Field = _this$encodingFieldsI.y0Field,
          xFieldType = _this$encodingFieldsI.xFieldType,
          yFieldType = _this$encodingFieldsI.yFieldType;

      var isXDim = xFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
      var isYDim = yFieldType === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION;
      var key = isXDim ? _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ENCODING"].X : isYDim ? _enums_constants__WEBPACK_IMPORTED_MODULE_3__["ENCODING"].Y : null;
      var colorEncoding = encoding.color;
      var colorField = colorEncoding && colorEncoding.field;
      var colorFieldIndex = fieldsConfig[colorField] && fieldsConfig[colorField].index;
      var measurement = this.measurement();
      var colorAxis = axes.color;
      var _config$offset = config.offset,
          offsetX = _config$offset.x,
          offsetY = _config$offset.y;
      var _config$span = config.span,
          xSpan = _config$span.x,
          ySpan = _config$span.y;

      for (var i = 0, len = data.length; i < len; i++) {
        var xPx = void 0;
        var x0Px = void 0;
        var y0Px = void 0;
        var yPx = void 0;
        var d = data[i];
        var row = d._data;

        if (xField) {
          xPx = xAxis.getScaleValue(d.x) + offsetX;
          x0Px = xPx + xSpan;
        }

        if (yField) {
          yPx = yAxis.getScaleValue(d.y) + offsetY;
          y0Px = yPx !== null ? yPx + ySpan : null;
        }

        if (!xField) {
          xPx = 0;
          x0Px = measurement.width;

          if (!isNaN(yPx)) {
            yPx += ySpan / 2;
            y0Px = yPx;
          }
        }

        if (!yField) {
          yPx = 0;
          y0Px = measurement.height;
          x0Px = xPx += xSpan / 2;
        }

        if (x0Field) {
          x0Px = xAxis.getScaleValue(d.x0) + xSpan;
          yPx += ySpan / 2;
          y0Px -= ySpan / 2;
        }

        if (y0Field) {
          y0Px = yAxis.getScaleValue(d.y0) + ySpan;
          xPx += xSpan / 2;
          x0Px -= xSpan / 2;
        }

        var style = {};
        var meta = {};

        var _getLayerColor = Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["getLayerColor"])({
          datum: d,
          index: i
        }, {
          colorEncoding: colorEncoding,
          colorAxis: colorAxis,
          colorFieldIndex: colorFieldIndex
        }),
            color = _getLayerColor.color,
            rawColor = _getLayerColor.rawColor;

        style.stroke = color;
        meta.stateColor = {};
        meta.originalColor = rawColor;
        meta.colorTransform = {};

        if (!isNaN(xPx) && !isNaN(yPx)) {
          var point = {
            enter: {},
            update: {
              x: xPx,
              y: yPx,
              x0: x0Px,
              y0: y0Px
            },
            style: style,
            _data: row,
            _id: d._id,
            source: row,
            rowId: d._id,
            meta: meta
          };
          point.className = Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["getIndividualClassName"])(d, i, data, this);
          points.push(point);
          this.cachePoint(d[key], point);
        }
      }

      points = Object(_helpers__WEBPACK_IMPORTED_MODULE_6__["positionPoints"])(this, points);
      return points;
    }
  }, {
    key: "getMeasurementConfig",
    value: function getMeasurementConfig(offsetX, offsetY, widthSpan, heightSpan) {
      return {
        offset: {
          x: offsetX || 0,
          y: offsetY || 0
        },
        span: {
          x: widthSpan,
          y: heightSpan
        }
      };
    }
  }], [{
    key: "defaultConfig",

    /**
     *
     *
     * @staticg
     *
     * @memberof TickLayer
     */
    value: function defaultConfig() {
      return _default_config__WEBPACK_IMPORTED_MODULE_2__["defaultConfig"];
    }
    /**
     *
     *
     * @static
     *
     * @memberof TickLayer
     */

  }, {
    key: "formalName",
    value: function formalName() {
      return 'tick';
    }
    /**
     *
     *
     * @static
     *
     * @memberof TickLayer
     */

  }, {
    key: "drawFn",
    value: function drawFn() {
      return _renderer__WEBPACK_IMPORTED_MODULE_4__["default"];
    }
  }]);

  return TickLayer;
}(_point__WEBPACK_IMPORTED_MODULE_1__["PointLayer"]);



/***/ }),

/***/ "./packages/visual-layer/src/simple-layer/index.js":
/*!*********************************************************!*\
  !*** ./packages/visual-layer/src/simple-layer/index.js ***!
  \*********************************************************/
/*! exports provided: SimpleLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _simple_layer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./simple-layer */ "./packages/visual-layer/src/simple-layer/simple-layer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleLayer", function() { return _simple_layer__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/visual-layer/src/simple-layer/simple-layer.js":
/*!****************************************************************!*\
  !*** ./packages/visual-layer/src/simple-layer/simple-layer.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SimpleLayer; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }


/**
 * This is an interface class which any new layer class has to extend.
 *
 * @example
 * class BarLayer extends BaseLayer {
 *   update (params) {
 *       // super.update(params);
 *       // Update the bar layer
 *   }
 * }
 * @class
 */

var SimpleLayer =
/*#__PURE__*/
function () {
  function SimpleLayer() {
    _classCallCheck(this, SimpleLayer);
  }

  _createClass(SimpleLayer, [{
    key: "formalName",
    value: function formalName() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Sets or gets the dependencies.
     * @param {Object} dependencies Dependencies needed by layer
     * @return {BaseLayer} Instance of base layer.
     */

  }, {
    key: "dependencies",
    value: function dependencies() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Returns the config of the layer
     *
     * @param {Object} config Configuration of layer
     * @return {Object} configuration of layer
     */

  }, {
    key: "config",
    value: function config() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Acts as a getter or setter function
     * When setter
     * Returns the datamodel of the layer
     * @param { DataModel } dataModel instance of DataModel
     * @return { DataModel } DataModel instance of the layer
     */

  }, {
    key: "data",
    value: function data() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Returns a serialized schema of the layer
     * @return {Object} Serialized schema
     */

  }, {
    key: "serialize",
    value: function serialize() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Returns the unique identifier of this layer
     * @return {string} id of the layer
     */

  }, {
    key: "id",
    value: function id() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /*
     * This method resolves the x, y, x0 and y0 values from the transformed data.
     * It also checks the type of transformed data for example, if it is a stacked data
     * then it fetches the y and y0 values from the stacked data.
     * @param {Array.<Array>} transformedData transformed data
     * @param {Object} fieldMap field definitions
     * @param {string} transformType type of transformed data - stack, group or identity.
     * @return {Array.<Object>} Normalized data
     * @private
     */

  }, {
    key: "normalizeTransformedData",
    value: function normalizeTransformedData() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Gets the transform method from transform factory based on type of transform. It then calls the
     * transform method with the data and passes the configuration parameters of transform such as
     * groupBy, value field, etc.
     *
     * @param {DataModel} dataModel Instance of dataModel
     * @param {Object} config configuration for transforming data
     * @return {Array.<Array>} Transformed data.
     * @private
     */

  }, {
    key: "getTransformedData",
    value: function getTransformedData() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Calculates the domain from the data.
     * It checks the type of field and calculates the domain based on that. For example, if it
     * is a quantitative or temporal field, then it calculates the min and max from the data or
     * if it is a nominal field then it gets all the values from the data of that field.
     * @param {Array} data DataArray
     * @return {Array} Domain values array.
     */

  }, {
    key: "_calculateDomainFromData",
    value: function _calculateDomainFromData() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Returns the domain for the axis.
     *
     * @param {string} encodingType type of encoding x, y, color, etc.
     * @return {Object} Axis domains
     */

  }, {
    key: "getDomain",
    value: function getDomain() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Abstract method for getting nearest point
     * @return {BaseLayer} Instance of base layer
     */

  }, {
    key: "getNearestPoint",
    value: function getNearestPoint() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Abstract method for highlighting points
     * @return {BaseLayer} Instance of base layer
     */

  }, {
    key: "highlightPoint",
    value: function highlightPoint() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Abstract method for deselecting points
     * @return {BaseLayer} Instance of base layer
     */

  }, {
    key: "dehighlightPoint",
    value: function dehighlightPoint() {
      return this;
    }
  }, {
    key: "linkLayerStore",
    value: function linkLayerStore() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
    /**
     * Sets the container element for the layer to be renderered.
     * @param {SVGElement} mountPoint SVG element or group element.
     */

  }, {
    key: "mount",
    value: function mount() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }, {
    key: "render",
    value: function render() {
      throw new Error(muze_utils__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].INTERFACE_IMPL);
    }
  }]);

  return SimpleLayer;
}();



/***/ }),

/***/ "./packages/visual-unit/src/default-config.js":
/*!****************************************************!*\
  !*** ./packages/visual-unit/src/default-config.js ***!
  \****************************************************/
/*! exports provided: defaultConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultConfig", function() { return defaultConfig; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./enums/constants */ "./packages/visual-unit/src/enums/constants.js");

/**
 * Returns the default configuration of the visual unit
 * @return {Object} Default configuration of visual unit
 */

var defaultConfig = {
  classPrefix: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CLASSPREFIX"],
  defClassName: 'visual-unit',
  className: '',
  trackerClassName: 'visual-unit-tracker',
  gridLines: {
    defClassName: 'axis-grid-lines',
    className: '',
    show: true,
    color: '#efefef',
    zeroLineColor: '#b6b6b6'
  },
  gridBands: {
    defClassName: 'axis-grid-bands',
    className: '',
    show: false,
    y: {
      color: ['#fff', '#fbfbfb']
    },
    x: {
      color: ['#fff', '#f9f9f9']
    }
  },
  arcLayerClassName: 'layer-arc',
  interaction: {
    tooltip: {
      mode: _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CONSOLIDATED"]
    }
  },
  sideEffectClassName: 'side-effect-container'
};

/***/ }),

/***/ "./packages/visual-unit/src/enums/constants.js":
/*!*****************************************************!*\
  !*** ./packages/visual-unit/src/enums/constants.js ***!
  \*****************************************************/
/*! exports provided: CLASSPREFIX, IDFIELD, GRID_LINE_PARENT_GROUP_CLASS, GRID_BAND_PARENT_GROUP_CLASS, GRID_PARENT_GROUP, BAND, TICK, GRID_BAND, GRID_LINE, CONSOLIDATED, FRAGMENTED, FACET_BY_FIELDS, RETINAL_FIELDS, PARENT_ALIAS, LAYERS, CACHED_DATA, STORE, NUMERIC */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLASSPREFIX", function() { return CLASSPREFIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDFIELD", function() { return IDFIELD; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GRID_LINE_PARENT_GROUP_CLASS", function() { return GRID_LINE_PARENT_GROUP_CLASS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GRID_BAND_PARENT_GROUP_CLASS", function() { return GRID_BAND_PARENT_GROUP_CLASS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GRID_PARENT_GROUP", function() { return GRID_PARENT_GROUP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BAND", function() { return BAND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TICK", function() { return TICK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GRID_BAND", function() { return GRID_BAND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GRID_LINE", function() { return GRID_LINE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CONSOLIDATED", function() { return CONSOLIDATED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FRAGMENTED", function() { return FRAGMENTED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FACET_BY_FIELDS", function() { return FACET_BY_FIELDS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RETINAL_FIELDS", function() { return RETINAL_FIELDS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PARENT_ALIAS", function() { return PARENT_ALIAS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAYERS", function() { return LAYERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CACHED_DATA", function() { return CACHED_DATA; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "STORE", function() { return STORE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NUMERIC", function() { return NUMERIC; });
var CLASSPREFIX = 'muze';
var IDFIELD = '__id__';
var GRID_LINE_PARENT_GROUP_CLASS = 'grid-lines';
var GRID_BAND_PARENT_GROUP_CLASS = 'grid-bands';
var GRID_PARENT_GROUP = 'grid-parent-group';
var BAND = 'band';
var TICK = 'tick';
var GRID_BAND = 'gridBands';
var GRID_LINE = 'gridLines';
var CONSOLIDATED = 'consolidated';
var FRAGMENTED = 'fragmented';
var FACET_BY_FIELDS = 'facetByFields';
var RETINAL_FIELDS = 'retinalFields';
var PARENT_ALIAS = 'parentAlias';
var LAYERS = 'layers';
var CACHED_DATA = 'cachedData';
var STORE = 'store';
var NUMERIC = 'numeric';

/***/ }),

/***/ "./packages/visual-unit/src/enums/reactive-props.js":
/*!**********************************************************!*\
  !*** ./packages/visual-unit/src/enums/reactive-props.js ***!
  \**********************************************************/
/*! exports provided: CONFIG, DATA, AXES, LAYERDEFS, WIDTH, HEIGHT, MOUNT, TRANSFORM, TRANSFORMEDDATA, DATADOMAIN, FIELDS, LAYERAXISINDEX, LAYERS, DOMAIN */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CONFIG", function() { return CONFIG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DATA", function() { return DATA; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AXES", function() { return AXES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAYERDEFS", function() { return LAYERDEFS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WIDTH", function() { return WIDTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HEIGHT", function() { return HEIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MOUNT", function() { return MOUNT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TRANSFORM", function() { return TRANSFORM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TRANSFORMEDDATA", function() { return TRANSFORMEDDATA; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DATADOMAIN", function() { return DATADOMAIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FIELDS", function() { return FIELDS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAYERAXISINDEX", function() { return LAYERAXISINDEX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAYERS", function() { return LAYERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DOMAIN", function() { return DOMAIN; });
var CONFIG = 'config';
var DATA = 'data';
var AXES = 'axes';
var LAYERDEFS = 'layerDef';
var WIDTH = 'width';
var HEIGHT = 'height';
var MOUNT = 'mount';
var TRANSFORM = 'transform';
var TRANSFORMEDDATA = 'transformedData';
var DATADOMAIN = 'dataDomain';
var FIELDS = 'fields';
var LAYERAXISINDEX = 'layerAxisIndex';
var LAYERS = 'layers';
var DOMAIN = 'domain';

/***/ }),

/***/ "./packages/visual-unit/src/firebolt/action-behaviour-map.js":
/*!*******************************************************************!*\
  !*** ./packages/visual-unit/src/firebolt/action-behaviour-map.js ***!
  \*******************************************************************/
/*! exports provided: actionBehaviourMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "actionBehaviourMap", function() { return actionBehaviourMap; });
/* harmony import */ var _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/muze-firebolt */ "./packages/muze-firebolt/src/index.js");
var _actionBehaviourMap;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


var actionBehaviourMap = (_actionBehaviourMap = {}, _defineProperty(_actionBehaviourMap, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["ACTIONS"].DRAG, {
  behaviours: [_chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["BEHAVIOURS"].BRUSH],
  touch: false
}), _defineProperty(_actionBehaviourMap, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["ACTIONS"].HOVER, {
  behaviours: [_chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["BEHAVIOURS"].HIGHLIGHT]
}), _defineProperty(_actionBehaviourMap, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["ACTIONS"].LONGTOUCH, {
  behaviours: [_chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["BEHAVIOURS"].SELECT],
  touch: true
}), _defineProperty(_actionBehaviourMap, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["ACTIONS"].TOUCHDRAG, {
  behaviours: [_chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["BEHAVIOURS"].BRUSH],
  touch: true
}), _defineProperty(_actionBehaviourMap, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["ACTIONS"].CLICK, {
  behaviours: [_chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_0__["BEHAVIOURS"].SELECT],
  touch: false
}), _actionBehaviourMap);

/***/ }),

/***/ "./packages/visual-unit/src/firebolt/data-propagator.js":
/*!**************************************************************!*\
  !*** ./packages/visual-unit/src/firebolt/data-propagator.js ***!
  \**************************************************************/
/*! exports provided: propagateValues */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "propagateValues", function() { return propagateValues; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }



var getModelWithFacetData = function getModelWithFacetData(dm, data) {
  var dataObj = dm.getData();
  var schema1 = dataObj.schema;
  var data1 = dataObj.data;
  var jsonData = [];
  var schema2 = data[0].map(function (d) {
    return {
      name: "".concat(d),
      type: muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION
    };
  });
  var data2 = data[1];
  data1.forEach(function (d) {
    var tuple = {};
    schema1.forEach(function (obj, i) {
      tuple[obj.name] = d[i];
    });
    schema2.forEach(function (obj, i) {
      tuple[obj.name] = data2[i];
    });
    jsonData.push(tuple);
  });
  return new muze_utils__WEBPACK_IMPORTED_MODULE_0__["DataModel"](jsonData, [].concat(_toConsumableArray(schema1), _toConsumableArray(schema2)));
};

var propagateValues = function propagateValues(instance, action) {
  var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  var propagationData;
  var payload = config.payload;
  var selectionSet = config.selectionSet;
  var propagationFieldInf = config.propagationFields[action] || {};
  var propagationFields = propagationFieldInf.fields || [];
  var append = propagationFieldInf.append;
  var criteria = payload.criteria;
  var context = instance.context;
  var dataModel = context.cachedData()[0];
  var sourceId = context.id();
  var sideEfffects = instance.sideEffects();
  var behaviourEffectMap = instance._behaviourEffectMap;
  var mergedModel = selectionSet.mergedEnter.model;
  var fieldsConfig = dataModel.getFieldsConfig();
  payload.sourceUnit = sourceId;
  payload.action = action;
  payload.sourceCanvas = context.parentAlias();
  var propagationBehaviourMap = instance._propagationBehaviourMap;
  var propagationBehaviour = propagationBehaviourMap[action] || action;
  var propFields = [];

  if (criteria === null) {
    propagationData = null;
  } else if (Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["isSimpleObject"])(criteria)) {
    propFields = Object.keys(criteria || {});
    propagationData = mergedModel ? mergedModel.project(propFields) : null;
  } else {
    propFields = criteria[0];
    propagationData = mergedModel ? mergedModel.project(propFields) : null;
  }

  var facetByFields = context.facetByFields();

  if (propagationData !== null && propagationFields.length) {
    var fields = propagationData.getData().schema.map(function (d) {
      return d.name;
    });
    propagationData = getModelWithFacetData(propagationData, facetByFields);
    propFields = append ? [].concat(_toConsumableArray(fields), _toConsumableArray(propagationFields)) : propagationFields;
    propagationData = propagationData.project(propFields);
  }

  var propagateInterpolatedValues = false;

  if (propFields.length && propFields.every(function (field) {
    return fieldsConfig[field] && fieldsConfig[field].def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE;
  })) {
    propagateInterpolatedValues = true;
  }

  var groupId = context.parentAlias();
  payload.action = action;
  var behaviourInstance = instance._actions.behavioural[propagationBehaviour];
  var isMutableAction = behaviourInstance ? behaviourInstance.constructor.mutates() : false;

  var filterFn = function filterFn(entry, propagationConf) {
    var effects = behaviourEffectMap[entry.config.action];
    var mutates = entry.config.groupId ? effects.some(function (d) {
      return sideEfffects[d.name || d].constructor.mutates();
    }) : true;
    return entry.config.groupId !== propagationConf.groupId && mutates;
  };

  var sourceBehaviour = instance._actions.behavioural[action];
  var mutates = sourceBehaviour ? sourceBehaviour.constructor.mutates() : false;
  var propConfig = {
    payload: payload,
    action: action,
    criteria: propagationData,
    isMutableAction: mutates,
    propagateInterpolatedValues: propagateInterpolatedValues,
    groupId: groupId,
    sourceId: mutates ? groupId : sourceId,
    filterFn: filterFn,
    enabled: function enabled(propConf, firebolt) {
      return action !== propagationBehaviour ? propConf.payload.sourceCanvas === firebolt.context.parentAlias() : true;
    }
  };
  dataModel.propagate(propagationData, propConfig, true);

  if (action !== propagationBehaviour) {
    propConfig = {
      payload: payload,
      sourceId: isMutableAction ? groupId : sourceId,
      criteria: propagationData,
      isMutableAction: isMutableAction,
      propagateInterpolatedValues: propagateInterpolatedValues,
      action: propagationBehaviour,
      groupId: groupId,
      applyOnSource: action === propagationBehaviour,
      enabled: function enabled(propConf, firebolt) {
        return propConf.payload.sourceCanvas !== firebolt.context.parentAlias();
      },
      filterFn: filterFn
    };
    dataModel.propagate(propagationData, propConfig, true, {
      filterImmutableAction: function filterImmutableAction(actionInf, propInf) {
        return actionInf.groupId !== propInf.groupId;
      }
    });
  }
};

/***/ }),

/***/ "./packages/visual-unit/src/firebolt/helper.js":
/*!*****************************************************!*\
  !*** ./packages/visual-unit/src/firebolt/helper.js ***!
  \*****************************************************/
/*! exports provided: initSideEffects, clearActionHistory, dispatchQueuedSideEffects, registerListeners */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initSideEffects", function() { return initSideEffects; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clearActionHistory", function() { return clearActionHistory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dispatchQueuedSideEffects", function() { return dispatchQueuedSideEffects; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerListeners", function() { return registerListeners; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @chartshq/muze-firebolt */ "./packages/muze-firebolt/src/index.js");
/* harmony import */ var _enums_reactive_props__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums/reactive-props */ "./packages/visual-unit/src/enums/reactive-props.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }




var initSideEffects = function initSideEffects(sideEffects, firebolt) {
  for (var key in sideEffects) {
    if ({}.hasOwnProperty.call(sideEffects, key)) {
      sideEffects[key] instanceof _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__["SpawnableSideEffect"] && sideEffects[key].drawingContext(function () {
        var context = firebolt.context;
        return context.getDrawingContext();
      });
      sideEffects[key].valueParser(firebolt.context.valueParser());
    }
  }
};
var clearActionHistory = function clearActionHistory(context) {
  var actionHistory = context._actionHistory;

  for (var key in actionHistory) {
    if (actionHistory[key].isMutableAction) {
      delete context._actionHistory[key];
    }
  }
};
var dispatchQueuedSideEffects = function dispatchQueuedSideEffects(context) {
  var queuedSideEffects = context._queuedSideEffects;
  Object.entries(queuedSideEffects).forEach(function (entry) {
    var sideEffect = entry[1];
    context.dispatchSideEffect.apply(context, [sideEffect.name].concat(_toConsumableArray(sideEffect.params)));
  });
  context._queuedSideEffects = {};
};
var registerListeners = function registerListeners(firebolt) {
  var context = firebolt.context;
  var store = context.store();
  store.registerImmediateListener(["local.units.".concat(context.metaInf().namespace, ".").concat(_enums_reactive_props__WEBPACK_IMPORTED_MODULE_2__["DATA"])], function (dataModel) {
    var dm = dataModel[1];

    if (dm) {
      firebolt.createSelectionSet(firebolt.context.data().getData().uids);
      firebolt.initializeSideEffects();
      var originalData = firebolt.context.cachedData()[0];
      firebolt.attachPropagationListener(originalData);
    }
  });
  store.registerChangeListener(["local.units.".concat(context.metaInf().namespace, ".").concat(_enums_reactive_props__WEBPACK_IMPORTED_MODULE_2__["DATA"])], function () {
    if (!firebolt.context.mount()) {
      var originalData = firebolt.context.cachedData()[0];
      originalData.unsubscribe('propagation');
    }
  });

  context._layerDeps.throwback.registerChangeListener([muze_utils__WEBPACK_IMPORTED_MODULE_0__["CommonProps"].ON_LAYER_DRAW], function (_ref) {
    var _ref2 = _slicedToArray(_ref, 2),
        onlayerdraw = _ref2[1];

    if (onlayerdraw) {
      dispatchQueuedSideEffects(firebolt);
      clearActionHistory(firebolt);
    }
  });
};

/***/ }),

/***/ "./packages/visual-unit/src/firebolt/index.js":
/*!****************************************************!*\
  !*** ./packages/visual-unit/src/firebolt/index.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return UnitFireBolt; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @chartshq/muze-firebolt */ "./packages/muze-firebolt/src/index.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helper */ "./packages/visual-unit/src/firebolt/helper.js");
/* harmony import */ var _payload_generator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./payload-generator */ "./packages/visual-unit/src/firebolt/payload-generator.js");
/* harmony import */ var _data_propagator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./data-propagator */ "./packages/visual-unit/src/firebolt/data-propagator.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }






/**
 * This class manages the interactions of visual unit. It associates physical actions with
 * behavioural actions. It also propagates the behavioural actions to other datamodels.
 */

var UnitFireBolt =
/*#__PURE__*/
function (_Firebolt) {
  _inherits(UnitFireBolt, _Firebolt);

  function UnitFireBolt() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, UnitFireBolt);

    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
      params[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UnitFireBolt)).call.apply(_getPrototypeOf2, [this].concat(params)));
    Object(_helper__WEBPACK_IMPORTED_MODULE_2__["registerListeners"])(_assertThisInitialized(_assertThisInitialized(_this)));
    return _this;
  }

  _createClass(UnitFireBolt, [{
    key: "propagate",
    value: function propagate(behaviour, payload, selectionSet, sideEffects) {
      Object(_data_propagator__WEBPACK_IMPORTED_MODULE_4__["propagateValues"])(this, behaviour, {
        payload: payload,
        selectionSet: selectionSet,
        sideEffects: sideEffects,
        propagationFields: this._propagationFields
      });
    }
  }, {
    key: "getApplicableSideEffects",
    value: function getApplicableSideEffects(sideEffects, payload, propagationInf) {
      var context = this.context;
      var unitId = context.id();
      var aliasName = context.parentAlias();
      var propagationSourceCanvas = propagationInf.propPayload && propagationInf.propPayload.sourceCanvas;
      var sourceUnitId = propagationInf.propPayload && propagationInf.propPayload.sourceUnit;
      var sourceSideEffects = this._sourceSideEffects;
      var sideEffectInstances = this.sideEffects();
      var actionOnSource = sourceUnitId ? sourceUnitId === unitId : true;
      var applicableSideEffects = payload.sideEffects ? [{
        effects: payload.sideEffects,
        behaviours: [payload.action]
      }] : sideEffects;
      applicableSideEffects.forEach(function (d) {
        var mappedEffects = d.effects;
        mappedEffects = mappedEffects.filter(function (se) {
          var mutates = sideEffectInstances[se.name || se].constructor.mutates();

          if (mutates && propagationInf.isMutableAction === false) {
            return false;
          }

          if (!actionOnSource && payload.criteria !== null) {
            var sideEffectChecker = sourceSideEffects[se.name || se];
            return sideEffectChecker ? sideEffectChecker(propagationInf.propPayload, context) : true;
          }

          if (propagationSourceCanvas === aliasName || actionOnSource) {
            return se.applyOnSource !== false;
          }

          return true;
        });
        d.effects = mappedEffects;
      });
      return applicableSideEffects;
    }
  }, {
    key: "shouldApplySideEffects",
    value: function shouldApplySideEffects(propagate) {
      return propagate === false;
    }
  }, {
    key: "onDataModelPropagation",
    value: function onDataModelPropagation() {
      var _this2 = this;

      return function (data, config) {
        var isSourceFieldPresent = true;
        var isMutableAction = false;
        var propPayload = config.payload;
        var sourceIdentifiers = config.sourceIdentifiers;
        var enabledFn = config.enabled;
        var action = config.action;
        var payloadFn = _payload_generator__WEBPACK_IMPORTED_MODULE_3__["payloadGenerator"][action] || _payload_generator__WEBPACK_IMPORTED_MODULE_3__["payloadGenerator"].__default;

        if (sourceIdentifiers) {
          var fieldsConfig = sourceIdentifiers.getFieldsConfig();
          var sourceIdentifierFields = Object.keys(fieldsConfig);
          var propFields = Object.keys(data[0].getFieldsConfig());

          if (!Object.values(fieldsConfig).some(function (d) {
            return d.def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE;
          })) {
            isSourceFieldPresent = sourceIdentifierFields.some(function (d) {
              return propFields.indexOf(d) !== -1;
            });
          }
        }

        var payload = payloadFn(_this2.context, data, config);
        var sourceBehaviours = _this2._sourceBehaviours;
        var filterFn = sourceBehaviours[action] || sourceBehaviours['*'];
        var enabled = true;

        if (filterFn) {
          enabled = filterFn(propPayload || {}, _this2.context);
        }

        if (enabledFn) {
          enabled = enabledFn(config, _this2) && enabled !== false;
        }

        if (enabled) {
          var effects = _this2._behaviourEffectMap[action];

          var sideEffectInstances = _this2.sideEffects();

          isMutableAction = config.groupId ? effects.some(function (d) {
            return sideEffectInstances[d.name || d].constructor.mutates();
          }) : config.isMutableAction;
          var propagationInf = {
            propagate: false,
            data: data,
            propPayload: propPayload,
            sourceIdentifiers: sourceIdentifiers,
            persistent: false,
            isSourceFieldPresent: isSourceFieldPresent,
            sourceId: config.propagationSourceId,
            isMutableAction: config.isMutableAction
          };
          _this2._actionHistory[action] = {
            payload: payload,
            propagationInf: propagationInf,
            isMutableAction: isMutableAction
          };

          _this2.dispatchBehaviour(action, payload, propagationInf);
        }
      };
    }
  }, {
    key: "prepareSelectionSets",
    value: function prepareSelectionSets(behaviours) {
      var data = this.context.data();

      if (data) {
        this.createSelectionSet(data.getData().uids, behaviours);
      }

      return this;
    }
  }, {
    key: "initializeSideEffects",
    value: function initializeSideEffects() {
      if (this.context.data()) {
        _get(_getPrototypeOf(UnitFireBolt.prototype), "initializeSideEffects", this).call(this);
      }

      return this;
    }
  }, {
    key: "remove",
    value: function remove() {
      this.context.cachedData()[0].unsubscribe('propagation');
      return this;
    }
  }]);

  return UnitFireBolt;
}(_chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_1__["Firebolt"]);



/***/ }),

/***/ "./packages/visual-unit/src/firebolt/payload-generator.js":
/*!****************************************************************!*\
  !*** ./packages/visual-unit/src/firebolt/payload-generator.js ***!
  \****************************************************************/
/*! exports provided: payloadGenerator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "payloadGenerator", function() { return payloadGenerator; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }



var getRangeFromData = function getRangeFromData(instance, selectionDataModel, propConfig) {
  var criteria;
  var dataObj = selectionDataModel[0].getData();
  var propCriteria = propConfig.payload.criteria;
  var sourceIdentifiers = propConfig.sourceIdentifiers;
  var schema = dataObj.schema;
  var fieldMap = instance.data().getFieldsConfig();
  var data = dataObj.data;
  var isActionSourceSame = instance.id() === propConfig.sourceId;

  if (isActionSourceSame) {
    criteria = propCriteria;
  } else {
    criteria = sourceIdentifiers !== null ? schema.reduce(function (acc, obj, index) {
      var range;
      var field = obj.name;
      var fieldObj = fieldMap[field];
      var type = fieldObj && (fieldObj.def.subtype ? fieldObj.def.subtype : fieldObj.def.type);
      var isDimension = type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].CATEGORICAL;

      if (!fieldObj) {
        return acc;
      }

      if (!isDimension) {
        range = [Math.min.apply(Math, _toConsumableArray(data.map(function (d) {
          return d[index];
        }))), Math.max.apply(Math, _toConsumableArray(data.map(function (d) {
          return d[index];
        })))];
      } else {
        range = data.map(function (d) {
          return d[index];
        });
      }

      acc[field] = range;
      return acc;
    }, {}) : null;
  }

  return criteria;
};

var payloadGenerator = {
  brush: function brush(instance, selectionDataModel, propConfig) {
    var propPayload = propConfig.payload;
    var criteria = getRangeFromData(instance, selectionDataModel, propConfig);
    var payload = Object.assign({}, propPayload);
    payload.criteria = criteria;
    return payload;
  },
  __default: function __default(instance, selectionDataModel, propConfig) {
    var propPayload = propConfig.payload;
    var sourceIdentifiers = propConfig.sourceIdentifiers;
    var dataObj = selectionDataModel[0].getData();
    var schema = dataObj.schema;
    var payload = Object.assign({}, propPayload);
    schema = dataObj.schema;
    var data = dataObj.data;
    var sourceFields = schema.map(function (d) {
      return d.name;
    });
    payload.criteria = !sourceIdentifiers && selectionDataModel[0].isEmpty() ? null : [sourceFields].concat(_toConsumableArray(data));
    payload.sourceFields = sourceIdentifiers ? sourceIdentifiers.getSchema().map(function (d) {
      return d.name;
    }) : [];
    return payload;
  }
};

/***/ }),

/***/ "./packages/visual-unit/src/helper/grid-lines.js":
/*!*******************************************************!*\
  !*** ./packages/visual-unit/src/helper/grid-lines.js ***!
  \*******************************************************/
/*! exports provided: getGridLayerDefinitions, getGridLayerData, createGridLines, createGridLineLayer, attachDataToGridLineLayers, renderGridLineLayers */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getGridLayerDefinitions", function() { return getGridLayerDefinitions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getGridLayerData", function() { return getGridLayerData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createGridLines", function() { return createGridLines; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createGridLineLayer", function() { return createGridLineLayer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "attachDataToGridLineLayers", function() { return attachDataToGridLineLayers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "renderGridLineLayers", function() { return renderGridLineLayers; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @chartshq/muze-axis */ "./packages/muze-axis/src/index.js");
/* harmony import */ var _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @chartshq/visual-layer */ "./packages/visual-layer/src/index.js");
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../enums/constants */ "./packages/visual-unit/src/enums/constants.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





var BAR_LAYER = _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_2__["LAYER_TYPES"].BAR_LAYER,
    TICK_LAYER = _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_2__["LAYER_TYPES"].TICK_LAYER;
var LINEAR = _chartshq_muze_axis__WEBPACK_IMPORTED_MODULE_1__["ScaleType"].LINEAR;

var getLayerDefinition = function getLayerDefinition(context, axes, type, orientation) {
  var _definition;

  var encoding;
  var config = context.config();
  var classPrefix = config.classPrefix,
      gridLines = config.gridLines,
      gridBands = config.gridBands;
  var gridLineColor = gridLines.color;
  var zeroLineColor = gridLines.zeroLineColor;
  var defClassName = type === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["GRID_BAND"] ? gridBands.defClassName : gridLines.defClassName;
  var gridBandColor = gridBands[orientation].color;
  var axis = axes[orientation][0];
  var isLinearScale = axis.constructor.type() === LINEAR;

  if (type === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["GRID_BAND"] && isLinearScale) {
    var _encoding;

    encoding = (_encoding = {}, _defineProperty(_encoding, orientation, "".concat(orientation, "value")), _defineProperty(_encoding, "".concat(orientation, "0"), "".concat(orientation, "value0")), _encoding);
  } else {
    encoding = _defineProperty({}, orientation, isLinearScale ? "".concat(orientation, "value") : "".concat(orientation, "dim"));
  }

  encoding.color = {
    value: function value(data, i) {
      var isNegativeDomain = isLinearScale && axis.domain()[0] < 0;

      if (type === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["GRID_BAND"]) {
        return gridBandColor[i % 2];
      }

      return isNegativeDomain && data[orientation] === 0 ? zeroLineColor : gridLineColor;
    }
  };
  return {
    definition: (_definition = {
      defClassName: "".concat(defClassName, "-").concat(orientation),
      className: config.className,
      name: orientation,
      individualClassName: function individualClassName(data, i) {
        var className;
        var isNegativeDomain = isLinearScale && axis.domain()[0] < 0;

        if (isNegativeDomain && data.y === 0 && type !== _enums_constants__WEBPACK_IMPORTED_MODULE_3__["GRID_BAND"]) {
          className = "".concat(classPrefix, "-axis-zero-line");
        } else {
          className = "".concat(classPrefix, "-grid-").concat(type, "-").concat(orientation, "-").concat(i % 2);
        }

        return className;
      }
    }, _defineProperty(_definition, "pad".concat(orientation.toUpperCase()), type === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["GRID_BAND"] ? 0 : undefined), _defineProperty(_definition, "encoding", encoding), _definition),
    axes: _defineProperty({}, orientation, axis),
    interactive: false
  };
};

var getDefaultVisibilty = function getDefaultVisibilty(show, axis) {
  if (axis.constructor.type() === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["NUMERIC"]) {
    return show;
  }

  return false;
};

var getGridLayerDefinitions = function getGridLayerDefinitions(context, config, type) {
  return ['x', 'y'].map(function (axisType) {
    var axes = context.axes();

    if (!axes[axisType]) {
      return null;
    }

    var show = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["defaultValue"])(config[axisType] && config[axisType].show, getDefaultVisibilty(config.show, axes[axisType][0]));
    return show ? getLayerDefinition(context, axes, type, axisType) : null;
  }).filter(function (d) {
    return d !== null;
  });
};
var getGridLayerData = function getGridLayerData(axes, fields, fieldsConfig) {
  var gridData = {};
  ['x', 'y'].forEach(function (type) {
    var ticks = axes[type][0].getTickValues();
    var subtype = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getObjProp"])(fieldsConfig, Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getObjProp"])(fields, type, 0).getMembers()[0], 'def', 'subtype');
    var jsonData = [];
    var schema = [{
      name: 'yvalue',
      type: 'measure'
    }, {
      name: 'xvalue',
      type: 'measure'
    }, {
      name: 'yvalue0',
      type: 'measure'
    }, {
      name: 'xvalue0',
      type: 'measure'
    }, {
      name: 'xdim',
      type: 'dimension',
      subtype: subtype
    }, {
      name: 'ydim',
      type: 'dimension',
      subtype: subtype
    }];
    var len = Math.max(ticks.length);
    ticks = subtype === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL ? ticks.map(function (d) {
      return d.getTime();
    }) : ticks;

    for (var i = 0; i < len; i += 1) {
      var _jsonData$push;

      jsonData.push((_jsonData$push = {}, _defineProperty(_jsonData$push, "".concat(type, "value"), ticks[i]), _defineProperty(_jsonData$push, "".concat(type, "value0"), ticks[i + 1]), _defineProperty(_jsonData$push, "".concat(type, "dim"), ticks[i]), _defineProperty(_jsonData$push, "".concat(type, "dim"), ticks[i]), _jsonData$push));
    }

    gridData[type] = new muze_utils__WEBPACK_IMPORTED_MODULE_0__["DataModel"](jsonData, schema);
  });
  return gridData;
}; // @todo Use dataSelect method to reuse instances when the method is fixed. #110

var createGridLines = function createGridLines() {
  var instances = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var createFn = arguments.length > 1 ? arguments[1] : undefined;
  var definitions = arguments.length > 2 ? arguments[2] : undefined;
  var iteratorFn = arguments.length > 3 ? arguments[3] : undefined;
  var map = {};
  definitions.forEach(function (def) {
    var name = def.definition.name;
    var instance = instances[name];

    if (!instance) {
      instances[name] = instance = createFn(def);
    }

    iteratorFn(instance, def, name);
    map[name] = 1;
  });

  for (var key in instances) {
    if (!(key in map)) {
      instances[key].remove();
      delete instances[key];
    }
  }

  return instances;
};
var createGridLineLayer = function createGridLineLayer(context) {
  var vuConf = context.config();
  var metaInf = context.metaInf();
  var store = context.store();
  var timeDiffs = context._timeDiffs;
  [_enums_constants__WEBPACK_IMPORTED_MODULE_3__["GRID_BAND"], _enums_constants__WEBPACK_IMPORTED_MODULE_3__["GRID_LINE"]].forEach(function (type) {
    var mark;
    var config;

    if (type === _enums_constants__WEBPACK_IMPORTED_MODULE_3__["GRID_BAND"]) {
      mark = BAR_LAYER;
      config = vuConf.gridBands;
    } else {
      mark = TICK_LAYER;
      config = vuConf.gridLines;
    }

    var definitions = getGridLayerDefinitions(context, config, type);
    var sel = "_".concat(type, "Selection");
    context[sel] = createGridLines(context[sel], function () {
      var inst = _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_2__["layerFactory"].getLayerInstance({
        mark: mark
      });
      inst.dependencies(context._layerDeps);
      return inst;
    }, definitions, function (layer, atomicDef, key) {
      var definition = atomicDef.definition;
      var sConf = _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_2__["layerFactory"].getSerializedConf(mark, definition);
      var axesObj = atomicDef.axes;
      layer.metaInf({
        unitRowIndex: metaInf.rowIndex,
        unitColIndex: metaInf.colIndex,
        namespace: "".concat(metaInf.namespace).concat(type).concat(key)
      }).store(store).config(sConf).dataProps({
        timeDiffs: timeDiffs
      }).axes(axesObj);
    });
    context["_".concat(type)] = Object.values(context[sel]);
  });
};
var attachDataToGridLineLayers = function attachDataToGridLineLayers(context) {
  var _ref;

  var axes = context.axes();
  var measurement = {
    width: context.width(),
    height: context.height()
  };
  var gridLines = context._gridLines;
  var gridBands = context._gridBands;
  var gridLayerData = getGridLayerData(axes, context.fields(), context.data().getFieldsConfig());

  (_ref = []).concat.apply(_ref, _toConsumableArray(gridBands).concat(_toConsumableArray(gridLines))).forEach(function (inst) {
    inst.data(inst.axes().x ? gridLayerData.x : gridLayerData.y).measurement(measurement);
  });
};
var renderGridLineLayers = function renderGridLineLayers(context, container) {
  var config = context.config();
  var classPrefix = config.classPrefix;
  var gridLines = context._gridLines;
  var gridBands = context._gridBands;
  var gridLineParentGroup = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'g', [1], "".concat(classPrefix, "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["GRID_PARENT_GROUP"]));
  [[gridLines, "".concat(classPrefix, "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["GRID_LINE_PARENT_GROUP_CLASS"])], [gridBands, "".concat(classPrefix, "-").concat(_enums_constants__WEBPACK_IMPORTED_MODULE_3__["GRID_BAND_PARENT_GROUP_CLASS"])]].forEach(function (entry) {
    var _entry = _slicedToArray(entry, 2),
        instances = _entry[0],
        parentGroupClass = _entry[1];

    var mountPoint = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(gridLineParentGroup, 'g', [1], ".".concat(parentGroupClass));
    var className = "".concat(parentGroupClass, "-group");
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(mountPoint, 'g', instances, ".".concat(className), {
      update: function update(group, instance) {
        instance.dataProps({
          timeDiffs: context._timeDiffs
        }).mount(group.node());
      }
    });
  });
};

/***/ }),

/***/ "./packages/visual-unit/src/helper/index.js":
/*!**************************************************!*\
  !*** ./packages/visual-unit/src/helper/index.js ***!
  \**************************************************/
/*! exports provided: getDimensionMeasureMap, transformDataModels, getLayerFromDef, resolveEncodingTransform, createLayers, sanitizeLayerDef, attachDataToLayers, attachAxisToLayers, getLayerAxisIndex, unionDomainFromLayers, renderLayers, getNearestDimensionalValue, getLayersBy, removeLayersBy, createSideEffectGroup, createRenderPromise */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDimensionMeasureMap", function() { return getDimensionMeasureMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformDataModels", function() { return transformDataModels; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLayerFromDef", function() { return getLayerFromDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resolveEncodingTransform", function() { return resolveEncodingTransform; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createLayers", function() { return createLayers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sanitizeLayerDef", function() { return sanitizeLayerDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "attachDataToLayers", function() { return attachDataToLayers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "attachAxisToLayers", function() { return attachAxisToLayers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLayerAxisIndex", function() { return getLayerAxisIndex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unionDomainFromLayers", function() { return unionDomainFromLayers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "renderLayers", function() { return renderLayers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNearestDimensionalValue", function() { return getNearestDimensionalValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLayersBy", function() { return getLayersBy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeLayersBy", function() { return removeLayersBy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createSideEffectGroup", function() { return createSideEffectGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createRenderPromise", function() { return createRenderPromise; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @chartshq/visual-layer */ "./packages/visual-layer/src/index.js");
var _this = undefined;

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }



var getDimensionMeasureMap = function getDimensionMeasureMap(layers, fieldsConfig) {
  var retinalEncodingsAndMeasures = {};
  layers.forEach(function (layer) {
    var _layer$encodingFields = layer.encodingFieldsInf(),
        colorField = _layer$encodingFields.colorField,
        sizeField = _layer$encodingFields.sizeField,
        shapeField = _layer$encodingFields.shapeField,
        xField = _layer$encodingFields.xField,
        yField = _layer$encodingFields.yField;

    var measures = [xField, yField].filter(function (field) {
      return fieldsConfig[field] && fieldsConfig[field].def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].MEASURE;
    });
    [colorField, sizeField, shapeField].forEach(function (field) {
      if (fieldsConfig[field] && fieldsConfig[field].def.type === muze_utils__WEBPACK_IMPORTED_MODULE_0__["FieldType"].DIMENSION) {
        var _retinalEncodingsAndM;

        !retinalEncodingsAndMeasures[field] && (retinalEncodingsAndMeasures[field] = []);

        (_retinalEncodingsAndM = retinalEncodingsAndMeasures[field]).push.apply(_retinalEncodingsAndM, _toConsumableArray(measures));
      }
    });
  });

  for (var key in retinalEncodingsAndMeasures) {
    if ({}.hasOwnProperty.call(retinalEncodingsAndMeasures, key)) {
      retinalEncodingsAndMeasures[key] = _toConsumableArray(new Set(retinalEncodingsAndMeasures[key]));
    }
  }

  return retinalEncodingsAndMeasures;
};
var transformDataModels = function transformDataModels(transform, dataModel) {
  var dataModels = {};

  for (var key in transform) {
    if ({}.hasOwnProperty.call(transform, key)) {
      var transformVal = transform[key];
      dataModels[key] = transformVal(dataModel);
    }
  }

  return dataModels;
};
var getLayerFromDef = function getLayerFromDef(context, definition, existingLayer, namespaces) {
  var instances = existingLayer;
  var dependencies = context._layerDeps;
  var metaInf = context.metaInf();

  if (!existingLayer) {
    instances = _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_1__["layerFactory"].getLayerInstance(definition);
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["toArray"])(instances).forEach(function (inst, i) {
      inst.metaInf({
        unitRowIndex: metaInf.rowIndex,
        unitColIndex: metaInf.colIndex,
        namespace: namespaces[i]
      });
      inst.store(context.store());
    });
  }

  var layers = {};
  var instanceArr = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["toArray"])(instances);
  definition = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["toArray"])(definition);
  definition.reduce(function (acc, def, idx) {
    var instance = instanceArr[idx];
    instance.config(def);
    instance.valueParser(context.valueParser());
    instance.dependencies(dependencies);
    instance.dataProps({
      timeDiffs: context._timeDiffs
    });

    if (def.name) {
      instance.alias(def.name);
    }

    layers[instance.alias()] = instance;
    return acc;
  }, {});
  return layers;
};
var resolveEncodingTransform = function resolveEncodingTransform(layerInst, store) {
  var encodingTransform = layerInst.config().encodingTransform || {};
  var resolvable = encodingTransform.resolvable;
  var depArr = [];

  if (resolvable) {
    var resolved = resolvable(store);
    depArr = resolved.depArr;
    layerInst.encodingTransform(resolved.fn);
  } else if (encodingTransform instanceof Function) {
    layerInst.encodingTransform(encodingTransform);
  }

  return depArr;
};
var createLayers = function createLayers(context, layerDefinitions) {
  var layersMap = context._layersMap;
  var markSet = {};
  var store = {
    layers: {},
    components: {
      unit: context
    }
  };
  var layerIndex = 0;
  var layers = layerDefinitions.sort(function (a, b) {
    return a.order - b.order;
  }).reduce(function (layersArr, layerDef, i) {
    var _layersArr;

    var mark = layerDef.mark;
    var definition = layerDef.def;
    var markId = "".concat(mark, "-").concat(i);
    var defArr = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["toArray"])(definition);
    defArr.forEach(function (def) {
      def.order = layerDef.order + layerIndex;
    });
    layerIndex += defArr.length;
    var instances = getLayerFromDef(context, definition, layersMap[markId], i);
    store.layers = Object.assign(store.layers, instances);
    var instanceValues = Object.values(instances);
    layersArr = (_layersArr = layersArr).concat.apply(_layersArr, _toConsumableArray(instanceValues));
    layersMap[markId] = instanceValues;
    markSet[markId] = markId;
    return layersArr;
  }, []);
  store.unit = context;
  var layerdeps = {};
  layers.forEach(function (layer) {
    var depArr = resolveEncodingTransform(layer, store);
    layerdeps[layer.alias()] = depArr;
  });
  var order = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getDependencyOrder"])(layerdeps);
  layers = order.map(function (name) {
    return store.layers[name];
  });

  for (var key in layersMap) {
    if (!(key in markSet)) {
      layersMap[key].forEach(function (layer) {
        return layer.remove();
      });
      delete layersMap[key];
    }
  }

  return layers;
};
var sanitizeLayerDef = function sanitizeLayerDef(layerDefs) {
  var sanitizedDefs = [];
  layerDefs.forEach(function (layerDef, i) {
    var def = layerDef.def;
    var mark = layerDef.mark;

    if (!def) {
      var sConf = _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_1__["layerFactory"].getSerializedConf(layerDef.mark, layerDef);

      if (!sConf.name) {
        sConf.name = "".concat(mark, "-").concat(i);
      }

      sanitizedDefs.push({
        mark: layerDef.mark,
        def: sConf
      });
    } else {
      if (!def.name) {
        def.name = "".concat(mark, "-").concat(i);
      }

      sanitizedDefs.push(layerDef);
    }
  });
  return sanitizedDefs;
};
var attachDataToLayers = function attachDataToLayers(layers, dm, transformedDataModels) {
  layers.forEach(function (layer) {
    var dataSource = layer.config().source;
    var dataModel = dataSource instanceof Function ? dataSource(dm) : transformedDataModels[dataSource] || dm;

    if (layer.data() !== dataModel) {
      layer.data(dataModel);
    }
  });
};
var attachAxisToLayers = function attachAxisToLayers(axes, layers, layerAxisIndex) {
  layers.forEach(function (layer) {
    var layerId = layer.id();
    var axesObj = {};
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["objectIterator"])(axes, function (key) {
      var axisInf = layerAxisIndex[layerId];

      if (axisInf) {
        axes[key] && (axesObj[key] = axes[key][axisInf[key] || 0]);
      }
    });
    Object.keys(axesObj).length && layer.axes(axesObj);
  });
};
var getLayerAxisIndex = function getLayerAxisIndex(layers, fields) {
  var layerAxisIndex = {};
  layers.forEach(function (layer) {
    var _layer$config = layer.config(),
        axis = _layer$config.axis,
        encoding = _layer$config.encoding;

    var id = layer.id();
    ['x', 'y'].forEach(function (type) {
      var index;
      var field = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["defaultValue"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getObjProp"])(axis, type), encoding[type] && encoding[type].field);

      if (fields[type]) {
        index = fields[type].findIndex(function (fieldInst) {
          return fieldInst.getMembers().indexOf(field) !== -1;
        });
      } else {
        index = 0;
      }

      !layerAxisIndex[id] && (layerAxisIndex[id] = {});
      layerAxisIndex[id][type] = index;
    });
  });
  return layerAxisIndex;
};
var unionDomainFromLayers = function unionDomainFromLayers(layers, axisFields, layerAxisIndex, fieldsConfig) {
  var domains = {};
  layers = layers.filter(function (layer) {
    return layer.getDataDomain() !== null;
  });
  layers.forEach(function (layer) {
    var domainValues = {};
    var config = layer.config();
    var encoding = config.encoding;
    var layerDomain = layer.getDataDomain();
    var layerId = layer.id();

    if (layerDomain !== null && config.calculateDomain !== false) {
      domainValues = Object.entries(layerDomain);
      domains = domainValues.reduce(function (fieldDomain, domain) {
        var encodingType = domain[0];
        var field = encoding[encodingType].field;
        var axisIndex = layerAxisIndex[layerId][encodingType];

        if (encodingType in axisFields) {
          var fieldStr = "".concat(axisFields[encodingType][axisIndex]);
          fieldDomain[fieldStr] = fieldDomain[fieldStr] || [];
          fieldDomain[fieldStr] = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["unionDomain"])([fieldDomain[fieldStr], domain[1]], fieldsConfig[field].def.subtype ? fieldsConfig[field].def.subtype : fieldsConfig[field].def.type);
        } else {
          fieldDomain[encodingType] = domain[1];
        }

        return fieldDomain;
      }, domains);
    }
  });
  return domains;
};
var renderLayers = function renderLayers(context, container, layers, measurement) {
  context._lifeCycleManager.notify({
    client: layers,
    action: 'beforedraw',
    formalName: 'layer'
  });

  var config = context.config();
  var classPrefix = config.classPrefix;
  var orderedLayers = context.layers().sort(function (a, b) {
    return a.config().order - b.config().order;
  });
  var layerParentGroup = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'g', [1], "".concat(classPrefix, "-layer-group"));
  var layerDepOrder = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getDependencyOrder"])(context._layerDepOrder);
  var groups = {};
  Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(layerParentGroup, 'g', orderedLayers, null, {
    update: function update(group, layer) {
      groups[layer.alias()] = {
        group: group,
        layer: layer
      };
    }
  });
  var layerSeq = layerDepOrder.map(function (name) {
    return groups[name];
  });
  layerSeq.forEach(function (o) {
    var layer = o.layer;
    var group = o.group;
    layer.measurement(measurement);
    layer.dataProps({
      timeDiffs: context._timeDiffs
    });
    layer.config().render !== false && layer.mount(group.node());
  });
  return _this;
};
var getNearestDimensionalValue = function getNearestDimensionalValue(context, position) {
  var fields = context.fields();

  if (!fields.x.length || !fields.y.length) {
    return null;
  }

  var data = context.data();
  var axes = context.axes();
  var fieldsConfig = data.getFieldsConfig();
  var xField = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getObjProp"])(fields, 'x', 0).getMembers()[0];
  var yField = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getObjProp"])(fields, 'y', 0).getMembers()[0];
  var xFieldType = fieldsConfig[xField].def.subtype;
  var yFieldType = fieldsConfig[yField].def.subtype;
  var entryVal = [['x', xFieldType, xField], ['y', yFieldType, yField]].find(function (entry) {
    return entry[1] === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].CATEGORICAL || entry[1] === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL;
  });

  if (!entryVal || xFieldType !== muze_utils__WEBPACK_IMPORTED_MODULE_0__["MeasureSubtype"].CONTINUOUS && yFieldType !== muze_utils__WEBPACK_IMPORTED_MODULE_0__["MeasureSubtype"].CONTINUOUS) {
    return null;
  }

  var field = entryVal[2];
  var index = fieldsConfig[field].index;
  var key = axes[entryVal[0]][0].invert(position[entryVal[0]]);

  if (entryVal[1] === muze_utils__WEBPACK_IMPORTED_MODULE_0__["DimensionSubtype"].TEMPORAL) {
    var filterData = _toConsumableArray(new Set(data.getData().data.map(function (d) {
      return d[index];
    })));

    key = Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["getNearestValue"])(filterData, key);
  }

  return key !== undefined ? [[field], [key]] : null;
};
var getLayersBy = function getLayersBy(layers, searchBy, value) {
  return layers.filter(function (layer) {
    var name = searchBy === 'type' ? layer.constructor.formalName() : layer.alias();
    return name === value;
  });
};
var removeLayersBy = function removeLayersBy(layers, searchBy, value) {
  layers.filter(function (inst) {
    var name = searchBy === 'type' ? inst.config().mark : inst.alias();

    if (name === value) {
      inst.remove();
      return false;
    }

    return true;
  });
};
var createSideEffectGroup = function createSideEffectGroup(container, className) {
  return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["makeElement"])(container, 'g', [1], className).node();
};
var createRenderPromise = function createRenderPromise(unit) {
  var renderedPromise = unit._renderedPromise;
  renderedPromise.then(function () {
    unit._renderedPromise = new Promise(function (resolve) {
      unit._renderedResolve = resolve;
    });
    createRenderPromise(unit);
  });
};

/***/ }),

/***/ "./packages/visual-unit/src/index.js":
/*!*******************************************!*\
  !*** ./packages/visual-unit/src/index.js ***!
  \*******************************************/
/*! exports provided: VisualUnit */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _visual_unit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./visual-unit */ "./packages/visual-unit/src/visual-unit.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VisualUnit", function() { return _visual_unit__WEBPACK_IMPORTED_MODULE_0__["default"]; });



/***/ }),

/***/ "./packages/visual-unit/src/listener-map.js":
/*!**************************************************!*\
  !*** ./packages/visual-unit/src/listener-map.js ***!
  \**************************************************/
/*! exports provided: calculateDomainListener, listenerMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calculateDomainListener", function() { return calculateDomainListener; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "listenerMap", function() { return listenerMap; });
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _enums_reactive_props__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enums/reactive-props */ "./packages/visual-unit/src/enums/reactive-props.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helper */ "./packages/visual-unit/src/helper/index.js");
/* harmony import */ var _helper_grid_lines__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helper/grid-lines */ "./packages/visual-unit/src/helper/grid-lines.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }






var removeExitLayers = function removeExitLayers(layerDefs, context) {
  var layersMap = context._layersMap;
  var markSet = {};
  layerDefs.forEach(function (layerDef, i) {
    var id = "".concat(layerDef.mark, "-").concat(i);
    markSet[id] = true;
  });

  for (var key in layersMap) {
    if (!(key in markSet)) {
      layersMap[key].forEach(function (layer) {
        return layer.remove();
      });
      delete layersMap[key];
    }
  }
};

var calculateDomainListener = function calculateDomainListener(context, namespace) {
  return function () {
    var domain = Object(_helper__WEBPACK_IMPORTED_MODULE_2__["unionDomainFromLayers"])(context.layers(), context.fields(), context._layerAxisIndex, context.data().getFieldsConfig());
    context.store().commit("".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].UNIT_GLOBAL_NAMESPACE, ".").concat(_enums_reactive_props__WEBPACK_IMPORTED_MODULE_1__["DOMAIN"], ".").concat(namespace), domain);
  };
};
var listenerMap = function listenerMap(context, namespace, metaInf) {
  return [{
    type: 'registerImmediateListener',
    props: ["".concat(namespace.local, ".").concat(_enums_reactive_props__WEBPACK_IMPORTED_MODULE_1__["CONFIG"])],
    listener: function listener(_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
          config = _ref2[1];

      config && context.firebolt().config(config.interaction);
    }
  }, {
    type: 'registerImmediateListener',
    props: ["".concat(namespace.local, ".").concat(_enums_reactive_props__WEBPACK_IMPORTED_MODULE_1__["LAYERDEFS"])],
    listener: function listener(_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
          layerDefs = _ref4[1];

      var fieldsVal = context.fields();

      if (layerDefs && fieldsVal) {
        removeExitLayers(layerDefs, context);
        var axes = context.axes();

        if (axes.x || axes.y) {
          var props = ["".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].GROUP_GLOBAL_NAMESPACE, ".domain.y.").concat(metaInf.rowIndex, "0"), "".concat(muze_utils__WEBPACK_IMPORTED_MODULE_0__["STATE_NAMESPACES"].GROUP_GLOBAL_NAMESPACE, ".domain.x.").concat(metaInf.colIndex, "0")];
          var store = context.store();
          var listenerInf = {
            namespace: namespace.local,
            key: 'gridLineListener'
          };
          store.unsubscribe(listenerInf);
          store.registerChangeListener(props, function () {
            Object(_helper_grid_lines__WEBPACK_IMPORTED_MODULE_3__["attachDataToGridLineLayers"])(context);
          }, false, listenerInf);
        }

        context.addLayer(layerDefs);

        context._lifeCycleManager.notify({
          client: context.layers(),
          action: 'initialized',
          formalName: 'layer'
        });
      }
    }
  }, {
    type: 'registerImmediateListener',
    props: ["".concat(namespace.local, ".").concat(_enums_reactive_props__WEBPACK_IMPORTED_MODULE_1__["DATA"])],
    listener: function listener(_ref5) {
      var _ref6 = _slicedToArray(_ref5, 2),
          dataModel = _ref6[1];

      var axesObj = context.axes();
      var timeDiffs = {};
      var timeDiffsByField = {};
      Object.entries(Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["temporalFields"])(dataModel)).forEach(function (_ref7) {
        var _ref8 = _slicedToArray(_ref7, 2),
            fieldName = _ref8[0],
            fieldObj = _ref8[1];

        timeDiffsByField[fieldName] = fieldObj.minimumConsecutiveDifference();
      });
      Object.entries(context.fields()).forEach(function (_ref9) {
        var _ref10 = _slicedToArray(_ref9, 2),
            type = _ref10[0],
            _ref10$ = _slicedToArray(_ref10[1], 1),
            field = _ref10$[0];

        if (field) {
          var timeDiff = timeDiffsByField["".concat(field)];

          if (timeDiff) {
            timeDiffs[type] = timeDiff;
            axesObj[type].forEach(function (axis) {
              return axis.minDiff(timeDiff);
            });
          }
        }
      });
      context._timeDiffsByField = timeDiffsByField;
      context._timeDiffs = timeDiffs;
    }
  }, {
    type: 'registerImmediateListener',
    props: ["".concat(namespace.local, ".").concat(_enums_reactive_props__WEBPACK_IMPORTED_MODULE_1__["CONFIG"])],
    listener: function listener() {
      Object(_helper_grid_lines__WEBPACK_IMPORTED_MODULE_3__["createGridLineLayer"])(context);
    }
  }, {
    type: 'registerImmediateListener',
    props: ["".concat(namespace.local, ".").concat(_enums_reactive_props__WEBPACK_IMPORTED_MODULE_1__["DATA"]), "".concat(namespace.local, ".").concat(_enums_reactive_props__WEBPACK_IMPORTED_MODULE_1__["TRANSFORM"])],
    listener: function listener(_ref11, _ref12) {
      var _ref13 = _slicedToArray(_ref11, 2),
          dataModel = _ref13[1];

      var _ref14 = _slicedToArray(_ref12, 2),
          transform = _ref14[1];

      if (dataModel) {
        var dataModels = Object(_helper__WEBPACK_IMPORTED_MODULE_2__["transformDataModels"])(transform, dataModel);
        context.store().commit("".concat(namespace.local, ".").concat(_enums_reactive_props__WEBPACK_IMPORTED_MODULE_1__["TRANSFORMEDDATA"]), dataModels);
      }
    }
  }, {
    type: 'registerImmediateListener',
    props: ["".concat(namespace.local, ".").concat(_enums_reactive_props__WEBPACK_IMPORTED_MODULE_1__["TRANSFORMEDDATA"]), "".concat(namespace.local, ".").concat(_enums_reactive_props__WEBPACK_IMPORTED_MODULE_1__["LAYERS"])],
    listener: function listener(_ref15, _ref16) {
      var _ref17 = _slicedToArray(_ref15, 2),
          transformedData = _ref17[1];

      var _ref18 = _slicedToArray(_ref16, 2),
          layers = _ref18[1];

      var layerAxisIndexVal = context._layerAxisIndex;
      var axesVal = context.axes();
      var dataModel = context.data();

      if (transformedData && layers && axesVal && layerAxisIndexVal) {
        context._lifeCycleManager.notify({
          client: layers,
          action: 'beforeupdate',
          formalName: 'layer'
        });

        var model = context.store().model;
        layers.forEach(function (lyr) {
          return lyr.disableUpdate();
        });
        Object(_helper__WEBPACK_IMPORTED_MODULE_2__["attachDataToLayers"])(layers, dataModel, transformedData);
        model.lock();
        layers.forEach(function (lyr) {
          lyr.enableUpdate().domain(lyr._domain);
        });
        model.unlock();
        context._dimensionMeasureMap = Object(_helper__WEBPACK_IMPORTED_MODULE_2__["getDimensionMeasureMap"])(layers, dataModel.getFieldsConfig(), context.retinalFields());
        Object(_helper__WEBPACK_IMPORTED_MODULE_2__["attachAxisToLayers"])(axesVal, layers, layerAxisIndexVal);

        context._lifeCycleManager.notify({
          client: layers,
          action: 'updated',
          formalName: 'layer'
        });
      }
    }
  }];
};

/***/ }),

/***/ "./packages/visual-unit/src/local-options.js":
/*!***************************************************!*\
  !*** ./packages/visual-unit/src/local-options.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _default_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./default-config */ "./packages/visual-unit/src/default-config.js");
/* harmony import */ var _enums_reactive_props__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./enums/reactive-props */ "./packages/visual-unit/src/enums/reactive-props.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helper */ "./packages/visual-unit/src/helper/index.js");
var _CONFIG$LAYERDEFS$TRA;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }





/* harmony default export */ __webpack_exports__["default"] = (_CONFIG$LAYERDEFS$TRA = {}, _defineProperty(_CONFIG$LAYERDEFS$TRA, _enums_reactive_props__WEBPACK_IMPORTED_MODULE_2__["CONFIG"], {
  value: null,
  meta: {
    sanitization: function sanitization(config, oldConfig) {
      return Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])(oldConfig || Object(muze_utils__WEBPACK_IMPORTED_MODULE_0__["mergeRecursive"])({}, _default_config__WEBPACK_IMPORTED_MODULE_1__["defaultConfig"]), config);
    }
  }
}), _defineProperty(_CONFIG$LAYERDEFS$TRA, _enums_reactive_props__WEBPACK_IMPORTED_MODULE_2__["LAYERDEFS"], {
  value: null,
  meta: {
    preset: function preset(layerDef) {
      return Object(_helper__WEBPACK_IMPORTED_MODULE_3__["sanitizeLayerDef"])(layerDef);
    }
  }
}), _defineProperty(_CONFIG$LAYERDEFS$TRA, _enums_reactive_props__WEBPACK_IMPORTED_MODULE_2__["TRANSFORM"], {
  value: null
}), _defineProperty(_CONFIG$LAYERDEFS$TRA, _enums_reactive_props__WEBPACK_IMPORTED_MODULE_2__["LAYERS"], {
  value: null
}), _defineProperty(_CONFIG$LAYERDEFS$TRA, _enums_reactive_props__WEBPACK_IMPORTED_MODULE_2__["DATA"], {
  value: null,
  meta: {
    typeCheck: function typeCheck(d) {
      return d instanceof muze_utils__WEBPACK_IMPORTED_MODULE_0__["DataModel"];
    },
    preset: function preset(data, context) {
      if (context._cache) {
        var cachedData = context.cachedData();
        context.cachedData([].concat(_toConsumableArray(cachedData), [data]));
      } else {
        var oldData = context.data();
        oldData && oldData.unsubscribe('propagation');
        context.cachedData([data]);
      }
    }
  }
}), _defineProperty(_CONFIG$LAYERDEFS$TRA, _enums_reactive_props__WEBPACK_IMPORTED_MODULE_2__["TRANSFORMEDDATA"], {
  value: null,
  meta: {
    addAsMethod: false
  }
}), _CONFIG$LAYERDEFS$TRA);

/***/ }),

/***/ "./packages/visual-unit/src/props.js":
/*!*******************************************!*\
  !*** ./packages/visual-unit/src/props.js ***!
  \*******************************************/
/*! exports provided: PROPS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PROPS", function() { return PROPS; });
/* harmony import */ var _enums_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./enums/constants */ "./packages/visual-unit/src/enums/constants.js");
var _PROPS;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


var PROPS = (_PROPS = {}, _defineProperty(_PROPS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["FACET_BY_FIELDS"], {}), _defineProperty(_PROPS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["RETINAL_FIELDS"], {}), _defineProperty(_PROPS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["PARENT_ALIAS"], {}), _defineProperty(_PROPS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["LAYERS"], {}), _defineProperty(_PROPS, _enums_constants__WEBPACK_IMPORTED_MODULE_0__["CACHED_DATA"], {}), _defineProperty(_PROPS, "detailFields", {}), _defineProperty(_PROPS, "axes", {
  defaultValue: {
    x: [],
    y: []
  }
}), _defineProperty(_PROPS, "fields", {}), _defineProperty(_PROPS, "metaInf", {}), _defineProperty(_PROPS, "registry", {}), _defineProperty(_PROPS, "width", {}), _defineProperty(_PROPS, "height", {}), _defineProperty(_PROPS, "parentContainerInf", {}), _defineProperty(_PROPS, "valueParser", {
  defaultValue: function defaultValue(val) {
    return val;
  }
}), _PROPS);

/***/ }),

/***/ "./packages/visual-unit/src/styles.scss":
/*!**********************************************!*\
  !*** ./packages/visual-unit/src/styles.scss ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./packages/visual-unit/src/visual-unit.js":
/*!*************************************************!*\
  !*** ./packages/visual-unit/src/visual-unit.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return VisualUnit; });
/* harmony import */ var _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @chartshq/visual-layer */ "./packages/visual-layer/src/index.js");
/* harmony import */ var muze_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! muze-utils */ "./packages/muze-utils/src/index.js");
/* harmony import */ var _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @chartshq/muze-firebolt */ "./packages/muze-firebolt/src/index.js");
/* harmony import */ var _firebolt_action_behaviour_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./firebolt/action-behaviour-map */ "./packages/visual-unit/src/firebolt/action-behaviour-map.js");
/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helper */ "./packages/visual-unit/src/helper/index.js");
/* harmony import */ var _helper_grid_lines__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helper/grid-lines */ "./packages/visual-unit/src/helper/grid-lines.js");
/* harmony import */ var _local_options__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./local-options */ "./packages/visual-unit/src/local-options.js");
/* harmony import */ var _listener_map__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./listener-map */ "./packages/visual-unit/src/listener-map.js");
/* harmony import */ var _enums_reactive_props__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./enums/reactive-props */ "./packages/visual-unit/src/enums/reactive-props.js");
/* harmony import */ var _props__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./props */ "./packages/visual-unit/src/props.js");
/* harmony import */ var _firebolt__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./firebolt */ "./packages/visual-unit/src/firebolt/index.js");
/* harmony import */ var _firebolt_helper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./firebolt/helper */ "./packages/visual-unit/src/firebolt/helper.js");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./styles.scss */ "./packages/visual-unit/src/styles.scss");
/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_styles_scss__WEBPACK_IMPORTED_MODULE_12__);
function isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }














var FORMAL_NAME = 'unit';
/**
 * Visual Unit is hierarchical component created by {@link VisualGroup}. This component accepts layer definitions
 * and creates concrete layer instances from them, binds data and attaches axis to them. It also retreives the domain
 * from the layers and unions them and sets them on corresponding axis instances. This also creates the parent svg
 * groups for all the layers and delegates the rendering to all the layers.
 *
 * @public
 * @module VisualUnit
 * @class
 */

var VisualUnit =
/*#__PURE__*/
function () {
  /**
   * Creates instance of visualization unit.
   *
   * @param {Object} registry  Component registry
   * @param {Object} dependencies  Dependencies required by visual unit.
   */
  function VisualUnit(registry, dependencies) {
    var _this = this;

    _classCallCheck(this, VisualUnit);

    this._id = Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["getUniqueId"])();
    this._dependencies = dependencies;
    this._layerDeps = {
      throwback: new muze_utils__WEBPACK_IMPORTED_MODULE_1__["Store"](_defineProperty({}, muze_utils__WEBPACK_IMPORTED_MODULE_1__["CommonProps"].ON_LAYER_DRAW, false)),
      smartLabel: dependencies.smartLabel,
      lifeCycleManager: dependencies.lifeCycleManager
    };
    this._renderedResolve = null;
    this._renderedPromise = new Promise(function (resolve) {
      _this._renderedResolve = resolve;
    });
    Object(_helper__WEBPACK_IMPORTED_MODULE_4__["createRenderPromise"])(this);

    this._layerDeps.throwback.registerChangeListener([muze_utils__WEBPACK_IMPORTED_MODULE_1__["CommonProps"].ON_LAYER_DRAW], function () {
      _this._renderedResolve();

      _this._lifeCycleManager.notify({
        client: _this.layers(),
        action: 'drawn',
        formalName: 'layer'
      });
    });

    this._lifeCycleManager = dependencies.lifeCycleManager;
    this._layersMap = {};
    this._gridLinesSelection = {};
    this._gridBandsSelection = {};
    this._gridLines = [];
    this._gridBands = [];
    this._layerNamespaces = {};
    this._layerAxisIndex = {};
    this._transformedDataModels = {};
    _chartshq_visual_layer__WEBPACK_IMPORTED_MODULE_0__["layerFactory"].setLayerRegistry(registry.layerRegistry);
    Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["generateGetterSetters"])(this, _props__WEBPACK_IMPORTED_MODULE_9__["PROPS"]);
    this.registry(registry);
    this.cachedData([]);
  }

  _createClass(VisualUnit, [{
    key: "store",
    value: function store() {
      if (arguments.length) {
        this._store = arguments.length <= 0 ? undefined : arguments[0];
        var metaInf = this.metaInf();
        this.store().append("".concat(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].UNIT_LOCAL_NAMESPACE), _defineProperty({}, "".concat(metaInf.namespace), null));
        var localNs = "".concat(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].UNIT_LOCAL_NAMESPACE, ".").concat(metaInf.namespace);
        Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["transactor"])(this, _local_options__WEBPACK_IMPORTED_MODULE_6__["default"], this.store().model, {
          namespace: localNs
        });
        Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["registerListeners"])(this, _listener_map__WEBPACK_IMPORTED_MODULE_7__["listenerMap"], {
          local: localNs,
          global: muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].UNIT_GLOBAL_NAMESPACE
        }, {
          rowIndex: metaInf.rowIndex,
          colIndex: metaInf.colIndex
        });
        this.firebolt(new _firebolt__WEBPACK_IMPORTED_MODULE_10__["default"](this, {
          physical: _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_2__["physicalActions"],
          behavioural: _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_2__["behaviouralActions"],
          physicalBehaviouralMap: _firebolt_action_behaviour_map__WEBPACK_IMPORTED_MODULE_3__["actionBehaviourMap"]
        }, _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_2__["sideEffects"], _chartshq_muze_firebolt__WEBPACK_IMPORTED_MODULE_2__["behaviourEffectMap"]));
        return this;
      }

      return this._store;
    }
    /**
     * Static helper for creates a unit instance
     *
     * @param {Object} [id] optional unique identifier for a unit; , id is calculated internally
     * @param {DataModel} data instance of datamodel
     * @param {Array.<Layer>} layers layer configuration
     * @param {Object} config configurtion for the visual unit
     * @return {VisualUnit} Instance of a unit
     */

  }, {
    key: "firebolt",

    /**
     * Returns the instance of firebolt associated with this visual unit. Firebolt dispatches the behavioural actions
     * when any physical action happens on the elements of visual unit.
     *
     * @public
     *
     * @return {Firebolt} Instance of firebolt.
     */
    value: function firebolt() {
      if (arguments.length) {
        this._firebolt = arguments.length <= 0 ? undefined : arguments[0];
        return this;
      }

      return this._firebolt;
    }
    /**
     * Returns the unique id of this visual unit.
     *
     * @public
     * @return {string} Unique identifier.
     */

  }, {
    key: "id",
    value: function id() {
      return this._id;
    }
  }, {
    key: "lockModel",
    value: function lockModel() {
      this._store.model.lock();

      return this;
    }
  }, {
    key: "unlockModel",
    value: function unlockModel() {
      this._store.model.unlock();

      return this;
    }
  }, {
    key: "timeDiffsByField",
    value: function timeDiffsByField() {
      if (arguments.length) {
        return this;
      }

      return this._timeDiffsByField;
    }
    /**
     * Renders the visual unit. It creates the layout and renders the axes and layers.
     *
     * @return {VisualUnit} Instance of visual unit.
     */

  }, {
    key: "render",
    value: function render(container) {
      var config = this.config();
      var className = config.className,
          defClassName = config.defClassName,
          sideEffectClassName = config.sideEffectClassName,
          classPrefix = config.classPrefix;
      var qualifiedClassName = Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["getQualifiedClassName"])(defClassName, this.id(), config.classPrefix);
      var width = this.width();
      var height = this.height();
      var containerSelection = Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["selectElement"])(container).style('position', 'relative');
      this._rootSvg = Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["makeElement"])(containerSelection, 'svg', [null], className).style('width', "".concat(width, "px")).style('height', "".concat(height, "px"));

      var node = this._rootSvg.node();

      Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["setAttrs"])(node, {
        width: width,
        height: height,
        class: qualifiedClassName.join(' ')
      });
      Object(_helper_grid_lines__WEBPACK_IMPORTED_MODULE_5__["renderGridLineLayers"])(this, node);
      Object(_helper__WEBPACK_IMPORTED_MODULE_4__["renderLayers"])(this, node, this.layers(), {
        width: width,
        height: height
      });
      this._sideEffectGroup = Object(_helper__WEBPACK_IMPORTED_MODULE_4__["createSideEffectGroup"])(node, "".concat(classPrefix, "-").concat(sideEffectClassName));
      var firebolt = this.firebolt();
      Object(_firebolt_helper__WEBPACK_IMPORTED_MODULE_11__["initSideEffects"])(firebolt.sideEffects(), firebolt);
      return this;
    }
  }, {
    key: "done",
    value: function done() {
      return this._renderedPromise;
    }
    /**
     * Caches all the datamodels in an array from the next `data()` call on visual unit until `clearCaching()` or
     * `resetData()` is called on it.
     *
     * @public
     * @return {VisualUnit} Instance of visual unit.
     */

  }, {
    key: "enableCaching",
    value: function enableCaching() {
      this._cache = true;
      return this;
    }
    /**
     * Clears all the previous cached data.
     *
     * @public
     * @segment VisualUnit
     * @return {VisualUnit} Instance of visual unit.
     */

  }, {
    key: "clearCaching",
    value: function clearCaching() {
      this._cache = false;
      this.cachedData([this.cachedData()[0]]);
      return this;
    }
    /**
     * Returns the drawing information from visual unit.Drawing context contains the dimensions of unit and the svg
     * container of the visual unit.
     *
     * @public
     *
     * @return {Object} Drawing information.
     *      ```
     *          {
     *              htmlContainer: // Html container of svg container of the visual unit
     *              svgContainer: // Root svg container
     *              width: // Width of the visual unit
     *              height: // Height of the visual unit
     *              sideEffectGroup: // Svg group for drawing side effect elements.
     *              parentContainer: // Parent html container of the visual unit.
     *              xOffset: // x offset space from the starting x position of the container,
     *              yOffset: // y offset space from the starting y position of the container
     *          }
     *      ```
     */

  }, {
    key: "getDrawingContext",
    value: function getDrawingContext() {
      var rootSvg = this._rootSvg && this._rootSvg.node();

      var width = this.width();
      var height = this.height();

      var _this$parentContainer = this.parentContainerInf(),
          el = _this$parentContainer.el,
          dimensions = _this$parentContainer.dimensions;

      return {
        htmlContainer: this.mount(),
        svgContainer: rootSvg,
        width: width,
        height: height,
        sideEffectGroup: this._sideEffectGroup,
        parentContainer: el,
        parentContainerDimensions: dimensions,
        xOffset: 0,
        yOffset: 0
      };
    }
    /**
     * Returns the serialized configuration of visual unit.
     *
     * @return {Object} serialized configuration
     */

  }, {
    key: "serialize",
    value: function serialize() {
      return {
        layers: this.layers().map(function (layer) {
          return layer.serialize();
        }),
        config: this.config(),
        axes: this.axes().map(function (axis) {
          return axis.serialize();
        })
      };
    }
  }, {
    key: "mount",
    value: function mount() {
      if (arguments.length) {
        this._mount = arguments.length <= 0 ? undefined : arguments[0];
        this.render(arguments.length <= 0 ? undefined : arguments[0]);
        this.firebolt().mapActionsAndBehaviour();
        return this;
      }

      return this._mount;
    }
    /**
     * Adds a new layer to the visual unit. It takes a layer definition and creates layer instances from them. It does
     * not render the layers. It returns the layer instances in an array. If the layer definition is a composite layer,
     * then multiple layer instances will be returned in the array.
     *
     * To add a layer in the unit,
     * ```
     *      unit.addLayer({
     *          name: 'bullet',
     *          mark: 'bar',
     *          encoding: {
     *              x: 'Year',
     *              y: 'Acceleration',
     *              color: 'Origin'
     *          }
     *      });
     * ```
     * @public
     * @param {Object} layerDef Definition of new layer.
     *
     * @return {Array} Array of layer instances.
     */

  }, {
    key: "addLayer",
    value: function addLayer(layerDefinition) {
      var _ref2,
          _this2 = this,
          _ref3;

      var layerDefinitions = Object(_helper__WEBPACK_IMPORTED_MODULE_4__["sanitizeLayerDef"])(Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["toArray"])(layerDefinition));
      var layersMap = this._layersMap;
      var markSet = {};
      var store = {
        layers: {},
        components: {
          unit: this
        }
      };
      var layerIndex = 0;

      var startIndex = (_ref2 = []).concat.apply(_ref2, _toConsumableArray(Object.values(this._layersMap))).length;

      var metaInf = this.metaInf();
      var props = this._layerNamespaces;
      var layers = layerDefinitions.sort(function (a, b) {
        return a.order - b.order;
      }).reduce(function (layersArr, layerDef) {
        var _layersArr;

        var definition = layerDef.def;
        var markId = definition.name;
        var defArr = Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["toArray"])(definition);
        var namespaces = [];
        defArr.forEach(function (def) {
          def.order = layerDef.order + layerIndex;
          var namespace = "".concat(metaInf.namespace).concat(startIndex);

          if (!layersMap[markId]) {
            startIndex++;

            if (definition.calculateDomain !== false) {
              props["".concat(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].LAYER_GLOBAL_NAMESPACE, ".").concat(_enums_reactive_props__WEBPACK_IMPORTED_MODULE_8__["DOMAIN"], ".").concat(namespace)] = true;
            }
          }

          namespaces.push(namespace);
        });
        layerIndex += defArr.length;
        var instances = Object(_helper__WEBPACK_IMPORTED_MODULE_4__["getLayerFromDef"])(_this2, definition, layersMap[markId], namespaces);
        store.layers = Object.assign(store.layers, instances);
        var instanceValues = Object.values(instances);
        layersArr = (_layersArr = layersArr).concat.apply(_layersArr, _toConsumableArray(instanceValues));
        layersMap[markId] = instanceValues;
        markSet[markId] = markId;
        return layersArr;
      }, []);
      store.unit = this;
      var layerdeps = {};

      var layersArr = (_ref3 = []).concat.apply(_ref3, _toConsumableArray(Object.values(this._layersMap)));

      layersArr.forEach(function (layer) {
        var alias = layer.alias();
        store.layers[alias] = layer;
        layerdeps[alias] = [];
      });
      layers.forEach(function (layer) {
        var depArr = Object(_helper__WEBPACK_IMPORTED_MODULE_4__["resolveEncodingTransform"])(layer, store);
        layerdeps[layer.alias()] = depArr;
      });
      this._layerDepOrder = layerdeps;
      this._layerAxisIndex = Object.assign(this._layerAxisIndex, Object(_helper__WEBPACK_IMPORTED_MODULE_4__["getLayerAxisIndex"])(layers, this.fields()));
      var stateStore = this.store();
      stateStore.unsubscribe({
        key: 'calculateDomainListener',
        namespace: "".concat(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].UNIT_LOCAL_NAMESPACE, ".").concat(metaInf.namespace)
      });
      stateStore.registerImmediateListener(Object.keys(props), Object(_listener_map__WEBPACK_IMPORTED_MODULE_7__["calculateDomainListener"])(this, metaInf.namespace), false, {
        key: 'calculateDomainListener',
        namespace: "".concat(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].UNIT_LOCAL_NAMESPACE, ".").concat(metaInf.namespace)
      });
      this.layers(layersArr);
      return layers;
    }
    /**
     *
     *
     *
     * @memberof VisualUnit
     */

  }, {
    key: "remove",
    value: function remove() {
      var lifeCycleManager = this._dependencies.lifeCycleManager;
      lifeCycleManager.notify({
        client: this,
        action: 'beforeremove',
        formalName: 'unit'
      });
      this.store().unsubscribe({
        namespace: "".concat(muze_utils__WEBPACK_IMPORTED_MODULE_1__["STATE_NAMESPACES"].UNIT_LOCAL_NAMESPACE, ".").concat(this.metaInf().namespace)
      });
      Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["selectElement"])(this.mount()).remove();
      this.firebolt().remove(); // Remove layers

      lifeCycleManager.notify({
        client: this.layers(),
        action: 'beforeremove',
        formalName: 'layer'
      });
      this.layers().forEach(function (layer) {
        return layer.remove();
      });
      lifeCycleManager.notify({
        client: this.layers(),
        action: 'removed',
        formalName: 'layer'
      });
      lifeCycleManager.notify({
        client: this,
        action: 'removed',
        formalName: 'unit'
      });
      return this;
    }
    /**
     *
     *
     * @param {*} identifiers
     *
     * @memberof VisualUnit
     */

  }, {
    key: "getDataModelFromIdentifiers",
    value: function getDataModelFromIdentifiers(identifiers, mode, parentModel) {
      if (identifiers === null) {
        return null;
      }

      var dataModel = parentModel || this.data();
      return Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["getDataModelFromIdentifiers"])(dataModel, identifiers, mode);
    }
    /**
     * Resets the data of visual unit to original data model. It also clears the cached data.
     *
     * @public
     * @segment VisualUnit
     * @return {VisualUnit} Instance of visual unit.
     */

  }, {
    key: "resetData",
    value: function resetData() {
      this.data(this.cachedData()[0]);
      return this;
    }
    /**
     *
     *
     *
     * @memberof VisualUnit
     */

  }, {
    key: "getSourceInfo",
    value: function getSourceInfo() {
      return {
        dimensionMeasureMap: this._dimensionMeasureMap,
        fields: this.fields(),
        data: this.data(),
        axes: this.axes()
      };
    }
    /**
     *
     *
     *
     * @memberof VisualUnit
     */

  }, {
    key: "getDefaultTargetContainer",
    value: function getDefaultTargetContainer() {
      var _this$config = this.config(),
          classPrefix = _this$config.classPrefix,
          defClassName = _this$config.defClassName;

      return [".".concat(classPrefix, "-").concat(defClassName)];
    }
    /**
     * Returns an array of layer instances which matches the supplied mark type.
     *
     * @public
     *
     * @param {string} type Mark type of layer.
     *
     * @return {Array} Array of layer instances.
     */

  }, {
    key: "getLayersByType",
    value: function getLayersByType(type) {
      var layers = Object(_helper__WEBPACK_IMPORTED_MODULE_4__["getLayersBy"])(this.layers(), 'type', type);
      return layers;
    }
    /**
     * Returns the layer instance which matches the supplied layer name. If no layer is found, then it returns
     * undefined.
     *
     * @public
     * @param {string} name Name of layer.
     *
     * @return {VisualUnit} Layer instance.
     */

  }, {
    key: "getLayerByName",
    value: function getLayerByName(name) {
      var layers = Object(_helper__WEBPACK_IMPORTED_MODULE_4__["getLayersBy"])(this.layers(), 'name', name);
      return layers[0];
    }
    /**
     * Returns the point located nearest to the supplied x and y position. It returns the unique identifiers of the
     * point. This function also accepts an additional configuration `getAllPoints` inside `config` object in the third
     * argument which if set to true, then it returns the identifiers of all the points which falls on the nearest
     * x value or y value if any one of the field is a dimension. Additionally, a target property is also returned
     * which contains the identifier of the nearest point. If no nearest point is found, then it returns identifier
     * as null.
     *
     * @public
     *
     * @param {number} x X Position of the point from where nearest point is to be found.
     * @param {number} y Y Position of the point from where nearest point is to be found.
     * @param {Object} config Additional configuration options.
     * @param {boolean} config.getAllPoints If true, then returns all the points nearest to the x value or y value if
     * it is dimension.
     * @param {Object} config.data Data associated with the nearest point.
     * @return {Object} Nearest point information
     * ```
     *      {
     *          id: [['Origin'], ['USA'], ['Japan']], // Identifiers of all the points closest to the x value.
     *          target: [['Origin'], ['Japan']] // Identifier of the nearest point.
     *      }
     * ```
     */

  }, {
    key: "getNearestPoint",
    value: function getNearestPoint(x, y, config) {
      var pointObj = {
        id: null
      };
      var dimValue = Object(_helper__WEBPACK_IMPORTED_MODULE_4__["getNearestDimensionalValue"])(this, {
        x: x,
        y: y
      });

      if (dimValue !== null && config.getAllPoints) {
        pointObj.id = dimValue;
        var pointInf = this.getMarkInfFromLayers(x, y, config);
        pointObj.target = pointInf && pointInf.id ? pointInf.id : pointObj.id;
        return pointObj;
      }

      var markInf = this.getMarkInfFromLayers(x, y, config) || {
        id: null
      };
      pointObj = Object.assign({}, markInf);
      pointObj.target = markInf.id;
      return pointObj;
    }
  }, {
    key: "getMarkInfFromLayers",
    value: function getMarkInfFromLayers(x, y, args) {
      var layers = this.layers();
      var len = layers.length;
      var point = null; // Iterate through the layers array and fetch the nearest point from each layer. If a valid
      // nearest point is found from any layer, then return that point.

      for (var i = 0; i < len; i++) {
        var layer = layers[i];
        var config = layer.config();

        if (config.interactive !== false) {
          point = layer.getNearestPoint(x, y, args);
        }

        if (point) {
          return point;
        }
      }

      return point;
    }
    /**
     * Get the information of all the marks such as x, y position and size from supplied identifiers. It
     * returns an array of points whose data matches the given identifiers.
     *
     * @public
     *
     * @param {Array|Object} identifiers Field names and their corresponding values.
     * ```
     * identifiers can be given in an array of array,
     *      ['Origin', 'Name'], // Names of the fields supplied in first array
     *      ['USA', 'ford'], // Data values of each field supplied in rest of the arrays.
     *      ['Japan', 'ford']
     * or in an object,
     *      {
     *          Origin: ['USA']
     *      }
     * ```
     * @param {Object} config Optional configurations which decides which information of the mark will
     * be retrieved.
     * @param {boolean} [config.getAllAttrs = false] If true, then returns all the information of each mark.
     * @param {boolean} [config.getBBox = false] If true, then returns the bounding box of each mark.
     *
     * @return {Array} Array of objects containing the information of each point.
     * ```
     * By default, the method returns the array of points in this structure,
     *      [
     *          {
     *              x: 20,
     *              y: 100,
     *              width: 200,
     *              height: 100
     *          }
     *      ]
     * If 'config.getAllAttrs' is true, then it returns all the information of each mark,
     *      [
     *      // Positions of mark on initial state of transition.
     *          enter: {
     *              x: 0,
     *              y: 0
     *          },
     *          // Final positions of the mark
     *          update: {
     *              x: 20,
     *              y: 10
     *          },
     *          style: // css styles of each mark
     *          source: [200, 'USA'] // Row information of each mark
     *          id: 20 // Row id of each mark
     *      ]
     * ```
     */

  }, {
    key: "getPlotPointsFromIdentifiers",
    value: function getPlotPointsFromIdentifiers(identifiers) {
      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var points = [];
      var parsedIdentifiers = identifiers;

      if (identifiers === null) {
        return [];
      }

      var layers = this.layers();
      var len = layers.length;

      if (Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["isSimpleObject"])(identifiers)) {
        parsedIdentifiers = [Object.keys(identifiers)];
        parsedIdentifiers = [].concat(_toConsumableArray(parsedIdentifiers), _toConsumableArray(Object(muze_utils__WEBPACK_IMPORTED_MODULE_1__["transposeArray"])(Object.values(identifiers))));
      }

      for (var i = 0; i < len; i++) {
        var layer = layers[i];

        if (layer.config().interactive !== false) {
          points = [].concat(_toConsumableArray(points), _toConsumableArray(layer.getPointsFromIdentifiers(parsedIdentifiers, config)));
        }
      }

      return points;
    }
    /**
     * Removes the layer instance which matches the supplied layer name.
     *
     * @public
     * @param {string} name Name of layer
     *
     * @return {VisualUnit} Instance of visual unit.
     */

  }, {
    key: "removeLayerByName",
    value: function removeLayerByName(name) {
      Object(_helper__WEBPACK_IMPORTED_MODULE_4__["removeLayersBy"])('name', name);
      return this;
    }
    /**
     * Removes all the layer instances which matches the supplied mark type.
     *
     * @public
     * @param {string} type Mark type of layer.
     *
     * @return {VisualUnit} Instance of visual unit.
     */

  }, {
    key: "removeLayersByType",
    value: function removeLayersByType(type) {
      Object(_helper__WEBPACK_IMPORTED_MODULE_4__["removeLayersBy"])('type', type);
      return this;
    }
  }], [{
    key: "formalName",
    value: function formalName() {
      return FORMAL_NAME;
    }
  }, {
    key: "getState",
    value: function getState() {
      return [{
        domain: {}
      }, _local_options__WEBPACK_IMPORTED_MODULE_6__["default"]];
    }
  }, {
    key: "create",
    value: function create() {
      for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {
        params[_key] = arguments[_key];
      }

      return _construct(this, params);
    }
  }]);

  return VisualUnit;
}();



/***/ })

/******/ });
});
//# sourceMappingURL=muze.js.map